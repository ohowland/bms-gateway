!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],i=n.slice,r=n.concat,o=n.push,a=n.indexOf,s={},l=s.toString,c=s.hasOwnProperty,u={},d="1.11.2",h=function(e,t){return new h.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,f=/^-ms-/,g=/-([\da-z])/gi,m=function(e,t){return t.toUpperCase()};function v(e){var t=e.length,n=h.type(e);return"function"!==n&&!h.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}h.fn=h.prototype={jquery:d,constructor:h,selector:"",length:0,toArray:function(){return i.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:i.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return h.each(this,e,t)},map:function(e){return this.pushStack(h.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:n.sort,splice:n.splice},h.extend=h.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||h.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(r=arguments[s]))for(i in r)e=a[i],a!==(n=r[i])&&(c&&n&&(h.isPlainObject(n)||(t=h.isArray(n)))?(t?(t=!1,o=e&&h.isArray(e)?e:[]):o=e&&h.isPlainObject(e)?e:{},a[i]=h.extend(c,o,n)):void 0!==n&&(a[i]=n));return a},h.extend({expando:"jQuery"+(d+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray||function(e){return"array"===h.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!h.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==h.type(e)||e.nodeType||h.isWindow(e))return!1;try{if(e.constructor&&!c.call(e,"constructor")&&!c.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(u.ownLast)for(t in e)return c.call(e,t);for(t in e);return void 0===t||c.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?s[l.call(e)]||"object":typeof e},globalEval:function(t){t&&h.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(f,"ms-").replace(g,m)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,r=e.length,o=v(e);if(n){if(o)for(;r>i&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(o)for(;r>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(v(Object(e))?h.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(a)return a.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!=n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;o>r;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,o=0,a=e.length,s=[];if(v(e))for(;a>o;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return r.apply([],s)},guid:1,proxy:function(e,t){var n,r,o;return"string"==typeof t&&(o=e[t],t=e,e=o),h.isFunction(e)?(n=i.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(i.call(arguments)))}).guid=e.guid=e.guid||h.guid++,r):void 0},now:function(){return+new Date},support:u}),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){s["[object "+t+"]"]=t.toLowerCase()});var _=function(e){var t,n,i,r,o,a,s,l,c,u,d,h,p,f,g,m,v,_,y,b="sizzle"+1*new Date,w=e.document,k=0,x=0,C=ae(),T=ae(),S=ae(),D=function(e,t){return e===t&&(d=!0),0},A=1<<31,M={}.hasOwnProperty,E=[],I=E.pop,R=E.push,P=E.push,L=E.slice,F=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=H.replace("w","w#"),O="\\["+z+"*("+H+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+z+"*\\]",V=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",U=new RegExp(z+"+","g"),W=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),j=new RegExp("^"+z+"*,"+z+"*"),q=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),G=new RegExp("="+z+"*([^\\]'\"]*?)"+z+"*\\]","g"),$=new RegExp(V),Y=new RegExp("^"+N+"$"),Q={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+z+"?|("+z+")|.)","ig"),ie=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},re=function(){h()};try{P.apply(E=L.call(w.childNodes),w.childNodes),E[w.childNodes.length].nodeType}catch(e){P={apply:E.length?function(e,t){R.apply(e,L.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function oe(e,t,i,r){var o,s,c,u,d,f,v,_,k,x;if((t?t.ownerDocument||t:w)!==p&&h(t),t=t||p,i=i||[],u=t.nodeType,"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return i;if(!r&&g){if(11!==u&&(o=J.exec(e)))if(c=o[1]){if(9===u){if(!(s=t.getElementById(c))||!s.parentNode)return i;if(s.id===c)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(c))&&y(t,s)&&s.id===c)return i.push(s),i}else{if(o[2])return P.apply(i,t.getElementsByTagName(e)),i;if((c=o[3])&&n.getElementsByClassName)return P.apply(i,t.getElementsByClassName(c)),i}if(n.qsa&&(!m||!m.test(e))){if(_=v=b,k=t,x=1!==u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(f=a(e),(v=t.getAttribute("id"))?_=v.replace(te,"\\$&"):t.setAttribute("id",_),_="[id='"+_+"'] ",d=f.length;d--;)f[d]=_+me(f[d]);k=ee.test(e)&&fe(t.parentNode)||t,x=f.join(",")}if(x)try{return P.apply(i,k.querySelectorAll(x)),i}catch(e){}finally{v||t.removeAttribute("id")}}}return l(e.replace(W,"$1"),t,i,r)}function ae(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function se(e){return e[b]=!0,e}function le(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),r=e.length;r--;)i.attrHandle[n[r]]=t}function ue(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pe(e){return se(function(t){return t=+t,se(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=oe.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:w;return a!==p&&9===a.nodeType&&a.documentElement?(p=a,f=a.documentElement,(r=a.defaultView)&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",re,!1):r.attachEvent&&r.attachEvent("onunload",re)),g=!o(a),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(a.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(a.getElementsByClassName),n.getById=le(function(e){return f.appendChild(e).id=b,!a.getElementsByName||!a.getElementsByName(b).length}),n.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(ne,ie);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(ne,ie);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){return g?t.getElementsByClassName(e):void 0},v=[],m=[],(n.qsa=Z.test(a.querySelectorAll))&&(le(function(e){f.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+z+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+b+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")}),le(function(e){var t=a.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+z+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(_=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le(function(e){n.disconnectedMatch=_.call(e,"div"),_.call(e,"[s!='']:x"),v.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Z.test(f.compareDocumentPosition),y=t||Z.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===a||e.ownerDocument===w&&y(w,e)?-1:t===a||t.ownerDocument===w&&y(w,t)?1:u?F(u,e)-F(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!r||!o)return e===a?-1:t===a?1:r?-1:o?1:u?F(u,e)-F(u,t):0;if(r===o)return ue(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?ue(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},a):p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(G,"='$1']"),!(!n.matchesSelector||!g||v&&v.test(t)||m&&m.test(t)))try{var i=_.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return oe(t,p,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),y(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var r=i.attrHandle[t.toLowerCase()],o=r&&M.call(i.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],r=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(D),d){for(;t=e[o++];)t===e[o]&&(r=i.push(o));for(;r--;)e.splice(i[r],1)}return u=null,e},r=oe.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=oe.selectors={cacheLength:50,createPseudo:se,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+z+")"+e+"("+z+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=oe.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),_=!l&&!s;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&_){for(p=(c=(u=m[b]||(m[b]={}))[e]||[])[0]===k&&c[1],h=c[0]===k&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[k,p,h];break}}else if(_&&(c=(t[b]||(t[b]={}))[e])&&c[0]===k)h=c[1];else for(;(d=++p&&d&&d[g]||(h=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(_&&((d[b]||(d[b]={}))[e]=[k,h]),d!==t)););return(h-=r)===i||h%i==0&&h/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=F(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:se(function(e){var t=[],n=[],i=s(e.replace(W,"$1"));return i[b]?se(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(ne,ie),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:se(function(e){return Y.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(ne,ie).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[0>n?n+t:n]}),even:pe(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:pe(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=he(t);function ge(){}function me(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function ve(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=x++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,l,c=[k,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if((s=(l=t[b]||(t[b]={}))[i])&&s[0]===k&&s[1]===o)return c[2]=s[2];if(l[i]=c,c[2]=e(t,n,a))return!0}}}function _e(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function ye(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),c&&t.push(s));return a}function be(e,t,n,i,r,o){return i&&!i[b]&&(i=be(i)),r&&!r[b]&&(r=be(r,o)),se(function(o,a,s,l){var c,u,d,h=[],p=[],f=a.length,g=o||function(e,t,n){for(var i=0,r=t.length;r>i;i++)oe(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:ye(g,h,e,s,l),v=n?r||(o?e:f||i)?[]:a:m;if(n&&n(m,v,s,l),i)for(c=ye(v,p),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[p[u]]=!(m[p[u]]=d));if(o){if(r||e){if(r){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(m[u]=d);r(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=r?F(o,d):h[u])>-1&&(o[c]=!(a[c]=d))}}else v=ye(v===a?v.splice(f,v.length):v),r?r(null,a,v,l):P.apply(a,v)})}function we(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,u=ve(function(e){return e===t},s,!0),d=ve(function(e){return F(t,e)>-1},s,!0),h=[function(e,n,i){var r=!a&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,r}];o>l;l++)if(n=i.relative[e[l].type])h=[ve(_e(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(r=++l;o>r&&!i.relative[e[r].type];r++);return be(l>1&&_e(h),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(W,"$1"),n,r>l&&we(e.slice(l,r)),o>r&&we(e=e.slice(r)),o>r&&me(e))}h.push(n)}return _e(h)}function ke(e,t){var n=t.length>0,r=e.length>0,o=function(o,a,s,l,u){var d,h,f,g=0,m="0",v=o&&[],_=[],y=c,b=o||r&&i.find.TAG("*",u),w=k+=null==y?1:Math.random()||.1,x=b.length;for(u&&(c=a!==p&&a);m!==x&&null!=(d=b[m]);m++){if(r&&d){for(h=0;f=e[h++];)if(f(d,a,s)){l.push(d);break}u&&(k=w)}n&&((d=!f&&d)&&g--,o&&v.push(d))}if(g+=m,n&&m!==g){for(h=0;f=t[h++];)f(v,_,a,s);if(o){if(g>0)for(;m--;)v[m]||_[m]||(_[m]=I.call(l));_=ye(_)}P.apply(l,_),u&&!o&&_.length>0&&g+t.length>1&&oe.uniqueSort(l)}return u&&(k=w,c=y),v};return n?se(o):o}return ge.prototype=i.filters=i.pseudos,i.setFilters=new ge,a=oe.tokenize=function(e,t){var n,r,o,a,s,l,c,u=T[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=i.preFilter;s;){for(a in(!n||(r=j.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=q.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length)),i.filter)!(r=Q[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):T(e,l).slice(0)},s=oe.compile=function(e,t){var n,i=[],r=[],o=S[e+" "];if(!o){for(t||(t=a(e)),n=t.length;n--;)(o=we(t[n]))[b]?i.push(o):r.push(o);(o=S(e,ke(r,i))).selector=e}return o},l=oe.select=function(e,t,r,o){var l,c,u,d,h,p="function"==typeof e&&e,f=!o&&a(e=p.selector||e);if(r=r||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&n.getById&&9===t.nodeType&&g&&i.relative[c[1].type]){if(!(t=(i.find.ID(u.matches[0].replace(ne,ie),t)||[])[0]))return r;p&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=Q.needsContext.test(e)?0:c.length;l--&&(u=c[l],!i.relative[d=u.type]);)if((h=i.find[d])&&(o=h(u.matches[0].replace(ne,ie),ee.test(c[0].type)&&fe(t.parentNode)||t))){if(c.splice(l,1),!(e=o.length&&me(c)))return P.apply(r,o),r;break}}return(p||s(e,f))(o,t,!g,r,ee.test(e)&&fe(t.parentNode)||t),r},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(B,function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),oe}(e);h.find=_,h.expr=_.selectors,h.expr[":"]=h.expr.pseudos,h.unique=_.uniqueSort,h.text=_.getText,h.isXMLDoc=_.isXML,h.contains=_.contains;var y=h.expr.match.needsContext,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function k(e,t,n){if(h.isFunction(t))return h.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return h.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(w.test(t))return h.filter(t,e,n);t=h.filter(t,e)}return h.grep(e,function(e){return h.inArray(e,t)>=0!==n})}h.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?h.find.matchesSelector(i,e)?[i]:[]:h.find.matches(e,h.grep(t,function(e){return 1===e.nodeType}))},h.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(h(e).filter(function(){for(t=0;r>t;t++)if(h.contains(i[t],this))return!0}));for(t=0;r>t;t++)h.find(e,i[t],n);return(n=this.pushStack(r>1?h.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&y.test(e)?h(e):e||[],!1).length}});var x,C=e.document,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(h.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e))||!n[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),b.test(n[1])&&h.isPlainObject(t))for(n in t)h.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((i=C.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return x.find(e);this.length=1,this[0]=i}return this.context=C,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?void 0!==x.ready?x.ready(e):e(h):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))}).prototype=h.fn,x=h(C);var S=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}h.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!h(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),h.fn.extend({has:function(e){var t,n=h(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(h.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=y.test(e)||"string"!=typeof e?h(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&h.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?h.unique(o):o)},index:function(e){return e?"string"==typeof e?h.inArray(this[0],h(e)):h.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.unique(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),h.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h.dir(e,"parentNode")},parentsUntil:function(e,t,n){return h.dir(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return h.dir(e,"nextSibling")},prevAll:function(e){return h.dir(e,"previousSibling")},nextUntil:function(e,t,n){return h.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return h.dir(e,"previousSibling",n)},siblings:function(e){return h.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return h.sibling(e.firstChild)},contents:function(e){return h.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(n,i){var r=h.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=h.filter(i,r)),this.length>1&&(D[e]||(r=h.unique(r)),S.test(e)&&(r=r.reverse())),this.pushStack(r)}});var M,E=/\S+/g,I={};function R(){C.addEventListener?(C.removeEventListener("DOMContentLoaded",P,!1),e.removeEventListener("load",P,!1)):(C.detachEvent("onreadystatechange",P),e.detachEvent("onload",P))}function P(){(C.addEventListener||"load"===event.type||"complete"===C.readyState)&&(R(),h.ready())}h.Callbacks=function(e){var t,n,i,r,o,a,s=[],l=!(e="string"==typeof e?I[e]||function(e){var t=I[e]={};return h.each(e.match(E)||[],function(e,n){t[n]=!0}),t}(e):h.extend({},e)).once&&[],c=function(d){for(n=e.memory&&d,i=!0,o=a||0,a=0,r=s.length,t=!0;s&&r>o;o++)if(!1===s[o].apply(d[0],d[1])&&e.stopOnFalse){n=!1;break}t=!1,s&&(l?l.length&&c(l.shift()):n?s=[]:u.disable())},u={add:function(){if(s){var i=s.length;!function t(n){h.each(n,function(n,i){var r=h.type(i);"function"===r?e.unique&&u.has(i)||s.push(i):i&&i.length&&"string"!==r&&t(i)})}(arguments),t?r=s.length:n&&(a=i,c(n))}return this},remove:function(){return s&&h.each(arguments,function(e,n){for(var i;(i=h.inArray(n,s,i))>-1;)s.splice(i,1),t&&(r>=i&&r--,o>=i&&o--)}),this},has:function(e){return e?h.inArray(e,s)>-1:!(!s||!s.length)},empty:function(){return s=[],r=0,this},disable:function(){return s=l=n=void 0,this},disabled:function(){return!s},lock:function(){return l=void 0,n||u.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!s||i&&!l||(n=[e,(n=n||[]).slice?n.slice():n],t?l.push(n):c(n)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(n){h.each(t,function(t,o){var a=h.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?h.extend(e,i):i}},r={};return i.pipe=i.then,h.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,r,o=0,a=i.call(arguments),s=a.length,l=1!==s||e&&h.isFunction(e.promise)?s:0,c=1===l?e:h.Deferred(),u=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?i.call(arguments):o,r===t?c.notifyWith(n,r):--l||c.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>o;o++)a[o]&&h.isFunction(a[o].promise)?a[o].promise().done(u(o,r,a)).fail(c.reject).progress(u(o,n,t)):--l;return l||c.resolveWith(r,a),c.promise()}}),h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){if(!0===e?!--h.readyWait:!h.isReady){if(!C.body)return setTimeout(h.ready);h.isReady=!0,!0!==e&&--h.readyWait>0||(M.resolveWith(C,[h]),h.fn.triggerHandler&&(h(C).triggerHandler("ready"),h(C).off("ready")))}}}),h.ready.promise=function(t){if(!M)if(M=h.Deferred(),"complete"===C.readyState)setTimeout(h.ready);else if(C.addEventListener)C.addEventListener("DOMContentLoaded",P,!1),e.addEventListener("load",P,!1);else{C.attachEvent("onreadystatechange",P),e.attachEvent("onload",P);var n=!1;try{n=null==e.frameElement&&C.documentElement}catch(e){}n&&n.doScroll&&function e(){if(!h.isReady){try{n.doScroll("left")}catch(t){return setTimeout(e,50)}R(),h.ready()}}()}return M.promise(t)};var L,F="undefined";for(L in h(u))break;u.ownLast="0"!==L,u.inlineBlockNeedsLayout=!1,h(function(){var e,t,n,i;(n=C.getElementsByTagName("body")[0])&&n.style&&(t=C.createElement("div"),(i=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==F&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",u.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=C.createElement("div");if(null==u.deleteExpando){u.deleteExpando=!0;try{delete e.test}catch(e){u.deleteExpando=!1}}e=null}(),h.acceptData=function(e){var t=h.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var B=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/([A-Z])/g;function H(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(z,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:B.test(n)?h.parseJSON(n):n)}catch(e){}h.data(e,t,n)}else n=void 0}return n}function N(e){var t;for(t in e)if(("data"!==t||!h.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function O(e,t,i,r){if(h.acceptData(e)){var o,a,s=h.expando,l=e.nodeType,c=l?h.cache:e,u=l?e[s]:e[s]&&s;if(u&&c[u]&&(r||c[u].data)||void 0!==i||"string"!=typeof t)return u||(u=l?e[s]=n.pop()||h.guid++:s),c[u]||(c[u]=l?{}:{toJSON:h.noop}),("object"==typeof t||"function"==typeof t)&&(r?c[u]=h.extend(c[u],t):c[u].data=h.extend(c[u].data,t)),a=c[u],r||(a.data||(a.data={}),a=a.data),void 0!==i&&(a[h.camelCase(t)]=i),"string"==typeof t?null==(o=a[t])&&(o=a[h.camelCase(t)]):o=a,o}}function V(e,t,n){if(h.acceptData(e)){var i,r,o=e.nodeType,a=o?h.cache:e,s=o?e[h.expando]:h.expando;if(a[s]){if(t&&(i=n?a[s]:a[s].data)){h.isArray(t)?t=t.concat(h.map(t,h.camelCase)):t in i?t=[t]:t=(t=h.camelCase(t))in i?[t]:t.split(" "),r=t.length;for(;r--;)delete i[t[r]];if(n?!N(i):!h.isEmptyObject(i))return}(n||(delete a[s].data,N(a[s])))&&(o?h.cleanData([e],!0):u.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}h.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?h.cache[e[h.expando]]:e[h.expando])&&!N(e)},data:function(e,t,n){return O(e,t,n)},removeData:function(e,t){return V(e,t)},_data:function(e,t,n){return O(e,t,n,!0)},_removeData:function(e,t){return V(e,t,!0)}}),h.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=h.data(o),1===o.nodeType&&!h._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(0===(i=a[n].name).indexOf("data-")&&H(o,i=h.camelCase(i.slice(5)),r[i]));h._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){h.data(this,e)}):arguments.length>1?this.each(function(){h.data(this,e,t)}):o?H(o,e,h.data(o,e)):void 0},removeData:function(e){return this.each(function(){h.removeData(this,e)})}}),h.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=h._data(e,t),n&&(!i||h.isArray(n)?i=h._data(e,t,h.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=h.queue(e,t),i=n.length,r=n.shift(),o=h._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){h.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return h._data(e,n)||h._data(e,n,{empty:h.Callbacks("once memory").add(function(){h._removeData(e,t+"queue"),h._removeData(e,n)})})}}),h.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?h.queue(this[0],e):void 0===t?this:this.each(function(){var n=h.queue(this,e,t);h._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=h.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=h._data(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=["Top","Right","Bottom","Left"],j=function(e,t){return e=t||e,"none"===h.css(e,"display")||!h.contains(e.ownerDocument,e)},q=h.access=function(e,t,n,i,r,o,a){var s=0,l=e.length,c=null==n;if("object"===h.type(n))for(s in r=!0,n)h.access(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,h.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(h(e),n)})),t))for(;l>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):o},G=/^(?:checkbox|radio)$/i;!function(){var e=C.createElement("input"),t=C.createElement("div"),n=C.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",u.leadingWhitespace=3===t.firstChild.nodeType,u.tbody=!t.getElementsByTagName("tbody").length,u.htmlSerialize=!!t.getElementsByTagName("link").length,u.html5Clone="<:nav></:nav>"!==C.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),u.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",u.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",u.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,u.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){u.noCloneEvent=!1}),t.cloneNode(!0).click()),null==u.deleteExpando){u.deleteExpando=!0;try{delete t.test}catch(e){u.deleteExpando=!1}}}(),function(){var t,n,i=C.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(u[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),u[t+"Bubbles"]=!1===i.attributes[n].expando);i=null}();var $=/^(?:input|select|textarea)$/i,Y=/^key/,Q=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,K=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function J(){return!1}function ee(){try{return C.activeElement}catch(e){}}function te(e){var t=ne.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}h.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,c,u,d,p,f,g,m,v=h._data(e);if(v){for(n.handler&&(n=(l=n).handler,r=l.selector),n.guid||(n.guid=h.guid++),(a=v.events)||(a=v.events={}),(u=v.handle)||((u=v.handle=function(e){return typeof h===F||e&&h.event.triggered===e.type?void 0:h.event.dispatch.apply(u.elem,arguments)}).elem=e),s=(t=(t||"").match(E)||[""]).length;s--;)f=m=(o=K.exec(t[s])||[])[1],g=(o[2]||"").split(".").sort(),f&&(c=h.event.special[f]||{},f=(r?c.delegateType:c.bindType)||f,c=h.event.special[f]||{},d=h.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&h.expr.match.needsContext.test(r),namespace:g.join(".")},l),(p=a[f])||((p=a[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,i,g,u)||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),h.event.global[f]=!0);e=null}},remove:function(e,t,n,i,r){var o,a,s,l,c,u,d,p,f,g,m,v=h.hasData(e)&&h._data(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(E)||[""]).length;c--;)if(f=m=(s=K.exec(t[c])||[])[1],g=(s[2]||"").split(".").sort(),f){for(d=h.event.special[f]||{},p=u[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=p.length;o--;)a=p[o],!r&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(p.splice(o,1),a.selector&&p.delegateCount--,d.remove&&d.remove.call(e,a));l&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,g,v.handle)||h.removeEvent(e,f,v.handle),delete u[f])}else for(f in u)h.event.remove(e,f+t[c],n,i,!0);h.isEmptyObject(u)&&(delete v.handle,h._removeData(e,"events"))}},trigger:function(t,n,i,r){var o,a,s,l,u,d,p,f=[i||C],g=c.call(t,"type")?t.type:t,m=c.call(t,"namespace")?t.namespace.split("."):[];if(s=d=i=i||C,3!==i.nodeType&&8!==i.nodeType&&!X.test(g+h.event.triggered)&&(g.indexOf(".")>=0&&(g=(m=g.split(".")).shift(),m.sort()),a=g.indexOf(":")<0&&"on"+g,(t=t[h.expando]?t:new h.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:h.makeArray(n,[t]),u=h.event.special[g]||{},r||!u.trigger||!1!==u.trigger.apply(i,n))){if(!r&&!u.noBubble&&!h.isWindow(i)){for(l=u.delegateType||g,X.test(l+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),d=s;d===(i.ownerDocument||C)&&f.push(d.defaultView||d.parentWindow||e)}for(p=0;(s=f[p++])&&!t.isPropagationStopped();)t.type=p>1?l:u.bindType||g,(o=(h._data(s,"events")||{})[t.type]&&h._data(s,"handle"))&&o.apply(s,n),(o=a&&s[a])&&o.apply&&h.acceptData(s)&&(t.result=o.apply(s,n),!1===t.result&&t.preventDefault());if(t.type=g,!r&&!t.isDefaultPrevented()&&(!u._default||!1===u._default.apply(f.pop(),n))&&h.acceptData(i)&&a&&i[g]&&!h.isWindow(i)){(d=i[a])&&(i[a]=null),h.event.triggered=g;try{i[g]()}catch(e){}h.event.triggered=void 0,d&&(i[a]=d)}return t.result}},dispatch:function(e){e=h.event.fix(e);var t,n,r,o,a,s=[],l=i.call(arguments),c=(h._data(this,"events")||{})[e.type]||[],u=h.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(s=h.event.handlers.call(this,e,c),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(r=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,void 0!==(n=((h.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],o=0;s>o;o++)void 0===r[n=(i=t[o]).selector+" "]&&(r[n]=i.needsContext?h(n,this).index(l)>=0:h.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[h.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Q.test(r)?this.mouseHooks:Y.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new h.Event(o),t=i.length;t--;)e[n=i[t]]=o[n];return e.target||(e.target=o.srcElement||C),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(i=e.target.ownerDocument||C).documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ee()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ee()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return h.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=h.extend(new h.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?h.event.trigger(r,null,t):h.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},h.removeEvent=C.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===F&&(e[i]=null),e.detachEvent(i,n))},h.Event=function(e,t){return this instanceof h.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Z:J):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),void(this[h.expando]=!0)):new h.Event(e,t)},h.Event.prototype={isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return(!i||i!==this&&!h.contains(this,i))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),u.submitBubbles||(h.event.special.submit={setup:function(){return!h.nodeName(this,"form")&&void h.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=h.nodeName(t,"input")||h.nodeName(t,"button")?t.form:void 0;n&&!h._data(n,"submitBubbles")&&(h.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),h._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&h.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!h.nodeName(this,"form")&&void h.event.remove(this,"._submit")}}),u.changeBubbles||(h.event.special.change={setup:function(){return $.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(h.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),h.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),h.event.simulate("change",this,e,!0)})),!1):void h.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!h._data(t,"changeBubbles")&&(h.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||h.event.simulate("change",this.parentNode,e,!0)}),h._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return h.event.remove(this,"._change"),!$.test(this.nodeName)}}),u.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){h.event.simulate(t,e.target,h.event.fix(e),!0)};h.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=h._data(i,t);r||i.addEventListener(e,n,!0),h._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=h._data(i,t)-1;r?h._data(i,t,r):(i.removeEventListener(e,n,!0),h._removeData(i,t))}}}),h.fn.extend({on:function(e,t,n,i,r){var o,a;if("object"==typeof e){for(o in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(o,t,n,e[o],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),!1===i)i=J;else if(!i)return this;return 1===r&&(a=i,(i=function(e){return h().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=h.guid++)),this.each(function(){h.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,h(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=J),this.each(function(){h.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?h.event.trigger(e,t,n,!0):void 0}});var ne="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ie=/ jQuery\d+="(?:null|\d+)"/g,re=new RegExp("<(?:"+ne+")[\\s/>]","i"),oe=/^\s+/,ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,se=/<([\w:]+)/,le=/<tbody/i,ce=/<|&#?\w+;/,ue=/<(?:script|style|link)/i,de=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^$|\/(?:java|ecma)script/i,pe=/^true\/(.*)/,fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ge={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:u.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},me=te(C).appendChild(C.createElement("div"));function ve(e,t){var n,i,r=0,o=typeof e.getElementsByTagName!==F?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==F?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||h.nodeName(i,t)?o.push(i):h.merge(o,ve(i,t));return void 0===t||t&&h.nodeName(e,t)?h.merge([e],o):o}function _e(e){G.test(e.type)&&(e.defaultChecked=e.checked)}function ye(e,t){return h.nodeName(e,"table")&&h.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function be(e){return e.type=(null!==h.find.attr(e,"type"))+"/"+e.type,e}function we(e){var t=pe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ke(e,t){for(var n,i=0;null!=(n=e[i]);i++)h._data(n,"globalEval",!t||h._data(t[i],"globalEval"))}function xe(e,t){if(1===t.nodeType&&h.hasData(e)){var n,i,r,o=h._data(e),a=h._data(t,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(i=0,r=s[n].length;r>i;i++)h.event.add(t,n,s[n][i]);a.data&&(a.data=h.extend({},a.data))}}function Ce(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!u.noCloneEvent&&t[h.expando]){for(i in(r=h._data(t)).events)h.removeEvent(t,i,r.handle);t.removeAttribute(h.expando)}"script"===n&&t.text!==e.text?(be(t).text=e.text,we(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),u.html5Clone&&e.innerHTML&&!h.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&G.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,h.extend({clone:function(e,t,n){var i,r,o,a,s,l=h.contains(e.ownerDocument,e);if(u.html5Clone||h.isXMLDoc(e)||!re.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(me.innerHTML=e.outerHTML,me.removeChild(o=me.firstChild)),!(u.noCloneEvent&&u.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||h.isXMLDoc(e)))for(i=ve(o),s=ve(e),a=0;null!=(r=s[a]);++a)i[a]&&Ce(r,i[a]);if(t)if(n)for(s=s||ve(e),i=i||ve(o),a=0;null!=(r=s[a]);a++)xe(r,i[a]);else xe(e,o);return(i=ve(o,"script")).length>0&&ke(i,!l&&ve(e,"script")),i=s=r=null,o},buildFragment:function(e,t,n,i){for(var r,o,a,s,l,c,d,p=e.length,f=te(t),g=[],m=0;p>m;m++)if((o=e[m])||0===o)if("object"===h.type(o))h.merge(g,o.nodeType?[o]:o);else if(ce.test(o)){for(s=s||f.appendChild(t.createElement("div")),l=(se.exec(o)||["",""])[1].toLowerCase(),d=ge[l]||ge._default,s.innerHTML=d[1]+o.replace(ae,"<$1></$2>")+d[2],r=d[0];r--;)s=s.lastChild;if(!u.leadingWhitespace&&oe.test(o)&&g.push(t.createTextNode(oe.exec(o)[0])),!u.tbody)for(r=(o="table"!==l||le.test(o)?"<table>"!==d[1]||le.test(o)?0:s:s.firstChild)&&o.childNodes.length;r--;)h.nodeName(c=o.childNodes[r],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(h.merge(g,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else g.push(t.createTextNode(o));for(s&&f.removeChild(s),u.appendChecked||h.grep(ve(g,"input"),_e),m=0;o=g[m++];)if((!i||-1===h.inArray(o,i))&&(a=h.contains(o.ownerDocument,o),s=ve(f.appendChild(o),"script"),a&&ke(s),n))for(r=0;o=s[r++];)he.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var i,r,o,a,s=0,l=h.expando,c=h.cache,d=u.deleteExpando,p=h.event.special;null!=(i=e[s]);s++)if((t||h.acceptData(i))&&(a=(o=i[l])&&c[o])){if(a.events)for(r in a.events)p[r]?h.event.remove(i,r):h.removeEvent(i,r,a.handle);c[o]&&(delete c[o],d?delete i[l]:typeof i.removeAttribute!==F?i.removeAttribute(l):i[l]=null,n.push(o))}}}),h.fn.extend({text:function(e){return q(this,function(e){return void 0===e?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||C).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ye(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ye(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?h.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||h.cleanData(ve(n)),n.parentNode&&(t&&h.contains(n.ownerDocument,n)&&ke(ve(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&h.cleanData(ve(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&h.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return q(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ie,""):void 0;if(!("string"!=typeof e||ue.test(e)||!u.htmlSerialize&&re.test(e)||!u.leadingWhitespace&&oe.test(e)||ge[(se.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(ae,"<$1></$2>");try{for(;i>n;n++)1===(t=this[n]||{}).nodeType&&(h.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,h.cleanData(ve(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=r.apply([],e);var n,i,o,a,s,l,c=0,d=this.length,p=this,f=d-1,g=e[0],m=h.isFunction(g);if(m||d>1&&"string"==typeof g&&!u.checkClone&&de.test(g))return this.each(function(n){var i=p.eq(n);m&&(e[0]=g.call(this,n,i.html())),i.domManip(e,t)});if(d&&(n=(l=h.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=n),n)){for(o=(a=h.map(ve(l,"script"),be)).length;d>c;c++)i=l,c!==f&&(i=h.clone(i,!0,!0),o&&h.merge(a,ve(i,"script"))),t.call(this[c],i,c);if(o)for(s=a[a.length-1].ownerDocument,h.map(a,we),c=0;o>c;c++)i=a[c],he.test(i.type||"")&&!h._data(i,"globalEval")&&h.contains(s,i)&&(i.src?h._evalUrl&&h._evalUrl(i.src):h.globalEval((i.text||i.textContent||i.innerHTML||"").replace(fe,"")));l=n=null}return this}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){for(var n,i=0,r=[],a=h(e),s=a.length-1;s>=i;i++)n=i===s?this:this.clone(!0),h(a[i])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var Te,Se={};function De(t,n){var i,r=h(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:h.css(r[0],"display");return r.detach(),o}function Ae(e){var t=C,n=Se[e];return n||("none"!==(n=De(e,t))&&n||((t=((Te=(Te||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||Te[0].contentDocument).document).write(),t.close(),n=De(e,t),Te.detach()),Se[e]=n),n}!function(){var e;u.shrinkWrapBlocks=function(){return null!=e?e:(e=!1,(n=C.getElementsByTagName("body")[0])&&n.style?(t=C.createElement("div"),(i=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==F&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(C.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0);var t,n,i}}();var Me,Ee,Ie=/^margin/,Re=new RegExp("^("+U+")(?!px)[a-z%]+$","i"),Pe=/^(top|right|bottom|left)$/;function Le(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}e.getComputedStyle?(Me=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},Ee=function(e,t,n){var i,r,o,a,s=e.style;return a=(n=n||Me(e))?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||h.contains(e.ownerDocument,e)||(a=h.style(e,t)),Re.test(a)&&Ie.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):C.documentElement.currentStyle&&(Me=function(e){return e.currentStyle},Ee=function(e,t,n){var i,r,o,a,s=e.style;return null==(a=(n=n||Me(e))?n[t]:void 0)&&s&&s[t]&&(a=s[t]),Re.test(a)&&!Pe.test(t)&&(i=s.left,(o=(r=e.runtimeStyle)&&r.left)&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){var t,n,i,r,o,a,s;if((t=C.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=(i=t.getElementsByTagName("a")[0])&&i.style){function l(){var t,n,i,l;(n=C.getElementsByTagName("body")[0])&&n.style&&(t=C.createElement("div"),(i=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=o=!1,s=!0,e.getComputedStyle&&(r="1%"!==(e.getComputedStyle(t,null)||{}).top,o="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,(l=t.appendChild(C.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",t.style.width="1px",s=!parseFloat((e.getComputedStyle(l,null)||{}).marginRight),t.removeChild(l)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(l=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",a=0===l[0].offsetHeight),n.removeChild(i))}n.cssText="float:left;opacity:.5",u.opacity="0.5"===n.opacity,u.cssFloat=!!n.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===t.style.backgroundClip,u.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,h.extend(u,{reliableHiddenOffsets:function(){return null==a&&l(),a},boxSizingReliable:function(){return null==o&&l(),o},pixelPosition:function(){return null==r&&l(),r},reliableMarginRight:function(){return null==s&&l(),s}})}}(),h.swap=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=n.apply(e,i||[]),t)e.style[o]=a[o];return r};var Fe=/alpha\([^)]*\)/i,Be=/opacity\s*=\s*([^)]*)/,ze=/^(none|table(?!-c[ea]).+)/,He=new RegExp("^("+U+")(.*)$","i"),Ne=new RegExp("^([+-])=("+U+")","i"),Oe={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ue=["Webkit","O","Moz","ms"];function We(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=Ue.length;r--;)if((t=Ue[r]+n)in e)return t;return i}function je(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)(i=e[a]).style&&(o[a]=h._data(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&j(i)&&(o[a]=h._data(i,"olddisplay",Ae(i.nodeName)))):(r=j(i),(n&&"none"!==n||!r)&&h._data(i,"olddisplay",r?n:h.css(i,"display"))));for(a=0;s>a;a++)(i=e[a]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function qe(e,t,n){var i=He.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function Ge(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=h.css(e,n+W[o],!0,r)),i?("content"===n&&(a-=h.css(e,"padding"+W[o],!0,r)),"margin"!==n&&(a-=h.css(e,"border"+W[o]+"Width",!0,r))):(a+=h.css(e,"padding"+W[o],!0,r),"padding"!==n&&(a+=h.css(e,"border"+W[o]+"Width",!0,r)));return a}function $e(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Me(e),a=u.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,o);if(0>=r||null==r){if((0>(r=Ee(e,t,o))||null==r)&&(r=e.style[t]),Re.test(r))return r;i=a&&(u.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+Ge(e,t,n||(a?"border":"content"),i,o)+"px"}function Ye(e,t,n,i,r){return new Ye.prototype.init(e,t,n,i,r)}h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ee(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:u.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=h.camelCase(t),l=e.style;if(t=h.cssProps[s]||(h.cssProps[s]=We(l,s)),a=h.cssHooks[t]||h.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:l[t];if("string"===(o=typeof n)&&(r=Ne.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(h.css(e,t)),o="number"),null!=n&&n==n&&("number"!==o||h.cssNumber[s]||(n+="px"),u.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,i)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,i){var r,o,a,s=h.camelCase(t);return t=h.cssProps[s]||(h.cssProps[s]=We(e.style,s)),(a=h.cssHooks[t]||h.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Ee(e,t,i)),"normal"===o&&t in Ve&&(o=Ve[t]),""===n||n?(r=parseFloat(o),!0===n||h.isNumeric(r)?r||0:o):o}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,n,i){return n?ze.test(h.css(e,"display"))&&0===e.offsetWidth?h.swap(e,Oe,function(){return $e(e,t,i)}):$e(e,t,i):void 0},set:function(e,n,i){var r=i&&Me(e);return qe(0,n,i?Ge(e,t,i,u.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,r),r):0)}}}),u.opacity||(h.cssHooks.opacity={get:function(e,t){return Be.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=h.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===h.trim(o.replace(Fe,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=Fe.test(o)?o.replace(Fe,r):o+" "+r)}}),h.cssHooks.marginRight=Le(u.reliableMarginRight,function(e,t){return t?h.swap(e,{display:"inline-block"},Ee,[e,"marginRight"]):void 0}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+W[i]+t]=o[i]||o[i-2]||o[0];return r}},Ie.test(e)||(h.cssHooks[e+t].set=qe)}),h.fn.extend({css:function(e,t){return q(this,function(e,t,n){var i,r,o={},a=0;if(h.isArray(t)){for(i=Me(e),r=t.length;r>a;a++)o[t[a]]=h.css(e,t[a],!1,i);return o}return void 0!==n?h.style(e,t,n):h.css(e,t)},e,t,arguments.length>1)},show:function(){return je(this,!0)},hide:function(){return je(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){j(this)?h(this).show():h(this).hide()})}}),h.Tween=Ye,Ye.prototype={constructor:Ye,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(h.cssNumber[n]?"":"px")},cur:function(){var e=Ye.propHooks[this.prop];return e&&e.get?e.get(this):Ye.propHooks._default.get(this)},run:function(e){var t,n=Ye.propHooks[this.prop];return this.pos=t=this.options.duration?h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ye.propHooks._default.set(this),this}},Ye.prototype.init.prototype=Ye.prototype,Ye.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=h.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[h.cssProps[e.prop]]||h.cssHooks[e.prop])?h.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ye.propHooks.scrollTop=Ye.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},h.fx=Ye.prototype.init,h.fx.step={};var Qe,Xe,Ke=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+U+")([a-z%]*)$","i"),Je=/queueHooks$/,et=[function(e,t,n){var i,r,o,a,s,l,c,d=this,p={},f=e.style,g=e.nodeType&&j(e),m=h._data(e,"fxshow");for(i in n.queue||(null==(s=h._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,h.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=h.css(e,"display"),"inline"===("none"===c?h._data(e,"olddisplay")||Ae(e.nodeName):c)&&"none"===h.css(e,"float")&&(u.inlineBlockNeedsLayout&&"inline"!==Ae(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",u.shrinkWrapBlocks()||d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),t)if(r=t[i],Ke.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}p[i]=m&&m[i]||h.style(e,i)}else c=void 0;if(h.isEmptyObject(p))"inline"===("none"===c?Ae(e.nodeName):c)&&(f.display=c);else for(i in m?"hidden"in m&&(g=m.hidden):m=h._data(e,"fxshow",{}),o&&(m.hidden=!g),g?h(e).show():d.done(function(){h(e).hide()}),d.done(function(){var t;for(t in h._removeData(e,"fxshow"),p)h.style(e,t,p[t])}),p)a=rt(g?m[i]:0,i,d),i in m||(m[i]=a.start,g&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}],tt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Ze.exec(t),o=r&&r[3]||(h.cssNumber[e]?"":"px"),a=(h.cssNumber[e]||"px"!==o&&+i)&&Ze.exec(h.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do{a/=s=s||".5",h.style(n.elem,e,a+o)}while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};function nt(){return setTimeout(function(){Qe=void 0}),Qe=h.now()}function it(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)i["margin"+(n=W[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function rt(e,t,n){for(var i,r=(tt[t]||[]).concat(tt["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function ot(e,t,n){var i,r,o=0,a=et.length,s=h.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Qe||nt(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),o=0,a=c.tweens.length;a>o;o++)c.tweens[o].run(i);return s.notifyWith(e,[c,i,n]),1>i&&a?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qe||nt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=h.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=h.camelCase(n)],o=e[n],h.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=h.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);a>o;o++)if(i=et[o].call(c,e,u,c.opts))return i;return h.map(u,rt,c),h.isFunction(c.opts.start)&&c.opts.start.call(e,c),h.fx.timer(h.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}h.Animation=h.extend(ot,{tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],tt[n]=tt[n]||[],tt[n].unshift(t)},prefilter:function(e,t){t?et.unshift(e):et.push(e)}}),h.speed=function(e,t,n){var i=e&&"object"==typeof e?h.extend({},e):{complete:n||!n&&t||h.isFunction(e)&&e,duration:e,easing:n&&t||t&&!h.isFunction(t)&&t};return i.duration=h.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in h.fx.speeds?h.fx.speeds[i.duration]:h.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){h.isFunction(i.old)&&i.old.call(this),i.queue&&h.dequeue(this,i.queue)},i},h.fn.extend({fadeTo:function(e,t,n,i){return this.filter(j).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=h.isEmptyObject(e),o=h.speed(t,n,i),a=function(){var t=ot(this,h.extend({},e),o);(r||h._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=h.timers,a=h._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&Je.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&h.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=h._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=h.timers,a=i?i.length:0;for(n.finish=!0,h.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),h.each(["toggle","show","hide"],function(e,t){var n=h.fn[t];h.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(it(t,!0),e,i,r)}}),h.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),h.timers=[],h.fx.tick=function(){var e,t=h.timers,n=0;for(Qe=h.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||h.fx.stop(),Qe=void 0},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){Xe||(Xe=setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){clearInterval(Xe),Xe=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(e,t){return e=h.fx&&h.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,r;(t=C.createElement("div")).setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],r=(n=C.createElement("select")).appendChild(C.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",u.getSetAttribute="t"!==t.className,u.style=/top/.test(i.getAttribute("style")),u.hrefNormalized="/a"===i.getAttribute("href"),u.checkOn=!!e.value,u.optSelected=r.selected,u.enctype=!!C.createElement("form").enctype,n.disabled=!0,u.optDisabled=!r.disabled,(e=C.createElement("input")).setAttribute("value",""),u.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),u.radioValue="t"===e.value}();var at=/\r/g;h.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=h.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,h(this).val()):e)?r="":"number"==typeof r?r+="":h.isArray(r)&&(r=h.map(r,function(e){return null==e?"":e+""})),(t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=h.valHooks[r.type]||h.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(at,""):null==n?"":n:void 0}}),h.extend({valHooks:{option:{get:function(e){var t=h.find.attr(e,"value");return null!=t?t:h.trim(h.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,l=0>r?s:o?r:0;s>l;l++)if(!(!(n=i[l]).selected&&l!==r||(u.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&h.nodeName(n.parentNode,"optgroup"))){if(t=h(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=h.makeArray(t),a=r.length;a--;)if(i=r[a],h.inArray(h.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(e){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){return h.isArray(t)?e.checked=h.inArray(h(e).val(),t)>=0:void 0}},u.checkOn||(h.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var st,lt,ct=h.expr.attrHandle,ut=/^(?:checked|selected)$/i,dt=u.getSetAttribute,ht=u.input;h.fn.extend({attr:function(e,t){return q(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===F?h.prop(e,t,n):(1===o&&h.isXMLDoc(e)||(t=t.toLowerCase(),i=h.attrHooks[t]||(h.expr.match.bool.test(t)?lt:st)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=h.find.attr(e,t))?void 0:r:null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void h.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(E);if(o&&1===e.nodeType)for(;n=o[r++];)i=h.propFix[n]||n,h.expr.match.bool.test(n)?ht&&dt||!ut.test(n)?e[i]=!1:e[h.camelCase("default-"+n)]=e[i]=!1:h.attr(e,n,""),e.removeAttribute(dt?n:i)},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&"radio"===t&&h.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),lt={set:function(e,t,n){return!1===t?h.removeAttr(e,n):ht&&dt||!ut.test(n)?e.setAttribute(!dt&&h.propFix[n]||n,n):e[h.camelCase("default-"+n)]=e[n]=!0,n}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ct[t]||h.find.attr;ct[t]=ht&&dt||!ut.test(t)?function(e,t,i){var r,o;return i||(o=ct[t],ct[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,ct[t]=o),r}:function(e,t,n){return n?void 0:e[h.camelCase("default-"+t)]?t.toLowerCase():null}}),ht&&dt||(h.attrHooks.value={set:function(e,t,n){return h.nodeName(e,"input")?void(e.defaultValue=t):st&&st.set(e,t,n)}}),dt||(st={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},ct.id=ct.name=ct.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},h.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:st.set},h.attrHooks.contenteditable={set:function(e,t,n){st.set(e,""!==t&&t,n)}},h.each(["width","height"],function(e,t){h.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),u.style||(h.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var pt=/^(?:input|select|textarea|button|object)$/i,ft=/^(?:a|area)$/i;h.fn.extend({prop:function(e,t){return q(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return e=h.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),h.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!h.isXMLDoc(e))&&(t=h.propFix[t]||t,r=h.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=h.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}}}),u.hrefNormalized||h.each(["href","src"],function(e,t){h.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),u.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),u.enctype||(h.propFix.enctype="encoding");var gt=/[\t\r\n\f]/g;h.fn.extend({addClass:function(e){var t,n,i,r,o,a,s=0,l=this.length,c="string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(E)||[];l>s;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(gt," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=h.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,i,r,o,a,s=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(E)||[];l>s;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(gt," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=e?h.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(h.isFunction(e)?function(n){h(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=h(this),o=e.match(E)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===F||"boolean"===n)&&(this.className&&h._data(this,"__className__",this.className),this.className=this.className||!1===e?"":h._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(gt," ").indexOf(t)>=0)return!0;return!1}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mt=h.now(),vt=/\?/,_t=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;h.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=h.trim(t+"");return r&&!h.trim(r.replace(_t,function(e,t,r,o){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!o-!r,"")}))?Function("return "+r)():h.error("Invalid JSON: "+t)},h.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{e.DOMParser?n=(new DOMParser).parseFromString(t,"text/xml"):((n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(t))}catch(e){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+t),n};var yt,bt,wt=/#.*$/,kt=/([?&])_=[^&]*/,xt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ct=/^(?:GET|HEAD)$/,Tt=/^\/\//,St=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Dt={},At={},Mt="*/".concat("*");try{bt=location.href}catch(e){(bt=C.createElement("a")).href="",bt=bt.href}function Et(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(E)||[];if(h.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function It(e,t,n,i){var r={},o=e===At;function a(s){var l;return r[s]=!0,h.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function Rt(e,t){var n,i,r=h.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&h.extend(!0,e,n),e}yt=St.exec(bt.toLowerCase())||[],h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(yt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Rt(Rt(e,h.ajaxSettings),t):Rt(h.ajaxSettings,e)},ajaxPrefilter:Et(Dt),ajaxTransport:Et(At),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,r,o,a,s,l,c,u=h.ajaxSetup({},t),d=u.context||u,p=u.context&&(d.nodeType||d.jquery)?h(d):h.event,f=h.Deferred(),g=h.Callbacks("once memory"),m=u.statusCode||{},v={},_={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!c)for(c={};t=xt.exec(o);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=_[n]=_[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),k(0,t),this}};if(f.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,u.url=((e||u.url||bt)+"").replace(wt,"").replace(Tt,yt[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=h.trim(u.dataType||"*").toLowerCase().match(E)||[""],null==u.crossDomain&&(n=St.exec(u.url.toLowerCase()),u.crossDomain=!(!n||n[1]===yt[1]&&n[2]===yt[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(yt[3]||("http:"===yt[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=h.param(u.data,u.traditional)),It(Dt,u,t,w),2===y)return w;for(i in(s=h.event&&u.global)&&0==h.active++&&h.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Ct.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(vt.test(r)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=kt.test(r)?r.replace(kt,"$1_="+mt++):r+(vt.test(r)?"&":"?")+"_="+mt++)),u.ifModified&&(h.lastModified[r]&&w.setRequestHeader("If-Modified-Since",h.lastModified[r]),h.etag[r]&&w.setRequestHeader("If-None-Match",h.etag[r])),(u.data&&u.hasContent&&!1!==u.contentType||t.contentType)&&w.setRequestHeader("Content-Type",u.contentType),w.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Mt+"; q=0.01":""):u.accepts["*"]),u.headers)w.setRequestHeader(i,u.headers[i]);if(u.beforeSend&&(!1===u.beforeSend.call(d,w,u)||2===y))return w.abort();for(i in b="abort",{success:1,error:1,complete:1})w[i](u[i]);if(l=It(At,u,t,w)){w.readyState=1,s&&p.trigger("ajaxSend",[w,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},u.timeout));try{y=1,l.send(v,k)}catch(e){if(!(2>y))throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,t,n,i){var c,v,_,b,k,x=t;2!==y&&(y=2,a&&clearTimeout(a),l=void 0,o=i||"",w.readyState=e>0?4:0,c=e>=200&&300>e||304===e,n&&(b=function(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}i||(i=a)}o=o||i}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}(u,w,n)),b=function(e,t,n,i){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(u,b,w,c),c?(u.ifModified&&((k=w.getResponseHeader("Last-Modified"))&&(h.lastModified[r]=k),(k=w.getResponseHeader("etag"))&&(h.etag[r]=k)),204===e||"HEAD"===u.type?x="nocontent":304===e?x="notmodified":(x=b.state,v=b.data,c=!(_=b.error))):(_=x,(e||!x)&&(x="error",0>e&&(e=0))),w.status=e,w.statusText=(t||x)+"",c?f.resolveWith(d,[v,x,w]):f.rejectWith(d,[w,x,_]),w.statusCode(m),m=void 0,s&&p.trigger(c?"ajaxSuccess":"ajaxError",[w,u,c?v:_]),g.fireWith(d,[w,x]),s&&(p.trigger("ajaxComplete",[w,u]),--h.active||h.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return h.get(e,t,n,"json")},getScript:function(e,t){return h.get(e,void 0,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,n,i,r){return h.isFunction(n)&&(r=r||i,i=n,n=void 0),h.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},h.fn.extend({wrapAll:function(e){if(h.isFunction(e))return this.each(function(t){h(this).wrapAll(e.call(this,t))});if(this[0]){var t=h(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(h.isFunction(e)?function(t){h(this).wrapInner(e.call(this,t))}:function(){var t=h(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(n){h(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!u.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||h.css(e,"display"))},h.expr.filters.visible=function(e){return!h.expr.filters.hidden(e)};var Pt=/%20/g,Lt=/\[\]$/,Ft=/\r?\n/g,Bt=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;function Ht(e,t,n,i){var r;if(h.isArray(t))h.each(t,function(t,r){n||Lt.test(e)?i(e,r):Ht(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==h.type(t))i(e,t);else for(r in t)Ht(e+"["+r+"]",t[r],n,i)}h.param=function(e,t){var n,i=[],r=function(e,t){t=h.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){r(this.name,this.value)});else for(n in e)Ht(n,e[n],t,r);return i.join("&").replace(Pt,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&zt.test(this.nodeName)&&!Bt.test(e)&&(this.checked||!G.test(e))}).map(function(e,t){var n=h(this).val();return null==n?null:h.isArray(n)?h.map(n,function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}}):{name:t.name,value:n.replace(Ft,"\r\n")}}).get()}}),h.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Ut()||function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:Ut;var Nt=0,Ot={},Vt=h.ajaxSettings.xhr();function Ut(){try{return new e.XMLHttpRequest}catch(e){}}e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Ot)Ot[e](void 0,!0)}),u.cors=!!Vt&&"withCredentials"in Vt,(Vt=u.ajax=!!Vt)&&h.ajaxTransport(function(e){var t;if(!e.crossDomain||u.cors)return{send:function(n,i){var r,o=e.xhr(),a=++Nt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];for(r in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(e.hasContent&&e.data||null),t=function(n,r){var s,l,c;if(t&&(r||4===o.readyState))if(delete Ot[a],t=void 0,o.onreadystatechange=h.noop,r)4!==o.readyState&&o.abort();else{c={},s=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(e){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=c.text?200:404}c&&i(s,l,c,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Ot[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),h.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=C.head||h("head")[0]||C.documentElement;return{send:function(i,r){(t=C.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var Wt=[],jt=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||h.expando+"_"+mt++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=!1!==t.jsonp&&(jt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&jt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(jt,"$1"+r):!1!==t.jsonp&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||h.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Wt.push(r)),a&&h.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),h.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||C;var i=b.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=h.buildFragment([e],t,r),r&&r.length&&h(r).remove(),h.merge([],i.childNodes))};var qt=h.fn.load;h.fn.load=function(e,t,n){if("string"!=typeof e&&qt)return qt.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>=0&&(i=h.trim(e.slice(s,e.length)),e=e.slice(0,s)),h.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&h.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?h("<div>").append(h.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};var Gt=e.document.documentElement;function $t(e){return h.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}h.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,c=h.css(e,"position"),u=h(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=h.css(e,"top"),l=h.css(e,"left"),("absolute"===c||"fixed"===c)&&h.inArray("auto",[o,l])>-1?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),h.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},h.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;return o?(t=o.documentElement,h.contains(t,r)?(typeof r.getBoundingClientRect!==F&&(i=r.getBoundingClientRect()),n=$t(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===h.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(n=e.offset()),n.top+=h.css(e[0],"borderTopWidth",!0),n.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-h.css(i,"marginTop",!0),left:t.left-n.left-h.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Gt;e&&!h.nodeName(e,"html")&&"static"===h.css(e,"position");)e=e.offsetParent;return e||Gt})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);h.fn[e]=function(i){return q(this,function(e,i,r){var o=$t(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?h(o).scrollLeft():r,n?r:h(o).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=Le(u.pixelPosition,function(e,n){return n?(n=Ee(e,t),Re.test(n)?h(e).position()[t]+"px":n):void 0})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){h.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===r?"margin":"border");return q(this,function(t,n,i){var r;return h.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?h.css(t,n,a):h.style(t,n,i,a)},t,o?i:void 0,o,null)}})}),h.fn.size=function(){return this.length},h.fn.andSelf=h.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var Yt=e.jQuery,Qt=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=Qt),t&&e.jQuery===h&&(e.jQuery=Yt),h},typeof t===F&&(e.jQuery=e.$=h),h}),function(e){if("function"==typeof define&&define.amd&&define("uikit",[],function(){var t=window.UIkit||e(window,window.jQuery,window.document);return t.load=function(e,n,i,r){var o,a=e.split(","),s=[],l=(r.config&&r.config.uikit&&r.config.uikit.base?r.config.uikit.base:"").replace(/\/+$/g,"");if(!l)throw new Error("Please define base path to UIkit in the requirejs config.");for(o=0;o<a.length;o+=1){var c=a[o].replace(/\./g,"/");s.push(l+"/components/"+c)}n(s,function(){i(t)})},t}),!window.jQuery)throw new Error("UIkit requires jQuery");window&&window.jQuery&&e(window,window.jQuery,window.document)}(function(e,t,n){"use strict";var i={},r=e.UIkit?Object.create(e.UIkit):void 0;if(i.version="2.27.2",i.noConflict=function(){return r&&(e.UIkit=r,t.UIkit=r,t.fn.uk=r.fn),i},i.prefix=function(e){return e},i.$=t,i.$doc=i.$(document),i.$win=i.$(window),i.$html=i.$("html"),i.support={},i.support.transition=function(){var e=function(){var e,t=n.body||n.documentElement,i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}(),i.support.animation=function(){var e=function(){var e,t=n.body||n.documentElement,i={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}(),function(){Date.now=Date.now||function(){return(new Date).getTime()};for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(i+16,t);return setTimeout(function(){e(i=n)},n-t)},window.cancelAnimationFrame=clearTimeout}}(),i.support.touch="ontouchstart"in document||e.DocumentTouch&&document instanceof e.DocumentTouch||e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints>0||e.navigator.pointerEnabled&&e.navigator.maxTouchPoints>0||!1,i.support.mutationobserver=e.MutationObserver||e.WebKitMutationObserver||null,i.Utils={},i.Utils.isFullscreen=function(){return document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement||!1},i.Utils.str2json=function(e,t){try{return t?JSON.parse(e.replace(/([\$\w]+)\s*:/g,function(e,t){return'"'+t+'":'}).replace(/'([^']+)'/g,function(e,t){return'"'+t+'"'})):new Function("","var json = "+e+"; return JSON.parse(JSON.stringify(json));")()}catch(e){return!1}},i.Utils.debounce=function(e,t,n){var i;return function(){var r=this,o=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(r,o)},t),a&&e.apply(r,o)}},i.Utils.throttle=function(e,t){var n=!1;return function(){n||(e.call(),n=!0,setTimeout(function(){n=!1},t))}},i.Utils.removeCssRules=function(e){var t,n,i,r,o,a,s,l,c,u;e&&setTimeout(function(){try{for(u=document.styleSheets,r=0,s=u.length;s>r;r++){for(i=u[r],n=[],i.cssRules=i.cssRules,t=o=0,l=i.cssRules.length;l>o;t=++o)i.cssRules[t].type===CSSRule.STYLE_RULE&&e.test(i.cssRules[t].selectorText)&&n.unshift(t);for(a=0,c=n.length;c>a;a++)i.deleteRule(n[a])}}catch(e){}},0)},i.Utils.isInView=function(e,n){var r=t(e);if(!r.is(":visible"))return!1;var o=i.$win.scrollLeft(),a=i.$win.scrollTop(),s=r.offset(),l=s.left,c=s.top;return n=t.extend({topoffset:0,leftoffset:0},n),c+r.height()>=a&&c-n.topoffset<=a+i.$win.height()&&l+r.width()>=o&&l-n.leftoffset<=o+i.$win.width()},i.Utils.checkDisplay=function(e,n){var r=i.$("[data-uk-margin], [data-uk-grid-match], [data-uk-grid-margin], [data-uk-check-display]",e||document);return e&&!r.length&&(r=t(e)),r.trigger("display.uk.check"),n&&("string"!=typeof n&&(n='[class*="uk-animation-"]'),r.find(n).each(function(){var e=i.$(this),t=e.attr("class").match(/uk-animation-(.+)/);e.removeClass(t[0]).width(),e.addClass(t[0])})),r},i.Utils.options=function(e){if("string"!=t.type(e))return e;-1!=e.indexOf(":")&&"}"!=e.trim().substr(-1)&&(e="{"+e+"}");var n=e?e.indexOf("{"):-1,r={};if(-1!=n)try{r=i.Utils.str2json(e.substr(n))}catch(e){}return r},i.Utils.animate=function(e,n){var r=t.Deferred();return(e=i.$(e)).css("display","none").addClass(n).one(i.support.animation.end,function(){e.removeClass(n),r.resolve()}),e.css("display",""),r.promise()},i.Utils.uid=function(e){return(e||"id")+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random())},i.Utils.template=function(e,t){for(var n,i,r,o,a=e.replace(/\n/g,"\\n").replace(/\{\{\{\s*(.+?)\s*\}\}\}/g,"{{!$1}}").split(/(\{\{\s*(.+?)\s*\}\})/g),s=0,l=[],c=0;s<a.length;){if((n=a[s]).match(/\{\{\s*(.+?)\s*\}\}/))switch(s+=1,n=a[s],i=n[0],r=n.substring(n.match(/^(\^|\#|\!|\~|\:)/)?1:0),i){case"~":l.push("for(var $i=0;$i<"+r+".length;$i++) { var $item = "+r+"[$i];"),c++;break;case":":l.push("for(var $key in "+r+") { var $val = "+r+"[$key];"),c++;break;case"#":l.push("if("+r+") {"),c++;break;case"^":l.push("if(!"+r+") {"),c++;break;case"/":l.push("}"),c--;break;case"!":l.push("__ret.push("+r+");");break;default:l.push("__ret.push(escape("+r+"));")}else l.push("__ret.push('"+n.replace(/\'/g,"\\'")+"');");s+=1}return o=new Function("$data",["var __ret = [];","try {","with($data){",c?'__ret = ["Not all blocks are closed correctly."]':l.join(""),"};","}catch(e){__ret = [e.message];}",'return __ret.join("").replace(/\\n\\n/g, "\\n");',"function escape(html) { return String(html).replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');}"].join("\n")),t?o(t):o},i.Utils.focus=function(e,n){if(!(e=t(e)).length)return e;var i,r=e.find("[autofocus]:first");return r.length?r.focus():(r=e.find(":input"+(n&&","+n||"")).first()).length?r.focus():(e.attr("tabindex")||(i=1e3,e.attr("tabindex",i)),e[0].focus(),i&&e.attr("tabindex",""),e)},i.Utils.events={},i.Utils.events.click=i.support.touch?"tap":"click",e.UIkit=i,i.fn=function(e,n){var r=arguments,o=e.match(/^([a-z\-]+)(?:\.([a-z]+))?/i),a=o[1],s=o[2];return i[a]?this.each(function(){var e=t(this),o=e.data(a);o||e.data(a,o=i[a](this,s?void 0:n)),s&&o[s].apply(o,Array.prototype.slice.call(r,1))}):(t.error("UIkit component ["+a+"] does not exist."),this)},t.UIkit=i,t.fn.uk=i.fn,i.langdirection="rtl"==i.$html.attr("dir")?"right":"left",i.components={},i.component=function(e,n){var r=function(n,o){var a=this;return this.UIkit=i,this.element=n?i.$(n):null,this.options=t.extend(!0,{},this.defaults,o),this.plugins={},this.element&&this.element.data(e,this),this.init(),(this.options.plugins.length?this.options.plugins:Object.keys(r.plugins)).forEach(function(e){r.plugins[e].init&&(r.plugins[e].init(a),a.plugins[e]=!0)}),this.trigger("init.uk.component",[e,this]),this};return r.plugins={},t.extend(!0,r.prototype,{defaults:{plugins:[]},boot:function(){},init:function(){},on:function(e,t,n){return i.$(this.element||this).on(e,t,n)},one:function(e,t,n){return i.$(this.element||this).one(e,t,n)},off:function(e){return i.$(this.element||this).off(e)},trigger:function(e,t){return i.$(this.element||this).trigger(e,t)},find:function(e){return i.$(this.element?this.element:[]).find(e)},proxy:function(e,t){var n=this;t.split(" ").forEach(function(t){n[t]||(n[t]=function(){return e[t].apply(e,arguments)})})},mixin:function(e,t){var n=this;t.split(" ").forEach(function(t){n[t]||(n[t]=e[t].bind(n))})},option:function(){return 1==arguments.length?this.options[arguments[0]]||void 0:void(2==arguments.length&&(this.options[arguments[0]]=arguments[1]))}},n),this.components[e]=r,this[e]=function(){var n,r;if(arguments.length)switch(arguments.length){case 1:"string"==typeof arguments[0]||arguments[0].nodeType||arguments[0]instanceof jQuery?n=t(arguments[0]):r=arguments[0];break;case 2:n=t(arguments[0]),r=arguments[1]}return n&&n.data(e)?n.data(e):new i.components[e](n,r)},i.domready&&i.component.boot(e),r},i.plugin=function(e,t,n){this.components[e].plugins[t]=n},i.component.boot=function(e){i.components[e].prototype&&i.components[e].prototype.boot&&!i.components[e].booted&&(i.components[e].prototype.boot.apply(i,[]),i.components[e].booted=!0)},i.component.bootComponents=function(){for(var e in i.components)i.component.boot(e)},i.domObservers=[],i.domready=!1,i.ready=function(e){i.domObservers.push(e),i.domready&&e(document)},i.on=function(e,t,n){return e&&e.indexOf("ready.uk.dom")>-1&&i.domready&&t.apply(i.$doc),i.$doc.on(e,t,n)},i.one=function(e,t,n){return e&&e.indexOf("ready.uk.dom")>-1&&i.domready?(t.apply(i.$doc),i.$doc):i.$doc.one(e,t,n)},i.trigger=function(e,t){return i.$doc.trigger(e,t)},i.domObserve=function(e,t){i.support.mutationobserver&&(t=t||function(){},i.$(e).each(function(){var e=this,n=i.$(e);if(!n.data("observer"))try{var r=new i.support.mutationobserver(i.Utils.debounce(function(){t.apply(e,[n]),n.trigger("changed.uk.dom")},50),{childList:!0,subtree:!0});r.observe(e,{childList:!0,subtree:!0}),n.data("observer",r)}catch(e){}}))},i.init=function(e){e=e||document,i.domObservers.forEach(function(t){t(e)})},i.on("domready.uk.dom",function(){i.init(),i.domready&&i.Utils.checkDisplay()}),document.addEventListener("DOMContentLoaded",function(){var e=function(){i.$body=i.$("body"),i.trigger("beforeready.uk.dom"),i.component.bootComponents();var e=requestAnimationFrame(function(){var t={dir:{x:0,y:0},x:window.pageXOffset,y:window.pageYOffset},n=function(){var r=window.pageXOffset,o=window.pageYOffset;(t.x!=r||t.y!=o)&&(t.dir.x=r!=t.x?r>t.x?1:-1:0,t.dir.y=o!=t.y?o>t.y?1:-1:0,t.x=r,t.y=o,i.$doc.trigger("scrolling.uk.document",[{dir:{x:t.dir.x,y:t.dir.y},x:r,y:o}])),cancelAnimationFrame(e),e=requestAnimationFrame(n)};return i.support.touch&&i.$html.on("touchmove touchend MSPointerMove MSPointerUp pointermove pointerup",n),(t.x||t.y)&&n(),n}());if(i.trigger("domready.uk.dom"),i.support.touch&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&i.$win.on("load orientationchange resize",i.Utils.debounce(function(){var e=function(){return t(".uk-height-viewport").css("height",window.innerHeight),e};return e()}(),100)),i.trigger("afterready.uk.dom"),i.domready=!0,i.support.mutationobserver){var n=i.Utils.debounce(function(){requestAnimationFrame(function(){i.init(document.body)})},10);new i.support.mutationobserver(function(e){var t=!1;e.every(function(e){if("childList"!=e.type)return!0;for(var n,i=0;i<e.addedNodes.length;++i)if((n=e.addedNodes[i]).outerHTML&&-1!==n.outerHTML.indexOf("data-uk-"))return(t=!0)&&!1;return!0}),t&&n()}).observe(document.body,{childList:!0,subtree:!0})}};return("complete"==document.readyState||"interactive"==document.readyState)&&setTimeout(e),e}()),i.$html.addClass(i.support.touch?"uk-touch":"uk-notouch"),i.support.touch){var o,a=!1,s="uk-hover",l=".uk-overlay, .uk-overlay-hover, .uk-overlay-toggle, .uk-animation-hover, .uk-has-hover";i.$html.on("mouseenter touchstart MSPointerDown pointerdown",l,function(){a&&t("."+s).removeClass(s),a=t(this).addClass(s)}).on("mouseleave touchend MSPointerUp pointerup",function(e){o=t(e.target).parents(l),a&&a.not(o).removeClass(s)})}return i}),function(e){function t(){l=null,u.last&&(void 0!==u.el&&u.el.trigger("longTap"),u={})}function n(){l&&clearTimeout(l),l=null}function i(){o&&clearTimeout(o),a&&clearTimeout(a),s&&clearTimeout(s),l&&clearTimeout(l),o=a=s=l=null,u={}}function r(e){return e.pointerType==e.MSPOINTER_TYPE_TOUCH&&e.isPrimary}if(!e.fn.swipeLeft){var o,a,s,l,c,u={};e(function(){var d,h,p,f=0,g=0;"MSGesture"in window&&((c=new MSGesture).target=document.body),e(document).on("MSGestureEnd gestureend",function(e){var t=e.originalEvent.velocityX>1?"Right":e.originalEvent.velocityX<-1?"Left":e.originalEvent.velocityY>1?"Down":e.originalEvent.velocityY<-1?"Up":null;t&&void 0!==u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(n){("MSPointerDown"!=n.type||r(n.originalEvent))&&(p="MSPointerDown"==n.type||"pointerdown"==n.type?n:n.originalEvent.touches[0],d=Date.now(),h=d-(u.last||d),u.el=e("tagName"in p.target?p.target:p.target.parentNode),o&&clearTimeout(o),u.x1=p.pageX,u.y1=p.pageY,h>0&&250>=h&&(u.isDoubleTap=!0),u.last=d,l=setTimeout(t,750),n.originalEvent&&n.originalEvent.pointerId&&c&&("MSPointerDown"==n.type||"pointerdown"==n.type||"touchstart"==n.type)&&c.addPointer(n.originalEvent.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){("MSPointerMove"!=e.type||r(e.originalEvent))&&(p="MSPointerMove"==e.type||"pointermove"==e.type?e:e.originalEvent.touches[0],n(),u.x2=p.pageX,u.y2=p.pageY,f+=Math.abs(u.x1-u.x2),g+=Math.abs(u.y1-u.y2))}).on("touchend MSPointerUp pointerup",function(t){("MSPointerUp"!=t.type||r(t.originalEvent))&&(n(),u.x2&&Math.abs(u.x1-u.x2)>30||u.y2&&Math.abs(u.y1-u.y2)>30?s=setTimeout(function(){void 0!==u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+function(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}(u.x1,u.x2,u.y1,u.y2))),u={}},0):"last"in u&&(isNaN(f)||30>f&&30>g?a=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=i,void 0!==u.el&&u.el.trigger(t),u.isDoubleTap?(void 0!==u.el&&u.el.trigger("doubleTap"),u={}):o=setTimeout(function(){o=null,void 0!==u.el&&u.el.trigger("singleTap"),u={}},250)},0):u={},f=g=0))}).on("touchcancel MSPointerCancel pointercancel",i),e(window).on("scroll",i)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(n){return e(this).on(t,n)}})}}(jQuery),function(e){"use strict";var t=[];e.component("stackMargin",{defaults:{cls:"uk-margin-small-top",rowfirst:!1,observe:!1},boot:function(){e.ready(function(t){e.$("[data-uk-margin]",t).each(function(){var t=e.$(this);t.data("stackMargin")||e.stackMargin(t,e.Utils.options(t.attr("data-uk-margin")))})})},init:function(){var n=this;e.$win.on("resize orientationchange",function(){var t=function(){n.process()};return e.$(function(){t(),e.$win.on("load",t)}),e.Utils.debounce(t,20)}()),this.on("display.uk.check",function(){this.element.is(":visible")&&this.process()}.bind(this)),this.options.observe&&e.domObserve(this.element,function(){n.element.is(":visible")&&n.process()}),t.push(this)},process:function(){var t=this.element.children();if(e.Utils.stackMargin(t,this.options),!this.options.rowfirst||!t.length)return this;var n={},i=!1;return t.removeClass(this.options.rowfirst).each(function(t,r){r=e.$(this),"none"!=this.style.display&&(t=r.offset().left,((n[t]=n[t]||[])&&n[t]).push(this),i=!1===i?t:Math.min(i,t))}),e.$(n[i]).addClass(this.options.rowfirst),this}}),function(){var t=[],n=function(e){if(e.is(":visible")){var t=e.parent().width(),n=e.data("width"),i=t/n,r=Math.floor(i*e.data("height"));e.css({height:n>t?r:e.data("height")})}};e.component("responsiveElement",{defaults:{},boot:function(){e.ready(function(t){e.$("iframe.uk-responsive-width, [data-uk-responsive]",t).each(function(){var t=e.$(this);t.data("responsiveElement")||e.responsiveElement(t,{})})})},init:function(){var e=this.element;e.attr("width")&&e.attr("height")&&(e.data({width:e.attr("width"),height:e.attr("height")}).on("display.uk.check",function(){n(e)}),n(e),t.push(e))}}),e.$win.on("resize load",e.Utils.debounce(function(){t.forEach(function(e){n(e)})},15))}(),e.Utils.stackMargin=function(t,n){n=e.$.extend({cls:"uk-margin-small-top"},n);var i=!1;(t=e.$(t).removeClass(n.cls)).each(function(t,n,r,o){"none"!=(o=e.$(this)).css("display")&&(t=o.offset(),n=o.outerHeight(),r=t.top+n,o.data({ukMarginPos:r,ukMarginTop:t.top}),(!1===i||t.top<i.top)&&(i={top:t.top,left:t.left,pos:r}))}).each(function(t){"none"!=(t=e.$(this)).css("display")&&t.data("ukMarginTop")>i.top&&t.data("ukMarginPos")>i.pos&&t.addClass(n.cls)})},e.Utils.matchHeights=function(t,n){t=e.$(t).css("min-height","");var i=function(t){if(!(t.length<2)){var n=0;t.each(function(){n=Math.max(n,e.$(this).outerHeight())}).each(function(){var t=e.$(this),i=n-("border-box"==t.css("box-sizing")?0:t.outerHeight()-t.height());t.css("min-height",i+"px")})}};(n=e.$.extend({row:!0},n)).row?(t.first().width(),setTimeout(function(){var n=!1,r=[];t.each(function(){var t=e.$(this),o=t.offset().top;o!=n&&r.length&&(i(e.$(r)),r=[],o=t.offset().top),r.push(t),n=o}),r.length&&i(e.$(r))},0)):i(t)},function(t){e.Utils.inlineSvg=function(n,i){e.$(n||'img[src$=".svg"]',i||document).each(function(){var n=e.$(this),i=n.attr("src");if(!t[i]){var r=e.$.Deferred();e.$.get(i,{nc:Math.random()},function(t){r.resolve(e.$(t).find("svg"))}),t[i]=r.promise()}t[i].then(function(t){var i=e.$(t).clone();n.attr("id")&&i.attr("id",n.attr("id")),n.attr("class")&&i.attr("class",n.attr("class")),n.attr("style")&&i.attr("style",n.attr("style")),n.attr("width")&&(i.attr("width",n.attr("width")),n.attr("height")||i.removeAttr("height")),n.attr("height")&&(i.attr("height",n.attr("height")),n.attr("width")||i.removeAttr("width")),n.replaceWith(i)})})},e.ready(function(t){e.Utils.inlineSvg("[data-uk-svg]",t)})}({}),e.Utils.getCssVar=function(e){var t,n=document.documentElement,i=n.appendChild(document.createElement("div"));i.classList.add("var-"+e);try{t=JSON.parse(t=getComputedStyle(i,":before").content.replace(/^["'](.*)["']$/,"$1"))}catch(e){t=void 0}return n.removeChild(i),t}}(UIkit),function(e){"use strict";function t(t,n){n=e.$.extend({duration:1e3,transition:"easeOutExpo",offset:0,complete:function(){}},n);var i=t.offset().top-n.offset,r=e.$doc.height(),o=window.innerHeight;i+o>r&&(i=r-o),e.$("html,body").stop().animate({scrollTop:i},n.duration,n.transition).promise().done(n.complete)}e.component("smoothScroll",{boot:function(){e.$html.on("click.smooth-scroll.uikit","[data-uk-smooth-scroll]",function(){var t=e.$(this);return t.data("smoothScroll")||(e.smoothScroll(t,e.Utils.options(t.attr("data-uk-smooth-scroll"))),t.trigger("click")),!1})},init:function(){var n=this;this.on("click",function(i){i.preventDefault(),t(e.$(this.hash).length?e.$(this.hash):e.$("body"),n.options)})}}),e.Utils.scrollToElement=t,e.$.easing.easeOutExpo||(e.$.easing.easeOutExpo=function(e,t,n,i,r){return t==r?n+i:i*(1-Math.pow(2,-10*t/r))+n})}(UIkit),function(e){"use strict";var t=e.$win,n=e.$doc,i=[],r=function(){for(var e=0;e<i.length;e++)window.requestAnimationFrame.apply(window,[i[e].check])};e.component("scrollspy",{defaults:{target:!1,cls:"uk-scrollspy-inview",initcls:"uk-scrollspy-init-inview",topoffset:0,leftoffset:0,repeat:!1,delay:0},boot:function(){n.on("scrolling.uk.document",r),t.on("load resize orientationchange",e.Utils.debounce(r,50)),e.ready(function(t){e.$("[data-uk-scrollspy]",t).each(function(){var t=e.$(this);t.data("scrollspy")||e.scrollspy(t,e.Utils.options(t.attr("data-uk-scrollspy")))})})},init:function(){var t,n=this,r=this.options.cls.split(/,/),o=function(){var i=n.options.target?n.element.find(n.options.target):n.element,o=1===i.length?1:0,a=0;i.each(function(){var i=e.$(this),s=i.data("inviewstate"),l=e.Utils.isInView(i,n.options),c=i.data("ukScrollspyCls")||r[a].trim();!l||s||i.data("scrollspy-idle")||(t||(i.addClass(n.options.initcls),n.offset=i.offset(),t=!0,i.trigger("init.uk.scrollspy")),i.data("scrollspy-idle",setTimeout(function(){i.addClass("uk-scrollspy-inview").toggleClass(c).width(),i.trigger("inview.uk.scrollspy"),i.data("scrollspy-idle",!1),i.data("inviewstate",!0)},n.options.delay*o)),o++),!l&&s&&n.options.repeat&&(i.data("scrollspy-idle")&&(clearTimeout(i.data("scrollspy-idle")),i.data("scrollspy-idle",!1)),i.removeClass("uk-scrollspy-inview").toggleClass(c),i.data("inviewstate",!1),i.trigger("outview.uk.scrollspy")),a=r[a+1]?a+1:0})};o(),this.check=o,i.push(this)}});var o=[],a=function(){for(var e=0;e<o.length;e++)window.requestAnimationFrame.apply(window,[o[e].check])};e.component("scrollspynav",{defaults:{cls:"uk-active",closest:!1,topoffset:0,leftoffset:0,smoothscroll:!1},boot:function(){n.on("scrolling.uk.document",a),t.on("resize orientationchange",e.Utils.debounce(a,50)),e.ready(function(t){e.$("[data-uk-scrollspy-nav]",t).each(function(){var t=e.$(this);t.data("scrollspynav")||e.scrollspynav(t,e.Utils.options(t.attr("data-uk-scrollspy-nav")))})})},init:function(){var n,i=[],r=this.find("a[href^='#']").each(function(){"#"!==this.getAttribute("href").trim()&&i.push(this.getAttribute("href"))}),a=e.$(i.join(",")),s=this.options.cls,l=this.options.closest||this.options.closest,c=this,u=function(){n=[];for(var i=0;i<a.length;i++)e.Utils.isInView(a.eq(i),c.options)&&n.push(a.eq(i));if(n.length){var o,u=t.scrollTop(),d=function(){for(var e=0;e<n.length;e++)if(n[e].offset().top-c.options.topoffset>=u)return n[e]}();if(!d)return;c.options.closest?(r.blur().closest(l).removeClass(s),o=r.filter("a[href='#"+d.attr("id")+"']").closest(l).addClass(s)):o=r.removeClass(s).filter("a[href='#"+d.attr("id")+"']").addClass(s),c.element.trigger("inview.uk.scrollspynav",[d,o])}};this.options.smoothscroll&&e.smoothScroll&&r.each(function(){e.smoothScroll(this,c.options.smoothscroll)}),u(),this.element.data("scrollspynav",this),this.check=u,o.push(this)}})}(UIkit),function(e){"use strict";var t=[];e.component("toggle",{defaults:{target:!1,cls:"uk-hidden",animation:!1,duration:200},boot:function(){e.ready(function(n){e.$("[data-uk-toggle]",n).each(function(){var t=e.$(this);t.data("toggle")||e.toggle(t,e.Utils.options(t.attr("data-uk-toggle")))}),setTimeout(function(){t.forEach(function(e){e.getToggles()})},0)})},init:function(){var e=this;this.aria=-1!==this.options.cls.indexOf("uk-hidden"),this.on("click",function(t){e.element.is('a[href="#"]')&&t.preventDefault(),e.toggle()}),t.push(this)},toggle:function(){if(this.getToggles(),this.totoggle.length){if(this.options.animation&&e.support.animation){var t=this,n=this.options.animation.split(",");1==n.length&&(n[1]=n[0]),n[0]=n[0].trim(),n[1]=n[1].trim(),this.totoggle.css("animation-duration",this.options.duration+"ms"),this.totoggle.each(function(){var i=e.$(this);i.hasClass(t.options.cls)?(i.toggleClass(t.options.cls),e.Utils.animate(i,n[0]).then(function(){i.css("animation-duration",""),e.Utils.checkDisplay(i)})):e.Utils.animate(this,n[1]+" uk-animation-reverse").then(function(){i.toggleClass(t.options.cls).css("animation-duration",""),e.Utils.checkDisplay(i)})})}else this.totoggle.toggleClass(this.options.cls),e.Utils.checkDisplay(this.totoggle);this.updateAria()}},getToggles:function(){this.totoggle=this.options.target?e.$(this.options.target):[],this.updateAria()},updateAria:function(){this.aria&&this.totoggle.length&&this.totoggle.not("[aria-hidden]").each(function(){e.$(this).attr("aria-hidden",e.$(this).hasClass("uk-hidden"))})}})}(UIkit),function(e){"use strict";e.component("alert",{defaults:{fade:!0,duration:200,trigger:".uk-alert-close"},boot:function(){e.$html.on("click.alert.uikit","[data-uk-alert]",function(t){var n=e.$(this);if(!n.data("alert")){var i=e.alert(n,e.Utils.options(n.attr("data-uk-alert")));e.$(t.target).is(i.options.trigger)&&(t.preventDefault(),i.close())}})},init:function(){var e=this;this.on("click",this.options.trigger,function(t){t.preventDefault(),e.close()})},close:function(){var e=this.trigger("close.uk.alert"),t=function(){this.trigger("closed.uk.alert").remove()}.bind(this);this.options.fade?e.css("overflow","hidden").css("max-height",e.height()).animate({height:0,opacity:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0},this.options.duration,t):t()}})}(UIkit),function(e){"use strict";e.component("buttonRadio",{defaults:{activeClass:"uk-active",target:".uk-button"},boot:function(){e.$html.on("click.buttonradio.uikit","[data-uk-button-radio]",function(t){var n=e.$(this);if(!n.data("buttonRadio")){var i=e.buttonRadio(n,e.Utils.options(n.attr("data-uk-button-radio"))),r=e.$(t.target);r.is(i.options.target)&&r.trigger("click")}})},init:function(){var t=this;this.find(t.options.target).attr("aria-checked","false").filter("."+t.options.activeClass).attr("aria-checked","true"),this.on("click",this.options.target,function(n){var i=e.$(this);i.is('a[href="#"]')&&n.preventDefault(),t.find(t.options.target).not(i).removeClass(t.options.activeClass).blur(),i.addClass(t.options.activeClass),t.find(t.options.target).not(i).attr("aria-checked","false"),i.attr("aria-checked","true"),t.trigger("change.uk.button",[i])})},getSelected:function(){return this.find("."+this.options.activeClass)}}),e.component("buttonCheckbox",{defaults:{activeClass:"uk-active",target:".uk-button"},boot:function(){e.$html.on("click.buttoncheckbox.uikit","[data-uk-button-checkbox]",function(t){var n=e.$(this);if(!n.data("buttonCheckbox")){var i=e.buttonCheckbox(n,e.Utils.options(n.attr("data-uk-button-checkbox"))),r=e.$(t.target);r.is(i.options.target)&&r.trigger("click")}})},init:function(){var t=this;this.find(t.options.target).attr("aria-checked","false").filter("."+t.options.activeClass).attr("aria-checked","true"),this.on("click",this.options.target,function(n){var i=e.$(this);i.is('a[href="#"]')&&n.preventDefault(),i.toggleClass(t.options.activeClass).blur(),i.attr("aria-checked",i.hasClass(t.options.activeClass)),t.trigger("change.uk.button",[i])})},getSelected:function(){return this.find("."+this.options.activeClass)}}),e.component("button",{defaults:{},boot:function(){e.$html.on("click.button.uikit","[data-uk-button]",function(){var t=e.$(this);t.data("button")||(e.button(t,e.Utils.options(t.attr("data-uk-button"))),t.trigger("click"))})},init:function(){var e=this;this.element.attr("aria-pressed",this.element.hasClass("uk-active")),this.on("click",function(t){e.element.is('a[href="#"]')&&t.preventDefault(),e.toggle(),e.trigger("change.uk.button",[e.element.blur().hasClass("uk-active")])})},toggle:function(){this.element.toggleClass("uk-active"),this.element.attr("aria-pressed",this.element.hasClass("uk-active"))}})}(UIkit),function(e){"use strict";function t(t,n,i,r){if(t=e.$(t),n=e.$(n),i=i||window.innerWidth,r=r||t.offset(),n.length){var o=n.outerWidth();if(t.css("min-width",o),"right"==e.langdirection){var a=i-(n.offset().left+o),s=i-(t.offset().left+t.outerWidth());t.css("margin-right",a-s)}else t.css("margin-left",n.offset().left-r.left)}}var n,i=!1,r={x:{"bottom-left":"bottom-right","bottom-right":"bottom-left","bottom-center":"bottom-center","top-left":"top-right","top-right":"top-left","top-center":"top-center","left-top":"right-top","left-bottom":"right-bottom","left-center":"right-center","right-top":"left-top","right-bottom":"left-bottom","right-center":"left-center"},y:{"bottom-left":"top-left","bottom-right":"top-right","bottom-center":"top-center","top-left":"bottom-left","top-right":"bottom-right","top-center":"bottom-center","left-top":"left-bottom","left-bottom":"left-top","left-center":"left-center","right-top":"right-bottom","right-bottom":"right-top","right-center":"right-center"},xy:{"bottom-left":"top-right","bottom-right":"top-left","bottom-center":"top-center","top-left":"bottom-right","top-right":"bottom-left","top-center":"bottom-center","left-top":"right-bottom","left-bottom":"right-top","left-center":"right-center","right-top":"left-bottom","right-bottom":"left-top","right-center":"left-center"}};e.component("dropdown",{defaults:{mode:"hover",pos:"bottom-left",offset:0,remaintime:800,justify:!1,boundary:e.$win,delay:0,dropdownSelector:".uk-dropdown,.uk-dropdown-blank",hoverDelayIdle:250,preventflip:!1},remainIdle:!1,boot:function(){var t=e.support.touch?"click":"mouseenter";e.$html.on(t+".dropdown.uikit focus pointerdown","[data-uk-dropdown]",function(n){var i=e.$(this);if(!i.data("dropdown")){var r=e.dropdown(i,e.Utils.options(i.attr("data-uk-dropdown")));("click"==n.type||"mouseenter"==n.type&&"hover"==r.options.mode)&&r.element.trigger(t),r.dropdown.length&&n.preventDefault()}})},init:function(){var t=this;this.dropdown=this.find(this.options.dropdownSelector),this.offsetParent=this.dropdown.parents().filter(function(){return-1!==e.$.inArray(e.$(this).css("position"),["relative","fixed","absolute"])}).slice(0,1),this.offsetParent.length||(this.offsetParent=this.element),this.centered=this.dropdown.hasClass("uk-dropdown-center"),this.justified=!!this.options.justify&&e.$(this.options.justify),this.boundary=e.$(this.options.boundary),this.boundary.length||(this.boundary=e.$win),this.dropdown.hasClass("uk-dropdown-up")&&(this.options.pos="top-left"),this.dropdown.hasClass("uk-dropdown-flip")&&(this.options.pos=this.options.pos.replace("left","right")),this.dropdown.hasClass("uk-dropdown-center")&&(this.options.pos=this.options.pos.replace(/(left|right)/,"center")),this.element.attr("aria-haspopup","true"),this.element.attr("aria-expanded",this.element.hasClass("uk-open")),this.dropdown.attr("aria-hidden","true"),"click"==this.options.mode||e.support.touch?this.on("click.uk.dropdown",function(n){var i=e.$(n.target);i.parents(t.options.dropdownSelector).length||((i.is("a[href='#']")||i.parent().is("a[href='#']")||t.dropdown.length&&!t.dropdown.is(":visible"))&&n.preventDefault(),i.blur()),t.element.hasClass("uk-open")?(!t.dropdown.find(n.target).length||i.is(".uk-dropdown-close")||i.parents(".uk-dropdown-close").length)&&t.hide():t.show()}):this.on("mouseenter",function(){t.trigger("pointerenter.uk.dropdown",[t]),t.remainIdle&&clearTimeout(t.remainIdle),n&&clearTimeout(n),i&&i==t||(n=i&&i!=t?setTimeout(function(){n=setTimeout(t.show.bind(t),t.options.delay)},t.options.hoverDelayIdle):setTimeout(t.show.bind(t),t.options.delay))}).on("mouseleave",function(){n&&clearTimeout(n),t.remainIdle=setTimeout(function(){i&&i==t&&t.hide()},t.options.remaintime),t.trigger("pointerleave.uk.dropdown",[t])}).on("click",function(n){var r=e.$(n.target);return t.remainIdle&&clearTimeout(t.remainIdle),i&&i==t?void((!t.dropdown.find(n.target).length||r.is(".uk-dropdown-close")||r.parents(".uk-dropdown-close").length)&&t.hide()):((r.is("a[href='#']")||r.parent().is("a[href='#']"))&&n.preventDefault(),void t.show())})},show:function(){e.$html.off("click.outer.dropdown"),i&&i!=this&&i.hide(!0),n&&clearTimeout(n),this.trigger("beforeshow.uk.dropdown",[this]),this.checkDimensions(),this.element.addClass("uk-open"),this.element.attr("aria-expanded","true"),this.dropdown.attr("aria-hidden","false"),this.trigger("show.uk.dropdown",[this]),e.Utils.checkDisplay(this.dropdown,!0),e.Utils.focus(this.dropdown),i=this,this.registerOuterClick()},hide:function(e){this.trigger("beforehide.uk.dropdown",[this,e]),this.element.removeClass("uk-open"),this.remainIdle&&clearTimeout(this.remainIdle),this.remainIdle=!1,this.element.attr("aria-expanded","false"),this.dropdown.attr("aria-hidden","true"),this.trigger("hide.uk.dropdown",[this,e]),i==this&&(i=!1)},registerOuterClick:function(){var t=this;e.$html.off("click.outer.dropdown"),setTimeout(function(){e.$html.on("click.outer.dropdown",function(r){n&&clearTimeout(n),e.$(r.target),i!=t||t.element.find(r.target).length||(t.hide(!0),e.$html.off("click.outer.dropdown"))})},10)},checkDimensions:function(){if(this.dropdown.length){this.dropdown.removeClass("uk-dropdown-top uk-dropdown-bottom uk-dropdown-left uk-dropdown-right uk-dropdown-stack uk-dropdown-autoflip").css({topLeft:"",left:"",marginLeft:"",marginRight:""}),this.justified&&this.justified.length&&this.dropdown.css("min-width","");var n,i=e.$.extend({},this.offsetParent.offset(),{width:this.offsetParent[0].offsetWidth,height:this.offsetParent[0].offsetHeight}),o=this.options.offset,a=this.dropdown,s=(a.show().offset(),a.outerWidth()),l=a.outerHeight(),c=this.boundary.width(),u=(this.boundary[0]!==window&&this.boundary.offset()&&this.boundary.offset(),this.options.pos),d={"bottom-left":{top:0+i.height+o,left:0},"bottom-right":{top:0+i.height+o,left:0+i.width-s},"bottom-center":{top:0+i.height+o,left:0+i.width/2-s/2},"top-left":{top:0-l-o,left:0},"top-right":{top:0-l-o,left:0+i.width-s},"top-center":{top:0-l-o,left:0+i.width/2-s/2},"left-top":{top:0,left:0-s-o},"left-bottom":{top:0+i.height-l,left:0-s-o},"left-center":{top:0+i.height/2-l/2,left:0-s-o},"right-top":{top:0,left:0+i.width+o},"right-bottom":{top:0+i.height-l,left:0+i.width+o},"right-center":{top:0+i.height/2-l/2,left:0+i.width+o}},h={};if(n=u.split("-"),h=d[u]?d[u]:d["bottom-left"],this.justified&&this.justified.length)t(a.css({left:0}),this.justified,c);else if(!0!==this.options.preventflip){var p;switch(this.checkBoundary(i.left+h.left,i.top+h.top,s,l,c)){case"x":"x"!==this.options.preventflip&&(p=r.x[u]||"right-top");break;case"y":"y"!==this.options.preventflip&&(p=r.y[u]||"top-left");break;case"xy":this.options.preventflip||(p=r.xy[u]||"right-bottom")}p&&(n=p.split("-"),h=d[p]?d[p]:d["bottom-left"],a.addClass("uk-dropdown-autoflip"),this.checkBoundary(i.left+h.left,i.top+h.top,s,l,c)&&(n=u.split("-"),h=d[u]?d[u]:d["bottom-left"]))}s>c&&(a.addClass("uk-dropdown-stack"),this.trigger("stack.uk.dropdown",[this])),a.css(h).css("display","").addClass("uk-dropdown-"+n[0])}},checkBoundary:function(t,n,i,r,o){var a="";return(0>t||t-e.$win.scrollLeft()+i>o)&&(a+="x"),(n-e.$win.scrollTop()<0||n-e.$win.scrollTop()+r>window.innerHeight)&&(a+="y"),a}}),e.component("dropdownOverlay",{defaults:{justify:!1,cls:"",duration:200},boot:function(){e.ready(function(t){e.$("[data-uk-dropdown-overlay]",t).each(function(){var t=e.$(this);t.data("dropdownOverlay")||e.dropdownOverlay(t,e.Utils.options(t.attr("data-uk-dropdown-overlay")))})})},init:function(){var n=this;this.justified=!!this.options.justify&&e.$(this.options.justify),this.overlay=this.element.find("uk-dropdown-overlay"),this.overlay.length||(this.overlay=e.$('<div class="uk-dropdown-overlay"></div>').appendTo(this.element)),this.overlay.addClass(this.options.cls),this.on({"beforeshow.uk.dropdown":function(e,i){n.dropdown=i,n.justified&&n.justified.length&&t(n.overlay.css({display:"block",marginLeft:"",marginRight:""}),n.justified,n.justified.outerWidth())},"show.uk.dropdown":function(){var t=n.dropdown.dropdown.outerHeight(!0);n.dropdown.element.removeClass("uk-open"),n.overlay.stop().css("display","block").animate({height:t},n.options.duration,function(){n.dropdown.dropdown.css("visibility",""),n.dropdown.element.addClass("uk-open"),e.Utils.checkDisplay(n.dropdown.dropdown,!0)}),n.pointerleave=!1},"hide.uk.dropdown":function(){n.overlay.stop().animate({height:0},n.options.duration)},"pointerenter.uk.dropdown":function(){clearTimeout(n.remainIdle)},"pointerleave.uk.dropdown":function(){n.pointerleave=!0}}),this.overlay.on({mouseenter:function(){n.remainIdle&&(clearTimeout(n.dropdown.remainIdle),clearTimeout(n.remainIdle))},mouseleave:function(){n.pointerleave&&i&&(n.remainIdle=setTimeout(function(){i&&i.hide()},i.options.remaintime))}})}})}(UIkit),function(e){"use strict";var t=[];e.component("gridMatchHeight",{defaults:{target:!1,row:!0,ignorestacked:!1,observe:!1},boot:function(){e.ready(function(t){e.$("[data-uk-grid-match]",t).each(function(){var t=e.$(this);t.data("gridMatchHeight")||e.gridMatchHeight(t,e.Utils.options(t.attr("data-uk-grid-match")))})})},init:function(){var n=this;this.columns=this.element.children(),this.elements=this.options.target?this.find(this.options.target):this.columns,this.columns.length&&(e.$win.on("load resize orientationchange",function(){var t=function(){n.element.is(":visible")&&n.match()};return e.$(function(){t()}),e.Utils.debounce(t,50)}()),this.options.observe&&e.domObserve(this.element,function(){n.element.is(":visible")&&n.match()}),this.on("display.uk.check",function(){this.element.is(":visible")&&this.match()}.bind(this)),t.push(this))},match:function(){var t=this.columns.filter(":visible:first");if(t.length)return Math.ceil(100*parseFloat(t.css("width"))/parseFloat(t.parent().css("width")))>=100&&!this.options.ignorestacked?this.revert():e.Utils.matchHeights(this.elements,this.options),this},revert:function(){return this.elements.css("min-height",""),this}}),e.component("gridMargin",{defaults:{cls:"uk-grid-margin",rowfirst:"uk-row-first"},boot:function(){e.ready(function(t){e.$("[data-uk-grid-margin]",t).each(function(){var t=e.$(this);t.data("gridMargin")||e.gridMargin(t,e.Utils.options(t.attr("data-uk-grid-margin")))})})},init:function(){e.stackMargin(this.element,this.options)}})}(UIkit),function(e){"use strict";var t,n=!1,i=0,r=e.$html;e.$win.on("resize orientationchange",e.Utils.debounce(function(){e.$(".uk-modal.uk-open").each(function(){return e.$(this).data("modal")&&e.$(this).data("modal").resize()})},150)),e.component("modal",{defaults:{keyboard:!0,bgclose:!0,minScrollHeight:150,center:!1,modal:!0},scrollable:!1,transition:!1,hasTransitioned:!0,init:function(){if(t||(t=e.$("body")),this.element.length){var n=this;this.paddingdir="padding-"+("left"==e.langdirection?"right":"left"),this.dialog=this.find(".uk-modal-dialog"),this.active=!1,this.element.attr("aria-hidden",this.element.hasClass("uk-open")),this.on("click",".uk-modal-close",function(e){e.preventDefault(),n.hide()}).on("click",function(t){e.$(t.target)[0]==n.element[0]&&n.options.bgclose&&n.hide()}),e.domObserve(this.element,function(){n.resize()})}},toggle:function(){return this[this.isActive()?"hide":"show"]()},show:function(){if(this.element.length){var t=this;if(!this.isActive())return this.options.modal&&n&&n.hide(!0),this.element.removeClass("uk-open").show(),this.resize(!0),this.options.modal&&(n=this),this.active=!0,i++,e.support.transition?(this.hasTransitioned=!1,this.element.one(e.support.transition.end,function(){t.hasTransitioned=!0,e.Utils.focus(t.dialog,"a[href]")}).addClass("uk-open")):(this.element.addClass("uk-open"),e.Utils.focus(this.dialog,"a[href]")),r.addClass("uk-modal-page").height(),this.element.attr("aria-hidden","false"),this.element.trigger("show.uk.modal"),e.Utils.checkDisplay(this.dialog,!0),this}},hide:function(t){if(!t&&e.support.transition&&this.hasTransitioned){var n=this;this.one(e.support.transition.end,function(){n._hide()}).removeClass("uk-open")}else this._hide();return this},resize:function(e){if(this.isActive()||e){var n=t.width();if(this.scrollbarwidth=window.innerWidth-n,t.css(this.paddingdir,this.scrollbarwidth),this.element.css("overflow-y",this.scrollbarwidth?"scroll":"auto"),!this.updateScrollable()&&this.options.center){var i=this.dialog.outerHeight(),r=parseInt(this.dialog.css("margin-top"),10)+parseInt(this.dialog.css("margin-bottom"),10);i+r<window.innerHeight?this.dialog.css({top:window.innerHeight/2-i/2-r}):this.dialog.css({top:""})}}},updateScrollable:function(){var e=this.dialog.find(".uk-overflow-container:visible:first");if(e.length){e.css("height",0);var t=Math.abs(parseInt(this.dialog.css("margin-top"),10)),n=this.dialog.outerHeight(),i=window.innerHeight-2*(20>t?20:t)-n;return e.css({maxHeight:i<this.options.minScrollHeight?"":i,height:""}),!0}return!1},_hide:function(){this.active=!1,i>0?i--:i=0,this.element.hide().removeClass("uk-open"),this.element.attr("aria-hidden","true"),i||(r.removeClass("uk-modal-page"),t.css(this.paddingdir,"")),n===this&&(n=!1),this.trigger("hide.uk.modal")},isActive:function(){return this.element.hasClass("uk-open")}}),e.component("modalTrigger",{boot:function(){e.$html.on("click.modal.uikit","[data-uk-modal]",function(t){var n=e.$(this);(n.is("a")&&t.preventDefault(),n.data("modalTrigger"))||e.modalTrigger(n,e.Utils.options(n.attr("data-uk-modal"))).show()}),e.$html.on("keydown.modal.uikit",function(e){n&&27===e.keyCode&&n.options.keyboard&&(e.preventDefault(),n.hide())})},init:function(){var t=this;this.options=e.$.extend({target:!!t.element.is("a")&&t.element.attr("href")},this.options),this.modal=e.modal(this.options.target,this.options),this.on("click",function(e){e.preventDefault(),t.show()}),this.proxy(this.modal,"show hide isActive")}}),e.modal.dialog=function(t,n){var i=e.modal(e.$(e.modal.dialog.template).appendTo("body"),n);return i.on("hide.uk.modal",function(){i.persist&&(i.persist.appendTo(i.persist.data("modalPersistParent")),i.persist=!1),i.element.remove()}),function(t,n){n&&("object"==typeof t?(t=t instanceof jQuery?t:e.$(t)).parent().length&&(n.persist=t,n.persist.data("modalPersistParent",t.parent())):t="string"==typeof t||"number"==typeof t?e.$("<div></div>").html(t):e.$("<div></div>").html("UIkit.modal Error: Unsupported data type: "+typeof t),t.appendTo(n.element.find(".uk-modal-dialog")))}(t,i),i},e.modal.dialog.template='<div class="uk-modal"><div class="uk-modal-dialog" style="min-height:0;"></div></div>',e.modal.alert=function(t,n){n=e.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:e.modal.labels},n);var i=e.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(t)+"</div>",'<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-button-primary uk-modal-close">'+n.labels.Ok+"</button></div>"].join(""),n);return i.on("show.uk.modal",function(){setTimeout(function(){i.element.find("button:first").focus()},50)}),i.show()},e.modal.confirm=function(t,n,i){var r=arguments.length>1&&arguments[arguments.length-1]?arguments[arguments.length-1]:{};n=e.$.isFunction(n)?n:function(){},i=e.$.isFunction(i)?i:function(){},r=e.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:e.modal.labels},e.$.isFunction(r)?{}:r);var o=e.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(t)+"</div>",'<div class="uk-modal-footer uk-text-right"><button class="uk-button js-modal-confirm-cancel">'+r.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-confirm">'+r.labels.Ok+"</button></div>"].join(""),r);return o.element.find(".js-modal-confirm, .js-modal-confirm-cancel").on("click",function(){e.$(this).is(".js-modal-confirm")?n():i(),o.hide()}),o.on("show.uk.modal",function(){setTimeout(function(){o.element.find(".js-modal-confirm").focus()},50)}),o.show()},e.modal.prompt=function(t,n,i,r){i=e.$.isFunction(i)?i:function(){},r=e.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:e.modal.labels},r);var o=e.modal.dialog([t?'<div class="uk-modal-content uk-form">'+String(t)+"</div>":"",'<div class="uk-margin-small-top uk-modal-content uk-form"><p><input type="text" class="uk-width-1-1"></p></div>','<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-modal-close">'+r.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-ok">'+r.labels.Ok+"</button></div>"].join(""),r),a=o.element.find("input[type='text']").val(n||"").on("keyup",function(e){13==e.keyCode&&o.element.find(".js-modal-ok").trigger("click")});return o.element.find(".js-modal-ok").on("click",function(){!1!==i(a.val())&&o.hide()}),o.show()},e.modal.blockUI=function(t,n){var i=e.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(t||'<div class="uk-text-center">...</div>')+"</div>"].join(""),e.$.extend({bgclose:!1,keyboard:!1,modal:!1},n));return i.content=i.element.find(".uk-modal-content:first"),i.show()},e.modal.labels={Ok:"Ok",Cancel:"Cancel"}}(UIkit),function(e){"use strict";e.component("nav",{defaults:{toggle:'>li.uk-parent > a[href="#"]',lists:">li.uk-parent > ul",multiple:!1},boot:function(){e.ready(function(t){e.$("[data-uk-nav]",t).each(function(){var t=e.$(this);t.data("nav")||e.nav(t,e.Utils.options(t.attr("data-uk-nav")))})})},init:function(){var t=this;this.on("click.uk.nav",this.options.toggle,function(n){n.preventDefault();var i=e.$(this);t.open(i.parent()[0]==t.element[0]?i:i.parent("li"))}),this.update(),e.domObserve(this.element,function(){t.element.find(t.options.lists).not("[role]").length&&t.update()})},update:function(){var t=this;this.find(this.options.lists).each(function(){var n=e.$(this).attr("role","menu"),i=n.closest("li"),r=i.hasClass("uk-active");i.data("list-container")||(n.wrap('<div style="overflow:hidden;height:0;position:relative;"></div>'),i.data("list-container",n.parent()[r?"removeClass":"addClass"]("uk-hidden"))),i.attr("aria-expanded",i.hasClass("uk-open")),r&&t.open(i,!0)})},open:function(t,n){var i=this,r=this.element,o=e.$(t),a=o.data("list-container");this.options.multiple||r.children(".uk-open").not(t).each(function(){var t=e.$(this);t.data("list-container")&&t.data("list-container").stop().animate({height:0},function(){e.$(this).parent().removeClass("uk-open").end().addClass("uk-hidden")})}),o.toggleClass("uk-open"),o.attr("aria-expanded",o.hasClass("uk-open")),a&&(o.hasClass("uk-open")&&a.removeClass("uk-hidden"),n?(a.stop().height(o.hasClass("uk-open")?"auto":0),o.hasClass("uk-open")||a.addClass("uk-hidden"),this.trigger("display.uk.check")):a.stop().animate({height:o.hasClass("uk-open")?function(t){var n=e.$(t),i="auto";if(n.is(":visible"))i=n.outerHeight();else{var r={position:n.css("position"),visibility:n.css("visibility"),display:n.css("display")};i=n.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),n.css(r)}return i}(a.find("ul:first")):0},function(){o.hasClass("uk-open")?a.css("height",""):a.addClass("uk-hidden"),i.trigger("display.uk.check")}))}})}(UIkit),function(e){"use strict";var t={x:window.scrollX,y:window.scrollY},n=(e.$win,e.$doc,e.$html),i={show:function(i,r){if((i=e.$(i)).length){r=e.$.extend({mode:"push"},r);var o=e.$("body"),a=i.find(".uk-offcanvas-bar:first"),s="right"==e.langdirection,l=(a.hasClass("uk-offcanvas-bar-flip")?-1:1)*(s?-1:1),c=window.innerWidth-o.width();t={x:window.pageXOffset,y:window.pageYOffset},a.attr("mode",r.mode),i.addClass("uk-active"),o.css({width:window.innerWidth-c,height:window.innerHeight}).addClass("uk-offcanvas-page"),("push"==r.mode||"reveal"==r.mode)&&o.css(s?"margin-right":"margin-left",(s?-1:1)*a.outerWidth()*l),"reveal"==r.mode&&a.css("clip","rect(0, "+a.outerWidth()+"px, 100vh, 0)"),n.css("margin-top",-1*t.y).width(),a.addClass("uk-offcanvas-bar-show"),this._initElement(i),a.trigger("show.uk.offcanvas",[i,a]),i.attr("aria-hidden","false")}},hide:function(i){var r=e.$("body"),o=e.$(".uk-offcanvas.uk-active"),a="right"==e.langdirection,s=o.find(".uk-offcanvas-bar:first"),l=function(){r.removeClass("uk-offcanvas-page").css({width:"",height:"",marginLeft:"",marginRight:""}),o.removeClass("uk-active"),s.removeClass("uk-offcanvas-bar-show"),n.css("margin-top",""),window.scrollTo(t.x,t.y),s.trigger("hide.uk.offcanvas",[o,s]),o.attr("aria-hidden","true")};o.length&&("none"==s.attr("mode")&&(i=!0),e.support.transition&&!i?(r.one(e.support.transition.end,function(){l()}).css(a?"margin-right":"margin-left",""),"reveal"==s.attr("mode")&&s.css("clip",""),setTimeout(function(){s.removeClass("uk-offcanvas-bar-show")},0)):l())},_initElement:function(t){t.data("OffcanvasInit")||(t.on("click.uk.offcanvas swipeRight.uk.offcanvas swipeLeft.uk.offcanvas",function(t){var n=e.$(t.target);if(!t.type.match(/swipe/)&&!n.hasClass("uk-offcanvas-close")){if(n.hasClass("uk-offcanvas-bar"))return;if(n.parents(".uk-offcanvas-bar:first").length)return}t.stopImmediatePropagation(),i.hide()}),t.on("click",'a[href*="#"]',function(){var t=e.$(this),n=t.attr("href");"#"!=n&&(e.$doc.one("hide.uk.offcanvas",function(){var i;try{i=e.$(t[0].hash)}catch(e){i=""}i.length||(i=e.$('[name="'+t[0].hash.replace("#","")+'"]')),i.length&&e.Utils.scrollToElement?e.Utils.scrollToElement(i,e.Utils.options(t.attr("data-uk-smooth-scroll")||"{}")):window.location.href=n}),i.hide())}),t.data("OffcanvasInit",!0))}};e.component("offcanvasTrigger",{boot:function(){n.on("click.offcanvas.uikit","[data-uk-offcanvas]",function(t){t.preventDefault();var n=e.$(this);n.data("offcanvasTrigger")||(e.offcanvasTrigger(n,e.Utils.options(n.attr("data-uk-offcanvas"))),n.trigger("click"))}),n.on("keydown.uk.offcanvas",function(e){27===e.keyCode&&i.hide()})},init:function(){var t=this;this.options=e.$.extend({target:!!t.element.is("a")&&t.element.attr("href"),mode:"push"},this.options),this.on("click",function(e){e.preventDefault(),i.show(t.options.target,t.options)})}}),e.offcanvas=i}(UIkit),function(e){"use strict";function t(t,n,i){var r,o=e.$.Deferred(),a=t,s=t;return i[0]===n[0]?(o.resolve(),o.promise()):("object"==typeof t&&(a=t[0],s=t[1]||t[0]),e.$body.css("overflow-x","hidden"),r=function(){n&&n.hide().removeClass("uk-active "+s+" uk-animation-reverse"),i.addClass(a).one(e.support.animation.end,function(){setTimeout(function(){i.removeClass(""+a).css({opacity:"",display:""})},0),o.resolve(),e.$body.css("overflow-x",""),n&&n.css({opacity:"",display:""})}.bind(this)).show()},i.css("animation-duration",this.options.duration+"ms"),n&&n.length?(n.css("animation-duration",this.options.duration+"ms"),n.css("display","none").addClass(s+" uk-animation-reverse").one(e.support.animation.end,function(){r()}.bind(this)).css("display","")):(i.addClass("uk-active"),r()),o.promise())}var n;e.component("switcher",{defaults:{connect:!1,toggle:">*",active:0,animation:!1,duration:200,swiping:!0},animating:!1,boot:function(){e.ready(function(t){e.$("[data-uk-switcher]",t).each(function(){var t=e.$(this);t.data("switcher")||e.switcher(t,e.Utils.options(t.attr("data-uk-switcher")))})})},init:function(){var t=this;this.on("click.uk.switcher",this.options.toggle,function(e){e.preventDefault(),t.show(this)}),this.options.connect&&(this.connect=e.$(this.options.connect),this.connect.length&&(this.connect.on("click.uk.switcher","[data-uk-switcher-item]",function(n){n.preventDefault();var i=e.$(this).attr("data-uk-switcher-item");if(t.index!=i)switch(i){case"next":case"previous":t.show(t.index+("next"==i?1:-1));break;default:t.show(parseInt(i,10))}}),this.options.swiping&&this.connect.on("swipeRight swipeLeft",function(e){e.preventDefault(),window.getSelection().toString()||t.show(t.index+("swipeLeft"==e.type?1:-1))}),this.update()))},update:function(){this.connect.children().removeClass("uk-active").attr("aria-hidden","true");var e=this.find(this.options.toggle),t=e.filter(".uk-active");if(t.length)this.show(t,!1);else{if(!1===this.options.active)return;t=e.eq(this.options.active),this.show(t.length?t:e.eq(0),!1)}e.not(t).attr("aria-expanded","false"),t.attr("aria-expanded","true")},show:function(i,r){if(!this.animating){var o=this.find(this.options.toggle);isNaN(i)?i=e.$(i):(i=0>i?o.length-1:i,i=o.eq(o[i]?i:0));var a=this,s=e.$(i),l=n[this.options.animation]||function(e,i){if(!a.options.animation)return n.none.apply(a);var r=a.options.animation.split(",");return 1==r.length&&(r[1]=r[0]),r[0]=r[0].trim(),r[1]=r[1].trim(),t.apply(a,[r,e,i])};!1!==r&&e.support.animation||(l=n.none),s.hasClass("uk-disabled")||(o.attr("aria-expanded","false"),s.attr("aria-expanded","true"),o.filter(".uk-active").removeClass("uk-active"),s.addClass("uk-active"),this.options.connect&&this.connect.length&&(this.index=this.find(this.options.toggle).index(s),-1==this.index&&(this.index=0),this.connect.each(function(){var t=e.$(this),n=e.$(t.children()),i=e.$(n.filter(".uk-active")),r=e.$(n.eq(a.index));a.animating=!0,l.apply(a,[i,r]).then(function(){i.removeClass("uk-active"),r.addClass("uk-active"),i.attr("aria-hidden","true"),r.attr("aria-hidden","false"),e.Utils.checkDisplay(r,!0),a.animating=!1})})),this.trigger("show.uk.switcher",[s]))}}}),n={none:function(){var t=e.$.Deferred();return t.resolve(),t.promise()},fade:function(e,n){return t.apply(this,["uk-animation-fade",e,n])},"slide-bottom":function(e,n){return t.apply(this,["uk-animation-slide-bottom",e,n])},"slide-top":function(e,n){return t.apply(this,["uk-animation-slide-top",e,n])},"slide-vertical":function(e,n){var i=["uk-animation-slide-top","uk-animation-slide-bottom"];return e&&e.index()>n.index()&&i.reverse(),t.apply(this,[i,e,n])},"slide-left":function(e,n){return t.apply(this,["uk-animation-slide-left",e,n])},"slide-right":function(e,n){return t.apply(this,["uk-animation-slide-right",e,n])},"slide-horizontal":function(e,n){var i=["uk-animation-slide-right","uk-animation-slide-left"];return e&&e.index()>n.index()&&i.reverse(),t.apply(this,[i,e,n])},scale:function(e,n){return t.apply(this,["uk-animation-scale-up",e,n])}},e.switcher.animations=n}(UIkit),function(e){"use strict";e.component("tab",{defaults:{target:">li:not(.uk-tab-responsive, .uk-disabled)",connect:!1,active:0,animation:!1,duration:200,swiping:!0},boot:function(){e.ready(function(t){e.$("[data-uk-tab]",t).each(function(){var t=e.$(this);t.data("tab")||e.tab(t,e.Utils.options(t.attr("data-uk-tab")))})})},init:function(){var t=this;this.current=!1,this.on("click.uk.tab",this.options.target,function(n){if(n.preventDefault(),!t.switcher||!t.switcher.animating){var i=t.find(t.options.target).not(this);i.removeClass("uk-active").blur(),t.trigger("change.uk.tab",[e.$(this).addClass("uk-active"),t.current]),t.current=e.$(this),t.options.connect||(i.attr("aria-expanded","false"),e.$(this).attr("aria-expanded","true"))}}),this.options.connect&&(this.connect=e.$(this.options.connect)),this.responsivetab=e.$('<li class="uk-tab-responsive uk-active"><a></a></li>').append('<div class="uk-dropdown uk-dropdown-small"><ul class="uk-nav uk-nav-dropdown"></ul><div>'),this.responsivetab.dropdown=this.responsivetab.find(".uk-dropdown"),this.responsivetab.lst=this.responsivetab.dropdown.find("ul"),this.responsivetab.caption=this.responsivetab.find("a:first"),this.element.hasClass("uk-tab-bottom")&&this.responsivetab.dropdown.addClass("uk-dropdown-up"),this.responsivetab.lst.on("click.uk.tab","a",function(n){n.preventDefault(),n.stopPropagation();var i=e.$(this);t.element.children("li:not(.uk-tab-responsive)").eq(i.data("index")).trigger("click")}),this.on("show.uk.switcher change.uk.tab",function(e,n){t.responsivetab.caption.html(n.text())}),this.element.append(this.responsivetab),this.options.connect&&(this.switcher=e.switcher(this.element,{toggle:">li:not(.uk-tab-responsive)",connect:this.options.connect,active:this.options.active,animation:this.options.animation,duration:this.options.duration,swiping:this.options.swiping})),e.dropdown(this.responsivetab,{mode:"click",preventflip:"y"}),t.trigger("change.uk.tab",[this.element.find(this.options.target).not(".uk-tab-responsive").filter(".uk-active")]),this.check(),e.$win.on("resize orientationchange",e.Utils.debounce(function(){t.element.is(":visible")&&t.check()},100)),this.on("display.uk.check",function(){t.element.is(":visible")&&t.check()})},check:function(){var t=this.element.children("li:not(.uk-tab-responsive)").removeClass("uk-hidden");if(t.length){var n,i,r=t.eq(0).offset().top+Math.ceil(t.eq(0).height()/2),o=!1;if(this.responsivetab.lst.empty(),t.each(function(){e.$(this).offset().top>r&&(o=!0)}),o)for(var a=0;a<t.length;a++)(n=e.$(t.eq(a))).find("a"),"none"==n.css("float")||n.attr("uk-dropdown")||(n.hasClass("uk-disabled")||((i=e.$(n[0].outerHTML)).find("a").data("index",a),this.responsivetab.lst.append(i)),n.addClass("uk-hidden"));this.responsivetab[this.responsivetab.lst.children("li").length?"removeClass":"addClass"]("uk-hidden")}else this.responsivetab.addClass("uk-hidden")}})}(UIkit),function(e){"use strict";e.component("cover",{defaults:{automute:!0},boot:function(){e.ready(function(t){e.$("[data-uk-cover]",t).each(function(){var t=e.$(this);t.data("cover")||e.cover(t,e.Utils.options(t.attr("data-uk-cover")))})})},init:function(){if(this.parent=this.element.parent(),e.$win.on("load resize orientationchange",e.Utils.debounce(function(){this.check()}.bind(this),100)),this.on("display.uk.check",function(){this.element.is(":visible")&&this.check()}.bind(this)),this.check(),this.element.is("iframe")&&this.options.automute){var t=this.element.attr("src");this.element.attr("src","").on("load",function(){this.contentWindow.postMessage('{ "event": "command", "func": "mute", "method":"setVolume", "value":0}',"*")}).attr("src",[t,t.indexOf("?")>-1?"&":"?","enablejsapi=1&api=1"].join(""))}},check:function(){this.element.css({width:"",height:""}),this.dimension={w:this.element.width(),h:this.element.height()},this.element.attr("width")&&!isNaN(this.element.attr("width"))&&(this.dimension.w=this.element.attr("width")),this.element.attr("height")&&!isNaN(this.element.attr("height"))&&(this.dimension.h=this.element.attr("height")),this.ratio=this.dimension.w/this.dimension.h;var e,t,n=this.parent.width(),i=this.parent.height();n/this.ratio<i?(e=Math.ceil(i*this.ratio),t=i):(e=n,t=Math.ceil(n/this.ratio)),this.element.css({width:e,height:t})}})}(UIkit),function(e){var t;window.UIkit&&(t=e(UIkit)),"function"==typeof define&&define.amd&&define("uikit-accordion",["uikit"],function(){return t||e(UIkit)})}(function(e){"use strict";return e.component("accordion",{defaults:{showfirst:!0,collapse:!0,animate:!0,easing:"swing",duration:300,toggle:".uk-accordion-title",containers:".uk-accordion-content",clsactive:"uk-active"},boot:function(){e.ready(function(t){setTimeout(function(){e.$("[data-uk-accordion]",t).each(function(){var t=e.$(this);t.data("accordion")||e.accordion(t,e.Utils.options(t.attr("data-uk-accordion")))})},0)})},init:function(){var t=this;this.element.on("click.uk.accordion",this.options.toggle,function(n){n.preventDefault(),t.toggleItem(e.$(this).data("wrapper"),t.options.animate,t.options.collapse)}),this.update(!0),e.domObserve(this.element,function(){t.element.children(t.options.containers).length&&t.update()})},toggleItem:function(t,n,i){var r=this;t.data("toggle").toggleClass(this.options.clsactive),t.data("content").toggleClass(this.options.clsactive);var o=t.data("toggle").hasClass(this.options.clsactive);i&&(this.toggle.not(t.data("toggle")).removeClass(this.options.clsactive),this.content.not(t.data("content")).removeClass(this.options.clsactive).parent().stop().css("overflow","hidden").animate({height:0},{easing:this.options.easing,duration:n?this.options.duration:0}).attr("aria-expanded","false")),t.stop().css("overflow","hidden"),n?t.animate({height:o?function(t){var n=e.$(t),i="auto";if(n.is(":visible"))i=n.outerHeight();else{var r={position:n.css("position"),visibility:n.css("visibility"),display:n.css("display")};i=n.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),n.css(r)}return i}(t.data("content")):0},{easing:this.options.easing,duration:this.options.duration,complete:function(){o&&(t.css({overflow:"",height:"auto"}),e.Utils.checkDisplay(t.data("content"))),r.trigger("display.uk.check")}}):(t.height(o?"auto":0),o&&(t.css({overflow:""}),e.Utils.checkDisplay(t.data("content"))),this.trigger("display.uk.check")),t.attr("aria-expanded",o),this.element.trigger("toggle.uk.accordion",[o,t.data("toggle"),t.data("content")])},update:function(t){var n,i,r,o=this;this.toggle=this.find(this.options.toggle),this.content=this.find(this.options.containers),this.content.each(function(t){(n=e.$(this)).parent().data("wrapper")?i=n.parent():(i=e.$(this).wrap('<div data-wrapper="true" style="overflow:hidden;height:0;position:relative;"></div>').parent()).attr("aria-expanded","false"),r=o.toggle.eq(t),i.data("toggle",r),i.data("content",n),r.data("wrapper",i),n.data("wrapper",i)}),this.element.trigger("update.uk.accordion",[this]),t&&this.options.showfirst&&this.toggleItem(this.toggle.eq(0).data("wrapper"),!1,!1)}}),e.accordion}),define("uikit.accordion",["uikit"],function(){}),function(e){var t;window.UIkit&&(t=e(UIkit)),"function"==typeof define&&define.amd&&define("uikit-form-select",["uikit"],function(){return t||e(UIkit)})}(function(e){"use strict";return e.component("formSelect",{defaults:{target:">span:first",activeClass:"uk-active"},boot:function(){e.ready(function(t){e.$("[data-uk-form-select]",t).each(function(){var t=e.$(this);t.data("formSelect")||e.formSelect(t,e.Utils.options(t.attr("data-uk-form-select")))})})},init:function(){var e,t,n=this;this.target=this.find(this.options.target),this.select=this.find("select"),this.select.on({change:(e=n.select[0],t=function(){try{"input"===n.options.target?n.target.val(e.options[e.selectedIndex].text):n.target.text(e.options[e.selectedIndex].text)}catch(e){}return n.element[n.select.val()?"addClass":"removeClass"](n.options.activeClass),t},t()),focus:function(){n.target.addClass("uk-focus")},blur:function(){n.target.removeClass("uk-focus")},mouseenter:function(){n.target.addClass("uk-hover")},mouseleave:function(){n.target.removeClass("uk-hover")}}),this.element.data("formSelect",this)}}),e.formSelect}),define("uikit.formselect",["uikit"],function(){}),function(e,t){t("kendo",[],function(){"bundle all";return function(e,t,n){function i(){}function r(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),i=e.substring(1);return"="===n?"+("+i+")+":":"===n?"+$kendoHtmlEncode("+i+")+":";"+e+";$kendoOutput+="}function o(e,t,n){return e+="",(n=(t=t||2)-e.length)?I[t].substring(0,n)+e:e}function a(e){var t=e.css(ae.support.transitions.css+"box-shadow")||e.css("box-shadow"),n=t&&t.match(ve)||[0,0,0,0,0],i=he.max(+n[3],+(n[4]||0));return{left:-n[1]+i,right:+n[1]+i,bottom:+n[2]+i}}function s(e){var t=1,n=arguments.length;for(t=1;n>t;t++)l(e,arguments[t]);return e}function l(e,t){var n,i,r,o,a,s=ae.data.ObservableArray,c=ae.data.LazyObservableArray,u=ae.data.DataSource,d=ae.data.HierarchicalDataSource;for(n in t)(o=(r=typeof(i=t[n]))===ke&&null!==i?i.constructor:null)&&o!==Array&&o!==s&&o!==c&&o!==u&&o!==d?i instanceof Date?e[n]=new Date(i.getTime()):w(i.clone)?e[n]=i.clone():(a=e[n],e[n]=typeof a===ke&&a||{},l(e[n],i)):r!==Te&&(e[n]=i);return e}function c(e,t,i){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return i!==n?i:e}function u(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function d(t,n){var i,r={};return document.defaultView&&document.defaultView.getComputedStyle?(i=document.defaultView.getComputedStyle(t,""),n&&e.each(n,function(e,t){r[t]=i.getPropertyValue(t)})):(i=t.currentStyle,n&&e.each(n,function(e,t){r[t]=i[u(t)]})),ae.size(r)||(r=i),r}function h(e,t,n,i){return typeof e===be&&(w(t)&&(i=t,t=400,n=!1),w(n)&&(i=n,n=!1),typeof t===Ce&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),se({effects:{},duration:400,reverse:!1,init:de,teardown:de,hide:!1},e,{completeCallback:e.complete,complete:de})}function p(t,n,i,r,o){for(var a,s=0,l=t.length;l>s;s++)(a=e(t[s])).queue(function(){P.promise(a,h(n,i,r,o))});return t}function f(e,t){var i;return 0===t.indexOf("data")&&(t=(t=t.substring(4)).charAt(0).toLowerCase()+t.substring(1)),t=t.replace($,"-$1"),null===(i=e.getAttribute("data-"+ae.ns+t))?i=n:"null"===i?i=null:"true"===i?i=!0:"false"===i?i=!1:_e.test(i)?i=parseFloat(i):q.test(i)&&!G.test(i)&&(i=Function("return ("+i+")")()),i}function g(t,i){var r,o,a={};for(r in i)(o=f(t,r))!==n&&(j.test(r)&&(o=ae.template(e("#"+o).html())),a[r]=o);return a}function m(t,n){return e.contains(t,n)?-1:1}function v(){var t=e(this);return e.inArray(t.attr("data-"+ae.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function _(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function y(e,t){return new y.fn.init(e,t)}var b,w,k,x,C,T,S,D,A,M,E,I,R,P,L,F,B,z,H,N,O,V,U,W,j,q,G,$,Y,Q,X,K,Z,J,ee,te,ne,ie,re,oe,ae=t.kendo=t.kendo||{cultures:{}},se=e.extend,le=e.each,ce=e.isArray,ue=e.proxy,de=e.noop,he=Math,pe=t.JSON||{},fe={},ge=/%/,me=/\{(\d+)(:[^\}]+)?\}/g,ve=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,_e=/^(\+|-?)\d+(\.?)\d*$/,ye="function",be="string",we="number",ke="object",xe="null",Ce="boolean",Te="undefined",Se={},De={},Ae=[].slice,Me=t.Globalize;ae.version="2015.2.902",i.extend=function(e){var t,n,i=function(){},r=this,o=e&&e.init?e.init:function(){r.apply(this,arguments)};for(t in i.prototype=r.prototype,n=o.fn=o.prototype=new i,e)n[t]=null!=e[t]&&e[t].constructor===Object?se(!0,{},i.prototype[t],e[t]):e[t];return n.constructor=o,o.extend=r.extend,o},i.prototype._initOptions=function(e){this.options=s({},this.options,e)},w=ae.isFunction=function(e){return"function"==typeof e},k=function(){this._defaultPrevented=!0},x=function(){return!0===this._defaultPrevented},C=i.extend({init:function(){this._events={}},bind:function(e,t,i){var r,o,a,s,l=this,c=typeof e===be?[e]:e,u=typeof t===ye;if(t===n){for(r in e)l.bind(r,e[r]);return l}for(r=0,o=c.length;o>r;r++)e=c[r],(s=u?t:t[e])&&(i&&(a=s,(s=function(){l.unbind(e,s),a.apply(l,arguments)}).original=a),(l._events[e]=l._events[e]||[]).push(s));return l},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n,i,r,o=this,a=typeof e===be?[e]:e,s=typeof t===ye;for(n=0,i=a.length;i>n;n++)e=a[n],(r=s?t:t[e])&&(o._events[e]=o._events[e]||[]).unshift(r);return o},trigger:function(e,t){var n,i,r=this,o=r._events[e];if(o){for((t=t||{}).sender=r,t._defaultPrevented=!1,t.preventDefault=k,t.isDefaultPrevented=x,n=0,i=(o=o.slice()).length;i>n;n++)o[n].call(r,t);return!0===t._defaultPrevented}return!1},unbind:function(e,t){var i,r=this,o=r._events[e];if(e===n)r._events={};else if(o)if(t)for(i=o.length-1;i>=0;i--)(o[i]===t||o[i].original===t)&&o.splice(i,1);else r._events[e]=[];return r}}),T=/^\w+/,S=/\$\{([^}]*)\}/g,D=/\\\}/g,A=/__CURLY__/g,M=/\\#/g,E=/__SHARP__/g,I=["","0","00","000","0000"],b={paramName:"data",useWithBlock:!0,render:function(e,t){var n,i,r="";for(n=0,i=t.length;i>n;n++)r+=e(t[n]);return r},compile:function(e,t){var n,i,o,a=se({},this,t),s=a.paramName,l=s.match(T)[0],c=a.useWithBlock,u="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;";if(w(e))return e;for(u+=c?"with("+s+"){":"",u+="$kendoOutput=",i=e.replace(D,"__CURLY__").replace(S,"#=$kendoHtmlEncode($1)#").replace(A,"}").replace(M,"__SHARP__").split("#"),o=0;i.length>o;o++)u+=r(i[o],o%2==0);u+=c?";}":";",u=(u+="return $kendoOutput;").replace(E,"#");try{return(n=Function(l,u))._slotCount=Math.floor(i.length/2),n}catch(t){throw Error(ae.format("Invalid template:'{0}' Generated code:'{1}'",e,u))}}},function(){function e(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return typeof t===be?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(o,a){var s,c,u,d,h,p,f=n,g=a[o];if(g&&typeof g===ke&&typeof g.toJSON===ye&&(g=g.toJSON(o)),typeof r===ye&&(g=r.call(a,o,g)),(p=typeof g)===be)return e(g);if(p===we)return isFinite(g)?g+"":xe;if(p===Ce||p===xe)return g+"";if(p===ke){if(!g)return xe;if(n+=i,h=[],"[object Array]"===l.apply(g)){for(d=g.length,s=0;d>s;s++)h[s]=t(s,g)||xe;return u=0===h.length?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+f+"]":"["+h.join(",")+"]",n=f,u}if(r&&typeof r===ke)for(d=r.length,s=0;d>s;s++)typeof r[s]===be&&(u=t(c=r[s],g))&&h.push(e(c)+(n?": ":":")+u);else for(c in g)Object.hasOwnProperty.call(g,c)&&(u=t(c,g))&&h.push(e(c)+(n?": ":":")+u);return u=0===h.length?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+f+"}":"{"+h.join(",")+"}",n=f,u}}var n,i,r,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==ye&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?o(e.getUTCFullYear(),4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof pe.stringify!==ye&&(pe.stringify=function(e,o,a){var s;if(n="",i="",typeof a===we)for(s=0;a>s;s+=1)i+=" ";else typeof a===be&&(i=a);if(r=o,o&&typeof o!==ye&&(typeof o!==ke||typeof o.length!==we))throw Error("JSON.stringify");return t("",{"":e})})}(),function(){function t(e){if(e){if(e.numberFormat)return e;if(typeof e===be){var t=ae.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function i(e){return e&&(e=t(e)),e||ae.cultures.current}function r(e,t,r){var a=(r=i(r)).calendars.standard,s=a.days,l=a.months;return(t=a.patterns[t]||t).replace(c,function(t){var i,r,c;return"d"===t?r=e.getDate():"dd"===t?r=o(e.getDate()):"ddd"===t?r=s.namesAbbr[e.getDay()]:"dddd"===t?r=s.names[e.getDay()]:"M"===t?r=e.getMonth()+1:"MM"===t?r=o(e.getMonth()+1):"MMM"===t?r=l.namesAbbr[e.getMonth()]:"MMMM"===t?r=l.names[e.getMonth()]:"yy"===t?r=o(e.getFullYear()%100):"yyyy"===t?r=o(e.getFullYear(),4):"h"===t?r=e.getHours()%12||12:"hh"===t?r=o(e.getHours()%12||12):"H"===t?r=e.getHours():"HH"===t?r=o(e.getHours()):"m"===t?r=e.getMinutes():"mm"===t?r=o(e.getMinutes()):"s"===t?r=e.getSeconds():"ss"===t?r=o(e.getSeconds()):"f"===t?r=he.floor(e.getMilliseconds()/100):"ff"===t?((r=e.getMilliseconds())>99&&(r=he.floor(r/10)),r=o(r)):"fff"===t?r=o(e.getMilliseconds(),3):"tt"===t?r=e.getHours()<12?a.AM[0]:a.PM[0]:"zzz"===t?(c=0>(i=e.getTimezoneOffset()),r=(""+he.abs(i/60)).split(".")[0],i=he.abs(i)-60*r,r=(c?"+":"-")+o(r),r+=":"+o(i)):("zz"===t||"z"===t)&&(c=0>(r=e.getTimezoneOffset()/60),r=(""+he.abs(r)).split(".")[0],r=(c?"+":"-")+("zz"===t?o(r):r)),r!==n?r:t.slice(1,t.length-1)})}function a(e,t,r){var o,a,l,c,y,b,w,k,x,C,T,S,D,A,M,E,I,R,P,L,F,B,z,H=(r=i(r)).numberFormat,N=H.groupSize[0],O=H[g],V=H[f],U=H.decimals,W=H.pattern[0],j=[],q=0>e,G=p,$=p;if(e===n)return p;if(!isFinite(e))return e;if(!t)return r.name.length?e.toLocaleString():""+e;if(y=u.exec(t)){if(l="p"===(t=y[1].toLowerCase()),((a="c"===t)||l)&&(N=(H=a?H.currency:H.percent).groupSize[0],O=H[g],V=H[f],U=H.decimals,o=H.symbol,W=H.pattern[q?0:1]),(c=y[2])&&(U=+c),"e"===t)return c?e.toExponential(U):e.toExponential();if(l&&(e*=100),q=0>(e=s(e,U)),b=(e=e.split(f))[0],w=e[1],q&&(b=b.substring(1)),$=b,(k=b.length)>=N)for($=p,x=0;k>x;x++)x>0&&(k-x)%N==0&&($+=O),$+=b.charAt(x);if(w&&($+=V+w),"n"===t&&!q)return $;for(e=p,x=0,C=W.length;C>x;x++)e+="n"===(T=W.charAt(x))?$:"$"===T||"%"===T?o:T;return e}if(q&&(e=-e),(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)&&(t=t.replace(d,function(e){var t=e.charAt(0).replace("\\",""),n=e.slice(1).replace(t,"");return j.push(n),_})),t=t.split(";"),q&&t[1])t=t[1],D=!0;else if(0===e){if(-1==(t=t[2]||t[0]).indexOf(m)&&-1==t.indexOf(v))return t}else t=t[0];if(P=t.indexOf("%"),a=-1!=(L=t.indexOf("$")),(l=-1!=P)&&(e*=100),a&&"\\"===t[L-1]&&(t=t.split("\\").join(""),a=!1),(a||l)&&(N=(H=a?H.currency:H.percent).groupSize[0],O=H[g],V=H[f],U=H.decimals,o=H.symbol),(S=t.indexOf(g)>-1)&&(t=t.replace(h,p)),A=t.indexOf(f),C=t.length,-1!=A?(w=(w=(w=(""+e).split("e"))[1]?s(e,Math.abs(w[1])):w[0]).split(f)[1]||p,I=(E=t.lastIndexOf(v)-A)>-1,R=(M=t.lastIndexOf(m)-A)>-1,x=w.length,I||R||(C=(t=t.substring(0,A)+t.substring(A+1)).length,A=-1,x=0),I&&E>M?x=E:M>E&&(R&&x>M?x=M:I&&E>x&&(x=E)),x>-1&&(e=s(e,x))):e=s(e),M=t.indexOf(m),F=E=t.indexOf(v),z=-1==M&&-1!=E?E:-1!=M&&-1==E?M:M>E?E:M,M=t.lastIndexOf(m),E=t.lastIndexOf(v),B=-1==M&&-1!=E?E:-1!=M&&-1==E?M:M>E?M:E,z==C&&(B=z),-1!=z){if(b=($=(""+e).split(f))[0],w=$[1]||p,k=b.length,w.length,q&&-1*e>=0&&(q=!1),S)if(k===N&&A-F>k)b=O+b;else if(k>N){for($=p,x=0;k>x;x++)x>0&&(k-x)%N==0&&($+=O),$+=b.charAt(x);b=$}for(e=t.substring(0,z),q&&!D&&(e+="-"),x=z;C>x;x++){if(T=t.charAt(x),-1==A){if(k>B-x){e+=b;break}}else if(-1!=E&&x>E&&(G=p),k>=A-x&&A-x>-1&&(e+=b,x=A),A===x){e+=(w?V:p)+w,x+=B-A+1;continue}T===v?(e+=T,G=T):T===m&&(e+=G)}if(B>=z&&(e+=t.substring(B+1)),a||l){for($=p,x=0,C=e.length;C>x;x++)$+="$"===(T=e.charAt(x))||"%"===T?o:T;e=$}if(C=j.length)for(x=0;C>x;x++)e=e.replace(_,j[x])}return e}var s,l,c=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,u=/^(n|c|p|e)(\d*)$/i,d=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,h=/\,/g,p="",f=".",g=",",m="#",v="0",_="??",y="en-US",b={}.toString;ae.cultures["en-US"]={name:y,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},ae.culture=function(e){var i,r=ae.cultures;return e===n?r.current:((i=t(e)||r[y]).calendar=i.calendars.standard,r.current=i,Me&&!Me.load&&function(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}(i.numberFormat),n)},ae.findCulture=t,ae.getCulture=i,ae.culture(y),s=function(e,t){return t=t||0,e=(""+e).split("e"),(e=+((e=(""+(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))))).split("e"))[0]+"e"+(e[1]?+e[1]-t:-t))).toFixed(t)},l=function(e,t,i){if(t){if("[object Date]"===b.call(e))return r(e,t,i);if(typeof e===we)return a(e,t,i)}return e!==n?e:""},Me&&!Me.load&&(l=function(t,n,i){return e.isPlainObject(i)&&(i=i.name),Me.format(t,n,i)}),ae.format=function(e){var t=arguments;return e.replace(me,function(e,n,i){var r=t[parseInt(n,10)+1];return l(r,i?i.substring(1):"")})},ae._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},ae._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},ae._round=s,ae.toString=l}(),function(){function t(e,t,n){return!(e>=t&&n>=e)}function i(e){return e.charAt(0)}function r(t){return e.map(t,i)}function o(e){for(var t=0,n=e.length,i=[];n>t;t++)i[t]=(e[t]+"").toLowerCase();return i}function a(e){var t,n={};for(t in e)n[t]=o(e[t]);return n}function s(e,i,o){if(!e)return null;var s,l,c,h,p,f,m,v,_,y,b,w,k=function(e){for(var t=0;i[L]===e;)t++,L++;return t>0&&(L-=1),t},x=function(t){var n=g[t]||RegExp("^\\d{1,"+t+"}"),i=e.substr(F,t).match(n);return i?(i=i[0],F+=i.length,parseInt(i,10)):null},C=function(t,n){for(var i,r,o,a=0,s=t.length,l=0,c=0;s>a;a++)r=(i=t[a]).length,o=e.substr(F,r),n&&(o=o.toLowerCase()),o==i&&r>l&&(l=r,c=a);return l?(F+=l,c+1):null},T=function(){var t=!1;return e.charAt(F)===i[L]&&(F++,t=!0),t},S=o.calendars.standard,D=null,A=null,M=null,E=null,I=null,R=null,P=null,L=0,F=0,B=!1,z=new Date,H=S.twoDigitYearMax||2029,N=z.getFullYear();for(i||(i="d"),(h=S.patterns[i])&&(i=h),c=(i=i.split("")).length;c>L;L++)if(s=i[L],B)"'"===s?B=!1:T();else if("d"===s){if(l=k("d"),S._lowerDays||(S._lowerDays=a(S.days)),null!==M&&l>2)continue;if(null===(M=3>l?x(2):C(S._lowerDays[3==l?"namesAbbr":"names"],!0))||t(M,1,31))return null}else if("M"===s){if(l=k("M"),S._lowerMonths||(S._lowerMonths=a(S.months)),null===(A=3>l?x(2):C(S._lowerMonths[3==l?"namesAbbr":"names"],!0))||t(A,1,12))return null;A-=1}else if("y"===s){if(null===(D=x(l=k("y"))))return null;2==l&&("string"==typeof H&&(H=N+parseInt(H,10)),(D=N-N%100+D)>H&&(D-=100))}else if("h"===s){if(k("h"),12==(E=x(2))&&(E=0),null===E||t(E,0,11))return null}else if("H"===s){if(k("H"),null===(E=x(2))||t(E,0,23))return null}else if("m"===s){if(k("m"),null===(I=x(2))||t(I,0,59))return null}else if("s"===s){if(k("s"),null===(R=x(2))||t(R,0,59))return null}else if("f"===s){if(l=k("f"),w=e.substr(F,l).match(g[3]),null!==(P=x(l))&&(3>(w=w[0].length)&&(P*=Math.pow(10,3-w)),l>3&&(P=parseInt((""+P).substring(0,3),10))),null===P||t(P,0,999))return null}else if("t"===s){if(l=k("t"),v=S.AM,_=S.PM,1===l&&(v=r(v),_=r(_)),!(p=C(_))&&!C(v))return null}else if("z"===s){if(f=!0,l=k("z"),"Z"===e.substr(F,1)){T();continue}if(!(m=e.substr(F,6).match(l>2?d:u)))return null;if(y=(m=m[0].split(":"))[0],!(b=m[1])&&y.length>3&&(F=y.length-2,b=y.substring(F),y=y.substring(0,F)),t(y=parseInt(y,10),-12,13))return null;if(l>2&&(b=parseInt(b,10),isNaN(b)||t(b,0,59)))return null}else if("'"===s)B=!0,T();else if(!T())return null;return null!==D||null!==A||null!==M||null===E&&null===I&&!R?(null===D&&(D=N),null===M&&(M=1)):(D=N,A=z.getMonth(),M=z.getDate()),p&&12>E&&(E+=12),f?(y&&(E+=-y),b&&(I+=-b),e=new Date(Date.UTC(D,A,M,E,I,R,P))):function(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}(e=new Date(D,A,M,E,I,R,P),E),100>D&&e.setFullYear(D),e.getDate()!==M&&f===n?null:e}var l=/\u00A0/g,c=/[eE][\-+]?[0-9]+/,u=/[+|\-]\d{1,2}/,d=/[+|\-]\d{1,2}:?\d{2}/,h=/^\/Date\((.*?)\)\/$/,p=/[+-]\d*/,f=["G","g","d","F","D","y","m","T","t"],g={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},m={}.toString;ae.parseDate=function(e,t,n){var i,r,o,a,l;if("[object Date]"===m.call(e))return e;if(i=0,r=null,e&&0===e.indexOf("/D")&&(r=h.exec(e)))return r=r[1],l=p.exec(r.substring(1)),r=new Date(parseInt(r,10)),l&&(l=function(e){var t="-"===e.substr(0,1)?-1:1;return e=e.substring(1),t*(e=60*parseInt(e.substr(0,2),10)+parseInt(e.substring(2),10))}(l[0]),r=ae.timezone.apply(r,0),r=ae.timezone.convert(r,0,-1*l)),r;if(n=ae.getCulture(n),!t){for(t=[],a=n.calendar.patterns,o=f.length;o>i;i++)t[i]=a[f[i]];i=0,t=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(t)}for(o=(t=ce(t)?t:[t]).length;o>i;i++)if(r=s(e,t[i],n))return r;return r},ae.parseInt=function(e,t){var n=ae.parseFloat(e,t);return n&&(n|=0),n},ae.parseFloat=function(e,t,n){if(!e&&0!==e)return null;if(typeof e===we)return e;e=""+e;var i,r,o=(t=ae.getCulture(t)).numberFormat,a=o.percent,s=o.currency,u=s.symbol,d=a.symbol,h=e.indexOf("-");return c.test(e)?(e=parseFloat(e.replace(o["."],".")),isNaN(e)&&(e=null),e):h>0?null:(h=h>-1,e.indexOf(u)>-1||n&&n.toLowerCase().indexOf("c")>-1?(i=(o=s).pattern[0].replace("$",u).split("n"),e.indexOf(i[0])>-1&&e.indexOf(i[1])>-1&&(e=e.replace(i[0],"").replace(i[1],""),h=!0)):e.indexOf(d)>-1&&(r=!0,o=a,u=d),e=e.replace("-","").replace(u,"").replace(l," ").split(o[","].replace(l," ")).join("").replace(o["."],"."),e=parseFloat(e),isNaN(e)?e=null:h&&(e*=-1),e&&r&&(e/=100),e)},Me&&!Me.load&&(ae.parseDate=function(e,t,n){return"[object Date]"===m.call(e)?e:Me.parseDate(e,t,n)},ae.parseFloat=function(t,i){return typeof t===we?t:t===n||null===t?null:(e.isPlainObject(i)&&(i=i.name),t=Me.parseFloat(t,i),isNaN(t)?null:t)})}(),function(){var i,r,o,a,s,l,u;fe._scrollbar=n,fe.scrollbar=function(e){if(isNaN(fe._scrollbar)||e){var t,n=document.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",n.innerHTML="&nbsp;",document.body.appendChild(n),fe._scrollbar=t=n.offsetWidth-n.scrollWidth,document.body.removeChild(n),t}return fe._scrollbar},fe.isRtl=function(t){return e(t).closest(".k-rtl").length>0},i=document.createElement("table");try{i.innerHTML="<tr><td></td></tr>",fe.tbodyInnerHtml=!0}catch(e){fe.tbodyInnerHtml=!1}fe.touch="ontouchstart"in t,fe.msPointers=t.MSPointerEvent,fe.pointers=t.PointerEvent,r=fe.transitions=!1,o=fe.transforms=!1,a="HTMLElement"in t?HTMLElement.prototype:[],fe.hasHW3D="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,le(["Moz","webkit","O","ms"],function(){var e,t=""+this,a=typeof i.style[t+"Transition"]===be;return a||typeof i.style[t+"Transform"]===be?(e=t.toLowerCase(),o={css:"ms"!=e?"-"+e+"-":"",prefix:t,event:"o"===e||"webkit"===e?e:""},a&&((r=o).event=r.event?r.event+"TransitionEnd":"transitionend"),!1):n}),i=null,fe.transforms=o,fe.transitions=r,fe.devicePixelRatio=t.devicePixelRatio===n?1:t.devicePixelRatio;try{fe.screenWidth=t.outerWidth||t.screen?t.screen.availWidth:t.innerWidth,fe.screenHeight=t.outerHeight||t.screen?t.screen.availHeight:t.innerHeight}catch(e){fe.screenWidth=t.screen.availWidth,fe.screenHeight=t.screen.availHeight}fe.detectOS=function(e){var n,i,r=!1,o=[],a=!/mobile safari/i.test(e),s={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},l={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},u={tablet:/playbook|ipad|fire/i},d={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(i in s)if(s.hasOwnProperty(i)&&(o=e.match(s[i]))){if("windows"==i&&"plugins"in navigator)return!1;(r={}).device=i,r.tablet=c(i,u,!1),r.browser=c(e,d,"default"),r.name=c(i,l),r[r.name]=!0,r.majorVersion=o[2],r.minorVersion=o[3].replace("_","."),n=r.minorVersion.replace(".","").substr(0,2),r.flatVersion=r.majorVersion+n+Array(3-(3>n.length?n.length:2)).join("0"),r.cordova=typeof t.PhoneGap!==Te||typeof t.cordova!==Te,r.appMode=t.navigator.standalone||/file|local|wmapp/.test(t.location.protocol)||r.cordova,r.android&&(1.5>fe.devicePixelRatio&&400>r.flatVersion||a)&&(fe.screenWidth>800||fe.screenHeight>800)&&(r.tablet=i);break}return r},s=fe.mobileOS=fe.detectOS(navigator.userAgent),fe.wpDevicePixelRatio=s.wp?screen.width/320:0,fe.kineticScrollNeeded=s&&(fe.touch||fe.msPointers||fe.pointers),fe.hasNativeScrolling=!1,(s.ios||s.android&&s.majorVersion>2||s.wp)&&(fe.hasNativeScrolling=s),fe.mouseAndTouchPresent=fe.touch&&!(fe.mobileOS.ios||fe.mobileOS.android),fe.detectBrowser=function(e){var t,n=!1,i=[],r={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(t in r)if(r.hasOwnProperty(t)&&(i=e.match(r[t]))){(n={})[t]=!0,n[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,n.version=parseInt(document.documentMode||i[2],10);break}return n},fe.browser=fe.detectBrowser(navigator.userAgent),fe.zoomLevel=function(){var e,n,i;try{return e=fe.browser,n=0,i=document.documentElement,e.msie&&11==e.version&&i.scrollHeight>i.clientHeight&&!fe.touch&&(n=fe.scrollbar()),fe.touch?i.clientWidth/t.innerWidth:e.msie&&e.version>=10?((top||t).document.documentElement.offsetWidth+n)/(top||t).innerWidth:1}catch(e){return 1}},fe.cssBorderSpacing=n!==document.documentElement.style.borderSpacing&&!(fe.browser.msie&&8>fe.browser.version),function(t){var n="",i=e(document.documentElement),r=parseInt(t.version,10);t.msie?n="ie":t.mozilla?n="ff":t.safari?n="safari":t.webkit?n="webkit":t.opera&&(n="opera"),n&&(n="k-"+n+" k-"+n+r),fe.mobileOS&&(n+=" k-mobile"),i.addClass(n)}(fe.browser),fe.eventCapture=document.documentElement.addEventListener,l=document.createElement("input"),fe.placeholder="placeholder"in l,fe.propertyChangeEvent="onpropertychange"in l,fe.input=function(){for(var e,t=["number","date","time","month","week","datetime","datetime-local"],n=t.length,i="test",r={},o=0;n>o;o++)e=t[o],l.setAttribute("type",e),l.value=i,r[e.replace("-","")]="text"!==l.type&&l.value!==i;return r}(),l.style.cssText="float:left;",fe.cssFloat=!!l.style.cssFloat,l=null,fe.stableSort=function(){var e,t=[{index:0,field:"b"}];for(e=1;513>e;e++)t.push({index:e,field:"a"});return t.sort(function(e,t){return e.field>t.field?1:t.field>e.field?-1:0}),1===t[0].index}(),fe.matchesSelector=a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.matchesSelector||a.matches||function(t){for(var n=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),i=n.length;i--;)if(n[i]==this)return!0;return!1},fe.pushState=t.history&&t.history.pushState,u=document.documentMode,fe.hashChange="onhashchange"in t&&!(fe.browser.msie&&(!u||8>=u))}(),R={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},P={},e.extend(P,{enabled:!0,Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),P.promiseShim=P.promise,"kendoAnimate"in e.fn||se(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,i){return p(this,e,t,n,i)},kendoAddClass:function(e,t){return ae.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return ae.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,n){return ae.toggleClass(this,e,t,n)}}),L=/&/g,F=/</g,B=/"/g,z=/'/g,H=/>/g,N=function(e){return e.target},fe.touch&&(N=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},le(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),fe.touch?fe.mobileOS?(fe.mousedown="touchstart",fe.mouseup="touchend",fe.mousemove="touchmove",fe.mousecancel="touchcancel",fe.click="touchend",fe.resize="orientationchange"):(fe.mousedown="mousedown touchstart",fe.mouseup="mouseup touchend",fe.mousemove="mousemove touchmove",fe.mousecancel="mouseleave touchcancel",fe.click="click",fe.resize="resize"):fe.pointers?(fe.mousemove="pointermove",fe.mousedown="pointerdown",fe.mouseup="pointerup",fe.mousecancel="pointercancel",fe.click="pointerup",fe.resize="orientationchange resize"):fe.msPointers?(fe.mousemove="MSPointerMove",fe.mousedown="MSPointerDown",fe.mouseup="MSPointerUp",fe.mousecancel="MSPointerCancel",fe.click="MSPointerUp",fe.resize="orientationchange resize"):(fe.mousemove="mousemove",fe.mousedown="mousedown",fe.mouseup="mouseup",fe.mousecancel="mouseleave",fe.click="click",fe.resize="resize"),O=function(e,t){var n,i,r,o,a=t||"d",s=1;for(i=0,r=e.length;r>i;i++)""!==(o=e[i])&&(0!==(n=o.indexOf("["))&&(-1==n?o="."+o:(s++,o="."+o.substring(0,n)+" || {})"+o.substring(n))),s++,a+=o+(r-1>i?" || {})":")"));return Array(s).join("(")+a},V=/^([a-z]+:)?\/\//i,se(ae,{ui:ae.ui||{},fx:ae.fx||function(e){return new ae.effects.Element(e)},effects:ae.effects||P,mobile:ae.mobile||{},data:ae.data||{},dataviz:ae.dataviz||{},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:ae.support||fe,animate:ae.animate||p,ns:"",attr:function(e){return"data-"+ae.ns+e},getShadows:a,wrap:function(t,n){var i,r,o,s,l,c,u,d,h=fe.browser,p="rtl"==t.css("direction");return t.parent().hasClass("k-animation-container")?(d=(u=t.parent(".k-animation-container"))[0].style,u.is(":hidden")&&u.show(),(i=ge.test(d.width)||ge.test(d.height))||u.css({width:t.outerWidth(),height:t.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})):(r=a(t),o=t[0].style.width,s=t[0].style.height,l=ge.test(o),c=ge.test(s),h.opera&&(r.left=r.right=r.bottom=5),i=l||c,!l&&(!n||n&&o)&&(o=t.outerWidth()),!c&&(!n||n&&s)&&(s=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:o,height:s,marginLeft:r.left*(p?1:-1),paddingLeft:r.left,paddingRight:r.right,paddingBottom:r.bottom})),i&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),h.msie&&he.floor(h.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()},deepExtend:s,getComputedStyles:d,isScrollable:function(e){var t=d(e,["overflow"]).overflow;return"auto"==t||"scroll"==t},size:function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&n++;return n},toCamelCase:u,toHyphens:function(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},getOffset:ae.getOffset||function(e,n,i){n||(n="offset");var r=e[n]();return fe.browser.msie&&(fe.pointers||fe.msPointers)&&!i&&(r.top-=t.pageYOffset-document.documentElement.scrollTop,r.left-=t.pageXOffset-document.documentElement.scrollLeft),r},parseEffects:ae.parseEffects||function(e){var t={};return le("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t},toggleClass:ae.toggleClass||function(e,t,n,i){return t&&(t=t.split(" "),le(t,function(t,n){e.toggleClass(n,i)})),e},directions:ae.directions||R,Observable:C,Class:i,Template:b,template:ue(b.compile,b),render:ue(b.render,b),stringify:ue(pe.stringify,pe),eventTarget:N,htmlEncode:function(e){return(""+e).replace(L,"&amp;").replace(F,"&lt;").replace(H,"&gt;").replace(B,"&quot;").replace(z,"&#39;")},isLocalUrl:function(e){return e&&!V.test(e)},expr:function(e,t,n){return e=e||"",typeof t==be&&(n=t,t=!1),n=n||"d",e&&"["!==e.charAt(0)&&(e="."+e),t?(e=(e=e.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"')).replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),e=(e=O(e.split("."),n)).replace(/_\$DOT\$_/g,".")):e=n+e,e},getter:function(e,t){var n=e+t;return Se[n]=Se[n]||Function("d","return "+ae.expr(e,t))},setter:function(e){return De[e]=De[e]||Function("d,value",ae.expr(e)+"=value")},accessor:function(e){return{get:ae.getter(e),set:ae.setter(e)}},guid:function(){var e,t,n="";for(e=0;32>e;e++)t=16*he.random()|0,(8==e||12==e||16==e||20==e)&&(n+="-"),n+=(12==e?4:16==e?3&t|8:t).toString(16);return n},roleSelector:function(e){return e.replace(/(\S+)/g,"["+ae.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t,n=e.split(" ");if(n)for(t=0;n.length>t;t++)"view"!=n[t]&&(n[t]=n[t].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return n.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var i=t.console;!ae.suppressLog&&n!==i&&i.log&&i.log(e)}}),W=(U=C.extend({init:function(e,t){var n,i=this;i.element=ae.jQuery(e).handler(i),i.angular("init",t),C.fn.init.call(i),(n=t?t.dataSource:null)&&(t=se({},t,{dataSource:{}})),t=i.options=se(!0,{},i.options,t),n&&(t.dataSource=n),i.element.attr(ae.attr("role"))||i.element.attr(ae.attr("role"),(t.name||"").toLowerCase()),i.element.data("kendo"+t.prefix+t.name,i),i.bind(i.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",i=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(i)?0:i)},setOptions:function(t){this._setEvents(t),e.extend(this.options,t)},_setEvents:function(e){for(var t,n=this,i=0,r=n.events.length;r>i;i++)t=n.events[i],n.options[t]&&e[t]&&n.unbind(t,n.options[t]);n.bind(n.events,e)},resize:function(e){var t=this.getSize(),n=this._size;(e||(t.width>0||t.height>0)&&(!n||t.width!==n.width||t.height!==n.height))&&(this._size=t,this._resize(t,e),this.trigger("resize",t))},getSize:function(){return ae.dimensions(this.element)},size:function(e){return e?(this.setSize(e),n):this.getSize()},setSize:e.noop,_resize:e.noop,destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()},_destroy:function(){this.destroy()},angular:function(){}})).extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var n=this;n.angular(t,function(){return{elements:n.items(),data:e.map(n.dataItems(),function(e){return{dataItem:e}})}})}}),ae.dimensions=function(e,t){var n=e[0];return t&&e.css(t),{width:n.offsetWidth,height:n.offsetHeight}},ae.notify=de,j=/template$/i,q=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,G=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,$=/([A-Z])/g,ae.initWidget=function(i,r,o){var a,s,l,c,u,d,h,p,m,v,_,y,b;if(o?o.roles&&(o=o.roles):o=ae.ui.roles,d=(i=i.nodeType?i:i[0]).getAttribute("data-"+ae.ns+"role")){for(b in l=(m=-1===d.indexOf("."))?o[d]:ae.getter(d)(t),_=e(i).data(),y=l?"kendo"+l.fn.options.prefix+l.fn.options.name:"",v=m?RegExp("^kendo.*"+d+"$","i"):RegExp("^"+y+"$","i"),_)if(b.match(v)){if(b!==y)return _[b];a=_[b]}if(l){for(p=f(i,"dataSource"),r=e.extend({},g(i,l.fn.options),r),p&&(r.dataSource=typeof p===be?ae.getter(p)(t):p),c=0,u=l.fn.events.length;u>c;c++)(h=f(i,s=l.fn.events[c]))!==n&&(r[s]=ae.getter(h)(t));return a?e.isEmptyObject(r)||a.setOptions(r):a=new l(i,r),a}}},ae.rolesFromNamespaces=function(e){var t,n,i=[];for(e[0]||(e=[ae.ui,ae.dataviz.ui]),t=0,n=e.length;n>t;t++)i[t]=e[t].roles;return se.apply(null,[{}].concat(i.reverse()))},ae.init=function(t){var n=ae.rolesFromNamespaces(Ae.call(arguments,1));e(t).find("[data-"+ae.ns+"role]").addBack().each(function(){ae.initWidget(this,{},n)})},ae.destroy=function(t){e(t).find("[data-"+ae.ns+"role]").addBack().each(function(){var t,n=e(this).data();for(t in n)0===t.indexOf("kendo")&&typeof n[t].destroy===ye&&n[t].destroy()})},ae.resize=function(t,n){var i,r=e(t).find("[data-"+ae.ns+"role]").addBack().filter(v);r.length&&((i=e.makeArray(r)).sort(m),e.each(i,function(){var t=ae.widgetInstance(e(this));t&&t.resize(n)}))},ae.parseOptions=g,se(ae.ui,{Widget:U,DataBoundWidget:W,roles:{},progress:function(t,n){var i,r,o,a,s=t.find(".k-loading-mask"),l=ae.support,c=l.browser;n?s.length||(r=(i=l.isRtl(t))?"right":"left",a=t.scrollLeft(),o=c.webkit&&i?t[0].scrollWidth-t.width()-2*a:0,s=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(r,Math.abs(a)+o).prependTo(t)):s&&s.remove()},plugin:function(t,i,r){var o,a=t.fn.options.name;i=i||ae.ui,r=r||"",i[a]=t,i.roles[a.toLowerCase()]=t,o="getKendo"+r+a,a="kendo"+r+a,e.fn[a]=function(i){var r,o=this;return typeof i===be?(r=Ae.call(arguments,1),this.each(function(){var t,s,l=e.data(this,a);if(!l)throw Error(ae.format("Cannot call method '{0}' of {1} before it is initialized",i,a));if(typeof(t=l[i])!==ye)throw Error(ae.format("Cannot find method '{0}' of {1}",i,a));return(s=t.apply(l,r))!==n?(o=s,!1):n})):this.each(function(){new t(this,i)}),o},e.fn[a].widget=t,e.fn[o]=function(){return this.data(a)}}}),Y={bind:function(){return this},nullObject:!0,options:{}},Q=U.extend({init:function(e,t){U.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){U.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(ae.roleSelector("view splitview modalview drawer"));return ae.widgetInstance(e,ae.mobile.ui)||Y},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(ae.roleSelector("view layout modalview drawer splitview"));return ae.widgetInstance(e.eq(0),ae.mobile.ui)||Y}}),se(ae.mobile,{init:function(e){ae.init(e,ae.mobile.ui,ae.ui,ae.dataviz.ui)},appLevelNativeScrolling:function(){return ae.mobile.application&&ae.mobile.application.options&&ae.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:Q,DataBoundWidget:W.extend(Q.prototype),roles:{},plugin:function(e){ae.ui.plugin(e,ae.mobile.ui,"Mobile")}}}),s(ae.dataviz,{init:function(e){ae.init(e,ae.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){ae.ui.plugin(e,ae.dataviz.ui)}},roles:{}}),ae.touchScroller=function(t,n){return e(t).map(function(t,i){return i=e(i),!(!fe.kineticScrollNeeded||!ae.mobile.ui.Scroller||i.data("kendoMobileScroller"))&&(i.kendoMobileScroller(n),i.data("kendoMobileScroller"))})[0]},ae.preventDefault=function(e){e.preventDefault()},ae.widgetInstance=function(e,n){var i,r,o,a,s=e.data(ae.ns+"role"),l=[];if(s){if("content"===s&&(s="scroller"),n)if(n[0])for(i=0,r=n.length;r>i;i++)l.push(n[i].roles[s]);else l.push(n.roles[s]);else l=[ae.ui.roles[s],ae.dataviz.ui.roles[s],ae.mobile.ui.roles[s]];for(s.indexOf(".")>=0&&(l=[ae.getter(s)(t)]),i=0,r=l.length;r>i;i++)if((o=l[i])&&(a=e.data("kendo"+o.fn.options.prefix+o.fn.options.name)))return a}},ae.onResize=function(n){var i=n;return fe.mobileOS.android&&(i=function(){setTimeout(n,600)}),e(t).on(fe.resize,i),i},ae.unbindResize=function(n){e(t).off(fe.resize,n)},ae.attrValue=function(e,t){return e.data(ae.ns+t)},ae.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{kendoFocusable:function(t){var n=e.attr(t,"tabindex");return function(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n&&e.href||t)&&_(e)}(t,!isNaN(n)&&n>-1)}}),X=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],K="label, input, [data-rel=external]",Z={setupMouseMute:function(){var t,n=0,i=X.length,r=document.documentElement;if(!Z.mouseTrap&&fe.eventCapture)for(Z.mouseTrap=!0,Z.bustClick=!1,Z.captureMouse=!1,t=function(t){Z.captureMouse&&("click"===t.type?Z.bustClick&&!e(t.target).is(K)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};i>n;n++)r.addEventListener(X[n],t,!0)},muteMouse:function(e){Z.captureMouse=!0,e.data.bustClick&&(Z.bustClick=!0),clearTimeout(Z.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(Z.mouseTrapTimeoutID),Z.mouseTrapTimeoutID=setTimeout(function(){Z.captureMouse=!1,Z.bustClick=!1},400)}},J={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},fe.touch&&(fe.mobileOS.ios||fe.mobileOS.android)?J={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:fe.pointers?J={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:fe.msPointers&&(J={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!fe.msPointers||"onmspointerenter"in t||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,r=t.relatedTarget,o=t.handleObj;return(!r||r!==this&&!e.contains(this,r))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=n),i}}}),ee=function(e){return J[e]||e},te=/([^ ]+)/g,ae.applyEventMap=function(e,t){return e=e.replace(te,ee),t&&(e=e.replace(te,"$1."+t)),e},ne=e.fn.on,se(!0,y,e),y.fn=y.prototype=new e,y.fn.constructor=y,y.fn.init=function(t,n){return n&&n instanceof e&&!(n instanceof y)&&(n=y(n)),e.fn.init.call(this,t,n,ie)},y.fn.init.prototype=y.fn,ie=y(document),se(y.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||ae.guid()),this},on:function(){var e,t,n,i,r,o,a=this,s=a.data("kendoNS");return 1===arguments.length?ne.call(a,arguments[0]):(e=a,typeof(t=Ae.call(arguments))[t.length-1]===Te&&t.pop(),n=t[t.length-1],i=ae.applyEventMap(t[0],s),fe.mouseAndTouchPresent&&i.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(Z.setupMouseMute(),r=2===t.length?null:t[1],o=i.indexOf("click")>-1&&i.indexOf("touchend")>-1,ne.call(this,{touchstart:Z.muteMouse,touchend:Z.unMuteMouse},r,{bustClick:o})),typeof n===be&&(e=a.data("handler"),n=e[n],t[t.length-1]=function(t){n.call(e,t)}),t[0]=i,ne.apply(a,t),a)},kendoDestroy:function(e){return(e=e||this.data("kendoNS"))&&this.off("."+e),this}}),ae.jQuery=y,ae.eventMap=J,ae.timezone=function(){function e(e,t){var n,o,a,s=t[3],l=t[4],c=t[5],u=t[8];return u||(t[8]=u={}),u[e]?u[e]:(isNaN(l)?0===l.indexOf("last")?(n=new Date(Date.UTC(e,i[s]+1,1,c[0]-24,c[1],c[2],0)),o=r[l.substr(4,3)],a=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+o-a-(o>a?7:0))):l.indexOf(">=")>=0&&(n=new Date(Date.UTC(e,i[s],l.substr(5),c[0],c[1],c[2],0)),o=r[l.substr(0,3)],a=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+o-a+(a>o?7:0))):n=new Date(Date.UTC(e,i[s],l,c[0],c[1],c[2],0)),u[e]=n)}function t(t,n,i){var r,o,a,s;return(n=n[i])?(a=new Date(t).getUTCFullYear(),(n=jQuery.grep(n,function(e){var t=e[0],n=e[1];return a>=t&&(n>=a||t==a&&"only"==n||"max"==n)})).push(t),n.sort(function(t,n){return"number"!=typeof t&&(t=+e(a,t)),"number"!=typeof n&&(n=+e(a,n)),t-n}),s=n[jQuery.inArray(t,n)-1]||n[n.length-1],isNaN(s)?s:null):(o=0,(r=i.split(":")).length>1&&(o=60*r[0]+ +r[1]),[-1e6,"max","-","Jan",1,[0,0,0],o,"-"])}function n(e,n,i,r){typeof e!=we&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var o=function(e,t,n){var i,r,o,a=t[n];if("string"==typeof a&&(a=t[a]),!a)throw Error('Timezone "'+n+'" is either incorrect, or kendo.timezones.min.js is not included.');for(i=a.length-1;i>=0&&!((r=a[i][3])&&e>r);i--);if(!(o=a[i+1]))throw Error('Timezone "'+n+'" not found on '+e+".");return o}(e,n,r);return{zone:o,rule:t(e,i,o[1])}}var i={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},r={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:function(e,t){var i,r,o;return"Etc/UTC"==t||"Etc/GMT"==t?0:(r=(i=n(e,this.zones,this.rules,t)).zone,o=i.rule,ae.parseFloat(o?r[0]-o[6]:r[0]))},convert:function(e,t,n){var i,r;return typeof t==be&&(t=this.offset(e,t)),typeof n==be&&(n=this.offset(e,n)),i=e.getTimezoneOffset(),r=(e=new Date(e.getTime()+6e4*(t-n))).getTimezoneOffset(),new Date(e.getTime()+6e4*(r-i))},apply:function(e,t){return this.convert(e,e.getTimezoneOffset(),t)},remove:function(e,t){return this.convert(e,t,e.getTimezoneOffset())},abbr:function(e,t){var i=n(e,this.zones,this.rules,t),r=i.zone,o=i.rule,a=r[2];return a.indexOf("/")>=0?a.split("/")[o&&+o[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",o&&"-"!=o[7]?o[7]:""):a},toLocalDate:function(e){return this.apply(new Date(e),"Etc/UTC")}}}(),ae.date=function(){function e(e,t){return 0===t&&23===e.getHours()&&(e.setHours(e.getHours()+2),!0)}function t(t,n,i){var r=t.getHours();i=i||1,n=(n-t.getDay()+7*i)%7,t.setDate(t.getDate()+n),e(t,r)}function n(e){return new Date(e.getFullYear(),e.getMonth(),1)}function i(t){return e(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),0),t}function r(e){return e.getTime()-i(e)}function o(t,n){var i=t.getHours();return a(t=new Date(t),n*c),e(t,i),t}function a(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*l))}function s(){return i(new Date)}var l=6e4,c=864e5;return{adjustDST:e,dayOfWeek:function(e,n,i){return t(e=new Date(e),n,i),e},setDayOfWeek:t,getDate:i,isInDateRange:function(e,t,n){var i,r=t.getTime(),o=n.getTime();return r>=o&&(o+=c),(i=e.getTime())>=r&&o>=i},isInTimeRange:function(e,t,n){var i,o=r(t),a=r(n);return!e||o==a||(t>=n&&(n+=c),o>(i=r(e))&&(i+=c),o>a&&(a+=c),i>=o&&a>=i)},isToday:function(e){return i(e).getTime()==s().getTime()},nextDay:function(e){return o(e,1)},previousDay:function(e){return o(e,-1)},toUtcTime:function(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},MS_PER_DAY:c,MS_PER_HOUR:60*l,MS_PER_MINUTE:l,setTime:a,addDays:o,today:s,toInvariantTime:function(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t},firstDayOfMonth:n,lastDayOfMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),i=n(e),r=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());return r&&t.setHours(i.getHours()+r/60),t},getMilliseconds:r}}(),ae.stripWhitespace=function(e){var t,n,i;if(document.createNodeIterator)for(t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(n=0;e.childNodes.length>n;n++)3!=(i=e.childNodes[n]).nodeType||/\S/.test(i.nodeValue)||(e.removeChild(i),n--),1==i.nodeType&&ae.stripWhitespace(i)},re=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},ae.animationFrame=function(e){re.call(t,e)},oe=[],ae.queueAnimation=function(e){oe[oe.length]=e,1===oe.length&&ae.runNextAnimation()},ae.runNextAnimation=function(){ae.animationFrame(function(){oe[0]&&(oe.shift()(),oe[0]&&ae.runNextAnimation())})},ae.parseQueryStringParams=function(e){for(var t={},n=(e.split("?")[1]||"").split(/&|=/),i=n.length,r=0;i>r;r+=2)""!==n[r]&&(t[decodeURIComponent(n[r])]=decodeURIComponent(n[r+1]));return t},ae.elementUnderCursor=function(e){return n!==e.x.client?document.elementFromPoint(e.x.client,e.y.client):n},ae.wheelDeltaY=function(e){var t,i=e.originalEvent,r=i.wheelDeltaY;return i.wheelDelta?(r===n||r)&&(t=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(t=10*-i.detail),t},ae.throttle=function(e,t){var i,r,o=0;return!t||0>=t?e:((r=function(){function r(){e.apply(a,l),o=+new Date}var a=this,s=+new Date-o,l=arguments;return o?(i&&clearTimeout(i),s>t?r():i=setTimeout(r,t-s),n):r()}).cancel=function(){clearTimeout(i)},r)},ae.caret=function(t,i,r){var o,a,s,l=i!==n;if(r===n&&(r=i),t[0]&&(t=t[0]),!l||!t.disabled){try{t.selectionStart!==n?l?(t.focus(),t.setSelectionRange(i,r)):i=[t.selectionStart,t.selectionEnd]:document.selection&&(e(t).is(":visible")&&t.focus(),o=t.createTextRange(),l?(o.collapse(!0),o.moveStart("character",i),o.moveEnd("character",r-i),o.select()):(a=o.duplicate(),o.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint("EndToStart",o),i=[s=a.text.length,s+o.text.length]))}catch(e){i=[]}return i}},ae.compileMobileDirective=function(e,n){var i=t.angular;return e.attr("data-"+ae.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),i.element(e).injector().invoke(["$compile",function(t){t(e)(n),/^\$(digest|apply)$/.test(n.$$phase)||n.$digest()}]),ae.widgetInstance(e,ae.mobile.ui)},ae.antiForgeryTokens=function(){var t={},i=e("meta[name=csrf-token],meta[name=_csrf]").attr("content"),r=e("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){t[this.name]=this.value}),r!==n&&i!==n&&(t[r]=i),t},ae.cycleForm=function(e){function t(e){var t=ae.widgetInstance(e);t&&t.focus?t.focus():e.focus()}var n=e.find("input, .k-widget").first(),i=e.find("button, .k-button").last();i.on("keydown",function(e){e.keyCode!=ae.keys.TAB||e.shiftKey||(e.preventDefault(),t(n))}),n.on("keydown",function(e){e.keyCode==ae.keys.TAB&&e.shiftKey&&(e.preventDefault(),t(i))})},function(){function n(t,n,i,r){var o,a,s=e("<form>").attr({action:i,method:"POST",target:r}),l=ae.antiForgeryTokens();for(a in l.fileName=n,o=t.split(";base64,"),l.contentType=o[0].replace("data:",""),l.base64=o[1],l)l.hasOwnProperty(a)&&e("<input>").attr({value:l[a],name:a,type:"hidden"}).appendTo(s);s.appendTo("body").submit().remove()}function i(e,t){var n,i,r,o,a,s=e;if("string"==typeof e){for(i=(n=e.split(";base64,"))[0],r=atob(n[1]),o=new Uint8Array(r.length),a=0;r.length>a;a++)o[a]=r.charCodeAt(a);s=new Blob([o.buffer],{type:i})}navigator.msSaveBlob(s,t)}function r(e,n){t.Blob&&e instanceof Blob&&(e=URL.createObjectURL(e)),o.download=n,o.href=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}var o=document.createElement("a"),a="download"in o;ae.saveAs=function(e){var t=n;e.forceProxy||(a?t=r:navigator.msSaveBlob&&(t=i)),t(e.dataURI,e.fileName,e.proxyURL,e.proxyTarget)}}()}(jQuery,window),function(e,t){function n(e,t){return t?(e+"/"===t&&(e=t),RegExp("^"+t,"i").test(e)||(e=t+"/"+e),h.protocol+"//"+(h.host+"/"+e).replace(/\/\/+/g,"/")):e}function i(e){return e?"#!":"#"}function r(e){var t=h.href;return"#!"===e&&t.indexOf("#")>-1&&t.indexOf("#!")<0?null:t.split(e)[1]||""}function o(e,t){return 0===t.indexOf(e)?t.substr(e.length).replace(/\/\//g,"/"):t}function a(e){return e.replace(/^(#)?/,"#")}function s(e){return e.replace(/^(#(!)?)?/,"#!")}var l=window.kendo,c="change",u="same",d=l.support,h=window.location,p=window.history,f=l.support.browser.msie,g=/^#*/,m=window.document,v=l.Class.extend({back:function(){f?setTimeout(function(){p.back()}):p.back()},forward:function(){f?setTimeout(function(){p.forward()}):p.forward()},length:function(){return p.length},replaceLocation:function(e){h.replace(e)}}),_=v.extend({init:function(e){this.root=e},navigate:function(e){p.pushState({},m.title,n(e,this.root))},replace:function(e){p.replaceState({},m.title,n(e,this.root))},normalize:function(e){return o(this.root,e)},current:function(){var e=h.pathname;return h.search&&(e+=h.search),o(this.root,e)},change:function(t){e(window).bind("popstate.kendo",t)},stop:function(){e(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,o=e.root,a=h.pathname,s=r(i(e.hashBang));o===a+"/"&&(t=o),o===a&&s&&(t=n(s.replace(g,""),o)),t&&p.pushState({},m.title,t)}}),y=v.extend({init:function(e){this._id=l.guid(),this.prefix=i(e),this.fix=e?s:a},navigate:function(e){h.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){return e.indexOf(this.prefix)<0?e:e.split(this.prefix)[1]},change:function(t){d.hashChange?e(window).on("hashchange."+this._id,t):this._interval=setInterval(t,50)},stop:function(){e(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return r(this.prefix)},normalizeCurrent:function(e){var t=h.pathname,n=e.root;return!(!e.pushState||n===t||(this.replaceLocation(n+this.prefix+o(n,t)),0))}}),b=l.Observable.extend({start:function(t){if(t=t||{},this.bind([c,"back",u],t),!this._started){this._started=!0,t.root=t.root||"/";var n,i=this.createAdapter(t);i.normalizeCurrent(t)||(n=i.current(),e.extend(this,{adapter:i,root:t.root,historyLength:i.length(),current:n,locations:[n]}),i.change(e.proxy(this,"_checkUrl")))}},createAdapter:function(e){return d.pushState&&e.pushState?new _(e.root):new y(e.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind(c),this._started=!1)},change:function(e){this.bind(c,e)},replace:function(e,t){this._navigate(e,t,function(t){t.replace(e),this.locations[this.locations.length-1]=this.current})},navigate:function(e,n){return"#:back"===e?(this.backCalled=!0,this.adapter.back(),t):(this._navigate(e,n,function(t){t.navigate(e),this.locations.push(this.current)}),t)},_navigate:function(e,n,i){var r=this.adapter;return e=r.normalize(e),this.current===e||this.current===decodeURIComponent(e)?(this.trigger(u),t):((n||!this.trigger(c,{url:e}))&&(this.current=e,i.call(this,r),this.historyLength=r.length()),t)},_checkUrl:function(){var e=this.adapter,n=e.current(),i=e.length(),r=this.historyLength===i,o=n===this.locations[this.locations.length-2]&&r,a=this.backCalled,s=this.current;return null===n||this.current===n||this.current===decodeURIComponent(n)||(this.historyLength=i,this.backCalled=!1,this.current=n,o&&this.trigger("back",{url:s,to:n})?(e.forward(),this.current=s,t):this.trigger(c,{url:n,backButtonPressed:!a})?(o?e.forward():(e.back(),this.historyLength--),this.current=s,t):(o?this.locations.pop():this.locations.push(n),t))}});l.History=b,l.History.HistoryAdapter=v,l.History.HashAdapter=y,l.History.PushStateAdapter=_,l.absoluteURL=n,l.history=new b}(window.kendo.jQuery),function(){function e(e,t){return t?e:"([^/]+)"}function t(t,n){return RegExp("^"+t.replace(f,"\\$&").replace(d,"(?:$1)?").replace(h,e).replace(p,"(.*?)")+"$",n?"i":"")}function n(e){return e.replace(/(\?.*)|(#.*)/g,"")}var i=window.kendo,r=i.history,o=i.Observable,a="init",s="routeMissing",l="change",c="back",u="same",d=/\((.*?)\)/g,h=/(\(\?)?:\w+/g,p=/\*\w+/g,f=/[\-{}\[\]+?.,\\\^$|#\s]/g,g=i.Class.extend({init:function(e,n,i){e instanceof RegExp||(e=t(e,i)),this.route=e,this._callback=n},callback:function(e){var t,r,o=0,a=i.parseQueryStringParams(e);for(e=n(e),r=(t=this.route.exec(e).slice(1)).length;r>o;o++)void 0!==t[o]&&(t[o]=decodeURIComponent(t[o]));t.push(a),this._callback.apply(null,t)},worksWith:function(e){return!!this.route.test(n(e))&&(this.callback(e),!0)}}),m=o.extend({init:function(e){e||(e={}),o.fn.init.call(this),this.routes=[],this.pushState=e.pushState,this.hashBang=e.hashBang,this.root=e.root,this.ignoreCase=!1!==e.ignoreCase,this.bind([a,s,l,u],e)},destroy:function(){r.unbind(l,this._urlChangedProxy),r.unbind(u,this._sameProxy),r.unbind(c,this._backProxy),this.unbind()},start:function(){var e,t=this,n=function(e){t._back(e)},i=function(e){t._urlChanged(e)};r.start({same:function(){t._same()},change:i,back:n,pushState:t.pushState,hashBang:t.hashBang,root:t.root}),e={url:r.current||"/",preventDefault:$.noop},t.trigger(a,e)||t._urlChanged(e),this._urlChangedProxy=i,this._backProxy=n},route:function(e,t){this.routes.push(new g(e,t,this.ignoreCase))},navigate:function(e,t){i.history.navigate(e,t)},replace:function(e,t){i.history.replace(e,t)},_back:function(e){this.trigger(c,{url:e.url,to:e.to})&&e.preventDefault()},_same:function(){this.trigger(u)},_urlChanged:function(e){var t,n,r,o=e.url;if(o||(o="/"),this.trigger(l,{url:e.url,params:i.parseQueryStringParams(e.url),backButtonPressed:e.backButtonPressed}))e.preventDefault();else{for(t=0,r=(n=this.routes).length;r>t;t++)if(n[t].worksWith(o))return;this.trigger(s,{url:o,params:i.parseQueryStringParams(o),backButtonPressed:e.backButtonPressed})&&e.preventDefault()}}});i.Router=m}(),function(e,t){function n(r,s){var l,c,u,d,h,p,f,g,m=[],v=r.logic||"and",_=r.filters;for(l=0,c=_.length;c>l;l++)u=(r=_[l]).field,f=r.value,p=r.operator,r.filters?r=n(r,s):(g=r.ignoreCase,u=u.replace(/\./g,"/"),r=o[p],s&&(r=a[p]),r&&f!==t&&("string"===(d=e.type(f))?(h="'{1}'",f=f.replace(/'/g,"''"),!0===g&&(u="tolower("+u+")")):h="date"===d?s?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?"substringof"!==r?h="{0}({2},"+h+")":(h="{0}("+h+",{2})","doesnotcontain"===p&&(s?(h="{0}({2},'{1}') eq -1",r="indexof"):h+=" eq false")):h="{2} {0} "+h,r=i.format(h,r,f,u))),m.push(r);return r=m.join(" "+v+" "),m.length>1&&(r="("+r+")"),r}var i=window.kendo,r=e.extend,o={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},a=r({},o,{contains:"contains"}),s={pageSize:e.noop,page:e.noop,filter:function(e,t,i){t&&(t=n(t,i))&&(e.$filter=t)},sort:function(t,n){var i=e.map(n,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");i&&(t.$orderby=i)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},l={read:{dataType:"jsonp"}};r(!0,i.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t,n){var r,o,a,c;if(e=e||{},t=t||"read",c=(c=(this.options||l)[t])?c.dataType:"json","read"===t)for(a in r={$inlinecount:"allpages"},"json"!=c&&(r.$format="json"),e)s[a]?s[a](r,e[a],n):r[a]=e[a];else{if("json"!==c)throw Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(a in e)"number"==typeof(o=e[a])&&(e[a]=o+"");r=i.stringify(e)}}return r}}}}),r(!0,i.data,{schemas:{"odata-v4":{type:"json",data:function(t){return function(e){for(var t in e)0===t.indexOf("@odata")&&delete e[t]}(t=e.extend({},t)),t.value?t.value:[t]},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n=i.data.transports.odata.parameterMap(e,t,!0);return"read"==t&&(n.$count=!0,delete n.$inlinecount),n}}}})}(window.kendo.jQuery),e=window.kendo.jQuery,t=window.kendo,n=e.isArray,i=e.isPlainObject,r=e.map,o=e.each,a=e.extend,s=t.getter,l=t.Class.extend({init:function(s){var l,c,u,d,h=this,p=s.total,f=s.model,g=s.parse,m=s.errors,v=s.serialize,_=s.data;f&&(i(f)&&(l=s.modelBase||t.data.Model,f.fields&&o(f.fields,function(t,n){i(n)&&n.field?e.isFunction(n.field)||(n=a(n,{field:h.getter(n.field)})):n={field:h.getter(n)},f.fields[t]=n}),(c=f.id)&&((u={})[h.xpathToMember(c,!0)]={field:h.getter(c)},f.fields=a(u,f.fields),f.id=h.xpathToMember(c)),f=l.define(f)),h.model=f),p&&("string"==typeof p?(p=h.getter(p),h.total=function(e){return parseInt(p(e),10)}):"function"==typeof p&&(h.total=p)),m&&("string"==typeof m?(m=h.getter(m),h.errors=function(e){return m(e)||null}):"function"==typeof m&&(h.errors=m)),_&&("string"==typeof _?(_=h.xpathToMember(_),h.data=function(e){var t,i=h.evaluate(e,_);return i=n(i)?i:[i],h.model&&f.fields?(t=new h.model,r(i,function(e){if(e){var n,i={};for(n in f.fields)i[n]=t._parse(n,f.fields[n].field(e));return i}})):i}):"function"==typeof _&&(h.data=_)),"function"==typeof g&&(d=h.parse,h.parse=function(e){var t=g.call(h,e);return d.call(h,t)}),"function"==typeof v&&(h.serialize=v)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var t,i,r,o,a,s,l,c={},u=e.attributes,d=u.length;for(l=0;d>l;l++)c["@"+(s=u[l]).nodeName]=s.nodeValue;for(i=e.firstChild;i;i=i.nextSibling)3===(r=i.nodeType)||4===r?c["#text"]=i.nodeValue:1===r&&(t=this.parseDOM(i),a=c[o=i.nodeName],n(a)?a.push(t):a=void 0!==a?[a,t]:t,c[o]=a);return c},evaluate:function(e,t){for(var i,r,o,a,s,l=t.split(".");i=l.shift();)if(e=e[i],n(e)){for(r=[],t=l.join("."),s=0,o=e.length;o>s;s++)a=this.evaluate(e[s],t),a=n(a)?a:[a],r.push.apply(r,a);return r}return e},parse:function(t){var n,i,r={};return n=t.documentElement||e.parseXML(t).documentElement,i=this.parseDOM(n),r[n.nodeName]=i,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,".")).indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e:""},getter:function(e){return s(this.xpathToMember(e),!0)}}),e.extend(!0,t.data,{XmlDataReader:l,readers:{xml:l}}),function(e,t){function n(e,t,n,i){return function(r){var o,a={};for(o in r)a[o]=r[o];a.field=i?n+"."+r.field:n,t==ce&&e._notifyChange&&e._notifyChange(a),e.trigger(t,a)}}function i(t,n){if(t===n)return!0;var r,o=e.type(t);if(o!==e.type(n))return!1;if("date"===o)return t.getTime()===n.getTime();if("object"!==o&&"array"!==o)return!1;for(r in t)if(!i(t[r],n[r]))return!1;return!0}function r(e){this.data=e||[]}function o(e,n){if(e){var i=typeof e===ae?{field:e,dir:n}:e,r=K(i)?i:i!==t?[i]:[];return Z(r,function(e){return!!e.dir})}}function a(e){return e&&!X(e)?((K(e)||!e.filters)&&(e={logic:"and",filters:K(e)?e:[e]}),function e(t){var n,i,r,o,a=t.filters;if(a)for(n=0,i=a.length;i>n;n++)(o=(r=a[n]).operator)&&typeof o===ae&&(r.operator=F[o.toLowerCase()]||o),e(r)}(e),e):t}function s(e,n){var i=typeof e===ae?{field:e,dir:n}:e,r=K(i)?i:i!==t?[i]:[];return I(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function l(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function c(e,t,n,i,r,o){var a,s,l,c,u;for(c=(t=t||[]).length,a=0;c>a;a++)l=(s=t[a]).aggregate,e[u=s.field]=e[u]||{},o[u]=o[u]||{},o[u][l]=o[u][l]||{},e[u][l]=B[l.toLowerCase()](e[u][l],n,ne.accessor(u),i,r,o[u][l])}function u(e){return"number"==typeof e&&!isNaN(e)}function d(e){return e&&e.getTime}function h(e){var t,n=e.length,i=Array(n);for(t=0;n>t;t++)i[t]=e[t].toJSON();return i}function p(e,t,n,i,r){var o,a,s,l,c;for(l=0,c=e.length;c>l;l++)for(a in o=e[l],t)(s=r[a])&&s!==a&&(o[s]=t[a](o),delete o[a])}function f(e,t,n,i,r){var o,a,s,l,c;for(l=0,c=e.length;c>l;l++)for(a in o=e[l],t)o[a]=n._parse(a,t[a](o)),(s=r[a])&&s!==a&&delete o[s]}function g(e,t,n,i,r){var o,a,s,l;for(a=0,l=e.length;l>a;a++)(s=i[(o=e[a]).field])&&s!=o.field&&(o.field=s),o.value=n._parse(o.field,o.value),o.hasSubgroups?g(o.items,t,n,i,r):f(o.items,t,n,0,r)}function m(e,t,n,i,r,o){return function(a){return(a=e(a))&&!X(i)&&("[object Array]"===Se.call(a)||a instanceof Ie||(a=[a]),n(a,i,new t,r,o)),a||[]}}function v(e){var t,n,i,r,o,a=[];for(t=0,n=e.length;n>t;t++)if((o=e.at(t)).hasSubgroups)a=a.concat(v(o.items));else for(i=o.items,r=0;i.length>r;r++)a.push(i.at(r));return a}function _(e,t,n,i){for(var r=0;e.length>r&&e[r].data!==t&&!y(e[r].data,n,i);r++);}function y(e,t,n){for(var i=0,r=e.length;r>i;i++){if(e[i]&&e[i].hasSubgroups)return y(e[i].items,t,n);if(e[i]===t||e[i]===n)return e[i]=n,!0}}function b(e,n,i,r,o){var a,s,l,c;for(a=0,s=e.length;s>a;a++)if((l=e[a])&&!(l instanceof r))if(l.hasSubgroups===t||o){for(c=0;n.length>c;c++)if(n[c]===l){e[a]=n.at(c),_(i,n,l,e[a]);break}}else b(l.items,n,i,r,o)}function w(e,t){var n,i,r;for(n=0,i=e.length;i>n;n++)if((r=e.at(n)).uid==t.uid)return e.splice(n,1),r}function k(e,t){return t?C(e,function(e){return e.uid&&e.uid==t.uid||e[t.idField]===t.id&&t.id!==t._defaultId}):-1}function x(e,t){return t?C(e,function(e){return e.uid==t.uid}):-1}function C(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(t(e[n]))return n;return-1}function T(e,t){var n,i;return e&&!X(e)?(n=e[t],i=Q(n)?n.from||n.field||t:e[t]||t,ie(i)?t:i):t}function S(e,t){var n,i,r,o,a,s=[];for(n=0,i=e.length;i>n;n++){for(a in r={},o=e[n])r[a]=o[a];r.field=T(t.fields,r.field),r.aggregates&&K(r.aggregates)&&(r.aggregates=S(r.aggregates,t)),s.push(r)}return s}function D(t,n){var i,r,o,a,s,l,c,u,d,h;for(i=(t=e(t)[0]).options,r=n[0],o=n[1],a=[],s=0,l=i.length;l>s;s++)d={},(c=(u=i[s]).parentNode)===t&&(c=null),u.disabled||c&&c.disabled||(c&&(d.optgroup=c.label),d[r.field]=u.text,h=(h=u.attributes.value)&&h.specified?u.value:u.text,d[o.field]=h,a.push(d));return a}function A(t,n){var i,r,o,a,s,l,c,u=e(t)[0].tBodies[0],d=u?u.rows:[],h=n.length,p=[];for(i=0,r=d.length;r>i;i++){for(s={},c=!0,a=d[i].cells,o=0;h>o;o++)"th"!==(l=a[o]).nodeName.toLowerCase()&&(c=!1,s[n[o].field]=l.innerHTML);c||p.push(s)}return p}function M(e){return function(){var t=this._data,n=V.fn[e].apply(this,Ce.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}function E(t,n){function i(e,t){return e.filter(t).add(e.find(t))}var r,o,a,s,l,c,u,d,h=e(t).children(),p=[],f=n[0].field,g=n[1]&&n[1].field,m=n[2]&&n[2].field,v=n[3]&&n[3].field;for(r=0,o=h.length;o>r;r++)a={_loaded:!0},c=(s=h.eq(r))[0].firstChild,t=(d=s.children()).filter("ul"),d=d.filter(":not(ul)"),(l=s.attr("data-id"))&&(a.id=l),c&&(a[f]=3==c.nodeType?c.nodeValue:d.text()),g&&(a[g]=i(d,"a").attr("href")),v&&(a[v]=i(d,"img").attr("src")),m&&(u=i(d,".k-sprite").prop("className"),a[m]=u&&e.trim(u.replace("k-sprite",""))),t.length&&(a.items=E(t.eq(0),n)),"true"==s.attr("data-hasChildren")&&(a.hasChildren=!0),p.push(a);return p}var I,R,P,L,F,B,z,H,N,O,V,U,W,j,q,G,$=e.extend,Y=e.proxy,Q=e.isPlainObject,X=e.isEmptyObject,K=e.isArray,Z=e.grep,J=e.ajax,ee=e.each,te=e.noop,ne=window.kendo,ie=ne.isFunction,re=ne.Observable,oe=ne.Class,ae="string",se="function",le="destroy",ce="change",ue="error",de="requestStart",he="progress",pe="requestEnd",fe=["create","read","update",le],ge=function(e){return e},me=ne.getter,ve=ne.stringify,_e=Math,ye=[].push,be=[].join,we=[].pop,ke=[].splice,xe=[].shift,Ce=[].slice,Te=[].unshift,Se={}.toString,De=ne.support.stableSort,Ae=/^\/Date\((.*?)\)\/$/,Me=/(\r+|\n+)/g,Ee=/(?=['\\])/g,Ie=re.extend({init:function(e,t){var n=this;n.type=t||Pe,re.fn.init.call(n),n.length=e.length,n.wrapAll(e,n)},at:function(e){return this[e]},toJSON:function(){var e,t,n=this.length,i=Array(n);for(e=0;n>e;e++)(t=this[e])instanceof Pe&&(t=t.toJSON()),i[e]=t;return i},parent:te,wrapAll:function(e,t){var n,i,r=this,o=function(){return r};for(t=t||[],n=0,i=e.length;i>n;n++)t[n]=r.wrap(e[n],o);return t},wrap:function(e,t){var n=this;return null!==e&&"[object Object]"===Se.call(e)&&(e instanceof n.type||e instanceof Be||(e=e instanceof Pe?e.toJSON():e,e=new n.type(e)),e.parent=t,e.bind(ce,function(e){n.trigger(ce,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=ye.apply(this,n),this.trigger(ce,{action:"add",index:t,items:n}),e},slice:Ce,sort:[].sort,join:be,pop:function(){var e=this.length,t=we.apply(this);return e&&this.trigger(ce,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var i,r,o,a=this.wrapAll(Ce.call(arguments,2));if((i=ke.apply(this,[e,t].concat(a))).length)for(this.trigger(ce,{action:"remove",index:e,items:i}),r=0,o=i.length;o>r;r++)i[r]&&i[r].children&&i[r].unbind(ce);return n&&this.trigger(ce,{action:"add",index:e,items:a}),i},shift:function(){var e=this.length,t=xe.apply(this);return e&&this.trigger(ce,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=Te.apply(this,t),this.trigger(ce,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,n;for(t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},forEach:function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)},map:function(e){for(var t=0,n=[],i=this.length;i>t;t++)n[t]=e(this[t],t,this);return n},reduce:function(e){var t,n=0,i=this.length;for(2==arguments.length?t=arguments[1]:i>n&&(t=this[n++]);i>n;n++)t=e(t,this[n],n,this);return t},reduceRight:function(e){var t,n=this.length-1;for(2==arguments.length?t=arguments[1]:n>0&&(t=this[n--]);n>=0;n--)t=e(t,this[n],n,this);return t},filter:function(e){for(var t,n=0,i=[],r=this.length;r>n;n++)e(t=this[n],n,this)&&(i[i.length]=t);return i},find:function(e){for(var t,n=0,i=this.length;i>n;n++)if(e(t=this[n],n,this))return t},every:function(e){for(var t=0,n=this.length;n>t;t++)if(!e(this[t],t,this))return!1;return!0},some:function(e){for(var t=0,n=this.length;n>t;t++)if(e(this[t],t,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),Re=Ie.extend({init:function(e,t){re.fn.init.call(this),this.type=t||Pe;for(var n=0;e.length>n;n++)this[n]=e[n];this.length=n,this._parent=Y(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}}),Pe=re.extend({init:function(e){var t,n,i=this,r=function(){return i};for(n in re.fn.init.call(this),e)"object"==typeof(t=e[n])&&t&&!t.getTime&&"_"!=n.charAt(0)&&(t=i.wrap(t,n,r)),i[n]=t;i.uid=ne.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&typeof this[e]!==se&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,n={};for(t in this)this.shouldSerialize(t)&&(((e=this[t])instanceof Pe||e instanceof Ie)&&(e=e.toJSON()),n[t]=e);return n},get:function(e){var t=this;return t.trigger("get",{field:e}),"this"===e?t:ne.getter(e,!0)(t)},_set:function(e,t){var n,i,r,o=e.indexOf(".")>=0;if(o)for(n=e.split("."),i="";n.length>1;){if(i+=n.shift(),(r=ne.getter(i,!0)(this))instanceof Pe)return r.set(n.join("."),t),o;i+="."}return ne.setter(e)(this,t),o},set:function(e,t){var n=this,i=e.indexOf(".")>=0;ne.getter(e,!0)(n)!==t&&(n.trigger("set",{field:e,value:t})||(i||(t=n.wrap(t,e,function(){return n})),(!n._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&n.trigger(ce,{field:e})))},parent:te,wrap:function(e,t,i){var r,o,a=this,s=Se.call(e);return null==e||"[object Object]"!==s&&"[object Array]"!==s||(r=e instanceof Ie,o=e instanceof V,"[object Object]"!==s||o||r?("[object Array]"===s||r||o)&&(r||o||(e=new Ie(e)),e.parent()!=i()&&e.bind(ce,n(a,ce,t,!1))):(e instanceof Pe||(e=new Pe(e)),e.parent()!=i()&&(e.bind("get",n(a,"get",t,!0)),e.bind(ce,n(a,ce,t,!0)))),e.parent=i),e}}),Le={number:function(e){return ne.parseFloat(e)},date:function(e){return ne.parseDate(e)},boolean:function(e){return typeof e===ae?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},default:function(e){return e}},Fe={string:"",number:0,date:new Date,boolean:!1,default:""},Be=Pe.extend({init:function(n){var i,r,o=this;if((!n||e.isEmptyObject(n))&&(n=e.extend({},o.defaults,n),o._initializers))for(i=0;o._initializers.length>i;i++)n[r=o._initializers[i]]=o.defaults[r]();Pe.fn.init.call(o,n),o.dirty=!1,o.idField&&(o.id=o.get(o.idField),o.id===t&&(o.id=o._defaultId))},shouldSerialize:function(e){return Pe.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n,i=e,r=this.fields||{};return(e=r[e])||(e=function(e,t){var n,i;for(i in e){if(n=e[i],Q(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}(r,i)),e&&!(n=e.parse)&&e.type&&(n=Le[e.type.toLowerCase()]),n?n(t):t},_notifyChange:function(e){var t=e.action;("add"==t||"remove"==t)&&(this.dirty=!0)},editable:function(e){return!(e=(this.fields||{})[e])||!1!==e.editable},set:function(e,t,n){var r=this;r.editable(e)&&(i(t=r._parse(e,t),r.get(e))||(r.dirty=!0,Pe.fn.set.call(r,e,t,n)))},accept:function(e){var t,n,i=this,r=function(){return i};for(t in e)n=e[t],"_"!=t.charAt(0)&&(n=i.wrap(e[t],t,r)),i._set(t,n);i.idField&&(i.id=i.get(i.idField)),i.dirty=!1},isNew:function(){return this.id===this._defaultId}});Be.define=function(e,n){n===t&&(n=e,e=Be);var i,r,o,a,s,l,c,u,d=$({defaults:{}},n),h={},p=d.id,f=[];if(p&&(d.idField=p),d.id&&delete d.id,p&&(d.defaults[p]=d._defaultId=""),"[object Array]"===Se.call(d.fields)){for(l=0,c=d.fields.length;c>l;l++)typeof(o=d.fields[l])===ae?h[o]={}:o.field&&(h[o.field]=o);d.fields=h}for(r in d.fields)a=(o=d.fields[r]).type||"default",s=null,u=r,r=typeof o.field===ae?o.field:r,o.nullable||"function"==typeof(s=d.defaults[u!==r?u:r]=o.defaultValue!==t?o.defaultValue:Fe[a.toLowerCase()])&&f.push(r),n.id===r&&(d._defaultId=s),d.defaults[u!==r?u:r]=s,o.parse=o.parse||Le[a];return f.length>0&&(d._initializers=f),(i=e.extend(d)).define=function(e){return Be.define(i,e)},d.fields&&(i.fields=d.fields,i.idField=d.idField),i},P=$({},R={selector:function(e){return ie(e)?e:me(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),null==e&&null==n?0:null==e?-1:null==n?1:e.localeCompare?e.localeCompare(n):e>n?1:n>e?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var i,r,o=e[0](t,n);for(i=1,r=e.length;r>i;i++)o=o||e[i](t,n);return o}}},{asc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?-1:null==r?1:i.localeCompare?i.localeCompare(r):i>r?1:-1}},desc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?1:null==r?-1:r.localeCompare?r.localeCompare(i):r>i?1:-1}},create:function(e){return this[e.dir](e.field)}}),I=function(e,t){var n,i=e.length,r=Array(i);for(n=0;i>n;n++)r[n]=t(e[n],n,e);return r},L=function(){function e(e){return e.replace(Ee,"\\").replace(Me,"")}function t(t,n,i,r){var o;return null!=i&&(typeof i===ae&&(i=e(i),(o=Ae.exec(i))?i=new Date(+o[1]):r?(i="'"+i.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):i="'"+i+"'"),i.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",i=i.getTime())),n+" "+t+" "+i}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":"string"==typeof t?"'"+e(t)+"'":""+t},eq:function(e,n,i){return t("==",e,n,i)},neq:function(e,n,i){return t("!=",e,n,i)},gt:function(e,n,i){return t(">",e,n,i)},gte:function(e,n,i){return t(">=",e,n,i)},lt:function(e,n,i){return t("<",e,n,i)},lte:function(e,n,i){return t("<=",e,n,i)},startswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}(),r.filterExpr=function(e){var n,i,o,a,s,l,c=[],u=[],d=[],h=e.filters;for(n=0,i=h.length;i>n;n++)s=(o=h[n]).field,l=o.operator,o.filters?(o=(a=r.filterExpr(o)).expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(d.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(u.length+t)+"]"}),d.push.apply(d,a.operators),u.push.apply(u,a.fields)):(typeof s===se?(a="__f["+u.length+"](d)",u.push(s)):a=ne.expr(s),typeof l===se?(o="__o["+d.length+"]("+a+", "+L.quote(o.value)+")",d.push(l)):o=L[(l||"eq").toLowerCase()](a,o.value,o.ignoreCase===t||o.ignoreCase)),c.push(o);return{expression:"("+c.join({and:" && ",or:" || "}[e.logic])+")",fields:u,operators:d}},F={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"},r.normalizeFilter=a,r.prototype={toArray:function(){return this.data},range:function(e,t){return new r(this.data.slice(e,e+t))},skip:function(e){return new r(this.data.slice(e))},take:function(e){return new r(this.data.slice(0,e))},select:function(e){return new r(I(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new r(this.data.slice(0).sort(R.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var i,r,a=o(e,t),s=[];if(n=n||R,a.length){for(i=0,r=a.length;r>i;i++)s.push(n.create(a[i]));return this.orderBy({compare:n.combine(s)})}return this},filter:function(e){var t,n,i,o,s,l,c,u,d=this.data,h=[];if(!(e=a(e))||0===e.filters.length)return this;for(o=r.filterExpr(e),l=o.fields,c=o.operators,s=u=Function("d, __f, __o","return "+o.expression),(l.length||c.length)&&(u=function(e){return s(e,l,c)}),t=0,i=d.length;i>t;t++)u(n=d[t])&&h.push(n);return new r(h)},group:function(e,t){e=s(e||[]),t=t||this.data;var n,i=new r(this.data);return e.length>0&&(n=e[0],i=i.groupBy(n).select(function(i){var o=new r(t).filter([{field:i.field,operator:"eq",value:i.value,ignoreCase:!1}]);return{field:i.field,value:i.value,items:e.length>1?new r(i.items).group(e.slice(1),o.toArray()).toArray():i.items,hasSubgroups:e.length>1,aggregates:o.aggregate(n.aggregates)}})),i},groupBy:function(e){if(X(e)||!this.data.length)return new r([]);var t,n,i,o,a=e.field,s=this._sortForGrouping(a,e.dir||"asc"),c=ne.accessor(a),u=c.get(s[0],a),d={field:a,value:u,items:[]},h=[d];for(i=0,o=s.length;o>i;i++)t=s[i],l(u,n=c.get(t,a))||(d={field:a,value:u=n,items:[]},h.push(d)),d.items.push(t);return new r(h)},_sortForGrouping:function(e,t){var n,i,o=this.data;if(!De){for(n=0,i=o.length;i>n;n++)o[n].__position=n;for(n=0,i=(o=new r(o).sort(e,t,P).toArray()).length;i>n;n++)delete o[n].__position;return o}return this.sort(e,t).toArray()},aggregate:function(e){var t,n,i={},r={};if(e&&e.length)for(t=0,n=this.data.length;n>t;t++)c(i,e,this.data[t],t,n,r);return i}},B={sum:function(e,t,n){var i=n.get(t);return u(e)?u(i)&&(e+=i):e=i,e},count:function(e){return(e||0)+1},average:function(e,n,i,r,o,a){var s=i.get(n);return a.count===t&&(a.count=0),u(e)?u(s)&&(e+=s):e=s,u(s)&&a.count++,r==o-1&&u(e)&&(e/=a.count),e},max:function(e,t,n){var i=n.get(t);return u(e)||d(e)||(e=i),i>e&&(u(i)||d(i))&&(e=i),e},min:function(e,t,n){var i=n.get(t);return u(e)||d(e)||(e=i),e>i&&(u(i)||d(i))&&(e=i),e}},r.process=function(e,n){n=n||{};var i,a=new r(e),l=n.group,c=s(l||[]).concat(o(n.sort||[])),u=n.filterCallback,d=n.filter,h=n.skip,p=n.take;return d&&(a=a.filter(d),u&&(a=u(a)),i=a.toArray().length),c&&(a=a.sort(c),l&&(e=a.toArray())),h!==t&&p!==t&&(a=a.range(h,p)),l&&(a=a.group(l,e)),{total:i,data:a.toArray()}},z=oe.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),H=oe.extend({init:function(e){var t,n=this;e=n.options=$({},n.options,e),ee(fe,function(t,n){typeof e[n]===ae&&(e[n]={url:e[n]})}),n.cache=e.cache?N.create(e.cache):{find:te,add:te},t=e.parameterMap,ie(e.push)&&(n.push=e.push),n.push||(n.push=ge),n.parameterMap=ie(t)?t:function(e){var n={};return ee(e,function(e,i){e in t&&(e=t[e],Q(e)&&(i=e.value(i),e=e.key)),n[e]=i}),n}},options:{parameterMap:ge},create:function(e){return J(this.setup(e,"create"))},read:function(n){var i,r,o=this.cache;n=this.setup(n,"read"),i=n.success||te,n.error,(r=o.find(n.data))!==t?i(r):(n.success=function(e){o.add(n.data,e),i(e)},e.ajax(n))},update:function(e){return J(this.setup(e,"update"))},destroy:function(e){return J(this.setup(e,le))},setup:function(e,t){e=e||{};var n,i=this.options[t],r=ie(i.data)?i.data(e.data):i.data;return e=$(!0,{},i,e),n=$(!0,{},r,e.data),e.data=this.parameterMap(n,t),ie(e.url)&&(e.url=e.url(n)),e}}),(N=oe.extend({init:function(){this._store={}},add:function(e,n){e!==t&&(this._store[ve(e)]=n)},find:function(e){return this._store[ve(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[ve(e)]}})).create=function(e){var t={inmemory:function(){return new N}};return Q(e)&&ie(e.find)?e:!0===e?new N:t[e]()},O=oe.extend({init:function(e){var t,n,i,r,o,a,s,l,c,u,d,h,v,_=this;for(t in e=e||{})n=e[t],_[t]=typeof n===ae?me(n):n;r=e.modelBase||Be,Q(_.model)&&(_.model=i=r.define(_.model)),o=Y(_.data,_),_._dataAccessFunction=o,_.model&&(a=Y(_.groups,_),s=Y(_.serialize,_),l={},c={},u={},d={},h=!1,(i=_.model).fields&&(ee(i.fields,function(e,t){var n;v=e,Q(t)&&t.field?v=t.field:typeof t===ae&&(v=t),Q(t)&&t.from&&(n=t.from),h=h||n&&n!==e||v!==e,c[e]=me(n||v),u[e]=me(e),l[n||v]=e,d[e]=n||v}),!e.serialize&&h&&(_.serialize=m(s,i,p,u,l,d))),_._dataAccessFunction=o,_.data=m(o,i,f,c,l,d),_.groups=m(a,i,g,c,l,d))},errors:function(e){return e?e.errors:null},parse:ge,data:ge,total:function(e){return e.length},groups:ge,aggregates:function(){return{}},serialize:function(e){return e}}),V=re.extend({init:function(e){var n,i,r=this;e&&(n=e.data),e=r.options=$({},r.options,e),r._map={},r._prefetch={},r._data=[],r._pristineData=[],r._ranges=[],r._view=[],r._pristineTotal=0,r._destroyed=[],r._pageSize=e.pageSize,r._page=e.page||(e.pageSize?1:t),r._sort=o(e.sort),r._filter=a(e.filter),r._group=s(e.group),r._aggregate=e.aggregate,r._total=e.total,r._shouldDetachObservableParents=!0,re.fn.init.call(r),r.transport=U.create(e,n,r),ie(r.transport.push)&&r.transport.push({pushCreate:Y(r._pushCreate,r),pushUpdate:Y(r._pushUpdate,r),pushDestroy:Y(r._pushDestroy,r)}),null!=e.offlineStorage&&("string"==typeof e.offlineStorage?(i=e.offlineStorage,r._storage={getItem:function(){return JSON.parse(localStorage.getItem(i))},setItem:function(e){localStorage.setItem(i,ve(r.reader.serialize(e)))}}):r._storage=e.offlineStorage),r.reader=new ne.data.readers[e.schema.type||"json"](e.schema),r.reader.model,r._detachObservableParents(),r._data=r._observe(r._data),r._online=!0,r.bind(["push",ue,ce,de,"sync",pe,he],e)},options:{data:null,schema:{modelBase:Be},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},clone:function(){return this},online:function(n){return n!==t?this._online!=n&&(this._online=n,n)?this.sync():e.Deferred().resolve().promise():this._online},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||[]},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var n=this._readData(e);n||(n=e),this[t](n)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return v(e);if(!t)for(var n=0;e.length>n;n++)e.at(n)}return e},parent:te,get:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;n>t;t++)if(i[t].id==e)return i[t]},getByUid:function(e){var t,n,i=this._flatData(this._data);if(i)for(t=0,n=i.length;n>t;t++)if(i[t].uid==e)return i[t]},indexOf:function(e){return x(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var n,i=this;if(e===t){if(i._data)for(n=0;i._data.length>n;n++)i._data.at(n);return i._data}i._detachObservableParents(),i._data=this._observe(e),i._pristineData=e.slice(0),i._storeData(),i._ranges=[],i.trigger("reset"),i._addRange(i._data),i._total=i._data.length,i._pristineTotal=i._total,i._process(i._data)},view:function(e){return e===t?this._view:(this._view=this._observeView(e),t)},_observeView:function(e){var t,n=this;return b(e,n._data,n._ranges,n.reader.model||Pe,n._isServerGrouped()),(t=new Re(e,n.reader.model)).parent=function(){return n.parent()},t},flatView:function(){return(this.group()||[]).length?v(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof Pe?e:new Pe(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof Be||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,this._wrapInEmptyGroup(t)):this._data.splice(e,0,t),t},pushCreate:function(e){var t,n,i,r,o,a;K(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this.add(r),t.push(o),a=o.toJSON(),this._isServerGrouped()&&(a=this._wrapInEmptyGroup(a)),this._pristineData.push(a)}finally{this.options.autoSync=n}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){var t,n,i,r,o;for(K(e)||(e=[e]),t=[],n=0;e.length>n;n++)i=e[n],r=this._createNewModel(i),(o=this.get(r.id))?(t.push(o),o.accept(i),o.trigger(ce),this._updatePristineForModel(o,i)):this.pushCreate(i);t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){var t,n,i,r,o,a;K(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this._createNewModel(r),a=!1,this._eachItem(this._data,function(e){var n,i;for(n=0;e.length>n;n++)if((i=e.at(n)).id===o.id){t.push(i),e.splice(n,1),a=!0;break}}),a&&(this._removePristineForModel(o),this._destroyed.pop())}finally{this.options.autoSync=n}return t},remove:function(e){var n,i=this,r=i._isServerGrouped();return this._eachItem(i._data,function(o){return(n=w(o,e))&&r?(n.isNew&&n.isNew()||i._destroyed.push(n),!0):t}),this._removeModelFromRanges(e),this._updateRangesLength(),e},destroyed:function(){return this._destroyed},created:function(){var e,t,n=[],i=this._flatData(this._data);for(e=0,t=i.length;t>e;e++)i[e].isNew&&i[e].isNew()&&n.push(i[e]);return n},updated:function(){var e,t,n=[],i=this._flatData(this._data);for(e=0,t=i.length;t>e;e++)i[e].isNew&&!i[e].isNew()&&i[e].dirty&&n.push(i[e]);return n},sync:function(){var t,n=this,i=[],r=[],o=n._destroyed,a=(n._flatData(n._data),e.Deferred().resolve().promise());if(n.online()){if(!n.reader.model)return a;i=n.created(),r=n.updated(),t=[],n.options.batch&&n.transport.submit?t=n._sendSubmit(i,r,o):(t.push.apply(t,n._send("create",i)),t.push.apply(t,n._send("update",r)),t.push.apply(t,n._send("destroy",o))),a=e.when.apply(null,t).then(function(){var e,t;for(e=0,t=arguments.length;t>e;e++)n._accept(arguments[e]);n._storeData(!0),n._change({action:"sync"}),n.trigger("sync")})}else n._storeData(!0),n._change({action:"sync"});return a},cancelChanges:function(e){var t=this;e instanceof ne.data.Model?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t._pristineTotal),t._ranges=[],t._addRange(t._data),t._change())},hasChanges:function(){var e,t,n=this._flatData(this._data);if(this._destroyed.length)return!0;for(e=0,t=n.length;t>e;e++)if(n[e].isNew&&n[e].isNew()||n[e].dirty)return!0;return!1},_accept:function(t){var n,i=this,r=t.models,o=t.response,a=0,s=i._isServerGrouped(),l=i._pristineData,c=t.type;if(i.trigger(pe,{response:o,type:c}),o&&!X(o)){if(o=i.reader.parse(o),i._handleCustomErrors(o))return;o=i.reader.data(o),K(o)||(o=[o])}else o=e.map(r,function(e){return e.toJSON()});for("destroy"===c&&(i._destroyed=[]),a=0,n=r.length;n>a;a++)"destroy"!==c?(r[a].accept(o[a]),"create"===c?l.push(s?i._wrapInEmptyGroup(r[a]):o[a]):"update"===c&&i._updatePristineForModel(r[a],o[a])):i._removePristineForModel(r[a])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){ne.deepExtend(n[e],t)})},_executeOnPristineForModel:function(e,n){this._eachPristineItem(function(i){var r=k(i,e);return r>-1?(n(r,i),!0):t})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){return(this._isServerGrouped()?this.reader.groups:this.reader.data).call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?function e(t,n){for(var i=0,r=t.length;r>i;i++)if(t[i].hasSubgroups){if(e(t[i].items,n))return!0}else if(n(t[i].items,t[i]))return!0}(e,t):t(e))},_pristineForModel:function(e){var n,i;return this._eachPristineItem(function(r){return(i=k(r,e))>-1?(n=r[i],!0):t}),n},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(n){var i=x(n,e);i>=0&&(!t||e.isNew()&&!t.__state__?n.splice(i,1):n[i].accept(t))})},_submit:function(t,n){var i=this;i.trigger(de,{type:"submit"}),i.transport.submit($({success:function(n,i){var r=e.grep(t,function(e){return e.type==i})[0];r&&r.resolve({response:n,models:r.models,type:i})},error:function(e,n,r){for(var o=0;t.length>o;o++)t[o].reject(e);i.error(e,n,r)}},n))},_sendSubmit:function(t,n,i){var r=this,o=[];return r.options.batch&&(t.length&&o.push(e.Deferred(function(e){e.type="create",e.models=t})),n.length&&o.push(e.Deferred(function(e){e.type="update",e.models=n})),i.length&&o.push(e.Deferred(function(e){e.type="destroy",e.models=i})),r._submit(o,{data:{created:r.reader.serialize(h(t)),updated:r.reader.serialize(h(n)),destroyed:r.reader.serialize(h(i))}})),o},_promise:function(t,n,i){var r=this;return e.Deferred(function(e){r.trigger(de,{type:i}),r.transport[i].call(r.transport,$({success:function(t){e.resolve({response:t,models:n,type:i})},error:function(t,n,i){e.reject(t),r.error(t,n,i)}},t))}).promise()},_send:function(e,t){var n,i,r=this,o=[],a=r.reader.serialize(h(t));if(r.options.batch)t.length&&o.push(r._promise({data:{models:a}},t,e));else for(n=0,i=t.length;i>n;n++)o.push(r._promise({data:a[n]},[t[n]],e));return o},read:function(t){var n=this,i=n._params(t),r=e.Deferred();return n._queueRequest(i,function(){var e=n.trigger(de,{type:"read"});e?(n._dequeueRequest(),r.resolve(e)):(n.trigger(he),n._ranges=[],n.trigger("reset"),n.online()?n.transport.read({data:i,success:function(e){n.success(e,i),r.resolve()},error:function(){var e=Ce.call(arguments);n.error.apply(n,e),r.reject.apply(r,e)}}):null!=n.options.offlineStorage&&(n.success(n.offlineData(),i),r.resolve()))}),r.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var n,i,r,o,a,s,l,c=this,u=c.options;if(c.trigger(pe,{response:e,type:"read"}),c.online()){if(e=c.reader.parse(e),c._handleCustomErrors(e))return c._dequeueRequest(),t;c._total=c.reader.total(e),c._aggregate&&u.serverAggregates&&(c._aggregateResult=c._readAggregates(e)),e=c._readData(e)}else{for(e=c._readData(e),n=[],i={},o=(r=c.reader.model)?r.idField:"id",a=0;this._destroyed.length>a;a++)i[s=this._destroyed[a][o]]=s;for(a=0;e.length>a;a++)"destroy"==(l=e[a]).__state__?i[l[o]]||this._destroyed.push(this._createNewModel(l)):n.push(l);e=n,c._total=e.length}c._pristineTotal=c._total,c._pristineData=e.slice(0),c._detachObservableParents(),c._data=c._observe(e),null!=c.options.offlineStorage&&c._eachItem(c._data,function(e){var t,n;for(t=0;e.length>t;t++)"update"==(n=e.at(t)).__state__&&(n.dirty=!0)}),c._storeData(),c._addRange(c._data),c._process(c._data),c._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;this._data.length>e;e++)this._data[e].parent&&(this._data[e].parent=te)},_storeData:function(e){var t,n,i,r=this._isServerGrouped(),o=this.reader.model;if(null!=this.options.offlineStorage){for(t=function e(t){var n,i,a,s=[];for(n=0;t.length>n;n++)a=(i=t.at(n)).toJSON(),r&&i.items?a.items=e(i.items):(a.uid=i.uid,o&&(i.isNew()?a.__state__="create":i.dirty&&(a.__state__="update"))),s.push(a);return s}(this._data),n=0;this._destroyed.length>n;n++)(i=this._destroyed[n].toJSON()).__state__="destroy",t.push(i);this.offlineData(t),e&&(this._pristineData=t)}},_addRange:function(e){var t=this,n=t._skip||0,i=n+t._flatData(e,!0).length;t._ranges.push({start:n,end:i,data:e,timestamp:(new Date).getTime()}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(pe,{}),this.trigger(ue,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,n=$({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete n.take,delete n.skip,delete n.page,delete n.pageSize),t.options.serverGrouping?t.reader.model&&n.group&&(n.group=S(n.group,t.reader.model)):delete n.group,t.options.serverFiltering?t.reader.model&&n.filter&&(n.filter=function e(t,n){var i,r,o,a={};for(o in t)"filters"!==o&&(a[o]=t[o]);if(t.filters)for(a.filters=[],i=0,r=t.filters.length;r>i;i++)a.filters[i]=e(t.filters[i],n);else a.field=T(n.fields,a.field);return a}(n.filter,t.reader.model)):delete n.filter,t.options.serverSorting?t.reader.model&&n.sort&&(n.sort=S(n.sort,t.reader.model)):delete n.sort,t.options.serverAggregates?t.reader.model&&n.aggregate&&(n.aggregate=S(n.aggregate,t.reader.model)):delete n.aggregate,n},_queueRequest:function(e,n){var i=this;i._requestInProgress?i._pending={callback:Y(n,i),options:e}:(i._requestInProgress=!0,i._pending=t,n())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(ue,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_shouldWrap:function(e){var t=this.reader.model;return!(!t||!e.length||e[0]instanceof t)},_observe:function(e){var t=this,n=t.reader.model;return t._shouldDetachObservableParents=!0,e instanceof Ie?(t._shouldDetachObservableParents=!1,t._shouldWrap(e)&&(e.type=t.reader.model,e.wrapAll(e,e))):(e=new(t.pageSize()&&!t.options.serverPaging?Re:Ie)(e,t.reader.model)).parent=function(){return t.parent()},t._isServerGrouped()&&function e(t,n){var i,r,o;if(n)for(i=0,r=t.length;r>i;i++)(o=t.at(i)).hasSubgroups?e(o.items,n):o.items=new Re(o.items,n)}(e,n),t._changeHandler&&t._data&&t._data instanceof Ie?t._data.unbind(ce,t._changeHandler):t._changeHandler=Y(t._change,t),e.bind(ce,t._changeHandler)},_change:function(e){var t,n,i,r=this,o=e?e.action:"";if("remove"===o)for(t=0,n=e.items.length;n>t;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);!r.options.autoSync||"add"!==o&&"remove"!==o&&"itemchange"!==o?(i=parseInt(r._total,10),u(r._total)||(i=parseInt(r._pristineTotal,10)),"add"===o?i+=e.items.length:"remove"===o?i-=e.items.length:"itemchange"===o||"sync"===o||r.options.serverPaging?"sync"===o&&(i=r._pristineTotal=parseInt(r._total,10)):i=r._pristineTotal,r._total=i,r._process(r._data,e)):r.sync()},_calculateAggregates:function(e,t){t=t||{};var n=new r(e),i=t.aggregate,o=t.filter;return o&&(n=n.filter(o)),n.aggregate(i)},_process:function(e,n){var i,r=this,o={};!0!==r.options.serverPaging&&(o.skip=r._skip,o.take=r._take||r._pageSize,o.skip===t&&r._page!==t&&r._pageSize!==t&&(o.skip=(r._page-1)*r._pageSize)),!0!==r.options.serverSorting&&(o.sort=r._sort),!0!==r.options.serverFiltering&&(o.filter=r._filter),!0!==r.options.serverGrouping&&(o.group=r._group),!0!==r.options.serverAggregates&&(o.aggregate=r._aggregate,r._aggregateResult=r._calculateAggregates(e,o)),i=r._queryProcess(e,o),r.view(i.data),i.total===t||r.options.serverFiltering||(r._total=i.total),(n=n||{}).items=n.items||r._view,r.trigger(ce,n)},_queryProcess:function(e,t){return r.process(e,t)},_mergeState:function(e){var n=this;return e!==t&&(n._pageSize=e.pageSize,n._page=e.page,n._sort=e.sort,n._filter=e.filter,n._group=e.group,n._aggregate=e.aggregate,n._skip=e.skip,n._take=e.take,n._skip===t&&(n._skip=n.skip(),e.skip=n.skip()),n._take===t&&n._pageSize!==t&&(n._take=n._pageSize,e.take=n._take),e.sort&&(n._sort=e.sort=o(e.sort)),e.filter&&(n._filter=e.filter=a(e.filter)),e.group&&(n._group=e.group=s(e.group)),e.aggregate&&(n._aggregate=e.aggregate=function(e){return K(e)?e:[e]}(e.aggregate))),e},query:function(n){var i,r;return this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates||(this._data===t||0===this._data.length)&&!this._destroyed.length?this.read(this._mergeState(n)):((r=this.trigger(de,{type:"read"}))||(this.trigger(he),i=this._queryProcess(this._data,this._mergeState(n)),this.options.serverFiltering||(this._total=i.total!==t?i.total:this._data.length),this._aggregateResult=this._calculateAggregates(this._data,n),this.view(i.data),this.trigger(pe,{type:"read"}),this.trigger(ce,{items:i.data})),e.Deferred().resolve(r).promise())},fetch:function(e){var t=this;return this._query().then(function(n){!0!==n&&ie(e)&&e.call(t)})},_query:function(e){var t=this;return t.query($({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var n=this,i=n.page(),r=n.total();return e=e||{},!i||r&&i+1>n.totalPages()?t:(n._skip=i*n.take(),i+=1,e.page=i,n._query(e),i)},prev:function(e){var n=this,i=n.page();return e=e||{},i&&1!==i?(n._skip=n._skip-n.take(),i-=1,e.page=i,n._query(e),i):t},page:function(e){var n,i=this;return e!==t?(e=_e.max(_e.min(_e.max(e,1),i.totalPages()),1),i._query({page:e}),t):(n=i.skip())!==t?_e.round((n||0)/(i.take()||1))+1:t},pageSize:function(e){return e!==t?(this._query({pageSize:e,page:1}),t):this.take()},sort:function(e){return e!==t?(this._query({sort:e}),t):this._sort},filter:function(e){var n=this;return e===t?n._filter:(n.trigger("reset"),n._query({filter:e,page:1}),t)},group:function(e){return e!==t?(this._query({group:e}),t):this._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){return e!==t?(this._query({aggregate:e}),t):this._aggregate},aggregates:function(){var e=this._aggregateResult;return X(e)&&(e=this._emptyAggregates(this.aggregate())),e},_emptyAggregates:function(e){var t,n,i={};if(!X(e))for(t={},K(e)||(e=[e]),n=0;e.length>n;n++)t[e[n].aggregate]=0,i[e[n].field]=t;return i},_wrapInEmptyGroup:function(e){var t,n,i,r=this.group();for(i=r.length-1;i>=0;i--)n=r[i],t={value:e.get(n.field),field:n.field,items:t?[t]:[e],hasSubgroups:!!t,aggregates:this._emptyAggregates(n.aggregates)};return t},totalPages:function(){var e=this,t=e.pageSize()||e.total();return _e.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,i=_e.min(e+t,n.total());return!n.options.serverPaging&&n._data.length>0||n._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return(new Date).getTime()},range:function(e,n){var i,r,o,a,s,l,c,u;if(this._currentRequestTimeStamp=this._timeStamp(),this._skipRequestsInProgress=!0,e=_e.min(e||0,this.total()),i=this,r=_e.max(_e.floor(e/n),0)*n,o=_e.min(r+n,i.total()),(a=i._findRange(e,_e.min(e+n,i.total()))).length){i._pending=t,i._skip=e>i.skip()?_e.min(o,(i.totalPages()-1)*i.take()):r,i._take=n,s=i.options.serverPaging,l=i.options.serverSorting,c=i.options.serverFiltering,u=i.options.serverAggregates;try{i.options.serverPaging=!0,i._isServerGrouped()||i.group()&&i.group().length||(i.options.serverSorting=!0),i.options.serverFiltering=!0,i.options.serverPaging=!0,i.options.serverAggregates=!0,s&&(i._detachObservableParents(),i._data=a=i._observe(a)),i._process(a)}finally{i.options.serverPaging=s,i.options.serverSorting=l,i.options.serverFiltering=c,i.options.serverAggregates=u}}else n!==t&&(i._rangeExists(r,o)?e>r&&i.prefetch(o,n,function(){i.range(e,n)}):i.prefetch(r,n,function(){e>r&&o<i.total()&&!i._rangeExists(o,_e.min(o+n,i.total()))?i.prefetch(o,n,function(){i.range(e,n)}):i.range(e,n)}))},_findRange:function(e,n){var i,r,a,l,c,u,d,h,p,f,g,m,v=this,_=v._ranges,y=[],b=v.options,w=b.serverSorting||b.serverPaging||b.serverFiltering||b.serverGrouping||b.serverAggregates;for(r=0,g=_.length;g>r;r++)if(e>=(i=_[r]).start&&i.end>=e){for(f=0,a=r;g>a;a++)if(i=_[a],(p=v._flatData(i.data,!0)).length&&e+f>=i.start&&(u=i.data,d=i.end,w||(m=s(v.group()||[]).concat(o(v.sort()||[])),p=u=(h=v._queryProcess(i.data,{sort:m,filter:v.filter()})).data,h.total!==t&&(d=h.total)),l=0,e+f>i.start&&(l=e+f-i.start),c=p.length,d>n&&(c-=d-n),f+=c-l,y=v._mergeGroups(y,u,l,c),i.end>=n&&f==n-e))return y;break}return[]},_mergeGroups:function(e,t,n,i){if(this._isServerGrouped()){var r,o=t.toJSON();return e.length&&(r=e[e.length-1]),function e(t,n,i,r){for(var o,a,s,l=0;n.length&&r&&(s=(a=(o=n[l]).items).length,t&&t.field===o.field&&t.value===o.value?(t.hasSubgroups&&t.items.length?e(t.items[t.items.length-1],o.items,i,r):(a=a.slice(i,i+r),t.items=t.items.concat(a)),n.splice(l--,1)):o.hasSubgroups&&a.length?(e(o,a,i,r),o.items.length||n.splice(l--,1)):(a=a.slice(i,i+r),o.items=a,o.items.length||n.splice(l--,1)),0===a.length?i-=s:(i=0,r-=a.length),!(++l>=n.length)););n.length>l&&n.splice(l,n.length-l)}(r,o,n,i),e.concat(o)}return e.concat(t.slice(n,i))},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n,i){var r=this,o=r._timeStamp();return function(a){var s,l,c,u=!1,d={start:e,end:t,data:[],timestamp:r._timeStamp()};if(r._dequeueRequest(),r.trigger(pe,{response:a,type:"read"}),a=r.reader.parse(a),(c=r._readData(a)).length){for(s=0,l=r._ranges.length;l>s;s++)if(r._ranges[s].start===e){u=!0,d=r._ranges[s];break}u||r._ranges.push(d)}d.data=r._observe(c),d.end=d.start+r._flatData(d.data,!0).length,r._ranges.sort(function(e,t){return e.start-t.start}),r._total=r.reader.total(a),(i||o>=r._currentRequestTimeStamp||!r._skipRequestsInProgress)&&(n&&c.length?n():r.trigger(ce,{}))}},prefetch:function(e,t,n){var i=this,r=_e.min(e+t,i.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():(clearTimeout(i._timeout),i._timeout=setTimeout(function(){i._queueRequest(o,function(){i.trigger(de,{type:"read"})?i._dequeueRequest():i.transport.read({data:i._params(o),success:i._prefetchSuccessHandler(e,r,n),error:function(){var e=Ce.call(arguments);i.error.apply(i,e)}})})},100))},_multiplePrefetch:function(e,t,n){var i=this,r=_e.min(e+t,i.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():i.trigger(de,{type:"read"})||i.transport.read({data:i._params(o),success:i._prefetchSuccessHandler(e,r,n,!0)})},_rangeExists:function(e,t){var n,i,r=this._ranges;for(n=0,i=r.length;i>n;n++)if(e>=r[n].start&&r[n].end>=t)return!0;return!1},_removeModelFromRanges:function(e){var t,n,i,r;for(i=0,r=this._ranges.length;r>i&&(n=this._ranges[i],this._eachItem(n.data,function(n){w(n,e)&&(t=!0)}),!t);i++);},_updateRangesLength:function(){var e,t,n,i,r=0;for(n=0,i=this._ranges.length;i>n;n++)(e=this._ranges[n]).start=e.start-r,t=this._flatData(e.data,!0).length,r=e.end-t,e.end=e.start+t}}),(U={}).create=function(t,n,i){var r,o=t.transport?e.extend({},t.transport):null;return o?(o.read=typeof o.read===ae?{url:o.read}:o.read,"jsdo"===t.type&&(o.dataSource=i),t.type&&(ne.data.transports=ne.data.transports||{},ne.data.schemas=ne.data.schemas||{},ne.data.transports[t.type]&&!Q(ne.data.transports[t.type])?r=new ne.data.transports[t.type]($(o,{data:n})):o=$(!0,{},ne.data.transports[t.type],o),t.schema=$(!0,{},ne.data.schemas[t.type],t.schema)),r||(r=ie(o.read)?o:new H(o))):r=new z({data:t.data||[]}),r},V.create=function(e){(K(e)||e instanceof Ie)&&(e={data:e});var n,i,r,o=e||{},a=o.data,s=o.fields,l=o.table,c=o.select,u={};if(a||!s||o.transport||(l?a=A(l,s):c&&(a=D(c,s),o.group===t&&a[0]&&a[0].optgroup!==t&&(o.group="optgroup"))),ne.data.Model&&s&&(!o.schema||!o.schema.model)){for(n=0,i=s.length;i>n;n++)(r=s[n]).type&&(u[r.field]=r);X(u)||(o.schema=$(!0,o.schema,{model:{fields:u}}))}return o.data=a,c=null,o.select=null,l=null,o.table=null,o instanceof V?o:new V(o)},W=Be.define({idField:"id",init:function(e){var t=this,n=t.hasChildren||e&&e.hasChildren,i="items",r={};ne.data.Model.fn.init.call(t,e),typeof t.children===ae&&(i=t.children),r={schema:{data:i,model:{hasChildren:n,id:t.idField,fields:t.fields}}},typeof t.children!==ae&&$(r,t.children),r.data=e,n||(n=r.schema.data),typeof n===ae&&(n=ne.getter(n)),ie(n)&&(t.hasChildren=!!n.call(t,t)),t._childrenOptions=r,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[i]&&!e._loaded)},_initChildren:function(){var e,t,n,i=this;i.children instanceof j||(t=(e=i.children=new j(i._childrenOptions)).transport,n=t.parameterMap,t.parameterMap=function(e,t){return e[i.idField||"id"]=i.id,n&&(e=n(e,t)),e},e.parent=function(){return i},e.bind(ce,function(e){e.node=e.node||i,i.trigger(ce,e)}),e.bind(ue,function(e){var t=i.parent();t&&(e.node=e.node||i,t.trigger(ue,e))}),i._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){this[this._childrenOptions.schema.data||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var n,i,r={},o="_query";return this.hasChildren?(this._initChildren(),n=this.children,r[this.idField||"id"]=this.id,this._loaded||(n._data=t,o="read"),n.one(ce,Y(this._childrenLoaded,this)),i=n[o](r)):this.loaded(!0),i||e.Deferred().resolve().promise()},parentNode:function(){return this.parent().parent()},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return Be.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),(j=V.extend({init:function(e){var t=W.define({children:e});V.fn.init.call(this,$(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(ue,function(t){e.trigger(ue,t)})},remove:function(e){var t,n=e.parentNode(),i=this;return n&&n._initChildren&&(i=n.children),t=V.fn.remove.call(i,e),n&&!i.data().length&&(n.hasChildren=!1),t},success:M("success"),data:M("data"),insert:function(e,t){var n=this.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),V.fn.insert.call(this,e,t)},_find:function(e,t){var n,i,r,o,a=this._data;if(a){if(r=V.fn[e].call(this,t))return r;for(n=0,i=(a=this._flatData(this._data)).length;i>n;n++)if((o=a[n].children)instanceof j&&(r=o[e](t)))return r}},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}})).create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},n=t.data,i=t.fields,r=t.list;return n&&n._dataSource?n._dataSource:(n||!i||t.transport||r&&(n=E(r,i)),t.data=n,t instanceof j?t:new j(t))},q=ne.Observable.extend({init:function(e,t,n){ne.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!n;var i=this;e.bind("change",function(){i._change()}),e.bind("reset",function(){i._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var n=this.pageSize,i=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),null):this.useRanges?this.useRanges?((this.dataOffset>e||e>=this.skip+n)&&(i=this.range(Math.floor(e/n)*n)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),i?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):t:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,n=e.skip-e.viewSize+t,i=_e.max(_e.floor(n/t),0)*t;this.offset=n,this.dataSource.prefetch(i,t,function(){e._goToRange(n,!0)})},range:function(e,t){if(this.offset===e)return!0;var n=this,i=this.pageSize,r=_e.max(_e.floor(e/i),0)*i,o=this.dataSource;return t&&(r+=i),o.inRange(e,i)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):!this.prefetch||(o.prefetch(r,i,function(){n.offset=e,n._recalculate(),n._goToRange(e,!0)}),!1)},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,n=this.skip+t,i=this.dataSource;i.inRange(n,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:n,take:t}),i.prefetch(n,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:n,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,n=this.viewSize,i=Math.ceil(t/e)*e;this.skip=i,this.midPageThreshold=i+e-1,this.nextPageThreshold=i+n-1,this.prefetchThreshold=i+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=i+e-n,this.nextFullRange=i,this.previousMidRange=t-n,this.previousFullRange=i-e}}),G=ne.Observable.extend({init:function(e,t){var n=this;ne.Observable.fn.init.call(n),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new q(e,3*t),this.buffer.bind({endreached:function(e){n.trigger("endreached",{index:e.index})},prefetching:function(e){n.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){n.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){n._total=0,n.trigger("reset")},resize:function(){n._total=Math.ceil(this.length/n.batchSize),n.trigger("resize",{total:n.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t,n,i=this.buffer,r=e*this.batchSize,o=this.batchSize,a=[];for(i.offset>r&&i.at(i.offset-1),n=0;o>n&&null!==(t=i.at(r+n));n++)a.push(t);return a},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}}),$(!0,ne.data,{readers:{json:O},Query:r,DataSource:V,HierarchicalDataSource:j,Node:W,ObservableObject:Pe,ObservableArray:Ie,LazyObservableArray:Re,LocalTransport:z,RemoteTransport:H,Cache:N,DataReader:O,Model:Be,Buffer:q,BatchBuffer:G})}(window.kendo.jQuery),function(e,t){function n(t,n,i){return f.extend({init:function(e,t,n){var i=this;f.fn.init.call(i,e.element[0],t,n),i.widget=e,i._dataBinding=A(i.dataBinding,i),i._dataBound=A(i.dataBound,i),i._itemChange=A(i.itemChange,i)},itemChange:function(e){o(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[t]._parents()))},dataBinding:function(e){var t,n,i=this.widget,r=e.removedItems||i.items();for(t=0,n=r.length;n>t;t++)l(r[t])},_ns:function(t){t=t||w.ui;var n=[w.ui,w.dataviz.ui,w.mobile.ui];return n.splice(e.inArray(t,n),1),n.unshift(t),w.rolesFromNamespaces(n)},dataBound:function(e){var i,r,a,s,l=this.widget,c=e.addedItems||l.items(),u=l[n],d=(u.group(),w.data.HierarchicalDataSource);if(!(d&&u instanceof d)&&c.length)for(a=e.addedDataItems||u.flatView(),s=this.bindings[t]._parents(),i=0,r=a.length;r>i;i++)o(c[i],a[i],this._ns(e.ns),[a[i]].concat(s))},refresh:function(e){var r,o=this,a=o.widget;(e=e||{}).action||(o.destroy(),a.bind("dataBinding",o._dataBinding),a.bind("dataBound",o._dataBound),a.bind("itemChange",o._itemChange),r=o.bindings[t].get(),a[n]instanceof w.data.DataSource&&a[n]!=r&&(r instanceof w.data.DataSource?a[i](r):r&&r._dataSource?a[i](r._dataSource):(a[n].data(r),o.bindings.value&&(a instanceof w.ui.Select||a instanceof w.ui.MultiSelect)&&a.value(u(o.bindings.value.get(),a.options.dataValueField)))))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}function i(e,n){var i=w.initWidget(e,{},n);return i?new _(i):t}function r(e,t,n){var i,r={};for(i in e)r[i]=new n(t,e[i]);return r}function o(e,t,n,a){var l,c,u,f=e.getAttribute("data-"+w.ns+"role"),g=e.getAttribute("data-"+w.ns+"bind"),m=e.children,_=[],k=!0,x={};if(a=a||[t],(f||g)&&s(e),f&&(u=i(e,n)),g&&(g=function e(t){var n,i,r,o,a,s,l,c={};for(n=0,i=(l=t.match(y)).length;i>n;n++)o=(r=l[n]).indexOf(":"),a=r.substring(0,o),"{"==(s=r.substring(o+1)).charAt(0)&&(s=e(s)),c[a]=s;return c}(g.replace(b,"")),u||((x=w.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:L,valuePrimitive:!1,autoBind:!0})).roles=n,u=new v(e,x)),u.source=t,c=r(g,a,d),x.template&&(c.template=new p(a,"",x.template)),c.click&&(g.events=g.events||{},g.events.click=g.click,c.click.destroy(),delete c.click),c.source&&(k=!1),g.attr&&(c.attr=r(g.attr,a,d)),g.style&&(c.style=r(g.style,a,d)),g.events&&(c.events=r(g.events,a,h)),g.css&&(c.css=r(g.css,a,d)),u.bind(c)),u&&(e.kendoBindingTarget=u),k&&m){for(l=0;m.length>l;l++)_[l]=m[l];for(l=0;_.length>l;l++)o(_[l],t,n,a)}}function a(t,n){var i,r,a,s=w.rolesFromNamespaces([].slice.call(arguments,2));for(n=w.observable(n),i=0,r=(t=e(t)).length;r>i;i++)1===(a=t[i]).nodeType&&o(a,n,s)}function s(e){var t=e.kendoBindingTarget;t&&(t.destroy(),P?delete e.kendoBindingTarget:e.removeAttribute?e.removeAttribute("kendoBindingTarget"):e.kendoBindingTarget=null)}function l(e){s(e),c(e)}function c(e){var t,n,i=e.children;if(i)for(t=0,n=i.length;n>t;t++)l(i[t])}function u(e,t){var n,i,r=[],o=0;if(!t)return e;if(e instanceof C){for(n=e.length;n>o;o++)i=e[o],r[o]=i.get?i.get(t):i[t];e=r}else e instanceof x&&(e=e.get(t));return e}var d,h,p,f,g,m,v,_,y,b,w=window.kendo,k=w.Observable,x=w.data.ObservableObject,C=w.data.ObservableArray,T={}.toString,S={},D=w.Class,A=e.proxy,M="value",E="source",I="events",R="checked",P=!0,L="change";!function(){var e=document.createElement("a");try{delete e.test}catch(e){P=!1}}(),d=k.extend({init:function(e,t){var n=this;k.fn.init.call(n),n.source=e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof k,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(L,n._change))},_parents:function(){var t,n=this.parents,i=this.get();return i&&"function"==typeof i.parent&&(t=i.parent(),e.inArray(t,n)<0&&(n=[t].concat(n))),n},change:function(e){var t,n,i=e.field,r=this;if("this"===r.path)r.trigger(L,e);else for(t in r.dependencies)if(0===t.indexOf(i)&&(!(n=t.charAt(i.length))||"."===n||"["===n)){r.trigger(L,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,n=e.source,i=0,r=e.path,o=n;if(!e.observable)return o;for(e.start(e.source),o=n.get(r);o===t&&n;)(n=e.parents[++i])instanceof x&&(o=n.get(r));if(o===t)for(n=e.source;o===t&&n;)(n=n.parent())instanceof x&&(o=n.get(r));return"function"==typeof o&&((i=r.lastIndexOf("."))>0&&(n=n.get(r.substring(0,i))),e.start(n),o=n!==e.source?o.call(n,e.source):o.call(n),e.stop(n)),n&&n!==e.source&&(e.currentSource=n,n.unbind(L,e._change).bind(L,e._change)),e.stop(e.source),o},set:function(e){var t=this.currentSource||this.source,n=w.getter(this.path)(t);"function"==typeof n?t!==this.source?n.call(t,this.source,e):n.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(L,this._change),this.currentSource&&this.currentSource.unbind(L,this._change)),this.unbind()}}),h=d.extend({get:function(){var e,t=this.source,n=this.path,i=0;for(e=t.get(n);!e&&t;)(t=this.parents[++i])instanceof x&&(e=t.get(n));return A(e,t)}}),p=d.extend({init:function(e,t,n){d.fn.init.call(this,e,t),this.template=n},render:function(e){var t;return this.start(this.source),t=w.render(this.template,e),this.stop(this.source),t}}),f=D.extend({init:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;(e=t?e[t]:e).bind(L,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),g=f.extend({dataType:function(){return(this.element.getAttribute("data-type")||this.element.type||"text").toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(e,t){return"date"==t?e=w.parseDate(e,"yyyy-MM-dd"):"datetime-local"==t?e=w.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==t?e=w.parseFloat(e):"boolean"==t&&(e=e.toLowerCase(),e=null!==w.parseFloat(e)?!!w.parseFloat(e):"true"===e.toLowerCase()),e}}),S.attr=f.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),S.css=f.extend({init:function(e,t,n){f.fn.init.call(this,e,t,n),this.classes={}},refresh:function(t){var n=e(this.element),i=this.bindings.css[t];(this.classes[t]=i.get())?n.addClass(t):n.removeClass(t)}}),S.style=f.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),S.enabled=f.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),S.readonly=f.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),S.disabled=f.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),S.events=f.extend({init:function(e,t,n){f.fn.init.call(this,e,t,n),this.handlers={}},refresh:function(t){var n=e(this.element),i=this.bindings.events[t],r=this.handlers[t];r&&n.off(t,r),r=this.handlers[t]=i.get(),n.on(t,i.source,r)},destroy:function(){var t,n=e(this.element);for(t in this.handlers)n.off(t,this.handlers[t])}}),S.text=f.extend({refresh:function(){var t=this.bindings.text.get(),n=this.element.getAttribute("data-format")||"";null==t&&(t=""),e(this.element).text(w.toString(t,n))}}),S.visible=f.extend({refresh:function(){this.element.style.display=this.bindings.visible.get()?"":"none"}}),S.invisible=f.extend({refresh:function(){this.element.style.display=this.bindings.invisible.get()?"none":""}}),S.html=f.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),S.value=g.extend({init:function(t,n,i){g.fn.init.call(this,t,n,i),this._change=A(this.change,this),this.eventName=i.valueUpdate||L,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=L,this.bindings[M].set(this.parsedValue()),this._initChange=!1},refresh:function(){var e,t;this._initChange||(null==(e=this.bindings[M].get())&&(e=""),"date"==(t=this.dataType())?e=w.toString(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=w.toString(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e),this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),S.source=f.extend({init:function(e,t,n){f.fn.init.call(this,e,t,n);var i=this.bindings.source.get();i instanceof w.data.DataSource&&!1!==n.autoBind&&i.fetch()},refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof C||n instanceof w.data.DataSource?"add"==(e=e||{}).action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render():t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?w.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=w.template(t)),t},add:function(t,n){var i,r,a,s,l=this.container(),c=l.cloneNode(!1),u=l.children[t];if(e(c).html(w.render(this.template(),n)),c.children.length)for(i=this.bindings.source._parents(),r=0,a=n.length;a>r;r++)s=c.children[0],l.insertBefore(s,u||null),o(s,n[r],this.options.roles,[n[r]].concat(i))},remove:function(e,t){var n,i,r=this.container();for(n=0;t.length>n;n++)l(i=r.children[e]),r.removeChild(i)},render:function(){var t,n,i,r=this.bindings.source.get(),a=this.container(),s=this.template();if(r instanceof w.data.DataSource&&(r=r.view()),r instanceof C||"[object Array]"===T.call(r)||(r=[r]),this.bindings.template){if(c(a),e(a).html(this.bindings.template.render(r)),a.children.length)for(t=this.bindings.source._parents(),n=0,i=r.length;i>n;n++)o(a.children[n],r[n],this.options.roles,[r[n]].concat(t))}else e(a).html(w.render(s,r))}}),S.input={checked:g.extend({init:function(t,n,i){g.fn.init.call(this,t,n,i),this._change=A(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n,i=this.element,r=this.value();if("radio"==i.type)r=this.parsedValue(),this.bindings[R].set(r);else if("checkbox"==i.type)if((e=this.bindings[R].get())instanceof C){if((r=this.parsedValue())instanceof Date){for(n=0;e.length>n;n++)if(e[n]instanceof Date&&+e[n]==+r){t=n;break}}else t=e.indexOf(r);t>-1?e.splice(t,1):e.push(r)}else this.bindings[R].set(r)},refresh:function(){var e,t,n=this.bindings[R].get(),i=n,r=this.dataType(),o=this.element;if("checkbox"==o.type)if(i instanceof C){if(e=-1,(n=this.parsedValue())instanceof Date){for(t=0;i.length>t;t++)if(i[t]instanceof Date&&+i[t]==+n){e=t;break}}else e=i.indexOf(n);o.checked=e>=0}else o.checked=i;else"radio"==o.type&&null!=n&&("date"==r?n=w.toString(n,"yyyy-MM-dd"):"datetime-local"==r&&(n=w.toString(n,"yyyy-MM-ddTHH:mm:ss")),o.value===""+n&&(o.checked=!0))},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(L,this._change)}})},S.select={source:S.source.extend({refresh:function(n){var i=this,r=i.bindings.source.get();r instanceof C||r instanceof w.data.DataSource?"add"==(n=n||{}).action?i.add(n.index,n.items):"remove"==n.action?i.remove(n.index,n.items):("itemchange"==n.action||n.action===t)&&(i.render(),i.bindings.value&&i.bindings.value&&(i.element.value=u(i.bindings.value.get(),e(i.element).data("valueField")))):i.render()}}),value:g.extend({init:function(t,n,i){g.fn.init.call(this,t,n,i),this._change=A(this.change,this),e(this.element).change(this._change)},parsedValue:function(){var e,t,n,i,r=this.dataType(),o=[];for(n=0,i=this.element.options.length;i>n;n++)(t=this.element.options[n]).selected&&(e=(e=t.attributes.value)&&e.specified?t.value:t.text,o.push(this._parseValue(e,r)));return o},change:function(){var e,n,i,r,o,a,s=[],l=this.element,c=this.options.valueField||this.options.textField,u=this.options.valuePrimitive;for(o=0,a=l.options.length;a>o;o++)(n=l.options[o]).selected&&(r=(r=n.attributes.value)&&r.specified?n.value:n.text,s.push(this._parseValue(r,this.dataType())));if(c)for((e=this.bindings.source.get())instanceof w.data.DataSource&&(e=e.view()),i=0;s.length>i;i++)for(o=0,a=e.length;a>o;o++)if(this._parseValue(e[o].get(c),this.dataType())+""===s[i]){s[i]=e[o];break}(r=this.bindings[M].get())instanceof C?r.splice.apply(r,[0,r.length].concat(s)):this.bindings[M].set(u||!(r instanceof x||null===r||r===t)&&c?s[0].get(c):s[0])},refresh:function(){var e,t,n,i=this.element,r=i.options,o=this.bindings[M].get(),a=o,s=this.options.valueField||this.options.textField,l=this.dataType();for(a instanceof C||(a=new C([o])),i.selectedIndex=-1,n=0;a.length>n;n++)for(o=a[n],s&&o instanceof x&&(o=o.get(s)),"date"==l?o=w.toString(a[n],"yyyy-MM-dd"):"datetime-local"==l&&(o=w.toString(a[n],"yyyy-MM-ddTHH:mm:ss")),e=0;r.length>e;e++)""===(t=r[e].value)&&""!==o&&(t=r[e].text),null!=o&&t==""+o&&(r[e].selected=!0)},destroy:function(){e(this.element).off(L,this._change)}})},S.widget={events:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.widget.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e,this._change=A(this.change,this),this.widget.bind(L,this._change)},change:function(){this.bindings[R].set(this.value())},refresh:function(){this.widget.check(!0===this.bindings[R].get())},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(L,this._change)}}),visible:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:f.extend({init:function(e,t,n){f.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:n("source","dataSource","setDataSource"),value:f.extend({init:function(t,n,i){f.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(L,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(null==r||r instanceof x),this._valueIsObservableArray=r instanceof C,this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,c="[object Array]"===T.call(s),u=this._valueIsObservableObject,d=[];if(this._initChange=!0,l)if(this.bindings.source&&(a=this.bindings.source.get()),""===s&&(u||this.options.valuePrimitive))s=null;else{for((!a||a instanceof w.data.DataSource)&&(a=this.widget.dataSource.flatView()),c&&(t=s.length,d=s.slice(0)),r=0,o=a.length;o>r;r++)if(i=(n=a[r]).get(l),c){for(e=0;t>e;e++)if(i==d[e]){d[e]=n;break}}else if(i==s){s=u?n:i;break}d[0]&&(s=this._valueIsObservableArray?d:u||!l?d[0]:d[0].get(l))}this.bindings.value.set(s),this._initChange=!1},refresh:function(){var e,n,i,r,o,a,s,l,c;if(!this._initChange){if(i=(n=(e=this.widget).options).dataTextField,r=n.dataValueField||i,o=this.bindings.value.get(),a=n.text||"",s=0,c=[],o===t&&(o=null),r)if(o instanceof C){for(l=o.length;l>s;s++)c[s]=o[s].get(r);o=c}else o instanceof x&&(a=o.get(i),o=o.get(r));!1!==n.autoBind||n.cascadeFrom||!e.listView||e.listView.isBound()?e.value(o):(i!==r||a||(a=o),a||!o&&0!==o||!n.valuePrimitive?e._preselect(o,a):e.value(o))}this._initChange=!1},destroy:function(){this.widget.unbind(L,this._change)}}),gantt:{dependencies:n("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:f.extend({init:function(t,n,i){f.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(L,this._change),this._initChange=!1},change:function(){var e,n,i,r,o,a,s,l,c=this,u=c.bindings[M].get(),d=c.options.valuePrimitive,h=d?c.widget.value():c.widget.dataItems(),p=this.options.dataValueField||this.options.dataTextField;if(h=h.slice(0),c._initChange=!0,u instanceof C){for(e=[],n=h.length,r=0,o=u[i=0],!1;o!==t;){for(l=!1,r=0;n>r;r++)if(d?h[r]==o:(s=(s=h[r]).get?s.get(p):s)==(o.get?o.get(p):o)){h.splice(r,1),n-=1,l=!0;break}l?i+=1:(e.push(o),m(u,i,1),a=i),o=u[i]}m(u,u.length,0,h),e.length&&u.trigger("change",{action:"remove",items:e,index:a}),h.length&&u.trigger("change",{action:"add",items:h,index:u.length-1})}else c.bindings[M].set(h);c._initChange=!1},refresh:function(){if(!this._initChange){var e,n,i=this.options,r=this.widget,o=i.dataValueField||i.dataTextField,a=this.bindings.value.get(),s=a,l=0,c=[];if(a===t&&(a=null),o)if(a instanceof C){for(e=a.length;e>l;l++)n=a[l],c[l]=n.get?n.get(o):n;a=c}else a instanceof x&&(a=a.get(o));!1!==i.autoBind||!0===i.valuePrimitive||r.listView.isBound()?r.value(a):r._preselect(s,a)}},destroy:function(){this.widget.unbind(L,this._change)}})},scheduler:{source:n("source","dataSource","setDataSource").extend({dataBound:function(e){var t,n,i,r,a=this.widget,s=e.addedItems||a.items();if(s.length)for(i=e.addedDataItems||a.dataItems(),r=this.bindings.source._parents(),t=0,n=i.length;n>t;t++)o(s[t],i[t],this._ns(e.ns),[i[t]].concat(r))}})}},m=function(e,t,n,i){var r,o,a,s,l;if(i=i||[],n=n||0,r=i.length,o=e.length,s=(a=[].slice.call(e,t+n)).length,r){for(r=t+r,l=0;r>t;t++)e[t]=i[l],l++;e.length=r}else if(n)for(e.length=t,n+=t;n>t;)delete e[--n];if(s){for(s=t+s,l=0;s>t;t++)e[t]=a[l],l++;e.length=s}for(t=e.length;o>t;)delete e[t],t++},v=D.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,i,r,o,a,s=this instanceof _,l=this.binders();for(t in e)t==M?n=!0:t==E?i=!0:t!=I||s?t==R?o=!0:"css"==t?a=!0:this.applyBinding(t,e,l):r=!0;i&&this.applyBinding(E,e,l),n&&this.applyBinding(M,e,l),o&&this.applyBinding(R,e,l),r&&!s&&this.applyBinding(I,e,l),a&&!s&&this.applyBinding("css",e,l)},binders:function(){return S[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(e,t,n){var i,r=n[e]||S[e],o=this.toDestroy,a=t[e];if(r)if(r=new r(this.target,t,this.options),o.push(r),a instanceof d)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i]);else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;t>e;e++)n[e].destroy()}}),_=v.extend({binders:function(){return S.widget[this.target.options.name.toLowerCase()]||{}},applyBinding:function(e,t,n){var i,r=n[e]||S.widget[e],o=this.toDestroy,a=t[e];if(!r)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,t,this.target.options),o.push(r),a instanceof d)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i])}}),y=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,b=/\s/g,w.unbind=function(t){var n,i;for(n=0,i=(t=e(t)).length;i>n;n++)l(t[n])},w.bind=a,w.data.binders=S,w.data.Binder=f,w.notify=function(e,t){var n=e.element,i=n[0].kendoBindingTarget;i&&a(n,i.source,t)},w.observable=function(e){return e instanceof x||(e=new x(e)),e},w.observableHierarchy=function(e){var t=w.data.HierarchicalDataSource.create(e);return t.fetch(),function e(t){var n,i;for(n=0;t.length>n;n++)t[n]._initChildren(),(i=t[n].children).fetch(),t[n].items=i.data(),e(t[n].items)}(t.data()),t._data._dataSource=t,t._data}}(window.kendo.jQuery),function(e,t){function n(e){return parseInt(e,10)}function i(e,t){return n(e.css(t))}function r(e){for(var t in e)-1!=V.indexOf(t)&&-1==U.indexOf(t)&&delete e[t];return e}function o(e,t){var n,i,r,o,a=[],s={};for(i in t)n=i.toLowerCase(),o=E&&-1!=V.indexOf(n),!A.hasHW3D&&o&&-1==U.indexOf(n)?delete t[i]:(r=t[i],o?a.push(i+"("+r+")"):s[i]=r);return a.length&&(s[oe]=a.join(" ")),s}function a(e,t){var i,r,o;return E?(i=e.css(oe))==$?"scale"==t?1:0:(o=0,(r=i.match(RegExp(t+"\\s*\\(([\\d\\w\\.]+)")))?o=n(r[1]):(r=i.match(F)||[0,0,0,0,0],t=t.toLowerCase(),z.test(t)?o=parseFloat(r[3]/r[2]):"translatey"==t?o=parseFloat(r[4]/r[2]):"scale"==t?o=parseFloat(r[2]):"rotate"==t&&(o=parseFloat(Math.atan2(r[2],r[1])))),o):parseFloat(e.css(t))}function s(e){return e.charAt(0).toUpperCase()+e.substring(1)}function l(e,t){var n=p.extend(t),i=n.prototype.directions;C[s(e)]=n,C.Element.prototype[e]=function(e,t,i,r){return new n(this.element,e,t,i,r)},T(i,function(t,i){C.Element.prototype[e+s(i)]=function(e,t,r){return new n(this.element,i,e,t,r)}})}function c(e,n,i,r){l(e,{directions:g,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,o){var a,s,l="out"===this._direction,c=this.element.data(n);a=isNaN(c)||c==i?t!==this._startValue?this._startValue:l?i:r:c,s=t!==this._endValue?this._endValue:l?r:i,this._reverse?(e[n]=s,o[n]=a):(e[n]=a,o[n]=s),this._shouldHide=o[n]===r}})}function u(e,t){var n=e[x.directions[t].vertical?X:Q]()/2+"px";return v[t].replace("$size",n)}var d,h,p,f,g,m,v,_,y,b,w,k,x=window.kendo,C=x.effects,T=e.each,S=e.extend,D=e.proxy,A=x.support,M=A.browser,E=A.transforms,I=A.transitions,R={scale:0,scalex:0,scaley:0,scale3d:0},P={translate:0,translatex:0,translatey:0,translate3d:0},L=t!==document.documentElement.style.zoom&&!E,F=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,B=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,z=/translatex?$/i,H=/(zoom|fade|expand)(\w+)/,N=/(zoom|fade|expand)/,O=/[xy]$/i,V=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],U=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],W={rotate:"deg",scale:"",skew:"px",translate:"px"},j=E.css,q=Math.round,G="px",$="none",Y="auto",Q="width",X="height",K="hidden",Z="origin",J="abortId",ee="overflow",te="translate",ne="position",ie="completeCallback",re=j+"transition",oe=j+"transform",ae=j+"backface-visibility",se=j+"perspective",le="1500px",ce="perspective(1500px)",ue={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};x.directions=ue,S(e.fn,{kendoStop:function(e,t){return I?C.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),E&&!I&&(T(U,function(n,i){e.fn[i]=function(n){if(t===n)return a(this,i);var r=e(this)[0],o=i+"("+n+W[i.replace(O,"")]+")";return-1==r.style.cssText.indexOf(oe)?e(this).css(oe,o):r.style.cssText=r.style.cssText.replace(RegExp(i+"\\(.*?\\)","i"),o),this},e.fx.step[i]=function(t){e(t.elem)[i](t.now)}}),d=e.fx.prototype.cur,e.fx.prototype.cur=function(){return-1!=U.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):d.apply(this,arguments)}),x.toggleClass=function(e,t,n,i){return t&&(t=t.split(" "),I&&(n=S({exclusive:"all",duration:400,ease:"ease-out"},n),e.css(re,n.exclusive+" "+n.duration+"ms "+n.ease),setTimeout(function(){e.css(re,"").css(X)},n.duration)),T(t,function(t,n){e.toggleClass(n,i)})),e},x.parseEffects=function(e,t){var n={};return"string"==typeof e?T(e.split(" "),function(e,i){var r=!N.test(i),o=i.replace(H,function(e,t,n){return t+":"+n.toLowerCase()}).split(":"),a=o[1],s={};o.length>1&&(s.direction=t&&r?ue[a].reverse:a),n[o[0]]=s}):T(e,function(e){var i=this.direction;i&&t&&!N.test(e)&&(this.direction=ue[i].reverse),n[e]=this}),n},I&&S(C,{transition:function(t,n,i){var r,a,s,l,c=0,u=t.data("keys")||[];i=S({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i),s=!1,l=function(){s||(s=!0,a&&(clearTimeout(a),a=null),t.removeData(J).dequeue().css(re,"").css(re),i.complete.call(t))},i.duration=e.fx&&e.fx.speeds[i.duration]||i.duration,r=o(0,n),e.merge(u,function(e){var t,n=[];for(t in e)n.push(t);return n}(r)),t.data("keys",e.unique(u)).height(),t.css(re,i.exclusive+" "+i.duration+"ms "+i.ease).css(re),t.css(r).css(oe),I.event&&(t.one(I.event,l),0!==i.duration&&(c=500)),a=setTimeout(l,i.duration+c),t.data(J,a),t.data(ie,l)},stopQueue:function(e,t,n){var i,r=e.data("keys"),o=!n&&r,a=e.data(ie);return o&&(i=x.getComputedStyles(e[0],r)),a&&a(),o&&e.css(i),e.removeData("keys").stop(t)}}),h=x.Class.extend({init:function(e,t){var n=this;n.element=e,n.effects=[],n.options=t,n.restore=[]},run:function(t){var n,i,a,s,l,c,u,d=this,h=t.length,p=d.element,f=d.options,g=e.Deferred(),m={},v={};for(d.effects=t,g.then(e.proxy(d,"complete")),p.data("animating",!0),i=0;h>i;i++)for((n=t[i]).setReverse(f.reverse),n.setOptions(f),d.addRestoreProperties(n.restore),n.prepare(m,v),a=0,c=(l=n.children()).length;c>a;a++)l[a].duration(f.duration).run();for(u in f.effects)S(v,f.effects[u].properties);for(p.is(":visible")||S(m,{display:p.data("olddisplay")||"block"}),E&&!f.reset&&(s=p.data("targetTransform"))&&(m=S(s,m)),m=o(0,m),E&&!I&&(m=r(m)),p.css(m).css(oe),i=0;h>i;i++)t[i].setup();return f.init&&f.init(),p.data("targetTransform",v),C.animate(p,v,S({},f,{complete:g.resolve})),g.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,n=this.element,i=0,r=e.length;r>i;i++)t=e[i],this.restore.push(t),n.data(t)||n.data(t,n.css(t))},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},complete:function(){var t=this,n=0,i=t.element,r=t.options,o=t.effects,a=o.length;for(i.removeData("animating").dequeue(),r.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),L&&!E&&setTimeout(e.proxy(this,"restoreCallback"),0);a>n;n++)o[n].teardown();r.completeCallback&&r.completeCallback(i)}}),C.promise=function(e,t){var n,i,r,o=[],a=new h(e,t),l=x.parseEffects(t.effects);for(r in t.effects=l,l)(n=C[s(r)])&&(i=new n(e,l[r].direction),o.push(i));o[0]?a.run(o):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),a.complete())},S(C,{animate:function(n,o,a){var s=!1!==a.transition;delete a.transition,I&&"transition"in C&&s?C.transition(n,o,a):E?n.animate(r(o),{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete}):n.each(function(){var n=e(this),r={};T(V,function(e,a){var s,l,c,u,d,h,p,f=o?o[a]+" ":null;f&&(l=o,a in R&&o[a]!==t?(s=f.match(B),E&&S(l,{scale:+s[0]})):a in P&&o[a]!==t&&(u="absolute"==(c=n.css(ne))||"fixed"==c,n.data(te)||(u?n.data(te,{top:i(n,"top")||0,left:i(n,"left")||0,bottom:i(n,"bottom"),right:i(n,"right")}):n.data(te,{top:i(n,"marginTop")||0,left:i(n,"marginLeft")||0})),d=n.data(te),(s=f.match(B))&&(h=a==te+"y"?0:+s[1],p=a==te+"y"?+s[1]:+s[2],u?(isNaN(d.right)?isNaN(h)||S(l,{left:d.left+h}):isNaN(h)||S(l,{right:d.right-h}),isNaN(d.bottom)?isNaN(p)||S(l,{top:d.top+p}):isNaN(p)||S(l,{bottom:d.bottom-p})):(isNaN(h)||S(l,{marginLeft:d.left+h}),isNaN(p)||S(l,{marginTop:d.top+p})))),!E&&"scale"!=a&&a in l&&delete l[a],l&&S(r,l))}),M.msie&&delete r.scale,n.animate(r,{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete})})}}),C.animatedPromise=C.promise,p=x.Class.extend({init:function(e,t){var n=this;n.element=e,n._direction=t,n.options={},n._additionalEffects=[],n.restore||(n.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=this,t=new h(e.element,{reverse:e._reverse,duration:e._duration}),n=e._additionalEffects.concat([e]);return t.run(n)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n,i=this,a=i.element,s=0,l=i.restore,c=l.length,u=e.Deferred(),d={},h={},p=i.children(),f=p.length;for(u.then(e.proxy(i,"_complete")),a.data("animating",!0),s=0;c>s;s++)t=l[s],a.data(t)||a.data(t,a.css(t));for(s=0;f>s;s++)p[s].duration(i._duration).run();return i.prepare(d,h),a.is(":visible")||S(d,{display:a.data("olddisplay")||"block"}),E&&(n=a.data("targetTransform"))&&(d=S(n,d)),d=o(0,d),E&&!I&&(d=r(d)),a.css(d).css(oe),i.setup(),a.data("targetTransform",h),C.animate(a,h,{duration:i._duration,complete:u.resolve}),u.promise()},stop:function(){var t=0,n=this.children(),i=n.length;for(t=0;i>t;t++)n[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},_complete:function(){var t=this,n=t.element;n.removeData("animating").dequeue(),t.restoreCallback(),t.shouldHide()&&n.data("olddisplay",n.css("display")).hide(),L&&!E&&setTimeout(e.proxy(t,"restoreCallback"),0),t.teardown()},setOptions:function(e){S(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),g=["in","out"],l("slideIn",{directions:f=["left","right","up","down"],divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var n,i=this,r=i.element,o=ue[i._direction],a=-o.modifier*(o.vertical?r.outerHeight():r.outerWidth())/(i.options&&i.options.divisor||1)+G;i._reverse&&(n=e,e=t,t=n),E?(e[o.transition]=a,t[o.transition]="0px"):(e[o.property]=a,t[o.property]="0px")}}),l("tile",{directions:f,init:function(e,t,n){p.prototype.init.call(this,e,t),this.options={previous:n}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this,t=e._reverse,n=e.options.previous,i=e.options.previousDivisor||1,r=e._direction,o=[x.fx(e.element).slideIn(r).setReverse(t)];return n&&o.push(x.fx(n).slideIn(ue[r].reverse).divisor(i).setReverse(!t)),o}}),c("fade","opacity",1,0),c("zoom","scale",1,.01),l("slideMargin",{prepare:function(e,t){var n,i=this,r=i.element,o=i.options,a=r.data(Z),s=o.offset,l=i._reverse;l||null!==a||r.data(Z,parseFloat(r.css("margin-"+o.axis))),n=r.data(Z)||0,t["margin-"+o.axis]=l?n:n+s}}),l("slideTo",{prepare:function(e,t){var n=this,i=n.element,r=n.options.offset.split(","),o=n._reverse;E?(t.translatex=o?0:r[0],t.translatey=o?0:r[1]):(t.left=o?0:r[0],t.top=o?0:r[1]),i.css("left")}}),l("expand",{directions:["horizontal","vertical"],restore:[ee],prepare:function(e,n){var i=this,r=i.element,o=i.options,a=i._reverse,s="vertical"===i._direction?X:Q,l=r[0].style[s],c=r.data(s),u=parseFloat(c||l),d=q(r.css(s,Y)[s]());e.overflow=K,u=o&&o.reset?d||u:u||d,n[s]=(a?0:u)+G,e[s]=(a?u:0)+G,c===t&&r.data(s,l)},shouldHide:function(){return this._reverse},teardown:function(){var e=this.element,t="vertical"===this._direction?X:Q,n=e.data(t);(n==Y||""===n)&&setTimeout(function(){e.css(t,Y).css(t)},0)}}),m={position:"absolute",marginLeft:0,marginTop:0,scale:1},l("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var n=this,i=n.element,r=C.box(i),o=C.box(n.options.target),s=a(i,"scale"),l=C.fillScale(o,r),c=C.transformOrigin(o,r);S(e,m),t.scale=1,i.css(oe,"scale(1)").css(oe),i.css(oe,"scale("+s+")"),e.top=r.top,e.left=r.left,e.transformOrigin=c.x+G+" "+c.y+G,n._reverse?e.scale=l:t.scale=l}}),v={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},_={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}},l("turningPage",{directions:f,init:function(e,t,n){p.prototype.init.call(this,e,t),this._container=n},prepare:function(e,t){var n=this,i=n._reverse,r=i?ue[n._direction].reverse:n._direction,o=_[r];e.zIndex=1,n._clipInHalf&&(e.clip=u(n._container,x.directions[r].reverse)),e[ae]=K,t[oe]=ce+(i?o.start:o.end),e[oe]=ce+(i?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this._reverse,t=this._face;return e&&!t||!e&&t},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),l("staticPage",{directions:f,init:function(e,t,n){p.prototype.init.call(this,e,t),this._container=n},restore:["clip"],prepare:function(e,t){var n=this,i=n._reverse?ue[n._direction].reverse:n._direction;e.clip=u(n._container,i),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this._reverse,t=this._face;return e&&!t||!e&&t},face:function(e){return this._face=e,this}}),l("pageturn",{directions:["horizontal","vertical"],init:function(e,t,n,i){p.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=x.directions[i].reverse,o=t._reverse,a=n.face.clone(!0).removeAttr("id"),s=n.back.clone(!0).removeAttr("id"),l=t.element;return o&&(e=i,i=r,r=e),[x.fx(n.face).staticPage(i,l).face(!0).setReverse(o),x.fx(n.back).staticPage(r,l).setReverse(o),x.fx(a).turningPage(i,l).face(!0).clipInHalf(!0).temporary().setReverse(o),x.fx(s).turningPage(r,l).clipInHalf(!0).temporary().setReverse(o)]},prepare:function(e,t){e[se]=le,e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),l("flip",{directions:["horizontal","vertical"],init:function(e,t,n,i){p.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=x.directions[i].reverse,o=t._reverse,a=t.element;return o&&(e=i,i=r,r=e),[x.fx(n.face).turningPage(i,a).face(!0).setReverse(o),x.fx(n.back).turningPage(r,a).setReverse(o)]},prepare:function(e){e[se]=le,e.transformStyle="preserve-3d"}}),y=!A.mobileOS.android,b=".km-touch-scrollbar, .km-actionsheet-wrapper",l("replace",{_before:e.noop,_after:e.noop,init:function(t,n,i){p.prototype.init.call(this,t),this._previous=e(n),this._transitionClass=i},duration:function(){throw Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){return this._before=e,this},afterTransition:function(e){return this._after=e,this},_both:function(){return e().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;return e&&(t+=" k-fx-"+e),this._reverse&&(t+=" k-fx-reverse"),t},complete:function(t){if(!(!this.deferred||t&&e(t.target).is(b))){var n=this.container;n.removeClass("k-fx-end").removeClass(this._containerClass()).off(I.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),y&&n.css(ee,""),this.isAbsolute||this._both().css(ne,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t=this,n=t.element,i=t._previous,r=n.parents().filter(i.parents()).first(),o=t._both(),a=e.Deferred(),s=n.css(ne);return r.length||(r=n.parent()),this.container=r,this.deferred=a,this.isAbsolute="absolute"==s,this.isAbsolute||o.css(ne,"absolute"),y&&(r.css(ee),r.css(ee,"hidden")),I?(n.addClass("k-fx-hidden"),r.addClass(this._containerClass()),this.completeProxy=e.proxy(this,"complete"),r.on(I.event,this.completeProxy),x.animationFrame(function(){n.removeClass("k-fx-hidden").addClass("k-fx-next"),i.css("display","").addClass("k-fx-current"),t._before(i,n),x.animationFrame(function(){r.removeClass("k-fx-start").addClass("k-fx-end"),t._after(i,n)})})):this.complete(),a.promise()},stop:function(){this.complete()}}),k=(w=x.Class.extend({init:function(){var e=this;e._tickProxy=D(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,x.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):x.animationFrame(e._tickProxy))}})).extend({init:function(e){S(this,e),w.fn.init.call(this)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this,n=t.movable;t.initial=n[t.axis],t.delta=e.location-t.initial,t.duration="number"==typeof e.duration?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=new Date,t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}}),S(k,{easeOutExpo:function(e,t,n,i){return e==i?t+n:n*(1-Math.pow(2,-10*e/i))+t},easeOutBack:function(e,t,n,i,r){return n*((e=e/i-1)*e*((1+(r=1.70158))*e+r)+1)+t}}),C.Animation=w,C.Transition=k,C.createEffect=l,C.box=function(t){var n=(t=e(t)).offset();return n.width=t.outerWidth(),n.height=t.outerHeight(),n},C.transformOrigin=function(e,t){var n=(e.left-t.left)*t.width/(t.width-e.width),i=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(n)?0:n,y:isNaN(i)?0:i}},C.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},C.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Observable,i="init",r="show",o="hide",a="transitionStart",s="transitionEnd",l=/unrecognized expression/,c=n.extend({init:function(e,l){var c=this;l=l||{},n.fn.init.call(c),c.content=e,c.id=t.guid(),c.tagName=l.tagName||"div",c.model=l.model,c._wrap=!1!==l.wrap,this._evalTemplate=l.evalTemplate||!1,c._fragments={},c.bind([i,r,o,a,s],l)},render:function(n){var o=this,a=!o.element;return a&&(o.element=o._createElement()),n&&e(n).append(o.element),a&&(t.bind(o.element,o.model),o.trigger(i)),n&&(o._eachFragment("attach"),o.trigger(r)),o.element},clone:function(){return new u(this)},triggerBeforeShow:function(){return!0},triggerBeforeHide:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger(a,{type:e})},afterTransition:function(e){this.trigger(s,{type:e})},hide:function(){this._eachFragment("detach"),this.element.detach(),this.trigger(o)},destroy:function(){var e=this.element;e&&(t.unbind(e),t.destroy(e),e.remove())},fragments:function(t){e.extend(this._fragments,t)},_eachFragment:function(e){for(var t in this._fragments)this._fragments[t][e](this,t)},_createElement:function(){var n,i,r,o=this,a="<"+o.tagName+" />";try{"SCRIPT"===(i=e(document.getElementById(o.content)||o.content))[0].tagName&&(i=i.html())}catch(e){l.test(e.message)&&(i=o.content)}return"string"==typeof i?(i=i.replace(/^\s+|\s+$/g,""),o._evalTemplate&&(i=t.template(i)(o.model||{})),n=e(a).append(i),o._wrap||(n=n.contents())):(n=i,o._evalTemplate&&(r=e(t.template(e("<div />").append(n.clone(!0)).html())(o.model||{})),e.contains(document,n[0])&&n.replaceWith(r),n=r),o._wrap&&(n=n.wrapAll(a).parent())),n}}),u=t.Class.extend({init:function(t){e.extend(this,{element:t.element.clone(!0),transition:t.transition,id:t.id}),t.element.parent().append(this.element)},hideEnd:function(){this.element.remove()},beforeTransition:e.noop,afterTransition:e.noop}),d=c.extend({init:function(e,t){c.fn.init.call(this,e,t),this.containers={}},container:function(e){var t=this.containers[e];return t||(t=this._createContainer(e),this.containers[e]=t),t},showIn:function(e,t,n){this.container(e).show(t,n)},_createContainer:function(e){var t,n=this.render(),i=n.find(e);if(!i.length&&n.is(e)){if(!n.is(e))throw Error("can't find a container with the specified "+e+" selector");i=n}return(t=new f(i)).bind("accepted",function(e){e.view.render(i)}),t}}),h=c.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}}),p=/^(\w+)(:(\w+))?( (\w+))?$/,f=n.extend({init:function(e){n.fn.init.call(this),this.container=e,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(e,n,i){if(!e.triggerBeforeShow()||this.view&&!this.view.triggerBeforeHide())return this.trigger("after"),!1;i=i||e.id;var r=this,o=e===r.view?e.clone():r.view,a=r.history,s=(a[a.length-2]||{}).id===i,l=n||(s?a[a.length-1].transition:e.transition),c=function(e){if(!e)return{};var t=e.match(p)||[];return{type:t[1],direction:t[3],reverse:"reverse"===t[5]}}(l);return r.running&&r.effect.stop(),"none"===l&&(l=null),r.trigger("accepted",{view:e}),r.view=e,r.previous=o,r.running=!0,s?a.pop():a.push({id:i,transition:l}),o?(l&&t.effects.enabled?(e.element.addClass("k-fx-hidden"),e.showStart(),s&&!n&&(c.reverse=!c.reverse),r.effect=t.fx(e.element).replace(o.element,c.type).beforeTransition(function(){e.beforeTransition("show"),o.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show"),o.afterTransition("hide")}).direction(c.direction).setReverse(c.reverse),r.effect.run().then(function(){r.end()})):(e.showStart(),r.end()),!0):(e.showStart(),e.showEnd(),r.after(),!0)}});t.ViewContainer=f,t.Fragment=h,t.Layout=d,t.View=c,t.ViewClone=u}(window.kendo.jQuery),function(e){function t(){this.node=null}function n(){}function i(e,t,n){this.nodeName=e,this.attr=t||{},this.children=n||[]}function r(e){this.nodeValue=e}function o(e){this.html=e}function a(e){return new o(e)}function s(e,t,n){return new i(e,t,n)}function l(e){return new r(e)}function c(e){this.root=e,this.children=[]}t.prototype={remove:function(){this.node.parentNode.removeChild(this.node)},attr:{}},n.prototype={nodeName:"#null",attr:{style:{}},children:[],remove:function(){}};var u=new n;i.prototype=new t,i.prototype.appendTo=function(e){var t,n=document.createElement(this.nodeName),i=this.children;for(t=0;i.length>t;t++)i[t].render(n,u);return e.appendChild(n),n},i.prototype.render=function(e,t){var n,i,r,o,a,s;if(t.nodeName!==this.nodeName)t.remove(),n=this.appendTo(e);else{if(n=t.node,o=(r=this.children).length,s=(a=t.children).length,Math.abs(s-o)>2)return void this.render({appendChild:function(n){e.replaceChild(n,t.node)}},u);for(i=0;o>i;i++)r[i].render(n,a[i]||u);for(i=o;s>i;i++)a[i].remove()}this.node=n,this.syncAttributes(t.attr),this.removeAttributes(t.attr)},i.prototype.syncAttributes=function(e){var t,n,i,r=this.attr;for(t in r)n=r[t],i=e[t],"style"===t?this.setStyle(n,i):n!==i&&this.setAttribute(t,n,i)},i.prototype.setStyle=function(e,t){var n,i=this.node;if(t)for(n in e)e[n]!==t[n]&&(i.style[n]=e[n]);else for(n in e)i.style[n]=e[n]},i.prototype.removeStyle=function(e){var t,n=this.attr.style||{},i=this.node;for(t in e)void 0===n[t]&&(i.style[t]="")},i.prototype.removeAttributes=function(e){var t,n=this.attr;for(t in e)"style"===t?this.removeStyle(e.style):void 0===n[t]&&this.removeAttribute(t)},i.prototype.removeAttribute=function(e){var t=this.node;"style"===e?t.style.cssText="":"className"===e?t.className="":t.removeAttribute(e)},i.prototype.setAttribute=function(e,t){var n=this.node;void 0!==n[e]?n[e]=t:n.setAttribute(e,t)},r.prototype=new t,r.prototype.nodeName="#text",r.prototype.render=function(e,t){var n;t.nodeName!==this.nodeName?(t.remove(),n=document.createTextNode(this.nodeValue),e.appendChild(n)):(n=t.node,this.nodeValue!==t.nodeValue&&(n.nodeValue=this.nodeValue)),this.node=n},o.prototype={nodeName:"#html",attr:{},remove:function(){for(var e=0;this.nodes.length>e;e++)this.nodes[e].parentNode.removeChild(this.nodes[e])},render:function(e,t){var n,i;if(t.nodeName!==this.nodeName||t.html!==this.html)for(t.remove(),n=e.lastChild,e.insertAdjacentHTML("beforeend",this.html),this.nodes=[],i=n?n.nextSibling:e.firstChild;i;i=i.nextSibling)this.nodes.push(i);else this.nodes=t.nodes.slice(0)}},c.prototype={html:a,element:s,text:l,render:function(e){var t,n,i=this.children;for(t=0,n=e.length;n>t;t++)e[t].render(this.root,i[t]||u);for(t=n;i.length>t;t++)i[t].remove();this.children=e}},e.dom={html:a,text:l,element:s,Tree:c}}(window.kendo),function(e,t){function n(e){var t=Math.floor(e/26)-1;return(t>=0?n(t):"")+String.fromCharCode(65+e%26)}function i(e,t){return n(t)+(e+1)}function r(e,t){return n(t)+"$"+(e+1)}function o(e){return((e.freezePane||{}).rowSplit||1)-1}function a(e){return 6>e.length&&(e=e.replace(/(\w)/g,function(e,t){return t+t})),8>(e=e.substring(1).toUpperCase()).length&&(e="FF"+e),e}var s=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'),l=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'),c=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'),u=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<sheet name="${sheets[idx].options.title}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets># if (definedNames.length) { #<definedNames> # for (var di = 0; di < definedNames.length; di++) { #<definedName name="_xlnm._FilterDatabase" hidden="1" localSheetId="${definedNames[di].localSheetId}">${definedNames[di].name}!$${definedNames[di].from}:$${definedNames[di].to}</definedName> # } #</definedNames># } #<calcPr calcId="145621" /></workbook>'),d=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView #if(index==0) {# tabSelected="1" #}# workbookViewId="0"># if (freezePane) { #<pane state="frozen"# if (freezePane.colSplit) { # xSplit="${freezePane.colSplit}"# } ## if (freezePane.rowSplit) { # ySplit="${freezePane.rowSplit}"# } # topLeftCell="${String.fromCharCode(65 + (freezePane.colSplit || 0))}${(freezePane.rowSplit || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25" /># if (columns) { #<cols># for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## if (column.width) { #<col min="${ci+1}" max="${ci+1}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="${(((column.width)/7)*100+0.5)/100}" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; #<row r="#=ri + 1#"># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="#=cell.ref#"# if (cell.style) { # s="#=cell.style#" # } ## if (cell.type) { # t="#=cell.type#"# } #># if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (filter) { #<autoFilter ref="${filter.from}:${filter.to}"/># } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'),h=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'),p=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'),f=t.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.fontName) { #<name val="${font.fontName}" /># } else { #<name val="Calibri" /><scheme val="minor" /># } #<family val="2" /></font># } #</fonts><fills count="${fills.length+1}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfid="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.hAlign || style.vAlign || style.wrap) { # applyAlignment="1"# } #># if (style.hAlign || style.vAlign || style.wrap) { #<alignment# if (style.hAlign) { # horizontal="${style.hAlign}"# } ## if (style.vAlign) { # vertical="${style.vAlign}"# } ## if (style.wrap) { # wrapText="1"# } #/># } #</xf># } #</cellXfs><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'),g=t.timezone.remove(new Date(1900,0,0),"Etc/UTC"),m=t.Class.extend({init:function(e,t,n){this.options=e,this._strings=t,this._styles=n,this._mergeCells=[]},toXML:function(e){var t,n,r=this.options.rows||[],a=this.options.filter,s={};for(this._maxCellIndex=0,t=[],n=0;r.length>n;n++)t.push(this._row(r,s,r[n],n));return d({freezePane:this.options.freezePane,columns:this.options.columns,data:t,index:e,mergeCells:this._mergeCells,filter:a?{from:i(o(this.options),a.from),to:i(o(this.options),a.to)}:null})},_row:function(e,t,n,r){var o,a,s,l,c,u;for(this._cellIndex&&this._cellIndex>this._maxCellIndex&&(this._maxCellIndex=this._cellIndex),this._cellIndex=0,a=[],l=0,c=(s=n.cells).length;c>l;l++)(o=this._cell(s[l],t,r))&&a.push.apply(a,o);for(;this._maxCellIndex>this._cellIndex;)(u=t[this._cellIndex])&&(u.rowSpan-=1),a.push({ref:i(r,this._cellIndex)}),this._cellIndex++;return{data:a}},_lookupString:function(e){var t="$"+e,n=this._strings.indexes[t];return void 0!==n?e=n:(e=this._strings.indexes[t]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,e},_lookupStyle:function(n){var i,r=t.stringify(n);return"{}"==r?0:(0>(i=e.inArray(r,this._styles))&&(i=this._styles.push(r)-1),i+1)},_cell:function(e,n,r){var o,a,s,l,c,u,d,h,p,f,m;if(e){for(o=e.value,a={bold:e.bold,color:e.color,background:e.background,italic:e.italic,underline:e.underline,fontName:e.fontName,fontSize:e.fontSize,format:e.format,hAlign:e.hAlign,vAlign:e.vAlign,wrap:e.wrap},(s=(this.options.columns||[])[this._cellIndex])&&s.autoWidth&&(s.width=Math.max(s.width||0,(""+o).length)),"string"==(l=typeof o)?(o=this._lookupString(o),l="s"):"number"===l?l="n":"boolean"===l?(l="b",o=+o):o&&o.getTime?(l=null,o=(t.timezone.remove(o,"Etc/UTC")-g)/t.date.MS_PER_DAY+1,a.format||(a.format="mm-dd-yy")):(l=null,o=""),a=this._lookupStyle(a),c=[],h=n[this._cellIndex]||{};h.rowSpan>1;){for(h.rowSpan-=1,u=h.colSpan;u>0;)c.push({ref:i(r,this._cellIndex)}),u--,this._cellIndex++;h=n[this._cellIndex]||{}}if(d=i(r,this._cellIndex),c.push({value:o,type:l,style:a,ref:d}),p=e.colSpan||1,f=e.rowSpan||1,p>1||f>1){for(f>1&&(n[this._cellIndex]={colSpan:p,rowSpan:f}),m=1;p>m;m++)this._cellIndex++,c.push({ref:i(r,this._cellIndex)});this._mergeCells.push(d+":"+i(r+f-1,this._cellIndex))}return this._cellIndex++,c}this._cellIndex++}}),v={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70},_=t.Class.extend({init:function(t){this.options=t||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._sheets=e.map(this.options.sheets||[],e.proxy(function(e){return new m(e,this._strings,this._styles)},this))},toDataURL:function(){var n,i,d,g,m,_,y,b,w,k,x;if("undefined"==typeof JSZip)throw Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.");for((i=(n=new JSZip).folder("docProps")).file("core.xml",s({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()})),d=this._sheets.length,i.file("app.xml",l({sheets:this._sheets})),n.folder("_rels").file(".rels",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>'),(g=n.folder("xl")).folder("_rels").file("workbook.xml.rels",h({count:d})),g.file("workbook.xml",u({sheets:this._sheets,definedNames:e.map(this._sheets,function(e,t){var n=e.options,i=n.filter;return i?{localSheetId:t,name:n.title||"Sheet"+(t+1),from:r(o(n),i.from),to:r(o(n),i.to)}:void 0})})),m=g.folder("worksheets"),new Date,_=0;d>_;_++)m.file(t.format("sheet{0}.xml",_+1),this._sheets[_].toXML(_));return y=e.map(this._styles,e.parseJSON),b=function(e){return e.underline||e.bold||e.italic||e.color||e.fontName||e.fontSize},w=e.map(y,function(e){return e.color&&(e.color=a(e.color)),b(e)?e:void 0}),k=e.map(y,function(e){return e.format&&void 0===v[e.format]?e:void 0}),x=e.map(y,function(e){return e.background?(e.background=a(e.background),e):void 0}),g.file("styles.xml",f({fonts:w,fills:x,formats:k,styles:e.map(y,function(t){var n={};return b(t)&&(n.fontId=e.inArray(t,w)+1),t.background&&(n.fillId=e.inArray(t,x)+2),n.hAlign=t.hAlign,n.vAlign=t.vAlign,n.wrap=t.wrap,t.format&&(n.numFmtId=void 0!==v[t.format]?v[t.format]:165+e.inArray(t,k)),n})})),g.file("sharedStrings.xml",p(this._strings)),n.file("[Content_Types].xml",c({count:d})),"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+n.generate({compression:"DEFLATE"})}});t.ooxml={Workbook:_,Worksheet:m}}(kendo.jQuery,kendo),function(e,t){t.ExcelExporter=t.Class.extend({init:function(n){var i,r,o;n.columns=this._trimColumns(n.columns||[]),this.allColumns=e.map(this._leafColumns(n.columns||[]),this._prepareColumn),this.columns=e.grep(this.allColumns,function(e){return!e.hidden}),this.options=n,(i=n.dataSource)instanceof t.data.DataSource?(this.dataSource=new i.constructor(e.extend({},i.options,{page:n.allPages?0:i.page(),filter:i.filter(),pageSize:n.allPages?i.total():i.pageSize(),sort:i.sort(),group:i.group(),aggregate:i.aggregate()})),(r=i.data()).length>0&&(this.dataSource._data=r,o=this.dataSource.transport,i._isServerGrouped()&&o.options.data&&(o.options.data=null))):this.dataSource=t.data.DataSource.create(i)},_trimColumns:function(t){var n=this;return e.grep(t,function(e){var t=!!e.field;return!t&&e.columns&&(t=n._trimColumns(e.columns).length>0),t})},_leafColumns:function(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(this._leafColumns(e[t].columns)):n.push(e[t]);return n},workbook:function(){return e.Deferred(e.proxy(function(t){this.dataSource.fetch().then(e.proxy(function(){var e={sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]};t.resolve(e,this.dataSource.view())},this))},this)).promise()},_prepareColumn:function(n){var i,r;if(n.field)return i=function(e){return e.get(n.field)},r=null,n.values&&(r={},e.each(n.values,function(){r[this.value]=this.text}),i=function(e){return r[e.get(n.field)]}),e.extend({},n,{value:i,values:r,groupHeaderTemplate:t.template(n.groupHeaderTemplate||"${title}: ${value}"),groupFooterTemplate:n.groupFooterTemplate?t.template(n.groupFooterTemplate):null,footerTemplate:n.footerTemplate?t.template(n.footerTemplate):null})},_filter:function(){if(!this.options.filterable)return null;var e=this._depth();return{from:e,to:e+this.columns.length-1}},_dataRow:function(t,n,i){var r,o,a,s,l,c,u,d,h,p;for(this._hierarchical()&&(n=this.dataSource.level(t)+1),r=[],o=0;n>o;o++)r[o]={background:"#dfdfdf",color:"#333"};if(i&&t.items)return s=(a=e.grep(this.allColumns,function(e){return e.field==t.field})[0])&&a.title?a.title:t.field,l=a?a.groupHeaderTemplate:null,c=s+": "+t.value,u=e.extend({title:s,field:t.field,value:a&&a.values?a.values[t.value]:t.value,aggregates:t.aggregates},t.aggregates[t.field]),l&&(c=l(u)),r.push({value:c,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+i-n}),(d=this._dataRows(t.items,n+1)).unshift({type:"group-header",cells:r}),d.concat(this._footer(t));for(h=[],p=0;this.columns.length>p;p++)h[p]=this._cell(t,this.columns[p]);return this._hierarchical()&&(h[0].colSpan=i-n+1),[{type:"data",cells:r.concat(h)}]},_dataRows:function(e,t){var n,i=this._depth(),r=[];for(n=0;e.length>n;n++)r.push.apply(r,this._dataRow(e[n],t,i));return r},_footer:function(t){var n=[],i=!1,r=e.map(this.columns,e.proxy(function(n){return n.groupFooterTemplate?(i=!0,{background:"#dfdfdf",color:"#333",value:n.groupFooterTemplate(e.extend({},this.dataSource.aggregates(),t.aggregates,t.aggregates[n.field]))}):{background:"#dfdfdf",color:"#333"}},this));return i&&n.push({type:"group-footer",cells:e.map(Array(this.dataSource.group().length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(r)}),n},_isColumnVisible:function(e){return this._visibleColumns([e]).length>0&&(e.field||e.columns)},_visibleColumns:function(t){var n=this;return e.grep(t,function(e){var t=!e.hidden;return t&&e.columns&&(t=n._visibleColumns(e.columns).length>0),t})},_headerRow:function(t,n){var i=e.map(t.cells,function(e){return{background:"#7a7a7a",color:"#fff",value:e.title,colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1}});return this._hierarchical()&&(i[0].colSpan=this._depth()+1),{type:"header",cells:e.map(Array(n.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(i)}},_prependHeaderRows:function(e){var t,n=this.dataSource.group(),i=[{rowSpan:1,cells:[],index:0}];for(this._prepareHeaderRows(i,this.options.columns),t=i.length-1;t>=0;t--)e.unshift(this._headerRow(i[t],n))},_prepareHeaderRows:function(e,t,n,i){var r,o,a,s=i||e[e.length-1],l=e[s.index+1],c=0;for(a=0;t.length>a;a++)r=t[a],this._isColumnVisible(r)&&(o={title:r.title||r.field,colSpan:0},s.cells.push(o),r.columns&&r.columns.length&&(l||(l={rowSpan:0,cells:[],index:e.length},e.push(l)),o.colSpan=this._trimColumns(this._visibleColumns(r.columns)).length,this._prepareHeaderRows(e,r.columns,o,l),c+=o.colSpan-1,s.rowSpan=e.length-s.index));n&&(n.colSpan+=c)},_rows:function(){var t,n,i=this.dataSource.group(),r=this._dataRows(this.dataSource.view(),0);return this.columns.length&&(this._prependHeaderRows(r),t=!1,n=e.map(this.columns,e.proxy(function(n){if(n.footerTemplate){t=!0;var i=this.dataSource.aggregates();return{background:"#dfdfdf",color:"#333",value:n.footerTemplate(e.extend({},i,i[n.field]))}}return{background:"#dfdfdf",color:"#333"}},this)),t&&r.push({type:"footer",cells:e.map(Array(i.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(n)})),r},_headerDepth:function(e){var t,n,i=0;for(t=0;e.length>t;t++)e[t].columns&&(n=this._headerDepth(e[t].columns))>i&&(i=n);return 1+i},_freezePane:function(){var t=this._visibleColumns(this.options.columns||[]),n=this._visibleColumns(this._trimColumns(this._leafColumns(e.grep(t,function(e){return e.locked})))).length;return{rowSplit:this._headerDepth(t),colSplit:n?n+this.dataSource.group().length:0}},_cell:function(e,t){return{value:t.value(e)}},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var e,t,n,i=this.dataSource,r=0;if(this._hierarchical()){for(e=i.view(),t=0;e.length>t;t++)(n=i.level(e[t]))>r&&(r=n);r++}else r=i.group().length;return r},_columns:function(){var t=this._depth();return e.map(Array(t),function(){return{width:20}}).concat(e.map(this.columns,function(e){return{width:parseInt(e.width,10),autoWidth:!e.width}}))}}),t.ExcelMixin={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:!1,filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var n=this.options.excel||{};new t.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:n.allPages,filterable:n.filterable,hierarchy:n.hierarchy}).workbook().then(e.proxy(function(e,i){if(!this.trigger("excelExport",{workbook:e,data:i})){var r=new t.ooxml.Workbook(e);t.saveAs({dataURI:r.toDataURL(),fileName:e.fileName||n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy})}},this))}}}(kendo.jQuery,kendo),function(e){var t=kendo.data.RemoteTransport.extend({init:function(e){var t,n=e&&e.signalr?e.signalr:{},i=n.promise;if(!i)throw Error('The "promise" option must be set.');if("function"!=typeof i.done||"function"!=typeof i.fail)throw Error('The "promise" option must be a Promise.');if(this.promise=i,!(t=n.hub))throw Error('The "hub" option must be set.');if("function"!=typeof t.on||"function"!=typeof t.invoke)throw Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=t,kendo.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};t.create&&this.hub.on(t.create,e.pushCreate),t.update&&this.hub.on(t.update,e.pushUpdate),t.destroy&&this.hub.on(t.destroy,e.pushDestroy)},_crud:function(t,n){var i,r,o=this.hub,a=this.options.signalr.server;if(!a||!a[n])throw Error(kendo.format('The "server.{0}" option must be set.',n));i=[a[n]],r=this.parameterMap(t.data,n),e.isEmptyObject(r)||i.push(r),this.promise.done(function(){o.invoke.apply(o,i).done(t.success).fail(t.error)})},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}});e.extend(!0,kendo.data,{transports:{signalr:t}})}(window.kendo.jQuery),function(e,t,n){function i(e,r){var a,u;if(null==e||"none"==e)return null;if(e instanceof s)return e;if(e=e.toLowerCase(),a=o.exec(e))return(e="transparent"==a[1]?new l(1,1,1,0):i(d.namedColors[a[1]],r)).match=[a[1]],e;if((a=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(e))?u=new c(n(a[1],16),n(a[2],16),n(a[3],16),1):(a=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(e))?u=new c(n(a[1]+a[1],16),n(a[2]+a[2],16),n(a[3]+a[3],16),1):(a=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(e))?u=new c(n(a[1],10),n(a[2],10),n(a[3],10),1):(a=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(e))?u=new c(n(a[1],10),n(a[2],10),n(a[3],10),t(a[4])):(a=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(e))?u=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,1):(a=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(e))&&(u=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,t(a[4]))),u)u.match=a;else if(!r)throw Error("Cannot parse color: "+e);return u}function r(e,t,n){for(n||(n="0"),e=e.toString(16);t>e.length;)e="0"+e;return e}var o,a,s,l,c,u,d=function(e){var t,n,i,r,o,a=this,s=d.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,(i=t.exec(e))&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)};for(a in d.prototype={toHex:function(){var e=this,t=e.padDigit,n=e.r.toString(16),i=e.g.toString(16),r=e.b.toString(16);return"#"+t(n)+t(i)+t(r)},resolveColor:function(e){return"#"==(e=e||"black").charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),d.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=this,n=Math.round;return t.r=n(t.normalizeByte(t.r*e)),t.g=n(t.normalizeByte(t.g*e)),t.b=n(t.normalizeByte(t.b*e)),t},percBrightness:function(){var e=this;return Math.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}},d.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[n(e[1],10),n(e[2],10),n(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[n(e[1],16),n(e[2],16),n(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[n(e[1]+e[1],16),n(e[2]+e[2],16),n(e[3]+e[3],16)]}}],d.namedColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},o=["transparent"],d.namedColors)d.namedColors.hasOwnProperty(a)&&o.push(a);o=RegExp("^("+o.join("|")+")(\\W|$)","i"),s=kendo.Class.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+t((+this.a).toFixed(3))+")"},toDisplay:function(){return kendo.support.browser.msie&&9>kendo.support.browser.version?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!==e&&this.toCssRgba()==i(e).toCssRgba()},diff:function(e){if(null==e)return NaN;var t=this.toBytes();return e=e.toBytes(),Math.sqrt(Math.pow(.3*(t.r-e.r),2)+Math.pow(.59*(t.g-e.g),2)+Math.pow(.11*(t.b-e.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new c(e.r,e.g,e.b,e.a)),e}}),l=s.extend({init:function(e,t,n,i){this.r=e,this.g=t,this.b=n,this.a=i},toHSV:function(){var e,t,n=this.r,i=this.g,r=this.b,o=Math.min(n,i,r),a=Math.max(n,i,r),s=a,l=a-o;return 0===l?new u(0,0,s,this.a):(0!==a?(t=l/a,e=n==a?(i-r)/l:i==a?2+(r-n)/l:4+(n-i)/l,0>(e*=60)&&(e+=360)):(t=0,e=-1),new u(e,t,s,this.a))},toBytes:function(){return new c(255*this.r,255*this.g,255*this.b,this.a)}}),c=l.extend({init:function(e,t,n,i){this.r=Math.round(e),this.g=Math.round(t),this.b=Math.round(n),this.a=i},toRGB:function(){return new l(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHex:function(){return r(this.r,2)+r(this.g,2)+r(this.b,2)},toBytes:function(){return this}}),u=s.extend({init:function(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i},toRGB:function(){var e,t,n,i,r,o,a,s,c=this.h,u=this.s,d=this.v;if(0===u)t=n=i=d;else switch(c/=60,e=Math.floor(c),r=c-e,o=d*(1-u),a=d*(1-u*r),s=d*(1-u*(1-r)),e){case 0:t=d,n=s,i=o;break;case 1:t=a,n=d,i=o;break;case 2:t=o,n=d,i=s;break;case 3:t=o,n=a,i=d;break;case 4:t=s,n=o,i=d;break;default:t=d,n=o,i=a}return new l(t,n,i,this.a)},toBytes:function(){return this.toRGB().toBytes()}}),d.fromBytes=function(e,t,n,i){return new c(e,t,n,null!=i?i:1)},d.fromRGB=function(e,t,n,i){return new l(e,t,n,null!=i?i:1)},d.fromHSV=function(e,t,n,i){return new u(e,t,n,null!=i?i:1)},kendo.Color=d,kendo.parseColor=i}(window.kendo.jQuery,parseFloat,parseInt),function(e){function t(e){return typeof e!==p}function n(e){var t,n=[];for(t in e)n.push(t+e[t]);return n.sort().join("")}function i(e){var t,n=2166136261;for(t=0;e.length>t;++t)n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24),n^=e.charCodeAt(t);return n>>>0}function r(e){var t,n=e.length,i=d,r=h;for(t=0;n>t;t++)r=s.max(r,e[t]),i=s.min(i,e[t]);return{min:i,max:r}}function o(e){var t,n,i,r=d,o=h;for(t=0,n=e.length;n>t;t++)null!==(i=e[t])&&isFinite(i)&&(r=s.min(r,i),o=s.max(o,i));return{min:r===d?void 0:r,max:o===h?void 0:o}}function a(e,n){return t(n)&&null!==n?" "+e+"='"+n+"' ":""}var s=Math,l=window.kendo,c=l.deepExtend,u=s.PI/180,d=Number.MAX_VALUE,h=-Number.MAX_VALUE,p="undefined",f=Date.now;f||(f=function(){return(new Date).getTime()}),c(l,{util:{MAX_NUM:d,MIN_NUM:h,append:function(e,t){return e.push.apply(e,t),e},arrayLimits:r,arrayMin:function(e){return r(e).min},arrayMax:function(e){return r(e).max},defined:t,deg:function(e){return e/u},hashKey:i,hashObject:function(e){return i(n(e))},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isTransparent:function(e){return""===e||null===e||"none"===e||"transparent"===e||!t(e)},last:function(e){return e?e[e.length-1]:void 0},limitValue:function(e,t,n){return s.max(s.min(e,n),t)},now:f,objectKey:n,round:function(e,t){var n=function(e){return e?s.pow(10,e):1}(t);return s.round(e*n)/n},rad:function(e){return e*u},renderAttr:a,renderAllAttr:function(e){var t,n="";for(t=0;e.length>t;t++)n+=a(e[t][0],e[t][1]);return n},renderPos:function(e){var t,n,i=[];if(e)for(t=l.toHyphens(e).split("-"),n=0;t.length>n;n++)i.push("k-pos-"+t[n]);return i.join(" ")},renderSize:function(e){return"string"!=typeof e&&(e+="px"),e},renderStyle:function(e){var n,i,r="";for(n=0;e.length>n;n++)t(i=e[n][1])&&(r+=e[n][0]+":"+i+";");return""!==r?r:void 0},renderTemplate:function(e){return l.template(e,{useWithBlock:!1,paramName:"d"})},sparseArrayLimits:o,sparseArrayMin:function(e){return o(e).min},sparseArrayMax:function(e){return o(e).max},sqr:function(e){return e*e},valueOrDefault:function(e,n){return t(e)?e:n}}}),l.dataviz.util=l.util}(window.kendo.jQuery),function(){function e(e){var t,n,r="";for(t=0;e.length>t;t++)128>(n=e.charCodeAt(t))?r+=i(n):2048>n?(r+=i(192|n>>>6),r+=i(128|63&n)):65536>n&&(r+=i(224|n>>>12),r+=i(128|n>>>6&63),r+=i(128|63&n));return r}var t=window.kendo,n=t.deepExtend,i=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n(t.util,{encodeBase64:function(t){var n,i,o,a,s,l,c,u="",d=0;for(t=e(t);t.length>d;)a=(n=t.charCodeAt(d++))>>2,s=(3&n)<<4|(i=t.charCodeAt(d++))>>4,l=(15&i)<<2|(o=t.charCodeAt(d++))>>6,c=63&o,isNaN(i)?l=c=64:isNaN(o)&&(c=64),u=u+r.charAt(a)+r.charAt(s)+r.charAt(l)+r.charAt(c);return u},encodeUTF8:e})}(window.kendo.jQuery),function(e){var t=Math,n=window.kendo,i=n.deepExtend,r=e.inArray,o={observers:function(){return this._observers=this._observers||[]},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),n=r(e,t);return-1!=n&&t.splice(n,1),this},trigger:function(e,t){var n,i,r=this._observers;if(r&&!this._suspended)for(i=0;r.length>i;i++)(n=r[i])[e]&&n[e](t);return this},optionsChange:function(e){this.trigger("optionsChange",e)},geometryChange:function(e){this.trigger("geometryChange",e)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}};i(n,{mixins:{ObserversMixin:o}})}(window.kendo.jQuery),function(e){function t(e){return null===e?null:e instanceof g?e:new g(e)}function n(e){return e&&_.isFunction(e.matrix)?e.matrix():e}function i(e,t,n,i){var r=0,o=0;return i&&(r=m.atan2(i.c*n,i.a*t),0!==i.b&&(o=m.atan2(i.d*n,i.b*t))),{x:r,y:o}}function r(e,t){for(;t>e;)e+=90;return e}function o(e,t){var n,i,r;for(n=0;t.length>n;n++)e["set"+(r=(i=t[n]).charAt(0).toUpperCase()+i.substring(1,i.length))]=a(i),e["get"+r]=s(i)}function a(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}function s(e){return function(){return this[e]}}function l(e,t,n,i,r,o){var a=S((r-e)/n,3),s=S((o-t)/i,3);return S(T(m.atan2(s,a)))}function c(e,t,n,i,r,o,a,s){var c,u,d,h,p,f,g,_,y,b,w,k,x,C,T,S,D,A;if(t!==i)y=n-e,b=i-t,w=v(r,2),C=(x=((k=v(o,2))*y*(e+n)+w*b*(t+i))/(2*w*b))-i,p=1/w+v(T=-y*k/(w*b),2)/k,f=2*(T*C/k-n/w),g=v(n,2)/w+v(C,2)/k-1,u=x+T*(c=(-f-(_=m.sqrt(v(f,2)-4*p*g)))/(2*p)),h=x+T*(d=(-f+_)/(2*p));else{if(e===n)return!1;f=-2*i,g=v((n-e)*o/(2*r),2)+v(i,2)-v(o,2),c=d=(e+n)/2,u=(-f-(_=m.sqrt(v(f,2)-4*g)))/2,h=(-f+_)/2}return A=function(e,t,n){e>t&&(t+=360);var i=m.abs(t-e);return n||(i=360-i),i}(S=l(c,u,r,o,e,t),D=l(c,u,r,o,n,i),s),(a&&180>=A||!a&&A>180)&&(S=l(c=d,u=h,r,o,e,t),D=l(c,u,r,o,n,i)),{center:new E(c,u),startAngle:S,endAngle:D}}var u,d,h,p,f,g,m=Math,v=m.pow,_=window.kendo,y=_.Class,b=_.deepExtend,w=_.mixins.ObserversMixin,k=_.util,x=k.defined,C=k.rad,T=k.deg,S=k.round,D=m.PI/2,A=k.MIN_NUM,M=k.MAX_NUM,E=y.extend({init:function(e,t){this.x=e||0,this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new E(this.x,this.y)},rotate:function(e,n){return this.transform(t().rotate(e,n))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return x(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var t=n(e),i=this.x,r=this.y;return this.x=t.a*i+t.c*r+t.e,this.y=t.b*i+t.d*r+t.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return m.sqrt(t*t+n*n)},round:function(e){return this.x=S(this.x,e),this.y=S(this.y,e),this.geometryChange(),this},toArray:function(e){var t=x(e);return[t?S(this.x,e):this.x,t?S(this.y,e):this.y]}});o(E.fn,["x","y"]),b(E.fn,w),E.fn.toString=function(e,t){var n=this.x,i=this.y;return x(e)&&(n=S(n,e),i=S(i,e)),n+(t=t||" ")+i},E.create=function(e,t){return x(e)?e instanceof E?e:1===arguments.length&&2===e.length?new E(e[0],e[1]):new E(e,t):void 0},E.min=function(){var e,t,n=k.MAX_NUM,i=k.MAX_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=m.min(t.x,n),i=m.min(t.y,i);return new E(n,i)},E.max=function(){var e,t,n=k.MIN_NUM,i=k.MIN_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=m.max(t.x,n),i=m.max(t.y,i);return new E(n,i)},E.minPoint=function(){return new E(A,A)},E.maxPoint=function(){return new E(M,M)},E.ZERO=new E(0,0),o((u=y.extend({init:function(e,t){this.width=e||0,this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new u(this.width,this.height)},toArray:function(e){var t=x(e);return[t?S(this.width,e):this.width,t?S(this.height,e):this.height]}})).fn,["width","height"]),b(u.fn,w),u.create=function(e,t){return x(e)?e instanceof u?e:1===arguments.length&&2===e.length?new u(e[0],e[1]):new u(e,t):void 0},u.ZERO=new u(0,0),b((d=y.extend({init:function(e,t){this.setOrigin(e||new E),this.setSize(t||new u)},clone:function(){return new d(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this._observerField("origin",E.create(e)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this._observerField("size",u.create(e)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),n=this.topRight().transformCopy(e),i=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return d.fromPoints(t,n,i,r)},transformCopy:function(e){return d.fromPoints(this.topLeft().transform(e),this.bottomRight().transform(e))}})).fn,w),d.fromPoints=function(){var e=E.min.apply(this,arguments),t=E.max.apply(this,arguments),n=new u(t.x-e.x,t.y-e.y);return new d(e,n)},d.union=function(e,t){return d.fromPoints(E.min(e.topLeft(),t.topLeft()),E.max(e.bottomRight(),t.bottomRight()))},d.intersect=function(e,t){return e={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y},(t={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y}).right>=e.left&&e.right>=t.left&&t.bottom>=e.top&&e.bottom>=t.top?d.fromPoints(new E(m.max(e.left,t.left),m.max(e.top,t.top)),new E(m.min(e.right,t.right),m.min(e.bottom,t.bottom))):void 0},h=y.extend({init:function(e,t){this.setCenter(e||new E),this.setRadius(t||0)},setCenter:function(e){return this._observerField("center",E.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new h(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(C(e))},bbox:function(e){var t,n,r,o,a=E.maxPoint(),s=E.minPoint(),l=i(this.center,this.radius,this.radius,e);for(t=0;4>t;t++)n=this._pointAt(l.x+t*D).transformCopy(e),r=this._pointAt(l.y+t*D).transformCopy(e),o=new E(n.x,r.y),a=E.min(a,o),s=E.max(s,o);return d.fromPoints(a,s)},_pointAt:function(e){var t=this.center,n=this.radius;return new E(t.x-n*m.cos(e),t.y-n*m.sin(e))}}),o(h.fn,["radius"]),b(h.fn,w),o((p=y.extend({init:function(e,t){this.setCenter(e||new E),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},clone:function(){return new p(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){return this._observerField("center",E.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(e){var t=this.center,n=C(e);return new E(t.x+this.radiusX*m.cos(n),t.y+this.radiusY*m.sin(n))},curvePoints:function(){var e,t,n,i=this.startAngle,r=this.anticlockwise?-1:1,o=[this.pointAt(i)],a=i,s=this._arcInterval(),l=s.endAngle-s.startAngle,c=m.ceil(l/this.MAX_INTERVAL),u=l/c;for(e=1;c>=e;e++)t=a+r*u,n=this._intervalCurvePoints(a,t),o.push(n.cp1,n.cp2,n.p2),a=t;return o},bbox:function(e){for(var t,n,o=this,a=o._arcInterval(),s=a.startAngle,l=a.endAngle,c=i(this.center,this.radiusX,this.radiusY,e),u=T(c.x),h=T(c.y),p=o.pointAt(s).transformCopy(e),f=o.pointAt(l).transformCopy(e),g=E.min(p,f),m=E.max(p,f),v=r(u,s),_=r(h,s);l>v||l>_;)l>v&&(t=o.pointAt(v).transformCopy(e),v+=90),l>_&&(n=o.pointAt(_).transformCopy(e),_+=90),p=new E(t.x,n.y),g=E.min(g,p),m=E.max(m,p);return d.fromPoints(g,m)},_arcInterval:function(){var e,t=this.startAngle,n=this.endAngle,i=this.anticlockwise;return i&&(e=t,t=n,n=e),(t>n||i&&t===n)&&(n+=360),{startAngle:t,endAngle:n}},_intervalCurvePoints:function(e,t){var n=this,i=n.pointAt(e),r=n.pointAt(t),o=n._derivativeAt(e),a=n._derivativeAt(t),s=(C(t)-C(e))/3;return{p1:i,cp1:new E(i.x+s*o.x,i.y+s*o.y),cp2:new E(r.x-s*a.x,r.y-s*a.y),p2:r}},_derivativeAt:function(e){var t=C(e);return new E(-this.radiusX*m.sin(t),this.radiusY*m.cos(t))}})).fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),b(p.fn,w),p.fromPoints=function(e,t,n,i,r,o){var a=c(e.x,e.y,t.x,t.y,n,i,r,o);return new p(a.center,{startAngle:a.startAngle,endAngle:a.endAngle,radiusX:n,radiusY:i,anticlockwise:0===o})},(f=y.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},multiplyCopy:function(e){return new f(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},invert:function(){var e=this.a,t=this.b,n=this.c,i=this.d,r=this.e,o=this.f,a=e*i-t*n;return 0===a?null:new f(i/a,-t/a,-n/a,e/a,(n*o-i*r)/a,(t*r-e*o)/a)},clone:function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return!!e&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f},round:function(e){return this.a=S(this.a,e),this.b=S(this.b,e),this.c=S(this.c,e),this.d=S(this.d,e),this.e=S(this.e,e),this.f=S(this.f,e),this},toArray:function(e){var t,n=[this.a,this.b,this.c,this.d,this.e,this.f];if(x(e))for(t=0;n.length>t;t++)n[t]=S(n[t],e);return n}})).fn.toString=function(e,t){return this.toArray(e).join(t||",")},f.translate=function(e,t){return new f(1,0,0,1,e,t)},f.unit=function(){return new f(1,0,0,1,0,0)},f.rotate=function(e,t,n){var i=new f;return i.a=m.cos(C(e)),i.b=m.sin(C(e)),i.c=-i.b,i.d=i.a,i.e=t-t*i.a+n*i.b||0,i.f=n-n*i.a-t*i.b||0,i},f.scale=function(e,t){return new f(e,0,0,t,0,0)},f.IDENTITY=f.unit(),b((g=y.extend({init:function(e){this._matrix=e||f.unit()},clone:function(){return new g(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(f.translate(e,t)),this._optionsChange(),this},scale:function(e,t,n){return x(t)||(t=e),n&&(n=E.create(n),this._matrix=this._matrix.multiplyCopy(f.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(f.scale(e,t)),n&&(this._matrix=this._matrix.multiplyCopy(f.translate(-n.x,-n.y))),this._optionsChange(),this},rotate:function(e,t){return t=E.create(t)||E.ZERO,this._matrix=this._matrix.multiplyCopy(f.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var t=n(e);return this._matrix=this._matrix.multiplyCopy(t),this._optionsChange(),this},matrix:function(){return this._matrix}})).fn,w),b(_,{geometry:{Arc:p,Circle:h,Matrix:f,Point:E,Rect:d,Size:u,Transformation:g,transform:t,toMatrix:n}}),_.dataviz.geometry=_.geometry}(window.kendo.jQuery),function(e){var t,n,i,r=e.noop,o=Object.prototype.toString,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.deepExtend,u=a.util.defined,d=l.extend({init:function(e,t){this.options=c({},this.options,t),l.fn.init.call(this,e,this.options),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._visual=new a.drawing.Group,this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height)},options:{name:"Surface"},events:["click","mouseenter","mouseleave","resize"],draw:function(e){this._visual.children.push(e)},clear:function(){this._visual.children=[]},destroy:function(){this._visual=null,l.fn.destroy.call(this)},exportVisual:function(){return this._visual},getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height}),this._size=e,this._resize()},eventTarget:function(t){for(var n,i=e(t.touch?t.touch.initialTouch:t.target);!n&&i.length>0&&(n=i[0]._kendoNode,!i.is(this.element)&&0!==i.length);)i=i.parent();return n?n.srcElement:void 0},_resize:r,_handler:function(e){var t=this;return function(n){var i=t.eventTarget(n);i&&t.trigger(e,{element:i,originalEvent:n})}}});a.ui.plugin(d),d.create=function(e,t){return i.current.create(e,t)},t=s.extend({init:function(e){this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())},destroy:function(){var e,t;for(this.srcElement&&this.srcElement.removeObserver(this),e=this.childNodes,t=0;e.length>t;t++)this.childNodes[t].destroy();this.parent=null},load:r,observe:function(){this.srcElement&&this.srcElement.addObserver(this)},append:function(e){this.childNodes.push(e),e.parent=this},insertAt:function(e,t){this.childNodes.splice(t,0,e),e.parent=this},remove:function(e,t){var n,i=e+t;for(n=e;i>n;n++)this.childNodes[n].removeSelf();this.childNodes.splice(e,t)},removeSelf:function(){this.clear(),this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),n=s.extend({init:function(e,t){var n,i;for(n in this.prefix=t||"",e)i=e[n],i=this._wrap(i,n),this[n]=i},get:function(e){return a.getter(e,!0)(this)},set:function(e,t){a.getter(e,!0)(this)!==t&&(this._set(e,this._wrap(t,e))||this.optionsChange({field:this.prefix+e,value:t}))},_set:function(e,t){var i,r,o,s=e.indexOf(".")>=0;if(s)for(i=e.split("."),r="";i.length>1;){if(r+=i.shift(),(o=a.getter(r,!0)(this))||((o=new n({},r+".")).addObserver(this),this[r]=o),o instanceof n)return o.set(i.join("."),t),s;r+="."}return this._clear(e),a.setter(e)(this,t),s},_clear:function(e){var t=a.getter(e,!0)(this);t&&t.removeObserver&&t.removeObserver(this)},_wrap:function(e,t){var i=o.call(e);return null!==e&&u(e)&&"[object Object]"===i&&(e instanceof n||e instanceof s||(e=new n(e,this.prefix+t+".")),e.addObserver(this)),e}}),c(n.fn,a.mixins.ObserversMixin),(i=function(){this._items=[]}).prototype={register:function(e,t,n){var i=this._items,r=i[0],o={name:e,type:t,order:n};!r||r.order>n?i.unshift(o):i.push(o)},create:function(e,t){var n,i,r=this._items,o=r[0];if(t&&t.type)for(n=t.type.toLowerCase(),i=0;r.length>i;i++)if(r[i].name===n){o=r[i];break}return o?new o.type(e,t):void a.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The Kendo UI scripts are not fully loaded")}},i.current=new i,c(a,{drawing:{DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Color:a.Color,BaseNode:t,OptionsStore:n,Surface:d,SurfaceFactory:i}}),a.dataviz.drawing=a.drawing}(window.kendo.jQuery),function(){var e=window.kendo,t=e.deepExtend,n=e.util.defined,i={extend:function(e){e.fill=this.fill,e.stroke=this.stroke},fill:function(e,t){var i,r=this.options;return n(e)?(e&&"gradient"!=e.nodeType?(i={color:e},n(t)&&(i.opacity=t),r.set("fill",i)):r.set("fill",e),this):r.get("fill")},stroke:function(e,t,i){return n(e)?(this.options.set("stroke.color",e),n(t)&&this.options.set("stroke.width",t),n(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")}};t(e.drawing,{mixins:{Paintable:i,Traversable:{extend:function(e,t){e.traverse=function(e){var n,i,r=this[t];for(n=0;r.length>n;n++)(i=r[n]).traverse?i.traverse(e):e(i);return this}}}}})}(window.kendo.jQuery),function(e){var t=document,n=window.kendo,i=n.Class,r=n.deepExtend,o=n.util,a=o.defined,s=i.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var n=this,i=n._map,r={key:e,value:t};i[e]=r,n._head?(n._tail.newer=r,r.older=n._tail,n._tail=r):n._head=n._tail=r,n._length>=n._size?(i[n._head.key]=null,n._head=n._head.newer,n._head.older=null):n._length++},get:function(e){var t=this,n=t._map[e];return n?(n===t._head&&n!==t._tail&&(t._head=n.newer,t._head.older=null),n!==t._tail&&(n.older&&(n.older.newer=n.newer,n.newer.older=n.older),n.older=t._tail,n.newer=null,t._tail.newer=n,t._tail=n),n.value):void 0}}),l=i.extend({init:function(){this._cache=new s(1e3)},measure:function(n,i){var r,s,l,c,u,d=o.objectKey(i),h=o.hashKey(n+d),p=this._cache.get(h);if(p)return p;for(c in r={width:0,height:0,baseline:0},s=this._measureBox,l=this._baselineMarker.cloneNode(!1),i)u=i[c],a(u)&&(s.style[c]=u);return e(s).text(n),s.appendChild(l),t.body.appendChild(s),(n+"").length&&(r.width=s.offsetWidth-1,r.height=s.offsetHeight,r.baseline=l.offsetTop+1),r.width>0&&r.height>0&&this._cache.put(h,r),s.parentNode.removeChild(s),r}});l.fn._baselineMarker=e("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: 1px; height: 1px;overflow: hidden;' />")[0],l.fn._measureBox=e("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space:nowrap !important;' />")[0],l.current=new l,r(n.drawing,{util:{TextMetrics:l,LRUCache:s,measureText:function(e,t){return l.current.measure(e,t)}}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i,r,o,a;for(r=0;e.length>r;r++)(o=e[r]).visible()&&(a=t?o.bbox(n):o.rawBBox())&&(i=i?z.union(i,a):a);return i}function n(e,t){var n,i,r,o;for(i=0;e.length>i;i++)(r=e[i]).visible()&&(o=r.clippedBBox(t))&&(n=n?z.union(n,o):o);return n}function i(e,t){e.origin.x-=t,e.origin.y-=t,e.size.width+=2*t,e.size.height+=2*t}function r(e,t){for(var n=0;t.length>n;n++)e[t[n]]=o(t[n])}function o(e){var t="_"+e;return function(e){return Y(e)?(this._observerField(t,e),this.geometryChange(),this):this[t]}}function a(e,t){for(var n=0;t.length>n;n++)e[t[n]]=s(t[n])}function s(e){var t="_"+e;return function(e){return Y(e)?(this._observerField(t,B.create(e)),this.geometryChange(),this):this[t]}}function l(e){return function(t){return Y(t)?(this.options.set(e,t),this):this.options.get(e)}}function c(){return"kdef"+oe++}function u(e,t,n,i,r){var o,a,s,l,c=[],u=function(e,t,n){var i,r,o,a,s=t.size[n],l=0,c=[],u=[],d=function(){u.push({element:i,bbox:o})};for(a=0;e.length>a;a++)i=e[a],(o=i.clippedBBox())&&(r=o.size[n],l+r>s?u.length?(c.push(u),u=[],d(),l=r):(d(),c.push(u),u=[],l=0):(d(),l+=r));return u.length&&c.push(u),c}(e,t,r),d=t.origin.clone();for(l=0;u.length>l;l++)for(o=(s=u[l])[0],d[i]=o.bbox.origin[i],g(d,o.bbox,o.element),o.bbox.origin[n]=d[n],h(s,n,i,r),c.push([]),a=0;s.length>a;a++)c[l].push(s[a].element);return c}function d(e){var t,n,i,r=[];for(i=0;e.length>i;i++)(n=(t=e[i]).clippedBBox())&&r.push({element:t,bbox:n});return r}function h(e,t,n,i){var r,o,a,s,l;if(e.length>1)for(r=e[0].bbox,o=new B,l=1;e.length>l;l++)a=e[l].element,s=e[l].bbox,o[t]=r.origin[t]+r.size[i],o[n]=s.origin[n],g(o,s,a),s.origin[t]=o[t],r=s}function p(e,t,n,i,r){var o,a,s;for(n=n||"start",s=0;e.length>s;s++)(o=e[s].clippedBBox())&&((a=o.origin.clone())[i]=f(o.size[r],t,n,i,r),g(a,o,e[s]))}function f(e,t,n,i,r){return n==ae?t.origin[i]:n==se?t.origin[i]+t.size[r]-e:t.origin[i]+(t.size[r]-e)/2}function g(e,t,n){!function(e,t,n){var i=n.transform()||F.transform(),r=i.matrix();r.e+=e,r.f+=t,n.transform(i)}(e.x-t.origin.x,e.y-t.origin.y,n)}var m,v,_,y,b,w,k,x,C,T,S,D,A,M,E,I,R=window.kendo,P=R.Class,L=R.deepExtend,F=R.geometry,B=F.Point,z=F.Rect,H=F.Size,N=F.Matrix,O=F.toMatrix,V=R.drawing,U=V.OptionsStore,W=Math,j=W.pow,q=R.util,G=q.append,$=q.arrayLimits,Y=q.defined,Q=q.last,X=q.valueOrDefault,K=R.mixins.ObserversMixin,Z=e.inArray,J=[].push,ee=[].pop,te=[].splice,ne=[].shift,ie=[].slice,re=[].unshift,oe=1,ae="start",se="end",le="horizontal",ce=P.extend({nodeType:"Element",init:function(e){this._initOptions(e)},_initOptions:function(e){var t,n;t=(e=e||{}).transform,n=e.clip,t&&(e.transform=F.transform(t)),n&&!n.id&&(n.id=c()),this.options=new U(e),this.options.addObserver(this)},transform:function(e){return Y(e)?void this.options.set("transform",F.transform(e)):this.options.get("transform")},parentTransform:function(){for(var e,t,n=this;n.parent;)(e=(n=n.parent).transform())&&(t=e.matrix().multiplyCopy(t||N.unit()));return t?F.transform(t):void 0},currentTransform:function(e){var t,n,i=this.transform(),r=O(i);return Y(e)||(e=this.parentTransform()),t=O(e),(n=r&&t?t.multiplyCopy(r):r||t)?F.transform(n):void 0},visible:function(e){return Y(e)?(this.options.set("visible",e),this):!1!==this.options.get("visible")},clip:function(e){var t=this.options;return Y(e)?(e&&!e.id&&(e.id=c()),t.set("clip",e),this):t.get("clip")},opacity:function(e){return Y(e)?(this.options.set("opacity",e),this):X(this.options.get("opacity"),1)},clippedBBox:function(e){var t,n=this._clippedBBox(e);return n?(t=this.clip())?z.intersect(n,t.bbox(e)):n:void 0},_clippedBBox:function(e){return this.bbox(e)}});L(ce.fn,K),L((m=P.extend({init:function(e){e=e||[],this.length=0,this._splice(0,e.length,e)},elements:function(e){return e?(this._splice(0,this.length,e),this._change(),this):this.slice(0)},push:function(){var e=arguments,t=J.apply(this,e);return this._add(e),t},slice:ie,pop:function(){var e=this.length,t=ee.apply(this);return e&&this._remove([t]),t},splice:function(e,t){var n=ie.call(arguments,2),i=this._splice(e,t,n);return this._change(),i},shift:function(){var e=this.length,t=ne.apply(this);return e&&this._remove([t]),t},unshift:function(){var e=arguments,t=re.apply(this,e);return this._add(e),t},indexOf:function(e){var t,n;for(t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},_splice:function(e,t,n){var i=te.apply(this,[e,t].concat(n));return this._clearObserver(i),this._setObserver(n),i},_add:function(e){this._setObserver(e),this._change()},_remove:function(e){this._clearObserver(e),this._change()},_setObserver:function(e){for(var t=0;e.length>t;t++)e[t].addObserver(this)},_clearObserver:function(e){for(var t=0;e.length>t;t++)e[t].removeObserver(this)},_change:function(){}})).fn,K),v=ce.extend({nodeType:"Group",init:function(e){ce.fn.init.call(this,e),this.children=[]},childrenChange:function(e,t,n){this.trigger("childrenChange",{action:e,items:t,index:n})},append:function(){return G(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},insertAt:function(e,t){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},remove:function(e){var t=Z(e,this.children);return t>=0&&(this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)),this},removeAt:function(e){if(e>=0&&this.children.length>e){var t=this.children[e];this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)}return this},clear:function(){var e=this.children;return this.children=[],this._reparent(e,null),this.childrenChange("remove",e,0),this},bbox:function(e){return t(this.children,!0,this.currentTransform(e))},rawBBox:function(){return t(this.children,!1)},_clippedBBox:function(e){return n(this.children,this.currentTransform(e))},currentTransform:function(e){return ce.fn.currentTransform.call(this,e)||null},_reparent:function(e,t){var n,i,r;for(n=0;e.length>n;n++)(r=(i=e[n]).parent)&&r!=this&&r.remove&&r.remove(i),i.parent=t}}),V.mixins.Traversable.extend(v.fn,"children"),_=ce.extend({nodeType:"Text",init:function(e,t,n){ce.fn.init.call(this,n),this.content(e),this.position(t||new F.Point),this.options.font||(this.options.font="12px sans-serif"),Y(this.options.fill)||this.fill("#000")},content:function(e){return Y(e)?(this.options.set("content",e),this):this.options.get("content")},measure:function(){return V.util.measureText(this.content(),{font:this.options.get("font")})},rect:function(){var e=this.measure(),t=this.position().clone();return new F.Rect(t,[e.width,e.height])},bbox:function(e){var t=O(this.currentTransform(e));return this.rect().bbox(t)},rawBBox:function(){return this.rect().bbox()}}),V.mixins.Paintable.extend(_.fn),a(_.fn,["position"]),y=ce.extend({nodeType:"Circle",init:function(e,t){ce.fn.init.call(this,t),this.geometry(e||new F.Circle),Y(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=O(this.currentTransform(e)),n=this._geometry.bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._geometry.bbox()}}),V.mixins.Paintable.extend(y.fn),r(y.fn,["geometry"]),b=ce.extend({nodeType:"Arc",init:function(e,t){ce.fn.init.call(this,t),this.geometry(e||new F.Arc),Y(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=O(this.currentTransform(e)),n=this.geometry().bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var e,t=new x,n=this.geometry().curvePoints();if(n.length>0)for(t.moveTo(n[0].x,n[0].y),e=1;n.length>e;e+=3)t.curveTo(n[e],n[e+1],n[e+2]);return t}}),V.mixins.Paintable.extend(b.fn),r(b.fn,["geometry"]),w=m.extend({_change:function(){this.geometryChange()}}),a((k=P.extend({init:function(e,t,n){this.anchor(e||new B),this.controlIn(t),this.controlOut(n)},bboxTo:function(e,t){var n=this.anchor().transformCopy(t),i=e.anchor().transformCopy(t);return this.controlOut()&&e.controlIn()?this._curveBoundingBox(n,this.controlOut().transformCopy(t),e.controlIn().transformCopy(t),i):this._lineBoundingBox(n,i)},_lineBoundingBox:function(e,t){return z.fromPoints(e,t)},_curveBoundingBox:function(e,t,n,i){var r=[e,t,n,i],o=this._curveExtremesFor(r,"x"),a=this._curveExtremesFor(r,"y"),s=$([o.min,o.max,e.x,i.x]),l=$([a.min,a.max,e.y,i.y]);return z.fromPoints(new B(s.min,l.min),new B(s.max,l.max))},_curveExtremesFor:function(e,t){var n=this._curveExtremes(e[0][t],e[1][t],e[2][t],e[3][t]);return{min:this._calculateCurveAt(n.min,t,e),max:this._calculateCurveAt(n.max,t,e)}},_calculateCurveAt:function(e,t,n){var i=1-e;return j(i,3)*n[0][t]+3*j(i,2)*e*n[1][t]+3*j(e,2)*i*n[2][t]+j(e,3)*n[3][t]},_curveExtremes:function(e,t,n,i){var r,o,a=e-3*t+3*n-i,s=-2*(e-2*t+n),l=e-t,c=W.sqrt(s*s-4*a*l),u=0,d=1;return 0===a?0!==s&&(u=d=-l/s):isNaN(c)||(u=(-s+c)/(2*a),d=(-s-c)/(2*a)),(0>(r=W.max(W.min(u,d),0))||r>1)&&(r=0),((o=W.min(W.max(u,d),1))>1||0>o)&&(o=1),{min:r,max:o}}})).fn,["anchor","controlIn","controlOut"]),L(k.fn,K),x=ce.extend({nodeType:"Path",init:function(e){ce.fn.init.call(this,e),this.segments=new w,this.segments.addObserver(this),Y(this.options.stroke)||(this.stroke("#000"),Y(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))},moveTo:function(e,t){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(e,t),this},lineTo:function(e,t){var n=Y(t)?new B(e,t):e,i=new k(n);return this.segments.push(i),this},curveTo:function(e,t,n){var i,r;return this.segments.length>0&&(i=Q(this.segments),r=new k(n,t),this.suspend(),i.controlOut(e),this.resume(),this.segments.push(r)),this},arc:function(e,t,n,i,r){var o,a,s,l;return this.segments.length>0&&(o=Q(this.segments).anchor(),a=q.rad(e),s=new B(o.x-n*W.cos(a),o.y-i*W.sin(a)),l=new F.Arc(s,{startAngle:e,endAngle:t,radiusX:n,radiusY:i,anticlockwise:r}),this._addArcSegments(l)),this},arcTo:function(e,t,n,i,r){var o,a;return this.segments.length>0&&(o=Q(this.segments).anchor(),a=F.Arc.fromPoints(o,e,t,n,i,r),this._addArcSegments(a)),this},_addArcSegments:function(e){var t,n;for(this.suspend(),t=e.curvePoints(),n=1;t.length>n;n+=3)this.curveTo(t[n],t[n+1],t[n+2]);this.resume(),this.geometryChange()},close:function(){return this.options.closed=!0,this.geometryChange(),this},bbox:function(e){var t=O(this.currentTransform(e)),n=this._bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._bbox()},_bbox:function(e){var t,n,i,r,o=this.segments,a=o.length;if(1===a)n=o[0].anchor().transformCopy(e),t=new z(n,H.ZERO);else if(a>0)for(i=1;a>i;i++)r=o[i-1].bboxTo(o[i],e),t=t?z.union(t,r):r;return t}}),V.mixins.Paintable.extend(x.fn),x.fromRect=function(e,t){return new x(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close()},x.fromPoints=function(e,t){var n,i,r;if(e){for(n=new x(t),i=0;e.length>i;i++)(r=B.create(e[i]))&&(0===i?n.moveTo(r):n.lineTo(r));return n}},x.fromArc=function(e,t){var n=new x(t),i=e.startAngle,r=e.pointAt(i);return n.moveTo(r.x,r.y),n.arc(i,e.endAngle,e.radiusX,e.radiusY,e.anticlockwise),n},C=ce.extend({nodeType:"MultiPath",init:function(e){ce.fn.init.call(this,e),this.paths=new w,this.paths.addObserver(this),Y(this.options.stroke)||this.stroke("#000")},moveTo:function(e,t){var n=new x;return n.moveTo(e,t),this.paths.push(n),this},lineTo:function(e,t){return this.paths.length>0&&Q(this.paths).lineTo(e,t),this},curveTo:function(e,t,n){return this.paths.length>0&&Q(this.paths).curveTo(e,t,n),this},arc:function(e,t,n,i,r){return this.paths.length>0&&Q(this.paths).arc(e,t,n,i,r),this},arcTo:function(e,t,n,i,r){return this.paths.length>0&&Q(this.paths).arcTo(e,t,n,i,r),this},close:function(){return this.paths.length>0&&Q(this.paths).close(),this},bbox:function(e){return t(this.paths,!0,this.currentTransform(e))},rawBBox:function(){return t(this.paths,!1)},_clippedBBox:function(e){return n(this.paths,this.currentTransform(e))}}),V.mixins.Paintable.extend(C.fn),r((T=ce.extend({nodeType:"Image",init:function(e,t,n){ce.fn.init.call(this,n),this.src(e),this.rect(t||new F.Rect)},src:function(e){return Y(e)?(this.options.set("src",e),this):this.options.get("src")},bbox:function(e){var t=O(this.currentTransform(e));return this._rect.bbox(t)},rawBBox:function(){return this._rect.bbox()}})).fn,["rect"]),function(e,t){for(var n=0;t.length>n;n++)e[t[n]]=l(t[n])}((S=P.extend({init:function(e,t,n){this.options=new U({offset:e,color:t,opacity:Y(n)?n:1}),this.options.addObserver(this)}})).fn,["offset","color","opacity"]),L(S.fn,K),S.create=function(e){if(Y(e))return e instanceof S?e:e.length>1?new S(e[0],e[1],e[2]):new S(e.offset,e.color,e.opacity)},D=m.extend({_change:function(){this.optionsChange({field:"stops"})}}),L((A=P.extend({nodeType:"gradient",init:function(e){this.stops=new D(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=c()},userSpace:function(e){return Y(e)?(this._userSpace=e,this.optionsChange(),this):this._userSpace},_createStops:function(e){var t,n=[];for(e=e||[],t=0;e.length>t;t++)n.push(S.create(e[t]));return n},addStop:function(e,t,n){this.stops.push(new S(e,t,n))},removeStop:function(e){var t=this.stops.indexOf(e);t>=0&&this.stops.splice(t,1)}})).fn,K,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}}),a((M=A.extend({init:function(e){e=e||{},A.fn.init.call(this,e),this.start(e.start||new B),this.end(e.end||new B(1,0))}})).fn,["start","end"]),a((E=A.extend({init:function(e){e=e||{},A.fn.init.call(this,e),this.center(e.center||new B),this._radius=Y(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill},radius:function(e){return Y(e)?(this._radius=e,this.geometryChange(),this):this._radius},fallbackFill:function(e){return Y(e)?(this._fallbackFill=e,this.optionsChange(),this):this._fallbackFill}})).fn,["center"]),I=v.extend({init:function(e,t){v.fn.init.call(this,R.deepExtend({},this._defaults,t)),this._rect=e,this._fieldMap={}},_defaults:{alignContent:ae,justifyContent:ae,alignItems:ae,spacing:0,orientation:le,lineSpacing:0,wrap:!0},rect:function(e){return e?(this._rect=e,this):this._rect},_initMap:function(){var e=this.options,t=this._fieldMap;e.orientation==le?(t.sizeField="width",t.groupsSizeField="height",t.groupAxis="x",t.groupsAxis="y"):(t.sizeField="height",t.groupsSizeField="width",t.groupAxis="y",t.groupsAxis="x")},reflow:function(){var e,t,n,i,r,o,a,s,l,c,u,d,h,p,m,v,_,y,b,w,k,x,C,T,S;if(this._rect&&0!==this.children.length){for(this._initMap(),this.options.transform&&this.transform(null),e=this.options,t=this._fieldMap,n=this._rect,r=(i=this._initGroups()).groups,o=i.groupsSize,a=t.sizeField,s=t.groupsSizeField,l=t.groupAxis,c=t.groupsAxis,u=f(o,n,e.alignContent,c,s),d=new B,h=new B,p=new F.Size,w=0;r.length>w;w++){for(y=r[w],d[l]=m=f(y.size,n,e.justifyContent,l,a),d[c]=u,p[a]=y.size,p[s]=y.lineSize,b=new z(d,p),k=0;y.bboxes.length>k;k++)_=y.elements[k],v=y.bboxes[k],h[l]=m,h[c]=f(v.size[s],b,e.alignItems,c,s),g(h,v,_),m+=v.size[a]+e.spacing;u+=y.lineSize+e.lineSpacing}!e.wrap&&y.size>n.size[a]&&(x=n.size[a]/b.size[a],C=b.topLeft().scale(x,x),T=f(b.size[s]*x,n,e.alignContent,c,s),S=F.transform(),"x"===l?S.translate(n.origin.x-C.x,T-C.y):S.translate(T-C.x,n.origin.y-C.y),S.scale(x,x),this.transform(S))}},_initGroups:function(){var e,t,n,i=this.options,r=this.children,o=i.lineSpacing,a=this._fieldMap.sizeField,s=-o,l=[],c=this._newGroup(),u=function(){l.push(c),s+=c.lineSize+o};for(n=0;r.length>n;n++)t=r[n],e=r[n].clippedBBox(),t.visible()&&e&&(i.wrap&&c.size+e.size[a]+i.spacing>this._rect.size[a]?0===c.bboxes.length?(this._addToGroup(c,e,t),u(),c=this._newGroup()):(u(),c=this._newGroup(),this._addToGroup(c,e,t)):this._addToGroup(c,e,t));return c.bboxes.length&&u(),{groups:l,groupsSize:s}},_addToGroup:function(e,t,n){e.size+=t.size[this._fieldMap.sizeField]+this.options.spacing,e.lineSize=Math.max(t.size[this._fieldMap.groupsSizeField],e.lineSize),e.bboxes.push(t),e.elements.push(n)},_newGroup:function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}}),L(V,{align:function(e,t,n){p(e,t,n,"x","width")},Arc:b,Circle:y,Element:ce,ElementsArray:m,fit:function(e,t){var n,i,r=e.clippedBBox().size,o=t.size;(r.width>o.width||r.height>o.height)&&(n=W.min(o.width/r.width,o.height/r.height),(i=e.transform()||F.transform()).scale(n,n),e.transform(i))},Gradient:A,GradientStop:S,Group:v,Image:T,Layout:I,LinearGradient:M,MultiPath:C,Path:x,RadialGradient:E,Segment:k,stack:function(e){h(d(e),"x","y","width")},Text:_,vAlign:function(e,t,n){p(e,t,n,"y","height")},vStack:function(e){h(d(e),"y","x","height")},vWrap:function(e,t){return u(e,t,"y","x","height")},wrap:function(e,t){return u(e,t,"x","y","width")}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i,r=t?0:1;for(i=0;e.length>i;i+=2)e.splice(i+r,0,n)}function n(e,t){return e&&t?t.scaleCopy(2).translate(-e.x,-e.y):void 0}function i(e,t,n){return{controlOut:(t=t.clone().scale(2/3)).clone().translateWith(e.scaleCopy(1/3)),controlIn:t.translateWith(n.scaleCopy(1/3))}}var r=window.kendo,o=r.drawing,a=r.geometry,s=r.Class,l=a.Point,c=r.deepExtend,u=e.trim,d=r.util.last,h=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,p=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g,f=s.extend({parse:function(e,t){var n,i=new o.MultiPath(t),r=new l;return e.replace(h,function(e,t,o,a){var s=t.toLowerCase(),l=s===t,c=function(e){var t=[];return e.replace(p,function(e,n){t.push(parseFloat(n))}),t}(u(o));if("m"===s&&(l?(r.x+=c[0],r.y+=c[1]):(r.x=c[0],r.y=c[1]),i.moveTo(r.x,r.y),c.length>2&&(s="l",c.splice(0,2))),g[s])g[s](i,{parameters:c,position:r,isRelative:l,previousCommand:n}),a&&"z"===a.toLowerCase()&&i.close();else if("m"!==s)throw Error("Error while parsing SVG path. Unsupported command: "+s);n=s}),i}}),g={l:function(e,t){var n,i,r=t.parameters,o=t.position;for(n=0;r.length>n;n+=2)i=new l(r[n],r[n+1]),t.isRelative&&i.translateWith(o),e.lineTo(i.x,i.y),o.x=i.x,o.y=i.y},c:function(e,t){var n,i,r,o,a=t.parameters,s=t.position;for(o=0;a.length>o;o+=6)n=new l(a[o],a[o+1]),i=new l(a[o+2],a[o+3]),r=new l(a[o+4],a[o+5]),t.isRelative&&(i.translateWith(s),n.translateWith(s),r.translateWith(s)),e.curveTo(n,i,r),s.x=r.x,s.y=r.y},v:function(e,n){var i=n.isRelative?0:n.position.x;t(n.parameters,!0,i),this.l(e,n)},h:function(e,n){var i=n.isRelative?0:n.position.y;t(n.parameters,!1,i),this.l(e,n)},a:function(e,t){var n,i,r,o,a,s,c=t.parameters,u=t.position;for(n=0;c.length>n;n+=7)i=c[n],r=c[n+1],o=c[n+3],a=c[n+4],s=new l(c[n+5],c[n+6]),t.isRelative&&s.translateWith(u),e.arcTo(s,i,r,o,a),u.x=s.x,u.y=s.y},s:function(e,t){var i,r,o,a,s,c=t.parameters,u=t.position,h=t.previousCommand;for(("s"==h||"c"==h)&&(a=d(d(e.paths).segments).controlIn()),s=0;c.length>s;s+=4)o=new l(c[s],c[s+1]),r=new l(c[s+2],c[s+3]),t.isRelative&&(o.translateWith(u),r.translateWith(u)),i=a?n(a,u):u.clone(),a=o,e.curveTo(i,o,r),u.x=r.x,u.y=r.y},q:function(e,t){var n,r,o,a,s=t.parameters,c=t.position;for(a=0;s.length>a;a+=4)o=new l(s[a],s[a+1]),r=new l(s[a+2],s[a+3]),t.isRelative&&(o.translateWith(c),r.translateWith(c)),n=i(c,o,r),e.curveTo(n.controlOut,n.controlIn,r),c.x=r.x,c.y=r.y},t:function(e,t){var r,o,a,s,c=t.parameters,u=t.position,h=t.previousCommand;for(("q"==h||"t"==h)&&(o=d(d(e.paths).segments).controlIn().clone().translateWith(u.scaleCopy(-1/3)).scale(1.5)),s=0;c.length>s;s+=2)a=new l(c[s],c[s+1]),t.isRelative&&a.translateWith(u),r=i(u,o=o?n(o,u):u.clone(),a),e.curveTo(r.controlOut,r.controlIn,a),u.x=a.x,u.y=a.y}};f.current=new f,o.Path.parse=function(e,t){return f.current.parse(e,t)},c(o,{PathParser:f})}(window.kendo.jQuery),function(e){function t(e){return"url("+function(){var e=document.getElementsByTagName("base")[0],t="",n=document.location.href,i=n.indexOf("#");return e&&!s.support.browser.msie&&(-1!==i&&(n=n.substring(0,i)),t=n),t}()+"#"+e+")"}function n(e){var t,n,i,r=new A({encodeText:!0}),o=e.clippedBBox();return o&&(t=o.getOrigin(),(n=new u.Group).transform(c.transform().translate(-t.x,-t.y)),n.children.push(e),e=n),r.load([e]),i="<?xml version='1.0' ?><svg xmlns='"+C+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+r.render()+"</svg>",r.destroy(),i}function i(e,t){return"clip"==e||"fill"==e&&(!t||t.nodeType==b)}function r(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=r._element;return t.innerHTML=e,t.textContent||t.innerText}var o,a=document,s=window.kendo,l=s.deepExtend,c=s.geometry,u=s.drawing,d=u.BaseNode,h=s.util,p=h.defined,f=h.isTransparent,g=h.renderAttr,m=h.renderAllAttr,v=h.renderTemplate,_=e.inArray,y=u.DASH_ARRAYS,b="gradient",w="none",k=".kendo",x="solid",C="http://www.w3.org/2000/svg",T="transform",S=u.Surface.extend({init:function(e,t){u.Surface.fn.init.call(this,e,t),this._root=new A(this.options),W(this.element[0],this._template(this)),this._rootElement=this.element[0].firstElementChild,function(e){var t,n,i,r;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(e){}t&&(n=-t.e%1,i=-t.f%1,r=e.style,(0!==n||0!==i)&&(r.left=n+"px",r.top=i+"px"))}(this._rootElement),this._root.attachTo(this._rootElement),this.element.on("click"+k,this._click),this.element.on("mouseover"+k,this._mouseenter),this.element.on("mouseout"+k,this._mouseleave),this.resize()},type:"svg",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,this.element.off(k)),u.Surface.fn.destroy.call(this)},translate:function(e){var t=s.format("{0} {1} {2} {3}",Math.round(e.x),Math.round(e.y),this._size.width,this._size.height);this._offset=e,this._rootElement.setAttribute("viewBox",t)},draw:function(e){u.Surface.fn.draw.call(this,e),this._root.load([e])},clear:function(){u.Surface.fn.clear.call(this),this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template(this)},exportVisual:function(){var e,t=this._visual,n=this._offset;return n&&((e=new u.Group).children.push(t),e.transform(c.transform().translate(-n.x,-n.y)),t=e),t},_resize:function(){this._offset&&this.translate(this._offset)},_template:v("<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+C+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>#= d._root.render() #</svg>")}),D=d.extend({init:function(e){d.fn.init.call(this,e),this.definitions={}},destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),d.fn.destroy.call(this)},load:function(e,t){var n,i,r,o,a=this,s=a.element;for(o=0;e.length>o;o++)r=(i=e[o]).children,n=new U[i.nodeType](i),p(t)?a.insertAt(n,t):a.append(n),n.createDefinitions(),r&&r.length>0&&n.load(r),s&&n.attachTo(s,t)},root:function(){for(var e=this;e.parent;)e=e.parent;return e},attachTo:function(e,t){var n,i=a.createElement("div");W(i,"<svg xmlns='"+C+"' version='1.1'>"+this.render()+"</svg>"),(n=i.firstChild.firstChild)&&(p(t)?e.insertBefore(n,e.childNodes[t]||null):e.appendChild(n),this.setElement(n))},setElement:function(e){var t,n,i=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,this.element._kendoNode=this,n=0;i.length>n;n++)t=e.childNodes[n],i[n].setElement(t)},clear:function(){var e,t;for(this.clearDefinitions(),this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){if(this.element){var e=this.element.parentNode;e&&e.removeChild(this.element),this.element=null}d.fn.removeSelf.call(this)},template:v("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,n="";for(e=0;t.length>e;e++)n+=t[e].render();return n},optionsChange:function(e){var t=e.field,n=e.value;"visible"===t?this.css("display",n?"":w):o[t]&&i(t,n)?this.updateDefinition(t,n):"opacity"===t&&this.attr("opacity",n),d.fn.optionsChange.call(this,e)},attr:function(e,t){this.element&&this.element.setAttribute(e,t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])},removeAttr:function(e){this.element&&this.element.removeAttribute(e)},mapTransform:function(e){var t=[];return e&&t.push([T,"matrix("+e.matrix().toString(6)+")"]),t},renderTransform:function(){return m(this.mapTransform(this.srcElement.transform()))},transformChange:function(e){e?this.allAttr(this.mapTransform(e)):this.removeAttr(T)},mapStyle:function(){var e=this.srcElement.options,t=[["cursor",e.cursor]];return!1===e.visible&&t.push(["display",w]),t},renderStyle:function(){return g("style",h.renderStyle(this.mapStyle()))},renderOpacity:function(){return g("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var e,t,n,r,a=this.srcElement,s=this.definitions;if(a){for(t in n=a.options,o)(e=n.get(t))&&i(t,e)&&(s[t]=e,r=!0);r&&this.definitionChange({action:"add",definitions:s})}},definitionChange:function(e){this.parent&&this.parent.definitionChange(e)},updateDefinition:function(e,n){var i=this.definitions,r=i[e],a=o[e],s={};r&&(s[e]=r,this.definitionChange({action:"remove",definitions:s}),delete i[e]),n?(s[e]=n,this.definitionChange({action:"add",definitions:s}),i[e]=n,this.attr(a,t(n.id))):r&&this.removeAttr(a)},clearDefinitions:function(){var e,t=this.definitions;for(e in t){this.definitionChange({action:"remove",definitions:t}),this.definitions={};break}},renderDefinitions:function(){return m(this.mapDefinitions())},mapDefinitions:function(){var e,n=this.definitions,i=[];for(e in n)i.push([o[e],t(n[e].id)]);return i}}),A=D.extend({init:function(e){D.fn.init.call(this),this.options=e,this.defs=new M},attachTo:function(e){this.element=e,this.defs.attachTo(e.firstElementChild)},clear:function(){d.fn.clear.call(this)},template:v("#=d.defs.render()##= d.renderChildren() #"),definitionChange:function(e){this.defs.definitionChange(e)}}),M=D.extend({init:function(){D.fn.init.call(this),this.definitionMap={}},attachTo:function(e){this.element=e},template:v("<defs>#= d.renderChildren()#</defs>"),definitionChange:function(e){var t=e.definitions,n=e.action;"add"==n?this.addDefinitions(t):"remove"==n&&this.removeDefinitions(t)},createDefinition:function(e,t){var n;return"clip"==e?n=E:"fill"==e&&(t instanceof u.LinearGradient?n=O:t instanceof u.RadialGradient&&(n=V)),new n(t)},addDefinitions:function(e){for(var t in e)this.addDefinition(t,e[t])},addDefinition:function(e,t){var n,i=this.definitionMap,r=t.id,o=this.element,a=i[r];a?a.count++:(n=this.createDefinition(e,t),i[r]={element:n,count:1},this.append(n),o&&n.attachTo(this.element))},removeDefinitions:function(e){for(var t in e)this.removeDefinition(e[t])},removeDefinition:function(e){var t=this.definitionMap,n=e.id,i=t[n];i&&(i.count--,0===i.count&&(this.remove(_(i.element,this.childNodes),1),delete t[n]))}}),E=D.extend({init:function(e){D.fn.init.call(this),this.srcElement=e,this.id=e.id,this.load([e])},template:v("<clipPath id='#=d.id#'>#= d.renderChildren()#</clipPath>")}),I=D.extend({template:v("<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>"),optionsChange:function(e){e.field==T&&this.transformChange(e.value),D.fn.optionsChange.call(this,e)}}),R=D.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case T:this.transformChange(e.value);break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}D.fn.optionsChange.call(this,e)},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},content:function(){this.element&&(this.element.textContent=this.srcElement.content())},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t,n,i,r,o,a=e.segments,s=a.length;if(s>0){for(t=[],o=1;s>o;o++)(i=this.segmentType(a[o-1],a[o]))!==r&&(r=i,t.push(i)),t.push("L"===i?this.printPoints(a[o].anchor()):this.printPoints(a[o-1].controlOut(),a[o].controlIn(),a[o].anchor()));return n="M"+this.printPoints(a[0].anchor())+" "+t.join(" "),e.options.closed&&(n+="Z"),n}},printPoints:function(){var e,t=arguments,n=t.length,i=[];for(e=0;n>e;e++)i.push(t[e].toString(3));return i.join(" ")},segmentType:function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},mapStroke:function(e){var t=[];return e&&!f(e.color)?(t.push(["stroke",e.color]),t.push(["stroke-width",e.width]),t.push(["stroke-linecap",this.renderLinecap(e)]),t.push(["stroke-linejoin",e.lineJoin]),p(e.opacity)&&t.push(["stroke-opacity",e.opacity]),p(e.dashType)&&t.push(["stroke-dasharray",this.renderDashType(e)])):t.push(["stroke",w]),t},renderStroke:function(){return m(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t,n,i,r=e.width||1,o=e.dashType;if(o&&o!=x){for(t=y[o.toLowerCase()],n=[],i=0;t.length>i;i++)n.push(t[i]*r);return n.join(" ")}},renderLinecap:function(e){var t=e.dashType,n=e.lineCap;return t&&t!=x?"butt":n},mapFill:function(e){var t=[];return e&&e.nodeType==b||(e&&!f(e.color)?(t.push(["fill",e.color]),p(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill",w])),t},renderFill:function(){return m(this.mapFill(this.srcElement.options.fill))},template:v("<path #= d.renderStyle() # #= d.renderOpacity() # #= kendo.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() #></path>")}),P=R.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}}),L=R.extend({renderData:function(){var e,t,n=this.srcElement.paths;if(n.length>0){for(e=[],t=0;n.length>t;t++)e.push(this.printPath(n[t]));return e.join(" ")}}}),F=R.extend({geometryChange:function(){var e=this.center();this.attr("cx",e.x),this.attr("cy",e.y),this.attr("r",this.radius()),this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:v("<circle #= d.renderStyle() # #= d.renderOpacity() # cx='#= d.center().x #' cy='#= d.center().y #' r='#= d.radius() #' #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # ></circle>")}),B=R.extend({geometryChange:function(){var e=this.pos();this.attr("x",e.x),this.attr("y",e.y),this.invalidate()},optionsChange:function(e){"font"===e.field?(this.attr("style",h.renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&R.fn.content.call(this,this.srcElement.content()),R.fn.optionsChange.call(this,e)},mapStyle:function(){var e=R.fn.mapStyle.call(this),t=this.srcElement.options.font;return e.push(["font",s.htmlEncode(t)]),e},pos:function(){var e=this.srcElement.position(),t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)},content:function(){var e=this.srcElement.content(),t=this.root().options;return t&&t.encodeText&&(e=r(e),e=s.htmlEncode(e)),e},template:v("<text #= d.renderStyle() # #= d.renderOpacity() # x='#= this.pos().x #' y='#= this.pos().y #' #= d.renderStroke() # #= d.renderTransform() # #= d.renderDefinitions() # #= d.renderFill() #>#= d.content() #</text>")}),z=R.extend({geometryChange:function(){this.allAttr(this.mapPosition()),this.invalidate()},optionsChange:function(e){"src"===e.field&&this.allAttr(this.mapSource()),R.fn.optionsChange.call(this,e)},mapPosition:function(){var e=this.srcElement.rect(),t=e.topLeft();return[["x",t.x],["y",t.y],["width",e.width()+"px"],["height",e.height()+"px"]]},renderPosition:function(){return m(this.mapPosition())},mapSource:function(){return[["xlink:href",this.srcElement.src()]]},renderSource:function(){return m(this.mapSource())},template:v("<image preserveAspectRatio='none' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # #= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#></image>")}),H=D.extend({template:v("<stop #=d.renderOffset()# #=d.renderStyle()# />"),renderOffset:function(){return g("offset",this.srcElement.offset())},mapStyle:function(){var e=this.srcElement;return[["stop-color",e.color()],["stop-opacity",e.opacity()]]},optionsChange:function(e){"offset"==e.field?this.attr(e.field,e.value):("color"==e.field||"opacity"==e.field)&&this.css("stop-"+e.field,e.value)}}),N=D.extend({init:function(e){D.fn.init.call(this,e),this.id=e.id,this.loadStops()},loadStops:function(){var e,t,n=this.srcElement.stops,i=this.element;for(t=0;n.length>t;t++)e=new H(n[t]),this.append(e),i&&e.attachTo(i)},optionsChange:function(e){"gradient.stops"==e.field?(d.fn.clear.call(this),this.loadStops()):e.field==b&&this.allAttr(this.mapCoordinates())},renderCoordinates:function(){return m(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}),O=N.extend({template:v("<linearGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</linearGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.start(),n=e.end();return[["x1",t.x],["y1",t.y],["x2",n.x],["y2",n.y],this.mapSpace()]}}),V=N.extend({template:v("<radialGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</radialGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.center(),n=e.radius();return[["cx",t.x],["cy",t.y],["r",n],this.mapSpace()]}}),U={Group:I,Text:B,Path:R,MultiPath:L,Circle:F,Arc:P,Image:z},W=function(e,t){e.innerHTML=t};!function(){var e="<svg xmlns='"+C+"'></svg>",t=a.createElement("div"),n="undefined"!=typeof DOMParser;t.innerHTML=e,n&&t.firstChild.namespaceURI!=C&&(W=function(e,t){var n=(new DOMParser).parseFromString(t,"text/xml"),i=a.adoptNode(n.documentElement);e.innerHTML="",e.appendChild(i)})}(),r._element=document.createElement("span"),o={clip:"clip-path",fill:"fill"},s.support.svg=a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),s.support.svg&&u.SurfaceFactory.current.register("svg",S,10),l(u,{exportSVG:function(t,i){var r=n(t);return i&&i.raw||(r="data:image/svg+xml;base64,"+h.encodeBase64(r)),e.Deferred().resolve(r).promise()},svg:{ArcNode:P,CircleNode:F,ClipNode:E,DefinitionNode:M,GradientStopNode:H,GroupNode:I,ImageNode:z,LinearGradientNode:O,MultiPathNode:L,Node:D,PathNode:R,RadialGradientNode:V,RootNode:A,Surface:S,TextNode:B,_exportGroup:n}})}(window.kendo.jQuery),function(e){var t,n,i,r,o,a,s,l,c=document,u=window.kendo,d=u.deepExtend,h=u.util,p=h.defined,f=h.isTransparent,g=h.renderTemplate,m=h.valueOrDefault,v=u.geometry,_=u.drawing,y=_.BaseNode,b=_.DASH_ARRAYS,w="solid",k=_.Surface.extend({init:function(n,i){_.Surface.fn.init.call(this,n,i),this.element[0].innerHTML=this._template(this);var r=this.element[0].firstElementChild;r.width=e(n).width(),r.height=e(n).height(),this._rootElement=r,this._root=new t(r)},destroy:function(){_.Surface.fn.destroy.call(this),this._root&&(this._root.destroy(),this._root=null)},type:"canvas",draw:function(e){_.Surface.fn.draw.call(this,e),this._root.load([e],void 0,this.options.cors)},clear:function(){_.Surface.fn.clear.call(this),this._root.clear()},image:function(){var t,n=this._root,i=this._rootElement,r=[];return n.traverse(function(e){e.loading&&r.push(e.loading)}),t=e.Deferred(),e.when.apply(e,r).done(function(){n._invalidate();try{var e=i.toDataURL();t.resolve(e)}catch(e){t.reject(e)}}).fail(function(e){t.reject(e)}),t.promise()},_resize:function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.invalidate()},_template:g("<canvas style='width: 100%; height: 100%;'></canvas>")}),x=y.extend({init:function(e){y.fn.init.call(this,e),e&&this.initClip()},initClip:function(){var e=this.srcElement.clip();e&&(this.clip=e,e.addObserver(this))},clear:function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),y.fn.clear.call(this)},clearClip:function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},setClip:function(e){this.clip&&(e.beginPath(),n.fn.renderPoints(e,this.clip),e.clip())},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip()),y.fn.optionsChange.call(this,e)},setTransform:function(e){if(this.srcElement){var t=this.srcElement.transform();t&&e.transform.apply(e,t.matrix().toArray(6))}},load:function(e,t,n){var i,r,o,a,s=this;for(a=0;e.length>a;a++)o=(r=e[a]).children,i=new l[r.nodeType](r,n),o&&o.length>0&&i.load(o,t,n),p(t)?s.insertAt(i,t):s.append(i);s.invalidate()},setOpacity:function(e){if(this.srcElement){var t=this.srcElement.opacity();p(t)&&this.globalAlpha(e,t)}},globalAlpha:function(e,t){t&&e.globalAlpha&&(t*=e.globalAlpha),e.globalAlpha=t},visible:function(){var e=this.srcElement;return!e||e&&!1!==e.options.visible}}),C=x.extend({renderTo:function(e){var t,n,i;if(this.visible()){for(e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),t=this.childNodes,n=0;t.length>n;n++)(i=t[n]).visible()&&i.renderTo(e);e.restore()}}});_.mixins.Traversable.extend(C.fn,"childNodes"),t=C.extend({init:function(t){C.fn.init.call(this),this.canvas=t,this.ctx=t.getContext("2d"),this.invalidate=u.throttle(e.proxy(this._invalidate,this),1e3/60)},destroy:function(){C.fn.destroy.call(this),this.canvas=null,this.ctx=null},_invalidate:function(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}}),_.mixins.Traversable.extend(t.fn,"childNodes"),n=x.extend({renderTo:function(e){e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),this.renderPoints(e,this.srcElement),this.setLineDash(e),this.setLineCap(e),this.setLineJoin(e),this.setFill(e),this.setStroke(e),e.restore()},setFill:function(e){var t=this.srcElement.options.fill,n=!1;return t&&("gradient"==t.nodeType?(this.setGradientFill(e,t),n=!0):f(t.color)||(e.fillStyle=t.color,e.save(),this.globalAlpha(e,t.opacity),e.fill(),e.restore(),n=!0)),n},setGradientFill:function(e,t){var n,i,r,o,a=this.srcElement.rawBBox();t instanceof _.LinearGradient?(i=t.start(),r=t.end(),n=e.createLinearGradient(i.x,i.y,r.x,r.y)):t instanceof _.RadialGradient&&(o=t.center(),n=e.createRadialGradient(o.x,o.y,0,o.x,o.y,t.radius())),function(e,t){var n,i,r;for(r=0;t.length>r;r++)i=t[r],(n=u.parseColor(i.color())).a*=i.opacity(),e.addColorStop(i.offset(),n.toCssRgba())}(n,t.stops),e.save(),t.userSpace()||e.transform(a.width(),0,0,a.height(),a.origin.x,a.origin.y),e.fillStyle=n,e.fill(),e.restore()},setStroke:function(e){var t=this.srcElement.options.stroke;return t&&!f(t.color)&&t.width>0?(e.strokeStyle=t.color,e.lineWidth=m(t.width,1),e.save(),this.globalAlpha(e,t.opacity),e.stroke(),e.restore(),!0):void 0},dashType:function(){var e=this.srcElement.options.stroke;return e&&e.dashType?e.dashType.toLowerCase():void 0},setLineDash:function(e){var t,n=this.dashType();n&&n!=w&&(t=b[n],e.setLineDash?e.setLineDash(t):(e.mozDash=t,e.webkitLineDash=t))},setLineCap:function(e){var t=this.dashType(),n=this.srcElement.options.stroke;t&&t!==w?e.lineCap="butt":n&&n.lineCap&&(e.lineCap=n.lineCap)},setLineJoin:function(e){var t=this.srcElement.options.stroke;t&&t.lineJoin&&(e.lineJoin=t.lineJoin)},renderPoints:function(e,t){var n,i,r,o,a,s=t.segments;if(0!==s.length){for(i=(n=s[0]).anchor(),e.moveTo(i.x,i.y),r=1;s.length>r;r++)i=(n=s[r]).anchor(),o=s[r-1].controlOut(),a=n.controlIn(),o&&a?e.bezierCurveTo(o.x,o.y,a.x,a.y,i.x,i.y):e.lineTo(i.x,i.y);t.options.closed&&e.closePath()}}}),i=n.extend({renderPoints:function(e){var t,i=this.srcElement.paths;for(t=0;i.length>t;t++)n.fn.renderPoints(e,i[t])}}),r=n.extend({renderPoints:function(e){var t=this.srcElement.geometry(),n=t.center,i=t.radius;e.arc(n.x,n.y,i,0,2*Math.PI)}}),o=n.extend({renderPoints:function(e){var t=this.srcElement.toPath();n.fn.renderPoints.call(this,e,t)}}),a=n.extend({renderTo:function(e){var t=this.srcElement,n=t.position(),i=t.measure();e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),e.font=t.options.font,this.setFill(e)&&e.fillText(t.content(),n.x,n.y+i.baseline),this.setStroke(e)&&(this.setLineDash(e),e.strokeText(t.content(),n.x,n.y+i.baseline)),e.restore()}}),s=n.extend({init:function(t,i){var r;n.fn.init.call(this,t),this.onLoad=e.proxy(this.onLoad,this),this.onError=e.proxy(this.onError,this),this.loading=e.Deferred(),r=this.img=new Image,i&&!/^data:/i.test(t.src())&&(r.crossOrigin=i),r.src=t.src(),r.complete?this.onLoad():(r.onload=this.onLoad,r.onerror=this.onError)},renderTo:function(e){"resolved"===this.loading.state()&&(e.save(),this.setTransform(e),this.setClip(e),this.drawImage(e),e.restore())},optionsChange:function(t){"src"===t.field?(this.loading=e.Deferred(),this.img.src=this.srcElement.src()):n.fn.optionsChange.call(this,t)},onLoad:function(){this.loading.resolve(),this.invalidate()},onError:function(){this.loading.reject(Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(e){var t=this.srcElement.rect(),n=t.topLeft();e.drawImage(this.img,n.x,n.y,t.width(),t.height())}}),l={Group:C,Text:a,Path:n,MultiPath:i,Circle:r,Arc:o,Image:s},u.support.canvas=!!c.createElement("canvas").getContext,u.support.canvas&&_.SurfaceFactory.current.register("canvas",k,20),d(u.drawing,{exportImage:function(t,n){var i,r,o,a,s,l,c={width:"800px",height:"600px",cors:"Anonymous"},u=t.clippedBBox();return u&&(i=u.getOrigin(),(r=new _.Group).transform(v.transform().translate(-i.x,-i.y)),r.children.push(t),t=r,o=u.getSize(),c.width=o.width+"px",c.height=o.height+"px"),n=d(c,n),a=e("<div />").css({display:"none",width:n.width,height:n.height}).appendTo(document.body),(s=new k(a,n)).draw(t),(l=s.image()).always(function(){s.destroy(),a.remove()}),l},canvas:{ArcNode:o,CircleNode:r,GroupNode:C,ImageNode:s,MultiPathNode:i,Node:x,PathNode:n,RootNode:t,Surface:k,TextNode:a}})}(window.kendo.jQuery),function(e){function t(e){var t=u.createElement("kvml:"+e);return t.className="kvml",t}function n(e){var t,n=e.length,i=[];for(t=0;n>t;t++)i.push(e[t].scaleCopy(I).toString(0,","));return i.join(" ")}function i(e,t){var i,o,a,s,l,c=e.segments,u=c.length;if(u>0){for(i=[],l=1;u>l;l++)(a=r(c[l-1],c[l]))!==s&&(s=a,i.push(a)),i.push(n("l"===a?[c[l].anchor()]:[c[l-1].controlOut(),c[l].controlIn(),c[l].anchor()]));return o="m "+n([c[0].anchor()])+" "+i.join(" "),e.options.closed&&(o+=" x"),!0!==t&&(o+=" e"),o}}function r(e,t){return e.controlOut()&&t.controlIn()?"c":"l"}function o(e){return 0===e.indexOf("fill")||0===e.indexOf(P)}function a(e,t,n){var i=n*A(t.opacity(),1);return e?s(e,t.color(),i):s(t.color(),"#fff",1-i)}function s(e,t,n){var i=new k(e),r=new k(t),o=l(i.r,r.r,n),a=l(i.g,r.g,n),s=l(i.b,r.b,n);return new k(o,a,s).toHex()}function l(e,t,n){return d.round(n*t+(1-n)*e)}var c,u=document,d=Math,h=d.atan2,p=d.ceil,f=d.sqrt,g=window.kendo,m=g.deepExtend,v=e.noop,_=g.drawing,y=_.BaseNode,b=g.geometry,w=b.toMatrix,k=g.Color,x=g.util,C=x.isTransparent,T=x.defined,S=x.deg,D=x.round,A=x.valueOrDefault,M="none",E=".kendo",I=100,R=I*I,P="gradient",L=_.Surface.extend({init:function(e,t){_.Surface.fn.init.call(this,e,t),u.namespaces&&!u.namespaces.kvml&&(u.namespaces.add("kvml","urn:schemas-microsoft-com:vml"),(u.styleSheets.length>30?u.styleSheets[0]:u.createStyleSheet()).addRule(".kvml","behavior:url(#default#VML)")),this.element.empty(),this._root=new B,this._root.attachTo(this.element[0]),this.element.on("click"+E,this._click),this.element.on("mouseover"+E,this._mouseenter),this.element.on("mouseout"+E,this._mouseleave)},type:"vml",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this.element.off(E)),_.Surface.fn.destroy.call(this)},draw:function(e){_.Surface.fn.draw.call(this,e),this._root.load([e],void 0,null)},clear:function(){_.Surface.fn.clear.call(this),this._root.clear()}}),F=y.extend({init:function(e){y.fn.init.call(this,e),this.createElement(),this.attachReference()},observe:v,destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),y.fn.destroy.call(this)},clear:function(){var e,t;for(this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),y.fn.removeSelf.call(this)},createElement:function(){this.element=u.createElement("div")},attachReference:function(){this.element._kendoNode=this},load:function(e,t,n,i){var r,o,a,s,l,c;for(i=A(i,1),this.srcElement&&(i*=A(this.srcElement.options.opacity,1)),r=0;e.length>r;r++)a=(o=e[r]).children,s=o.currentTransform(n),l=i*A(o.options.opacity,1),c=new re[o.nodeType](o,s,l),a&&a.length>0&&c.load(a,t,s,i),T(t)?this.insertAt(c,t):this.append(c),c.attachTo(this.element,t)},attachTo:function(e,t){T(t)?e.insertBefore(this.element,e.children[t]||null):e.appendChild(this.element)},optionsChange:function(e){"visible"==e.field&&this.css("display",!1!==e.value?"":M)},setStyle:function(){this.allCss(this.mapStyle())},mapStyle:function(){var e=[];return this.srcElement&&!1===this.srcElement.options.visible&&e.push(["display",M]),e},mapOpacityTo:function(e,t){var n=A(this.opacity,1);n*=A(t,1),e.push(["opacity",n])},attr:function(e,t){this.element&&(this.element[e]=t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])}}),B=F.extend({createElement:function(){F.fn.createElement.call(this),this.allCss([["width","100%"],["height","100%"],["position","relative"],["visibility","visible"]])},attachReference:v}),z=g.Class.extend({init:function(e,t){this.srcElement=e,this.observer=t,e.addObserver(this)},geometryChange:function(){this.observer.optionsChange({field:"clip",value:this.srcElement})},clear:function(){this.srcElement.removeObserver(this)}}),H=F.extend({init:function(e){F.fn.init.call(this,e),e&&this.initClip()},observe:function(){y.fn.observe.call(this)},mapStyle:function(){var e=F.fn.mapStyle.call(this);return this.srcElement&&this.srcElement.clip()&&e.push(["clip",this.clipRect()]),e},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip(),this.setClip()),F.fn.optionsChange.call(this,e)},clear:function(){this.clearClip(),F.fn.clear.call(this)},initClip:function(){this.srcElement.clip()&&(this.clip=new z(this.srcElement.clip(),this),this.clip.observer=this)},clearClip:function(){this.clip&&(this.clip.clear(),this.clip=null,this.css("clip",this.clipRect()))},setClip:function(){this.clip&&this.css("clip",this.clipRect())},clipRect:function(){var e,t,n,i=c,r=this.srcElement.clip();return r&&(t=(e=this.clipBBox(r)).topLeft(),n=e.bottomRight(),i=g.format("rect({0}px {1}px {2}px {3}px)",t.y,n.x,n.y,t.x)),i},clipBBox:function(e){var t=this.srcElement.rawBBox().topLeft(),n=e.rawBBox();return n.origin.translate(-t.x,-t.y),n}}),N=H.extend({createElement:function(){F.fn.createElement.call(this),this.setStyle()},attachTo:function(e,t){this.css("display",M),F.fn.attachTo.call(this,e,t),!1!==this.srcElement.options.visible&&this.css("display","")},_attachTo:function(e){var t=document.createDocumentFragment();t.appendChild(this.element),e.appendChild(t)},mapStyle:function(){var e=H.fn.mapStyle.call(this);return e.push(["position","absolute"]),e.push(["white-space","nowrap"]),e},optionsChange:function(e){"transform"===e.field&&this.refreshTransform(),"opacity"===e.field&&this.refreshOpacity(),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){var t,n=this.srcElement.currentTransform(e),i=this.childNodes,r=i.length;for(this.setClip(),t=0;r>t;t++)i[t].refreshTransform(n)},currentOpacity:function(){var e=A(this.srcElement.options.opacity,1);return this.parent&&this.parent.currentOpacity&&(e*=this.parent.currentOpacity()),e},refreshOpacity:function(){var e,t=this.childNodes,n=t.length,i=this.currentOpacity();for(e=0;n>e;e++)t[e].refreshOpacity(i)},initClip:function(){if(H.fn.initClip.call(this),this.clip){var e=this.clip.srcElement.bbox(this.srcElement.currentTransform());e&&(this.css("width",e.width()+e.origin.x),this.css("height",e.height()+e.origin.y))}},clipBBox:function(e){return e.bbox(this.srcElement.currentTransform())},clearClip:function(){H.fn.clearClip.call(this)}}),O=F.extend({init:function(e,t){this.opacity=t,F.fn.init.call(this,e)},createElement:function(){this.element=t("stroke"),this.setOpacity()},optionsChange:function(e){0===e.field.indexOf("stroke")&&this.setStroke()},refreshOpacity:function(e){this.opacity=e,this.setStroke()},setStroke:function(){this.allAttr(this.mapStroke())},setOpacity:function(){this.setStroke()},mapStroke:function(){var e,t=this.srcElement.options.stroke,n=[];return t&&!C(t.color)&&0!==t.width?(n.push(["on","true"]),n.push(["color",t.color]),n.push(["weight",(t.width||1)+"px"]),this.mapOpacityTo(n,t.opacity),T(t.dashType)&&n.push(["dashstyle",t.dashType]),T(t.lineJoin)&&n.push(["joinstyle",t.lineJoin]),T(t.lineCap)&&("butt"===(e=t.lineCap.toLowerCase())&&(e="butt"===e?"flat":e),n.push(["endcap",e]))):n.push(["on","false"]),n}}),V=F.extend({init:function(e,t,n){this.opacity=n,F.fn.init.call(this,e)},createElement:function(){this.element=t("fill"),this.setFill()},optionsChange:function(e){o(e.field)&&this.setFill()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setFill:function(){this.allAttr(this.mapFill())},setOpacity:function(){this.setFill()},attr:function(e,t){var n,i=this.element;if(i){for(n=e.split(".");n.length>1;)i=i[n.shift()];i[n[0]]=t}},mapFill:function(){var e=this.srcElement.fill(),t=[["on","false"]];return e&&(e.nodeType==P?t=this.mapGradient(e):C(e.color)||(t=this.mapFillColor(e))),t},mapFillColor:function(e){var t=[["on","true"],["color",e.color]];return this.mapOpacityTo(t,e.opacity),t},mapGradient:function(e){var t=this.srcElement.options.fallbackFill||e.fallbackFill&&e.fallbackFill();return e instanceof _.LinearGradient?this.mapLinearGradient(e):e instanceof _.RadialGradient&&e.supportVML?this.mapRadialGradient(e):t?this.mapFillColor(t):[["on","false"]]},mapLinearGradient:function(e){var t=e.start(),n=e.end(),i=x.deg(h(n.y-t.y,n.x-t.x)),r=[["on","true"],["type",P],["focus",0],["method","none"],["angle",270-i]];return this.addColors(r),r},mapRadialGradient:function(e){var t=this.srcElement.rawBBox(),n=e.center(),i=[["on","true"],["type","gradienttitle"],["focus","100%"],["focusposition",(n.x-t.origin.x)/t.width()+" "+(n.y-t.origin.y)/t.height()],["method","none"]];return this.addColors(i),i},addColors:function(e){var t,n,i=this.srcElement.options,r=A(this.opacity,1),o=[],s=i.fill.stops,l=i.baseColor,c=this.element.colors?"colors.value":"colors",u=a(l,s[0],r),h=a(l,s[s.length-1],r);for(n=0;s.length>n;n++)t=s[n],o.push(d.round(100*t.offset())+"% "+a(l,t,r));e.push([c,o.join(",")],["color",u],["color2",h])}}),U=F.extend({init:function(e,t){this.transform=t,F.fn.init.call(this,e)},createElement:function(){this.element=t("skew"),this.setTransform()},optionsChange:function(e){"transform"===e.field&&this.refresh(this.srcElement.currentTransform())},refresh:function(e){this.transform=e,this.setTransform()},transformOrigin:function(){return"-0.5,-0.5"},setTransform:function(){this.allAttr(this.mapTransform())},mapTransform:function(){var e=this.transform,t=[],n=w(e);return n?(n.round(4),t.push(["on","true"],["matrix",[n.a,n.c,n.b,n.d,0,0].join(",")],["offset",n.e+"px,"+n.f+"px"],["origin",this.transformOrigin()])):t.push(["on","false"]),t}}),W=H.extend({init:function(e,t,n){this.fill=this.createFillNode(e,t,n),this.stroke=new O(e,n),this.transform=this.createTransformNode(e,t),H.fn.init.call(this,e)},attachTo:function(e,t){this.fill.attachTo(this.element),this.stroke.attachTo(this.element),this.transform.attachTo(this.element),F.fn.attachTo.call(this,e,t)},createFillNode:function(e,t,n){return new V(e,t,n)},createTransformNode:function(e,t){return new U(e,t)},createElement:function(){this.element=t("shape"),this.setCoordsize(),this.setStyle()},optionsChange:function(e){o(e.field)?this.fill.optionsChange(e):0===e.field.indexOf("stroke")?this.stroke.optionsChange(e):"transform"===e.field?this.transform.optionsChange(e):"opacity"===e.field&&(this.fill.setOpacity(),this.stroke.setOpacity()),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){this.transform.refresh(this.srcElement.currentTransform(e))},refreshOpacity:function(e){e*=A(this.srcElement.options.opacity,1),this.fill.refreshOpacity(e),this.stroke.refreshOpacity(e)},mapStyle:function(e,t){var n,i=H.fn.mapStyle.call(this);return e&&t||(e=t=I),i.push(["position","absolute"],["width",e+"px"],["height",t+"px"]),(n=this.srcElement.options.cursor)&&i.push(["cursor",n]),i},setCoordsize:function(){this.allAttr([["coordorigin","0 0"],["coordsize",R+" "+R]])}}),j=F.extend({createElement:function(){this.element=t("path"),this.setPathData()},geometryChange:function(){this.setPathData()},setPathData:function(){this.attr("v",this.renderData())},renderData:function(){return i(this.srcElement)}}),q=W.extend({init:function(e,t,n){this.pathData=this.createDataNode(e),W.fn.init.call(this,e,t,n)},attachTo:function(e,t){this.pathData.attachTo(this.element),W.fn.attachTo.call(this,e,t)},createDataNode:function(e){return new j(e)},geometryChange:function(){this.pathData.geometryChange(),W.fn.geometryChange.call(this)}}),G=j.extend({renderData:function(){var e,t,n,r=this.srcElement.paths;if(r.length>0){for(e=[],t=0;r.length>t;t++)n=r.length-1>t,e.push(i(r[t],n));return e.join(" ")}}}),$=q.extend({createDataNode:function(e){return new G(e)}}),Y=U.extend({transformOrigin:function(){var e=this.srcElement.geometry().bbox(),t=e.center();return-p(t.x)/p(e.width())+","+-p(t.y)/p(e.height())}}),Q=W.extend({createElement:function(){this.element=t("oval"),this.setStyle()},createTransformNode:function(e,t){return new Y(e,t)},geometryChange:function(){W.fn.geometryChange.call(this),this.setStyle(),this.refreshTransform()},mapStyle:function(){var e=this.srcElement.geometry(),t=e.radius,n=e.center,i=p(2*t),r=W.fn.mapStyle.call(this,i,i);return r.push(["left",p(n.x-t)+"px"],["top",p(n.y-t)+"px"]),r}}),X=j.extend({renderData:function(){return i(this.srcElement.toPath())}}),K=q.extend({createDataNode:function(e){return new X(e)}}),Z=j.extend({createElement:function(){j.fn.createElement.call(this),this.attr("textpathok",!0)},renderData:function(){var e=this.srcElement.rect(),t=e.center();return"m "+n([new b.Point(e.topLeft().x,t.y)])+" l "+n([new b.Point(e.bottomRight().x,t.y)])}}),J=F.extend({createElement:function(){this.element=t("textpath"),this.attr("on",!0),this.attr("fitpath",!1),this.setStyle(),this.setString()},optionsChange:function(e){"content"===e.field?this.setString():this.setStyle(),F.fn.optionsChange.call(this,e)},mapStyle:function(){return[["font",this.srcElement.options.font]]},setString:function(){this.attr("string",this.srcElement.content())}}),ee=q.extend({init:function(e,t,n){this.path=new J(e),q.fn.init.call(this,e,t,n)},createDataNode:function(e){return new Z(e)},attachTo:function(e,t){this.path.attachTo(this.element),q.fn.attachTo.call(this,e,t)},optionsChange:function(e){("font"===e.field||"content"===e.field)&&(this.path.optionsChange(e),this.pathData.geometryChange(e)),q.fn.optionsChange.call(this,e)}}),te=j.extend({renderData:function(){var e=this.srcElement.rect();return i((new _.Path).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close())}}),ne=U.extend({init:function(e,t,n){this.opacity=n,U.fn.init.call(this,e,t)},createElement:function(){this.element=t("fill"),this.attr("type","frame"),this.attr("rotate",!0),this.setOpacity(),this.setSrc(),this.setTransform()},optionsChange:function(e){"src"===e.field&&this.setSrc(),U.fn.optionsChange.call(this,e)},geometryChange:function(){this.refresh()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setOpacity:function(){var e=[];this.mapOpacityTo(e,this.srcElement.options.opacity),this.allAttr(e)},setSrc:function(){this.attr("src",this.srcElement.src())},mapTransform:function(){var e,t,n,i,r,o,a=this.srcElement,s=a.rawBBox(),l=s.center(),c=I/2,u=I,d=s.width()/u,p=s.height()/u,g=0,m=this.transform;return m?(n=w(m),d*=i=f(n.a*n.a+n.b*n.b),p*=r=f(n.c*n.c+n.d*n.d),0!=(g=(S(h(n.b,n.d))+S(h(-n.c,n.a)))/2)?(e=((o=a.bbox().center()).x-c)/u,t=(o.y-c)/u):(e=(l.x*i+n.e-c)/u,t=(l.y*r+n.f-c)/u)):(e=(l.x-c)/u,t=(l.y-c)/u),[["size",(d=D(d,4))+","+(p=D(p,4))],["position",(e=D(e,4))+","+(t=D(t,4))],["angle",g=D(g,4)]]}}),ie=q.extend({createFillNode:function(e,t,n){return new ne(e,t,n)},createDataNode:function(e){return new te(e)},optionsChange:function(e){("src"===e.field||"transform"===e.field)&&this.fill.optionsChange(e),q.fn.optionsChange.call(this,e)},geometryChange:function(){this.fill.geometryChange(),q.fn.geometryChange.call(this)},refreshTransform:function(e){q.fn.refreshTransform.call(this,e),this.fill.refresh(this.srcElement.currentTransform(e))}}),re={Group:N,Text:ee,Path:q,MultiPath:$,Circle:Q,Arc:K,Image:ie};g.support.vml=function(){var e=g.support.browser;return e.msie&&9>e.version}(),c="inherit",g.support.browser.msie&&8>g.support.browser.version&&(c="rect(auto auto auto auto)"),g.support.vml&&_.SurfaceFactory.current.register("vml",L,30),m(_,{vml:{ArcDataNode:X,ArcNode:K,CircleTransformNode:Y,CircleNode:Q,FillNode:V,GroupNode:N,ImageNode:ie,ImageFillNode:ne,ImagePathDataNode:te,MultiPathDataNode:G,MultiPathNode:$,Node:F,PathDataNode:j,PathNode:q,RootNode:B,StrokeNode:O,Surface:L,TextNode:ee,TextPathNode:J,TextPathDataNode:Z,TransformNode:U}})}(window.kendo.jQuery),function(e,t,n){"use strict";function i(n,i){function o(t){var n=new Q.Group,i=t.getBoundingClientRect();return T(n,[1,0,0,1,-i.left,-i.top]),te._clipbox=!1,te._matrix=X.Matrix.unit(),te._stackingContext={element:t,group:n},e(t).addClass("k-pdf-export"),W(t,n),e(t).removeClass("k-pdf-export"),n}function a(n,i,r,o,a,s,l){function c(){function e(){setTimeout(function(){n({pages:b,container:k})},10)}var t,i;("-"!=r||a)&&u(w),t=p(),w.parentNode.insertBefore(t,w),t.appendChild(w),_?(i=b.length,b.forEach(function(t,n){var r=_({element:t,pageNum:n+1,totalPages:b.length});r&&(t.appendChild(r),d(r,function(){0==--i&&e()}))})):e()}function u(n){var i,o,s,l,c=m(n),d=t(v(c,"padding-bottom")),p=t(v(c,"border-bottom-width")),_=x;for(x+=d+p,i=!0,o=n.firstChild;o;o=o.nextSibling)if(1==o.nodeType){if(i=!1,(s=e(o)).is(r)){h(o);continue}if(!a){u(o);continue}if(!/^(?:static|relative)$/.test(v(m(o),"position")))continue;1==(l=f(o))?h(o):l&&(s.data("kendoChart")||/^(?:img|tr|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(o.tagName))?h(o):u(o)}else 3==o.nodeType&&a&&(g(o,i),i=!1);x=_}function h(t){var n,i,r;return 1==t.nodeType&&t!==w&&function(e){var t=e.parentNode,n=t.firstChild;if(e===n)return!0;if(e===t.children[0]){if(7==n.nodeType||8==n.nodeType)return!0;if(3==n.nodeType)return!/\S/.test(n.data)}return!1}(t)?h(t.parentNode):(n=e(t).closest("table").find("colgroup"),i=p(),(r=y.createRange()).setStartBefore(w),r.setEndBefore(t),i.appendChild(r.extractContents()),w.parentNode.insertBefore(i,w),void(n[0]&&n.clone().prependTo(e(t).closest("table"))))}function p(){var t=y.createElement("KENDO-PDF-PAGE");return e(t).css({display:"block",boxSizing:"content-box",width:o||"auto",padding:s.top+"px "+s.right+"px "+s.bottom+"px "+s.left+"px",position:"relative",height:a||"auto",overflow:a||o?"hidden":"visible",clear:"both"}),l&&l.pageClassName&&(t.className=l.pageClassName),b.push(t),t}function f(e){var t,n,i=e.getBoundingClientRect();return 0===i.width||0===i.height?0:(t=w.getBoundingClientRect().top,n=a-x,i.height>n?3:i.top-t>n?1:i.bottom-t>n?2:0)}function g(e,t){var n,i,r,o,a;/\S/.test(e.data)&&(n=e.data.length,(i=y.createRange()).selectNodeContents(e),(r=f(i))&&(o=e,1==r?h(t?e.parentNode:e):(function t(n,r,o){return i.setEnd(e,r),n==r||r==o?r:f(i)?t(n,n+r>>1,r):t(r,r+o>>1,o)}(0,n>>1,n),!/\S/.test(""+i)&&t?h(e.parentNode):(o=e.splitText(i.endOffset),a=p(),i.setStartBefore(w),a.appendChild(i.extractContents()),w.parentNode.insertBefore(a,w))),g(o)))}var _=function(t){return null!=t?("string"==typeof t&&(t=kendo.template(t.replace(/^\s+|\s+$/g,""))),"function"==typeof t?function(n){var i=t(n);return i?e(i)[0]:void 0}:function(){return e(t).clone()[0]}):void 0}(l.template),y=i.ownerDocument,b=[],w=e(i).clone(!0,!0)[0],k=y.createElement("KENDO-PDF-DOCUMENT"),x=0;e(w).find("tfoot").each(function(){this.parentNode.appendChild(this)}),e(w).find("ol").each(function(){e(this).children().each(function(e){this.setAttribute("kendo-split-index",e)})}),e(k).css({display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"}),o&&(e(k).css({width:o,paddingLeft:s.left,paddingRight:s.right}),e(w).css({overflow:"hidden"})),k.appendChild(w),i.parentNode.insertBefore(k,i),l.beforePageBreak?setTimeout(function(){l.beforePageBreak(k,c)},15):setTimeout(c,15)}i||(i={});var s=e.Deferred();if(!(n=e(n)[0]))return s.reject("No element to export");if("function"!=typeof window.getComputedStyle)throw Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.");return kendo.pdf&&kendo.pdf.defineFont(r(n.ownerDocument)),d(n,function(){var e,t=i&&i.forcePageBreak,r=i&&i.paperSize&&"auto"!=i.paperSize,l=r&&kendo.pdf.getPaperOptions(function(e,t){return e in i?i[e]:t}),c=r&&l.paperSize[0],u=r&&l.paperSize[1],d=i.margin&&l.margin;t||u?(d||(d={left:0,top:0,right:0,bottom:0}),e=new Q.Group({pdf:{multiPage:!0,paperSize:r?l.paperSize:"auto"}}),a(function(t){if(i.progress){var n=!1,r=0;!function a(){t.pages.length>r?(e.append(o(t.pages[r])),i.progress({pageNum:++r,totalPages:t.pages.length,cancel:function(){n=!0}}),n?t.container.parentNode.removeChild(t.container):setTimeout(a)):(t.container.parentNode.removeChild(t.container),s.resolve(e))}()}else t.pages.forEach(function(t){e.append(o(t))}),t.container.parentNode.removeChild(t.container),s.resolve(e)},n,t,c?c-d.left-d.right:null,u?u-d.top-d.bottom:null,d,i)):s.resolve(o(n))}),s.promise()}function r(e){function t(e){if(e){var t=null;try{t=e.cssRules}catch(e){}t&&i(e,t)}}function n(e){var t,n=v(e.style,"src");return n?$(n).reduce(function(e,t){var n=Y(t);return n&&e.push(n),e},[]):(t=Y(e.cssText))?[t]:[]}function i(e,i){var o,a,s,l,c,u,d;for(o=0;i.length>o;++o)switch(a=i[o],a.type){case 3:t(a.styleSheet);break;case 5:s=a.style,l=$(v(s,"font-family")),c=/^(400|bold)$/i.test(v(s,"font-weight")),u="italic"==v(s,"font-style"),(d=n(a)).length>0&&r(e,l,c,u,d[0])}}function r(e,t,n,i,r){/^data:/i.test(r)||/^[^\/:]+:\/\//.test(r)||/^\//.test(r)||(r=(e.href+"").replace(/[^\/]*$/,"")+r),t.forEach(function(e){e=e.replace(/^(['"]?)(.*?)\1$/,"$2"),n&&(e+="|bold"),i&&(e+="|italic"),o[e]=r})}var o,a;for(null==e&&(e=document),o={},a=0;e.styleSheets.length>a;++a)t(e.styleSheets[a]);return o}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){var t=[],n=te;for(e="_counter_"+e;n;)o(n,e)&&t.push(n[e]),n=Object.getPrototypeOf(n);return t.reverse()}function s(e,t){var n=te;for(e="_counter_"+e;n&&!o(n,e);)n=Object.getPrototypeOf(n);n||(n=te._root),n[e]=(n[e]||0)+(null==t?1:t)}function l(e,t){te[e="_counter_"+e]=null==t?0:t}function c(e,n,i){var r,o,a;for(r=0;e.length>r;)o=e[r++],a=t(e[r]),isNaN(a)?n(o,i):(n(o,a),++r)}function u(e,t){var n=kendo.parseColor(e);return n&&(n=n.toRGB(),t?n=n.toCssRgba():0===n.a&&(n=null)),n}function d(e,t){function n(e){ee[e]||(ee[e]=!0,o.push(e))}function i(){--r<=0&&t()}var r,o=[];!function e(t){/^img$/i.test(t.tagName)&&n(t.src),G(v(m(t),"background-image")).forEach(function(e){"url"==e.type&&n(e.url)}),t.children&&K.call(t.children).forEach(e)}(e),0===(r=o.length)&&i(),o.forEach(function(e){var t=ee[e]=new Image;/^data:/i.test(e)||(t.crossOrigin="Anonymous"),t.src=e,t.complete?i():(t.onload=i,t.onerror=function(){ee[e]=null,i()})})}function h(e){for(var t={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1000:"m"},n=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],i="";e>0;)n[0]>e?n.shift():(i+=t[n[0]],e-=n[0]);return i}function p(e){var t,i="";do{t=e%26,i=String.fromCharCode(97+t)+i,e=n.floor(e/26)}while(e>0);return i}function f(e,t,n){var i,r;(te=Object.create(te))[e.tagName.toLowerCase()]={element:e,style:t},(i=v(t,"text-decoration"))&&"none"!=i&&(r=v(t,"color"),i.split(/\s+/g).forEach(function(e){te[e]||(te[e]=r)})),function(e){function t(t){return v(e,t)}return"none"!=t("transform")||"static"!=t("position")&&"auto"!=t("z-index")||t("opacity")<1||void 0}(t)&&(te._stackingContext={element:e,group:n})}function g(e){if(null!=te._clipbox){var t=e.bbox(te._matrix);te._clipbox=te._clipbox?X.Rect.intersect(te._clipbox,t):t}}function m(e,t){return window.getComputedStyle(e,t||null)}function v(e,t){return e.getPropertyValue(t)||Z.webkit&&e.getPropertyValue("-webkit-"+t)||Z.mozilla&&e.getPropertyValue("-moz-"+t)||Z.opera&&e.getPropertyValue("-o-"+t)||Z.msie&&e.getPropertyValue("-ms-"+t)}function _(e,t,n,i){e.setProperty(t,n,i),Z.webkit?e.setProperty("-webkit-"+t,n,i):Z.mozilla?e.setProperty("-moz-"+t,n,i):Z.opera?e.setProperty("-o-"+t,n,i):Z.msie&&(e.setProperty("-ms-"+t,n,i),e[t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,n){return t+n.toUpperCase()})]=n)}function y(e,n){return{width:t(v(e,(n="border-"+n)+"-width")),style:v(e,n+"-style"),color:u(v(e,n+"-color"),!0)}}function b(e,t){var n=e.style.cssText,i=t();return e.style.cssText=n,i}function w(e,n){var i=v(e,"border-"+n+"-radius").split(/\s+/g).map(t);return 1==i.length&&i.push(i[0]),A({x:i[0],y:i[1]})}function k(e,n,i){var r,o,a,s,l;return"string"==typeof n?(r=m(i),o=t(v(r,n.replace("*","top"))),a=t(v(r,n.replace("*","right"))),s=t(v(r,n.replace("*","bottom"))),l=t(v(r,n.replace("*","left")))):"number"==typeof n&&(o=a=s=l=n),{top:e.top+o,right:e.right-a,bottom:e.bottom-s,left:e.left+l,width:e.right-e.left-a-l,height:e.bottom-e.top-s-o}}function x(e){return 180*e/n.PI%360}function C(e){var i=t(e);return/grad$/.test(e)?n.PI*i/200:/rad$/.test(e)?i:/turn$/.test(e)?n.PI*i*2:/deg$/.test(e)?n.PI*i/180:void 0}function T(e,t){return t=new X.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),e.transform(t),t}function S(e,t){e.clip(t)}function D(e,t,n,i){for(var r=new X.Arc([t,n],i).curvePoints(),o=1;r.length>o;)e.curveTo(r[o++],r[o++],r[o++])}function A(e){return(0>=e.x||0>=e.y)&&(e.x=e.y=0),e}function M(e,t,i,r,o){var a=n.max(0,t.x),s=n.max(0,t.y),l=n.max(0,i.x),c=n.max(0,i.y),u=n.max(0,r.x),d=n.max(0,r.y),h=n.max(0,o.x),p=n.max(0,o.y),f=n.min(e.width/(a+l),e.height/(c+d),e.width/(u+h),e.height/(p+s));return 1>f&&(a*=f,s*=f,l*=f,c*=f,u*=f,d*=f,h*=f,p*=f),{tl:{x:a,y:s},tr:{x:l,y:c},br:{x:u,y:d},bl:{x:h,y:p}}}function E(e,n,i){var r,o,a,s,l,c,u,d,h=m(e),p=w(h,"top-left"),f=w(h,"top-right"),g=w(h,"bottom-left"),_=w(h,"bottom-right");return("padding"==i||"content"==i)&&(r=y(h,"top"),o=y(h,"right"),a=y(h,"bottom"),s=y(h,"left"),p.x-=s.width,p.y-=r.width,f.x-=o.width,f.y-=r.width,_.x-=o.width,_.y-=a.width,g.x-=s.width,g.y-=a.width,"content"==i&&(l=t(v(h,"padding-top")),c=t(v(h,"padding-right")),u=t(v(h,"padding-bottom")),d=t(v(h,"padding-left")),p.x-=d,p.y-=l,f.x-=c,f.y-=l,_.x-=c,_.y-=u,g.x-=d,g.y-=u)),"number"==typeof i&&(p.x-=i,p.y-=i,f.x-=i,f.y-=i,_.x-=i,_.y-=i,g.x-=i,g.y-=i),I(n,p,f,_,g)}function I(e,t,n,i,r){var o=M(e,t,n,i,r),a=o.tl,s=o.tr,l=o.br,c=o.bl,u=new Q.Path({fill:null,stroke:null});return u.moveTo(e.left,e.top+a.y),a.x&&D(u,e.left+a.x,e.top+a.y,{startAngle:-180,endAngle:-90,radiusX:a.x,radiusY:a.y}),u.lineTo(e.right-s.x,e.top),s.x&&D(u,e.right-s.x,e.top+s.y,{startAngle:-90,endAngle:0,radiusX:s.x,radiusY:s.y}),u.lineTo(e.right,e.bottom-l.y),l.x&&D(u,e.right-l.x,e.bottom-l.y,{startAngle:0,endAngle:90,radiusX:l.x,radiusY:l.y}),u.lineTo(e.left+c.x,e.bottom),c.x&&D(u,e.left+c.x,e.bottom-c.y,{startAngle:90,endAngle:180,radiusX:c.x,radiusY:c.y}),u.close()}function R(e,n){var i=t(e)+"";switch(n){case"decimal-leading-zero":return 2>i.length&&(i="0"+i),i;case"lower-roman":return h(e);case"upper-roman":return h(e).toUpperCase();case"lower-latin":case"lower-alpha":return p(e-1);case"upper-latin":case"upper-alpha":return p(e-1).toUpperCase();default:return i}}function P(e,t){function n(e,t,n){return n?(n=n.replace(/^\s*(["'])(.*)\1\s*$/,"$2"),a(e).map(function(e){return R(e,t)}).join(n)):R(function(e){return te[e="_counter_"+e]}(e)||0,t)}var i,r=[];return $(t,/^\s+/).forEach(function(t){var o;(i=/^\s*(["'])(.*)\1\s*$/.exec(t))?r.push(i[2].replace(/\\([0-9a-f]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})):(i=/^\s*counter\((.*?)\)\s*$/.exec(t))?(o=$(i[1]),r.push(n(o[0],o[1]))):(i=/^\s*counters\((.*?)\)\s*$/.exec(t))?(o=$(i[1]),r.push(n(o[0],o[2],o[1]))):r.push((i=/^\s*attr\((.*?)\)\s*$/.exec(t))?e.getAttribute(i[1])||"":t)}),r.join("")}function L(e){var t,n;if(e.cssText)return e.cssText;for(t=[],n=0;e.length>n;++n)t.push(e[n]+": "+v(e,e[n]));return t.join(";\n")}function F(e,n){function i(n,i){var o,a=m(e,n);a.content&&"normal"!=a.content&&"none"!=a.content&&"0px"!=a.width&&((o=e.ownerDocument.createElement(J)).style.cssText=L(a),o.textContent=P(e,a.content),e.insertBefore(o,i),":before"!=n||/absolute|fixed/.test(v(o.style,"position"))||(o.style.marginLeft=t(v(o.style,"margin-left"))-o.offsetWidth+"px"),r.push(o))}if(e.tagName!=J){var r=[];i(":before",e.firstChild),i(":after",null),B(e,n),r.forEach(function(t){e.removeChild(t)})}else B(e,n)}function B(i,r){function o(e,t,i,o,a,s,l,c){function u(t,r,o){var a=n.PI/2*t/(t+i),s={x:r.x-t,y:r.y-i},l=new Q.Path({fill:{color:e},stroke:null}).moveTo(0,0);T(l,o),D(l,0,r.y,{startAngle:-90,endAngle:-x(a),radiusX:r.x,radiusY:r.y}),s.x>0&&s.y>0?(l.lineTo(s.x*n.cos(a),r.y-s.y*n.sin(a)),D(l,0,r.y,{startAngle:-x(a),endAngle:-90,radiusX:s.x,radiusY:s.y,anticlockwise:!0})):s.x>0?l.lineTo(s.x,i).lineTo(0,i):l.lineTo(s.x,i).lineTo(s.x,0),h.append(l.close())}if(!(0>=i)){var d,h=new Q.Group;T(h,c),r.append(h),A(s),A(l),d=new Q.Path({fill:{color:e},stroke:null}),h.append(d),d.moveTo(s.x?n.max(s.x,o):0,0).lineTo(t-(l.x?n.max(l.x,a):0),0).lineTo(t-n.max(l.x,a),i).lineTo(n.max(s.x,o),i).close(),s.x&&u(o,s,[-1,0,0,1,s.x,0]),l.x&&u(a,l,[1,0,0,1,t-l.x,0])}}function a(t){var n,o,a=new Q.Group;for(S(a,I(t,U,j,Y,q)),r.append(a),"A"==i.tagName&&i.href&&!/^#?$/.test(e(i).attr("href"))&&(a._pdfLink={url:i.href,top:t.top,right:t.right,bottom:t.bottom,left:t.left}),ie&&((n=new Q.Path({fill:{color:ie.toCssRgba()},stroke:null})).moveTo(t.left,t.top).lineTo(t.right,t.top).lineTo(t.right,t.bottom).lineTo(t.left,t.bottom).close(),a.append(n)),o=c.length;--o>=0;)s(a,t,c[o],d[o%d.length],f[o%f.length],_[o%_.length],C[o%C.length])}function s(e,n,r,o,a,s,l){function c(e,n,r,c,u){function d(){for(;m.origin.x>n.left;)m.origin.x-=r}function h(){for(;m.origin.y>n.top;)m.origin.y-=c}function p(){for(;n.right>m.origin.x;)u(e,m.clone()),m.origin.x+=r}var f,g,m,v,_=r/c,y=n;if("content-box"==s?y=k(y=k(y,"border-*-width",i),"padding-*",i):"padding-box"==s&&(y=k(y,"border-*-width",i)),/^\s*auto(\s+auto)?\s*$/.test(l)||(f=l.split(/\s+/g),r=/%$/.test(f[0])?y.width*t(f[0])/100:t(f[0]),c=1==f.length||"auto"==f[1]?r/_:/%$/.test(f[1])?y.height*t(f[1])/100:t(f[1])),1==(g=(a+"").split(/\s+/)).length&&(g[1]="50%"),g[0]=/%$/.test(g[0])?t(g[0])/100*(y.width-r):t(g[0]),g[1]=/%$/.test(g[1])?t(g[1])/100*(y.height-c):t(g[1]),m=new X.Rect([y.left+g[0],y.top+g[1]],[r,c]),"no-repeat"==o)u(e,m);else if("repeat-x"==o)d(),p();else if("repeat-y"==o)for(h();n.bottom>m.origin.y;)u(e,m.clone()),m.origin.y+=c;else if("repeat"==o)for(d(),h(),v=m.origin.clone();n.bottom>m.origin.y;)m.origin.x=v.x,p(),m.origin.y+=c}if(r&&"none"!=r)if("url"==r.type){if(/^url\(\"data:image\/svg/i.test(r.url))return;var u=ee[r.url];u&&u.width>0&&u.height>0&&c(e,n,u.width,u.height,function(e,t){e.append(new Q.Image(r.url,t))})}else{if("linear"!=r.type)return;c(e,n,n.width,n.height,z(r))}}function l(e,t,n){function s(e){return{x:e.y,y:e.x}}var l,c,u,d,h,p,f,g;if(0!==e.width&&0!==e.height&&(a(e),l=O.width>0&&(t&&"ltr"==ne||n&&"rtl"==ne),c=H.width>0&&(n&&"ltr"==ne||t&&"rtl"==ne),0!==B.width||0!==O.width||0!==H.width||0!==N.width)){if(B.color==H.color&&B.color==N.color&&B.color==O.color&&B.width==H.width&&B.width==N.width&&B.width==O.width&&l&&c)return e=k(e,B.width/2),(u=E(i,e,B.width/2)).options.stroke={color:B.color,width:B.width},void r.append(u);if(0===U.x&&0===j.x&&0===Y.x&&0===q.x&&2>B.width&&2>O.width&&2>H.width&&2>N.width)return B.width>0&&r.append(new Q.Path({stroke:{width:B.width,color:B.color}}).moveTo(e.left,e.top+B.width/2).lineTo(e.right,e.top+B.width/2)),N.width>0&&r.append(new Q.Path({stroke:{width:N.width,color:N.color}}).moveTo(e.left,e.bottom-N.width/2).lineTo(e.right,e.bottom-N.width/2)),l&&r.append(new Q.Path({stroke:{width:O.width,color:O.color}}).moveTo(e.left+O.width/2,e.top).lineTo(e.left+O.width/2,e.bottom)),void(c&&r.append(new Q.Path({stroke:{width:H.width,color:H.color}}).moveTo(e.right-H.width/2,e.top).lineTo(e.right-H.width/2,e.bottom)));h=(d=M(e,U,j,Y,q)).tl,p=d.tr,f=d.br,g=d.bl,o(B.color,e.width,B.width,O.width,H.width,h,p,[1,0,0,1,e.left,e.top]),o(N.color,e.width,N.width,H.width,O.width,f,g,[-1,0,0,-1,e.right,e.bottom]),o(O.color,e.height,O.width,N.width,B.width,s(g),s(h),[0,-1,1,0,e.left,e.bottom]),o(H.color,e.height,H.width,B.width,N.width,s(p),s(f),[0,1,-1,0,e.right,e.top])}}var c,d,f,_,C,R,P,L,F=m(i),B=y(F,"top"),H=y(F,"right"),N=y(F,"bottom"),O=y(F,"left"),U=w(F,"top-left"),j=w(F,"top-right"),q=w(F,"bottom-left"),Y=w(F,"bottom-right"),ne=v(F,"direction"),ie=v(F,"background-color");for(ie=u(ie),c=G(v(F,"background-image")),d=$(v(F,"background-repeat")),f=$(v(F,"background-position")),_=$(v(F,"background-origin")),C=$(v(F,"background-size")),Z.msie&&10>Z.version&&(f=$(i.currentStyle.backgroundPosition)),R=k(i.getBoundingClientRect(),"border-*-width",i),function(){var e,n,i,o,a,s,l,c=v(F,"clip"),u=/^\s*rect\((.*)\)\s*$/.exec(c);u&&(n="auto"==(e=u[1].split(/[ ,]+/g))[0]?R.top:t(e[0])+R.top,i="auto"==e[1]?R.right:t(e[1])+R.left,o="auto"==e[2]?R.bottom:t(e[2])+R.top,a="auto"==e[3]?R.left:t(e[3])+R.left,S(s=new Q.Group,l=(new Q.Path).moveTo(a,n).lineTo(i,n).lineTo(i,o).lineTo(a,o).close()),r.append(s),r=s,g(l))}(),1==(P=i.getClientRects()).length&&(P=[i.getBoundingClientRect()]),P=function(e){var t,n,r,o,a;if(/^td$/i.test(i.tagName)&&(t=te.table)&&"collapse"==v(t.style,"border-collapse")){if(n=y(t.style,"left").width,r=y(t.style,"top").width,0===n&&0===r)return e;if(o=t.element.getBoundingClientRect(),(a=t.element.rows[0].cells[0].getBoundingClientRect()).top==o.top||a.left==o.left)return K.call(e).map(function(e){return{left:e.left+n,top:e.top+r,right:e.right+n,bottom:e.bottom+r,height:e.height,width:e.width}})}return e}(P),L=0;P.length>L;++L)l(P[L],0===L,L==P.length-1);return P.length>0&&"list-item"==v(F,"display")&&function(){function e(e){b(i,function(){i.style.position="relative";var t=i.ownerDocument.createElement(J);t.style.position="absolute",t.style.boxSizing="border-box","outside"==n?(t.style.width="6em",t.style.left="-6.8em",t.style.textAlign="right"):t.style.left="0px",e(t),i.insertBefore(t,i.firstChild),W(t,r),i.removeChild(t)})}function t(e){var t,n=i.parentNode.children,r=i.getAttribute("kendo-split-index");if(null!=r)return e(0|r,n.length);for(t=0;n.length>t;++t)if(n[t]===i)return e(t,n.length)}var n,o=v(F,"list-style-type");if("none"!=o)switch(v(F,"list-style-image"),n=v(F,"list-style-position"),o){case"circle":case"disc":case"square":e(function(e){e.style.fontSize="60%",e.style.lineHeight="200%",e.style.paddingRight="0.5em",e.style.fontFamily="DejaVu Serif",e.innerHTML={disc:"●",circle:"◯",square:"■"}[o]});break;case"decimal":case"decimal-leading-zero":e(function(e){t(function(t){++t,"decimal-leading-zero"==o&&2>(t+"").length&&(t="0"+t),e.innerHTML=t+"."})});break;case"lower-roman":case"upper-roman":e(function(e){t(function(t){t=h(t+1),"upper-roman"==o&&(t=t.toUpperCase()),e.innerHTML=t+"."})});break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":e(function(e){t(function(t){t=p(t),/^upper/i.test(o)&&(t=t.toUpperCase()),e.innerHTML=t+"."})})}}(P[0]),function(){function e(){var e=E(i,R,"padding"),t=new Q.Group;S(t,e),r.append(t),r=t,g(e)}!function(e){return/^(?:textarea|select|input)$/i.test(e.tagName)}(i)?/^(hidden|auto|scroll)/.test(v(F,"overflow"))?e():/^(hidden|auto|scroll)/.test(v(F,"overflow-x"))?e():/^(hidden|auto|scroll)/.test(v(F,"overflow-y"))&&e():e()}(),function(t,n){var i,r,o,a;return t.getAttribute(kendo.attr("role"))&&(i=kendo.widgetInstance(e(t)))&&(i.exportDOMVisual||i.exportVisual)?!!(r=i.exportDOMVisual?i.exportDOMVisual():i.exportVisual())&&((o=new Q.Group).children.push(r),a=t.getBoundingClientRect(),o.transform(X.transform().translate(a.left,a.top)),n.append(o),!0):void 0}(i,r)||V(i,r),r}function z(e){return function(i,r){var o,a,s,l,c,u,d,h,p,f,g,m,v,_=r.width(),y=r.height();switch(r.topLeft(),e.type){case"linear":switch(o=null!=e.angle?e.angle:n.PI,e.to){case"top":o=0;break;case"left":o=-n.PI/2;break;case"bottom":o=n.PI;break;case"right":o=n.PI/2;break;case"top left":case"left top":o=-n.atan2(y,_);break;case"top right":case"right top":o=n.atan2(y,_);break;case"bottom left":case"left bottom":o=n.PI+n.atan2(y,_);break;case"bottom right":case"right bottom":o=n.PI-n.atan2(y,_)}e.reverse&&(o-=n.PI),0>(o%=2*n.PI)&&(o+=2*n.PI),a=n.abs(_*n.sin(o))+n.abs(y*n.cos(o)),s=n.atan(_*n.tan(o)/y),l=n.sin(s),c=n.cos(s),d=(u=n.abs(l)+n.abs(c))/2*l,h=u/2*c,o>n.PI/2&&3*n.PI/2>=o&&(d=-d,h=-h),p=[],f=0,g=e.stops.map(function(n,i){var r,o=n.percent;return o?o=t(o)/100:n.length?o=t(n.length)/a:0===i?o=0:i==e.stops.length-1&&(o=1),r={color:n.color.toCssRgba(),offset:o},null!=o?(f=o,p.forEach(function(e,t){e.stop.offset=e.left+(f-e.left)*(t+1)/(p.length+1)}),p=[]):p.push({left:f,stop:r}),r}),m=[.5-d,.5+h],v=[.5+d,.5-h],i.append(Q.Path.fromRect(r).stroke(null).fill(new Q.LinearGradient({start:m,end:v,stops:g,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}}function H(e,t,n){var i=function(e){var t=e.getBoundingClientRect();return k(t=k(t,"border-*-width",e),"padding-*",e)}(e),r=new X.Rect([i.left,i.top],[i.width,i.height]),o=new Q.Image(t,r);S(o,E(e,i,"content")),n.append(o)}function N(e,n){var i=m(e),r=m(n),o=t(v(i,"z-index")),a=t(v(r,"z-index")),s=v(i,"position"),l=v(r,"position");return isNaN(o)&&isNaN(a)?/static|absolute/.test(s)&&/static|absolute/.test(l)?0:"static"==s?-1:"static"==l?1:0:isNaN(o)?0===a?0:a>0?-1:1:isNaN(a)?0===o?0:o>0?1:-1:t(o)-t(a)}function O(e,t){var i=v(m(e),"color"),r=e.getBoundingClientRect();"checkbox"==e.type?(t.append(Q.Path.fromRect(new X.Rect([r.left+1,r.top+1],[r.width-2,r.height-2])).stroke(i,1)),e.checked&&t.append((new Q.Path).stroke(i,1.2).moveTo(r.left+.22*r.width,r.top+.55*r.height).lineTo(r.left+.45*r.width,r.top+.75*r.height).lineTo(r.left+.78*r.width,r.top+.22*r.width))):(t.append(new Q.Circle(new X.Circle([(r.left+r.right)/2,(r.top+r.bottom)/2],n.min(r.width-2,r.height-2)/2)).stroke(i,1)),e.checked&&t.append(new Q.Circle(new X.Circle([(r.left+r.right)/2,(r.top+r.bottom)/2],n.min(r.width-8,r.height-8)/2)).fill(i).stroke(null)))}function V(e,t){var n,i,r,o,a,s,l,c;switch(te._stackingContext.element===e&&(te._stackingContext.group=t),e.tagName.toLowerCase()){case"img":H(e,e.src,t);break;case"canvas":try{H(e,e.toDataURL("image/png"),t)}catch(e){}break;case"textarea":case"input":case"select":!function(e,t){var n,i,r,o,a,s=e.tagName.toLowerCase();if("input"==s&&("checkbox"==e.type||"radio"==e.type))return O(e,t);if(n=e.parentNode,(r=(i=e.ownerDocument).createElement(J)).style.cssText=L(m(e)),r.style.display="inline-block","input"==s&&(r.style.whiteSpace="pre"),("select"==s||"textarea"==s)&&(r.style.overflow="auto"),"select"==s)if(e.multiple)for(a=0;e.options.length>a;++a)(o=i.createElement(J)).style.cssText=L(m(e.options[a])),o.style.display="block",o.textContent=e.options[a].textContent,r.appendChild(o);else(o=function(e){return e.selectedOptions&&e.selectedOptions.length>0?e.selectedOptions[0]:e.options[e.selectedIndex]}(e))&&(r.textContent=o.textContent);else r.textContent=e.value;n.insertBefore(r,e),r.scrollLeft=e.scrollLeft,r.scrollTop=e.scrollTop,V(r,t),n.removeChild(r)}(e,t);break;default:for(n=[],i=[],r=[],o=[],a=e.firstChild;a;a=a.nextSibling)switch(a.nodeType){case 3:/\S/.test(a.data)&&U(e,a,t);break;case 1:l=v(s=m(a),"display"),c=v(s,"float"),"static"!=v(s,"position")?o.push(a):"inline"!=l?"none"!=c?i.push(a):n.push(a):r.push(a)}n.sort(N).forEach(function(e){W(e,t)}),i.sort(N).forEach(function(e){W(e,t)}),r.sort(N).forEach(function(e){W(e,t)}),o.sort(N).forEach(function(e){W(e,t)})}}function U(e,i,r){function o(){var e,t,r,o,s,d,h,p=c,f=l.substr(c).search(/\S/);if(c+=f,0>f||c>=u)return!0;if(g.setStart(i,c),g.setEnd(i,c+1),e=g.getBoundingClientRect(),t=!1,y&&(f=l.substr(c).search(/\s/))>=0&&(g.setEnd(i,c+f),(r=g.getBoundingClientRect()).bottom==e.bottom&&(e=r,t=!0,c+=f)),!t){if((f=function t(n,r,o){g.setEnd(i,r);var a=function(e){if(Z.msie||Z.chrome){var t=e.getClientRects();if(2==t.length&&1>=t[1].width)return t[0];if(3==t.length&&1>=t[0].width&&1>=t[2].width)return t[1]}return e.getBoundingClientRect()}(g);return a.bottom!=e.bottom&&r>n?t(n,n+r>>1,r):a.right!=e.right?(e=a,o>r?t(r,r+o>>1,o):r):r}(c,n.min(u,c+w),u))==c)return!0;if(c=f,0===(f=(""+g).search(/\s+$/)))return;f>0&&(g.setEnd(i,g.startOffset+f),e=g.getBoundingClientRect())}if(Z.msie&&(e=g.getClientRects()[0]),o=""+g,/^(?:pre|pre-wrap)$/i.test(b)){if(/\t/.test(o)){for(s=0,f=p;g.startOffset>f;++f)9==(d=l.charCodeAt(f))?s+=8-s%8:10==d||13==d?s=0:s++;for(;(f=o.search("\t"))>=0;)h="        ".substr(0,8-(s+f)%8),o=o.substr(0,f)+h+o.substr(f+1)}}else o=o.replace(/\s+/g," ");a(o,e)}function a(e,t){var n,i,o;Z.msie&&!isNaN(h)&&(n=Q.util.measureText(e,{font:p}),t={top:i=(t.top+t.bottom-n.height)/2,right:t.right,bottom:i+n.height,left:t.left,height:n.height,width:t.right-t.left}),o=new q(e,new X.Rect([t.left,t.top],[t.width,t.height]),{font:p,fill:{color:f}}),r.append(o),function(e){function t(t,n){var i,o;t&&(i=d/12,o=new Q.Path({stroke:{width:i,color:t}}),n-=i,o.moveTo(e.left,n).lineTo(e.right,n),r.append(o))}t(te.underline,e.bottom),t(te["line-through"],e.bottom-e.height/2.7),t(te.overline,e.top)}(t)}var s,l,c,u,d,h,p,f,g,_,y,b,w;if(!function(){var e=te._clipbox;return null==e||(e?0===e.width()||0===e.height():void 0)}()&&(s=m(e),!(t(v(s,"text-indent"))<-500)&&(l=i.data,c=0,(u=l.search(/\S\s*$/)+1)&&(d=v(s,"font-size"),h=v(s,"line-height"),p=[v(s,"font-style"),v(s,"font-variant"),v(s,"font-weight"),d,v(s,"font-family")].join(" "),d=t(d),h=t(h),0!==d))))for(f=v(s,"color"),g=e.ownerDocument.createRange(),_=v(s,"text-align"),y="justify"==_,b=v(s,"white-space"),0==(w=e.getBoundingClientRect().width/d*5)&&(w=500);!o(););}function W(e,n){var i,r,o,a,u,d,h,p=m(e),g=v(p,"counter-reset");g&&c($(g,/^\s+/),l,0),(i=v(p,"counter-increment"))&&c($(i,/^\s+/),s,1),/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(e.tagName)||null!=te._clipbox&&(r=t(v(p,"opacity")),o=v(p,"visibility"),a=v(p,"display"),0!==r&&"hidden"!=o&&"none"!=a&&(u=function(e){var n,i,r=v(e,"transform");return"none"==r?null:(n=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(r))?(i=v(e,"transform-origin"),{matrix:n=n[1].split(/\s*,\s*/g).map(t),origin:i=i.split(/\s+/g).map(t)}):void 0}(p),h=v(p,"z-index"),(u||1>r)&&"auto"==h&&(h=0),d=function(e,n,i){var r,o,a,s,l,c;for("auto"!=i?(r=te._stackingContext.group,i=t(i)):(r=n,i=0),o=r.children,a=0;o.length>a&&!(null!=o[a]._dom_zIndex&&o[a]._dom_zIndex>i);++a);return s=new Q.Group,r.insertAt(s,a),s._dom_zIndex=i,r!==n&&te._clipbox&&(l=te._matrix.invert(),c=te._clipbox.transformCopy(l),S(s,Q.Path.fromRect(c))),s}(0,n,h),1>r&&d.opacity(r*d.opacity()),f(e,p,d),u?b(e,function(){var t,n,i,r;_(e.style,"transform","none","important"),_(e.style,"transition","none","important"),"static"==v(p,"position")&&_(e.style,"position","relative","important"),r=j(r=j(r=[1,0,0,1,-(n=(t=e.getBoundingClientRect()).left+u.origin[0]),-(i=t.top+u.origin[1])],u.matrix),[1,0,0,1,n,i]),r=T(d,r),te._matrix=te._matrix.multiplyCopy(r),F(e,d)}):F(e,d),te=Object.getPrototypeOf(te)))}function j(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],u=t[2],d=t[3];return[n*l+i*u,n*c+i*d,r*l+o*u,r*c+o*d,a*l+s*u+t[4],a*c+s*d+t[5]]}var q,G,$,Y,Q=kendo.drawing,X=kendo.geometry,K=Array.prototype.slice,Z=kendo.support.browser,J="KENDO-PSEUDO-ELEMENT",ee={},te={};te._root=te,q=Q.Text.extend({nodeType:"Text",init:function(e,t,n){Q.Text.fn.init.call(this,e,t.getOrigin(),n),this._pdfRect=t},rect:function(){return this._pdfRect},rawBBox:function(){return this._pdfRect}}),Q.drawDOM=i,i.getFontFaces=r,G=function(){function e(e){function f(t){!function(){var t=s.exec(e);t&&(e=e.substr(t[1].length))}();var n=t.exec(e);return n?(e=e.substr(n[1].length),n[1]):void 0}function g(){var t,r,o=kendo.parseColor(e,!0);return o?(e=e.substr(o.match[0].length),o=o.toRGB(),(t=f(i))||(r=f(n)),{color:o,length:t,percent:r}):void 0}var m,v=e;return o(p,v)?p[v]:((m=f(t))?m=function(t){var i,o,s,d,h,p,m=[],v=!1;if(f(l)){for((i=f(a))?(i=C(i),f(u)):("to"==(o=f(r))?o=f(r):o&&/^-/.test(t)&&(v=!0),s=f(r),f(u)),/-moz-/.test(t)&&null==i&&null==o&&(d=f(n),h=f(n),v=!0,"0%"==d?o="left":"100%"==d&&(o="right"),"0%"==h?s="top":"100%"==h&&(s="bottom"),f(u));e&&!f(c)&&(p=g());)m.push(p),f(u);return{type:"linear",angle:i,to:o&&s?o+" "+s:o||s||null,stops:m,reverse:v}}}(m):(m=f(d))&&(m=function(){if(f(l)){var e=f(h);return e=e.replace(/^['"]+|["']+$/g,""),f(c),{type:"url",url:e}}}()),p[v]=m||{type:"none"})}var t=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,n=/^([-0-9.]+%)/,i=/^([-0-9.]+px)/,r=/^(left|right|top|bottom|to|center)\W/,a=/^([-0-9.]+(deg|grad|rad|turn))/,s=/^(\s+)/,l=/^(\()/,c=/^(\))/,u=/^(,)/,d=/^(url)\(/,h=/^(.*?)\)/,p={},f={};return function(t){return o(f,t)?f[t]:f[t]=$(t).map(e)}}(),$=function(){var e={};return function(t,n){function i(e){return h=e.exec(t.substr(c))}function r(e){return e.replace(/^\s+|\s+$/g,"")}var a,s,l,c,u,d,h;if(n||(n=/^\s*,\s*/),o(e,a=t+n))return e[a];for(s=[],l=0,c=0,u=0,d=!1;t.length>c;)!d&&i(/^[\(\[\{]/)?(u++,c++):!d&&i(/^[\)\]\}]/)?(u--,c++):!d&&i(/^[\"\']/)?(d=h[0],c++):"'"==d&&i(/^\\\'/)?c+=2:'"'==d&&i(/^\\\"/)?c+=2:"'"==d&&i(/^\'/)?(d=!1,c++):'"'==d&&i(/^\"/)?(d=!1,c++):i(n)?(!d&&!u&&c>l&&(s.push(r(t.substring(l,c))),l=c+h[0].length),c+=h[0].length):c++;return c>l&&s.push(r(t.substring(l,c))),e[a]=s}}(),Y=function(){var e={};return function(t){var n,i=e[t];return i||((n=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(t))?i=e[t]=n[2]:(n=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(t))&&(i=e[t]=n[2])),i}}()}(window.kendo.jQuery,parseFloat,Math),function(e){var t=e.noop,n=window.kendo,i=n.Class,r=n.util,o=n.animationFrame,a=n.deepExtend,s=i.extend({init:function(e,t){var n=this;n.options=a({},n.options,t),n.element=e},options:{duration:500,easing:"swing"},setup:t,step:t,play:function(){var t=this,n=t.options,i=e.easing[n.easing],a=n.duration,s=n.delay||0,l=r.now()+s,c=l+a;0===a?(t.step(1),t.abort()):setTimeout(function(){var e=function(){var n,s,u;t._stopped||(n=r.now(),s=r.limitValue(n-l,0,a),u=i(s/a,s,0,1,a),t.step(u),c>n?o(e):t.abort())};e()},s)},abort:function(){this._stopped=!0},destroy:function(){this.abort()}}),l=function(){this._items=[]};l.prototype={register:function(e,t){this._items.push({name:e,type:t})},create:function(e,t){var n,i,r,o=this._items;if(t&&t.type)for(i=t.type.toLowerCase(),r=0;o.length>r;r++)if(o[r].name.toLowerCase()===i){n=o[r];break}return n?new n.type(e,t):void 0}},l.current=new l,s.create=function(e,t,n){return l.current.create(e,t,n)},a(n.drawing,{Animation:s,AnimationFactory:l})}(window.kendo.jQuery,Math),function(e){function t(t,n){var r,o,a,l=e();for(o=0,a=t.length;a>o;o++)r=t[o],s.test(r.className)&&r.getAttribute(i.attr("for"))===n&&(l=l.add(r));return l}var n,i=window.kendo,r=i.ui.Widget,o=".kendoValidator",a="k-invalid-msg",s=RegExp(a,"i"),l=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,c=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,u=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",d=":checkbox:not([disabled],[readonly])",h="[type=number],[type=range]",p="blur",f="name",g="form",m="novalidate",v=e.proxy,_=function(e,t){return"string"==typeof t&&(t=RegExp("^(?:"+t+")$")),t.test(e)},y=function(e,t,n){var i=e.val();return!e.filter(t).length||""===i||_(i,n)};i.ui.validator||(i.ui.validator={rules:{},messages:{}}),n=r.extend({init:function(t,n){var o=this,a=function(t){var n,r=i.ui.validator.ruleResolvers||{},o={};for(n in r)e.extend(!0,o,r[n].resolve(t));return o}(t),s="["+i.attr("validate")+"!=false]";(n=n||{}).rules=e.extend({},i.ui.validator.rules,a.rules,n.rules),n.messages=e.extend({},i.ui.validator.messages,a.messages,n.messages),r.fn.init.call(o,t,n),o._errorTemplate=i.template(o.options.errorTemplate),o.element.is(g)&&o.element.attr(m,m),o._inputSelector=u+s,o._checkboxSelector=d+s,o._errors={},o._attachEvents(),o._isValidated=!1},events:["validate","change"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),n=e.val();return!(function(e,t){return!!e.length&&null!=e[0].attributes[t]}(e,"required")&&(""===n||!n||t))},pattern:function(e){return!e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length||""===e.val()||_(e.val(),e.attr("pattern"))},min:function(e){if(e.filter(h+",["+i.attr("type")+"=number]").filter("[min]").length&&""!==e.val()){var t=parseFloat(e.attr("min"))||0;return i.parseFloat(e.val())>=t}return!0},max:function(e){return!e.filter(h+",["+i.attr("type")+"=number]").filter("[max]").length||""===e.val()||(parseFloat(e.attr("max"))||0)>=i.parseFloat(e.val())},step:function(e){if(e.filter(h+",["+i.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,n=parseFloat(e.attr("min"))||0,r=parseFloat(e.attr("step"))||1,o=parseFloat(e.val()),a=function(e){return(e=(e+"").split(".")).length>1?e[1].length:0}(r);return a?(t=Math.pow(10,a),Math.floor((o-n)*t)%(r*t)/Math.pow(100,a)==0):(o-n)%r==0}return!0},email:function(e){return y(e,"[type=email],["+i.attr("type")+"=email]",l)},url:function(e){return y(e,"[type=url],["+i.attr("type")+"=url]",c)},date:function(e){return!e.filter("[type^=date],["+i.attr("type")+"=date]").length||""===e.val()||null!==i.parseDate(e.val(),e.attr(i.attr("format")))}},validateOnBlur:!0},destroy:function(){r.fn.destroy.call(this),this.element.off(o)},value:function(){return!!this._isValidated&&0===this.errors().length},_submit:function(e){return!!this.validate()||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger("change")},_attachEvents:function(){var t=this;t.element.is(g)&&t.element.on("submit"+o,v(t._submit,t)),t.options.validateOnBlur&&(t.element.is(u)?(t.element.on(p+o,function(){t._checkElement(t.element)}),t.element.is(d)&&t.element.on("click"+o,function(){t._checkElement(t.element)})):(t.element.on(p+o,t._inputSelector,function(){t._checkElement(e(this))}),t.element.on("click"+o,t._checkboxSelector,function(){t._checkElement(e(this))})))},validate:function(){var e,t,n,i,r=!1,o=this.value();if(this._errors={},this.element.is(u))r=this.validateInput(this.element);else{for(i=!1,t=0,n=(e=this.element.find(this._inputSelector)).length;n>t;t++)this.validateInput(e.eq(t))||(i=!0);r=!i}return this.trigger("validate",{valid:r}),o!==r&&this.trigger("change"),r},validateInput:function(t){var n,r,o,s,l,c,u,d,h,p;return t=e(t),this._isValidated=!0,r=(n=this)._errorTemplate,s=(o=n._checkValidity(t)).valid,l="."+a,c=t.attr(f)||"",u=n._findMessageContainer(c).add(t.next(l).filter(function(){var t=e(this);return!t.filter("["+i.attr("for")+"]").length||t.attr(i.attr("for"))===c})).hide(),t.removeAttr("aria-invalid"),s?delete n._errors[c]:(d=n._extractMessage(t,o.key),n._errors[c]=d,h=function(t){return e(e.parseHTML?e.parseHTML(t):t)}(r({message:function(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}(d)})),p=u.attr("id"),n._decorateMessageContainer(h,c),p&&h.attr("id",p),u.replaceWith(h).length||h.insertAfter(t),h.show(),t.attr("aria-invalid",!0)),t.toggleClass("k-invalid",!s),t.toggleClass("k-valid",s),s},hideMessages:function(){var e="."+a,t=this.element;t.is(u)?t.next(e).hide():t.find(e).hide()},_findMessageContainer:function(n){var r,o,a,s=i.ui.validator.messageLocators,l=e();for(o=0,a=this.element.length;a>o;o++)l=l.add(t(this.element[o].getElementsByTagName("*"),n));for(r in s)l=l.add(s[r].locate(this.element,n));return l},_decorateMessageContainer:function(e,t){var n,r=i.ui.validator.messageLocators;for(n in e.addClass(a).attr(i.attr("for"),t||""),r)r[n].decorate(e,t);e.attr("role","alert")},_extractMessage:function(e,t){var n=this.options.messages[t],r=e.attr(f);return n=i.isFunction(n)?n(e):n,i.format(e.attr(i.attr(t+"-msg"))||e.attr("validationMessage")||e.attr("title")||n||"",r,e.attr(t))},_checkValidity:function(e){var t,n=this.options.rules;for(t in n)if(!n[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],n=this._errors;for(e in n)t.push(n[e]);return t}}),i.ui.plugin(n)}(window.kendo.jQuery),function(e){function t(e,t){var n=e.x.location,i=e.y.location,r=t.x.location,o=t.y.location,a=n-r,s=i-o;return{center:{x:(n+r)/2,y:(i+o)/2},distance:Math.sqrt(a*a+s*s)}}function n(e){var t,n,i,r=[],a=e.originalEvent,s=e.currentTarget,l=0;if(e.api)r.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(t=(n=a?a.changedTouches:[]).length;t>l;l++)i=n[l],r.push({location:i,event:e,target:i.target,currentTarget:s,id:i.identifier,type:"touch"});else r.push(o.pointers||o.msPointers?{location:a,event:e,target:e.target,currentTarget:s,id:a.pointerId,type:"pointer"}:{id:1,event:e,target:e.target,currentTarget:s,location:e,type:"mouse"});return r}function i(e){for(var t=r.eventMap.up.split(" "),n=0,i=t.length;i>n;n++)e(t[n])}var r=window.kendo,o=r.support,a=window.document,s=r.Class,l=r.Observable,c=e.now,u=e.extend,d=o.mobileOS,h=d&&d.android,p=800,f=o.browser.msie?5:0,g="press",m="hold",v="select",_="start",y="move",b="end",w="cancel",k="tap",x="release",C="gesturechange",T="gestureend",S="gesturetap",D={api:0,touch:0,mouse:9,pointer:9},A=!o.touch||o.mouseAndTouchPresent,M=s.extend({init:function(e,t){var n=this;n.axis=e,n._updateLocationData(t),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=c()},move:function(e){var t=this,n=e["page"+t.axis],i=c(),r=i-t.timeStamp||1;(n||!h)&&(t.delta=n-t.location,t._updateLocationData(e),t.initialDelta=n-t.startLocation,t.velocity=t.delta/r,t.timeStamp=i)},_updateLocationData:function(e){var t=this,n=t.axis;t.location=e["page"+n],t.client=e["client"+n],t.screen=e["screen"+n]}}),E=s.extend({init:function(e,t,n){u(this,{x:new M("X",n.location),y:new M("Y",n.location),type:n.type,threshold:e.threshold||D[n.type],userEvents:e,target:t,currentTarget:n.currentTarget,initialTouch:n.target,id:n.id,pressEvent:n,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(e.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(g,this.pressEvent)},_hold:function(){this._trigger(m,this.pressEvent)},move:function(e){var t=this;if(!t._finished){if(t.x.move(e.location),t.y.move(e.location),!t._moved){if(t._withinIgnoreThreshold())return;if(I.current&&I.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(y,e)}},end:function(e){var t=this;t.endTime=c(),t._finished||(t._finished=!0,t._trigger(x,e),t._moved?t._trigger(b,e):t._trigger(k,e),clearTimeout(t._holdTimeout),t.dispose())},dispose:function(){var t=this.userEvents.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),t.splice(e.inArray(this,t),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout),this.startTime=c(),this._moved=!0,this._trigger(_,e)},_trigger:function(e,t){var n=this,i=t.event,r={touch:n,x:n.x,y:n.y,target:n.target,event:i};n.userEvents.notify(e,r)&&i.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}}),I=l.extend({init:function(t,n){var s,c,d,h=this,D=r.guid();n=n||{},s=h.filter=n.filter,h.threshold=n.threshold||f,h.minHold=n.minHold||p,h.touches=[],h._maxTouches=n.multiTouch?2:1,h.allowSelection=n.allowSelection,h.captureUpIfMoved=n.captureUpIfMoved,h.eventNS=D,t=e(t).handler(h),l.fn.init.call(h),u(h,{element:t,surface:e(n.global&&A?a.documentElement:n.surface||t),stopPropagation:n.stopPropagation,pressed:!1}),h.surface.handler(h).on(r.applyEventMap("move",D),"_move").on(r.applyEventMap("up cancel",D),"_end"),t.on(r.applyEventMap("down",D),s,"_start"),(o.pointers||o.msPointers)&&t.css("-ms-touch-action","pinch-zoom double-tap-zoom"),n.preventDragEvent&&t.on(r.applyEventMap("dragstart",D),r.preventDefault),t.on(r.applyEventMap("mousedown",D),s,{root:t},"_select"),h.captureUpIfMoved&&o.eventCapture&&(c=h.surface[0],d=e.proxy(h.preventIfMoving,h),i(function(e){c.addEventListener(e,d,!0)})),h.bind([g,m,k,_,y,b,x,w,"gesturestart",C,T,S,v],n)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e,t=this;t._destroyed||(t._destroyed=!0,t.captureUpIfMoved&&o.eventCapture&&(e=t.surface[0],i(function(n){e.removeEventListener(n,t.preventIfMoving)})),t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget)},capture:function(){I.current=this},cancel:function(){this._disposeAll(),this.trigger(w)},notify:function(e,n){var i=this.touches;if(this._isMultiTouch()){switch(e){case y:e=C;break;case b:e=T;break;case k:e=S}u(n,{touches:i},t(i[0],i[1]))}return this.trigger(e,u(n,{type:e}))},press:function(e,t,n){this._apiCall("_start",e,t,n)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var e=this.touches;e.length>0;)e.pop().dispose()},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(v,{event:e}))&&e.preventDefault()},_start:function(t){var i,r,o=this,a=0,s=o.filter,l=n(t),c=l.length,u=t.which;if(!(u&&u>1||o._maxTouchesReached()))for(I.current=null,o.currentTarget=t.currentTarget,o.stopPropagation&&t.stopPropagation();c>a&&!o._maxTouchesReached();a++)r=l[a],(i=s?e(r.currentTarget):o.element).length&&(r=new E(o,i,r),o.touches.push(r),r.press(),o._isMultiTouch()&&o.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(e,t){var i,r,o,a,s={},l=n(t),c=this.touches;for(i=0;c.length>i;i++)s[(r=c[i]).id]=r;for(i=0;l.length>i;i++)(a=s[(o=l[i]).id])&&a[e](o)},_apiCall:function(t,n,i,r){this[t]({api:!0,pageX:n,pageY:i,clientX:n,clientY:i,target:e(r||this.element)[0],stopPropagation:e.noop,preventDefault:e.noop})}});I.defaultThreshold=function(e){f=e},I.minHold=function(e){p=e},r.getTouches=n,r.touchDelta=t,r.UserEvents=I}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(e){return!1}}function i(e,t){return parseInt(e.css(t),10)||0}function r(e,t){return Math.min(Math.max(e,t.min),t.max)}function o(e,t){var n=A(e),r=n.left+i(e,"borderLeftWidth")+i(e,"paddingLeft"),o=n.top+i(e,"borderTopWidth")+i(e,"paddingTop");return{x:{min:r,max:r+e.width()-t.outerWidth(!0)},y:{min:o,max:o+e.height()-t.outerHeight(!0)}}}function a(n,i,r){for(var o,a,s=0,l=i&&i.length,c=r&&r.length;n&&n.parentNode;){for(s=0;l>s;s++)if((o=i[s]).element[0]===n)return{target:o,targetElement:n};for(s=0;c>s;s++)if(a=r[s],e.contains(a.element[0],n)&&y.matchesSelector.call(n,a.options.filter))return{target:a,targetElement:n};n=n.parentNode}return t}function s(e,t){var n,i=t.options.group,r=e[i];if(x.fn.destroy.call(t),r.length>1){for(n=0;r.length>n;n++)if(r[n]==t){r.splice(n,1);break}}else r.length=0,delete e[i]}function l(e){var t,n,i,r=b.body;return e[0]===r?{top:n=r.scrollTop,left:i=r.scrollLeft,bottom:n+w.height(),right:i+w.width()}:((t=e.offset()).bottom=t.top+e.height(),t.right=t.left+e.width(),t)}function c(e){return e===b.body||e===b.documentElement||e===b}function u(t){if(!t||c(t))return e(b.body);for(var n=e(t)[0];!_.isScrollable(n)&&!c(n);)n=n.parentNode;return e(n)}function d(e,t,n){var i={x:0,y:0},r=50;return r>e-n.left?i.x=-(r-(e-n.left)):r>n.right-e&&(i.x=r-(n.right-e)),r>t-n.top?i.y=-(r-(t-n.top)):r>n.bottom-t&&(i.y=r-(n.bottom-t)),i}var h,p,f,g,m,v,_=window.kendo,y=_.support,b=window.document,w=e(window),k=_.Class,x=_.ui.Widget,C=_.Observable,T=_.UserEvents,S=e.proxy,D=e.extend,A=_.getOffset,M={},E={},I={},R=_.elementUnderCursor,P="keyup",L="change",F="dragstart",B="hold",z="drag",H="dragend",N="dragcancel",O="hintDestroyed",V="dragenter",U="dragleave",W="drop",j=C.extend({init:function(t,n){var i=this,r=t[0];i.capture=!1,r.addEventListener?(e.each(_.eventMap.down.split(" "),function(){r.addEventListener(this,S(i._press,i),!0)}),e.each(_.eventMap.up.split(" "),function(){r.addEventListener(this,S(i._release,i),!0)})):(e.each(_.eventMap.down.split(" "),function(){r.attachEvent(this,S(i._press,i))}),e.each(_.eventMap.up.split(" "),function(){r.attachEvent(this,S(i._release,i))})),C.fn.init.call(i),i.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){this.trigger("press"),this.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),q=C.extend({init:function(t){var n=this;C.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){(this._virtualMin!==e||this._virtualMax!==t)&&(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||this.min>e},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.virtual?t._virtualMax:t.getTotal(),i=n*t.scale,r=t.getSize();(0!==n||t.forcedEnabled)&&(t.max=t.virtual?-t._virtualMin:0,t.size=r,t.total=i,t.min=Math.min(t.max,r-i),t.minScale=r/n,t.centerOffset=(i-r)/2,t.enabled=t.forcedEnabled||i>r,e||t.trigger(L,t))}}),G=C.extend({init:function(e){var t=this;C.fn.init.call(t),t.x=new q(D({horizontal:!0},e)),t.y=new q(D({horizontal:!1},e)),t.container=e.container,t.forcedMinScale=e.minScale,t.maxScale=e.maxScale||100,t.bind(L,e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(L)}}),$=C.extend({init:function(e){D(this,e),C.fn.init.call(this)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,n=t.dimension,i=t.axis,r=t.movable,o=r[i]+e;n.enabled&&((n.min>o&&0>e||o>n.max&&e>0)&&(e*=t.resistance),r.translateAxis(i,e),t.trigger(L,t))}}),Y=k.extend({init:function(e){var t,n,i,r,o=this;D(o,{elastic:!0},e),i=o.elastic?.5:0,r=o.movable,o.x=t=new $({axis:"x",dimension:o.dimensions.x,resistance:i,movable:r}),o.y=n=new $({axis:"y",dimension:o.dimensions.y,resistance:i,movable:r}),o.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){o.gesture=e,o.offset=o.dimensions.container.offset()},gesturechange:function(e){var i,a,s,l=o.gesture,c=l.center,u=e.center,d=e.distance/l.distance,h=o.dimensions.minScale,p=o.dimensions.maxScale;h>=r.scale&&1>d&&(d+=.8*(1-d)),r.scale*d>=p&&(d=p/r.scale),a=r.x+o.offset.left,s=r.y+o.offset.top,i={x:(a-c.x)*d+u.x-a,y:(s-c.y)*d+u.y-s},r.scaleWith(d),t.dragMove(i.x),n.dragMove(i.y),o.dimensions.rescale(r.scale),o.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(t.dimension.enabled||n.dimension.enabled?(t.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),Q=y.transitions.prefix+"Transform";p=y.hasHW3D?function(e,t,n){return"translate3d("+e+"px,"+t+"px,0) scale("+n+")"}:function(e,t,n){return"translate("+e+"px,"+t+"px) scale("+n+")"},f=C.extend({init:function(t){var n=this;C.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(p(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){D(this,e),this.refresh()},refresh:function(){var e,t=this,n=t.x,i=t.y;t.round&&(n=Math.round(n),i=Math.round(i)),(e=p(n,i,t.scale))!=t.coordinates&&(_.support.browser.msie&&10>_.support.browser.version?(t.element[0].style.position="absolute",t.element[0].style.left=t.x+"px",t.element[0].style.top=t.y+"px"):t.element[0].style[Q]=e,t._saveCoordinates(e),t.trigger(L))},_saveCoordinates:function(e){this.coordinates=e}}),(g=x.extend({init:function(e,t){var n,i=this;x.fn.init.call(i,e,t),(n=i.options.group)in E?E[n].push(i):E[n]=[i]},events:[V,U,W],options:{name:"DropTarget",group:"default"},destroy:function(){s(E,this)},_trigger:function(e,n){var i=M[this.options.group];return i?this.trigger(e,D({},n.event,{draggable:i,dropTarget:n.dropTarget})):t},_over:function(e){this._trigger(V,e)},_out:function(e){this._trigger(U,e)},_drop:function(e){var t=M[this.options.group];t&&(t.dropped=!this._trigger(W,e))}})).destroyGroup=function(e){var t,n=E[e]||I[e];if(n){for(t=0;n.length>t;t++)x.fn.destroy.call(n[t]);n.length=0,delete E[e],delete I[e]}},g._cache=E,m=g.extend({init:function(e,t){var n,i=this;x.fn.init.call(i,e,t),(n=i.options.group)in I?I[n].push(i):I[n]=[i]},destroy:function(){s(I,this)},options:{name:"DropTargetArea",group:"default",filter:null}}),v=x.extend({init:function(e,t){var n=this;x.fn.init.call(n,e,t),n._activated=!1,n.userEvents=new T(n.element,{global:!0,allowSelection:!0,filter:n.options.filter,threshold:n.options.distance,start:S(n._start,n),hold:S(n._hold,n),move:S(n._drag,n),end:S(n._end,n),cancel:S(n._cancel,n),select:S(n._select,n)}),n._afterEndHandler=S(n._afterEnd,n),n._captureEscape=S(n._captureEscape,n)},events:[B,F,z,H,N,O],options:{name:"Draggable",distance:_.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,autoScroll:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){e.keyCode===_.keys.ESC&&(this._trigger(N,{event:e}),this.userEvents.cancel())},_updateHint:function(t){var n,i=this,o=i.options,a=i.boundaries,s=o.axis,l=i.options.cursorOffset;l?n={left:t.x.location+l.left,top:t.y.location+l.top}:(i.hintOffset.left+=t.x.delta,i.hintOffset.top+=t.y.delta,n=e.extend({},i.hintOffset)),a&&(n.top=r(n.top,a.y),n.left=r(n.left,a.x)),"x"===s?delete n.top:"y"===s&&delete n.left,i.hint.css(n)},_shouldIgnoreTarget:function(t){var n=this.options.ignore;return n&&e(t).is(n)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(n){var i,r=this,a=r.options,s=a.container,l=a.hint;return this._shouldIgnoreTarget(n.touch.initialTouch)||a.holdToDrag&&!r._activated?(r.userEvents.cancel(),t):(r.currentTarget=n.target,r.currentTargetOffset=A(r.currentTarget),l&&(r.hint&&r.hint.stop(!0,!0).remove(),r.hint=_.isFunction(l)?e(l.call(r,r.currentTarget)):l,i=A(r.currentTarget),r.hintOffset=i,r.hint.css({position:"absolute",zIndex:2e4,left:i.left,top:i.top}).appendTo(b.body),r.angular("compile",function(){r.hint.removeAttr("ng-repeat");for(var t=e(n.target);!t.data("$$kendoScope")&&t.length;)t=t.parent();return{elements:r.hint.get(),scopeFrom:t.data("$$kendoScope")}})),M[a.group]=r,r.dropped=!1,s&&(r.boundaries=o(s,r.hint)),e(b).on(P,r._captureEscape),r._trigger(F,n)&&(r.userEvents.cancel(),r._afterEnd()),r.userEvents.capture(),t)},_hold:function(e){this.currentTarget=e.target,this._trigger(B,e)?this.userEvents.cancel():this._activated=!0},_drag:function(n){var i,r,o=this;n.preventDefault(),i=this._elementUnderCursor(n),o._withDropTarget(i,function(i,r){if(!i)return h&&(h._trigger(U,D(n,{dropTarget:e(h.targetElement)})),h=null),t;if(h){if(r===h.targetElement)return;h._trigger(U,D(n,{dropTarget:e(h.targetElement)}))}i._trigger(V,D(n,{dropTarget:e(r)})),h=D(i,{targetElement:r})}),o._trigger(z,D(n,{dropTarget:h,elementUnderCursor:i})),this.options.autoScroll&&(this._cursorElement!==i&&(this._scrollableParent=u(i),this._cursorElement=i),this._scrollableParent[0]&&(r=d(n.x.location,n.y.location,l(this._scrollableParent)),this._scrollCompenstation=e.extend({},this.hintOffset),this._scrollVelocity=r,0===r.y&&0===r.x?(clearInterval(this._scrollInterval),this._scrollInterval=null):this._scrollInterval||(this._scrollInterval=setInterval(e.proxy(this,"_autoScroll"),50)))),o.hint&&o._updateHint(n)},_autoScroll:function(){var e,t,n,i,r,o,a,s=this._scrollableParent[0],l=this._scrollVelocity,c=this._scrollCompenstation;s&&((n=s===b.body)?(e=b.body.offsetHeight>w.height(),t=b.body.offsetWidth>w.width()):(e=s.scrollHeight>=s.offsetHeight,t=s.scrollWidth>=s.offsetWidth),i=s.scrollTop+l.y,r=e&&i>0&&s.scrollHeight>i,o=s.scrollLeft+l.x,a=t&&o>0&&s.scrollWidth>o,r&&(s.scrollTop+=l.y),a&&(s.scrollLeft+=l.x),n&&(a||r)&&(r&&(c.top+=l.y),a&&(c.left+=l.x),this.hint.css(c)))},_end:function(t){this._withDropTarget(this._elementUnderCursor(t),function(n,i){n&&(n._drop(D({},t,{dropTarget:e(i)})),h=null)}),this._trigger(H,t),this._cancel(t.event)},_cancel:function(){var e=this;e._scrollableParent=null,clearInterval(this._scrollInterval),e._activated=!1,e.hint&&!e.dropped?setTimeout(function(){e.hint.stop(!0,!0).animate(e.currentTargetOffset,"fast",e._afterEndHandler)},0):e._afterEnd()},_trigger:function(e,t){return this.trigger(e,D({},t.event,{x:t.x,y:t.y,currentTarget:this.currentTarget,initialTarget:t.touch?t.touch.initialTouch:null,dropTarget:t.dropTarget,elementUnderCursor:t.elementUnderCursor}))},_elementUnderCursor:function(e){var t=R(e),i=this.hint;return i&&n(i[0],t)&&(i.hide(),(t=R(e))||(t=R(e)),i.show()),t},_withDropTarget:function(e,t){var n,i=this.options.group,r=E[i],o=I[i];(r&&r.length||o&&o.length)&&((n=a(e,r,o))?t(n.target,n.targetElement):t())},destroy:function(){var e=this;x.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy(),this._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),e.currentTarget=null},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete M[t.options.group],t.trigger("destroy"),t.trigger(O),e(b).off(P,t._captureEscape)}}),_.ui.plugin(g),_.ui.plugin(m),_.ui.plugin(v),_.TapCapture=j,_.containerBoundaries=o,D(_.ui,{Pane:Y,PaneDimensions:G,Movable:f}),_.ui.Draggable.utils={autoScrollVelocity:d,scrollableViewPort:l,findScrollableParent:u}}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.effects,o=i.ui,a=e.proxy,s=e.extend,l=o.Widget,c=n.Class,u=n.ui.Movable,d=n.ui.Pane,h=n.ui.PaneDimensions,p=r.Transition,f=r.Animation,g=Math.abs,m="km-scroller-release",v="km-scroller-refresh",_="change",y="scroll",b=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e),t.userEvents.bind("gestureend",a(t.start,t)),t.tapCapture.bind("press",a(t.cancel,t))},enabled:function(){return this.dimensions.minScale>this.movable.scale},done:function(){return.01>this.dimensions.minScale-this.movable.scale},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),w=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e,{transition:new p({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",a(t.start,t)),t.userEvents.bind("gestureend",a(t.start,t)),t.userEvents.bind("tap",a(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){this.cancel(),this._moveTo(e)},onEnd:function(){var e=this;e.paneAxis.outOfBounds()?e._snapBack():e._end()},done:function(){return g(this.velocity)<1},start:function(e){var t,n=this;n.dimension.enabled&&(n.paneAxis.outOfBounds()?n._snapBack():(t=2===e.touch.id?0:e.touch[n.axis].velocity,n.velocity=Math.max(Math.min(t*n.velocityMultiplier,55),-55),n.tapCapture.captureNext(),f.fn.start.call(n)))},tick:function(){var e=this,t=e.dimension,n=e.paneAxis.outOfBounds()?.5:e.friction,i=e.velocity*=n,r=e.movable[e.axis]+i;!e.elastic&&t.outOfBounds(r)&&(r=Math.max(Math.min(r,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var e=this,t=e.dimension,n=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(n)},_moveTo:function(e){this.transition.moveTo({location:e,duration:500,ease:p.easeOutExpo})}}),k=f.extend({init:function(e){n.effects.Animation.fn.init.call(this),s(this,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return g(this.offset.y)<5&&g(this.offset.x)<5},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(e,t){this.offset={},this.origin=e,this.destination=t},setCallback:function(e){e&&n.isFunction(e)?this.callback=e:e=t},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),x=c.extend({init:function(t){var n=this,i="x"===t.axis,r=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');s(n,t,{element:r,elementSize:0,movable:new u(r),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:i?"width":"height"}),n.scrollMovable.bind(_,a(n.refresh,n)),n.container.append(r),t.alwaysVisible&&n.show()},refresh:function(){var e=this,t=e.axis,n=e.dimension,i=n.size,r=e.scrollMovable,o=i/n.total,a=Math.round(-r[t]*o),s=Math.round(i*o);o>=1?this.element.css("display","none"):this.element.css("display",""),a+s>i?s=i-a:0>a&&(s+=a,a=0),e.elementSize!=s&&(e.element.css(e.size,s+"px"),e.elementSize=s),e.movable.moveAxis(t,a)},show:function(){this.element.css({opacity:.7,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})}}),C=l.extend({init:function(i,r){var o,c,p,f,m,v,w,x,C,T=this;return l.fn.init.call(T,i,r),i=T.element,(T._native=T.options.useNative&&n.support.hasNativeScrolling)?(i.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),s(T,{scrollElement:i,fixedContainer:i.children().first()}),t):(i.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'),o=i.children().eq(1),c=new n.TapCapture(i),p=new u(o),f=new h({element:o,container:i,forcedEnabled:T.options.zoom}),m=this.options.avoidScrolling,v=new n.UserEvents(i,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:T.options.zoom,start:function(t){f.refresh();var n=g(t.x.velocity),i=g(t.y.velocity),r=2*n>=i,o=2*i>=n;!e.contains(T.fixedContainer[0],t.event.target)&&!m(t)&&T.enabled&&(f.x.enabled&&r||f.y.enabled&&o)?v.capture():v.cancel()}}),w=new d({movable:p,dimensions:f,userEvents:v,elastic:T.options.elastic}),x=new b({movable:p,dimensions:f,userEvents:v,tapCapture:c}),C=new k({moveTo:function(e){T.scrollTo(e.x,e.y)}}),p.bind(_,function(){T.scrollTop=-p.y,T.scrollLeft=-p.x,T.trigger(y,{scrollTop:T.scrollTop,scrollLeft:T.scrollLeft})}),T.options.mousewheelScrolling&&i.on("DOMMouseScroll mousewheel",a(this,"_wheelScroll")),s(T,{movable:p,dimensions:f,zoomSnapBack:x,animatedScroller:C,userEvents:v,pane:w,tapCapture:c,pulled:!1,enabled:!0,scrollElement:o,scrollTop:0,scrollLeft:0,fixedContainer:i.children().first()}),T._initAxis("x"),T._initAxis("y"),T._wheelEnd=function(){T._wheel=!1,T.userEvents.end(0,T._wheelY)},f.refresh(),T.options.pullToRefresh&&T._initPullToRefresh(),t)},_wheelScroll:function(e){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=n.wheelDeltaY(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:["pull",y,"resize"],_resize:function(){this._native||this.contentResized()},setOptions:function(e){l.fn.setOptions.call(this,e),e.pullToRefresh&&this._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this._native?(this.scrollElement.scrollLeft(g(e)),this.scrollElement.scrollTop(g(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))},animatedScrollTo:function(e,t,n){var i,r;this._native?this.scrollTo(e,t):(i={x:this.movable.x,y:this.movable.y},r={x:e,y:t},this.animatedScroller.setCoordinates(i,r),this.animatedScroller.setCallback(n),this.animatedScroller.start())},pullHandled:function(){var e=this;e.refreshHint.removeClass(v),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd(),e.userEvents.cancel()},destroy:function(){l.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled(),e.pullTemplate=n.template(e.options.messages.pullTemplate),e.releaseTemplate=n.template(e.options.messages.releaseTemplate),e.refreshTemplate=n.template(e.options.messages.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",a(e._paneChange,e)),e.userEvents.bind("end",a(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(m).addClass(v),e.hintContainer.html(e.refreshTemplate({})),e.yinertia.freeze(e.options.pullOffset/2),e.trigger("pull"))},_paneChange:function(){var e=this;e.movable.y/.5>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass(v).addClass(m),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(m),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var t=this,n=t.movable,i=t.dimensions[e],r=t.tapCapture,o=t.pane[e],a=new x({axis:e,movable:n,dimension:i,container:t.element,alwaysVisible:t.options.visibleScrollHints});i.bind(_,function(){a.refresh()}),o.bind(_,function(){a.show()}),t[e+"inertia"]=new w({axis:e,paneAxis:o,movable:n,tapCapture:r,userEvents:t.userEvents,dimension:i,elastic:t.options.elastic,friction:t.options.friction||.96,velocityMultiplier:t.options.velocityMultiplier||10,end:function(){a.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});o.plugin(C)}(window.kendo.jQuery),function(e,t){function n(e){return e.position().top+3}var i=window.kendo,r=i.ui.Widget,o=e.proxy,a=!1,s=".kendoGroupable",l=i.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),c=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(i.attr("title"))||t.attr(i.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},u=e('<div class="k-grouping-dropclue"/>'),d=r.extend({init:function(l,d){var h,p,f=this,g=i.guid(),m=o(f._intializePositions,f),v=f._dropCuePositions=[];r.fn.init.call(f,l,d),a=i.support.isRtl(l),p=a?"right":"left",f.draggable=h=f.options.draggable||new i.ui.Draggable(f.element,{filter:f.options.draggableElements,hint:c,group:g}),f.groupContainer=e(f.options.groupContainer,f.element).kendoDropTarget({group:h.options.group,dragenter:function(e){f._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),u.css("top",n(f.groupContainer)).css(p,0).appendTo(f.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),u.remove()},drop:function(t){var n,r=t.draggable.currentTarget,o=r.attr(i.attr("field")),s=r.attr(i.attr("title")),l=f.indicator(o),c=f._dropCuePositions,d=c[c.length-1];(r.hasClass("k-group-indicator")||f._canDrag(r))&&(d?(n=f._dropCuePosition(i.getOffset(u).left+parseInt(d.element.css("marginLeft"),10)*(a?-1:1)+parseInt(d.element.css("marginRight"),10)))&&f._canDrop(e(l),n.element,n.left)&&(n.before?n.element.before(l||f.buildIndicator(o,s)):n.element.after(l||f.buildIndicator(o,s)),f._change()):(f.groupContainer.append(f.buildIndicator(o,s)),f._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:c,group:h.options.group,dragcancel:o(f._dragCancel,f),dragstart:function(e){var t=e.currentTarget,i=parseInt(t.css("marginLeft"),10),r=t.position(),o=a?r.left-i:r.left+t.outerWidth();m(),u.css({top:n(f.groupContainer),left:o}).appendTo(f.groupContainer),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){f._dragEnd(this)},drag:o(f._drag,f)}).on("click"+s,".k-button",function(t){t.preventDefault(),f._removeIndicator(e(this).parent())}).on("click"+s,".k-link",function(t){var n=e(this).parent(),r=f.buildIndicator(n.attr(i.attr("field")),n.attr(i.attr("title")),"asc"==n.attr(i.attr("dir"))?"desc":"asc");n.before(r).remove(),f._change(),t.preventDefault()}),h.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){f._dragEnd(this)},dragcancel:o(f._dragCancel,f),dragstart:function(e){var n;return f.options.allowDrag||f._canDrag(e.currentTarget)?(m(),v.length&&(n=v[v.length-1].element,parseInt(n.css("marginRight"),10),n.position().left,n.outerWidth()),t):(e.preventDefault(),t)},drag:o(f._drag,f)}),f.dataSource=f.options.dataSource,f.dataSource&&f._refreshHandler?f.dataSource.unbind("change",f._refreshHandler):f._refreshHandler=o(f.refresh,f),f.dataSource&&(f.dataSource.bind("change",f._refreshHandler),f.refresh())},refresh:function(){var t=this,n=t.dataSource;t.groupContainer&&t.groupContainer.empty().append(e.map(n.group()||[],function(n){var r=n.field,o=i.attr("field"),a=t.element.find(t.options.filter).filter(function(){return e(this).attr(o)===r});return t.buildIndicator(n.field,a.attr(i.attr("title")),n.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){var e=this;r.fn.destroy.call(e),e.groupContainer.off(s),e.groupContainer.data("kendoDropTarget")&&e.groupContainer.data("kendoDropTarget").destroy(),e.groupContainer.data("kendoDraggable")&&e.groupContainer.data("kendoDraggable").destroy(),e.options.draggable||e.draggable.destroy(),e.dataSource&&e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=null),e.groupContainer=e.element=e.draggable=null},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var n=e(".k-group-indicator",this.groupContainer);return e.grep(n,function(n){return e(n).attr(i.attr("field"))===t})[0]},buildIndicator:function(e,t,n){return l({field:e.replace(/"/g,"'"),dir:n,title:t,ns:i.ns})},descriptors:function(){var t,n,r,o,a=this,s=e(".k-group-indicator",a.groupContainer);return t=a.element.find(a.options.filter).map(function(){var t=e(this),a=t.attr(i.attr("aggregates")),s=t.attr(i.attr("field"));if(a&&""!==a)for(n=a.split(","),a=[],r=0,o=n.length;o>r;r++)a.push({field:s,aggregate:n[r]});return a}).toArray(),e.map(s,function(n){return{field:(n=e(n)).attr(i.attr("field")),dir:n.attr(i.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){e.remove(),this._invalidateGroupContainer(),this._change()},_change:function(){var e=this;e.dataSource&&e.dataSource.group(e.descriptors())},_dropCuePosition:function(t){var n,i,r,o,s,l=this._dropCuePositions;if(u.is(":visible")&&0!==l.length)return t=Math.ceil(t),i=(n=l[l.length-1]).left,r=n.right,o=parseInt(n.element.css("marginLeft"),10),s=parseInt(n.element.css("marginRight"),10),t>=r&&!a||i>t&&a?t={left:n.element.position().left+(a?-o:n.element.outerWidth()+s),element:n.element,before:!1}:(t=e.grep(l,function(e){return t>=e.left&&e.right>=t||a&&t>e.right})[0])&&(t={left:a?t.element.position().left+t.element.outerWidth()+s:t.element.position().left-o,element:t.element,before:!0}),t},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&u.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(i.attr("field"));return"false"!=e.attr(i.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,n){var i=e.next();return e[0]!==t[0]&&(!i[0]||t[0]!==i[0]||!a&&n>i.position().left||a&&n<i.position().left)},_dragEnd:function(t){var n=this,r=t.currentTarget.attr(i.attr("field")),o=n.indicator(r);t!==n.options.draggable&&!t.dropped&&o&&n._removeIndicator(e(o)),n._dragCancel()},_dragCancel:function(){u.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,n=e(".k-group-indicator",this.groupContainer);this._dropCuePositions=e.map(n,function(n){return n=e(n),t=i.getOffset(n).left,{left:parseInt(t,10),right:parseInt(t+n.outerWidth(),10),element:n}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e&&e.is(":empty")&&e.html(this.options.messages.empty)}});i.ui.plugin(d)}(window.kendo.jQuery),function(e){function t(t,n){t=e(t),n?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var n=window.kendo,i=n.getOffset,r=n.ui.Widget,o="change",a=r.extend({init:function(a,s){var l,c=this,u=n.guid()+"-reorderable";r.fn.init.call(c,a,s),a=c.element.addClass("k-reorderable"),s=c.options,c.draggable=l=s.draggable||new n.ui.Draggable(a,{group:u,filter:s.filter,hint:s.hint}),c.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),a.find(l.options.filter).kendoDropTarget({group:l.options.group,dragenter:function(e){var n,r,o,a;c._draggable&&(n=this.element,o=!c._dropTargetAllowed(n)||c._isLastDraggable(),t(e.draggable.hint,o),o||(a=(r=i(n)).left,s.inSameContainer&&!s.inSameContainer({source:n,target:c._draggable,sourceIndex:c._index(n),targetIndex:c._index(c._draggable)})?c._dropTarget=n:c._index(n)>c._index(c._draggable)&&(a+=n.outerWidth()),c.reorderDropCue.css({height:n.outerHeight(),top:r.top,left:a}).appendTo(document.body)))},dragleave:function(e){t(e.draggable.hint,!0),c.reorderDropCue.remove(),c._dropTarget=null},drop:function(){var e,t;c._dropTarget=null,c._draggable&&(e=this.element,t=c._draggable,c._dropTargetAllowed(e)&&!c._isLastDraggable()&&c.trigger(o,{element:c._draggable,target:e,oldIndex:c._index(t),newIndex:c._index(e),position:i(c.reorderDropCue).left>i(e).left?"after":"before"}))}}),l.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){c.reorderDropCue.remove(),c._draggable=null,c._elements=null},dragend:function(){c.reorderDropCue.remove(),c._draggable=null,c._elements=null},dragstart:function(e){c._draggable=e.currentTarget,c._elements=c.element.find(c.draggable.options.filter)},drag:function(e){var t,n;c._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-denied")&&(t=i(c._dropTarget).left,n=c._dropTarget.outerWidth(),c.reorderDropCue.css(e.pageX>t+n/2?{left:t+n}:{left:t}))}})},options:{name:"Reorderable",filter:"*"},events:[o],_isLastDraggable:function(){var e,t=this.options.inSameContainer,n=this._draggable[0],i=this._elements.get(),r=!1;if(!t)return!1;for(;!r&&i.length>0;)r=n!==(e=i.pop())&&t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)});return!r},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,n=this.options.dragOverContainers,i=this._draggable;return i[0]!==e[0]&&(!t||!n||!!t({source:i,target:e,sourceIndex:this._index(i),targetIndex:this._index(e)})||n(this._index(i),this._index(e)))},_index:function(e){return this._elements.index(e)},destroy:function(){var t=this;r.fn.destroy.call(t),t.element.find(t.draggable.options.filter).each(function(){var t=e(this);t.data("kendoDropTarget")&&t.data("kendoDropTarget").destroy()}),t.draggable&&(t.draggable.destroy(),t.draggable.element=t.draggable=null),t.elements=t.reorderDropCue=t._elements=t._draggable=null}});n.ui.plugin(a)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o=e.proxy,a=n.isFunction,s=e.extend,l="horizontal",c="vertical",u="start",d="resize",h="resizeend",p=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.orientation=n.options.orientation.toLowerCase()!=c?l:c,n._positionMouse=n.orientation==l?"x":"y",n._position=n.orientation==l?"left":"top",n._sizingDom=n.orientation==l?"outerWidth":"outerHeight",n.draggable=new i.Draggable(e,{distance:1,filter:t.handle,drag:o(n._resize,n),dragcancel:o(n._cancel,n),dragstart:o(n._start,n),dragend:o(n._stop,n)}),n.userEvents=n.draggable.userEvents},events:[d,h,u],options:{name:"Resizable",orientation:l},resize:function(){},_max:function(e){var n=this,i=n.hint?n.hint[n._sizingDom]():0,r=n.options.max;return a(r)?r(e):r!==t?n._initialElementPosition+r-i:r},_min:function(e){var n=this.options.min;return a(n)?n(e):n!==t?this._initialElementPosition+n:n},_start:function(t){var n=this,i=n.options.hint,r=e(t.currentTarget);n._initialElementPosition=r.position()[n._position],n._initialMousePosition=t[n._positionMouse].startLocation,i&&(n.hint=a(i)?e(i(r)):i,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger(u,t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document.body).css("cursor",r.css("cursor"))},_resize:function(e){var n,i=this,r=i._maxPosition,o=i._minPosition,a=i._initialElementPosition+(e[i._positionMouse].location-i._initialMousePosition);n=o!==t?Math.max(o,a):a,i.position=n=r!==t?Math.min(r,n):n,i.hint&&i.hint.toggleClass(i.options.invalidClass||"",n==r||n==o).css(i._position,n),i.resizing=!0,i.trigger(d,s(e,{position:n}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.resizing=!1,n.trigger(h,s(t,{position:n.position})),e(document.body).css("cursor","")},_cancel:function(e){var n=this;n.hint&&(n.position=t,n.hint.css(n._position,n._initialElementPosition),n._stop(e))},destroy:function(){var e=this;r.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(e){var t=e.position(),n=this;n.userEvents.press(t.left,t.top,e[0]),n.targetPosition=t,n.target=e}},move:function(e){var n=this,i=n._position,r=n.targetPosition,o=n.position;o===t&&(o=r[i]),r[i]=o+e,n.userEvents.move(r.left,r.top)},end:function(){this.userEvents.end(),this.target=this.position=t}});n.ui.plugin(p)}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(e){return!1}}function i(e){return e.clone()}function r(e){return e.clone().removeAttr("id").css("visibility","hidden")}var o=window.kendo,a=o.ui.Widget,s="start",l="beforeMove",c="move",u="end",d="change",h="cancel",p="sort",f="remove",g="receive",m=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.options.placeholder||(n.options.placeholder=r),n.options.hint||(n.options.hint=i),n._draggable=n._createDraggable()},events:[s,l,c,u,d,h],options:{name:"Sortable",hint:null,placeholder:null,filter:">*",holdToDrag:!1,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,autoScroll:!1,cursor:"auto",moveOnDragEnter:!1},destroy:function(){this._draggable.destroy(),a.fn.destroy.call(this)},_createDraggable:function(){var t=this,n=t.element,i=t.options;return new o.ui.Draggable(n,{filter:i.filter,hint:o.isFunction(i.hint)?i.hint:e(i.hint),holdToDrag:i.holdToDrag,container:i.container?e(i.container):null,cursorOffset:i.cursorOffset,axis:i.axis,ignore:i.ignore,autoScroll:i.autoScroll,dragstart:e.proxy(t._dragstart,t),dragcancel:e.proxy(t._dragcancel,t),drag:e.proxy(t._drag,t),dragend:e.proxy(t._dragend,t)})},_dragstart:function(t){var n=this.draggedElement=t.currentTarget,i=(t.target||o.elementUnderCursor(t),this.options.disabled),r=this.options.handler,a=this.options.placeholder,l=this.placeholder=e(o.isFunction(a)?a.call(this,n):a);i&&n.is(i)?t.preventDefault():r&&!e(t.initialTarget).is(r)?t.preventDefault():this.trigger(s,{item:n,draggableEvent:t})?t.preventDefault():(n.css("display","none"),n.before(l),this._setCursor())},_dragcancel:function(){this._cancel(),this.trigger(h,{item:this.draggedElement}),this._resetCursor()},_drag:function(n){var i,r,o,a,s,l=this.draggedElement,c=this._findTarget(n),u={left:n.x.location,top:n.y.location},d={x:n.x.delta,y:n.y.delta},h=this.options.axis,p=this.options.moveOnDragEnter,f={item:l,list:this,draggableEvent:n};if("x"===h||"y"===h)return this._movementByAxis(h,u,d[h],f),t;if(c){if(i=this._getElementCenter(c.element),r={left:Math.round(u.left-i.left),top:Math.round(u.top-i.top)},e.extend(f,{target:c.element}),c.appendToBottom)return this._movePlaceholder(c,null,f),t;if(c.appendAfterHidden&&this._movePlaceholder(c,"next",f),this._isFloating(c.element)?0>d.x&&(p||0>r.left)?o="prev":d.x>0&&(p||r.left>0)&&(o="next"):0>d.y&&(p||0>r.top)?o="prev":d.y>0&&(p||r.top>0)&&(o="next"),o){for(a=(s="prev"===o?jQuery.fn.prev:jQuery.fn.next).call(c.element);a.length&&!a.is(":visible");)a=s.call(a);a[0]!=this.placeholder[0]&&this._movePlaceholder(c,o,f)}}},_dragend:function(n){var i,r,o,a,s=this.placeholder,l=this.draggedElement,c=this.indexOf(l),h=this.indexOf(s),m=this.options.connectWith;return this._resetCursor(),o={action:p,item:l,oldIndex:c,newIndex:h,draggableEvent:n},h>=0?r=this.trigger(u,o):(i=s.parents(m).getKendoSortable(),o.action=f,a=e.extend({},o,{action:g,oldIndex:-1,newIndex:i.indexOf(s)}),r=!(!this.trigger(u,o)&&!i.trigger(u,a))),r||h===c?(this._cancel(),t):(s.replaceWith(l),l.show(),this._draggable.dropped=!0,o={action:-1!=this.indexOf(l)?p:f,item:l,oldIndex:c,newIndex:this.indexOf(l),draggableEvent:n},this.trigger(d,o),i&&(a=e.extend({},o,{action:g,oldIndex:-1,newIndex:i.indexOf(l)}),i.trigger(d,a)),t)},_findTarget:function(n){var i,r,o=this._findElementUnderCursor(n),a=this.options.connectWith;return e.contains(this.element[0],o)?(r=(i=this.items()).filter(o)[0]||i.has(o)[0])?{element:e(r),sortable:this}:null:this.element[0]==o&&this._isEmpty()?{element:this.element,sortable:this,appendToBottom:!0}:this.element[0]==o&&this._isLastHidden()?{element:r=this.items().eq(0),sortable:this,appendAfterHidden:!0}:a?this._searchConnectedTargets(o,n):t},_findElementUnderCursor:function(e){var t=o.elementUnderCursor(e),i=e.sender;return this.items(),n(i.hint[0],t)&&(i.hint.hide(),(t=o.elementUnderCursor(e))||(t=o.elementUnderCursor(e)),i.hint.show()),t},_searchConnectedTargets:function(t,n){var i,r,o,a,s=e(this.options.connectWith);for(a=0;s.length>a;a++)if(i=s.eq(a).getKendoSortable(),e.contains(s[a],t)){if(i)return(o=(r=i.items()).filter(t)[0]||r.has(t)[0])?(i.placeholder=this.placeholder,{element:e(o),sortable:i}):null}else if(s[a]==t){if(i&&i._isEmpty())return{element:s.eq(a),sortable:i,appendToBottom:!0};if(this._isCursorAfterLast(i,n))return{element:o=i.items().last(),sortable:i}}},_isCursorAfterLast:function(e,t){var n,i=e.items().last(),r=t.x.location,a=t.y.location;return(n=o.getOffset(i)).top+=i.outerHeight(),n.left+=i.outerWidth(),0>(this._isFloating(i)?n.left-r:n.top-a)},_movementByAxis:function(t,n,i,r){var o,a="x"===t?n.left:n.top,s=0>i?this.placeholder.prev():this.placeholder.next();s.length&&!s.is(":visible")&&(s=0>i?s.prev():s.next()),e.extend(r,{target:s}),(o=this._getElementCenter(s))&&(o="x"===t?o.left:o.top),s.length&&0>i&&0>a-o?this._movePlaceholder({element:s,sortable:this},"prev",r):s.length&&i>0&&a-o>0&&this._movePlaceholder({element:s,sortable:this},"next",r)},_movePlaceholder:function(e,t,n){var i=this.placeholder;e.sortable.trigger(l,n)||(t?"prev"===t?e.element.before(i):"next"===t&&e.element.after(i):e.element.append(i),e.sortable.trigger(c,n))},_setCursor:function(){var t,n=this.options.cursor;n&&"auto"!==n&&(t=e(document.body),this._originalCursorType=t.css("cursor"),t.css({cursor:n}),this._cursorStylesheet||(this._cursorStylesheet=e("<style>* { cursor: "+n+" !important; }</style>")),this._cursorStylesheet.appendTo(t))},_resetCursor:function(){this._originalCursorType&&(e(document.body).css("cursor",this._originalCursorType),this._originalCursorType=null,this._cursorStylesheet.remove())},_getElementCenter:function(e){var t=e.length?o.getOffset(e):null;return t&&(t.top+=e.outerHeight()/2,t.left+=e.outerWidth()/2),t},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_cancel:function(){this.draggedElement.show(),this.placeholder.remove()},_items:function(){var e=this.options.filter;return e?this.element.find(e):this.element.children()},indexOf:function(e){var t=this._items(),n=this.placeholder,i=this.draggedElement;return n&&e[0]==n[0]?t.not(i).index(e):t.not(n).index(e)},items:function(){var e=this.placeholder,t=this._items();return e&&(t=t.not(e)),t},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return 1===this.items().length&&this.items().is(":hidden")}});o.ui.plugin(m)}(window.kendo.jQuery),function(e,t){function n(e,t){if(!e.is(":visible"))return!1;var n=r.getOffset(e),i=t.left+t.width,o=t.top+t.height;return n.right=n.left+e.outerWidth(),n.bottom=n.top+e.outerHeight(),!(n.left>i||t.left>n.right||n.top>o||t.top>n.bottom)}var i,r=window.kendo,o=r.ui.Widget,a=e.proxy,s=Math.abs,l="aria-selected",c="k-state-selected",u="k-state-selecting",d="k-selectable",h="change",p="k-state-unselecting",f="input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-expand,span.k-icon.k-i-collapse",g=r.support.browser.msie,m=!1;!function(e){e('<div class="parent"><span /></div>').on("click",">*",function(){m=!0}).find("span").click().end().off()}(e),(i=o.extend({init:function(t,n){var i,s=this;o.fn.init.call(s,t,n),s._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),s._lastActive=null,s.element.addClass(d),s.relatedTarget=s.options.relatedTarget,i=s.options.multiple,this.options.aria&&i&&s.element.attr("aria-multiselectable",!0),s.userEvents=new r.UserEvents(s.element,{global:!0,allowSelection:!0,filter:(m?"":"."+d+" ")+s.options.filter,tap:a(s._tap,s)}),i&&s.userEvents.bind("start",a(s._start,s)).bind("move",a(s._move,s)).bind("end",a(s._end,s)).bind("select",a(s._select,s))},events:[h],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:e.noop},_isElement:function(e){var t,n=this.element,i=n.length,r=!1;for(e=e[0],t=0;i>t;t++)if(n[t]===e){r=!0;break}return r},_tap:function(t){var n,i=e(t.target),r=this,o=t.event.ctrlKey||t.event.metaKey,a=r.options.multiple,s=a&&t.event.shiftKey,l=t.event.which,u=t.event.button;!r._isElement(i.closest("."+d))||l&&3==l||u&&2==u||this._allowSelection(t.event.target)&&(n=i.hasClass(c),a&&o||r.clear(),i=i.add(r.relatedTarget(i)),s?r.selectRange(r._firstSelectee(),i):(n&&o?(r._unselect(i),r._notify(h)):r.value(i),r._lastActive=r._downTarget=i))},_start:function(n){var i,r=this,o=e(n.target),a=o.hasClass(c),s=n.event.ctrlKey||n.event.metaKey;if(this._allowSelection(n.event.target)){if(r._downTarget=o,!r._isElement(o.closest("."+d)))return r.userEvents.cancel(),t;r.options.useAllItems?r._items=r.element.find(r.options.filter):(i=o.closest(r.element),r._items=i.find(r.options.filter)),n.sender.capture(),r._marquee.appendTo(document.body).css({left:n.x.client+1,top:n.y.client+1,width:0,height:0}),s||r.clear(),o=o.add(r.relatedTarget(o)),a&&(r._selectElement(o,!0),s&&o.addClass(p))}},_move:function(e){var t={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:s(e.x.initialDelta),height:s(e.y.initialDelta)};this._marquee.css(t),this._invalidateSelectables(t,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var e,t=this;t._marquee.remove(),t._unselect(t.element.find(t.options.filter+"."+p)).removeClass(p),e=(e=t.element.find(t.options.filter+"."+u)).add(t.relatedTarget(e)),t.value(e),t._lastActive=t._downTarget,t._items=null},_invalidateSelectables:function(e,t){var i,r,o,a,s=this._downTarget[0],l=this._items;for(i=0,r=l.length;r>i;i++)o=(a=l.eq(i)).add(this.relatedTarget(a)),n(a,e)?a.hasClass(c)?t&&s!==a[0]&&o.removeClass(c).addClass(p):a.hasClass(u)||a.hasClass(p)||o.addClass(u):a.hasClass(u)?o.removeClass(u):t&&a.hasClass(p)&&o.removeClass(p).addClass(c)},value:function(e){var n=this,i=a(n._selectElement,n);return e?(e.each(function(){i(this)}),n._notify(h),t):n.element.find(n.options.filter+"."+c)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value()).length>0?e[0]:t.element.find(t.options.filter)[0]},_selectElement:function(t,n){var i=e(t),r=!n&&this._notify("select",{element:t});i.removeClass(u),r||(i.addClass(c),this.options.aria&&i.attr(l,!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){return e.removeClass(c),this.options.aria&&e.attr(l,!1),e},_select:function(t){this._allowSelection(t.event.target)&&(!g||g&&!e(r._activeElement()).is(f))&&t.preventDefault()},_allowSelection:function(t){return!e(t).is(f)||(this.userEvents.cancel(),this._downTarget=null,!1)},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+c);this._unselect(e)},selectRange:function(t,n){var i,r,o,a=this;for(a.clear(),a.element.length>1&&(o=a.options.continuousItems()),o&&o.length||(o=a.element.find(a.options.filter)),(t=e.inArray(e(t)[0],o))>(n=e.inArray(e(n)[0],o))&&(r=t,t=n,n=r),a.options.useAllItems||(n+=a.element.length-1),i=t;n>=i;i++)a._selectElement(o[i]);a._notify(h)},destroy:function(){var e=this;o.fn.destroy.call(e),e.element.off(".kendoSelectable"),e.userEvents.destroy(),e._marquee=e._lastActive=e.element=e.userEvents=null}})).parseOptions=function(e){var t="string"==typeof e&&e.toLowerCase();return{multiple:t&&t.indexOf("multiple")>-1,cell:t&&t.indexOf("cell")>-1}},r.ui.plugin(i)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=n.keys,a="click",s=".kendoButton",l="disabled",c="k-state-focused",u="k-state-selected",d=i.extend({init:function(e,t){var o=this;i.fn.init.call(o,e,t),e=o.wrapper=o.element,t=o.options,e.addClass("k-button").attr("role","button"),t.enable=t.enable&&!e.attr(l),o.enable(t.enable),o._tabindex(),o._graphics(),e.on(a+s,r(o._click,o)).on("focus"+s,r(o._focus,o)).on("blur"+s,r(o._blur,o)).on("keydown"+s,r(o._keydown,o)).on("keyup"+s,r(o._keyup,o)),n.notify(o)},destroy:function(){this.wrapper.off(s),i.fn.destroy.call(this)},events:[a],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger(a,{event:e})&&e.preventDefault()},_focus:function(){this.options.enable&&this.element.addClass(c)},_blur:function(){this.element.removeClass(c)},_keydown:function(e){var t=this;t._isNativeButton()||(e.keyCode==o.ENTER||e.keyCode==o.SPACEBAR)&&(e.keyCode==o.SPACEBAR&&(e.preventDefault(),t.options.enable&&t.element.addClass(u)),t._click(e))},_keyup:function(){this.element.removeClass(u)},_graphics:function(){var t,n,i,r=this.element,o=this.options,a=o.icon,s=o.spriteCssClass,l=o.imageUrl;(s||l||a)&&(i=!0,r.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),r.addClass(i?"k-button-icon":"k-button-icontext")),a?((t=r.children("span.k-icon").first())[0]||(t=e('<span class="k-icon"></span>').prependTo(r)),t.addClass("k-i-"+a)):s?((t=r.children("span.k-sprite").first())[0]||(t=e('<span class="k-sprite"></span>').prependTo(r)),t.addClass(s)):l&&((n=r.children("img.k-image").first())[0]||(n=e('<img alt="icon" class="k-image" />').prependTo(r)),n.attr("src",l))},enable:function(e){var t=this.element;void 0===e&&(e=!0),e=!!e,this.options.enable=e,t.toggleClass("k-state-disabled",!e).attr("aria-disabled",!e).attr(l,!e);try{t.blur()}catch(e){}}});n.ui.plugin(d)}(window.kendo.jQuery),function(e,t){function n(e,t,n,i,r){return e({idx:t,text:n,ns:c.ns,numeric:i,title:r||""})}function i(e,t,n){return b({className:e.substring(1),text:t,wrapClassName:n||""})}function r(e,t,n,i){e.find(t).parent().attr(c.attr("page"),n).attr("tabindex",-1).toggleClass("k-state-disabled",i)}function o(e,t){r(e,p,1,1>=t)}function a(e,t){r(e,g,Math.max(1,t-1),1>=t)}function s(e,t,n){r(e,m,Math.min(n,t+1),t>=n)}function l(e,t,n){r(e,f,n,t>=n)}var c=window.kendo,u=c.ui,d=u.Widget,h=e.proxy,p=".k-i-seek-w",f=".k-i-seek-e",g=".k-i-arrow-w",m=".k-i-arrow-e",v="change",_=".kendoPager",y="click",b=c.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),w=d.extend({init:function(t,n){var r,u,b,w,k=this;d.fn.init.call(k,t,n),n=k.options,k.dataSource=c.data.DataSource.create(n.dataSource),k.linkTemplate=c.template(k.options.linkTemplate),k.selectTemplate=c.template(k.options.selectTemplate),k.currentPageTemplate=c.template(k.options.currentPageTemplate),r=k.page(),u=k.totalPages(),k._refreshHandler=h(k.refresh,k),k.dataSource.bind(v,k._refreshHandler),n.previousNext&&(k.element.find(p).length||(k.element.append(i(p,n.messages.first,"k-pager-first")),o(k.element,r)),k.element.find(g).length||(k.element.append(i(g,n.messages.previous)),a(k.element,r))),n.numeric&&(k.list=k.element.find(".k-pager-numbers"),k.list.length||(k.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(k.element))),n.input&&(k.element.find(".k-pager-input").length||k.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+c.format(n.messages.of,u)+"</span>"),k.element.on("keydown"+_,".k-pager-input input",h(k._keydown,k))),n.previousNext&&(k.element.find(m).length||(k.element.append(i(m,n.messages.next)),s(k.element,r,u)),k.element.find(f).length||(k.element.append(i(f,n.messages.last,"k-pager-last")),l(k.element,r,u))),n.pageSizes&&(k.element.find(".k-pager-sizes").length||(b=n.pageSizes.length?n.pageSizes:["all",5,10,20],w=e.map(b,function(e){return e.toLowerCase&&"all"===e.toLowerCase()?"<option value='all'>"+n.messages.allPages+"</option>":"<option>"+e+"</option>"}),e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(k.element).find("select").html(w.join("")).end().appendTo(k.element)),k.element.find(".k-pager-sizes select").val(k.pageSize()),c.ui.DropDownList&&k.element.find(".k-pager-sizes select").show().kendoDropDownList(),k.element.on(v+_,".k-pager-sizes select",h(k._change,k))),n.refresh&&(k.element.find(".k-pager-refresh").length||k.element.append('<a href="#" class="k-pager-refresh k-link" title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>"),k.element.on(y+_,".k-pager-refresh",h(k._refreshClick,k))),n.info&&(k.element.find(".k-pager-info").length||k.element.append('<span class="k-pager-info k-label" />')),k.element.on(y+_,"a",h(k._click,k)).addClass("k-pager-wrap k-widget k-floatwrap"),k.element.on(y+_,".k-current-page",h(k._toggleActive,k)),n.autoBind&&k.refresh(),c.notify(k)},destroy:function(){var e=this;d.fn.destroy.call(e),e.element.off(_),e.dataSource.unbind(v,e._refreshHandler),e._refreshHandler=null,c.destroy(e.element),e.element=e.list=null},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',currentPageTemplate:'<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{allPages:"All",display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,i,r,u,d=this,h=1,p=d.page(),f="",g=d.options,m=d.pageSize(),v=d.dataSource.total(),_=d.totalPages(),y=d.linkTemplate,b=g.buttonCount;if(!e||"itemchange"!=e.action){if(g.numeric){for(p>b&&(h=0==(r=p%b)?p-b+1:p-r+1),i=Math.min(h+b-1,_),h>1&&(f+=n(y,h-1,"...",!1,g.messages.morePages)),t=h;i>=t;t++)f+=n(t==p?d.selectTemplate:y,t,t,!0);_>i&&(f+=n(y,t,"...",!1,g.messages.morePages)),""===f&&(f=d.selectTemplate({text:0})),f=this.currentPageTemplate({text:p})+f,d.list.removeClass("k-state-expanded").html(f)}g.info&&(f=v>0?c.format(g.messages.display,(p-1)*m+1,Math.min(p*m,v),v):g.messages.empty,d.element.find(".k-pager-info").html(f)),g.input&&d.element.find(".k-pager-input").html(d.options.messages.page+'<input class="k-textbox">'+c.format(g.messages.of,_)).find("input").val(p).attr("disabled",1>v).toggleClass("k-state-disabled",1>v),g.previousNext&&(o(d.element,p),a(d.element,p),s(d.element,p,_),l(d.element,p,_)),g.pageSizes&&(u=m,d.element.find(".k-pager-sizes option[value='all']").length>0&&m===this.dataSource.total()&&(m="all",u=g.messages.allPages),d.element.find(".k-pager-sizes select").val(m).filter("["+c.attr("role")+"=dropdownlist]").kendoDropDownList("value",m).kendoDropDownList("text",u))}},_keydown:function(e){if(e.keyCode===c.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||1>n||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=e.currentTarget.value,n=parseInt(t,10),i=this.dataSource;isNaN(n)?"all"==(t+"").toLowerCase()&&i.pageSize(i.total()):i.pageSize(n)},_toggleActive:function(){this.list.toggleClass("k-state-expanded")},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(c.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/(this.pageSize()||1))},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});u.plugin(w)}(window.kendo.jQuery),function(e,t){function n(t,n){return t===n||e.contains(t,n)}var i=window.kendo,r=i.ui,o=r.Widget,a=i.support,s=i.getOffset,l="open",c="close",u="deactivate",d="activate",h="center",p="left",f="right",g="top",m="bottom",v="absolute",_="hidden",y="body",b="location",w="position",k="visible",x="effects",C="k-state-active",T="k-state-border",S=/k-state-border-(\w+)/,D=".k-picker-wrap, .k-dropdown-wrap, .k-link",A=e(document.documentElement),M=e(window),E=a.transitions.css+"transform",I=e.extend,R=".kendoPopup",P=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],L=o.extend({init:function(t,n){var r,a=this;(n=n||{}).isRtl&&(n.origin=n.origin||m+" "+f,n.position=n.position||g+" "+f),o.fn.init.call(a,t,n),t=a.element,n=a.options,a.collisions=n.collision?n.collision.split(" "):[],a.downEvent=i.applyEventMap("down",i.guid()),1===a.collisions.length&&a.collisions.push(a.collisions[0]),r=e(a.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),n.appendTo=e(e(n.appendTo)[0]||r[0]||y),a.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!n.isRtl).css({position:v}).appendTo(n.appendTo).on("mouseenter"+R,function(){a._hovered=!0}).on("mouseleave"+R,function(){a._hovered=!1}),a.wrapper=e(),!1===n.animation&&(n.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),I(n.animation.open,{complete:function(){a.wrapper.css({overflow:k}),a._activated=!0,a._trigger(d)}}),I(n.animation.close,{complete:function(){a._animationClose()}}),a._mousedownProxy=function(e){a._mousedown(e)},a._resizeProxy=function(e){a._resize(e)},n.toggleTarget&&e(n.toggleTarget).on(n.toggleEvent+R,e.proxy(a.toggle,a))},events:[l,d,c,u],options:{name:"Popup",toggleEvent:"click",origin:m+" "+p,position:g+" "+p,anchor:y,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var t,n,r,o,a=this,s=a.options;a.wrapper.hide(),t=a.wrapper.data(b),n=e(s.anchor),t&&a.wrapper.css(t),s.anchor!=y&&(r=((n.attr("class")||"").match(S)||["","down"])[1],o=T+"-"+r,n.removeClass(o).children(D).removeClass(C).removeClass(o),a.element.removeClass(T+"-"+i.directions[r].reverse)),a._closing=!1,a._trigger(u)},destroy:function(){var t,n=this,r=n.options,a=n.element.off(R);o.fn.destroy.call(n),r.toggleTarget&&e(r.toggleTarget).off(R),r.modal||(A.unbind(n.downEvent,n._mousedownProxy),n._toggleResize(!1)),i.destroy(n.element.children()),a.removeData(),r.appendTo[0]===document.body&&((t=a.parent(".k-animation-container"))[0]?t.remove():a.remove())},open:function(t,n){var r,o,s,c=this,u={isFixed:!isNaN(parseInt(n,10)),x:t,y:n},d=c.element,h=c.options,p="down",f=e(h.anchor),m=d[0]&&d.hasClass("km-widget");if(!c.visible()){if(h.copyAnchorStyles&&(m&&"font-size"==P[0]&&P.shift(),d.css(i.getComputedStyles(f[0],P))),d.data("animating")||c._trigger(l))return;c._activated=!1,h.modal||(A.unbind(c.downEvent,c._mousedownProxy).bind(c.downEvent,c._mousedownProxy),a.mobileOS.ios||a.mobileOS.android||(c._toggleResize(!1),c._toggleResize(!0))),c.wrapper=o=i.wrap(d,h.autosize).css({overflow:_,display:"block",position:v}),a.mobileOS.android&&o.css(E,"translatez(0)"),o.css(w),e(h.appendTo)[0]==document.body&&o.css(g,"-10000px"),r=I(!0,{},h.animation.open),c.flipped=c._position(u),r.effects=i.parseEffects(r.effects,c.flipped),p=r.effects.slideIn?r.effects.slideIn.direction:p,h.anchor!=y&&(s=T+"-"+p,d.addClass(T+"-"+i.directions[p].reverse),f.addClass(s).children(D).addClass(C).addClass(s)),d.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},position:function(){this.visible()&&this._position()},toggle:function(){this[this.visible()?c:l]()},visible:function(){return this.element.is(":"+k)},close:function(t){var n,r,o,a,s=this,l=s.options;if(s.visible()){if(n=s.wrapper[0]?s.wrapper:i.wrap(s.element).hide(),s._toggleResize(!1),s._closing||s._trigger(c))return void s._toggleResize(!0);s.element.find(".k-popup").each(function(){var n=e(this).data("kendoPopup");n&&n.close(t)}),A.unbind(s.downEvent,s._mousedownProxy),t?r={hide:!0,effects:{}}:(r=I(!0,{},l.animation.close),o=s.element.data(x),!(a=r.effects)&&!i.size(a)&&o&&i.size(o)&&(r.effects=o,r.reverse=!0),s._closing=!0),s.element.kendoStop(!0),n.css({overflow:_}),s.element.kendoAnimate(r)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;"resize"===e.type?(clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t._position(),t._resizeTimeout=null},50)):(!t._hovered||t._activated&&t.element.hasClass("k-list-container"))&&t.close()},_toggleResize:function(e){var t=e?"on":"off";this._scrollableParents()[t]("scroll",this._resizeProxy),M[t]("resize scroll",this._resizeProxy)},_mousedown:function(t){var r=this,o=r.element[0],a=r.options,s=e(a.anchor)[0],l=a.toggleTarget,c=i.eventTarget(t),u=e(c).closest(".k-popup"),d=u.parent().parent(".km-shim").length;u=u[0],(d||!u||u===r.element[0])&&"popover"!==e(t.target).closest("a").data("rel")&&(n(o,c)||n(s,c)||l&&n(e(l)[0],c)||r.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,o,a){var s=0;return a=a||t,o!==r&&o!==h&&r!==h&&(e+a>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){return i.isScrollable(t)})},_position:function(t){var n,r,o,l,c,u,d,h,p,f,g=this,m=g.element,_=g.wrapper,y=g.options,k=e(y.viewport),x=k.offset(),C=e(y.anchor),T=y.origin.toLowerCase().split(" "),S=y.position.toLowerCase().split(" "),D=g.collisions,A=a.zoomLevel(),M=10002,E=!!(k[0]==window&&window.innerWidth&&1.02>=A),R=0,P=document.documentElement,L=E?window.innerWidth:k.width(),F=E?window.innerHeight:k.height();if(E&&P.scrollHeight-P.clientHeight>0&&(L-=i.support.scrollbar()),(n=C.parents().filter(_.siblings()))[0])if(o=Math.max(+n.css("zIndex"),0))M=o+10;else for(l=(r=C.parentsUntil(n)).length;l>R;R++)(o=+e(r[R]).css("zIndex"))&&o>M&&(M=o+10);return _.css("zIndex",M),_.css(t&&t.isFixed?{left:t.x,top:t.y}:g._align(T,S)),c=s(_,w,C[0]===_.offsetParent()[0]),u=s(_),C.offsetParent().parent(".k-animation-container,.k-popup,.k-group").length&&(c=s(_,w,!0),u=s(_)),k[0]===window?(u.top-=window.pageYOffset||document.documentElement.scrollTop||0,u.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(u.top-=x.top,u.left-=x.left),g.wrapper.data(b)||_.data(b,I({},c)),d=I({},u),h=I({},c),p=y.adjustSize,"fit"===D[0]&&(h.top+=g._fit(d.top,_.outerHeight()+p.height,F/A)),"fit"===D[1]&&(h.left+=g._fit(d.left,_.outerWidth()+p.width,L/A)),f=I({},h),"flip"===D[0]&&(h.top+=g._flip(d.top,m.outerHeight(),C.outerHeight(),F/A,T[0],S[0],_.outerHeight())),"flip"===D[1]&&(h.left+=g._flip(d.left,m.outerWidth(),C.outerWidth(),L/A,T[1],S[1],_.outerWidth())),m.css(w,v),_.css(h),h.left!=f.left||h.top!=f.top},_align:function(t,n){var i,r=this,o=r.wrapper,a=e(r.options.anchor),l=t[0],c=t[1],u=n[0],d=n[1],p=s(a),g=e(r.options.appendTo),v=o.outerWidth(),_=o.outerHeight(),y=a.outerWidth(),b=a.outerHeight(),w=p.top,k=p.left,x=Math.round;return g[0]!=document.body&&(w-=(i=s(g)).top,k-=i.left),l===m&&(w+=b),l===h&&(w+=x(b/2)),u===m&&(w-=_),u===h&&(w-=x(_/2)),c===f&&(k+=y),c===h&&(k+=x(y/2)),d===f&&(k-=v),d===h&&(k-=x(v/2)),{top:w,left:k}}});r.plugin(L)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=e.extend,a=window.setTimeout,s="click",l="show",c="hide",u="k-notification",d=".k-notification-wrap .k-i-close",h="info",p="top",f="left",g="bottom",m="right",v=".kendoNotification",_=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),(r=o.options).appendTo&&e(r.appendTo).is(t)||o.element.hide(),o._compileTemplates(r.templates),o._guid="_"+n.guid(),o._isRtl=n.support.isRtl(t),o._compileStacking(r.stacking,r.position.top,r.position.left),n.notify(o)},events:[l,c],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(t){var i=this,r=n.template;i._compiled={},e.each(t,function(t,n){i._compiled[n.type]=r(n.template||e("#"+n.templateId).html())}),i._defaultCompiled=r('<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>')},_getCompiled:function(e){var t=this._defaultCompiled;return e&&this._compiled[e]||t},_compileStacking:function(e,t,n){var i,r,o=this,a={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},s=null!==n?f:m;switch(e){case"down":i=g+" "+s,r=p+" "+s,delete a.paddingBottom;break;case m:i=p+" "+m,r=p+" "+f,delete a.paddingRight;break;case f:i=p+" "+f,r=p+" "+m,delete a.paddingLeft;break;case"up":i=p+" "+s,r=g+" "+s,delete a.paddingTop;break;default:null!==t?(i=g+" "+s,r=p+" "+s,delete a.paddingBottom):(i=p+" "+s,r=g+" "+s,delete a.paddingTop)}o._popupOrigin=i,o._popupPosition=r,o._popupPaddings=a},_attachPopupEvents:function(e,t){function i(e){e.on(s+v,function(){o._hidePopup(t)})}var r,o=this,l=e.allowHideAfter,c=!isNaN(l)&&l>0;t.options.anchor!==document.body&&t.options.origin.indexOf(m)>0&&t.bind("open",function(){var e=n.getShadows(t.element);a(function(){t.wrapper.css("left",parseFloat(t.wrapper.css("left"))+e.left+e.right)})}),e.hideOnClick?t.bind("activate",function(){c?a(function(){i(t.element)},l):i(t.element)}):e.button&&(r=t.element.find(d),c?a(function(){i(r)},l):i(r))},_showPopup:function(t,i){var r,s,l=this,c=i.autoHideAfter,u=i.position.left,h=i.position.top;s=e("."+l._guid+":not(.k-hiding)").last(),r=new n.ui.Popup(t,{anchor:s[0]?s:document.body,origin:l._popupOrigin,position:l._popupPosition,animation:i.animation,modal:!0,collision:"",isRtl:l._isRtl,close:function(){l._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(v),e.sender.element.find(d).off(v),e.sender.destroy()}}),l._attachPopupEvents(i,r),s[0]?r.open():(null===u&&(u=e(window).width()-t.width()-i.position.right),null===h&&(h=e(window).height()-t.height()-i.position.bottom),r.open(u,h)),r.wrapper.addClass(l._guid).css(o({margin:0},l._popupPaddings)),i.position.pinned?(r.wrapper.css("position","fixed"),s[0]&&l._togglePin(r.wrapper,!0)):s[0]||l._togglePin(r.wrapper,!1),c>0&&a(function(){l._hidePopup(r)},c)},_hidePopup:function(e){e.wrapper.addClass("k-hiding"),e.close()},_togglePin:function(t,n){var i=e(window),r=n?-1:1;t.css({top:parseInt(t.css(p),10)+r*i.scrollTop(),left:parseInt(t.css(f),10)+r*i.scrollLeft()})},_attachStaticEvents:function(e,t){function n(e){e.on(s+v,r(i._hideStatic,i,t))}var i=this,o=e.allowHideAfter,l=!isNaN(o)&&o>0;e.hideOnClick?l?a(function(){n(t)},o):n(t):e.button&&(l?a(function(){n(t.find(d))},o):n(t.find(d)))},_showStatic:function(e,t){var n=this,i=t.autoHideAfter,r=t.animation,o="up"==t.stacking||t.stacking==f?"prependTo":"appendTo";e.addClass(n._guid)[o](t.appendTo).hide().kendoAnimate(r.open||!1),n._attachStaticEvents(t,e),i>0&&a(function(){n._hideStatic(e)},i)},_hideStatic:function(e){e.kendoAnimate(o(this.options.animation.close||!1,{complete:function(){e.off(v).find(d).off(v),e.remove()}})),this._triggerHide(e)},_triggerHide:function(e){this.trigger(c,{element:e}),this.angular("cleanup",function(){return{elements:e}})},show:function(i,r){var a,s,c=this,d=c.options,p=e('<div class="k-widget k-notification"></div>');return r||(r=h),null!==i&&i!==t&&""!==i&&(n.isFunction(i)&&(i=i()),s={typeIcon:r,content:""},a=e.isPlainObject(i)?o(s,i):o(s,{content:i}),p.addClass(u+"-"+r).toggleClass(u+"-button",d.button).attr("data-role","alert").css({width:d.width,height:d.height}).append(c._getCompiled(r)(a)),c.angular("compile",function(){return{elements:p,data:[{dataItem:a}]}}),e(d.appendTo)[0]?c._showStatic(p,d):c._showPopup(p,d),c.trigger(l,{element:p})),c},info:function(e){return this.show(e,h)},success:function(e){return this.show(e,"success")},warning:function(e){return this.show(e,"warning")},error:function(e){return this.show(e,"error")},hide:function(){var t=this;return t.getNotifications().each(t.options.appendTo?function(n,i){t._hideStatic(e(i))}:function(n,i){var r=e(i).data("kendoPopup");r&&t._hidePopup(r)}),t},getNotifications:function(){var t=e("."+this._guid);return this.options.appendTo?t:t.children("."+u)},setOptions:function(e){var n,r=this;i.fn.setOptions.call(r,e),n=r.options,e.templates!==t&&r._compileTemplates(n.templates),(e.stacking!==t||e.position!==t)&&r._compileStacking(n.stacking,n.position.top,n.position.left)},destroy:function(){i.fn.destroy.call(this),this.getNotifications().off(v).find(d).off(v)}});n.ui.plugin(_)}(window.kendo.jQuery),function(e){function t(e){for(;e.length;)n(e),e=e.parent()}function n(e){var t=e.data(o.ns+"title");t&&(e.attr("title",t),e.removeData(o.ns+"title"))}function i(e){var t=e.attr("title");t&&(e.data(o.ns+"title",t),e.attr("title",""))}function r(e){for(;e.length&&!e.is("body");)i(e),e=e.parent()}var o=window.kendo,a=o.ui.Widget,s=o.ui.Popup,l=o.isFunction,c=e.isPlainObject,u=e.extend,d=e.proxy,h=e(document),p=o.isLocalUrl,f="_tt_active",g="aria-describedby",m="show",v="hide",_="error",y="contentLoad",b="requestStart",w="k-content-frame",k=o.template("<iframe frameborder='0' class='"+w+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),x=".kendoTooltip",C={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},T={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},S={bottom:"n",top:"s",left:"e",right:"w",center:"n"},D={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},A=a.extend({init:function(e,t){var n,i=this;a.fn.init.call(i,e,t),n=i.options.position.match(/left|right/)?"horizontal":"vertical",i.dimensions=D[n],i._documentKeyDownHandler=d(i._documentKeyDown,i),i.element.on(i.options.showOn+x,i.options.filter,d(i._showOn,i)).on("mouseenter"+x,i.options.filter,d(i._mouseenter,i)),this.options.autoHide&&i.element.on("mouseleave"+x,i.options.filter,d(i._mouseleave,i))},options:{name:"Tooltip",filter:"",content:function(e){return e.target.data(o.ns+"title")},showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:[m,v,y,_,b],_mouseenter:function(t){r(e(t.currentTarget))},_showOn:function(t){var n=this,i=e(t.currentTarget);n.options.showOn&&n.options.showOn.match(/click|focus/)?n._show(i):(clearTimeout(n.timeout),n.timeout=setTimeout(function(){n._show(i)},n.options.showAfter))},_appendContent:function(e){var t,n=this,i=n.options.content,r=n.content,a=n.options.iframe;c(i)&&i.url?("iframe"in n.options||(a=!p(i.url)),n.trigger(b,{options:i,target:e}),a?(r.hide(),(t=r.find("."+w)[0])?t.src=i.url||t.src:r.html(k({content:i})),r.find("."+w).off("load"+x).on("load"+x,function(){n.trigger(y),r.show()})):(r.empty(),o.ui.progress(r,!0),n._ajaxRequest(i))):i&&l(i)?(i=i({sender:this,target:e}),r.html(i||"")):r.html(i),n.angular("compile",function(){return{elements:r}})},_ajaxRequest:function(e){var t=this;jQuery.ajax(u({type:"GET",dataType:"html",cache:!1,error:function(e,n){o.ui.progress(t.content,!1),t.trigger(_,{status:n,xhr:e})},success:d(function(e){o.ui.progress(t.content,!1),t.content.html(e),t.trigger(y)},t)},e))},_documentKeyDown:function(e){e.keyCode===o.keys.ESC&&this.hide()},refresh:function(){var e=this.popup;e&&e.options.anchor&&this._appendContent(e.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(e){r(e=e||this.element),this._show(e)},_show:function(e){var n=this,i=n.target();n.popup||n._initPopup(),i&&i[0]!=e[0]&&(n.popup.close(),n.popup.element.kendoStop(!0,!0)),i&&i[0]==e[0]||(n._appendContent(e),n.popup.options.anchor=e),n.popup.one("deactivate",function(){t(e),e.removeAttr(g),this.element.removeAttr("id").attr("aria-hidden",!0),h.off("keydown"+x,n._documentKeyDownHandler)}),n.popup.open()},_initPopup:function(){var t=this,n=t.options,i=e(o.template('<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>')({callout:n.callout&&"center"!==n.position,dir:S[n.position],autoHide:n.autoHide}));t.popup=new s(i,u({activate:function(){var e=this.options.anchor,i=e[0].id||t.element[0].id;i&&(e.attr(g,i+f),this.element.attr("id",i+f)),n.callout&&t._positionCallout(),this.element.removeAttr("aria-hidden"),h.on("keydown"+x,t._documentKeyDownHandler),t.trigger(m)},close:function(){t.trigger(v)},copyAnchorStyles:!1,animation:n.animation},C[n.position])),i.css({width:n.width,height:n.height}),t.content=i.find(".k-tooltip-content"),t.arrow=i.find(".k-callout"),n.autoHide?i.on("mouseleave"+x,d(t._mouseleave,t)):i.on("click"+x,".k-tooltip-button",d(t._closeButtonClick,t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(n){if(this.popup){var i=e(n.currentTarget),r=i.offset(),o=n.pageX,a=n.pageY;if(r.right=r.left+i.outerWidth(),r.bottom=r.top+i.outerHeight(),o>r.left&&r.right>o&&a>r.top&&r.bottom>a)return;this.popup.close()}else t(e(n.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var t=this,n=t.options.position,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=parseInt(t.arrow.css("border-top-width"),10),c=e(o.element).offset(),u=S[o.flipped?T[n]:n],d=s[r]-c[r]+e(a)[i.size]()/2-l;t.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+u).css(r,d)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var e=this.popup;e&&(e.element.off(x),e.destroy()),this.element.off(x),h.off("keydown"+x,this._documentKeyDownHandler),a.fn.destroy.call(this)}});o.ui.plugin(A)}(window.kendo.jQuery),function(e,t){function n(t,i){var r,o=!1;return t.filters&&(r=e.grep(t.filters,function(e){return o=n(e,i),e.filters?e.filters.length:e.field!=i}),o||t.filters.length===r.length||(o=!0),t.filters=r),o}var i,r,o=window.kendo,a=o.ui,s=a.Widget,l=o.keys,c=o.support,u=o.htmlEncode,d=o._activeElement,h=o.data.ObservableArray,p="id",f="change",g="k-state-focused",m="k-state-hover",v="k-loading",_="open",y="close",b="select",w="selected",k="requestStart",x="requestEnd",C="width",T=e.extend,S=e.proxy,D=e.isArray,A=c.browser,M=A.msie&&9>A.version,E=/"/g,I={ComboBox:"DropDownList",DropDownList:"ComboBox"},R=o.ui.DataBoundWidget.extend({init:function(t,n){var i,r=this,o=r.ns;s.fn.init.call(r,t,n),t=r.element,n=r.options,r._isSelect=t.is(b),r._isSelect&&r.element[0].length&&(n.dataSource||(n.dataTextField=n.dataTextField||"text",n.dataValueField=n.dataValueField||"value")),r.ul=e('<ul unselectable="on" class="k-list k-reset"/>').attr({tabIndex:-1,"aria-hidden":!0}),r.list=e("<div class='k-list-container'/>").append(r.ul).on("mousedown"+o,S(r._listMousedown,r)),(i=t.attr(p))&&(r.list.attr(p,i+"-list"),r.ul.attr(p,i+"_listbox")),r._header(),r._accessors(),r._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(e){s.fn.setOptions.call(this,e),e&&e.enable!==t&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},_listOptions:function(e){var t=this.options;return(e={height:(e=e||{}).height||t.height,dataValueField:e.dataValueField||t.dataValueField,dataTextField:e.dataTextField||t.dataTextField,groupTemplate:e.groupTemplate||t.groupTemplate,fixedGroupTemplate:e.fixedGroupTemplate||t.fixedGroupTemplate,template:e.template||t.template}).template||(e.template="#:"+o.expr(e.dataTextField,"data")+"#"),e},_initList:function(){var n=this,i=n.options,r=i.virtual,a=!!r,s=i.value,l=S(n._listBound,n),c={autoBind:!1,selectable:!0,dataSource:n.dataSource,click:S(n._click,n),change:S(n._listChange,n),activate:S(n._activateItem,n),deactivate:S(n._deactivateItem,n),dataBinding:function(){n.trigger("dataBinding"),n._angularItems("cleanup")},dataBound:l,listBound:l,selectedItemChange:S(n._listChange,n)};c=e.extend(n._listOptions(),c,"object"==typeof r?r:{}),n.listView=a?new o.ui.VirtualList(n.ul,c):new o.ui.StaticList(n.ul,c),s!==t&&n.listView.value(s).done(function(){var e=i.text;!n.listView.filter()&&n.input&&(-1===n.selectedIndex?((e===t||null===e)&&(e=s),n._accessor(s),n.input.val(e),n._placeholder()):-1===n._oldIndex&&(n._oldIndex=n.selectedIndex))})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(e,t){var i=this,r=i.options,o=i.dataSource,a=T({},o.filter()||{}),s=n(a,r.dataTextField);(e||s)&&i.trigger("filtering",{filter:e})||(e&&(a=a.filters||[]).push(e),t?o.read(a):o.filter(a))},_header:function(){var t,n=this,i=n.options.headerTemplate;e.isFunction(i)&&(i=i({})),i&&(n.list.prepend(i),t=n.ul.prev(),n.header=t[0]?t:null,n.header&&n.angular("compile",function(){return{elements:n.header}}))},_initValue:function(){var e=this,t=e.options.value;null!==t?e.element.val(t):(t=e._accessor(),e.options.value=t),e._old=t},_ignoreCase:function(){var e,t=this,n=t.dataSource.reader.model;n&&n.fields&&(e=n.fields[t.options.dataTextField])&&e.type&&"string"!==e.type&&(t.options.ignoreCase=!1)},_focus:function(e){return this.listView.focus(e)},current:function(e){return this._focus(e)},items:function(){return this.ul[0].children},destroy:function(){var e=this,t=e.ns;s.fn.destroy.call(e),e._unbindDataSource(),e.listView.destroy(),e.list.off(t),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(n){var i=this;return n===t?i.listView.selectedDataItems()[0]:("number"!=typeof n&&(n=e(i.items()).index(n)),i.dataSource.flatView()[n])},_activateItem:function(){var e=this.listView.focus();e&&this._focused.add(this.filterInput).attr("aria-activedescendant",e.attr("id"))},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr("aria-activedescendant")},_accessors:function(){var e=this,t=e.element,n=e.options,i=o.getter,r=t.attr(o.attr("text-field")),a=t.attr(o.attr("value-field"));!n.dataTextField&&r&&(n.dataTextField=r),!n.dataValueField&&a&&(n.dataValueField=a),e._text=i(n.dataTextField),e._value=i(n.dataValueField)},_aria:function(e){var n=this,i=n.options,r=n._focused.add(n.filterInput);i.suggest!==t&&r.attr("aria-autocomplete",i.suggest?"both":"list"),e=e?e+" "+n.ul[0].id:n.ul[0].id,r.attr("aria-owns",e),n.ul.attr("aria-live",i.filter&&"none"!==i.filter?"polite":"off")},_blur:function(){this._change(),this.close()},_change:function(){var e,n=this,i=n.selectedIndex,r=n.options.value,o=n.value();n._isSelect&&!n.listView.isBound()&&r&&(o=r),o!==n._old?e=!0:i!==t&&i!==n._oldIndex&&(e=!0),e&&(n._old=o,n._oldIndex=i,n._typing||n.element.trigger(f),n.trigger(f)),n.typing=!1},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,n=e.options,i=e.element.is("[disabled]");n.enable!==t&&(n.enabled=n.enable),!n.enabled||i?e.enable(!1):e.readonly(e.element.is("[readonly]"))},_dataValue:function(e){var n=this._value(e);return n===t&&(n=this._text(e)),n},_offsetHeight:function(){var t=0;return this.listView.content.prevAll(":visible").each(function(){var n=e(this);t+=n.hasClass("k-list-filter")?n.children().outerHeight():n.outerHeight()}),t},_height:function(e){var t,n,i=this,r=i.list,o=i.options.height,a=i.popup.visible();return e&&(n=r.add(r.parent(".k-animation-container")).show(),o=i.listView.content[0].scrollHeight>o?o:"auto",n.height(o),"auto"!==o&&(t=i._offsetHeight())&&(o-=t),i.listView.content.height(o),a||n.hide()),o},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.wrapper;if(n.data(C)||!i)return t=(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0)?parseFloat(e.width):r.outerWidth(),e&&A.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(C,i),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(_)?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger(y)?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_focusItem:function(){var e=this.listView,n=e.focus(),i=e.select();(i=i[i.length-1])===t&&this.options.highlightFirst&&!n&&(i=0),i!==t?e.focus(i):e.scrollToIndex(0)},_calculateGroupPadding:function(e){var t=this.ul.children(".k-first:first"),n=this.listView.content.prev(".k-group-header"),i=0;n[0]&&"none"!==n[0].style.display&&("auto"!==e&&(i=o.support.scrollbar()),i+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("padding-right"),10),n.css("padding-right",i))},_firstOpen:function(){var e=this._height(this.dataSource.flatView().length);this._calculateGroupPadding(e)},_popup:function(){var e=this;e.popup=new a.Popup(e.list,T({},e.options.popup,{anchor:e.wrapper,open:S(e._openHandler,e),close:S(e._closeHandler,e),animation:e.options.animation,isRtl:c.isRtl(e.wrapper)})),e.options.virtual||e.popup.one(_,S(e._firstOpen,e))},_makeUnselectable:function(){M&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(m,"mouseenter"===t.type)},_toggle:function(e,n){var i=this,r=c.mobileOS&&(c.touch||c.MSPointers||c.pointers);e=e!==t?e:!i.popup.visible(),n||r||i._focused[0]===d()||(i._prevent=!0,i._focused.focus(),i._prevent=!1),i[e?_:y]()},_triggerCascade:function(){var e=this;e._cascadeTriggered&&e._old===e.value()&&e._oldIndex===e.selectedIndex||(e._cascadeTriggered=!0,e.trigger("cascade",{userTriggered:e._userTriggered}))},_unbindDataSource:function(){var e=this;e.dataSource.unbind(k,e._requestStartHandler).unbind(x,e._requestEndHandler).unbind("error",e._errorHandler)}});T(R,{inArray:function(e,t){var n,i,r=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,i=r.length;i>n;n++)if(e===r[n])return n;return-1}}),o.ui.List=R,a.Select=R.extend({init:function(e,t){R.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){var t,n=this;n.options.dataSource=e,n._dataSource(),n.listView.setDataSource(n.dataSource),n.options.autoBind&&n.dataSource.fetch(),(t=n._parentWidget())&&n._cascadeSelect(t)},close:function(){this.popup.close()},select:function(e){var n=this;return e===t?n.selectedIndex:(n._select(e),n._old=n._accessor(),n._oldIndex=n.selectedIndex,t)},search:function(e){var t,n,i,r,o,a;t=this,n=(e="string"==typeof e?e:this.text()).length,r=(i=t.options).ignoreCase,o=i.filter,a=i.dataTextField,clearTimeout(t._typingTimeout),(!n||n>=i.minLength)&&(t._state="filter",t.listView.filter(!0),"none"===o?t._filter(e):(t._open=!0,t._filterSource({value:r?e.toLowerCase():e,field:a,operator:o,ignoreCase:r})))},_accessor:function(e,t){return this[this._isSelect?"_accessorSelect":"_accessorInput"](e,t)},_accessorInput:function(e){var n=this.element[0];return e===t?n.value:(null===e&&(e=""),n.value=e,t)},_accessorSelect:function(e,n){var i,r=this.element[0],o=r.selectedIndex;return e===t?(o>-1&&(i=r.options[o]),i&&(e=i.value),e||""):(o>-1&&r.options[o].removeAttribute(w),n===t&&(n=-1),null!==e&&""!==e&&-1==n?this._custom(e):(e?r.value=e:r.selectedIndex=n,r.selectedIndex>-1&&(i=r.options[r.selectedIndex]),i&&i.setAttribute(w,w)),t)},_custom:function(t){var n=this,i=n.element,r=n._customOption;r||(r=e("<option/>"),n._customOption=r,i.append(r)),r.text(t),r[0].setAttribute(w,w),r[0].selected=!0},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(v),e._focused.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._arrow&&(e._focused.attr("aria-busy",!0),e._arrow.addClass(v))},100))},_requestEnd:function(){this._request=!1,this._hideBusy()},_dataSource:function(){var t,n=this,i=n.element,r=n.options,a=r.dataSource||{};a=e.isArray(a)?{data:a}:a,n._isSelect&&((t=i[0].selectedIndex)>-1&&(r.index=t),a.select=i,a.fields=[{field:r.dataTextField},{field:r.dataValueField}]),n.dataSource?n._unbindDataSource():(n._requestStartHandler=S(n._showBusy,n),n._requestEndHandler=S(n._requestEnd,n),n._errorHandler=S(n._hideBusy,n)),n.dataSource=o.data.DataSource.create(a).bind(k,n._requestStartHandler).bind(x,n._requestEndHandler).bind("error",n._errorHandler)},_firstItem:function(){this.listView.first()},_lastItem:function(){this.listView.last()},_nextItem:function(){this.listView.next()},_prevItem:function(){this.listView.prev()},_move:function(e){var n,i,r,o,a=this,s=e.keyCode,c=s===l.DOWN;if(s===l.UP||c){if(e.altKey)a.toggle(c);else{if(!a.listView.isBound())return a._fetch||(a.dataSource.one(f,function(){a._fetch=!1,a._move(e)}),a._fetch=!0,a._filterSource()),e.preventDefault(),!0;if(r=a._focus(),a._fetch||r&&!r.hasClass("k-state-selected")||(c?(a._nextItem(),a._focus()||a._lastItem()):(a._prevItem(),a._focus()||a._firstItem())),a.trigger(b,{item:a.listView.focus()}))return a._focus(r),t;a._select(a._focus(),!0),a.popup.visible()||a._blur()}e.preventDefault(),i=!0}else if(s===l.ENTER||s===l.TAB){if(a.popup.visible()&&e.preventDefault(),r=a._focus(),n=a.dataItem(),a.popup.visible()||n&&a.text()===a._text(n)||(r=null),o=a.filterInput&&a.filterInput[0]===d(),r){if(a.trigger(b,{item:r}))return;a._select(r)}else a.input&&(a._accessor(a.input.val()),a.listView.value(a.input.val()));a._focusElement&&a._focusElement(a.wrapper),o&&s===l.TAB?a.wrapper.focusout():a._blur(),a.close(),i=!0}else s===l.ESC&&(a.popup.visible()&&e.preventDefault(),a.close(),i=!0);return i},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;e._request||e.options.cascadeFrom||e.listView.isBound()||e._fetch||t||(e._fetch=!0,e.dataSource.fetch().done(function(){e._fetch=!1}))},_options:function(e,n,i){var r,o,a,s,l=this,c=l.element,d=e.length,h="",p=0;for(n&&(h=n);d>p;p++)r="<option",o=e[p],a=l._text(o),(s=l._value(o))!==t&&(-1!==(s+="").indexOf('"')&&(s=s.replace(E,"&quot;")),r+=' value="'+s+'"'),r+=">",a!==t&&(r+=u(a)),h+=r+="</option>";c.html(h),i!==t&&(c[0].value=i,c[0].value&&!i&&(c[0].selectedIndex=-1))},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=r.on("reset",t._resetHandler))},_parentWidget:function(){var t=this.options.name,n=e("#"+this.options.cascadeFrom),i=n.data("kendo"+t);return i||(i=n.data("kendo"+I[t])),i},_cascade:function(){var e,t=this,n=t.options;if(n.cascadeFrom){if(!(e=t._parentWidget()))return;n.autoBind=!1,e.first("cascade",function(n){t._userTriggered=n.userTriggered,t.listView.isBound()&&t._clearSelection(e,!0),t._cascadeSelect(e)}),e.listView.isBound()?t._cascadeSelect(e):e.value()||t.enable(!1)}},_cascadeChange:function(e){var t=this,n=t._accessor();t._userTriggered?t._clearSelection(e,!0):n?(n!==t.listView.value()[0]&&t.value(n),t.dataSource.view()[0]&&-1!==t.selectedIndex||t._clearSelection(e,!0)):t.dataSource.flatView().length&&t.select(t.options.index),t.enable(),t._triggerCascade(),t._userTriggered=!1},_cascadeSelect:function(e){var t,i,r,o=this,a=e.dataItem(),s=a?e._value(a):null,l=o.options.cascadeFromField||e.options.dataValueField;s||0===s?(n(t=o.dataSource.filter()||{},l),(i=t.filters||[]).push({field:l,operator:"eq",value:s}),r=function(){o.unbind("dataBound",r),o._cascadeChange(e)},o.first("dataBound",r),o.dataSource.filter(i)):(o.enable(!1),o._clearSelection(e),o._triggerCascade(),o._userTriggered=!1)}}),i=".StaticList",r=o.ui.DataBoundWidget.extend({init:function(t,n){s.fn.init.call(this,t,n),this.element.attr("role","listbox").on("click"+i,"li",S(this._click,this)).on("mouseenter"+i,"li",function(){e(this).addClass(m)}).on("mouseleave"+i,"li",function(){e(this).removeClass(m)}),this.content=this.element.wrap("<div unselectable='on'></div>").parent().css({overflow:"auto",position:"relative"}),this.header=this.content.before('<div class="k-group-header" style="display:none"></div>').prev(),this._bound=!1,this._optionID=o.guid(),this._selectedIndices=[],this._view=[],this._dataItems=[],this._values=[];var r=this.options.value;r&&(this._values=e.isArray(r)?r.slice(0):[r]),this._getter(),this._templates(),this.setDataSource(this.options.dataSource),this._onScroll=S(function(){var e=this;clearTimeout(e._scrollId),e._scrollId=setTimeout(function(){e._renderHeader()},50)},this)},options:{name:"StaticList",dataValueField:null,selectable:!0,template:null,groupTemplate:null,fixedGroupTemplate:null},events:["click","change","activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(t){var n,i=this,r=t||{};r=e.isArray(r)?{data:r}:r,r=o.data.DataSource.create(r),i.dataSource?(i.dataSource.unbind(f,i._refreshHandler),n=i.value(),i.value([]),i._bound=!1,i.value(n)):i._refreshHandler=S(i.refresh,i),i.dataSource=r.bind(f,i._refreshHandler),i._fixedHeader()},setOptions:function(e){s.fn.setOptions.call(this,e),this._getter(),this._templates(),this._render()},destroy:function(){this.element.off(i),this._refreshHandler&&this.dataSource.unbind(f,this._refreshHandler),s.fn.destroy.call(this)},scrollToIndex:function(e){var t=this.element[0].children[e];t&&this.scroll(t)},scroll:function(e){if(e){e[0]&&(e=e[0]);var t=this.content[0],n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,a=n+i;r>n?r=n:a>r+o&&(r=a-o),t.scrollTop=r}},selectedDataItems:function(n){var i=this._valueGetter;return n===t?this._dataItems.slice():(this._dataItems=n,this._values=e.map(n,function(e){return i(e)}),t)},next:function(){var e=this.focus();e=e?e.next():0,this.focus(e)},prev:function(){var e=this.focus();e=e?e.prev():this.element[0].children.length-1,this.focus(e)},first:function(){this.focus(this.element[0].children[0])},last:function(){this.focus(this.element[0].children[this.element[0].children.length-1])},focus:function(n){var i,r=this,o=r._optionID;return n===t?r._current:(n=(n=r._get(n))[n.length-1],n=e(this.element[0].children[n]),r._current&&(r._current.removeClass(g).removeAttr("aria-selected").removeAttr(p),r.trigger("deactivate")),(i=!!n[0])&&(n.addClass(g),r.scroll(n),n.attr("id",o)),r._current=i?n:null,r.trigger("activate"),t)},focusIndex:function(){return this.focus()?this.focus().index():t},filter:function(e){return e===t?this._filtered:(this._filtered=e,t)},skipUpdate:function(e){this._skipUpdate=e},select:function(n){var i,r=this,o=r.options.selectable,a="multiple"!==o&&!1!==o,s=r._selectedIndices,l=[],c=[];if(n===t)return s.slice();if(1===(n=r._get(n)).length&&-1===n[0]&&(n=[]),!r._filtered||a||!r._deselectFiltered(n)){if(a&&!r._filtered&&-1!==e.inArray(n[n.length-1],s))return r._dataItems.length&&r._view.length&&(r._dataItems=[r._view[s[0]].item]),t;c=(i=r._deselect(n)).removed,(n=i.indices).length&&(a&&(n=[n[n.length-1]]),l=r._select(n)),(l.length||c.length)&&(r._valueComparer=null,r.trigger("change",{added:l,removed:c}))}},removeAt:function(e){return this._selectedIndices.splice(e,1),this._values.splice(e,1),this._valueComparer=null,{position:e,dataItem:this._dataItems.splice(e,1)[0]}},setValue:function(t){t=e.isArray(t)||t instanceof h?t.slice(0):[t],this._values=t,this._valueComparer=null},value:function(n){var i,r=this,o=r._valueDeferred;return n===t?r._values.slice():(r.setValue(n),o&&"resolved"!==o.state()||(r._valueDeferred=o=e.Deferred()),r.isBound()&&(i=r._valueIndices(r._values),"multiple"===r.options.selectable&&r.select(-1),r.select(i),o.resolve()),r._skipUpdate=!1,o)},_click:function(t){t.isDefaultPrevented()||this.trigger("click",{item:e(t.currentTarget)})},_valueExpr:function(e,n){var i,r,o,a=this,s=0,l=[];if(!a._valueComparer||a._valueType!==e){for(a._valueType=e;n.length>s;s++)(i=n[s])!==t&&""!==i&&null!==i&&("boolean"===e?i=!!i:"number"===e?i=+i:"string"===e&&(i=""+i)),l.push(i);r="for (var idx = 0; idx < "+l.length+"; idx++) { if (current === values[idx]) {   return idx; }} return -1;",o=Function(["current","values"],r),a._valueComparer=function(e){return o(e,l)}}return a._valueComparer},_dataItemPosition:function(e,t){var n=this._valueGetter(e);return this._valueExpr(typeof n,t)(n)},_getter:function(){this._valueGetter=o.getter(this.options.dataValueField)},_deselect:function(t){var n,i,r,o=this,a=o.element[0].children,s=o.options.selectable,l=o._selectedIndices,c=o._dataItems,u=o._values,d=[],h=0,p=0;if(t=t.slice(),!0!==s&&t.length){if("multiple"===s)for(;t.length>h;h++)if(i=t[h],e(a[i]).hasClass("k-state-selected"))for(n=0;l.length>n;n++)if((r=l[n])===i){e(a[r]).removeClass("k-state-selected"),d.push({position:n+p,dataItem:c.splice(n,1)[0]}),l.splice(n,1),t.splice(h,1),u.splice(n,1),p+=1,h-=1,n-=1;break}}else{for(;l.length>h;h++)e(a[l[h]]).removeClass("k-state-selected"),d.push({position:h,dataItem:c[h]});o._values=[],o._dataItems=[],o._selectedIndices=[]}return{indices:t,removed:d}},_deselectFiltered:function(t){for(var n,i,r,o=this.element[0].children,a=[],s=0;t.length>s;s++)i=t[s],n=this._view[i].item,(r=this._dataItemPosition(n,this._values))>-1&&(a.push(this.removeAt(r)),e(o[i]).removeClass("k-state-selected"));return!!a.length&&(this.trigger("change",{added:[],removed:a}),!0)},_select:function(t){var n,i,r=this,o=r.element[0].children,a=r._view,s=[],l=0;for(-1!==t[t.length-1]&&r.focus(t);t.length>l;l++)n=a[i=t[l]],-1!==i&&n&&(n=n.item,r._selectedIndices.push(i),r._dataItems.push(n),r._values.push(r._valueGetter(n)),e(o[i]).addClass("k-state-selected").attr("aria-selected",!0),s.push({dataItem:n}));return s},_get:function(n){return"number"==typeof n?n=[n]:D(n)||((n=e(n).data("offset-index"))===t&&(n=-1),n=[n]),n},_template:function(){var e=this.options,t=e.template;return t?(t=o.template(t),t=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+t(e)+"</li>"}):t=o.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+o.expr(e.dataTextField,"data")+"}</li>",{useWithBlock:!1}),t},_templates:function(){var e,t,n={template:this.options.template,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(t in n)(e=n[t])&&"function"!=typeof e&&(n[t]=o.template(e));this.templates=n},_normalizeIndices:function(e){for(var n=[],i=0;e.length>i;i++)e[i]!==t&&n.push(e[i]);return n},_valueIndices:function(e,t){var n,i=this._view,r=0;if(t=t?t.slice():[],!e.length)return[];for(;i.length>r;r++)-1!==(n=this._dataItemPosition(i[r].item,e))&&(t[n]=r);return this._normalizeIndices(t)},_firstVisibleItem:function(){for(var t=this.element[0],n=this.content[0].scrollTop,i=e(t.children[0]).height(),r=Math.floor(n/i)||0,o=t.children[r]||t.lastChild,a=n>o.offsetTop;o;)if(a){if(o.offsetTop+i>n||!o.nextSibling)break;o=o.nextSibling}else{if(n>=o.offsetTop||!o.previousSibling)break;o=o.previousSibling}return this._view[e(o).data("offset-index")]},_fixedHeader:function(){this.isGrouped()&&this.templates.fixedGroupTemplate?(this.header.show(),this.content.scroll(this._onScroll)):(this.header.hide(),this.content.off("scroll",this._onScroll))},_renderHeader:function(){var e,t=this.templates.fixedGroupTemplate;t&&(e=this._firstVisibleItem())&&this.header.html(t(e.group))},_renderItem:function(e){var t='<li tabindex="-1" role="option" unselectable="on" class="k-item',n=e.item,i=0!==e.index,r=e.selected;return i&&e.newGroup&&(t+=" k-first"),r&&(t+=" k-state-selected"),t+='"'+(r?' aria-selected="true"':"")+' data-offset-index="'+e.index+'">',t+=this.templates.template(n),i&&e.newGroup&&(t+='<div class="k-group">'+this.templates.groupTemplate(e.group)+"</div>"),t+"</li>"},_render:function(){var e,t,n,i,r="",o=0,a=0,s=[],l=this.dataSource.view(),c=this.value(),u=this.isGrouped();if(u)for(o=0;l.length>o;o++)for(t=l[o],n=!0,i=0;t.items.length>i;i++)e={selected:this._selected(t.items[i],c),item:t.items[i],group:t.value,newGroup:n,index:a},s[a]=e,a+=1,r+=this._renderItem(e),n=!1;else for(o=0;l.length>o;o++)e={selected:this._selected(l[o],c),item:l[o],index:o},s[o]=e,r+=this._renderItem(e);this._view=s,this.element[0].innerHTML=r,u&&s.length&&this._renderHeader()},_selected:function(e,t){return(!this._filtered||"multiple"===this.options.selectable)&&-1!==this._dataItemPosition(e,t)},refresh:function(e){var t,n=this,i=e&&e.action;n.trigger("dataBinding"),n._fixedHeader(),n._render(),n._bound=!0,"itemchange"===i?(t=function(e,t){var n,i,r,o=t.length,a=[];for(i=0;e.length>i;i++)for(n=e[i],r=0;o>r;r++)n===t[r]&&a.push({index:i,item:n});return a}(n._dataItems,e.items)).length&&n.trigger("selectedItemChange",{items:t}):n._filtered||n._skipUpdate?(n.focus(0),n._skipUpdate&&(n._skipUpdate=!1,n._selectedIndices=n._valueIndices(n._values,n._selectedIndices))):i&&"add"!==i||n.value(n._values),n._valueDeferred&&n._valueDeferred.resolve(),n.trigger("dataBound")},isBound:function(){return this._bound},isGrouped:function(){return(this.dataSource.group()||[]).length}}),a.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){var r,o=e.getFullYear(),a=t.getFullYear(),s=n.getFullYear();return r=(o-=o%i)+(i-1),a>o&&(o=a),r>s&&(r=s),o+"-"+r}function i(e){for(var t,n=0,i=e.min,r=e.max,o=e.start,a=e.setter,l=e.build,c=e.cells||12,u=e.perRow||4,d=e.content||A,h=e.empty||M,p=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';c>n;n++)n>0&&n%u==0&&(p+='</tr><tr role="row">'),t=l(o,n),p+=s(o,i,r)?d(t):h(t),a(o,1);return p+"</tr></tbody></table>"}function r(e,t,n){var i=e.getFullYear(),r=t.getFullYear(),o=r,a=0;return n&&(o=(r-=r%n)-r%n+n-1),i>o?a=1:r>i&&(a=-1),a}function o(){var e=new se;return new se(e.getFullYear(),e.getMonth(),e.getDate())}function a(e,t,n){var i=o();return e&&(i=new se(+e)),t>i?i=new se(+t):i>n&&(i=new se(+n)),i}function s(e,t,n){return+e>=+t&&+n>=+e}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function c(e,t,n){t=t instanceof se?t.getFullYear():e.getFullYear()+n*t,e.setFullYear(t)}function u(t){e(this).toggleClass(U,Z.indexOf(t.type)>-1||t.type==X)}function d(e){e.preventDefault()}function h(e){return T(e).calendars.standard}function p(e){var n=le[e.start],i=le[e.depth],r=T(e.culture);e.format=x(e.format||r.calendars.standard.patterns.d),isNaN(n)&&(n=0,e.start=z),(i===t||i>n)&&(e.depth=z),e.dates||(e.dates=[])}function f(e){I&&e.find("*").attr("unselectable","on")}var g,m=window.kendo,v=m.support,_=m.ui,y=_.Widget,b=m.keys,w=m.parseDate,k=m.date.adjustDST,x=m._extractFormat,C=m.template,T=m.getCulture,S=m.support.transitions,D=S?S.css+"transform-origin":"",A=C('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),M=C('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),E=m.support.browser,I=E.msie&&9>E.version,R=".kendoCalendar",P="click"+R,L="id",F="left",B="slideIn",z="month",H="century",N="change",O="navigate",V="value",U="k-state-hover",W="k-state-disabled",j="k-state-focused",q="k-other-month",G=' class="'+q+'"',$="k-nav-today",Y="td:has(.k-link)",Q="blur"+R,X="focus",K=X+R,Z=v.touch?"touchstart":"mouseenter",J=v.touch?"touchstart"+R:"mouseenter"+R,ee=v.touch?"touchend"+R+" touchmove"+R:"mouseleave"+R,te="_prevArrow",ne="_nextArrow",ie="aria-disabled",re="aria-selected",oe=e.proxy,ae=e.extend,se=Date,le={month:0,year:1,decade:2,century:3},ce=y.extend({init:function(t,n){var i,r,o=this;y.fn.init.call(o,t,n),t=o.wrapper=o.element,(n=o.options).url=window.unescape(n.url),o._templates(),o._header(),o._footer(o.footer),(r=t.addClass("k-widget k-calendar").on(J+" "+ee,Y,u).on("keydown.kendoCalendar","table.k-content",oe(o._move,o)).on(P,Y,function(t){var n=t.currentTarget.firstChild;-1!=n.href.indexOf("#")&&t.preventDefault(),o._click(e(n))}).on("mouseup"+R,"table.k-content, .k-footer",function(){o._focusView(!1!==o.options.focusOnNav)}).attr(L))&&(o._cellID=r+"_cell_selected"),p(n),i=w(n.value,n.format,n.culture),o._index=le[n.start],o._current=new se(+a(i,n.min,n.max)),o._addClassProxy=function(){o._active=!0,o._cell.addClass(j)},o._removeClassProxy=function(){o._active=!1,o._cell.removeClass(j)},o.value(i),m.notify(o)},options:{name:"Calendar",value:null,min:new se(1900,0,1),max:new se(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:z,depth:z,animation:{horizontal:{effects:B,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[N,O],setOptions:function(e){var t=this;p(e),e.dates[0]||(e.dates=t.options.dates),y.fn.setOptions.call(t,e),t._templates(),t._footer(t.footer),t._index=le[t.options.start],t.navigate()},destroy:function(){var e=this,t=e._today;e.element.off(R),e._title.off(R),e[te].off(R),e[ne].off(R),m.destroy(e._table),t&&m.destroy(t.off(R)),y.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(te,-1)},navigateToFuture:function(){this._navigate(ne,1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(W)||e.navigate(e._current,++t)},navigateDown:function(e){var n=this,i=n._index,r=n.options.depth;if(e)return i===le[r]?(+n._value!=+e&&(n.value(e),n.trigger(N)),t):(n.navigate(e,--i),t)},navigate:function(n,i){i=isNaN(i)?le[i]:i;var r,o,s,l,c=this,u=c.options,d=u.culture,h=u.min,p=u.max,m=c._title,v=c._table,_=c._oldTable,y=c._value,b=c._current,w=n&&+n>+b,k=i!==t&&i!==c._index;n||(n=b),c._current=n=new se(+a(n,h,p)),i===t?i=c._index:c._index=i,c._view=o=g.views[i],s=o.compare,l=i===le[H],m.toggleClass(W,l).attr(ie,l),l=s(n,h)<1,c[te].toggleClass(W,l).attr(ie,l),l=s(n,p)>-1,c[ne].toggleClass(W,l).attr(ie,l),v&&_&&_.data("animating")&&(_.kendoStop(!0,!0),v.kendoStop(!0,!0)),c._oldTable=v,(!v||c._changeView)&&(m.html(o.title(n,h,p,d)),c._table=r=e(o.content(ae({min:h,max:p,date:n,url:u.url,dates:u.dates,format:u.format,culture:d},c[o.name]))),f(r),c._animate({from:v,to:r,vertical:k,future:w}),c._focus(n),c.trigger(O)),i===le[u.depth]&&y&&c._class("k-state-selected",o.toDateString(y)),c._class(j,o.toDateString(n)),!v&&c._cell&&c._cell.removeClass(j),c._changeView=!0},value:function(e){var n=this,i=n._view,r=n.options,o=n._view,a=r.min,l=r.max;return e===t?n._value:(null!==(e=w(e,r.format,r.culture))&&(s(e=new se(+e),a,l)||(e=null)),n._value=e,o&&null===e&&n._cell?n._cell.removeClass("k-state-selected"):(n._changeView=!e||i&&0!==i.compare(e,n._current),n.navigate(e)),t)},_move:function(t){var n,i,r,o,s=this,l=s.options,c=t.keyCode,u=s._view,d=s._index,h=new se(+s._current),p=m.support.isRtl(s.wrapper);return t.target===s._table[0]&&(s._active=!0),t.ctrlKey?c==b.RIGHT&&!p||c==b.LEFT&&p?(s.navigateToFuture(),i=!0):c==b.LEFT&&!p||c==b.RIGHT&&p?(s.navigateToPast(),i=!0):c==b.UP?(s.navigateUp(),i=!0):c==b.DOWN&&(s._click(e(s._cell[0].firstChild)),i=!0):(c==b.RIGHT&&!p||c==b.LEFT&&p?(n=1,i=!0):c==b.LEFT&&!p||c==b.RIGHT&&p?(n=-1,i=!0):c==b.UP?(n=0===d?-7:-4,i=!0):c==b.DOWN?(n=0===d?7:4,i=!0):c==b.ENTER?(s._click(e(s._cell[0].firstChild)),i=!0):c==b.HOME||c==b.END?(o=u[r=c==b.HOME?"first":"last"](h),h=new se(o.getFullYear(),o.getMonth(),o.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()),i=!0):c==b.PAGEUP?(i=!0,s.navigateToPast()):c==b.PAGEDOWN&&(i=!0,s.navigateToFuture()),(n||r)&&(r||u.setDate(h,n),s._focus(a(h,l.min,l.max)))),i&&t.preventDefault(),s._current},_animate:function(e){var t=this,n=e.from,i=e.to,r=t._active;n?n.parent().data("animating")?(n.off(R),n.parent().kendoStop(!0,!0).remove(),n.remove(),i.insertAfter(t.element[0].firstChild),t._focusView(r)):n.is(":visible")&&!1!==t.options.animation?t[e.vertical?"_vertical":"_horizontal"](n,i,e.future):(i.insertAfter(n),n.off(R).remove(),t._focusView(r)):(i.insertAfter(t.element[0].firstChild),t._bindTable(i))},_horizontal:function(e,t,n){var i=this,r=i._active,o=i.options.animation.horizontal,a=o.effects,s=e.outerWidth();a&&-1!=a.indexOf(B)&&(e.add(t).css({width:s}),e.wrap("<div/>"),i._focusView(r,e),e.parent().css({position:"relative",width:2*s,float:F,"margin-left":n?0:-s}),t[n?"insertAfter":"insertBefore"](e),ae(o,{effects:B+":"+(n?"right":F),complete:function(){e.off(R).remove(),i._oldTable=null,t.unwrap(),i._focusView(r)}}),e.parent().kendoStop(!0,!0).kendoAnimate(o))},_vertical:function(e,t){var n,i,r=this,o=r.options.animation.vertical,a=o.effects,s=r._active;a&&-1!=a.indexOf("zoom")&&(t.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),D&&(i=(i=(n=r._cellByDate(r._view.toDateString(r._current))).position()).left+parseInt(n.width()/2,10)+"px "+(i.top+parseInt(n.height()/2,10))+"px",t.css(D,i)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(R).remove(),r._oldTable=null,t.css({position:"static",top:0,left:0}),r._focusView(s)}}),t.kendoStop(!0,!0).kendoAnimate(o))},_cellByDate:function(t){return this._table.find("td:not(."+q+")").filter(function(){return e(this.firstChild).attr(m.attr(V))===t})},_class:function(t,n){var i=this,r=i._cellID,o=i._cell;o&&o.removeAttr(re).removeAttr("aria-label").removeAttr(L),o=i._table.find("td:not(."+q+")").removeClass(t).filter(function(){return e(this.firstChild).attr(m.attr(V))===n}).attr(re,!0),t!==j||i._active||!1===i.options.focusOnNav||(t=""),o.addClass(t),o[0]&&(i._cell=o),r&&(o.attr(L,r),i._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",r))},_bindTable:function(e){e.on(K,this._addClassProxy).on(Q,this._removeClassProxy)},_click:function(e){var t=this,n=t.options,i=new Date(+t._current),r=e.attr(m.attr(V)).split("/");r=new se(r[0],r[1],r[2]),k(r,0),t._view.setDate(i,r),t.navigateDown(a(i,n.min,n.max))},_focus:function(e){var t=this,n=t._view;0!==n.compare(e,t._current)?t.navigate(e):(t._current=e,t._class(j,n.toDateString(e)))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(n){var i=this,r=o(),a=i.element,s=a.find(".k-footer");return n?(s[0]||(s=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(a)),i._today=s.show().find(".k-link").html(n(r)).attr("title",m.toString(r,"D",i.options.culture)),i._toggle(),t):(i._toggle(!1),s.hide(),t)},_header:function(){var e,t=this,n=t.element;n.find(".k-header")[0]||n.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=n.find(".k-link").on(J+" "+ee+" "+K+" "+Q,u).click(!1),t._title=e.eq(1).on(P,function(){t._active=!1!==t.options.focusOnNav,t.navigateUp()}),t[te]=e.eq(0).on(P,function(){t._active=!1!==t.options.focusOnNav,t.navigateToPast()}),t[ne]=e.eq(2).on(P,function(){t._active=!1!==t.options.focusOnNav,t.navigateToFuture()})},_navigate:function(e,t){var n=this,i=n._index+1,r=new se(+n._current);(e=n[e]).hasClass(W)||(i>3?r.setFullYear(r.getFullYear()+100*t):g.views[i].setDate(r,t),n.navigate(r))},_option:function(e,n){var i,r=this,o=r.options,a=r._value||r._current;return n===t?o[e]:((n=w(n,o.format,o.culture))&&(o[e]=new se(+n),((i="min"===e?n>a:a>n)||function(e,t){return!!e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}(a,n))&&(i&&(r._value=null),r._changeView=!0),r._changeView||(r._changeView=!(!o.month.content&&!o.month.empty)),r.navigate(r._value),r._toggle()),t)},_toggle:function(e){var n=this,i=n.options,r=n._today;e===t&&(e=s(o(),i.min,i.max)),r&&(r.off(P),e?r.addClass($).removeClass(W).on(P,oe(n._todayClick,n)):r.removeClass($).addClass(W).on(P,d))},_todayClick:function(e){var t=this,n=le[t.options.depth],i=o();e.preventDefault(),0===t._view.compare(t._current,i)&&t._index==n&&(t._changeView=!1),t._value=i,t.navigate(i,n),t.trigger(N)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month,r=i.content,o=i.empty;e.month={content:C('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+m.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:C('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o})},e.footer=!1!==n?C(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}):null}});_.plugin(ce),(g={firstDayOfMonth:function(e){return new se(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){for(var n=(t=t||m.culture().calendar).firstDay,i=new se(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)g.setTime(i,-864e5);return i},setTime:function(e,t){var n=e.getTimezoneOffset(),i=new se(e.getTime()+t),r=i.getTimezoneOffset()-n;e.setTime(i.getTime()+6e4*r)},views:[{name:z,title:function(e,t,n,i){return h(i).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,n=0,r=e.min,o=e.max,a=e.date,s=e.dates,c=e.format,u=e.culture,d=e.url,p=d&&s[0],f=h(u),v=f.firstDay,_=f.days,y=l(_.names,v),b=l(_.namesShort,v),w=g.firstVisibleDay(a,f),x=t.first(a),C=t.last(a),T=t.toDateString,S=new se,D='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>n;n++)D+='<th scope="col" title="'+y[n]+'">'+b[n]+"</th>";return S=new se(S.getFullYear(),S.getMonth(),S.getDate()),k(S,0),S=+S,w=new se(w.getFullYear(),w.getMonth(),w.getDate()),k(w,0),i({cells:42,perRow:7,html:D+='</tr></thead><tbody><tr role="row">',start:w,min:new se(r.getFullYear(),r.getMonth(),r.getDate()),max:new se(o.getFullYear(),o.getMonth(),o.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e){var t=[],n=e.getDay(),i="",r="#";return(x>e||e>C)&&t.push(q),+e===S&&t.push("k-today"),(0===n||6===n)&&t.push("k-weekend"),p&&function(e,t){for(var n=0,i=t.length;i>n;n++)if(e===+t[n])return!0;return!1}(+e,s)&&(r=d.replace("{0}",m.toString(e,c,u)),i=" k-action-link"),{date:e,dates:s,ns:m.ns,title:m.toString(e,"D",u),value:e.getDate(),dateString:T(e),cssClass:t[0]?' class="'+t.join(" ")+'"':"",linkClass:i,url:r}}})},first:function(e){return g.firstDayOfMonth(e)},last:function(e){var t=new se(e.getFullYear(),e.getMonth()+1,0),n=g.firstDayOfMonth(e),i=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return i&&t.setHours(n.getHours()+i/60),t},compare:function(e,t){var n=e.getMonth(),i=e.getFullYear(),r=t.getMonth(),o=t.getFullYear();return i>o?1:o>i?-1:n==r?0:n>r?1:-1},setDate:function(e,t){var n=e.getHours();t instanceof se?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):g.setTime(e,864e5*t),k(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=h(e.culture).months.namesAbbr,n=this.toDateString,r=e.min,o=e.max;return i({min:new se(r.getFullYear(),r.getMonth(),1),max:new se(o.getFullYear(),o.getMonth(),1),start:new se(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:m.ns,dateString:n(e),cssClass:""}}})},first:function(e){return new se(e.getFullYear(),0,e.getDate())},last:function(e){return new se(e.getFullYear(),11,e.getDate())},compare:function(e,t){return r(e,t)},setDate:function(e,t){var n,i=e.getHours();t instanceof se?(n=t.getMonth(),e.setFullYear(t.getFullYear(),n,e.getDate()),n!==e.getMonth()&&e.setDate(0)):(n=e.getMonth()+t,e.setMonth(n),n>11&&(n-=12),n>0&&e.getMonth()!=n&&e.setDate(0)),k(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,i){return n(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString;return i({start:new se(t-t%10-1,0,1),min:new se(e.min.getFullYear(),0,1),max:new se(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:m.ns,dateString:n(e),cssClass:0===t||11==t?G:""}}})},first:function(e){var t=e.getFullYear();return new se(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new se(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,10)},setDate:function(e,t){c(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:H,title:function(e,t,i){return n(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),n=e.min.getFullYear(),r=e.max.getFullYear(),o=this.toDateString,a=n,s=r;return 10>(s-=s%10)-(a-=a%10)&&(s=a+9),i({start:new se(t-t%100-10,0,1),min:new se(a,0,1),max:new se(s,0,1),setter:this.setDate,build:function(e,t){var i=e.getFullYear(),a=i+9;return n>i&&(i=n),a>r&&(a=r),{ns:m.ns,value:i+" - "+a,dateString:o(e),cssClass:0===t||11==t?G:""}}})},first:function(e){var t=e.getFullYear();return new se(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new se(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,100)},setDate:function(e,t){c(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]}).isEqualDatePart=function(e,t){return!!e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},g.makeUnselectable=f,g.restrictValue=a,g.isInRange=s,g.normalize=p,g.viewsEnum=le,m.calendar=g}(window.kendo.jQuery),function(e,t){function n(t){var n=t.parseFormats,i=t.format;R.normalize(t),(n=e.isArray(n)?n:[n]).length||n.push("yyyy-MM-dd"),-1===e.inArray(i,n)&&n.splice(0,0,t.format),t.parseFormats=n}function i(e){e.preventDefault()}var r,o=window.kendo,a=o.ui,s=a.Widget,l=o.parseDate,c=o.keys,u=o.template,d=o._activeElement,h="<div />",p="<span />",f=".kendoDatePicker",g="click"+f,m="open",v="close",_="change",y="disabled",b="readonly",w="k-state-default",k="k-state-focused",x="k-state-selected",C="k-state-disabled",T="mousedown"+f,S="id",D="month",A="aria-disabled",M="aria-expanded",E="aria-hidden",I="aria-readonly",R=o.calendar,P=R.isInRange,L=R.restrictValue,F=R.isEqualDatePart,B=e.extend,z=e.proxy,H=Date,N=function(t){var n,i=this,r=document.body,s=e(h).attr(E,"true").addClass("k-calendar-container").appendTo(r);i.options=t=t||{},(n=t.id)&&(n+="_dateview",s.attr(S,n),i._dateViewID=n),i.popup=new a.Popup(s,B(t.popup,t,{name:"Popup",isRtl:o.support.isRtl(t.anchor)})),i.div=s,i.value(t.value)};N.prototype={_calendar:function(){var t,n=this,r=n.calendar,s=n.options;r||(t=e(h).attr(S,o.guid()).appendTo(n.popup.element).on(T,i).on(g,"td:has(.k-link)",z(n._click,n)),n.calendar=r=new a.Calendar(t),n._setOptions(s),o.calendar.makeUnselectable(r.element),r.navigate(n._value||n._current,s.start),n.value(n._value))},_setOptions:function(e){this.calendar.setOptions({focusOnNav:!1,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,start:e.start})},setOptions:function(e){var t=this.options;this.options=B(t,e,{change:t.change,close:t.close,open:t.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){this._calendar(),this.popup.open()},close:function(){this.popup.close()},min:function(e){this._option("min",e)},max:function(e){this._option("max",e)},toggle:function(){this[this.popup.visible()?v:m]()},move:function(e){var t=this,n=e.keyCode,i=t.calendar,r=e.ctrlKey&&n==c.DOWN||n==c.ENTER,o=!1;if(e.altKey)n==c.DOWN?(t.open(),e.preventDefault(),o=!0):n==c.UP&&(t.close(),e.preventDefault(),o=!0);else if(t.popup.visible()){if(n==c.ESC||r&&i._cell.hasClass(x))return t.close(),e.preventDefault(),!0;t._current=i._move(e),o=!0}return o},current:function(e){this._current=e,this.calendar._focus(e)},value:function(e){var t=this,n=t.calendar,i=t.options;t._value=e,t._current=new H(+L(e,i.min,i.max)),n&&n.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(x)&&this.close()},_option:function(e,t){var n=this.calendar;this.options[e]=t,n&&n[e](t)}},N.normalize=n,o.DateView=N,r=s.extend({init:function(t,i){var r,a=this;s.fn.init.call(a,t,i),t=a.element,(i=a.options).min=l(t.attr("min"))||l(i.min),i.max=l(t.attr("max"))||l(i.max),n(i),a._initialOptions=B({},i),a._wrapper(),a.dateView=new N(B({},i,{id:t.attr(S),anchor:a.wrapper,change:function(){a._change(this.value()),a.close()},close:function(e){a.trigger(v)?e.preventDefault():(t.attr(M,!1),r.attr(E,!0))},open:function(e){var n,i=a.options;a.trigger(m)?e.preventDefault():(a.element.val()!==a._oldText&&(n=l(t.val(),i.parseFormats,i.culture),a.dateView[n?"current":"value"](n)),t.attr(M,!0),r.attr(E,!1),a._updateARIA(n))}})),r=a.dateView.div,a._icon();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":a.dateView._dateViewID}),a._reset(),a._template(),t.is("[disabled]")||e(a.element).parents("fieldset").is(":disabled")?a.enable(!1):a.readonly(t.is("[readonly]")),a._old=a._update(i.value||a.element.val()),a._oldText=t.val(),o.notify(a)},events:[m,v,_],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:D,depth:D,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this,i=t._value;s.fn.setOptions.call(t,e),(e=t.options).min=l(e.min),e.max=l(e.max),n(e),t.dateView.setOptions(e),i&&(t.element.val(o.toString(i,e.format,e.culture)),t._updateARIA(i))},_editable:function(e){var t=this,n=t._dateIcon.off(f),r=t.element.off(f),o=t._inputWrapper.off(f),a=e.readonly,s=e.disable;a||s?(o.addClass(s?C:w).removeClass(s?w:C),r.attr(y,s).attr(b,a).attr(A,s).attr(I,a)):(o.addClass(w).removeClass(C).on("mouseenter.kendoDatePicker mouseleave.kendoDatePicker",t._toggleHover),r.removeAttr(y).removeAttr(b).attr(A,!1).attr(I,!1).on("keydown"+f,z(t._keydown,t)).on("focusout"+f,z(t._blur,t)).on("focus"+f,function(){t._inputWrapper.addClass(k)}),n.on(g,z(t._click,t)).on(T,i))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;s.fn.destroy.call(e),e.dateView.destroy(),e.element.off(f),e._dateIcon.off(f),e._inputWrapper.off(f),e._form&&e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(k)},_click:function(){var e=this.element;this.dateView.toggle(),o.support.touch||e[0]===d()||e.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t._typing||t.element.trigger(_),t.trigger(_)),t._typing=!1},_keydown:function(e){var t=this,n=t.dateView,i=t.element.val(),r=!1;n.popup.visible()||e.keyCode!=c.ENTER||i===t._oldText?(r=n.move(e),t._updateARIA(n._current),r||(t._typing=!0)):t._change(i)},_icon:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(i)),n._dateIcon=t.attr({role:"button","aria-controls":n.dateView._dateViewID})},_option:function(e,n){var i=this.options;return n===t?i[e]:((n=l(n,i.parseFormats,i.culture))&&(i[e]=new H(+n),this.dateView[e](n)),t)},_update:function(e){var t,n=this,i=n.options,r=i.min,a=i.max,s=n._value,c=l(e,i.parseFormats,i.culture),u=null===c&&null===s||c instanceof Date&&s instanceof Date;return+c==+s&&u?((t=o.toString(c,i.format,i.culture))!==e&&n.element.val(null===c?e:t),c):(null!==c&&F(c,r)?c=L(c,r,a):P(c,r,a)||(c=null),n._value=c,n.dateView.value(c),n.element.val(c?o.toString(c,i.format,i.culture):e),n._updateARIA(c),c)},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-datepicker"))[0]||(t=(t=i.wrap(p).parent().addClass("k-picker-wrap k-state-default")).wrap(p).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=u(this.options.ARIATemplate)},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr("aria-activedescendant"),i&&((t=i._cell).attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr("aria-activedescendant",t.attr("id")))}}),a.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return n?t.substring(0,e).split(n).length-1:0}function i(e,t,i){return t.split(i)[n(e,t,i)]}function r(e,t,i,r){var o=t.split(r);return o.splice(n(e,t,r),1,i),r&&""!==o[o.length-1]&&o.push(""),o.join(r)}var o=window.kendo,a=o.support,s=o.caret,l=o._activeElement,c=a.placeholder,u=o.ui,d=u.List,h=o.keys,p=o.data.DataSource,f="aria-disabled",g="aria-readonly",m="k-state-default",v="disabled",_="readonly",y="k-state-focused",b="k-state-disabled",w=".kendoAutoComplete",k=e.proxy,x=d.extend({init:function(t,n){var i,r=this;r.ns=w,n=e.isArray(n)?{dataSource:n}:n,d.fn.init.call(r,t,n),t=r.element,(n=r.options).placeholder=n.placeholder||t.attr("placeholder"),c&&t.attr("placeholder",n.placeholder),r._wrapper(),r._loader(),r._dataSource(),r._ignoreCase(),t[0].type="text",i=r.wrapper,r._popup(),t.addClass("k-input").on("keydown"+w,k(r._keydown,r)).on("paste"+w,k(r._search,r)).on("focus"+w,function(){r._active=!0,r._prev=r._accessor(),r._placeholder(!1),i.addClass(y)}).on("focusout"+w,function(){r._change(),r._placeholder(),r._active=!1,i.removeClass(y)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),r._enable(),r._old=r._accessor(),t[0].id&&t.attr("aria-owns",r.ul[0].id),r._aria(),r._placeholder(),r._initList(),e(r.element).parents("fieldset").is(":disabled")&&r.enable(!1),o.notify(r)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},value:null},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():e._progressHandler=k(e._showBusy,e),e.dataSource=p.create(e.options.dataSource).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.listView.setDataSource(this.dataSource)},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(e){var t=this._listOptions(e);d.fn.setOptions.call(this,e),t.dataValueField=t.dataTextField,this.listView.setOptions(t),this._accessors(),this._aria()},_editable:function(e){var t=this,n=t.element,i=t.wrapper.off(w),r=e.readonly,o=e.disable;r||o?(i.addClass(o?b:m).removeClass(o?m:b),n.attr(v,o).attr(_,r).attr(f,o).attr(g,r)):(i.addClass(m).removeClass(b).on("mouseenter.kendoAutoComplete mouseleave.kendoAutoComplete",t._toggleHover),n.removeAttr(v).removeAttr(_).attr(f,!1).attr(g,!1))},close:function(){var e=this.listView.focus();e&&e.removeClass("k-state-selected"),this.popup.close()},destroy:function(){var e=this;e.element.off(w),e.wrapper.off(w),d.fn.destroy.call(e)},refresh:function(){this.listView.refresh()},select:function(e){this._select(e)},search:function(e){var t,n=this,r=n.options,o=r.ignoreCase,a=r.separator;e=e||n._accessor(),clearTimeout(n._typingTimeout),a&&(e=i(s(n.element)[0],e,a)),(!(t=e.length)||t>=r.minLength)&&(n._open=!0,n.listView.filter(!0),n._filterSource({value:o?e.toLowerCase():e,operator:r.filter,field:r.dataTextField,ignoreCase:o}))},suggest:function(e){var i,r=this,o=r._last,a=r._accessor(),c=r.element[0],u=s(c)[0],p=r.options.separator,f=a.split(p),g=n(u,a,p),m=u;return o==h.BACKSPACE||o==h.DELETE?(r._last=t,t):("string"!=typeof(e=e||"")&&(e[0]&&(e=r.dataSource.view()[d.inArray(e[0],r.ul[0])]),e=e?r._text(e):""),0>=u&&(u=a.toLowerCase().indexOf(e.toLowerCase())+1),i=(i=a.substring(0,u).lastIndexOf(p))>-1?u-(i+p.length):u,a=f[g].substring(0,i),e&&((i=(e=""+e).toLowerCase().indexOf(a.toLowerCase()))>-1&&(m=u+(e=e.substring(i+a.length)).length,a+=e),p&&""!==f[f.length-1]&&f.push("")),f[g]=a,r._accessor(f.join(p||"")),c===l()&&s(c,u,m),t)},value:function(e){return e===t?this._accessor():(this.listView.value(e),this._accessor(e),this._old=this._accessor(),t)},_click:function(e){var n=e.item,i=this.element;return this._active=!0,this.trigger("select",{item:n})?(this.close(),t):(this._select(n),this._blur(),s(i,i.val().length),t)},_initList:function(){var t=this,n=t.options.virtual,i=!!n,r=k(t._listBound,t),a={autoBind:!1,selectable:!0,dataSource:t.dataSource,click:e.proxy(t._click,this),change:e.proxy(t._listChange,this),activate:k(t._activateItem,t),deactivate:k(t._deactivateItem,t),dataBinding:function(){t.trigger("dataBinding"),t._angularItems("cleanup")},dataBound:r,listBound:r};(a=e.extend(t._listOptions(),a,"object"==typeof n?n:{})).dataValueField=a.dataTextField,t.listView=i?new o.ui.VirtualList(t.ul,a):new o.ui.StaticList(t.ul,a),t.listView.value(t.options.value)},_listBound:function(){var e,n,i=this,r=i.popup,o=i.options,a=i.dataSource.flatView(),s=a.length,c=i.element[0]===l();i._angularItems("compile"),i._open&&(i.listView.value([]),i.listView.focus(-1)),i.listView.filter(!1),i._calculateGroupPadding(i._height(s)),r.position(),s&&(n=this.listView.focus(),o.highlightFirst&&!n&&i.listView.first(),o.suggest&&c&&i.suggest(a[0])),i._open&&(i._open=!1,e=s?"open":"close",i._typingTimeout&&!c&&(e="close"),r[e](),i._typingTimeout=t),i._touchScroller&&i._touchScroller.reset(),i._hideBusy(),i._makeUnselectable(),i.trigger("dataBound")},_listChange:function(){!this.listView.filter()&&this._active&&this._selectValue(this.listView.selectedDataItems()[0])},_selectValue:function(e){var t=this.options.separator,n="";e&&(n=this._text(e)),null===n&&(n=""),t&&(n=r(s(this.element)[0],this._accessor(),n,t)),this._prev=n,this._accessor(n),this._placeholder()},_accessor:function(e){var n=this,i=n.element[0];return e===t?(e=i.value,i.className.indexOf("k-readonly")>-1&&e===n.options.placeholder?"":e):(i.value=null===e?"":e,n._placeholder(),t)},_keydown:function(e){var t=this,n=e.keyCode,i=t.popup.visible(),r=this.listView.focus();if(t._last=n,n===h.DOWN)i&&this._move(r?"next":"first"),e.preventDefault();else if(n===h.UP)i&&this._move(r?"prev":"last"),e.preventDefault();else if(n===h.ENTER||n===h.TAB){if(n===h.ENTER&&i&&e.preventDefault(),i&&r){if(t.trigger("select",{item:r}))return;this._select(r)}this._blur()}else n===h.ESC?(i&&e.preventDefault(),t.close()):(t._search(),t._typing=!0)},_move:function(e){this.listView[e](),this.options.suggest&&this.suggest(this.listView.focus())},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._loading.hide(),e.element.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!c){var n,i=this,r=i.element,o=i.options.placeholder;if(o){if(n=r.val(),e===t&&(e=!n),e||(o=n!==o?n:""),n===i._old&&!e)return;r.toggleClass("k-readonly",e).val(o),o||r[0]!==document.activeElement||s(r[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typingTimeout),e._typingTimeout=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(e){this.listView.select(e)},_loader:function(){this._loading=e('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_wrapper:function(){var e,t=this,n=t.element,i=n[0];(e=n.parent()).is("span.k-widget")||(e=n.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=i.style.cssText,n.css({width:"100%",height:i.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(i.className)}});u.plugin(x)}(window.kendo.jQuery),function(e,t){function n(e,t,n){for(var i,r=0,o=t.length-1;o>r;++r)(i=t[r])in e||(e[i]={}),e=e[i];e[t[o]]=n}var i=window.kendo,r=i.ui,o=r.Select,a=i.support,s=i._activeElement,l=i.data.ObservableObject,c=i.keys,u=".kendoDropDownList",d="disabled",h="readonly",p="change",f="k-state-focused",g="k-state-default",m="k-state-disabled",v="aria-disabled",_="aria-readonly",y="mouseenter"+u+" mouseleave"+u,b="tabindex",w="filter",k="accept",x=e.proxy,C=o.extend({init:function(n,r){var a,s,l=this,c=r&&r.index;l.ns=u,r=e.isArray(r)?{dataSource:r}:r,o.fn.init.call(l,n,r),r=l.options,n=l.element.on("focus"+u,x(l._focusHandler,l)),l._focusInputHandler=e.proxy(l._focusInput,l),l._inputTemplate(),l._reset(),l._prev="",l._word="",l.optionLabel=e(),l._wrapper(),l._tabindex(),l.wrapper.data(b,l.wrapper.attr(b)),l._span(),l._popup(),l._mobile(),l._dataSource(),l._ignoreCase(),l._filterHeader(),l._aria(),l._enable(),l._oldIndex=l.selectedIndex=-1,c!==t&&(r.index=c),l._initialIndex=r.index,l._optionLabel(),l._initList(),l._cascade(),r.autoBind?l.dataSource.fetch():-1===l.selectedIndex&&((s=r.text||"")||((a=r.optionLabel)&&0===r.index?s=a:l._isSelect&&(s=n.children(":selected").text())),l._textAccessor(s)),e(l.element).parents("fieldset").is(":disabled")&&l.enable(!1),i.notify(l)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1,virtual:!1,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",p,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this.listView.setOptions(this._listOptions(e)),this._optionLabel(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria(),!this.value()&&this.optionLabel[0]&&this.select(0)},destroy:function(){var e=this;e.wrapper.off(u),e.element.off(u),e._inputWrapper.off(u),e._arrow.off(),e._arrow=null,e.optionLabel.off(),o.fn.destroy.call(e)},open:function(){var e=this;e.popup.visible()||(e.listView.isBound()&&e._state!==k?e._allowOpening()&&(e.popup.one("activate",e._focusInputHandler),e.popup.open(),e._focusItem()):(e._open=!0,e._state="rebind",e.filterInput&&(e.filterInput.val(""),e._prev=""),e._filterSource()))},_focusInput:function(){this._focusElement(this.filterInput)},_allowOpening:function(){return this.optionLabel[0]||this.filterInput||this.dataSource.view().length},toggle:function(e){this._toggle(e,!0)},current:function(e){var n;return e===t?!(n=this.listView.focus())&&0===this.selectedIndex&&this.optionLabel[0]?this.optionLabel:n:(this._focus(e),t)},dataItem:function(n){var i=this,r=null,o=!!i.optionLabel[0],a=i.options.optionLabel;return n===t?r=i.listView.selectedDataItems()[0]:("number"!=typeof n?n=n.hasClass("k-list-optionlabel")?-1:e(i.items()).index(n):o&&(n-=1),r=i.dataSource.flatView()[n]),!r&&o&&(r=e.isPlainObject(a)?new l(a):i._assignInstance(i._optionLabelText(),"")),r},refresh:function(){this.listView.refresh()},text:function(e){var n,i,r=this,o=r.options.ignoreCase;return(e=null===e?"":e)===t?r._textAccessor():("string"==typeof e&&(i=o?e.toLowerCase():e,r._select(function(e){return e=r._text(e),o&&(e=(e+"").toLowerCase()),e===i}),(n=r.dataItem())&&(e=n)),r._textAccessor(e),t)},value:function(e){var n=this,i=n.dataSource;return e===t?(e=n._accessor()||n.listView.value()[0])===t||null===e?"":e:(e&&(n._initialIndex=null),n._request&&n.options.cascadeFrom&&n.listView.isBound()?(n._valueSetter&&i.unbind(p,n._valueSetter),n._valueSetter=x(function(){n.value(e)},n),i.one(p,n._valueSetter),t):(n.listView.value(e).done(function(){-1===n.selectedIndex&&n.text()&&(n.text(""),n._accessor("",-1)),n._old=n._accessor(),n._oldIndex=n.selectedIndex}),n._fetchData(),t))},_optionLabel:function(){var n=this,r=n.options,o=r.optionLabel,a=r.optionLabelTemplate;return o?(a||(a="#:",a+="string"==typeof o?"data":i.expr(r.dataTextField,"data"),a+="#"),"function"!=typeof a&&(a=i.template(a)),n.optionLabelTemplate=a,n.optionLabel[0]||(n.optionLabel=e('<div class="k-list-optionlabel"></div>').prependTo(n.list)),n.optionLabel.html(a(o)).off().click(x(n._click,n)).on(y,n._toggleHover),n.angular("compile",function(){return{elements:n.optionLabel}}),t):(n.optionLabel.off().remove(),n.optionLabel=e(),t)},_optionLabelText:function(){var e=this.options.optionLabel;return"string"==typeof e?e:this._text(e)},_listBound:function(){var e,t,n,i=this,r=i._initialIndex,o=i.options.optionLabel,a=i._state===w,s=i.dataSource.flatView(),l=s.length;i._angularItems("compile"),i._presetValue=!1,i.options.virtual||(t=i._height(a?l||1:l),i._calculateGroupPadding(t)),i.popup.position(),i._isSelect&&(n=i.value(),l?o&&(o=i._option("",i._optionLabelText())):n&&(o=i._option(n,i.text())),i._options(s,o,n)),i._makeUnselectable(),a||(i._open&&i.toggle(i._allowOpening()),i._open=!1,i._fetch||(l?(!i.listView.value().length&&r>-1&&null!==r&&i.select(r),i._initialIndex=null,(e=i.listView.selectedDataItems()[0])&&i.text()!==i._text(e)&&i._selectValue(e)):i._textAccessor()!==i._optionLabelText()&&(i.listView.value(""),i._selectValue(null),i._oldIndex=i.selectedIndex))),i._hideBusy(),i.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),(this._presetValue||this._old&&-1===this._oldIndex)&&(this._oldIndex=this.selectedIndex)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(f),this._prevent=!1},_focusoutHandler:function(){var e=this,t=e._state===w,n=window.self!==window.top,i=e._focus();e._prevent||(clearTimeout(e._typingTimeout),t&&i&&!e.trigger("select",{item:i})&&e._select(i,!e.dataSource.view().length),a.mobileOS.ios&&n?e._change():e._blur(),e._inputWrapper.removeClass(f),e._prevent=!0,e._open=!1,e.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this.popup.unbind("activate",this._focusInputHandler),this._focused=this.wrapper,this._toggle()},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t.wrapper.add(t.filterInput).off(u),a=t._inputWrapper.off(y);r||i?i?(o.removeAttr(b),a.addClass(m).removeClass(g)):(a.addClass(g).removeClass(m),o.on("focusin"+u,x(t._focusinHandler,t)).on("focusout"+u,x(t._focusoutHandler,t))):(n.removeAttr(d).removeAttr(h),a.addClass(g).removeClass(m).on(y,t._toggleHover),o.attr(b,o.data(b)).attr(v,!1).attr(_,!1).on("keydown"+u,x(t._keydown,t)).on("focusin"+u,x(t._focusinHandler,t)).on("focusout"+u,x(t._focusoutHandler,t)).on("mousedown"+u,x(t._wrapperMousedown,t)),t.wrapper.on("click"+u,x(t._wrapperClick,t)),t.filterInput||o.on("keypress"+u,x(t._keypress,t))),n.attr(d,i).attr(h,r),o.attr(v,i).attr(_,r)},_option:function(e,t){return'<option value="'+e+'">'+t+"</option>"},_keydown:function(e){var n,i,r=this,o=e.keyCode,a=e.altKey,l=r.popup.visible();if(r.filterInput&&(n=r.filterInput[0]===s()),o===c.LEFT?(o=c.UP,i=!0):o===c.RIGHT&&(o=c.DOWN,i=!0),!i||!n){if(e.keyCode=o,a&&o===c.UP&&r._focusElement(r.wrapper),o===c.ENTER&&r._typingTimeout&&r.filterInput&&l)return e.preventDefault(),t;(i=r._move(e))||(l&&r.filterInput||(o===c.HOME?(i=!0,r._firstItem()):o===c.END&&(i=!0,r._lastItem()),i&&(r._select(r._focus()),e.preventDefault())),a||i||!r.filterInput||r._search())}},_matchText:function(e,t){var n=this,i=!1;return e+="",n.options.ignoreCase&&(e=e.toLowerCase()),0===e.indexOf(n._word)&&(n.optionLabel[0]&&(t+=1),n._select(t),n.popup.visible()||n._change(),i=!0),i},_selectNext:function(e){for(var t,n=this,i=e,r=n.dataSource.flatView(),o=r.length;o>e;e++)if((t=n._text(r[e]))&&n._matchText(t,e)&&(1!==n._word.length||i!==n.selectedIndex))return!0;if(i>0&&o>i)for(e=0;i>=e;e++)if((t=n._text(r[e]))&&n._matchText(t,e))return!0;return!1},_keypress:function(e){var t,n,r,o=this;0!==e.which&&e.keyCode!==i.keys.ENTER&&(t=String.fromCharCode(e.charCode||e.keyCode),n=o.selectedIndex,r=o._word.length,o.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),r||(o._word=t),o._last===t&&1>=r&&n>-1&&o._selectNext(n)||(r&&(o._word+=t),o._last=t,o._search()))},_popupOpen:function(){var e=this.popup;e.wrapper=i.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){o.fn._popup.call(this),this.popup.one("open",x(this._popupOpen,this))},_click:function(n){var i=n.item||e(n.currentTarget);return this.trigger("select",{item:i})?(this.close(),t):(this._userTriggered=!0,this._select(i),this._focusElement(this.wrapper),this._blur(),t)},_focusElement:function(e){var t=s(),n=this.wrapper,i=this.filterInput,r=e===i?n:i,o=a.mobileOS&&(a.touch||a.MSPointers||a.pointers);i&&i[0]===e[0]&&o||i&&r[0]===t&&(this._prevent=!0,this._focused=e.focus())},_filter:function(e){var n,i;e&&((i=(n=this).options.ignoreCase)&&(e=e.toLowerCase()),n._select(function(r){var o=n._text(r);return o!==t?(o+="",i&&(o=o.toLowerCase()),0===o.indexOf(e)):t}))},_search:function(){var e=this,n=e.dataSource,i=e.selectedIndex;if(clearTimeout(e._typingTimeout),"none"!==e.options.filter)e._typingTimeout=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t)),e._typingTimeout=null},e.options.delay);else{if(e._typingTimeout=setTimeout(function(){e._word=""},e.options.delay),-1===i&&(i=0),!e.ul[0].firstChild)return n.fetch().done(function(){n.data()[0]&&i>-1&&e._selectNext(i)}),t;e._selectNext(i)}},_get:function(t){var n,i,r,o="function"==typeof t,a=o?e():e(t);if(this.optionLabel[0]&&("number"==typeof t?t>-1&&(t-=1):a.hasClass("k-list-optionlabel")&&(t=-1)),o){for(n=this.dataSource.flatView(),r=0;n.length>r;r++)if(t(n[r])){t=r,i=!0;break}i||(t=-1)}return t},_firstItem:function(){this.optionLabel[0]?this._focus(this.optionLabel):this.listView.first()},_lastItem:function(){this.optionLabel.removeClass("k-state-focused"),this.listView.last()},_nextItem:function(){this.optionLabel.hasClass("k-state-focused")?(this.optionLabel.removeClass("k-state-focused"),this.listView.first()):this.listView.next()},_prevItem:function(){this.optionLabel.hasClass("k-state-focused")||(this.listView.prev(),this.listView.focus()||this.optionLabel.addClass("k-state-focused"))},_focusItem:function(){var e=this.listView,n=e.focus(),i=e.select();(i=i[i.length-1])===t&&this.options.highlightFirst&&!n&&(i=0),i!==t?e.focus(i):this.options.optionLabel?(this._focus(this.optionLabel),this._select(this.optionLabel)):e.scrollToIndex(0)},_focus:function(e){var n=this.listView,i=this.optionLabel;return e===t?(!(e=n.focus())&&i.hasClass("k-state-focused")&&(e=i),e):(i.removeClass("k-state-focused"),e=this._get(e),n.focus(e),-1===e&&i.addClass("k-state-focused"),t)},_select:function(e,t){var n=this;e=n._get(e),n.listView.select(e),t||n._state!==w||(n.listView.filter(!1),n._state=k),-1===e&&n._selectValue(null)},_selectValue:function(e){var n=this,i=n.options.optionLabel,r=n.optionLabel,o=n.listView.select(),a="",s="";(o=o[o.length-1])===t&&(o=-1),r.removeClass("k-state-focused k-state-selected"),e?(s=e,a=n._dataValue(e),i&&(o+=1)):i&&(n._focus(r.addClass("k-state-selected")),s=n._optionLabelText(),a="string"==typeof i?"":n._value(i),o=0),n.selectedIndex=o,null===a&&(a=""),n._textAccessor(s),n._accessor(a,o),n._triggerCascade()},_mobile:function(){var e=this.popup,t=a.mobileOS;e.element.parents(".km-root").eq(0).length&&t&&(e.options.animation.open.effects=t.android||t.meego?"fadeIn":t.ios||t.wp?"slideIn:up":e.options.animation.open.effects)},_filterHeader:function(){var t,n="none"!==this.options.filter;this.filterInput&&(this.filterInput.off(u).parent().remove(),this.filterInput=null),n&&(t='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=e('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add(t))))},_span:function(){var t,n=this,i=n.wrapper,r="span.k-input";(t=i.find(r))[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=i.find(r)),n.span=t,n._inputWrapper=e(i[0].firstChild),n._arrow=i.find(".k-icon")},_wrapper:function(){var e,t=this,n=t.element,i=n[0];(e=n.parent()).is("span.k-widget")||((e=n.wrap("<span />").parent())[0].style.cssText=i.style.cssText,e[0].title=i.title),n.hide(),t._focused=t.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(i.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(e){this.select(e.value()?0:-1)},_inputTemplate:function(){var t=this,n=t.options.valueTemplate;n=n?i.template(n):e.proxy(i.template("#:this._text(data)#",{useWithBlock:!1}),t),t.valueTemplate=n},_textAccessor:function(n){var i,r=null,o=this.valueTemplate,a=this.options.optionLabel,s=this.span;return n===t?s.text():(e.isPlainObject(n)||n instanceof l?r=n:a&&this._optionLabelText()===n&&(r=a,o=this.optionLabelTemplate),r||(r=this._assignInstance(n,this._accessor())),i=function(){return{elements:s.get(),data:[{dataItem:r}]}},this.angular("cleanup",i),s.html(o(r)),this.angular("compile",i),t)},_preselect:function(e,t){e||t||(t=this._optionLabelText()),this._accessor(e),this._textAccessor(t),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(e),this._initialIndex=null,this._presetValue=!0},_assignInstance:function(e,t){var i=this.options.dataTextField,r={};return i?(n(r,i.split("."),e),n(r,this.options.dataValueField.split("."),t),r=new l(r)):r=e,r}});r.plugin(C)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,o=i.Select,a=n.caret,s=n.support.placeholder,l=n._activeElement,c=n.keys,u=".kendoComboBox",d="click"+u,h="mousedown"+u,p="disabled",f="readonly",g="change",m="k-state-default",v="k-state-focused",_="k-state-disabled",y="aria-disabled",b="aria-readonly",w="filter",k="accept",x="rebind",C=e.proxy,T=o.extend({init:function(t,i){var r,a=this;a.ns=u,i=e.isArray(i)?{dataSource:i}:i,o.fn.init.call(a,t,i),i=a.options,t=a.element.on("focus"+u,C(a._focusHandler,a)),i.placeholder=i.placeholder||t.attr("placeholder"),a._reset(),a._wrapper(),a._input(),a._tabindex(a.input),a._popup(),a._dataSource(),a._ignoreCase(),a._enable(),a._oldIndex=a.selectedIndex=-1,a._aria(),a._initialIndex=i.index,a._initList(),a._cascade(),i.autoBind?a._filterSource():(!(r=i.text)&&a._isSelect&&(r=t.children(":selected").text()),r&&(a.input.val(r),a._prev=r)),r||a._placeholder(),e(a.element).parents("fieldset").is(":disabled")&&a.enable(!1),n.notify(a)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},template:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",g,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this.listView.setOptions(e),this._accessors(),this._aria()},destroy:function(){var e=this;e.input.off(u),e.element.off(u),e._inputWrapper.off(u),o.fn.destroy.call(e)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(v),this._placeholder(!1)},_inputFocusout:function(){var e=this;e._inputWrapper.removeClass(v),clearTimeout(e._typingTimeout),e._typingTimeout=null,e.options.text!==e.input.val()&&e.text(e.text()),e._placeholder(),e._blur(),e.element.blur()},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._inputWrapper.off(u),o=t.element.add(t.input.off(u)),a=t._arrow.parent().off(d+" "+h);i||n?(r.addClass(n?_:m).removeClass(n?m:_),o.attr(p,n).attr(f,i).attr(y,n).attr(b,i)):(r.addClass(m).removeClass(_).on("mouseenter.kendoComboBox mouseleave.kendoComboBox",t._toggleHover),o.removeAttr(p).removeAttr(f).attr(y,!1).attr(b,!1),a.on(d,C(t._arrowClick,t)).on(h,function(e){e.preventDefault()}),t.input.on("keydown"+u,C(t._keydown,t)).on("focus"+u,C(t._inputFocus,t)).on("focusout"+u,C(t._inputFocusout,t)))},open:function(){var e=this,t=e._state;e.popup.visible()||(!e.listView.isBound()&&t!==w||t===k?(e._open=!0,e._state=x,e.listView.filter(!1),e._filterSource()):(e.popup.open(),e._focusItem()))},_listBound:function(){var e,n,i,r,o=this,a=o.options,s=o._initialIndex,c=o._state===w,u=o.input[0]===l(),d=o.listView,h=d.focus(),p=this.dataSource.flatView(),f=this.dataSource.page(),g=p.length;o._angularItems("compile"),o._presetValue=!1,a.virtual||o._calculateGroupPadding(o._height(g)),o.popup.position(),o._isSelect&&(n=o.element[0].children[0],o._state===x&&(o._state=""),i=!0,r=o._customOption,o._customOption=t,o._options(p,"",o.value()),r&&r[0].selected?o._custom(r.val(),i):n||o._custom("",i)),o._makeUnselectable(),c||o._fetch?c&&h&&h.removeClass("k-state-selected"):(d.value().length||(null!==s&&s>-1?(o.select(s),h=d.focus()):o._accessor()&&d.value(o._accessor())),o._initialIndex=null,(e=o.listView.selectedDataItems()[0])&&o.text()&&o.text()!==o._text(e)&&o._selectValue(e)),!g||f!==t&&1!==f||(a.highlightFirst?h||d.focusIndex()||d.focus(0):d.focus(-1),a.suggest&&u&&o.input.val()&&o.suggest(p[0])),o._open&&(o._open=!1,o._typingTimeout&&!u?o.popup.close():o.toggle(!!g),o._typingTimeout=null),o._touchScroller&&o._touchScroller.reset(),o._hideBusy(),o.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),this._presetValue&&(this._oldIndex=this.selectedIndex)},_get:function(e){var t,n,i;if("function"==typeof e){for(t=this.dataSource.flatView(),i=0;t.length>i;i++)if(e(t[i])){e=i,n=!0;break}n||(e=-1)}return e},_select:function(e,t){-1===(e=this._get(e))&&(this.input[0].value="",this._accessor("")),this.listView.select(e),t||this._state!==w||(this.listView.filter(!1),this._state=k)},_selectValue:function(e){var n=this.listView.select(),i="",r="";(n=n[n.length-1])===t&&(n=-1),this.selectedIndex=n,-1===n?(i=r=this.input[0].value,this.listView.focus(-1)):(e&&(i=this._dataValue(e),r=this._text(e)),null===i&&(i="")),this._prev=this.input[0].value=r,this._accessor(i!==t?i:r,n),this._placeholder(),this._triggerCascade()},refresh:function(){this.listView.refresh()},suggest:function(e){var n,i=this,o=i.input[0],s=i.text(),u=a(o)[0],d=i._last;return d==c.BACKSPACE||d==c.DELETE?(i._last=t,t):("string"!=typeof(e=e||"")&&(e[0]&&(e=i.dataSource.view()[r.inArray(e[0],i.ul[0])]),e=e?i._text(e):""),0>=u&&(u=s.toLowerCase().indexOf(e.toLowerCase())+1),e?(n=(e=""+e).toLowerCase().indexOf(s.toLowerCase()))>-1&&(s+=e.substring(n+s.length)):s=s.substring(0,u),s.length===u&&e||(o.value=s,o===l()&&a(o,u,s.length)),t)},text:function(e){var n,i,r,o,a,s;if(e=null===e?"":e,i=(n=this).input[0],r=n.options.ignoreCase,o=e,e===t)return i.value;if(a=n.dataItem(),!1!==n.options.autoBind||n.listView.isBound()){if(a&&n._text(a)===e&&(null===(s=n._value(a))?s="":s+="",s===n._old))return n._triggerCascade(),t;r&&(o=o.toLowerCase()),n._select(function(e){return e=n._text(e),r&&(e=(e+"").toLowerCase()),e===o}),0>n.selectedIndex&&(n._accessor(e),i.value=e,n._triggerCascade()),n._prev=i.value}},toggle:function(e){this._toggle(e,!0)},value:function(e){var n=this,i=n.options;return e===t?(e=n._accessor()||n.listView.value()[0])===t||null===e?"":e:((e!==i.value||n.input.val()!==i.text)&&(n._accessor(e),n.listView.value(e).done(function(){n._selectValue(n.listView.selectedDataItems()[0]),-1===n.selectedIndex&&(n._accessor(e),n.input.val(e),n._placeholder(!0)),n._old=n._accessor(),n._oldIndex=n.selectedIndex,n._prev=n.input.val(),n._state===w&&(n._state=k)}),n._fetchData()),t)},_click:function(e){var n=e.item;return this.trigger("select",{item:n})?(this.close(),t):(this._userTriggered=!0,this._select(n),this._blur(),t)},_filter:function(e){var n,i=this,r=i.options,o=i.dataSource,a=r.ignoreCase;return a&&(e=e.toLowerCase()),i.ul[0].firstChild?(this.listView.focus(this._get(function(n){var r=i._text(n);return r!==t?(""==(r+="")||""!==e)&&(a&&(r=r.toLowerCase()),0===r.indexOf(e)):t})),(n=this.listView.focus())&&(r.suggest&&i.suggest(n),this.open()),this.options.highlightFirst&&!e&&this.listView.first(),t):(o.one(g,function(){o.view()[0]&&i.search(e)}).fetch(),t)},_input:function(){var t,n=this,i=n.element.removeClass("k-input")[0],r=i.accessKey,o=n.wrapper,a="input.k-input",l=i.name||"";l&&(l='name="'+l+'_input" '),(t=o.find(a))[0]||(o.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+l+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=o.find(a)),t[0].style.cssText=i.style.cssText,t[0].title=i.title,i.maxLength>-1&&(t[0].maxLength=i.maxLength),t.addClass(i.className).val(this.options.text||i.value).css({width:"100%",height:i.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),s&&t.attr("placeholder",n.options.placeholder),r&&(i.accessKey="",t[0].accessKey=r),n._focused=n.input=t,n._inputWrapper=e(o[0].firstChild),n._arrow=o.find(".k-icon").attr({role:"button",tabIndex:-1}),i.id&&n._arrow.attr("aria-controls",n.ul[0].id)},_keydown:function(e){var t=this,n=e.keyCode;t._last=n,clearTimeout(t._typingTimeout),t._typingTimeout=null,n==c.TAB||t._move(e)||t._search()},_placeholder:function(e){if(!s){var n,i=this,r=i.input,o=i.options.placeholder;if(o){if(n=i.value(),e===t&&(e=!n),r.toggleClass("k-readonly",e),!e){if(n)return;o=""}r.val(o),o||r[0]!==l()||a(r[0],0,0)}}},_search:function(){var e=this;e._typingTimeout=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t)),e._typingTimeout=null},e.options.delay)},_wrapper:function(){var e=this.element,t=e.parent();t.is("span.k-widget")||((t=e.hide().wrap("<span />").parent())[0].style.cssText=e[0].style.cssText),this.wrapper=t.addClass("k-widget k-combobox k-header").addClass(e[0].className).css("display","")},_clearSelection:function(e,t){var n=e.value(),i=n&&-1===e.selectedIndex;(t||!n||i)&&(this.options.value="",this.value(""))},_preselect:function(e,t){this.input.val(t),this._accessor(e),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(e),this._placeholder(),this._initialIndex=null,this._presetValue=!0}});i.plugin(T)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,o=n.keys,a=n._activeElement,s=n.data.ObservableArray,l=e.proxy,c="id",u="li",d="accept",h="filter",p="rebind",f="open",g="close",m="change",v="select",_="aria-disabled",y="aria-readonly",b="k-state-focused",w="k-loading-hidden",k="k-state-hover",x="k-state-disabled",C="disabled",T="readonly",S=".kendoMultiSelect",D="mouseenter"+S,A="mouseleave"+S,M=/"/g,E=e.isArray,I=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],R=r.extend({init:function(t,i){var o,a=this;a.ns=S,r.fn.init.call(a,t,i),a._optionsMap={},a._customOptions={},a._wrapper(),a._tagList(),a._input(),a._textContainer(),a._loader(),a._tabindex(a.input),t=a.element.attr("multiple","multiple").hide(),(i=a.options).placeholder||(i.placeholder=t.data("placeholder")),(o=t.attr(c))&&(a._tagID=o+"_tag_active",o+="_taglist",a.tagList.attr(c,o)),a._aria(o),a._dataSource(),a._ignoreCase(),a._popup(),a._tagTemplate(),a._initList(),a._reset(),a._enable(),a._placeholder(),i.autoBind?a.dataSource.fetch():i.value&&a._preselect(i.value),e(a.element).parents("fieldset").is(":disabled")&&a.enable(!1),n.notify(a)},_preselect:function(t,i){var r=this;E(t)||t instanceof n.data.ObservableArray||(t=[t]),(e.isPlainObject(t[0])||t[0]instanceof n.data.ObservableObject||!r.options.dataValueField)&&(r.dataSource.data(t),r.value(i||r._initialValues),r._retrieveData=!0)},options:{name:"MultiSelect",tagMode:"multiple",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:[f,g,m,v,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){var t=this._listOptions(e);r.fn.setOptions.call(this,e),this._normalizeOptions(t),this.listView.setOptions(t),this._accessors(),this._aria(this.tagList.attr(c)),this._tagTemplate()},currentTag:function(e){var n=this;return e===t?n._currentTag:(n._currentTag&&(n._currentTag.removeClass(b).removeAttr(c),n.input.removeAttr("aria-activedescendant")),e&&(e.addClass(b).attr(c,n._tagID),n.input.attr("aria-activedescendant",n._tagID)),n._currentTag=e,t)},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy),clearTimeout(e._typingTimeout),e.wrapper.off(t),e.tagList.off(t),e.input.off(t),r.fn.destroy.call(e)},_activateItem:function(){r.fn._activateItem.call(this),this.currentTag(null)},_normalizeOptions:function(e){var t=this.options.itemTemplate||this.options.template,i=e.itemTemplate||t||e.template;i||(i="#:"+n.expr(e.dataTextField,"data")+"#"),e.template=i},_initList:function(){var t=this,i=t.options.virtual,r=!!i,o=l(t._listBound,t),a={autoBind:!1,selectable:"multiple",dataSource:t.dataSource,click:l(t._click,t),change:l(t._listChange,t),activate:l(t._activateItem,t),deactivate:l(t._deactivateItem,t),dataBinding:function(){t.trigger("dataBinding"),t._angularItems("cleanup")},dataBound:o,listBound:o,selectedItemChange:l(t._selectedItemChange,t)};a=e.extend(t._listOptions(),a,"object"==typeof i?i:{}),t._normalizeOptions(a),t.listView=r?new n.ui.VirtualList(t.ul,a):new n.ui.StaticList(t.ul,a),t.listView.value(t._initialValues||t.options.value)},_listChange:function(e){this._state===p&&(this._state="",e.added=[]),this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var t,n,i=e.items;for(n=0;i.length>n;n++)t=i[n],this.tagList.children().eq(t.index).children("span:first").html(this.tagTextTemplate(t.item))},_wrapperMousedown:function(t){var i=this,r="input"!==t.target.nodeName.toLowerCase(),o=e(t.target),s=o.hasClass("k-select")||o.hasClass("k-icon");s&&(s=!o.closest(".k-select").children(".k-i-arrow-s").length),!r||s&&n.support.mobileOS||t.preventDefault(),s||(i.input[0]!==a()&&r&&i.input.focus(),0===i.options.minLength&&i.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(b)},_inputFocusout:function(){var e=this;clearTimeout(e._typingTimeout),e.wrapper.removeClass(b),e._placeholder(!e.listView.selectedDataItems()[0],!0),e.close(),e._state===h&&(e._state=d,e.listView.filter(!1),e.listView.skipUpdate(!0)),e.element.blur()},_removeTag:function(e){var n,i=this,r=i._state,o=e.index(),a=i.listView,s=a.value()[o],l=i._customOptions[s];l!==t||r!==d&&r!==h||(l=i._optionsMap[s]),l!==t?((n=i.element[0].children[l]).removeAttribute("selected"),n.selected=!1,a.removeAt(o),e.remove()):a.select(a.select()[o]),i.currentTag(null),i._change(),i._close()},_tagListClick:function(t){var n=e(t.currentTarget);n.children(".k-i-arrow-s").length||this._removeTag(n.closest(u))},_editable:function(t){var n=this,i=t.disable,r=t.readonly,o=n.wrapper.off(S),a=n.tagList.off(S),s=n.element.add(n.input.off(S));r||i?(i?o.addClass(x):o.removeClass(x),s.attr(C,i).attr(T,r).attr(_,i).attr(y,r)):(o.removeClass(x).on("mouseenter.kendoMultiSelect mouseleave.kendoMultiSelect",n._toggleHover).on("mousedown"+S+" touchend"+S,l(n._wrapperMousedown,n)),n.input.on("keydown.kendoMultiSelect",l(n._keydown,n)).on("paste"+S,l(n._search,n)).on("focus"+S,l(n._inputFocus,n)).on("focusout"+S,l(n._inputFocusout,n)),s.removeAttr(C).removeAttr(T).attr(_,!1).attr(y,!1),a.on(D,u,function(){e(this).addClass(k)}).on(A,u,function(){e(this).removeClass(k)}).on("click.kendoMultiSelect","li.k-button .k-select",l(n._tagListClick,n)))},_close:function(){var e=this;e.options.autoClose?e.close():e.popup.position()},close:function(){this.popup.close()},open:function(){var e=this;e._request&&(e._retrieveData=!1),e._retrieveData||!e.listView.isBound()||e._state===d?(e._open=!0,e._state=p,e._retrieveData=!1,e.listView.filter(!1),e.listView.skipUpdate(!0),e._filterSource()):e._allowSelection()&&(e.popup.open(),e._focusItem())},toggle:function(e){this[(e=e!==t?e:!this.popup.visible())?f:g]()},refresh:function(){this.listView.refresh()},_listBound:function(){var e=this,n=e.dataSource.flatView(),i=e.dataSource.page(),r=n.length;e._angularItems("compile"),e._render(n),e._calculateGroupPadding(e._height(r)),e._open&&(e._open=!1,e.toggle(r)),e.popup.position(),!e.options.highlightFirst||i!==t&&1!==i||e.listView.first(),e._touchScroller&&e._touchScroller.reset(),e._hideBusy(),e._makeUnselectable(),e.trigger("dataBound")},search:function(e){var t,n,i=this,r=i.options,o=r.ignoreCase,a=r.filter,s=r.dataTextField,l=i.input.val();r.placeholder===l&&(l=""),clearTimeout(i._typingTimeout),(!(n=(e="string"==typeof e?e:l).length)||n>=r.minLength)&&(i.listView.filter(!0),i._state=h,i._open=!0,t={value:o?e.toLowerCase():e,field:s,operator:a,ignoreCase:o},i._filterSource(t,i._retrieveData),i._retrieveData=!1)},value:function(e){var n=this,i=n.listView.value().slice(),r=n.options.maxSelectedItems;return e===t?i:(e=n._normalizeValues(e),null!==r&&e.length>r&&(e=e.slice(0,r)),n.listView.value(e),n._old=e,n._fetchData(),t)},_setOption:function(e,t){var n=this.element[0].children[this._optionsMap[e]];n&&(t?n.setAttribute("selected","selected"):n.removeAttribute("selected"),n.selected=t)},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;0===e.listView.value().length||e._request||(e._retrieveData||!e._fetch&&!t)&&(e._fetch=!0,e._retrieveData=!1,e.dataSource.read().done(function(){e._fetch=!1}))},_dataSource:function(){var e=this,t=e.element,i=e.options,r=i.dataSource||{};(r=E(r)?{data:r}:r).select=t,r.fields=[{field:i.dataTextField},{field:i.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():e._progressHandler=l(e._showBusy,e),e.dataSource=n.data.DataSource.create(r).bind("progress",e._progressHandler)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues),t._placeholder()})},t._form=r.on("reset",t._resetHandler))},_initValue:function(){var e=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(e)},_normalizeValues:function(t){var n=this;return null===t?t=[]:t&&e.isPlainObject(t)?t=[n._value(t)]:t&&e.isPlainObject(t[0])?t=e.map(t,function(e){return n._value(e)}):E(t)||t instanceof s||(t=[t]),t},_change:function(){var e=this,t=e.value();(function(e,t){var n;if(null===e&&null!==t||null!==e&&null===t)return!1;if((n=e.length)!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0})(t,e._old)||(e._old=t.slice(),e.trigger(m),e.element.trigger(m))},_click:function(e){var n=e.item;return this.trigger(v,{item:n})?(this._close(),t):(this._select(n),this._change(),this._close(),t)},_keydown:function(i){var r=this,a=i.keyCode,s=r._currentTag,l=r.listView.focus(),c=r.input.val(),u=n.support.isRtl(r.wrapper),d=r.popup.visible();if(a===o.DOWN){if(i.preventDefault(),!d)return r.open(),l||this.listView.first(),t;l?(this.listView.next(),this.listView.focus()||this.listView.last()):this.listView.first()}else if(a===o.UP)d&&(l&&this.listView.prev(),this.listView.focus()||r.close()),i.preventDefault();else if(a===o.LEFT&&!u||a===o.RIGHT&&u)c||(s=s?s.prev():e(r.tagList[0].lastChild))[0]&&r.currentTag(s);else if(a===o.RIGHT&&!u||a===o.LEFT&&u)!c&&s&&(s=s.next(),r.currentTag(s[0]?s:null));else if(a===o.ENTER&&d){if(l){if(r.trigger(v,{item:l}))return r._close(),t;r._select(l)}r._change(),r._close(),i.preventDefault()}else a===o.ESC?(d?i.preventDefault():r.currentTag(null),r.close()):a===o.HOME?d?this.listView.first():c||(s=r.tagList[0].firstChild)&&r.currentTag(e(s)):a===o.END?d?this.listView.last():c||(s=r.tagList[0].lastChild)&&r.currentTag(e(s)):a!==o.DELETE&&a!==o.BACKSPACE||c?(clearTimeout(r._typingTimeout),setTimeout(function(){r._scale()}),r._search()):(a!==o.BACKSPACE||s||(s=e(r.tagList[0].lastChild)),s&&s[0]&&r._removeTag(s))},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(w),e._request=!1,e._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(w)},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(l(e._showBusyHandler,e),100))},_placeholder:function(e,i){var r=this,o=r.input,s=a();e===t&&(e=!1,o[0]!==s&&(e=!r.listView.selectedDataItems()[0])),r._prev="",o.toggleClass("k-readonly",e).val(e?r.options.placeholder:""),o[0]!==s||i||n.caret(o[0],0,0),r._scale()},_scale:function(){var e,t=this,n=t.wrapper,i=n.width(),r=t._span.text(t.input.val());n.is(":visible")?e=r.width()+25:(r.appendTo(document.documentElement),i=e=r.width()+25,r.appendTo(n)),t.input.width(e>i?i:e)},_option:function(e,i,r){var o="<option";return e!==t&&(-1!==(e+="").indexOf('"')&&(e=e.replace(M,"&quot;")),o+=' value="'+e+'"'),r&&(o+=" selected"),o+=">",i!==t&&(o+=n.htmlEncode(i)),o+"</option>"},_render:function(e){var t,n,i,r,o,a,s=this.listView.selectedDataItems(),l=this.listView.value(),c=e.length,u="";for(l.length!==s.length&&(s=this._buildSelectedItems(l)),o={},a={},r=0;c>r;r++)n=e[r],i=this._value(n),-1!==(t=this._selectedItemIndex(i,s))&&s.splice(t,1),a[i]=r,u+=this._option(i,this._text(n),-1!==t);if(s.length)for(r=0;s.length>r;r++)n=s[r],o[i=this._value(n)]=c,a[i]=c,c+=1,u+=this._option(i,this._text(n),!0);this._customOptions=o,this._optionsMap=a,this.element.html(u)},_buildSelectedItems:function(e){var t,n,i=this.options.dataValueField,r=this.options.dataTextField,o=[];for(n=0;e.length>n;n++)(t={})[i]=e[n],t[r]=e[n],o.push(t);return o},_selectedItemIndex:function(e,t){for(var n=this._value,i=0;t.length>i;i++)if(e===n(t[i]))return i;return-1},_search:function(){var e=this;e._typingTimeout=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this.listView.value().length},_angularTagItems:function(t){var n=this;n.angular(t,function(){return{elements:n.tagList[0].children,data:e.map(n.dataItems(),function(e){return{dataItem:e}})}})},_selectValue:function(e,t){var n,i,r,o=this,a=o.value(),s=o.dataSource.total(),l=o.tagList,c=o._value;if(o._angularTagItems("cleanup"),"multiple"===o.options.tagMode){for(r=t.length-1;r>-1;r--)n=t[r],l[0].removeChild(l[0].children[n.position]),o._setOption(c(n.dataItem),!1);for(r=0;e.length>r;r++)i=e[r],l.append(o.tagTemplate(i.dataItem)),o._setOption(c(i.dataItem),!0)}else{for((!o._maxTotal||s>o._maxTotal)&&(o._maxTotal=s),l.html(""),a.length&&l.append(o.tagTemplate({values:a,dataItems:o.dataItems(),maxTotal:o._maxTotal,currentTotal:s})),r=t.length-1;r>-1;r--)o._setOption(c(t[r].dataItem),!1);for(r=0;e.length>r;r++)o._setOption(c(e[r].dataItem),!0)}o._angularTagItems("compile"),o._placeholder()},_select:function(e){var t=this;t._state===p&&(t._state=""),t._allowSelection()&&(this.listView.select(e),t._placeholder(),t._state===h&&(t._state=d,t.listView.filter(!1),t.listView.skipUpdate(!0)))},_input:function(){var t=this,n=t.element[0].accessKey,i=t._innerWrapper.children("input.k-input");i[0]||(i=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),t.element.removeAttr("accesskey"),t._focused=t.input=i.attr({accesskey:n,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this,n=t._innerWrapper.children("ul");n[0]||(n=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=n},_tagTemplate:function(){var e,t=this,i=t.options,r=i.tagTemplate,o=i.dataSource,a="multiple"===i.tagMode;t.element[0].length&&!o&&(i.dataTextField=i.dataTextField||"text",i.dataValueField=i.dataValueField||"value"),e=a?n.template("#:"+n.expr(i.dataTextField,"data")+"#",{useWithBlock:!1}):n.template("#:values.length# item(s) selected"),t.tagTextTemplate=r=r?n.template(r):e,t.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+r(e)+'</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon '+(a?"k-i-close":"k-i-arrow-s")+'">'+(a?"delete":"open")+"</span></span></li>"}},_loader:function(){this._loading=e('<span class="k-icon k-loading '+w+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=n.getComputedStyles(this.input[0],I);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,n=t.element,i=n.parent("span.k-multiselect");i[0]||((i=n.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent())[0].style.cssText=n[0].style.cssText,i[0].title=n[0].title,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(n)),t.wrapper=i.addClass(n[0].className).css("display",""),t._innerWrapper=e(i[0].firstChild)}});i.plugin(R)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return"<a class='k-button k-button-"+t+"'><span class='k-icon "+("increase"==t?n?"k-i-arrow-e":"k-i-arrow-n":n?"k-i-arrow-w":"k-i-arrow-s")+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function i(e){return function(t){return t+e}}function r(e){return function(){return e}}function o(e){return(e+"").replace(".",d.cultures.current.numberFormat["."])}function a(e){e=parseFloat(e,10);var t=y.pow(10,W||0);return y.round(e*t)/t}function s(e,n){var i=m(e.getAttribute(n));return null===i&&(i=t),i}function l(e){return typeof e!==q}function c(e){return 1e4*e}var u,d=window.kendo,h=d.ui.Widget,p=d.ui.Draggable,f=e.extend,g=d.format,m=d.parseFloat,v=e.proxy,_=e.isArray,y=Math,b=d.support,w=b.pointers,k=b.msPointers,x="change",C="slide",T=".slider",S="touchstart"+T+" mousedown"+T,D=w?"pointerdown"+T:k?"MSPointerDown"+T:S,A="touchend"+T+" mouseup"+T,M=w?"pointerup":k?"MSPointerUp"+T:A,E="moveSelection",I="keydown"+T,R="click"+T,P="mouseover"+T,L="focus"+T,F="blur"+T,B=".k-draghandle",z=".k-slider-track",H=".k-tick",N="k-state-selected",O="k-state-focused",V="k-state-default",U="k-state-disabled",W=3,j="disabled",q="undefined",G="tabindex",$=d.getTouches,Y=h.extend({init:function(e,t){var n,o=this;if(h.fn.init.call(o,e,t),t=o.options,o._distance=a(t.max-t.min),o._isHorizontal="horizontal"==t.orientation,o._isRtl=o._isHorizontal&&d.support.isRtl(e),o._position=o._isHorizontal?"left":"bottom",o._sizeFn=o._isHorizontal?"width":"height",o._outerSize=o._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled&&t.tooltip.format||"{0}",0>=t.smallStep)throw Error("Kendo UI Slider smallStep must be a positive number.");o._createHtml(),o.wrapper=o.element.closest(".k-slider"),o._trackDiv=o.wrapper.find(z),o._setTrackDivWidth(),o._maxSelection=o._trackDiv[o._sizeFn](),o._sliderItemsInit(),o._reset(),o._tabindex(o.wrapper.find(B)),o[t.enabled?"enable":"disable"](),n=d.support.isRtl(o.wrapper)?-1:1,o._keyMap={37:i(-1*n*t.smallStep),40:i(-t.smallStep),39:i(1*n*t.smallStep),38:i(+t.smallStep),35:r(t.max),36:r(t.min),33:i(+t.largeStep),34:i(-t.largeStep)},d.notify(o)},events:[x,C],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_resize:function(){this._setTrackDivWidth(),this.wrapper.find(".k-slider-items").remove(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._refresh()},_sliderItemsInit:function(){var e=this,t=e.options,n=e._maxSelection/((t.max-t.min)/t.smallStep),i=e._calculateItemsWidth(y.floor(e._distance/t.smallStep));"none"!=t.tickPlacement&&n>=2&&(e._trackDiv.before(function(e,t){var n,i="<ul class='k-reset k-slider-items'>",r=y.floor(a(t/e.smallStep))+1;for(n=0;r>n;n++)i+="<li class='k-tick' role='presentation'>&nbsp;</li>";return i+"</ul>"}(t,e._distance)),e._setItemsWidth(i),e._setItemsTitle()),e._calculateSteps(i),"none"!=t.tickPlacement&&n>=2&&t.largeStep>=t.smallStep&&e._setItemsLargeTick()},getSize:function(){return d.dimensions(this.wrapper)},_setTrackDivWidth:function(){var e=this,t=2*parseFloat(e._trackDiv.css(e._isRtl?"right":e._position),10);e._trackDiv[e._sizeFn](e.wrapper[e._sizeFn]()-2-t)},_setItemsWidth:function(t){var n,i=this,r=i.options,o=t.length-1,a=i.wrapper.find(H),s=0,l=a.length,c=0;for(n=0;l-2>n;n++)e(a[n+1])[i._sizeFn](t[n]);if(i._isHorizontal?(e(a[0]).addClass("k-first")[i._sizeFn](t[o-1]),e(a[o]).addClass("k-last")[i._sizeFn](t[o])):(e(a[o]).addClass("k-first")[i._sizeFn](t[o]),e(a[0]).addClass("k-last")[i._sizeFn](t[o-1])),i._distance%r.smallStep!=0&&!i._isHorizontal){for(n=0;t.length>n;n++)c+=t[n];s=i._maxSelection-c,s+=parseFloat(i._trackDiv.css(i._position),10)+2,i.wrapper.find(".k-slider-items").css("padding-top",s)}},_setItemsTitle:function(){for(var t=this,n=t.options,i=t.wrapper.find(H),r=n.min,o=i.length,s=t._isHorizontal&&!t._isRtl?0:o-1,l=t._isHorizontal&&!t._isRtl?o:-1,c=t._isHorizontal&&!t._isRtl?1:-1;s-l!=0;s+=c)e(i[s]).attr("title",g(n.tooltip.format,a(r))),r+=n.smallStep},_setItemsLargeTick:function(){var t,n,i=this,r=i.options,o=i.wrapper.find(H),s=0;if(c(r.largeStep)%c(r.smallStep)==0||i._distance/r.largeStep>=3)for(i._isHorizontal||i._isRtl||(o=e.makeArray(o).reverse()),s=0;o.length>s;s++)t=e(o[s]),(n=a(c(i._values[s]-this.options.min)))%c(r.smallStep)==0&&n%c(r.largeStep)==0&&(t.addClass("k-tick-large").html("<span class='k-label'>"+t.attr("title")+"</span>"),0!==s&&s!==o.length-1&&t.css("line-height",t[i._sizeFn]()+"px"))},_calculateItemsWidth:function(e){var t,n,i,r=this,o=r.options,a=parseFloat(r._trackDiv.css(r._sizeFn))+1,s=a/r._distance;for(r._distance/o.smallStep-y.floor(r._distance/o.smallStep)>0&&(a-=r._distance%o.smallStep*s),t=a/e,n=[],i=0;e-1>i;i++)n[i]=t;return n[e-1]=n[e]=t/2,r._roundWidths(n)},_roundWidths:function(e){var t,n=0,i=e.length;for(t=0;i>t;t++)n+=e[t]-y.floor(e[t]),e[t]=y.floor(e[t]);return n=y.round(n),this._addAdditionalSize(n,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var n,i=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(n=0;e>n;n++)t[parseInt(y.round(i*n),10)]+=1;return t},_calculateSteps:function(e){var t,n=this,i=n.options,r=i.min,o=0,s=y.ceil(n._distance/i.smallStep),l=1;if(s+=n._distance/i.smallStep%1==0?1:0,e.splice(0,0,2*e[s-2]),e.splice(s-1,1,2*e.pop()),n._pixelSteps=[o],n._values=[r],0!==s){for(;s>l;)o+=(e[l-1]+e[l])/2,n._pixelSteps[l]=o,r+=i.smallStep,n._values[l]=a(r),l++;t=n._distance%i.smallStep==0?s-1:s,n._pixelSteps[t]=n._maxSelection,n._values[t]=i.max,n._isRtl&&(n._pixelSteps.reverse(),n._values.reverse())}},_getValueFromPosition:function(e,t){var n,i=this,r=i.options,o=y.max(r.smallStep*(i._maxSelection/i._distance),0),s=0,l=o/2;if(i._isHorizontal?(s=e-t.startPoint,i._isRtl&&(s=i._maxSelection-s)):s=t.startPoint-e,i._maxSelection-(parseInt(i._maxSelection%o,10)-3)/2<s)return r.max;for(n=0;i._pixelSteps.length>n;n++)if(y.abs(i._pixelSteps[n]-s)-1<=l)return a(i._values[n])},_getFormattedValue:function(e,t){var n,i,r,o="",a=this.options.tooltip;return _(e)?(i=e[0],r=e[1]):t&&t.type&&(i=t.selectionStart,r=t.selectionEnd),t&&(n=t.tooltipTemplate),!n&&a.template&&(n=d.template(a.template)),_(e)||t&&t.type?o=n?n({selectionStart:i,selectionEnd:r}):(i=g(a.format,i))+" - "+(r=g(a.format,r)):(t&&(t.val=e),o=n?n({value:e}):g(a.format,e)),o},_getDraggableArea:function(){var e=this,t=d.getOffset(e._trackDiv);return{startPoint:e._isHorizontal?t.left:t.top+e._maxSelection,endPoint:e._isHorizontal?t.left+e._maxSelection:t.top}},_createHtml:function(){var e=this,t=e.element,i=e.options,r=t.find("input");2==r.length?(r.eq(0).prop("value",o(i.selectionStart)),r.eq(1).prop("value",o(i.selectionEnd))):t.prop("value",o(i.value)),t.wrap(function(e,t,n){var i=n?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),o=t.attr("class")?" "+t.attr("class"):"",a="";return"bottomRight"==e.tickPlacement?a=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(a=" k-slider-topleft"),"<div class='k-widget k-slider"+i+o+"'"+(r=r?" style='"+r+"'":"")+"><div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+a+"'></div></div>"}(i,t,e._isHorizontal)).hide(),i.showButtons&&t.before(n(i,"increase",e._isHorizontal)).before(n(i,"decrease",e._isHorizontal)),t.before(function(e,t){var n=t.is("input")?1:2;return"<div class='k-slider-track'><div class='k-slider-selection'>\x3c!-- --\x3e</div><a href='#' class='k-draghandle' title='"+(2==n?e.leftDragHandleTitle:e.dragHandleTitle)+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(n>1?e.selectionStart||e.min:e.value||e.min)+"'>Drag</a>"+(n>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'>Drag</a>":"")+"</div>"}(i,t))},_focus:function(t){var n=this,i=t.target,r=n.value(),o=n._drag;o||(i==n.wrapper.find(B).eq(0)[0]?(o=n._firstHandleDrag,n._activeHandle=0):(o=n._lastHandleDrag,n._activeHandle=1),r=r[n._activeHandle]),e(i).addClass(O+" "+N),o&&(n._activeHandleDrag=o,o.selectionStart=n.options.selectionStart,o.selectionEnd=n.options.selectionEnd,o._updateTooltip(r))},_focusWithMouse:function(t){var n=this,i=(t=e(t)).is(B)?t.index():0;window.setTimeout(function(){n.wrapper.find(B)[2==i?1:0].focus()},1),n._setTooltipTimeout()},_blur:function(t){var n=this,i=n._activeHandleDrag;e(t.target).removeClass(O+" "+N),i&&(i._removeTooltip(),delete n._activeHandleDrag,delete n._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){var e;window.clearTimeout(this._tooltipTimeout),(e=this._drag||this._activeHandleDrag)&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._form=r.on("reset",v(t._formResetHandler,t)))},destroy:function(){this._form&&this._form.off("reset",this._formResetHandler),h.fn.destroy.call(this)}}),Q=Y.extend({init:function(n,i){var r,a=this;n.type="text",i=f({},{value:s(n,"value"),min:s(n,"min"),max:s(n,"max"),smallStep:s(n,"step")},i),n=e(n),i&&i.enabled===t&&(i.enabled=!n.is("[disabled]")),Y.fn.init.call(a,n,i),l((i=a.options).value)&&null!==i.value||(i.value=i.min,n.prop("value",o(i.min))),i.value=y.max(y.min(i.value,i.max),i.min),r=a.wrapper.find(B),new Q.Selection(r,a,i),a._drag=new Q.Drag(r,"",a,i)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(n){var i,r,o,a=this,s=a.options;a.disable(),!1!==n&&(a.wrapper.removeClass(U).addClass(V),a.wrapper.find("input").removeAttr(j),i=function(n){var i,r,o,s=$(n)[0];if(s){if(i=a._isHorizontal?s.location.pageX:s.location.pageY,r=a._getDraggableArea(),(o=e(n.target)).hasClass("k-draghandle"))return o.addClass(O+" "+N),t;a._update(a._getValueFromPosition(i,r)),a._focusWithMouse(n.target),a._drag.dragstart(n),n.preventDefault()}},a.wrapper.find(H+", "+z).on(D,i).end().on(D,function(){e(document.documentElement).one("selectstart",d.preventDefault)}).on(M,function(){a._drag._end()}),a.wrapper.find(B).attr(G,0).on(A,function(){a._setTooltipTimeout()}).on(R,function(e){a._focusWithMouse(e.target),e.preventDefault()}).on(L,v(a._focus,a)).on(F,v(a._blur,a)),r=v(function(e){var t=a._nextValueByIndex(a._valueIndex+1*e);a._setValueInRange(t),a._drag._updateTooltip(t)},a),s.showButtons&&(o=v(function(e,t){this._clearTooltipTimeout(),(1===e.which||b.touch&&0===e.which)&&(r(t),this.timeout=setTimeout(v(function(){this.timer=setInterval(function(){r(t)},60)},this),200))},a),a.wrapper.find(".k-button").on(A,v(function(e){this._clearTimer(),a._focusWithMouse(e.target)},a)).on(P,function(t){e(t.currentTarget).addClass("k-state-hover")}).on("mouseout"+T,v(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},a)).eq(0).on(S,v(function(e){o(e,1)},a)).click(!1).end().eq(1).on(S,v(function(e){o(e,-1)},a)).click(d.preventDefault)),a.wrapper.find(B).off(I,!1).on(I,v(this._keydown,a)),s.enabled=!0)},disable:function(){var t=this;t.wrapper.removeClass(V).addClass(U),e(t.element).prop(j,j),t.wrapper.find(".k-button").off(S).on(S,d.preventDefault).off(A).on(A,d.preventDefault).off("mouseleave"+T).on("mouseleave"+T,d.preventDefault).off(P).on(P,d.preventDefault),t.wrapper.find(H+", "+z).off(D).off(M),t.wrapper.find(B).attr(G,-1).off(A).off(I).off(R).off(L).off(F),t.options.enabled=!1},_update:function(e){var t=this,n=t.value()!=e;t.value(e),n&&t.trigger(x,{value:t.options.value})},value:function(e){var n=this,i=n.options;return e=a(e),isNaN(e)?i.value:(e>=i.min&&i.max>=e&&i.value!=e&&(n.element.prop("value",o(e)),i.value=e,n._refreshAriaAttr(e),n._refresh()),t)},_refresh:function(){this.trigger(E,{value:this.options.value})},_refreshAriaAttr:function(e){var t,n=this._drag;t=n&&n._tooltipDiv?n._tooltipDiv.text():this._getFormattedValue(e,null),this.wrapper.find(B).attr("aria-valuenow",e).attr("aria-valuetext",t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){var t=this;e.keyCode in t._keyMap&&(t._clearTooltipTimeout(),t._setValueInRange(t._keyMap[e.keyCode](t.options.value)),t._drag._updateTooltip(t.value()),e.preventDefault())},_setValueInRange:function(e){var n=this,i=n.options;return e=a(e),isNaN(e)?(n._update(i.min),t):(e=y.max(y.min(e,i.max),i.min),n._update(e),t)},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[y.max(0,y.min(e,t-1))]},_formResetHandler:function(){var e=this,t=e.options.min;setTimeout(function(){var n=e.element[0].value;e.value(""===n||isNaN(n)?t:n)})},destroy:function(){var e=this;Y.fn.destroy.call(e),e.wrapper.off(T).find(".k-button").off(T).end().find(B).off(T).end().find(H+", "+z).off(T).end(),e._drag.draggable.destroy(),e._drag._removeTooltip(!0)}});Q.Selection=function(e,t,n){function i(i){var r=i-n.min,o=t._valueIndex=y.ceil(a(r/n.smallStep)),s=parseInt(t._pixelSteps[o],10),l=t._trackDiv.find(".k-slider-selection"),c=parseInt(e[t._outerSize]()/2,10),u=t._isRtl?2:0;l[t._sizeFn](t._isRtl?t._maxSelection-s:s),e.css(t._position,s-c-u)}i(n.value),t.bind([x,C,E],function(e){i(parseFloat(e.value,10))})},Q.Drag=function(e,t,n,i){var r=this;r.owner=n,r.options=i,r.element=e,r.type=t,r.draggable=new p(e,{distance:0,dragstart:v(r._dragstart,r),drag:v(r.drag,r),dragend:v(r.dragend,r),dragcancel:v(r.dragcancel,r)}),e.click(!1)},Q.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this.draggable.userEvents._start(e)},_dragstart:function(n){var i=this,r=i.owner,o=i.options;return o.enabled?(this.owner._activeDragHandle=this,r.element.off(P),r.wrapper.find("."+O).removeClass(O+" "+N),i.element.addClass(O+" "+N),e(document.documentElement).css("cursor","pointer"),i.dragableArea=r._getDraggableArea(),i.step=y.max(o.smallStep*(r._maxSelection/r._distance),0),i.type?(i.selectionStart=o.selectionStart,i.selectionEnd=o.selectionEnd,r._setZIndex(i.type)):i.oldVal=i.val=o.value,i._removeTooltip(!0),i._createTooltip(),t):(n.preventDefault(),t)},_createTooltip:function(){var t,n=this,i=n.owner,r=n.options.tooltip,o="",a=e(window);r.enabled&&(r.template&&(n.tooltipTemplate=d.template(r.template)),e(".k-slider-tooltip").remove(),n.tooltipDiv=e("<div class='k-widget k-tooltip k-slider-tooltip'>\x3c!-- --\x3e</div>").appendTo(document.body),o=i._getFormattedValue(n.val||i.value(),n),n.type||(t="k-callout-"+(i._isHorizontal?"s":"e"),n.tooltipInnerDiv="<div class='k-callout "+t+"'>\x3c!-- --\x3e</div>",o+=n.tooltipInnerDiv),n.tooltipDiv.html(o),n._scrollOffset={top:a.scrollTop(),left:a.scrollLeft()},n.moveTooltip())},drag:function(e){var t,n=this,i=n.owner,r=e.x.location,o=e.y.location,a=n.dragableArea.startPoint,s=n.dragableArea.endPoint;e.preventDefault(),n.val=i._isHorizontal?i._isRtl?n.constrainValue(r,a,s,s>r):n.constrainValue(r,a,s,r>=s):n.constrainValue(o,s,a,s>=o),n.oldVal!=n.val&&(n.oldVal=n.val,n.type?("firstHandle"==n.type?n.selectionStart=n.selectionEnd>n.val?n.val:n.selectionEnd=n.val:n.val>n.selectionStart?n.selectionEnd=n.val:n.selectionStart=n.selectionEnd=n.val,t={values:[n.selectionStart,n.selectionEnd],value:[n.selectionStart,n.selectionEnd]}):t={value:n.val},i.trigger(C,t)),n._updateTooltip(n.val)},_updateTooltip:function(e){var t=this,n="";t.options.tooltip.enabled&&(t.tooltipDiv||t._createTooltip(),n=t.owner._getFormattedValue(a(e),t),t.type||(n+=t.tooltipInnerDiv),t.tooltipDiv.html(n),t.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this,n=t.owner;return e(document.documentElement).css("cursor",""),t.type?n._update(t.selectionStart,t.selectionEnd):(n._update(t.val),t.draggable.userEvents._disposeAll()),t._end()},_end:function(){var e=this.owner;return e._focusWithMouse(this.element),e.element.on(P),!1},_removeTooltip:function(t){var n=this,i=n.owner;n.tooltipDiv&&i.options.tooltip.enabled&&i.options.enabled&&(t?(n.tooltipDiv.remove(),n.tooltipDiv=null):n.tooltipDiv.fadeOut("slow",function(){e(this).remove(),n.tooltipDiv=null}))},moveTooltip:function(){var t,n,i,r,o=this,a=o.owner,s=0,l=0,c=o.element,u=d.getOffset(c),h=e(window),p=o.tooltipDiv.find(".k-callout"),f=o.tooltipDiv.outerWidth(),g=o.tooltipDiv.outerHeight();o.type?(t=a.wrapper.find(B),u=d.getOffset(t.eq(0)),n=d.getOffset(t.eq(1)),a._isHorizontal?(s=n.top,l=u.left+(n.left-u.left)/2):(s=u.top+(n.top-u.top)/2,l=n.left),r=t.eq(0).outerWidth()+16):(s=u.top,l=u.left,r=c.outerWidth()+16),a._isHorizontal?(l-=parseInt((f-c[a._outerSize]())/2,10),s-=g+p.height()+8):(s-=parseInt((g-c[a._outerSize]())/2,10),l-=f+p.width()+8),a._isHorizontal?(s+=i=o._flip(s,g,r,h.outerHeight()+o._scrollOffset.top),l+=o._fit(l,f,h.outerWidth()+o._scrollOffset.left)):(i=o._flip(l,f,r,h.outerWidth()+o._scrollOffset.left),s+=o._fit(s,g,h.outerHeight()+o._scrollOffset.top),l+=i),i>0&&p&&(p.removeClass(),p.addClass("k-callout k-callout-"+(a._isHorizontal?"n":"w"))),o.tooltipDiv.css({top:s,left:l})},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i){var r=0;return e+t>i&&(r+=-(n+t)),0>e+r&&(r+=n+t),r},constrainValue:function(e,t,n,i){var r=this;return e>t&&n>e?r.owner._getValueFromPosition(e,r.dragableArea):i?r.options.max:r.options.min}},d.ui.plugin(Q),(u=Y.extend({init:function(n,i){var r,a=this,c=e(n).find("input"),d=c.eq(0)[0],h=c.eq(1)[0];d.type="text",h.type="text",i&&i.showButtons&&(window.console&&window.console.warn("showbuttons option is not supported for the range slider, ignoring"),i.showButtons=!1),(i=f({},{selectionStart:s(d,"value"),min:s(d,"min"),max:s(d,"max"),smallStep:s(d,"step")},{selectionEnd:s(h,"value"),min:s(h,"min"),max:s(h,"max"),smallStep:s(h,"step")},i))&&i.enabled===t&&(i.enabled=!c.is("[disabled]")),Y.fn.init.call(a,n,i),l((i=a.options).selectionStart)&&null!==i.selectionStart||(i.selectionStart=i.min,c.eq(0).prop("value",o(i.min))),l(i.selectionEnd)&&null!==i.selectionEnd||(i.selectionEnd=i.max,c.eq(1).prop("value",o(i.max))),r=a.wrapper.find(B),new u.Selection(r,a,i),a._firstHandleDrag=new Q.Drag(r.eq(0),"firstHandle",a,i),a._lastHandleDrag=new Q.Drag(r.eq(1),"lastHandle",a,i)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(n){var i,r=this,o=r.options;r.disable(),!1!==n&&(r.wrapper.removeClass(U).addClass(V),r.wrapper.find("input").removeAttr(j),i=function(n){var i,a,s,l,c,u,d,h=$(n)[0];if(h){if(i=r._isHorizontal?h.location.pageX:h.location.pageY,a=r._getDraggableArea(),s=r._getValueFromPosition(i,a),(l=e(n.target)).hasClass("k-draghandle"))return r.wrapper.find("."+O).removeClass(O+" "+N),l.addClass(O+" "+N),t;o.selectionStart>s?(c=s,u=o.selectionEnd,d=r._firstHandleDrag):s>r.selectionEnd?(c=o.selectionStart,u=s,d=r._lastHandleDrag):o.selectionEnd-s>=s-o.selectionStart?(c=s,u=o.selectionEnd,d=r._firstHandleDrag):(c=o.selectionStart,u=s,d=r._lastHandleDrag),d.dragstart(n),r._setValueInRange(c,u),r._focusWithMouse(d.element)}},r.wrapper.find(H+", "+z).on(D,i).end().on(D,function(){e(document.documentElement).one("selectstart",d.preventDefault)}).on(M,function(){r._activeDragHandle&&r._activeDragHandle._end()}),r.wrapper.find(B).attr(G,0).on(A,function(){r._setTooltipTimeout()}).on(R,function(e){r._focusWithMouse(e.target),e.preventDefault()}).on(L,v(r._focus,r)).on(F,v(r._blur,r)),r.wrapper.find(B).off(I,d.preventDefault).eq(0).on(I,v(function(e){this._keydown(e,"firstHandle")},r)).end().eq(1).on(I,v(function(e){this._keydown(e,"lastHandle")},r)),r.options.enabled=!0)},disable:function(){var e=this;e.wrapper.removeClass(V).addClass(U),e.wrapper.find("input").prop(j,j),e.wrapper.find(H+", "+z).off(D).off(M),e.wrapper.find(B).attr(G,-1).off(A).off(I).off(R).off(L).off(F),e.options.enabled=!1},_keydown:function(e,t){var n,i,r,o=this,s=o.options.selectionStart,l=o.options.selectionEnd;e.keyCode in o._keyMap&&(o._clearTooltipTimeout(),"firstHandle"==t?(r=o._activeHandleDrag=o._firstHandleDrag,(s=o._keyMap[e.keyCode](s))>l&&(l=s)):(r=o._activeHandleDrag=o._lastHandleDrag,s>(l=o._keyMap[e.keyCode](l))&&(s=l)),o._setValueInRange(a(s),a(l)),n=Math.max(s,o.options.selectionStart),i=Math.min(l,o.options.selectionEnd),r.selectionEnd=Math.max(i,o.options.selectionStart),r.selectionStart=Math.min(n,o.options.selectionEnd),r._updateTooltip(o.value()[o._activeHandle]),e.preventDefault())},_update:function(e,t){var n=this,i=n.value(),r=i[0]!=e||i[1]!=t;n.value([e,t]),r&&n.trigger(x,{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,n){var i=this,r=i.options,s=r.selectionStart,l=r.selectionEnd;return isNaN(e)&&isNaN(n)?[s,l]:(e=a(e),n=a(n),e>=r.min&&r.max>=e&&n>=r.min&&r.max>=n&&n>=e&&(s!=e||l!=n)&&(i.element.find("input").eq(0).prop("value",o(e)).end().eq(1).prop("value",o(n)),r.selectionStart=e,r.selectionEnd=n,i._refresh(),i._refreshAriaAttr(e,n)),t)},values:function(e,t){return _(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this,t=e.options;e.trigger(E,{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}),t.selectionStart==t.max&&t.selectionEnd==t.max&&e._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var n,i=this,r=i.wrapper.find(B),o=i._activeHandleDrag;n=i._getFormattedValue([e,t],o),r.eq(0).attr("aria-valuenow",e),r.eq(1).attr("aria-valuenow",t),r.attr("aria-valuetext",n)},_setValueInRange:function(e,t){var n=this.options;e=y.max(y.min(e,n.max),n.min),t=y.max(y.min(t,n.max),n.min),e==n.max&&t==n.max&&this._setZIndex("firstHandle"),this._update(y.min(e,t),y.max(e,t))},_setZIndex:function(t){this.wrapper.find(B).each(function(n){e(this).css("z-index","firstHandle"==t?1-n:n)})},_formResetHandler:function(){var e=this,t=e.options;setTimeout(function(){var n=e.element.find("input"),i=n[0].value,r=n[1].value;e.values(""===i||isNaN(i)?t.min:i,""===r||isNaN(r)?t.max:r)})},destroy:function(){var e=this;Y.fn.destroy.call(e),e.wrapper.off(T).find(H+", "+z).off(T).end().find(B).off(T),e._firstHandleDrag.draggable.destroy(),e._lastHandleDrag.draggable.destroy()}})).Selection=function(e,t,n){function i(i){var r=(i=i||[])[0]-n.min,o=i[1]-n.min,s=y.ceil(a(r/n.smallStep)),l=y.ceil(a(o/n.smallStep)),c=t._pixelSteps[s],u=t._pixelSteps[l],d=parseInt(e.eq(0)[t._outerSize]()/2,10),h=t._isRtl?2:0;e.eq(0).css(t._position,c-d-h).end().eq(1).css(t._position,u-d-h),function(e,n){var i,r,o=t._trackDiv.find(".k-slider-selection");i=y.abs(e-n),o[t._sizeFn](i),t._isRtl?(r=y.max(e,n),o.css("right",t._maxSelection-r-1)):(r=y.min(e,n),o.css(t._position,r-1))}(c,u)}i(t.value()),t.bind([x,C,E],function(e){i(e.values)})},d.ui.plugin(u)}(window.kendo.jQuery),function(e,t,n){function i(e,t,n){(n=u(n))&&!n.equals(e.color())&&("change"==t&&(e._value=n),n=1!=n.a?n.toCssRgba():n.toCss(),e.trigger(t,{value:n}))}function r(e,t,n){var i,r;return i=(e=Array.prototype.slice.call(e)).length,0>(r=e.indexOf(t))?0>n?e[i-1]:e[0]:(0>(r+=n)?r+=i:r%=i,e[r])}function o(e){e.preventDefault()}function a(e,t){return function(){return e.apply(t,arguments)}}var s=window.kendo,l=s.ui,c=l.Widget,u=s.parseColor,d=s.Color,h=s.keys,p="background-color",f="k-state-selected",g={apply:"Apply",cancel:"Cancel"},m=".kendoColorTools",v="click"+m,_="keydown"+m,y=s.support.browser,b=y.msie&&9>y.version,w=c.extend({init:function(e,t){var n,i=this;c.fn.init.call(i,e,t),e=i.element,t=i.options,i._value=t.value=u(t.value),i._tabIndex=e.attr("tabIndex")||0,(n=i._ariaId=t.ariaId)&&e.attr("aria-labelledby",n),t._standalone&&(i._triggerSelect=i._triggerChange)},options:{name:"ColorSelector",value:null,_standalone:!0},events:["change","select","cancel"],color:function(e){return e!==n&&(this._value=u(e),this._updateUI(this._value)),this._value},value:function(e){return(e=this.color(e))&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(t){0===arguments.length&&(t=!0),e(".k-disabled-overlay",this.wrapper).remove(),t||this.wrapper.append("<div class='k-disabled-overlay'></div>"),this._onEnable(t)},_select:function(e,t){var n=this._value;e=this.color(e),t||(this.element.trigger("change"),e.equals(n)?this._standalone||this.trigger("cancel"):this.trigger("change",{value:this.value()}))},_triggerSelect:function(e){i(this,"select",e)},_triggerChange:function(e){i(this,"change",e)},destroy:function(){this.element&&this.element.off(m),this.wrapper&&this.wrapper.off(m).find("*").off(m),this.wrapper=null,c.fn.destroy.call(this)},_updateUI:e.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}}),k=w.extend({init:function(t,n){var i,r,o,l,c=this;if(w.fn.init.call(c,t,n),t=c.wrapper=c.element,"websafe"==(i=(n=c.options).palette)?(i="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",n.columns=18):"basic"==i&&(i="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7"),"string"==typeof i&&(i=i.split(",")),e.isArray(i)&&(i=e.map(i,function(e){return u(e)})),c._selectedID=(n.ariaId||s.guid())+"_selected",t.addClass("k-widget k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(e(c._template({colors:i,columns:n.columns,tileSize:n.tileSize,value:c._value,id:n.ariaId}))).on(v,".k-item",function(t){c._select(e(t.currentTarget).css(p))}).attr("tabIndex",c._tabIndex).on(_,a(c._keydown,c)),r=n.tileSize){if(/number|string/.test(typeof r))o=l=parseFloat(r);else{if("object"!=typeof r)throw Error("Unsupported value for the 'tileSize' argument");o=parseFloat(r.width),l=parseFloat(r.height)}t.find(".k-item").css({width:o,height:l})}},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){e?this.wrapper.attr("tabIndex",this._tabIndex):this.wrapper.removeAttr("tabIndex")},_keydown:function(t){var n,i,a=this.wrapper.find(".k-item"),s=a.filter("."+f).get(0),l=t.keyCode;if(l==h.LEFT?n=r(a,s,-1):l==h.RIGHT?n=r(a,s,1):l==h.DOWN?n=r(a,s,this.options.columns):l==h.UP?n=r(a,s,-this.options.columns):l==h.ENTER?(o(t),s&&this._select(e(s).css(p))):l==h.ESC&&this._cancel(),n){o(t),this._current(n);try{i=u(n.css(p)),this._triggerSelect(i)}catch(e){}}},_current:function(t){this.wrapper.find("."+f).removeClass(f).attr("aria-selected",!1).removeAttr("id"),e(t).addClass(f).attr("aria-selected",!0).attr("id",this._selectedID),this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(t){var i=null;this.wrapper.find(".k-item").each(function(){var r=u(e(this).css(p));return r&&r.equals(t)?(i=this,!1):n}),this._current(i)},_template:s.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " '+f+'" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>')}),x=w.extend({init:function(t,n){var i=this;w.fn.init.call(i,t,n),n=i.options,t=i.element,i.wrapper=t.addClass("k-widget k-flatcolorpicker").append(i._template(n)),i._hueElements=e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",t),i._selectedColor=e(".k-selected-color-display",t),i._colorAsText=e("input.k-color-value",t),i._sliders(),i._hsvArea(),i._updateUI(i._value||u("#f00")),t.find("input.k-color-value").on(_,function(t){var n,r,o=this;if(t.keyCode==h.ENTER)try{n=u(o.value),r=i.color(),i._select(n,n.equals(r))}catch(t){e(o).addClass("k-state-error")}else i.options.autoupdate&&setTimeout(function(){var e=u(o.value,!0);e&&i._updateUI(e,!0)},10)}).end().on(v,".k-controls button.apply",function(){i._select(i._getHSV())}).on(v,".k-controls button.cancel",function(){i._updateUI(i.color()),i._cancel()}),b&&i._applyIEFilter()},destroy:function(){this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null,w.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,autoupdate:!0,messages:g},_applyIEFilter:function(){var e=this.element.find(".k-hue-slider .k-slider-track")[0],t=e.currentStyle.backgroundImage;t=t.replace(/^url\([\'\"]?|[\'\"]?\)$/g,""),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"},_sliders:function(){function e(e){n._updateUI(n._getHSV(e.value,null,null,null))}function t(e){n._updateUI(n._getHSV(null,null,null,e.value/100))}var n=this,i=n.element;n._hueSlider=i.find(".k-hue-slider").kendoSlider({min:0,max:359,tickPlacement:"none",showButtons:!1,slide:e,change:e}).data("kendoSlider"),n._opacitySlider=i.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,slide:t,change:t}).data("kendoSlider")},_hsvArea:function(){function e(e,n){var i=this.offset,r=e-i.left,o=n-i.top,a=this.width,s=this.height;r=0>r?0:r>a?a:r,o=0>o?0:o>s?s:o,t._svChange(r/a,1-o/s)}var t=this,n=t.element.find(".k-hsv-rectangle"),i=n.find(".k-draghandle").attr("tabIndex",0).on(_,a(t._keydown,t));t._hsvEvents=new s.UserEvents(n,{global:!0,press:function(t){this.offset=s.getOffset(n),this.width=n.width(),this.height=n.height(),i.focus(),e.call(this,t.x.location,t.y.location)},start:function(){n.addClass("k-dragging"),i.focus()},move:function(t){t.preventDefault(),e.call(this,t.x.location,t.y.location)},end:function(){n.removeClass("k-dragging")}}),t._hsvRect=n,t._hsvHandle=i},_onEnable:function(e){this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");e?t.attr("tabIndex",this._tabIndex):t.removeAttr("tabIndex")},_keydown:function(e){function t(t,n){var r=i._getHSV();r[t]+=n*(e.shiftKey?.01:.05),0>r[t]&&(r[t]=0),r[t]>1&&(r[t]=1),i._updateUI(r),o(e)}function n(t){var n=i._getHSV();n.h+=t*(e.shiftKey?1:5),0>n.h&&(n.h=0),n.h>359&&(n.h=359),i._updateUI(n),o(e)}var i=this;switch(e.keyCode){case h.LEFT:e.ctrlKey?n(-1):t("s",-1);break;case h.RIGHT:e.ctrlKey?n(1):t("s",1);break;case h.UP:t(e.ctrlKey&&i._opacitySlider?"a":"v",1);break;case h.DOWN:t(e.ctrlKey&&i._opacitySlider?"a":"v",-1);break;case h.ENTER:i._select(i._getHSV());break;case h.F2:i.wrapper.find("input.k-color-value").focus().select();break;case h.ESC:i._cancel()}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,n,i){var r=this._hsvRect,o=r.width(),a=r.height(),s=this._hsvHandle.position();return null==e&&(e=this._hueSlider.value()),null==t&&(t=s.left/o),null==n&&(n=1-s.top/a),null==i&&(i=this._opacitySlider?this._opacitySlider.value()/100:1),d.fromHSV(e,t,n,i)},_svChange:function(e,t){var n=this._getHSV(null,e,t,null);this._updateUI(n)},_updateUI:function(e,t){var n=this,i=n._hsvRect;e&&(this._colorAsText.removeClass("k-state-error"),n._selectedColor.css(p,e.toDisplay()),t||n._colorAsText.val(n._opacitySlider?e.toCssRgba():e.toCss()),n._triggerSelect(e),e=e.toHSV(),n._hsvHandle.css({left:e.s*i.width()+"px",top:(1-e.v)*i.height()+"px"}),n._hueElements.css(p,d.fromHSV(e.h,1,1,1).toCss()),n._hueSlider.value(e.h),n._opacitySlider&&n._opacitySlider.value(100*e.a))},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:s.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><input class="k-color-value" #= !data.input ? \'style="visibility: hidden;"\' : "" #></div></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')}),C=c.extend({init:function(t,n){var i,r,o,a,s,l=this;c.fn.init.call(l,t,n),n=l.options,i=(t=l.element).attr("value")||t.val(),i=u(i||n.value,!0),l._value=n.value=i,r=l.wrapper=e(l._template(n)),t.hide().after(r),t.is("input")&&(t.appendTo(r),o=t.closest("label"),(a=t.attr("id"))&&(o=o.add('label[for="'+a+'"]')),o.click(function(e){l.open(),e.preventDefault()})),l._tabIndex=t.attr("tabIndex")||0,l.enable(!t.attr("disabled")),(s=t.attr("accesskey"))&&(t.attr("accesskey",null),r.attr("accesskey",s)),l.bind("activate",function(e){e.isDefaultPrevented()||l.toggle()}),l._updateUI(i)},destroy:function(){this.wrapper.off(m).find("*").off(m),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,c.fn.destroy.call(this)},enable:function(e){var t=this,n=t.wrapper,i=n.children(".k-picker-wrap"),r=i.find(".k-select");0===arguments.length&&(e=!0),t.element.attr("disabled",!e),n.attr("aria-disabled",!e),r.off(m).on("mousedown"+m,o),n.addClass("k-state-disabled").removeAttr("tabIndex").add("*",n).off(m),e&&n.removeClass("k-state-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+m,function(){i.addClass("k-state-hover")}).on("mouseleave"+m,function(){i.removeClass("k-state-hover")}).on("focus"+m,function(){i.addClass("k-state-focused")}).on("blur"+m,function(){i.removeClass("k-state-focused")}).on(_,a(t._keydown,t)).on(v,".k-select",a(t.toggle,t)).on(v,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")})},_template:s.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"></span># } #<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:g,opacity:!1,buttons:!0,preview:!0,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){this._getPopup().open()},close:function(){this._getPopup().close()},toggle:function(){this._getPopup().toggle()},color:w.fn.color,value:w.fn.value,_select:w.fn._select,_triggerSelect:w.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){var t="";e&&(t=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(t)),this._ariaTemplate||(this._ariaTemplate=s.template(this.options.ARIATemplate)),this.wrapper.attr("aria-label",this._ariaTemplate(t)),this._triggerSelect(e),this.wrapper.find(".k-selected-color").css(p,e?e.toDisplay():"transparent")},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==h.ESC?this._selector._cancel():this._selector._keydown(e),o(e)):(t==h.ENTER||t==h.DOWN)&&(this.open(),o(e))},_getPopup:function(){var t,i,r,o,a=this,l=a._popup;return l||(i=(t=a.options).palette?k:x,t._standalone=!1,delete t.select,delete t.change,delete t.cancel,r=s.guid(),o=a._selector=new i(e('<div id="'+r+'"/>').appendTo(document.body),t),a.wrapper.attr("aria-owns",r),a._popup=l=o.wrapper.kendoPopup({anchor:a.wrapper,adjustSize:{width:5,height:0}}).data("kendoPopup"),o.bind({select:function(e){a._updateUI(u(e.value))},change:function(){a._select(o.color()),a.close()},cancel:function(){a.close()}}),l.bind({close:function(e){if(a.trigger("close"))return e.preventDefault(),n;a.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var t=o._selectOnHide();t?a._select(t):(a.wrapper.focus(),a._updateUI(a.color()))},open:function(e){a.trigger("open")?e.preventDefault():a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")},activate:function(){o._select(a.color(),!0),o.focus(),a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})),l}});l.plugin(k),l.plugin(x),l.plugin(C)}(jQuery,parseInt),function(e,t){function n(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}var i=window.kendo,r=i.caret,o=i.keys,a=i.ui,s=a.Widget,l=i._activeElement,c=i._extractFormat,u=i.parseFloat,d=i.support.placeholder,h=i.getCulture,p=i._round,f="change",g="disabled",m="readonly",v="spin",_=".kendoNumericTextBox",y="mouseenter"+_+" mouseleave.kendoNumericTextBox",b="k-state-default",w="k-state-focused",k="k-state-hover",x="focus",C=".",T="k-state-selected",S="k-state-disabled",D="aria-disabled",A="aria-readonly",M=/^(-)?(\d*)$/,E=null,I=e.proxy,R=e.extend,P=s.extend({init:function(n,r){var o,a,l,u,d=this,h=r&&r.step!==t;s.fn.init.call(d,n,r),r=d.options,n=d.element.on("focusout"+_,I(d._focusout,d)).attr("role","spinbutton"),r.placeholder=r.placeholder||n.attr("placeholder"),d._initialOptions=R({},r),d._reset(),d._wrapper(),d._arrows(),d._input(),i.support.mobileOS?d._text.on("touchend"+_+" "+x+_,function(){d._toggleText(!1),n.focus()}):d._text.on(x+_,I(d._click,d)),o=d.min(n.attr("min")),a=d.max(n.attr("max")),l=d._parse(n.attr("step")),r.min===E&&o!==E&&(r.min=o),r.max===E&&a!==E&&(r.max=a),h||l===E||(r.step=l),n.attr("aria-valuemin",r.min).attr("aria-valuemax",r.max),r.format=c(r.format),u=r.value,d.value(u!==E?u:n.val()),n.is("[disabled]")||e(d.element).parents("fieldset").is(":disabled")?d.enable(!1):d.readonly(n.is("[readonly]")),i.notify(d)},options:{name:"NumericTextBox",decimals:E,min:E,max:E,value:E,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[f,v],_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t._text.add(n),a=t._inputWrapper.off(y);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),n.off("keydown"+_).off("keypress"+_).off("paste"+_),r||i?(a.addClass(i?S:b).removeClass(i?b:S),o.attr(g,i).attr(m,r).attr(D,i).attr(A,r)):(a.addClass(b).removeClass(S).on(y,t._toggleHover),o.removeAttr(g).removeAttr(m).attr(D,!1).attr(A,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(T)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(T)}),t.element.on("keydown"+_,I(t._keydown,t)).on("keypress"+_,I(t._keypress,t)).on("paste"+_,I(t._paste,t)))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(_),e._upArrowEventHandler.destroy(),e._downArrowEventHandler.destroy(),e._form&&e._form.off("reset",e._resetHandler),s.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var n=this;return e===t?n._value:((e=n._parse(e))===n._adjust(e)&&(n._update(e),n._old=n._value),t)},focus:function(){this._focusin()},_adjust:function(e){var t=this.options,n=t.min,i=t.max;return e===E?e:(n!==E&&n>e?e=n:i!==E&&e>i&&(e=i),e)},_arrows:function(){var t,r=this,o=function(){clearTimeout(r._spinning),t.removeClass(T)},a=r.options,s=a.spinners,l=r.element;(t=l.siblings(".k-icon"))[0]||(t=e(n("n",a.upArrowText)+n("s",a.downArrowText)).insertAfter(l)).wrapAll('<span class="k-select"/>'),s||(t.parent().toggle(s),r._inputWrapper.addClass("k-expand-padding")),r._upArrow=t.eq(0),r._upArrowEventHandler=new i.UserEvents(r._upArrow,{release:o}),r._downArrow=t.eq(1),r._downArrowEventHandler=new i.UserEvents(r._downArrow,{release:o})},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var n,i,o,a=e.target,s=r(a)[0],l=a.value.substring(0,s),c=t._format(t.options.format),u=c[","],d=0;u&&(i=RegExp("\\"+u,"g"),o=RegExp("([\\d\\"+u+"]+)(\\"+c[C]+")?(\\d+)?")),o&&(n=o.exec(l)),n&&(d=n[0].replace(i,"").length,-1!=l.indexOf("(")&&0>t._value&&d++),t._focusin(),r(t.element[0],d)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t._typing||t.element.trigger(f),t.trigger(f)),t._typing=!1},_culture:function(e){return e||h(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(w),e._toggleText(!1),e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass(w).removeClass(k),e._blur()},_format:function(e,t){var n=this._culture(t).numberFormat;return(e=e.toLowerCase()).indexOf("c")>-1?n=n.currency:e.indexOf("p")>-1&&(n=n.percent),n},_input:function(){var t,n=this,i="k-formatted-value",r=n.element.addClass("k-input").show()[0],o=r.accessKey;(t=n.wrapper.find(C+i))[0]||(t=e('<input type="text"/>').insertBefore(r).addClass(i));try{r.setAttribute("type","text")}catch(e){r.type="text"}t[0].tabIndex=r.tabIndex,t[0].style.cssText=r.style.cssText,t[0].title=r.title,t.prop("placeholder",n.options.placeholder),o&&(t.attr("accesskey",o),r.accessKey=""),n._text=t.addClass(r.className)},_keydown:function(e){var t=this,n=e.keyCode;t._key=n,n==o.DOWN?t._step(-1):n==o.UP?t._step(1):n==o.ENTER?t._change(t.element.val()):t._typing=!0},_keypress:function(e){var t,n,i,a,s,l,c,u,d,h,p;0===e.which||e.metaKey||e.ctrlKey||e.keyCode===o.BACKSPACE||e.keyCode===o.ENTER||(n=(t=this).options.min,i=t.element,s=(a=r(i))[0],l=a[1],c=String.fromCharCode(e.which),u=t._format(t.options.format),d=t._key===o.NUMPAD_DOT,h=i.val(),d&&(c=u[C]),h=h.substring(0,s)+c+h.substring(l),(p=t._numericRegex(u).test(h))&&d?(i.val(h),r(i,s+c.length),e.preventDefault()):(null!==n&&n>=0&&"-"===h.charAt(0)||!p)&&e.preventDefault(),t._key=0)},_numericRegex:function(e){var t=this,n=e[C],i=t.options.decimals;return n===C&&(n="\\"+n),i===E&&(i=e.decimals),0===i?M:(t._separator!==n&&(t._separator=n,t._floatRegExp=RegExp("^(-)?(((\\d+("+n+"\\d*)?)|("+n+"\\d*)))?$")),t._floatRegExp)},_paste:function(e){var t=this,n=e.target,i=n.value;setTimeout(function(){t._parse(n.value)===E&&t._update(i)})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(((n=i._parse(n))||"step"!==e)&&(r[e]=n,i.element.attr("aria-value"+e,n).attr(e,n)),t)},_spin:function(e,t){var n=this;t=t||500,clearTimeout(n._spinning),n._spinning=setTimeout(function(){n._spin(e,50)},t),n._step(e)},_step:function(e){var t=this,n=t.element,i=t._parse(n.val())||0;l()!=n[0]&&t._focusin(),i+=t.options.step*e,t._update(t._adjust(i)),t._typing=!1,t.trigger(v)},_toggleHover:function(t){e(t.currentTarget).toggleClass(k,"mouseenter"===t.type)},_toggleText:function(e){this._text.toggle(e),this.element.toggle(!e)},_parse:function(e,t){return u(e,this._culture(t),this.options.format)},_update:function(e){var t,n=this,r=n.options,o=r.format,a=r.decimals,s=n._culture(),l=n._format(o,s);a===E&&(a=l.decimals),(t=(e=n._parse(e,s))!==E)&&(e=parseFloat(p(e,a))),n._value=e=n._adjust(e),n._placeholder(i.toString(e,o,s)),t?(-1!==(e=""+e).indexOf("e")&&(e=p(+e,a)),e=e.replace(C,l[C])):e="",n.element.val(e).attr("aria-valuenow",e)},_placeholder:function(e){this._text.val(e),d||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,n=this,i=n.element,r=i[0];(t=i.parents(".k-numerictextbox")).is("span.k-numerictextbox")||(t=(t=i.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent()).wrap("<span/>").parent()),t[0].style.cssText=r.style.cssText,r.style.width="",n.wrapper=t.addClass("k-widget k-numerictextbox").addClass(r.className).css("display",""),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value),t.max(t._initialOptions.max),t.min(t._initialOptions.min)})},t._form=r.on("reset",t._resetHandler))}});a.plugin(P)}(window.kendo.jQuery),function(e,t){function n(t,i){t.filters&&(t.filters=e.grep(t.filters,function(e){return n(e,i),e.filters?e.filters.length:e.field!=i}))}function i(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)o=(i=e[t]).text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function r(t,n){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=n}),t.filters.length):t.field!=n})}function o(n){return"and"==n.logic&&n.filters.length>1?[]:n.filters?e.map(n.filters,function(e){return o(e)}):null!==n.value&&n.value!==t?[n.value]:[]}function a(e,n){for(var i,r,o=s.getter(n,!0),a=[],l=0,c={};e.length>l;)(r=o(i=e[l++]))===t||null===r||c.hasOwnProperty(r)||(a.push(i),c[r]=!0);return a}var s=window.kendo,l=s.ui,c=e.proxy,u="kendoPopup",d="init",h="refresh",p="change",f=".kendoFilterMenu",g="Is equal to",m="Is not equal to",v={number:"numerictextbox",date:"datepicker"},_={string:"text",number:"number",date:"date"},y=s.isFunction,b=l.Widget,w=b.extend({init:function(t,n){var i,r,o,a,l=this,u="string";for(r in b.fn.init.call(l,t,n),i=l.operators=n.operators||{},t=l.element,(n=l.options).appendToElement||((o=t.addClass("k-with-icon k-filterable").find(".k-grid-filter"))[0]||(o=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),o.attr("tabindex",-1).on("click"+f,c(l._click,l))),l.link=o||e(),l.dataSource=n.dataSource,l.field=n.field||t.attr(s.attr("field")),l.model=l.dataSource.reader.model,l._parse=function(e){return e+""},l.model&&l.model.fields&&(a=l.model.fields[l.field])&&(u=a.type||"string",a.parse&&(l._parse=c(a.parse,a))),n.values&&(u="enums"),l.type=u,i=i[u]||n.operators[u])break;l._defaultFilter=function(){return{field:l.field,operator:r||"eq",value:""}},l._refreshHandler=c(l.refresh,l),l.dataSource.bind(p,l._refreshHandler),n.appendToElement?l._init():l.refresh()},_init:function(){var t,n=this,i=n.options.ui,r=y(i);n.pane=n.options.pane,n.pane&&(n._isMobile=!0),r||(t=i||v[n.type]),n._isMobile?n._createMobileForm(t):n._createForm(t),n.form.on("submit"+f,c(n._submit,n)).on("reset"+f,c(n._reset,n)),r&&n.form.find(".k-textbox").removeClass("k-textbox").each(function(){i(e(this))}),n.form.find("["+s.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+s.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+s.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+s.attr("role")+"=datepicker]").removeClass("k-textbox"),n.refresh(),n.trigger(d,{field:n.field,container:n.form}),s.cycleForm(n.form)},_createForm:function(t){var n=this,r=n.options,o=n.operators||{},a=n.type;o=o[a]||r.operators[a],n.form=e('<form class="k-filter-menu"/>').html(s.template("boolean"===a?'<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>':'<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>')({field:n.field,format:r.format,ns:s.ns,messages:r.messages,extra:r.extra,operators:o,type:a,role:t,values:i(r.values)})),r.appendToElement?(n.element.append(n.form),n.popup=n.element.closest(".k-popup").data(u)):n.popup=n.form[u]({anchor:n.link,open:c(n._open,n),activate:c(n._activate,n),close:function(){n.options.closeCallback&&n.options.closeCallback(n.element)}}).data(u),n.form.on("keydown"+f,c(n._keydown,n))},_createMobileForm:function(t){var n=this,r=n.options,o=n.operators||{},a=n.type;o=o[a]||r.operators[a],n.form=e("<div />").html(s.template("boolean"===a?'<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>':'<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>')({field:n.field,title:r.title||n.field,format:r.format,ns:s.ns,messages:r.messages,extra:r.extra,operators:o,type:a,role:t,useRole:!s.support.input.date&&"date"===a||"number"===a,inputType:_[a],values:i(r.values)})),n.view=n.pane.append(n.form.html()),n.form=n.view.element.find("form"),n.view.element.on("click",".k-submit",function(e){n.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){n._closeForm(),e.preventDefault()})},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=s.observable({logic:"and",filters:[e._defaultFilter(),e._defaultFilter()]}),e.form&&s.bind(e.form.children().first(),e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){var e=this;b.fn.destroy.call(e),e.form&&(s.unbind(e.form),s.destroy(e.form),e.form.unbind(f),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null),e.view&&(e.view.purge(),e.view=null),e.link.unbind(f),e._refreshHandler&&(e.dataSource.unbind(p,e._refreshHandler),e.dataSource=null),e.element=e.link=e._refreshHandler=e.filterModel=null},_bind:function(e){var t,n,i,r,o=this,a=e.filters,s=!1,l=0,c=o.filterModel;for(t=0,n=a.length;n>t;t++)(r=a[t]).field==o.field?(c.set("logic",e.logic),(i=c.filters[l])||(c.filters.push({field:o.field}),i=c.filters[l]),i.set("value",o._parse(r.value)),i.set("operator",r.operator),l++,s=!0):r.filters&&(s=s||o._bind(r));return s},_stripFilters:function(t){return e.grep(t,function(e){return""!==e.value&&null!=e.value})},_merge:function(e){var t,i,r,o=this,a=e.logic||"and",s=this._stripFilters(e.filters),l=o.dataSource.filter()||{filters:[],logic:"and"};for(n(l,o.field),i=0,r=s.length;r>i;i++)(t=s[i]).value=o._parse(t.value);return s.length&&(l.filters.length?(e.filters=s,"and"!==l.logic&&(l.filters=[{logic:l.logic,filters:l.filters}],l.logic="and"),l.filters.push(s.length>1?e:s[0])):(l.filters=s,l.logic=a)),l},filter:function(e){(e=this._merge(e)).filters.length&&this.dataSource.filter(e)},clear:function(){var t=this,n=t.dataSource.filter()||{filters:[]};n.filters=e.grep(n.filters,function(e){return e.filters?(e.filters=r(e.filters,t.field),e.filters.length):e.field!=t.field}),n.filters.length||(n=null),t.dataSource.filter(n)},_submit:function(e){e.preventDefault(),e.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){(t=e(this).data(u))&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==s.keys.ESC&&this.popup.close()},events:[d],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:g,neq:m,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:g,neq:m,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:g,neq:m,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:g,neq:m}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}}),k=".kendoFilterMultiCheck",x=s.data.DataSource,C=b.extend({init:function(t,n){var i,r;b.fn.init.call(this,t,n),n=this.options,this.element=e(t),i=this.field=this.options.field||this.element.attr(s.attr("field")),r=n.checkSource,this._foreignKeyValues()?(this.checkSource=x.create(n.values),this.checkSource.fetch()):n.forceUnique?(delete(r=n.dataSource.options).pageSize,this.checkSource=x.create(r),this.checkSource.reader.data=function(e,t){return function(n){return a(e(n),t)}}(this.checkSource.reader.data,this.field)):this.checkSource=x.create(r),this.dataSource=n.dataSource,this.model=this.dataSource.reader.model,this._parse=function(e){return e+""},this.model&&this.model.fields&&(i=this.model.fields[this.field])&&(i.parse&&(this._parse=c(i.parse,i)),this.type=i.type||"string"),n.appendToElement?this._init():this._createLink(),this._refreshHandler=c(this.refresh,this),this.dataSource.bind(p,this._refreshHandler)},_createLink:function(){var e=this.element,t=e.addClass("k-with-icon k-filterable").find(".k-grid-filter");t[0]||(t=e.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),this._link=t.attr("tabindex",-1).on("click"+f,c(this._click,this))},_init:function(){var e=this,t=this.options.forceUnique,n=this.options;this.pane=n.pane,this.pane&&(this._isMobile=!0),this._createForm(),this._foreignKeyValues()?this.refresh():t&&!this.checkSource.options.serverPaging&&this.dataSource.data().length?(this.checkSource.data(a(this.dataSource.data(),this.field)),this.refresh()):(this._attachProgress(),this.checkSource.fetch(function(){e.refresh.call(e)})),this.options.forceUnique||(this.checkChangeHandler=function(){e.container.empty(),e.refresh()},this.checkSource.bind(p,this.checkChangeHandler)),this.form.on("keydown"+k,c(this._keydown,this)).on("submit"+k,c(this._filter,this)).on("reset"+k,c(this._reset,this)),this.trigger(d,{field:this.field,container:this.form})},_attachProgress:function(){var e=this;this._progressHandler=function(){l.progress(e.container,!0)},this._progressHideHandler=function(){l.progress(e.container,!1)},this.checkSource.bind("progress",this._progressHandler).bind("change",this._progressHideHandler)},_createForm:function(){var t,n,i=this.options,r="<ul class='k-reset k-multicheck-wrap'></ul><button type='submit' class='k-button k-primary'>"+i.messages.filter+"</button>";r+="<button type='reset' class='k-button'>"+i.messages.clear+"</button>",this.form=e('<form class="k-filter-menu"/>').html(r),this.container=this.form.find(".k-multicheck-wrap"),this._isMobile?(this.view=this.pane.append(this.form.addClass("k-mobile-list").wrap("<div/>").parent().html()),t=this.view.element,this.form=t.find("form"),this.container=t.find(".k-multicheck-wrap"),n=this,t.on("click",".k-primary",function(e){n.form.submit(),e.preventDefault()}).on("click","[type=reset]",function(e){n._reset(),e.preventDefault()})):i.appendToElement?(this.popup=this.element.closest(".k-popup").data(u),this.element.append(this.form)):this.popup=this.form.kendoPopup({anchor:this._link}).data(u)},createCheckAllItem:function(){var t=this.options,n=s.template(t.itemTemplate({field:"all",mobile:this._isMobile})),i=e(n({all:t.messages.checkAll}));this.container.prepend(i),this.checkBoxAll=i.find(":checkbox").eq(0).addClass("k-check-all"),this.checkAllHandler=c(this.checkAll,this),this.checkBoxAll.on(p+k,this.checkAllHandler)},updateCheckAllState:function(){if(this.checkBoxAll){var e=this.container.find(":checkbox:not(.k-check-all)").length==this.container.find(":checked:not(.k-check-all)").length;this.checkBoxAll.prop("checked",e)}},refresh:function(e){var t=this.options.forceUnique,n=this.dataSource,i=this.getFilterArray();this._link&&this._link.toggleClass("k-state-active",0!==i.length),this.form&&(!e||!t||e.sender!==n||n.options.serverPaging||"itemchange"!=e.action&&"add"!=e.action&&"remove"!=e.action||this._foreignKeyValues()||(this.checkSource.data(a(this.dataSource.data(),this.field)),this.container.empty()),this.container.is(":empty")&&this.createCheckBoxes(),this.checkValues(i),this.trigger(h))},getFilterArray:function(){var t=e.extend(!0,{},{filters:[],logic:"and"},this.dataSource.filter());return function t(n,i){n.filters&&(n.filters=e.grep(n.filters,function(e){return t(e,i),e.filters?e.filters.length:e.field==i&&"eq"==e.operator}))}(t,this.field),o(t)},createCheckBoxes:function(){var e,t,n,i=this.options,r={field:this.field,format:i.format,mobile:this._isMobile,type:this.type};this.options.forceUnique?this._foreignKeyValues()?(e=this.checkSource.data(),r.valueField="value",r.field="text"):e=this.checkSource.data():e=this.checkSource.view(),t=s.template(i.itemTemplate(r)),n=s.render(t,e),i.checkAll&&(this.createCheckAllItem(),this.container.on(p+k,":checkbox",c(this.updateCheckAllState,this))),this.container.append(n)},checkAll:function(){var e=this.checkBoxAll.is(":checked");this.container.find(":checkbox").prop("checked",e)},checkValues:function(t){var n=this;e(e.grep(this.container.find(":checkbox").prop("checked",!1),function(i){var r,o,a=!1;if(!e(i).is(".k-check-all"))for(r=n._parse(e(i).val()),o=0;t.length>o;o++)if(a="date"==n.type?t[o].getTime()==r.getTime():t[o]==r)return a})).prop("checked",!0),this.updateCheckAllState()},_filter:function(t){var n,i;t.preventDefault(),t.stopPropagation(),i=this,(n={logic:"or"}).filters=e.map(this.form.find(":checkbox:checked:not(.k-check-all)"),function(t){return{value:e(t).val(),operator:"eq",field:i.field}}),(n=this._merge(n)).filters.length&&this.dataSource.filter(n),this._closeForm()},_stripFilters:function(t){return e.grep(t,function(e){return null!=e.value})},_foreignKeyValues:function(){var e=this.options;return e.values&&!e.checkSource},destroy:function(){var e=this;b.fn.destroy.call(e),e.form&&(s.unbind(e.form),s.destroy(e.form),e.form.unbind(k),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null,e.container&&(e.container.unbind(k),e.container=null),e.checkBoxAll&&e.checkBoxAll.unbind(k)),e.view&&(e.view.purge(),e.view=null),e._link&&e._link.unbind(f),e._refreshHandler&&(e.dataSource.unbind(p,e._refreshHandler),e.dataSource=null),e.checkChangeHandler&&e.checkSource.unbind(p,e.checkChangeHandler),e._progressHandler&&e.checkSource.unbind("progress",e._progressHandler),e._progressHideHandler&&e.checkSource.unbind("change",e._progressHideHandler),e.element=e.checkSource=e.container=e.checkBoxAll=e._link=e._refreshHandler=e.checkAllHandler=null},options:{name:"FilterMultiCheck",itemTemplate:function(e){var n=e.field,i=e.format,r=e.valueField,o=e.mobile,a="";return r===t&&(r=n),"date"==e.type&&(a=":yyyy-MM-ddTHH:mm:sszzz"),"<li class='k-item'><label class='k-label'><input type='checkbox' class='"+(o?"k-check":"")+"'  value='#:kendo.format('{0"+a+"}',"+r+")#'/>#:kendo.format('"+(i||"{0}")+"', "+n+")#</label></li>"},checkAll:!0,appendToElement:!1,messages:{checkAll:"Select All",clear:"Clear",filter:"Filter"},forceUnique:!0,animations:{left:"slide",right:"slide:right"}},events:[d,h]});e.extend(C.fn,{_click:w.fn._click,_keydown:w.fn._keydown,_reset:w.fn._reset,_closeForm:w.fn._closeForm,clear:w.fn.clear,_merge:w.fn._merge}),l.plugin(w),l.plugin(C)}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)}catch(e){return!1}}function i(t){(t=e(t)).addClass("k-item").children(w).addClass(M),t.children("a").addClass(C).children(w).addClass(M),t.filter(":not([disabled])").addClass(U),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(q).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+C).length||t.contents().filter(function(){return!(this.nodeName.match(y)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+C+"'/>"),r(t),o(t)}function r(t){(t=e(t)).find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(x+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function o(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(A),t.filter(".k-last:not(:last-child)").removeClass(T),t.filter(":first-child").addClass(A),t.filter(":last-child").addClass(T)}var a,s=window.kendo,l=s.ui,c=s._activeElement,u=s.support.touch&&s.support.mobileOS,d="mousedown",h="click",p=e.extend,f=e.proxy,g=e.each,m=s.template,v=s.keys,_=l.Widget,y=/^(ul|a|div)$/i,b=".kendoMenu",w="img",k="open",x="k-menu",C="k-link",T="k-last",S="close",D="timer",A="k-first",M="k-image",E="select",I="zIndex",R="activate",P="deactivate",L="touchstart"+b+" MSPointerDown"+b+" pointerdown"+b,F=s.support.pointers,B=s.support.msPointers,z=F?"pointerover":B?"MSPointerOver":"mouseenter",H=F?"pointerout":B?"MSPointerOut":"mouseleave",N=u||B||F,O=e(document.documentElement),V="kendoPopup",U="k-state-default",W="k-state-hover",j="k-state-focused",q="k-state-disabled",G=".k-menu",$=".k-menu-group",Y=$+",.k-animation-container",Q=":not(.k-list) > .k-item",X=".k-item:not(.k-state-disabled)",K=":not(.k-item.k-separator)",Z=K+":eq(0)",J=K+":last",ee={2:1,touch:1},te={content:m("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:m("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:m("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:m("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:m("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:m("<span class='#= arrowClass(item, group) #'></span>"),sprite:m("<span class='k-sprite #= spriteCssClass #'></span>"),empty:m("")},ne={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=!1===t.enabled?" k-state-disabled":" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(){return C},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){return"k-icon"+(t.horizontal?" k-i-arrow-s":" k-i-arrow-e")},text:function(e){return!1===e.encoded?e.text:s.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(e){return e.content?e.content:"&nbsp;"}},ie=_.extend({init:function(t,n){var i=this;_.fn.init.call(i,t,n),t=i.wrapper=i.element,n=i.options,i._initData(n),i._updateClasses(),i._animations(n),i.nextItemZIndex=100,i._tabindex(),i._focusProxy=f(i._focusHandler,i),t.on(L,X,i._focusProxy).on(h+b,".k-item.k-state-disabled",!1).on(h+b,X,f(i._click,i)).on("keydown"+b,f(i._keydown,i)).on("focus"+b,f(i._focus,i)).on("focus"+b,".k-content",f(i._focus,i)).on(L+" "+d+b,".k-content",f(i._preventClose,i)).on("blur"+b,f(i._removeHoverItem,i)).on("blur"+b,"[tabindex]",f(i._checkActiveElement,i)).on(z+b,X,f(i._mouseenter,i)).on(H+b,X,f(i._mouseleave,i)).on(z+b+" "+H+b+" "+d+b+" "+h+b,".k-item:not(.k-state-disabled) > .k-link",f(i._toggleHover,i)),n.openOnClick&&(i.clicked=!1,i._documentClickHandler=f(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=s.format("{0}_mn_active",t[0].id)),s.notify(i)},events:[k,S,R,P,E],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,popupCollision:t},_initData:function(e){var t=this;e.dataSource&&(t.angular("cleanup",function(){return{elements:t.element.children()}}),t.element.empty(),t.append(e.dataSource,t.element),t.angular("compile",function(){return{elements:t.element.children()}}))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=p(!0,t,e.animation),"dataSource"in e&&this._initData(e),this._updateClasses(),_.fn.setOptions.call(this,e)},destroy:function(){var t=this;_.fn.destroy.call(t),t.element.off(b),t._documentClickHandler&&e(document).unbind("click",t._documentClickHandler),s.destroy(t.element)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.length?t.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);return g(n.items,function(){n.group.append(this),r(this)}),r(t),o(n.group.find(".k-first, .k-last").add(n.items)),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return g(n.items,function(){t.before(this),r(this),o(this)}),o(t),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return g(n.items,function(){t.after(this),r(this),o(this)}),o(t),this},_insert:function(t,n,r){var o,a,s,l;return n&&n.length||(r=this.element),s=e.isPlainObject(t),l={firstLevel:r.hasClass(x),horizontal:r.hasClass(x+"-horizontal"),expanded:!0,length:r.children().length},n&&!r.length&&(r=e(ie.renderGroup({group:l})).appendTo(n)),s||e.isArray(t)?o=e(e.map(s?[t]:t,function(t,n){return"string"==typeof t?e(t).get():e(ie.renderItem({group:l,item:p(t,{index:n})})).get()})):(a=(o="string"==typeof t&&"<"!=t.charAt(0)?this.element.find(t):e(t)).find("> ul").addClass("k-menu-group").attr("role","menu"),(o=o.filter("li")).add(a.find("> li")).each(function(){i(this)})),{items:o,group:r}},remove:function(e){var t,n,i,a;return t=this,n=(e=this.element.find(e)).parentsUntil(t.element,Q),i=e.parent("ul:not(.k-menu)"),e.remove(),i&&!i.children(Q).length&&((a=i.parent(".k-animation-container")).length?a.remove():i.remove()),n.length&&(r(n=n.eq(0)),o(n)),t},open:function(n){var i=this,r=i.options,o="horizontal"==r.orientation,a=r.direction,l=s.support.isRtl(i.wrapper);return n=i.element.find(n),/^(top|bottom|default)$/.test(a)&&(a=l?o?(a+" left").replace("default","bottom"):"left":o?(a+" right").replace("default","bottom"):"right"),n.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),n.each(function(){var n=e(this);clearTimeout(n.data(D)),n.data(D,setTimeout(function(){var c,d,h,f,g,m,v,_,y=n.find(".k-menu-group:first:hidden");y[0]&&!1===i._triggerEvent({item:n[0],type:k})&&(!y.find(".k-menu-group")[0]&&y.children(".k-item").length>1?(d=e(window).height(),h=function(){y.css({maxHeight:d-(y.outerHeight()-y.height())-s.getShadows(y).bottom,overflow:"auto"})},s.support.browser.msie&&7>=s.support.browser.version?setTimeout(h,0):h()):y.css({maxHeight:"",overflow:""}),n.data(I,n.css(I)),n.css(I,i.nextItemZIndex++),c=y.data(V),g=(f=n.parent().hasClass(x))&&o,m=function(e,t,n){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",n?"right":"left"],position:["top",n?"right":"left"]};return/left|right/.test(e)?(i.origin=["top",e],i.position[1]=s.directions[e].reverse):(i.origin[0]=e,i.position[0]=s.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}(a,f,l),_=(v=r.animation.open.effects)!==t?v:"slideIn:"+function(e,t){return(e=e.split(" ")[!t+0]||e).replace("top","up").replace("bottom","down")}(a,f),c?((c=y.data(V)).options.origin=m.origin,c.options.position=m.position,c.options.animation.open.effects=_):c=y.kendoPopup({activate:function(){i._triggerEvent({item:this.wrapper.parent(),type:R})},deactivate:function(e){e.sender.element.removeData("targetTransform").css({opacity:""}),i._triggerEvent({item:this.wrapper.parent(),type:P})},origin:m.origin,position:m.position,collision:r.popupCollision!==t?r.popupCollision:g?"fit":"fit flip",anchor:n,appendTo:n,animation:{open:p(!0,{effects:_},r.animation.open),close:r.animation.close},close:function(e){var t=e.sender.wrapper.parent();i._triggerEvent({item:t[0],type:S})?e.preventDefault():(t.css(I,t.data(I)),t.removeData(I),u&&(t.removeClass(W),i._removeHoverItem()))}}).data(V),y.removeAttr("aria-hidden"),c.open())},i.options.hoverDelay))}),i},close:function(t,n){var i=this,r=i.element;return(t=r.find(t)).length||(t=r.find(">.k-item")),t.each(function(){var t=e(this);!n&&i._isRootItem(t)&&(i.clicked=!1),clearTimeout(t.data(D)),t.data(D,setTimeout(function(){var e=t.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(V);e&&(e.close(),e.element.attr("aria-hidden",!0))},i.options.hoverDelay))}),i},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(U,n).toggleClass(q,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var n=e(s.eventTarget(t)||t.target).closest(Q),i=t.type==z||-1!==d.indexOf(t.type);n.parents("li."+q).length||n.toggleClass(W,i||"mousedown"==t.type||"click"==t.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var i=this,r=e(t?t.currentTarget:this._hoverItem()),o=i._findRootParent(r)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!n(o,s._activeElement())&&t&&!n(o,t.currentTarget))&&i.close(o)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass(j)&&(e.removeClass(j),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element;t.removeClass("k-menu-horizontal k-menu-vertical"),t.addClass("k-widget k-reset k-header k-menu-init "+x).addClass(x+"-"+this.options.orientation),t.find("li > ul").filter(function(){return!s.support.matchesSelector.call(this,".k-menu-init div ul")}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-menu-group > li"),t.removeClass("k-menu-init"),e.each(function(){i(this)})},_mouseenter:function(t){var i=this,r=e(t.currentTarget),o=r.children(".k-animation-container").length||r.children($).length;t.delegateTarget==r.parents(G)[0]&&(i.options.openOnClick&&!i.clicked||u||(F||B)&&t.originalEvent.pointerType in ee&&i._isRootItem(r.closest(Q))||!n(t.currentTarget,t.relatedTarget)&&o&&i.open(r),(i.options.openOnClick&&i.clicked||N)&&r.siblings().each(f(function(e,t){i.close(t,!0)},i)))},_mouseleave:function(i){var r=e(i.currentTarget),o=r.children(".k-animation-container").length||r.children($).length;return r.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(i.stopImmediatePropagation(),t):(this.options.openOnClick||u||(F||B)&&i.originalEvent.pointerType in ee||n(i.currentTarget,i.relatedTarget||i.target)||!o||n(i.currentTarget,s._activeElement())||this.close(r),t)},_click:function(n){var i,r,o,a=this,l=a.options,c=e(s.eventTarget(n)),u=c[0]?c[0].nodeName.toUpperCase():"",d="INPUT"==u||"SELECT"==u||"BUTTON"==u||"LABEL"==u,h=c.closest("."+C),p=c.closest(Q),f=h.attr("href"),g=c.attr("href"),m=e("<a href='#' />").attr("href"),v=!!f&&f!==m,_=v&&!!f.match(/^#/),y=!!g&&g!==m,b=l.openOnClick&&o&&a._isRootItem(p);if(!c.closest("> div:not(.k-animation-container,.k-list-container)",p[0]).length){if(p.hasClass(q))return n.preventDefault(),t;if(n.handled||!a._triggerEvent({item:p[0],type:E})||d||n.preventDefault(),n.handled=!0,o=(r=p.children(Y)).is(":visible"),l.closeOnClick&&(!v||_)&&(!r.length||b))return p.removeClass(W).css("height"),a._oldHoverItem=a._findRootParent(p),a.close(h.parentsUntil(a.element,Q)),a.clicked=!1,-1!="MSPointerUp".indexOf(n.type)&&n.preventDefault(),t;v&&n.enterKey&&h[0].click(),(a._isRootItem(p)&&l.openOnClick||s.support.touch||(F||B)&&a._isRootItem(p.closest(Q)))&&(v||d||y||n.preventDefault(),a.clicked=!0,i=r.is(":visible")?S:k,(l.closeOnClick||i!=S)&&a[i](p))}},_documentClick:function(e){n(this.element[0],e.target)||(this.clicked=!1)},_focus:function(n){var i=this,r=n.target,o=i._hoverItem(),a=c();return r==i.wrapper[0]||e(r).is(":kendoFocusable")?(a===n.currentTarget&&(o.length?i._moveHover([],o):i._oldHoverItem||i._moveHover([],i.wrapper.children().first())),t):(n.stopPropagation(),e(r).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(j),i.wrapper.focus(),t)},_keydown:function(e){var n,i,r,o=this,a=e.keyCode,l=o._oldHoverItem,c=s.support.isRtl(o.wrapper);if(e.target==e.currentTarget||a==v.ESC){if(l||(l=o._oldHoverItem=o._hoverItem()),i=o._itemBelongsToVertival(l),r=o._itemHasChildren(l),a==v.RIGHT)n=o[c?"_itemLeft":"_itemRight"](l,i,r);else if(a==v.LEFT)n=o[c?"_itemRight":"_itemLeft"](l,i,r);else if(a==v.DOWN)n=o._itemDown(l,i,r);else if(a==v.UP)n=o._itemUp(l,i,r);else if(a==v.ESC)n=o._itemEsc(l,i);else if(a==v.ENTER||a==v.SPACEBAR)(n=l.children(".k-link")).length>0&&(o._click({target:n[0],preventDefault:function(){},enterKey:!0}),o._moveHover(l,o._findRootParent(l)));else if(a==v.TAB)return n=o._findRootParent(l),o._moveHover(l,n),o._checkActiveElement(),t;n&&n[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length&&e.parent().hasClass("k-menu-group")||t},_itemHasChildren:function(e){return!!e.length&&e.children("ul.k-menu-group, div.k-animation-container").length>0},_moveHover:function(t,n){var i=this,r=i._ariaId;t.length&&n.length&&t.removeClass(j),n.length&&(n[0].id&&(r=n[0].id),n.addClass(j),i._oldHoverItem=n,r&&(i.element.removeAttr("aria-activedescendant"),e("#"+r).removeAttr("id"),n.attr("id",r),i.element.attr("aria-activedescendant",r)))},_findRootParent:function(e){return this._isRootItem(e)?e:e.parentsUntil(G,"li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass(x)},_itemRight:function(e,t,n){var i,r,o=this;if(!e.hasClass(q))return t?n?(o.open(e),i=e.find(".k-menu-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),i=r.nextAll(Z)):(i=e.nextAll(Z)).length||(i=e.prevAll(J)),i&&!i.length?i=o.wrapper.children(".k-item").first():i||(i=[]),o._moveHover(e,i),i},_itemLeft:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._isRootItem(n)&&"horizontal"==i.options.orientation&&(n=n.prevAll(Z))):(n=e.prevAll(Z)).length||(n=e.nextAll(J)),n.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemDown:function(e,t,n){var i,r=this;if(t)i=e.nextAll(Z);else{if(!n||e.hasClass(q))return;r.open(e),i=e.find(".k-menu-group").children().first()}return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t){var n;if(t)return!(n=e.prevAll(Z)).length&&e.length?n=e.parent().children().last():e.length||(n=this.wrapper.children(".k-item").last()),this._moveHover(e,n),n},_itemEsc:function(e,t){var n;return t?(n=e.parent().closest(".k-item"),this.close(n),this._moveHover(e,n),n):e},_triggerEvent:function(e){return this.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(t){var n=this,i=e(s.eventTarget(t)).closest(Q);setTimeout(function(){n._moveHover([],i),i.children(".k-content")[0]&&i.parent().closest(".k-item").removeClass(j)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});p(ie,{renderItem:function(e){e=p({menu:{},group:{}},e);var t=te.empty,n=e.item;return te.item(p(e,{image:n.imageUrl?te.image:t,sprite:n.spriteCssClass?te.sprite:t,itemWrapper:te.itemWrapper,renderContent:ie.renderContent,arrow:n.items||n.content?te.arrow:t,subGroup:ie.renderGroup},ne))},renderGroup:function(e){return te.group(p({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=p({length:r},e.group);r>n;n++)t+=ie.renderItem(p(e,{group:o,item:p({index:n},i[n])}));return t}},e,ne))},renderContent:function(e){return te.content(p(e,ne))}}),a=ie.extend({init:function(t,n){var i=this;ie.fn.init.call(i,t,n),i.target=e(i.options.target),i._popup(),i._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,target:"body"},events:[k,S,R,P,E],setOptions:function(t){var n=this;ie.fn.setOptions.call(n,t),n.target.off(n.showOn+b,n._showProxy),n.userEvents&&n.userEvents.destroy(),n.target=e(n.options.target),t.orientation&&n.popup.wrapper[0]&&n.popup.element.unwrap(),n._wire(),ie.fn.setOptions.call(this,t)},destroy:function(){var e=this;e.target.off(e.options.showOn+b),O.off(s.support.mousedown+b,e._closeProxy),e.userEvents&&e.userEvents.destroy(),ie.fn.destroy.call(e)},open:function(i,r){var o=this;return i=e(i)[0],n(o.element[0],e(i)[0])?ie.fn.open.call(o,i):!1===o._triggerEvent({item:o.element,type:k})&&(o.popup.visible()&&o.options.filter&&o.popup.close(!0),r!==t?(o.popup.wrapper.hide(),o.popup.open(i,r)):(o.popup.options.anchor=i||o.popup.anchor||o.target,o.popup.open()),O.off(o.popup.downEvent,o.popup._mousedownProxy),O.on(s.support.mousedown+b,o._closeProxy)),o},close:function(){var t=this;n(t.element[0],e(arguments[0])[0])?ie.fn.close.call(t,arguments[0]):t.popup.visible()&&!1===t._triggerEvent({item:t.element,type:S})&&(t.popup.close(),O.off(s.support.mousedown+b,t._closeProxy),t.unbind(E,t._closeTimeoutProxy))},_showHandler:function(e){var t,i=e,r=this,o=r.options;e.event&&((i=e.event).pageX=e.x.location,i.pageY=e.y.location),n(r.element[0],e.relatedTarget||e.target)||(r._eventOrigin=i,i.preventDefault(),i.stopImmediatePropagation(),r.element.find("."+j).removeClass(j),(o.filter&&s.support.matchesSelector.call(i.currentTarget,o.filter)||!o.filter)&&(o.alignToAnchor?r.open(i.currentTarget):(r.popup.options.anchor=i.currentTarget,r._targetChild?(t=r.target.offset(),r.open(i.pageX-t.left,i.pageY-t.top)):r.open(i.pageX,i.pageY))))},_closeHandler:function(t){var i,r=this,o=e(t.relatedTarget||t.target),a=o.closest(r.target.selector)[0]==r.target[0],s=o.closest(X).children(Y),l=n(r.element[0],o[0]);r._eventOrigin=t,i=3!==t.which,r.popup.visible()&&(i&&a||!a)&&(r.options.closeOnClick&&!s[0]&&l||!l)&&(l?(this.unbind(E,this._closeTimeoutProxy),r.bind(E,r._closeTimeoutProxy)):r.close())},_wire:function(){var e=this,t=e.options,n=e.target;e._showProxy=f(e._showHandler,e),e._closeProxy=f(e._closeHandler,e),e._closeTimeoutProxy=f(e.close,e),n[0]&&(s.support.mobileOS&&"contextmenu"==t.showOn?(e.userEvents=new s.UserEvents(n,{filter:t.filter,allowSelection:!1}),n.on(t.showOn+b,!1),e.userEvents.bind("hold",e._showProxy)):t.filter?n.on(t.showOn+b,t.filter,e._showProxy):n.on(t.showOn+b,e._showProxy))},_triggerEvent:function(n){var i=this,r=e(i.popup.options.anchor)[0],o=i._eventOrigin;return i._eventOrigin=t,i.trigger(n.type,p({type:n.type,item:n.item||this.element[0],target:r},o?{event:o}:{}))},_popup:function(){var e=this;e._triggerProxy=f(e._triggerEvent,e),e.popup=e.element.addClass("k-context-menu").kendoPopup({anchor:e.target||"body",copyAnchorStyles:e.options.copyAnchorStyles,collision:e.options.popupCollision||"fit",animation:e.options.animation,activate:e._triggerProxy,deactivate:e._triggerProxy}).data("kendoPopup"),e._targetChild=n(e.target[0],e.popup.element[0])}}),l.plugin(ie),l.plugin(a)}(window.kendo.jQuery),function(e,t){function n(t){return e.trim(t).replace(/&nbsp;/gi,"")}function i(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(i(e[t].columns)):n.push(e[t]);return n}var r=window.kendo,o=r.ui,a=e.proxy,s=e.extend,l=e.grep,c=e.map,u=e.inArray,d="k-state-selected",h="asc",p="desc",f="change",g="init",m="select",v="kendoPopup",_="kendoMenu",y=".kendoColumnMenu",b=o.Widget,w=b.extend({init:function(t,n){var i,o=this;b.fn.init.call(o,t,n),t=o.element,n=o.options,o.owner=n.owner,o.dataSource=n.dataSource,o.field=t.attr(r.attr("field")),o.title=t.attr(r.attr("title")),(i=t.find(".k-header-column-menu"))[0]||(i=t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),o.link=i.attr("tabindex",-1).on("click"+y,a(o._click,o)),o.wrapper=e('<div class="k-column-menu"/>'),o._refreshHandler=a(o.refresh,o),o.dataSource.bind(f,o._refreshHandler)},_init:function(){var e=this;e.pane=e.options.pane,e.pane&&(e._isMobile=!0),e._isMobile?e._createMobileMenu():e._createMenu(),e._angularItems("compile"),e._sort(),e._columns(),e._filter(),e._lockColumns(),e.trigger(g,{field:e.field,container:e.wrapper})},events:[g],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"}},_createMenu:function(){var e=this,t=e.options;e.wrapper.html(r.template(k)({ns:r.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns})),e.popup=e.wrapper[v]({anchor:e.link,open:a(e._open,e),activate:a(e._activate,e),close:function(){e.options.closeCallback&&e.options.closeCallback(e.element)}}).data(v),e.menu=e.wrapper.children()[_]({orientation:"vertical",closeOnClick:!1}).data(_)},_createMobileMenu:function(){var e=this,t=e.options,n=r.template(x)({ns:r.ns,field:e.field,title:e.title||e.field,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns});e.view=e.pane.append(n),e.wrapper=e.view.element.find(".k-column-menu"),e.menu=new C(e.wrapper.children(),{pane:e.pane}),e.view.element.on("click",".k-done",function(t){e.close(),t.preventDefault()}),e.options.lockedColumns&&e.view.bind("show",function(){e._updateLockedColumns()})},_angularItems:function(t){var n=this;n.angular(t,function(){return{elements:n.wrapper.find(".k-columns-item input["+r.attr("field")+"]").map(function(){return e(this).closest("li")}),data:c(n._ownerColumns(),function(e){return{column:e._originalObject}})}})},destroy:function(){var e=this;e._angularItems("cleanup"),b.fn.destroy.call(e),e.filterMenu&&e.filterMenu.destroy(),e._refreshHandler&&e.dataSource.unbind(f,e._refreshHandler),e.options.columns&&e.owner&&(e._updateColumnsMenuHandler&&(e.owner.unbind("columnShow",e._updateColumnsMenuHandler),e.owner.unbind("columnHide",e._updateColumnsMenuHandler)),e._updateColumnsLockedStateHandler&&(e.owner.unbind("columnLock",e._updateColumnsLockedStateHandler),e.owner.unbind("columnUnlock",e._updateColumnsLockedStateHandler))),e.menu&&(e.menu.element.off(y),e.menu.destroy()),e.wrapper.off(y),e.popup&&e.popup.destroy(),e.view&&e.view.purge(),e.link.off(y),e.owner=null,e.wrapper=null,e.element=null},close:function(){this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+y))},_click:function(e){e.preventDefault(),e.stopPropagation();var t=this.options;t.filter&&this.element.is(!t.filter)||(this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each(function(){e(this).data(v).close()}),t.popup.element.on("keydown"+y,function(e){e.keyCode==r.keys.ESC&&t.close()}),t.options.lockedColumns&&t._updateLockedColumns()},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var e=i(this.owner.columns),t=l(e,function(e){var t=!0,i=n(e.title||"");return(!1===e.menu||!e.field&&!i.length)&&(t=!1),t});return c(t,function(t){return{originalField:t.field,field:t.field||t.title,title:t.title||t.field,hidden:t.hidden,index:u(t,e),locked:!!t.locked,_originalObject:t}})},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t.menu.bind(m,function(n){var i,r=e(n.item);r.hasClass("k-sort-asc")?i=h:r.hasClass("k-sort-desc")&&(i=p),i&&(r.parent().find(".k-sort-"+(i==h?p:h)).removeClass(d),t._sortDataSource(r,i),t.close())}))},_sortDataSource:function(e,n){var i,r,o=this,a=o.options.sortable,s=null===a.compare?t:a.compare,l=o.dataSource,c=l.sort()||[];if(e.hasClass(d)&&a&&!1!==a.allowUnsort?(e.removeClass(d),n=t):e.addClass(d),"multiple"===a.mode){for(i=0,r=c.length;r>i;i++)if(c[i].field===o.field){c.splice(i,1);break}c.push({field:o.field,dir:n,compare:s})}else c=[{field:o.field,dir:n,compare:s}];l.sort(c)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=a(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t._updateColumnsLockedStateHandler=a(t._updateColumnsLockedState,t),t.owner.bind(["columnUnlock","columnLock"],t._updateColumnsLockedStateHandler),t.menu.bind(m,function(n){var o,a,s,c=e(n.item),u=i(t.owner.columns);t._isMobile&&n.preventDefault(),c.parent().closest("li.k-columns-item")[0]&&((o=c.find(":checkbox")).attr("disabled")||(s=o.attr(r.attr("field")),!0===(a=l(u,function(e){return e.field==s||e.title==s})[0]).hidden?t.owner.showColumn(a):t.owner.hideColumn(a)))}))},_updateColumnsMenu:function(){var e,t,n,i,o,a,s=r.attr("field"),d=r.attr("locked"),h=l(this._ownerColumns(),function(e){return!e.hidden}),p=l(h,function(e){return e.originalField}),f=l(p,function(e){return!0===e.locked}).length,g=l(p,function(e){return!0!==e.locked}).length;for(h=c(h,function(e){return e.field}),e=0,t=(a=this.wrapper.find(".k-columns-item input["+s+"]").prop("disabled",!1).prop("checked",!1)).length;t>e;e++)o="true"===(n=a.eq(e)).attr(d),i=!1,u(n.attr(s),h)>-1&&(i=!0,n.prop("checked",i)),i&&(1==f&&o&&n.prop("disabled",!0),1!=g||o||n.prop("disabled",!0))},_updateColumnsLockedState:function(){var e,t,n,i,o=r.attr("field"),a=r.attr("locked"),s=function(e,t){var n,i,r,o={};for(n=0,i=e.length;i>n;n++)o[(r=e[n])[t]]=r;return o}(this._ownerColumns(),"field"),l=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=l.length;t>e;e++)(i=s[(n=l.eq(e)).attr(o)])&&n.attr(a,i.locked);this._updateColumnsMenu()},_filter:function(){var t=this,n="kendoFilterMenu",i=t.options;!1!==i.filterable&&(i.filterable.multi&&(n="kendoFilterMultiCheck",i.filterable.dataSource&&(i.filterable.checkSource=i.filterable.dataSource,delete i.filterable.dataSource)),t.filterMenu=t.wrapper.find(".k-filterable")[n](s(!0,{},{appendToElement:!0,dataSource:i.dataSource,values:i.values,field:t.field,title:t.title},i.filterable)).data(n),t._isMobile&&t.menu.bind(m,function(n){e(n.item).hasClass("k-filter-item")&&t.pane.navigate(t.filterMenu.view,t.options.animations.left)}))},_lockColumns:function(){var t=this;t.menu.bind(m,function(n){var i=e(n.item);i.hasClass("k-lock")?(t.owner.lockColumn(t.field),t.close()):i.hasClass("k-unlock")&&(t.owner.unlockColumn(t.field),t.close())})},_updateLockedColumns:function(){var e,t,n,i,r=this.field,o=this.owner.columns,a=l(o,function(e){return e.field==r||e.title==r})[0];a&&(e=!0===a.locked,t=l(o,function(t){return!t.hidden&&(t.locked&&e||!t.locked&&!e)}).length,n=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),i=this.wrapper.find(".k-unlock").removeClass("k-state-disabled"),(e||1==t)&&n.addClass("k-state-disabled"),e&&1!=t||i.addClass("k-state-disabled"),this._updateColumnsLockedState())},refresh:function(){var e,t,n,i=this,r=i.options.dataSource.sort()||[],o=i.field;for(i.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(d),t=0,n=r.length;n>t;t++)o==(e=r[t]).field&&i.wrapper.find(".k-sort-"+e.dir).addClass(d);i.link[i._filterExist(i.dataSource.filter())?"addClass":"removeClass"]("k-state-active")},_filterExist:function(e){var t,n,i,r=!1;if(e){for(n=0,i=(e=e.filters).length;i>n;n++)(t=e[n]).field==this.field?r=!0:t.filters&&(r=r||this._filterExist(t));return r}}}),k='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',x='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',C=b.extend({init:function(e,t){b.fn.init.call(this,e,t),this.element.on("click"+y,"li.k-item:not(.k-separator):not(.k-state-disabled)","_click")},events:[m],_click:function(t){e(t.target).is("[type=checkbox]")||t.preventDefault(),this.trigger(m,{item:t.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){b.fn.destroy.call(this),this.element.off(y)}});o.plugin(w)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o="dir",a="asc",s="single",l="field",c="desc",u=".kendoColumnSorter",d=".k-link",h="aria-sort",p=e.proxy,f=r.extend({init:function(e,t){var n,i=this;r.fn.init.call(i,e,t),i._refreshHandler=p(i.refresh,i),i.dataSource=i.options.dataSource.bind("change",i._refreshHandler),(n=i.element.find(d))[0]||(n=i.element.wrapInner('<a class="k-link" href="#"/>').find(d)),i.link=n,i.element.on("click"+u,p(i._click,i))},options:{name:"ColumnSorter",mode:s,allowUnsort:!0,compare:null,filter:""},destroy:function(){var e=this;r.fn.destroy.call(e),e.element.off(u),e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=e.element=e.link=e.dataSource=null},refresh:function(){var t,i,r,s,u=this,d=u.dataSource.sort()||[],p=u.element,f=p.attr(n.attr(l));for(p.removeAttr(n.attr(o)),p.removeAttr(h),t=0,i=d.length;i>t;t++)f==(r=d[t]).field&&p.attr(n.attr(o),r.dir);s=p.attr(n.attr(o)),p.find(".k-i-arrow-n,.k-i-arrow-s").remove(),s===a?(e('<span class="k-icon k-i-arrow-n" />').appendTo(u.link),p.attr(h,"ascending")):s===c&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(u.link),p.attr(h,"descending"))},_click:function(e){var i,r,u=this,d=u.element,h=d.attr(n.attr(l)),p=d.attr(n.attr(o)),f=u.options,g=null===u.options.compare?t:u.options.compare,m=u.dataSource.sort()||[];if(e.preventDefault(),!f.filter||d.is(f.filter)){if(p=p===a?c:p===c&&f.allowUnsort?t:a,f.mode===s)m=[{field:h,dir:p,compare:g}];else if("multiple"===f.mode){for(i=0,r=m.length;r>i;i++)if(m[i].field===h){m.splice(i,1);break}m.push({field:h,dir:p,compare:g})}this.dataSource.sort(m)}}});i.plugin(f)}(window.kendo.jQuery),function(e,t){function n(t){return(t=null!=t?t:"").type||e.type(t)||"string"}function i(e){var t,i,r=(e.model.fields||e.model)[e.field],a=n(r),s=r?r.validation:{},l=o.attr("type"),c=o.attr("bind"),p={name:e.field};for(t in s)i=s[t],h(t,g)>=0?p[l]=t:u(i)||(p[t]=d(i)?i.value||t:i),p[o.attr(t+"-msg")]=i.message;return h(a,g)>=0&&(p[l]=a),p[c]=("boolean"===a?"checked:":"value:")+e.field,p}function r(e,t){var n,i,r=e&&e.validation||{};for(n in r)i=r[n],d(i)&&i.value&&(i=i.value),u(i)&&(t[n]=i)}var o=window.kendo,a=o.ui,s=a.Widget,l=e.extend,c=o.support.browser.msie&&9>o.support.browser.version,u=o.isFunction,d=e.isPlainObject,h=e.inArray,p=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,f="change",g=["url","email","number","date","boolean"],m={number:function(t,n){var r=i(n);e('<input type="text"/>').attr(r).appendTo(t).kendoNumericTextBox({format:n.format}),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,n){var r=i(n),a=n.format;a&&(a=o._extractFormat(a)),r[o.attr("format")]=a,e('<input type="text"/>').attr(r).appendTo(t).kendoDatePicker({format:n.format}),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,n){var r=i(n);e('<input type="text" class="k-input k-textbox"/>').attr(r).appendTo(t)},boolean:function(t,n){var r=i(n);e('<input type="checkbox" />').attr(r).appendTo(t)},values:function(t,n){var r=i(n);e("<select "+o.attr("text-field")+'="text"'+o.attr("value-field")+'="value"'+o.attr("source")+"='"+o.stringify(function(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)o=(i=e[t]).text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}(n.values)).replace(/\'/g,"&apos;")+"'"+o.attr("role")+'="dropdownlist"/>').attr(r).appendTo(t),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},v=s.extend({init:function(t,n){var i=this;n.target&&(n.$angular=n.target.options.$angular),s.fn.init.call(i,t,n),i._validateProxy=e.proxy(i._validate,i),i.refresh()},events:[f],options:{name:"Editable",editors:m,clearContainer:!0,errorTemplate:'<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>'},editor:function(e,t){var i=this,r=i.options.editors,a=d(e),s=a?e.field:e,c=i.options.model||{},u=a&&e.values?"values":n(t),h=a&&e.editor,f=h?e.editor:r[u],g=i.element.find("["+o.attr("container-for")+"="+s.replace(p,"\\$1")+"]");f=f||r.string,h&&"string"==typeof e.editor&&(f=function(t){t.append(e.editor)}),f(g=g.length?g:i.element,l(!0,{},a?e:{field:s},{model:c}))},_validate:function(t){var n,i=this,r=t.value,a=i._validationEventInProgress,s={},l=o.attr("bind"),c=t.field.replace(p,"\\$1"),u=RegExp("(value|checked)\\s*:\\s*"+c+"\\s*(,|$)");s[t.field]=t.value,(n=e(":input["+l+'*="'+c+'"]',i.element).filter("["+o.attr("validate")+"!='false']").filter(function(){return u.test(e(this).attr(l))})).length>1&&(n=n.filter(function(){var t=e(this);return!t.is(":radio")||t.val()==r}));try{i._validationEventInProgress=!0,(!i.validatable.validateInput(n)||!a&&i.trigger(f,{values:s}))&&t.preventDefault()}finally{i._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}}),s.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),o.unbind(e.element),e.validatable&&e.validatable.destroy(),o.destroy(e.element),e.element.removeData("kendoValidator")},refresh:function(){var t,n,i,a,s,l,u,h=this,p=h.options.fields||[],f=h.options.clearContainer?h.element.empty():h.element,g=h.options.model||{},m={};for(e.isArray(p)||(p=[p]),t=0,n=p.length;n>t;t++)i=p[t],a=d(i)?i.field:i,r(s=(g.fields||g)[a],m),h.editor(i,s);if(h.options.target&&h.angular("compile",function(){return{elements:f,data:[{dataItem:g}]}}),!n)for(a in l=g.fields||g)r(l[a],m);(function(t){t.find(":input:not(:button, ["+o.attr("role")+"=upload], ["+o.attr("skip")+"], [type=file]), select").each(function(){var t=o.attr("bind"),n=this.getAttribute(t)||"",i="checkbox"===this.type||"radio"===this.type?"checked:":"value:",r=this.name;-1===n.indexOf(i)&&r&&(n+=(n.length?",":"")+i+r,e(this).attr(t,n))})})(f),h.validatable&&h.validatable.destroy(),o.bind(f,h.options.model),h.options.model.unbind("set",h._validateProxy),h.options.model.bind("set",h._validateProxy),h.validatable=new o.ui.Validator(f,{validateOnBlur:!1,errorTemplate:h.options.errorTemplate||void 0,rules:m}),u=f.find(":kendoFocusable").eq(0).focus(),c&&u.focus()}});a.plugin(v)}(window.kendo.jQuery),function(e,t){function n(e){return t!==e}function i(e,t,n){return Math.max(Math.min(parseInt(e,10),1/0===n?n:parseInt(n,10)),parseInt(t,10))}function r(e,t){return function(){var n=this,i=n.wrapper,r=i[0].style,o=n.options;return o.isMaximized||o.isMinimized?n:(n.restoreOptions={width:r.width,height:r.height},i.children(x).hide().end().children(w).find(j).parent().hide().eq(0).before(Z.action({name:"Restore"})),t.call(n),"maximize"==e?n.wrapper.children(w).find($).parent().hide():n.wrapper.children(w).find($).parent().show(),n)}}function o(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function a(e){var t=this;t.owner=e,t._draggable=new u(e.wrapper,{filter:">"+x,group:e.wrapper.id+"-resizing",dragstart:p(t.dragstart,t),drag:p(t.drag,t),dragend:p(t.dragend,t)}),t._draggable.userEvents.bind("press",p(t.addOverlay,t)),t._draggable.userEvents.bind("release",p(t.removeOverlay,t))}function s(e,t){var n=this;n.owner=e,n._draggable=new u(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:p(n.dragstart,n),drag:p(n.drag,n),dragend:p(n.dragend,n),dragcancel:p(n.dragcancel,n)}),n._draggable.userEvents.stopPropagation=!1}var l=window.kendo,c=l.ui.Widget,u=l.ui.Draggable,d=e.isPlainObject,h=l._activeElement,p=e.proxy,f=e.extend,g=e.each,m=l.template,v="body",_=".kendoWindow",y=".k-window",b=".k-window-title",w=b+"bar",k=".k-window-content",x=".k-resize-handle",C=".k-overlay",T="k-content-frame",S="k-loading",D="k-state-hover",A="k-state-focused",M="k-window-maximized",E=":visible",I="hidden",R="cursor",P="open",L="activate",F="deactivate",B="close",z="refresh",H="resizeEnd",N="dragstart",O="dragend",V="error",U="overflow",W="zIndex",j=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",q=".k-i-pin",G=".k-i-unpin",$=q+","+G,Y=".k-window-titlebar .k-window-action",Q=".k-window-titlebar .k-i-refresh",X=l.isLocalUrl,K=c.extend({init:function(i,r){var a,s,u,h,f,g,m,v=this,x={},C=r&&r.actions&&!r.actions.length;c.fn.init.call(v,i,r),h=(r=v.options).position,i=v.element,f=r.content,C&&(r.actions=[]),v.appendTo=e(r.appendTo),v._animations(),f&&!d(f)&&(f=r.content={url:f}),i.find("script").filter(o).remove(),i.parent().is(v.appendTo)||h.top!==t&&h.left!==t||(i.is(E)?x=i.offset():(s=i.css("visibility"),u=i.css("display"),i.css({visibility:I,display:""}),x=i.offset(),i.css({visibility:s,display:u})),h.top===t&&(h.top=x.top),h.left===t&&(h.left=x.left)),n(r.visible)&&null!==r.visible||(r.visible=i.is(E)),a=v.wrapper=i.closest(y),i.is(".k-content")&&a[0]||(i.addClass("k-window-content k-content"),v._createWindow(i,r),a=v.wrapper=i.closest(y),v._dimensions()),v._position(),r.pinned&&v.pin(!0),f&&v.refresh(f),r.visible&&v.toFront(),g=a.children(k),v._tabindex(g),r.visible&&r.modal&&v._overlay(a.is(E)).css({opacity:.5}),a.on("mouseenter"+_,Y,p(v._buttonEnter,v)).on("mouseleave"+_,Y,p(v._buttonLeave,v)).on("click"+_,"> "+Y,p(v._windowActionHandler,v)),g.on("keydown"+_,p(v._keydown,v)).on("focus"+_,p(v._focus,v)).on("blur"+_,p(v._blur,v)),this._resizable(),this._draggable(),(m=i.attr("id"))&&(m+="_wnd_title",a.children(w).children(b).attr("id",m),g.attr({role:"dialog","aria-labelledby":m})),a.add(a.children(".k-resize-handle,"+w)).on("mousedown"+_,p(v.toFront,v)),v.touchScroller=l.touchScroller(i),v._resizeHandler=p(v._onDocumentResize,v),v._marker=l.guid().substring(0,8),e(window).on("resize"+_+v._marker,v._resizeHandler),r.visible&&(v.trigger(P),v.trigger(L)),l.notify(v)},_buttonEnter:function(t){e(t.currentTarget).addClass(D)},_buttonLeave:function(t){e(t.currentTarget).removeClass(D)},_focus:function(){this.wrapper.addClass(A)},_blur:function(){this.wrapper.removeClass(A)},_dimensions:function(){var e,t,n=this.wrapper,r=this.options,o=r.width,a=r.height,s=r.maxHeight,l=["minWidth","minHeight","maxWidth","maxHeight"];for(this.title(r.title),e=0;l.length>e;e++)(t=r[l[e]])&&1/0!=t&&n.css(l[e],t);s&&1/0!=s&&this.element.css("maxHeight",s),o&&n.width((""+o).indexOf("%")>0?o:i(o,r.minWidth,r.maxWidth)),a&&n.height((""+a).indexOf("%")>0?a:i(a,r.minHeight,r.maxHeight)),r.visible||n.hide()},_position:function(){var e=this.wrapper,t=this.options.position;0===t.top&&(t.top=""+t.top),0===t.left&&(t.left=""+t.left),e.css({top:t.top||"",left:t.left||""})},_animations:function(){var e=this.options;!1===e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resize:function(){l.resize(this.element.children())},_resizable:function(){var t=this.options.resizable,n=this.wrapper;this.resizing&&(n.off("dblclick"+_).children(x).remove(),this.resizing.destroy(),this.resizing=null),t&&(n.on("dblclick"+_,w,p(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),g("n e s w se sw ne nw".split(" "),function(e,t){n.append(Z.resizeHandle(t))}),this.resizing=new a(this)),n=null},_draggable:function(){var e=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),e&&(this.dragging=new s(this,e.dragHandle||w))},_actions:function(){var t=this.options.actions,n=this.wrapper.children(w).find(".k-window-actions");t=e.map(t,function(e){return{name:e}}),n.html(l.render(Z.action,t))},setOptions:function(e){c.fn.setOptions.call(this,e),this.restore(),this._animations(),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions()},events:[P,L,F,B,z,"resize",H,N,O,V],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},content:null,visible:null,height:null,width:null,appendTo:"body"},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var t,n,r,o,a,s,c=this,u=c.options,d=l.keys,h=e.keyCode,p=c.wrapper,f=10,g=c.options.isMaximized;e.target!=e.currentTarget||c._closing||(h==d.ESC&&c._closable()&&c._close(!1),!u.draggable||e.ctrlKey||g||(t=l.getOffset(p),h==d.UP?n=p.css("top",t.top-f):h==d.DOWN?n=p.css("top",t.top+f):h==d.LEFT?n=p.css("left",t.left-f):h==d.RIGHT&&(n=p.css("left",t.left+f))),u.resizable&&e.ctrlKey&&!g&&(h==d.UP?(n=!0,o=p.height()-f):h==d.DOWN&&(n=!0,o=p.height()+f),h==d.LEFT?(n=!0,r=p.width()-f):h==d.RIGHT&&(n=!0,r=p.width()+f),n&&(a=i(r,u.minWidth,u.maxWidth),s=i(o,u.minHeight,u.maxHeight),isNaN(a)||(p.width(a),c.options.width=a+"px"),isNaN(s)||(p.height(s),c.options.height=s+"px"),c.resize())),n&&e.preventDefault())},_overlay:function(t){var n=this.appendTo.children(C),i=this.wrapper;return n.length||(n=e("<div class='k-overlay' />")),n.insertBefore(i[0]).toggle(t).css(W,parseInt(i.css(W),10)-1),n},_actionForIcon:function(e){return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[/\bk-i-\w+\b/.exec(e[0].className)[0]]},_windowActionHandler:function(n){var i,r;if(!this._closing)return i=e(n.target).closest(".k-window-action").find(".k-icon"),(r=this._actionForIcon(i))?(n.preventDefault(),this[r](),!1):t},_modals:function(){var t=this,n=e(y).filter(function(){var n=e(this),i=t._object(n),r=i&&i.options;return r&&r.modal&&r.visible&&n.is(E)}).sort(function(t,n){return+e(t).css("zIndex")-+e(n).css("zIndex")});return t=null,n},_object:function(e){var n=e.children(k),i=l.widgetInstance(n);return i instanceof K?i:t},center:function(){var t,n,i=this,r=i.options.position,o=i.wrapper,a=e(window),s=0,l=0;return i.options.isMaximized?i:(i.options.pinned||(s=a.scrollTop(),l=a.scrollLeft()),n=l+Math.max(0,(a.width()-o.width())/2),t=s+Math.max(0,(a.height()-o.height()-parseInt(o.css("paddingTop"),10))/2),o.css({left:n,top:t}),r.top=t,r.left=n,i)},title:function(e){var t,n=this,i=n.wrapper,r=n.options,o=i.children(w),a=o.children(b);return arguments.length?(!1===e?(i.addClass("k-window-titleless"),o.remove()):(o.length?a.html(e):(i.prepend(Z.titlebar(r)),n._actions(),o=i.children(w)),t=o.outerHeight(),i.css("padding-top",t),o.css("margin-top",-t)),n.options.title=e,n):a.text()},content:function(e,t){var i=this.wrapper.children(k),r=i.children(".km-scroll-container");return i=r[0]?r:i,n(e)?(this.angular("cleanup",function(){return{elements:i.children()}}),l.destroy(this.element.children()),i.empty().html(e),this.angular("compile",function(){var e,n=[];for(e=i.length;--e>=0;)n.push({dataItem:t});return{elements:i.children(),data:n}}),this):i.html()},open:function(){var t,n,i=this,r=i.wrapper,o=i.options,a=o.animation.open,s=r.children(k),c=e(document);return i.trigger(P)||(i._closing&&r.kendoStop(!0,!0),i._closing=!1,i.toFront(),o.autoFocus&&i.element.focus(),o.visible=!0,o.modal&&((t=i._overlay(!1)).kendoStop(!0,!0),a.duration&&l.effects.Fade?((n=l.fx(t).fadeIn()).duration(a.duration||0),n.endValue(.5),n.play()):t.css("opacity",.5),t.show()),r.is(E)||(s.css(U,I),r.show().kendoStop().kendoAnimate({effects:a.effects,duration:a.duration,complete:p(this._activate,this)}))),o.isMaximized&&(i._documentScrollTop=c.scrollTop(),i._documentScrollLeft=c.scrollLeft(),e("html, body").css(U,I)),i},_activate:function(){this.options.autoFocus&&this.element.focus(),this.trigger(L),this.wrapper.children(k).css(U,"")},_removeOverlay:function(n){var i,r=this._modals(),o=this.options,a=o.modal&&!r.length,s=o.modal?this._overlay(!0):e(t),c=o.animation.close;a?!n&&c.duration&&l.effects.Fade?((i=l.fx(s).fadeOut()).duration(c.duration||0),i.startValue(.5),i.play()):this._overlay(!1).remove():r.length&&this._object(r.last())._overlay(!0)},_close:function(t){var n=this,i=n.wrapper,r=n.options,o=r.animation.open,a=r.animation.close,s=e(document);if(i.is(E)&&!n.trigger(B,{userTriggered:!t})){if(n._closing)return;n._closing=!0,r.visible=!1,e(y).each(function(t,n){var r=e(n).children(k);n!=i&&r.find("> ."+T).length>0&&r.children(C).remove()}),this._removeOverlay(),i.kendoStop().kendoAnimate({effects:a.effects||o.effects,reverse:!0===a.reverse,duration:a.duration,complete:p(this._deactivate,this)})}n.options.isMaximized&&(e("html, body").css(U,""),n._documentScrollTop&&n._documentScrollTop>0&&s.scrollTop(n._documentScrollTop),n._documentScrollLeft&&n._documentScrollLeft>0&&s.scrollLeft(n._documentScrollLeft))},_deactivate:function(){var e,t=this;t.wrapper.hide().css("opacity",""),t.trigger(F),t.options.modal&&(e=t._object(t._modals().last()))&&e.toFront()},close:function(){return this._close(!0),this},_actionable:function(t){return e(t).is(Y+","+Y+" .k-icon,:input,a")},_shouldFocus:function(t){var n=h(),i=this.element;return!(!this.options.autoFocus||e(n).is(i)||this._actionable(t)||i.find(n).length&&i.find(t).length)},toFront:function(t){var n,i,r=this,o=r.wrapper,a=o[0],s=+o.css(W),l=s,c=t&&t.target||null;return e(y).each(function(t,n){var i=e(n),r=i.css(W),o=i.children(k);isNaN(r)||(s=Math.max(+r,s)),n!=a&&o.find("> ."+T).length>0&&o.append(Z.overlay)}),(!o[0].style.zIndex||s>l)&&o.css(W,s+2),r.element.find("> .k-overlay").remove(),r._shouldFocus(c)&&(r.element.focus(),n=e(window).scrollTop(),(i=parseInt(o.position().top,10))>0&&n>i&&(n>0?e(window).scrollTop(i):o.css("top",n))),o=null,r},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,n=t.options,i=n.minHeight,r=t.restoreOptions,o=e(document);return n.isMaximized||n.isMinimized?(i&&1/0!=i&&t.wrapper.css("min-height",i),t.wrapper.css({position:n.pinned?"fixed":"absolute",left:r.left,top:r.top,width:r.width,height:r.height}).removeClass(M).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(j).parent().show().end().end().find($).parent().show(),t.options.width=r.width,t.options.height=r.height,e("html, body").css(U,""),this._documentScrollTop&&this._documentScrollTop>0&&o.scrollTop(this._documentScrollTop),this._documentScrollLeft&&this._documentScrollLeft>0&&o.scrollLeft(this._documentScrollLeft),n.isMaximized=n.isMinimized=!1,t.resize(),t):t},maximize:r("maximize",function(){var t=this,n=t.wrapper,i=n.position(),r=e(document);f(t.restoreOptions,{left:i.left,top:i.top}),n.css({left:0,top:0,position:"fixed"}).addClass(M),this._documentScrollTop=r.scrollTop(),this._documentScrollLeft=r.scrollLeft(),e("html, body").css(U,I),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:r("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""}),e.element.hide(),e.options.isMinimized=!0}),pin:function(t){var n=this,i=e(window),r=n.wrapper,o=parseInt(r.css("top"),10),a=parseInt(r.css("left"),10);(t||!n.options.pinned&&!n.options.isMaximized)&&(r.css({position:"fixed",top:o-i.scrollTop(),left:a-i.scrollLeft()}),r.children(w).find(q).addClass("k-i-unpin").removeClass("k-i-pin"),n.options.pinned=!0)},unpin:function(){var t=this,n=e(window),i=t.wrapper,r=parseInt(i.css("top"),10),o=parseInt(i.css("left"),10);t.options.pinned&&!t.options.isMaximized&&(i.css({position:"",top:r+n.scrollTop(),left:o+n.scrollLeft()}),i.children(w).find(G).addClass("k-i-pin").removeClass("k-i-unpin"),t.options.pinned=!1)},_onDocumentResize:function(){var t,n,i=this,r=i.wrapper,o=e(window),a=l.support.zoomLevel();i.options.isMaximized&&(t=o.width()/a,n=o.height()/a-parseInt(r.css("padding-top"),10),r.css({width:t,height:n}),i.options.width=t,i.options.height=n,i.resize())},refresh:function(t){var i,r,o,a=this,s=a.options,l=e(a.element);return d(t)||(t={url:t}),t=f({},s.content,t),r=n(s.iframe)?s.iframe:t.iframe,(o=t.url)?(n(r)||(r=!X(o)),r?((i=l.find("."+T)[0])?i.src=o||i.src:l.html(Z.contentFrame(f({},s,{content:t}))),l.find("."+T).unbind("load"+_).on("load"+_,p(this._triggerRefresh,this))):a._ajaxRequest(t)):(t.template&&a.content(m(t.template)({})),a.trigger(z)),l.toggleClass("k-window-iframecontent",!!r),a},_triggerRefresh:function(){this.trigger(z)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(Q).removeClass(S)},_ajaxError:function(e,t){this.trigger(V,{status:t,xhr:e})},_ajaxSuccess:function(e){return function(t){var n=t;e&&(n=m(e)(t||{})),this.content(n,t),this.element.prop("scrollTop",0),this.trigger(z)}},_showLoading:function(){this.wrapper.find(Q).addClass(S)},_ajaxRequest:function(t){this._loadingIconTimeout=setTimeout(p(this._showLoading,this),100),e.ajax(f({type:"GET",dataType:"html",cache:!1,error:p(this._ajaxError,this),complete:p(this._ajaxComplete,this),success:p(this._ajaxSuccess(t.template),this)},t))},_destroy:function(){this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.wrapper.off(_).children(k).off(_).end().find(".k-resize-handle,.k-window-titlebar").off(_),e(window).off("resize"+_+this._marker),clearTimeout(this._loadingIconTimeout),c.fn.destroy.call(this),this.unbind(t),l.destroy(this.wrapper),this._removeOverlay(!0)},destroy:function(){this._destroy(),this.wrapper.empty().remove(),this.wrapper=this.appendTo=this.element=e()},_createWindow:function(){var t,n,i=this.element,r=this.options,o=l.support.isRtl(i);!1===r.scrollable&&i.attr("style","overflow:hidden;"),n=e(Z.wrapper(r)),t=i.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),n.toggleClass("k-rtl",o).appendTo(this.appendTo).append(i).find("iframe:not(.k-content)").each(function(e){this.src=t[e]}),n.find(".k-window-title").css(o?"left":"right",n.find(".k-window-actions").outerWidth()+10),i.css("visibility","").show(),i.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()}),n=i=null}}),Z={wrapper:m("<div class='k-widget k-window' />"),action:m("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:m("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:m("<iframe frameborder='0' title='#= title #' class='"+T+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:m("<div class='k-resize-handle k-resize-#= data #'></div>")};a.prototype={addOverlay:function(){this.owner.wrapper.append(Z.overlay)},removeOverlay:function(){this.owner.wrapper.find(C).remove()},dragstart:function(t){var n=this,i=n.owner,r=i.wrapper;n.elementPadding=parseInt(r.css("padding-top"),10),n.initialPosition=l.getOffset(r,"position"),n.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),n.initialSize={width:r.width(),height:r.height()},n.containerOffset=l.getOffset(i.appendTo,"position"),r.children(x).not(t.currentTarget).hide(),e(v).css(R,t.currentTarget.css(R))},drag:function(e){var t,n,r,o,a=this,s=a.owner,l=s.wrapper,c=s.options,u=a.resizeDirection,d=a.containerOffset,h=a.initialPosition,p=a.initialSize,f=Math.max(e.x.location,d.left),g=Math.max(e.y.location,d.top);u.indexOf("e")>=0?(t=f-h.left,l.width(i(t,c.minWidth,c.maxWidth))):u.indexOf("w")>=0&&(t=i((o=h.left+p.width)-f,c.minWidth,c.maxWidth),l.css({left:o-t-d.left,width:t})),u.indexOf("s")>=0?(n=g-h.top-a.elementPadding,l.height(i(n,c.minHeight,c.maxHeight))):u.indexOf("n")>=0&&(n=i((r=h.top+p.height)-g,c.minHeight,c.maxHeight),l.css({top:r-n-d.top,height:n})),t&&(s.options.width=t+"px"),n&&(s.options.height=n+"px"),s.resize()},dragend:function(t){var n=this,i=n.owner,r=i.wrapper;return r.children(x).not(t.currentTarget).show(),e(v).css(R,""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&r.css(n.initialPosition).css(n.initialSize),i.trigger(H),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},s.prototype={dragstart:function(t){var n=this.owner,i=n.element,r=i.find(".k-window-actions"),o=l.getOffset(n.appendTo);n.trigger(N),n.initialWindowPosition=l.getOffset(n.wrapper,"position"),n.startPosition={left:t.x.client-n.initialWindowPosition.left,top:t.y.client-n.initialWindowPosition.top},n.minLeftPosition=r.length>0?r.outerWidth()+parseInt(r.css("right"),10)-i.outerWidth():20-i.outerWidth(),n.minLeftPosition-=o.left,n.minTopPosition=-o.top,n.wrapper.append(Z.overlay).children(x).hide(),e(v).css(R,t.currentTarget.css(R))},drag:function(t){var n=this.owner,i=n.options.position,r=Math.max(t.y.client-n.startPosition.top,n.minTopPosition),o=Math.max(t.x.client-n.startPosition.left,n.minLeftPosition),a={left:o,top:r};e(n.wrapper).css(a),i.top=r,i.left=o},_finishDrag:function(){var t=this.owner;t.wrapper.children(x).toggle(!t.options.isMinimized).end().find(C).remove(),e(v).css(R,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(y).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(O),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},l.ui.plugin(K)}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=e.find(w("popover")),r=s.roles;for(t=0,n=i.length;n>t;t++)o.initWidget(i[t],{},r)}function i(e){o.triggeredByInput(e)||e.preventDefault()}function r(t){t.each(function(){o.initWidget(e(this),{},s.roles)})}var o=window.kendo,a=o.mobile,s=a.ui,l=o.attr,c=s.Widget,u=o.ViewClone,d="init",h="beforeShow",p="show",f="afterShow",g="beforeHide",m="transitionEnd",v="transitionStart",_="hide",y="destroy",b=o.attrValue,w=o.roleSelector,k=o.directiveSelector,x=o.compileMobileDirective,C=c.extend({init:function(t,n){c.fn.init.call(this,t,n),this.params={},e.extend(this,n),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[d,h,p,f,g,_,y,v,m],options:{name:"View",title:"",layout:null,getLayout:e.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(e){void 0===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger(y),c.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),o.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return!this.trigger(h,{view:this})},triggerBeforeHide:function(){return!this.trigger(g,{view:this})},showStart:function(){var e=this.element;e.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger(d,{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger(p,{view:this}),o.resize(e)},showEnd:function(){this.trigger(f,{view:this}),this._padIfNativeScrolling()},hideEnd:function(){var e=this;e.element.hide(),e.trigger(_,{view:e}),e.layout&&e.layout.trigger(_,{view:e,layout:e.layout})},beforeTransition:function(e){this.trigger(v,{type:e})},afterTransition:function(e){this.trigger(m,{type:e})},_padIfNativeScrolling:function(){if(a.appLevelNativeScrolling()){var e=o.support.mobileOS&&o.support.mobileOS.android,t=a.application.skin()||"",n=a.application.os.android||t.indexOf("android")>-1,i="flat"===t||t.indexOf("material")>-1,r=!e&&!n||i?"header":"footer",s=!e&&!n||i?"footer":"header";this.content.css({paddingTop:this[r].height(),paddingBottom:this[s].height()})}},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},clone:function(){return new u(this)},_scroller:function(){var t=this;a.appLevelNativeScrolling()||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller(e.extend(t.options.scroller,{zoom:t.options.zoom,useNative:t.options.useNativeScrolling})),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),o.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",i),t.options.useNativeScrolling||e(t.element).on("touchmove",".km-content",i)))},_model:function(){var e=this,t=e.element,i=e.options.model;"string"==typeof i&&(i=o.getter(i)(e.options.modelScope)),e.model=i,n(t),e.element.css("display",""),e.options.initWidgets&&(i?o.bind(t,i,s,o.ui,o.dataviz.ui):a.init(t.children())),e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=b(e,"url")||"#"+t,"#"==this.id&&(this.id=o.guid(),e.attr("id",this.id))},_layout:function(){var e=w("content"),t=this.element;t.addClass("km-view"),this.header=t.children(w("header")).addClass("km-header"),this.footer=t.children(w("footer")).addClass("km-footer"),t.children(e)[0]||t.wrapInner("<div "+l("role")+'="content"></div>'),this.content=t.children(w("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=e('<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />').appendTo(this.element)},_invokeNgController:function(){var t,n,i;this.options.$angular&&(t=this.element.controller(),n=this.element.scope(),t&&(i=e.proxy(this,"_callController",t,n),/^\$(digest|apply)$/.test(n.$$phase)?i():n.$apply(i)))},_callController:function(e,t){this.element.injector().invoke(e.constructor,e,{$scope:t})}}),T=c.extend({init:function(e,t){c.fn.init.call(this,e,t),e=this.element,this.header=e.children(this._locate("header")).addClass("km-header"),this.footer=e.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),n(e),this.options.$angular||o.mobile.init(this.element.children()),this.element.detach(),this.trigger(d,{layout:this})},_locate:function(e){return this.options.$angular?k(e):w(e)},options:{name:"Layout",id:null,platform:null},events:[d,p,_],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0))},attach:function(e){var t=this,n=t.currentView;n&&t.detach(n),e.header===t.header&&(t.header.detach(),e.element.children(w("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(w("footer")).remove(),e.element.append(t.footer)),t.trigger(p,{layout:t,view:e}),t.currentView=e}}),S=o.Observable,D=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,A="loadStart",M="loadComplete",E="showStart",I="sameViewRequested",R="viewShow",P="viewTypeDetermined",L="after",F=S.extend({init:function(t){var n,i,a,s,l=this;if(S.fn.init.call(l),e.extend(l,t),l.sandbox=e("<div />"),a=l.container,n=l._hideViews(a),l.rootView=n.first(),!l.rootView[0]&&t.rootNeeded)throw i=a[0]==o.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',Error(i);l.layouts={},l.viewContainer=new o.ViewContainer(l.container),l.viewContainer.bind("accepted",function(e){e.view.params=l.params}),l.viewContainer.bind("complete",function(e){l.trigger(R,{view:e.view})}),l.viewContainer.bind(L,function(){l.trigger(L)}),this.getLayoutProxy=e.proxy(this,"_getLayout"),l._setupLayouts(a),s=a.children(l._locate("modalview drawer")),l.$angular?(l.$angular[0].viewOptions={defaultTransition:l.transition,loader:l.loader,container:l.container,getLayout:l.getLayoutProxy},s.each(function(n,i){x(e(i),t.$angular[0])})):r(s),this.bind(this.events,t)},events:[E,L,R,A,M,I,P],destroy:function(){for(var e in o.destroy(this.container),this.layouts)this.layouts[e].destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,n){if(""===(e=e.replace(RegExp("^"+this.remoteViewURLPrefix),""))&&this.remoteViewURLPrefix&&(e="/"),e.replace(/^#/,"")===this.url)return this.trigger(I),!1;this.trigger(E);var i=this,r=function(n){return i.viewContainer.show(n,t,e)},a=i._findViewElement(e),s=o.widgetInstance(a);return i.url=e.replace(/^#/,""),i.params=n,s&&s.reload&&(s.purge(),a=[]),this.trigger(P,{remote:0===a.length,url:e}),a[0]?(s||(s=i._createView(a)),r(s)):(this.serverNavigation?location.href=e:i._loadView(e,r),!0)},append:function(e,t){var n,i,o,a=this.sandbox,s=(t||"").split("?")[0],c=this.container;return D.test(e)&&(e=RegExp.$1),a[0].innerHTML=e,c.append(a.children("script, style")),(o=(n=this._hideViews(a)).first()).length||(n=o=a.wrapInner("<div data-role=view />").children()),s&&o.hide().attr(l("url"),s),this._setupLayouts(a),i=a.children(this._locate("modalview drawer")),c.append(a.children(this._locate("layout modalview drawer")).add(n)),r(i),this._createView(o)},_locate:function(e){return this.$angular?k(e):w(e)},_findViewElement:function(e){var t,n=e.split("?")[0];return n?((t=this.container.children("["+l("url")+"='"+n+"']"))[0]||-1!==n.indexOf("/")||(t=this.container.children("#"===n.charAt(0)?n:"#"+n)),t):this.rootView},_createView:function(e){return this.$angular?x(e,this.$angular[0]):o.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:b(e,"reload")},s.roles)},_getLayout:function(e){return""===e?null:e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(t,n){this._xhr&&this._xhr.abort(),this.trigger(A),this._xhr=e.get(o.absoluteURL(t,this.remoteViewURLPrefix),"html").always(e.proxy(this,"_xhrComplete",n,t))},_xhrComplete:function(e,t,n){var i=!0;if("object"==typeof n&&0===n.status){if(!(n.responseText&&n.responseText.length>0))return;i=!0,n=n.responseText}this.trigger(M),i&&e(this.append(n,t))},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(t){var n,i=this;t.children(i._locate("layout")).each(function(){var t=(n=i.$angular?x(e(this),i.$angular[0]):o.initWidget(e(this),{},s.roles)).options.platform;t&&t!==a.application.os.name?n.destroy():i.layouts[n.options.id]=n})}});o.mobile.ViewEngine=F,s.plugin(C),s.plugin(T)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r=e.map(t.eventMap,function(e){return e}).join(" ").split(" "),o=i.extend({init:function(t,n){var r=this,o=e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');i.fn.init.call(r,o,n),r.container=t,r.captureEvents=!1,r._attachCapture(),o.append(r.options.loading).hide().appendTo(t)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading),!1!==e.options.loading&&(e.captureEvents=!0,e._loading=setTimeout(function(){e.element.show()},e.options.timeout))},hide:function(){this.captureEvents=!1,clearTimeout(this._loading),this.element.hide()},changeMessage:function(e){this.options.loading=e,this.element.find(">h1").html(e)},transition:function(){this.captureEvents=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=!1,this.container.css("pointer-events","")},_attachCapture:function(){function e(e){n.captureEvents&&e.preventDefault()}var t,n=this;for(n.captureEvents=!1,t=0;r.length>t;t++)n.container[0].addEventListener(r[t],e,!0)}});n.plugin(o)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.roleSelector,o=i.ui,a=o.Widget,s=i.ViewEngine,l=o.View,c=i.ui.Loader,u="external",d="href",h="navigate",p="viewShow",f="sameViewRequested",g=n.support.mobileOS,m=g.ios&&!g.appMode&&g.flatVersion>=700,v=/popover|actionsheet|modalview|drawer/,_=n.attrValue,y=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t),t=i.options,(e=i.element).addClass("km-pane"),i.options.collapsible&&e.addClass("km-collapsible-pane"),this.history=[],this.historyCallback=function(e,t,n){var r=i.transition;return i.transition=null,m&&n&&(r="none"),i.viewEngine.showView(e,r,t)},this._historyNavigate=function(e){if("#:back"===e){if(1===i.history.length)return;i.history.pop(),e=i.history[i.history.length-1]}else i.history.push(e);i.historyCallback(e,n.parseQueryStringParams(e))},this._historyReplace=function(e){var t=n.parseQueryStringParams(e);i.history[i.history.length-1]=e,i.historyCallback(e,t)},i.loader=new c(e,{loading:i.options.loading}),i.viewEngine=new s({container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,loader:i.loader,showStart:function(){i.loader.transition(),i.closeActiveDialogs()},after:function(){i.loader.transitionDone()},viewShow:function(e){i.trigger(p,e)},loadStart:function(){i.loader.show()},loadComplete:function(){i.loader.hide()},sameViewRequested:function(){i.trigger(f)},viewTypeDetermined:function(e){e.remote&&i.options.serverNavigation||i.trigger(h,{url:e.url})}}),this._setPortraitWidth(),n.onResize(function(){i._setPortraitWidth()}),i._setupAppLinks()},closeActiveDialogs:function(){this.element.find(r("actionsheet popover modalview")).filter(":visible").each(function(){n.widgetInstance(e(this),o).close()})},navigateToInitial:function(){var e=this.options.initial;return e&&this.navigate(e),e},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[h,p,f],append:function(e){return this.viewEngine.append(e)},destroy:function(){a.fn.destroy.call(this),this.viewEngine.destroy(),this.userEvents.destroy()},navigate:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyNavigate(e)},replace:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyReplace(e)},bindToRouter:function(e){var t=this,i=this.history,r=this.viewEngine;e.bind("init",function(t){var o,a=t.url,s=e.pushState?a:"/";r.rootView.attr(n.attr("url"),s),o=i.length,"/"===a&&o&&(e.navigate(i[o-1],!0),t.preventDefault())}),e.bind("routeMissing",function(e){t.historyCallback(e.url,e.params,e.backButtonPressed)||e.preventDefault()}),e.bind("same",function(){t.trigger(f)}),t._historyNavigate=function(t){e.navigate(t)},t._historyReplace=function(t){e.replace(t)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(e){this.loader.changeMessage(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;t&&(e=n.mobile.application.element.is(".km-vertical")?t:"auto",this.element.css("width",e))},_setupAppLinks:function(){var t=this,i="[data-"+n.ns+"navigate-on-press]",o=e.map(["button","backbutton","detailbutton","listview-link"],function(e){return r(e)+":not("+i+")"}).join(",");this.element.handler(this).on("down",r("tab")+","+i,"_mouseup").on("click",r("tab")+","+o+","+i,"_appLinkClick"),this.userEvents=new n.UserEvents(this.element,{filter:o,tap:function(e){e.event.currentTarget=e.touch.currentTarget,t._mouseup(e.event)}}),this.element.css("-ms-touch-action","")},_appLinkClick:function(t){var n=e(t.currentTarget).attr("href");n&&"#"!==n[0]&&this.options.serverNavigation||_(e(t.currentTarget),"rel")==u||t.preventDefault()},_mouseup:function(t){if(!(t.which>1||t.isDefaultPrevented())){var r=this,a=e(t.currentTarget),s=_(a,"transition"),l=_(a,"rel")||"",c=_(a,"target"),h=a.attr(d),p=m&&0===a[0].offsetHeight,f=h&&"#"!==h[0]&&this.options.serverNavigation;p||f||l===u||void 0===h||"#!"===h||(a.attr(d,"#!"),setTimeout(function(){a.attr(d,h)}),l.match(v)?(n.widgetInstance(e(h),o).openFor(a),("actionsheet"===l||"drawer"===l)&&t.stopPropagation()):("_top"===c?r=i.application.pane:c&&(r=e("#"+c).data("kendoMobilePane")),r.navigate(h,s)),t.preventDefault())}}});y.wrap=function(e){e.is(r("view"))||(e=e.wrap("<div data-"+n.ns+'role="view" data-stretch="true"></div>').parent());var t=e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),i=new y(t);return i.navigate(""),i},o.plugin(y)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i="hide",r="open",o="close",a=n.Widget,s={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},l={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},c={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},u={up:"down",down:"up",left:"right",right:"left"},d=a.extend({init:function(n,r){var o,u,d=this,h=n.closest(".km-modalview-wrapper"),p=n.closest(".km-root").children(".km-pane").first(),f=h[0]?h:p;r.viewport?p=r.viewport:p[0]||(p=window),r.container?f=r.container:f[0]||(f=document.body),o={viewport:p,copyAnchorStyles:!1,autosize:!0,open:function(){d.overlay.show()},activate:e.proxy(d._activate,d),deactivate:function(){d.overlay.hide(),d._apiCall||d.trigger(i),d._apiCall=!1}},a.fn.init.call(d,n,r),n=d.element,r=d.options,n.wrap('<div class="km-popup-wrapper" />').addClass("km-popup").show(),u=d.options.direction.match(/left|right/)?"horizontal":"vertical",d.dimensions=c[u],d.wrapper=n.parent().css({width:r.width,height:r.height}).addClass("km-popup-wrapper km-"+r.direction).hide(),d.arrow=e('<div class="km-popup-arrow" />').prependTo(d.wrapper).hide(),d.overlay=e('<div class="km-popup-overlay" />').appendTo(f).hide(),o.appendTo=d.overlay,r.className&&d.overlay.addClass(r.className),d.popup=new t.ui.Popup(d.wrapper,e.extend(!0,o,l,s[r.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[i],show:function(t){this.popup.options.anchor=e(t),this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){a.fn.destroy.call(this),this.popup.destroy(),this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var t=this,n=t.options.direction,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=e(o.element).offset(),c=o.flipped?u[n]:n,d=2*t.arrow[i.size](),h=t.element[i.size]()-t.arrow[i.size](),p=e(a)[i.size](),f=s[r]-l[r]+p/2;d>f&&(f=d),f>h&&(f=h),t.wrapper.removeClass("km-up km-down km-left km-right").addClass("km-"+c),t.arrow.css(r,f).show()}}),h=a.extend({init:function(i,r){var s,l=this;l.initialOpen=!1,a.fn.init.call(l,i,r),s=e.extend({className:"km-popover-root",hide:function(){l.trigger(o)}},this.options.popup),l.popup=new d(l.element,s),l.popup.overlay.on("move",function(e){e.target==l.popup.overlay[0]&&e.preventDefault()}),l.pane=new n.Pane(l.element,e.extend(this.options.pane,{$angular:this.options.$angular})),t.notify(l,n)},options:{name:"PopOver",popup:{},pane:{}},events:[r,o],open:function(e){this.popup.show(e),this.initialOpen?this.pane.view()._invokeNgController():(this.pane.navigateToInitial()||this.pane.navigate(""),this.popup.popup._position(),this.initialOpen=!0)},openFor:function(e){this.open(e),this.trigger(r,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){a.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),t.destroy(this.element)}});n.plugin(d),n.plugin(h)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile.ui,r=n.ui.Popup,o="hide",a=i.Widget,s=a.extend({init:function(t,i){var s=this,l=n.mobile.application,c=n.support.mobileOS,u=l?l.os.name:c?c.name:"ios",d="ios"===u||"wp"===u||!!l&&l.os.skin,h="blackberry"===u,p=i.align||(d?"bottom center":h?"center right":"center center"),f=i.position||(d?"bottom center":h?"center right":"center center"),g=i.effect||(d?"slideIn:up":h?"slideIn:left":"fade:in"),m=e('<div class="km-shim"/>').handler(s).hide();a.fn.init.call(s,t,i),s.shim=m,t=s.element,(i=s.options).className&&s.shim.addClass(i.className),i.modal||s.shim.on("up","_hide"),(l?l.element:e(document.body)).append(m),s.popup=new r(s.element,{anchor:m,modal:!0,appendTo:m,origin:p,position:f,animation:{open:{effects:g,duration:i.duration},close:{duration:i.duration}},close:function(e){var t=!1;s._apiCall||(t=s.trigger(o)),t&&e.preventDefault(),s._apiCall=!1},deactivate:function(){m.hide()},open:function(){m.show()}}),n.notify(s)},events:[o],options:{name:"Shim",modal:!1,align:t,position:t,effect:t,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){a.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()},_hide:function(t){t&&e.contains(this.shim.children().children(".k-popup")[0],t.target)||this.popup.close()}});i.plugin(s)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.support,i=t.mobile.ui,r=i.Shim,o=i.Popup,a=i.Widget,s="open",l="close",c="command",u="li>a",d=t.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),h=a.extend({init:function(s,l){var c,h,p,f=this,g=n.mobileOS;a.fn.init.call(f,s,l),p=(l=f.options).type,s=f.element,c=(h="auto"===p?g&&g.tablet:"tablet"===p)?o:r,l.cancelTemplate&&(d=t.template(l.cancelTemplate)),s.addClass("km-actionsheet").append(d({cancel:f.options.cancel})).wrap('<div class="km-actionsheet-wrapper" />').on("up",u,"_click").on("click",u,t.preventDefault),f.view().bind("destroy",function(){f.destroy()}),f.wrapper=s.parent().addClass(p?" km-actionsheet-"+p:""),f.shim=new c(f.wrapper,e.extend({modal:g.ios&&7>g.majorVersion,className:"km-actionsheet-root"},f.options.popup)),f._closeProxy=e.proxy(f,"_close"),f.shim.bind("hide",f._closeProxy),h&&t.onResize(f._closeProxy),t.notify(f,i)},events:[s,l,c],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(t,n){var i=this;i.target=e(t),i.context=n,i.shim.show(t)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(e){var t=e.data("actionsheetContext");this.open(e,t),this.trigger(s,{target:e,context:t})},destroy:function(){a.fn.destroy.call(this),t.unbindResize(this._closeProxy),this.shim.destroy()},_click:function(n){var i,r,o,a;n.isDefaultPrevented()||((r=(i=e(n.currentTarget)).data("action"))&&(o={target:this.target,context:this.context},(a=this.options.$angular)?this.element.injector().get("$parse")(r)(a[0])(o):t.getter(r)(window)(o)),this.trigger(c,{target:this.target,context:this.context,currentTarget:i}),n.preventDefault(),this._close())},_close:function(e){this.trigger(l)?e.preventDefault():this.close()}});i.plugin(h)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r="horizontal",o="vertical",a="k-progressbar",s="k-progressbar-indeterminate",l="k-complete",c="k-state-selected",u="k-progress-status",d="k-state-selected",h="k-state-default",p="k-state-disabled",f={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},g="change",m="complete",v=Math,_=e.extend,y=e.proxy,b="<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>",w=i.extend({init:function(e,t){var n=this;i.fn.init.call(this,e,t),t=n.options,n._progressProperty=t.orientation===r?"width":"height",n._fields(),t.value=n._validateValue(t.value),n._validateType(t.type),n._wrapper(),n._progressAnimation(),t.value!==t.min&&!1!==t.value&&n._updateProgress()},setOptions:function(e){var t=this;i.fn.setOptions.call(t,e),e.hasOwnProperty("reverse")&&t.wrapper.toggleClass("k-progressbar-reverse",e.reverse),e.hasOwnProperty("enable")&&t.enable(e.enable),t._progressAnimation(),t._validateValue(),t._updateProgress()},events:[g,m],options:{name:"ProgressBar",orientation:r,reverse:!1,min:0,max:100,value:0,enable:!0,type:f.VALUE,chunkCount:5,showStatus:!0,animation:{}},_fields:function(){var t=this;t._isStarted=!1,t.progressWrapper=t.progressStatus=e()},_validateType:function(i){var r=!1;if(e.each(f,function(e,n){return n===i?(r=!0,!1):t}),!r)throw Error(n.format("Invalid ProgressBar type '{0}'",i))},_wrapper:function(){var e,t=this,n=t.wrapper=t.element,i=t.options,l=i.orientation;n.addClass("k-widget "+a),n.addClass(a+"-"+(l===r?r:o)),!1===i.enable&&n.addClass(p),i.reverse&&n.addClass("k-progressbar-reverse"),!1===i.value&&n.addClass(s),i.type===f.CHUNK?t._addChunkProgressWrapper():i.showStatus&&(t.progressStatus=t.wrapper.prepend(b).find("."+u),e=!1!==i.value?i.value:i.min,t.progressStatus.text(i.type===f.VALUE?e:t._calculatePercentage(e).toFixed()+"%"))},value:function(e){return this._value(e)},_value:function(e){var n,i=this,r=i.options;return e===t?r.value:("boolean"!=typeof e?(e=i._roundValue(e),isNaN(e)||(n=i._validateValue(e))!==r.value&&(i.wrapper.removeClass(s),r.value=n,i._isStarted=!0,i._updateProgress())):e||(i.wrapper.addClass(s),r.value=!1),t)},_roundValue:function(e){e=parseFloat(e);var t=v.pow(10,3);return v.floor(e*t)/t},_validateValue:function(e){var t=this.options;if(!1!==e){if(t.min>=e||!0===e)return t.min;if(e>=t.max)return t.max}else if(!1===e)return!1;return isNaN(this._roundValue(e))?t.min:e},_updateProgress:function(){var e=this,t=e.options,n=e._calculatePercentage();t.type===f.CHUNK?(e._updateChunks(n),e._onProgressUpdateAlways(t.value)):e._updateProgressWrapper(n)},_updateChunks:function(e){var t,n=this,i=n.options,a=i.chunkCount,s=parseInt(100/a*100,10)/100,l=parseInt(100*e,10)/100,c=v.floor(l/s);t=n.wrapper.find(i.orientation===r&&!i.reverse||i.orientation===o&&i.reverse?"li.k-item:lt("+c+")":"li.k-item:gt(-"+(c+1)+")"),n.wrapper.find("."+d).removeClass(d).addClass(h),t.removeClass(h).addClass(d)},_updateProgressWrapper:function(e){var t=this,n=t.options,i=t.wrapper.find("."+c),r=t._isStarted?t._animation.duration:0,o={};0===i.length&&t._addRegularProgressWrapper(),o[t._progressProperty]=e+"%",t.progressWrapper.animate(o,{duration:r,start:y(t._onProgressAnimateStart,t),progress:y(t._onProgressAnimate,t),complete:y(t._onProgressAnimateComplete,t,n.value),always:y(t._onProgressUpdateAlways,t,n.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var t,n=this,i=n.options,r=parseFloat(e.elem.style[n._progressProperty],10);i.showStatus&&(t=1e4/parseFloat(n.progressWrapper[0].style[n._progressProperty]),n.progressWrapper.find(".k-progress-status-wrap").css(n._progressProperty,t+"%")),i.type!==f.CHUNK&&98>=r&&n.progressWrapper.removeClass(l)},_onProgressAnimateComplete:function(e){var t,n=this,i=n.options,r=parseFloat(n.progressWrapper[0].style[n._progressProperty]);i.type!==f.CHUNK&&r>98&&n.progressWrapper.addClass(l),i.showStatus&&(t=i.type===f.VALUE?e:i.type==f.PERCENT?n._calculatePercentage(e).toFixed()+"%":v.floor(n._calculatePercentage(e))+"%",n.progressStatus.text(t)),e===i.min&&n.progressWrapper.hide()},_onProgressUpdateAlways:function(e){var t=this,n=t.options;t._isStarted&&t.trigger(g,{value:e}),e===n.max&&t._isStarted&&t.trigger(m,{value:n.max})},enable:function(e){var n=this.options;n.enable=t===e||e,this.wrapper.toggleClass(p,!n.enable)},destroy:function(){i.fn.destroy.call(this)},_addChunkProgressWrapper:function(){var e,t=this,n=t.options,i=t.wrapper,r=100/n.chunkCount,o="";for(1>=n.chunkCount&&(n.chunkCount=5),o+="<ul class='k-reset'>",e=n.chunkCount-1;e>=0;e--)o+="<li class='k-item k-state-default'></li>";o+="</ul>",i.append(o).find(".k-item").css(t._progressProperty,r+"%").first().addClass("k-first").end().last().addClass("k-last"),t._normalizeChunkSize()},_normalizeChunkSize:function(){var e=this,t=e.options,n=e.wrapper.find(".k-item:last"),i=parseFloat(n[0].style[e._progressProperty]),r=100-t.chunkCount*i;r>0&&n.css(e._progressProperty,i+r+"%")},_addRegularProgressWrapper:function(){var t=this;t.progressWrapper=e("<div class='"+c+"'></div>").appendTo(t.wrapper),t.options.showStatus&&(t.progressWrapper.append(b),t.progressStatus=t.wrapper.find("."+u))},_calculateChunkSize:function(){var e=this,t=e.options.chunkCount,n=e.wrapper.find("ul.k-reset");return(parseInt(n.css(e._progressProperty),10)-(t-1))/t},_calculatePercentage:function(e){var n=this,i=n.options,r=e!==t?e:i.value,o=i.min,a=i.max;return n._onePercent=v.abs((a-o)/100),v.abs((r-o)/n._onePercent)},_progressAnimation:function(){var e=this.options,t=e.animation;this._animation=!1===t?{duration:0}:_({duration:400},e.animation)}});n.ui.plugin(w)}(window.kendo.jQuery),function(e,t,n){"use strict";function i(){function e(){var t,r,o;for(t=0;arguments.length>t;++t){if((r=arguments[t])===n)throw Error("Cannot output undefined to PDF");if(r instanceof m)r.beforeRender(e),r.render(e);else if(D(r))h(r,e);else if(d(r))p(r,e);else if("number"==typeof r){if(isNaN(r))throw Error("Cannot output NaN to PDF");(o=r.toFixed(7)).indexOf(".")>=0&&(o=o.replace(/\.?0+$/,"")),"-0"==o&&(o="0"),i.writeString(o)}else/string|boolean/.test(typeof r)?i.writeString(r+""):"function"==typeof r.get?i.write(r.get()):"object"==typeof r&&(r?e(new R(r)):i.writeString("null"))}}var t=0,i=C();return e.writeData=function(e){i.write(e)},e.withIndent=function(n){++t,n(e),--t},e.indent=function(){e(W,l("",2*t,"  ")),e.apply(null,arguments)},e.offset=function(){return i.offset()},e.toString=function(){throw Error("FIX CALLER")},e.get=function(){return i.get()},e.stream=function(){return i},e}function r(e){var t,n=e("paperSize",G.a4);if(!n)return{};if("string"==typeof n&&null==(n=G[n.toLowerCase()]))throw Error("Unknown paper size");return n[0]=g(n[0]),n[1]=g(n[1]),e("landscape",!1)&&(n=[Math.max(n[0],n[1]),Math.min(n[0],n[1])]),(t=e("margin"))&&(t="string"==typeof t||"number"==typeof t?{left:t=g(t,0),top:t,right:t,bottom:t}:{left:g(t.left,0),top:g(t.top,0),right:g(t.right,0),bottom:g(t.bottom,0)},e("addMargin")&&(n[0]+=t.left+t.right,n[1]+=t.top+t.bottom)),{paperSize:n,margin:t}}function o(e){function t(t,n){return e&&null!=e[t]?e[t]:n}var n,o,a=this,s=i(),l=0,u=[];a.getOption=t,a.attach=function(e){return u.indexOf(e)<0&&(function(e,t){var n=e.beforeRender,i=e.render;e.beforeRender=function(){},e.render=function(e){e(t," 0 R")},e.renderFull=function(r){e._offset=r.offset(),r(t," 0 obj "),n.call(e,r),i.call(e,r),r(" endobj")}}(e,++l),u.push(e)),e},a.pages=[],a.FONTS={},a.IMAGES={},a.GRAD_COL_FUNCTIONS={},a.GRAD_OPC_FUNCTIONS={},a.GRAD_COL={},a.GRAD_OPC={},n=a.attach(new L),o=a.attach(new F),n.setPages(o),a.addPage=function(e){var t,n,s,l=r(function(t,n){return e&&null!=e[t]?e[t]:n}),c=l.paperSize,u=l.margin,d=c[0],h=c[1];return u&&(d-=u.left+u.right,h-=u.top+u.bottom),t=new P(i(),null,!0),n={Contents:a.attach(t),Parent:o,MediaBox:[0,0,c[0],c[1]]},(s=new N(a,n))._content=t,o.addPage(a.attach(s)),s.transform(1,0,0,-1,0,c[1]),u&&(s.translate(u.left,u.top),s.rect(0,0,d,h),s.clip()),a.pages.push(s),s},a.render=function(){var e,i;for(s("%PDF-1.4",W,"%ÂÁÚÏÎ",W,W),e=0;u.length>e;++e)u[e].renderFull(s),s(W,W);for(i=s.offset(),s("xref",W,0," ",u.length+1,W),s("0000000000 65535 f ",W),e=0;u.length>e;++e)s(c(u[e]._offset,10)," 00000 n ",W);return s(W),s("trailer",W),s(new R({Size:u.length+1,Root:n,Info:new R({Producer:new A(t("producer","Kendo UI PDF Generator")),Title:new A(t("title","")),Author:new A(t("author","")),Subject:new A(t("subject","")),Keywords:new A(t("keywords","")),Creator:new A(t("creator","Kendo UI PDF Generator")),CreationDate:t("date",new Date)})}),W,W),s("startxref",W,i,W),s("%%EOF",W),s.stream().offset(0)}}function a(t,n){function i(){e.console&&(e.console.error?e.console.error("Cannot load URL: %s",t):e.console.log("Cannot load URL: %s",t)),n(null)}var r=new XMLHttpRequest;r.open("GET",t,!0),U&&(r.responseType="arraybuffer"),r.onload=function(){200==r.status||304==r.status?n(U?new Uint8Array(r.response):new VBArray(r.responseBody).toArray()):i()},r.onerror=i,r.send(null)}function s(e){return function(t,n){var i=t.length,r=i;if(0===i)return n();for(;r-- >0;)e(t[r],function(){0==--i&&n()})}}function l(e,t,n){for(;t>e.length;)e=n+e;return e}function c(e,t){return l(e+"",t,"0")}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e){return e instanceof Date}function h(e,t){t("["),e.length>0&&t.withIndent(function(){for(var n=0;e.length>n;++n)n>0&&n%8==0?t.indent(e[n]):t(" ",e[n])}),t(" ]")}function p(e,t){t("(D:",c(e.getUTCFullYear(),4),c(e.getUTCMonth()+1,2),c(e.getUTCDate(),2),c(e.getUTCHours(),2),c(e.getUTCMinutes(),2),c(e.getUTCSeconds(),2),"Z)")}function f(e){return e*(72/25.4)}function g(e,n){var i,r;if("number"==typeof e)return e;if("string"==typeof e&&(i=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e))&&(r=t(i[1]),!isNaN(r)))return"pt"==i[2]?r:{mm:f,cm:function(e){return f(10*e)},in:function(e){return 72*e}}[i[2]](r);if(null!=n)return n;throw Error("Can't parse unit: "+e)}function m(){}function v(e,t,n){for(var i in n||(n=m),e.prototype=new n,t)u(t,i)&&(e.prototype[i]=t[i]);return e}function _(e){return u(I,e)?I[e]:I[e]=new E(e)}function y(e,t,n){this.asStream=function(){var i=new P(n,{Type:_("XObject"),Subtype:_("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:_("DeviceRGB"),Filter:_("DCTDecode")});return i._resourceName=_("I"+ ++j),i}}function b(e){return e.map(function(e){return D(e)?b(e):"number"==typeof e?(Math.round(1e3*e)/1e3).toFixed(3):e}).join(" ")}function w(e,t,n,i,r,o,a){var s=b([t,n,i,r,o,a]),l=e.GRAD_COL_FUNCTIONS[s];return l||(l=e.GRAD_COL_FUNCTIONS[s]=e.attach(new R({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[t,n,i],C1:[r,o,a]}))),l}function k(e,t,n){var i=b([t,n]),r=e.GRAD_OPC_FUNCTIONS[i];return r||(r=e.GRAD_OPC_FUNCTIONS[i]=e.attach(new R({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[t],C1:[n]}))),r}function x(e,t,n){var i="radial"==t.type,r=function(e,t){function n(e){return 1==e.length?e[0]:{FunctionType:3,Functions:e,Domain:[0,1],Bounds:d,Encode:h}}var i,r,o,a,s,l=!1,c=[],u=[],d=[],h=[];for(i=1;t.length>i;++i)r=t[i-1],o=t[i],a=r.color,s=o.color,u.push(w(e,a.r,a.g,a.b,s.r,s.g,s.b)),(1>a.a||1>s.a)&&(l=!0),d.push(o.offset),h.push(0,1);if(l)for(i=1;t.length>i;++i)r=t[i-1],o=t[i],a=r.color,s=o.color,c.push(k(e,a.a,s.a));return d.pop(),{hasAlpha:l,colors:n(u),opacities:l?n(c):null}}(e,t.stops),o=i?[t.start.x,t.start.y,t.start.r,t.end.x,t.end.y,t.end.r]:[t.start.x,t.start.y,t.end.x,t.end.y],a=function(e,t,n,i,r,o){var a,s,l;return o||(l=[t].concat(i),n.forEach(function(e){l.push(e.offset,e.color.r,e.color.g,e.color.b)}),s=b(l),a=e.GRAD_COL[s]),a||(a=new R({Type:_("Shading"),ShadingType:t?3:2,ColorSpace:_("DeviceRGB"),Coords:i,Domain:[0,1],Function:r,Extend:[!0,!0]}),e.attach(a),a._resourceName="S"+ ++j,s&&(e.GRAD_COL[s]=a)),a}(e,i,t.stops,o,r.colors,t.userSpace&&n),s=r.hasAlpha?function(e,t,n,i,r,o){var a,s,l;return o||(l=[t].concat(i),n.forEach(function(e){l.push(e.offset,e.color.a)}),s=b(l),a=e.GRAD_OPC[s]),a||(a=new R({Type:_("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:_("Mask"),S:_("Luminosity"),G:e.attach(new P("/a0 gs /s0 sh",{Type:_("XObject"),Subtype:_("Form"),FormType:1,BBox:o?[o.left,o.top+o.height,o.left+o.width,o.top]:[0,1,1,0],Group:{Type:_("Group"),S:_("Transparency"),CS:_("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:_("DeviceGray"),Coords:i,Domain:[0,1],ShadingType:t?3:2,Function:r,Extend:[!0,!0]}}}}))}}),e.attach(a),a._resourceName="O"+ ++j,s&&(e.GRAD_OPC[s]=a)),a}(e,i,t.stops,o,r.opacities,t.userSpace&&n):null;return{hasAlpha:r.hasAlpha,shading:a,opacity:s}}function C(t){function n(){return _>v?t[v++]:0}function i(e){p(v),t[v++]=255&e,v>_&&(_=v)}function r(){return n()<<8|n()}function o(e){i(e>>8),i(e)}function a(){return 65536*r()+r()}function s(e){o(e>>>16&65535),o(65535&e)}function l(){var e=a();return e>=2147483648?e-4294967296:e}function c(e){s(0>e?e+4294967296:e)}function u(e){return h(e,n)}function d(e){for(var t=0;e.length>t;++t)i(e.charCodeAt(t))}function h(e,t){for(var n=Array(e),i=0;e>i;++i)n[i]=t();return n}var p,f,g,m,v=0,_=0;return null==t?t=U?new Uint8Array(256):[]:_=t.length,p=U?function(e){if(e>=t.length){var n=new Uint8Array(Math.max(e+256,2*t.length));n.set(t,0),t=n}}:function(){},f=U?function(){return new Uint8Array(t.buffer,0,_)}:function(){return t},m={eof:function(){return v>=_},readByte:n,writeByte:i,readShort:r,writeShort:o,readLong:a,writeLong:s,readFixed:function(){return a()/65536},writeFixed:function(e){s(Math.round(65536*e))},readShort_:function(){var e=r();return e>=32768?e-65536:e},writeShort_:function(e){o(0>e?e+65536:e)},readLong_:l,writeLong_:c,readFixed_:function(){return l()/65536},writeFixed_:function(e){c(Math.round(65536*e))},read:u,write:g=U?function(e){if("string"==typeof e)return d(e);var n=e.length;p(v+n),t.set(e,v),(v+=n)>_&&(_=v)}:function(e){if("string"==typeof e)return d(e);for(var t=0;e.length>t;++t)i(e[t])},readString:function(e){return String.fromCharCode.apply(String,u(e))},writeString:d,times:h,get:f,slice:U?function(e,n){if(t.buffer.slice)return new Uint8Array(t.buffer.slice(e,e+n));var i=new Uint8Array(n);return i.set(new Uint8Array(t.buffer,e,n)),i}:function(e,n){return t.slice(e,e+n)},offset:function(e){return null!=e?(v=e,m):v},skip:function(e){v+=e},toString:function(){throw Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return _},saveExcursion:function(e){var t=v;try{return e()}finally{v=t}},writeBase64:function(t){e.atob?d(e.atob(t)):g(q.decode(t))},base64:function(){return q.encode(f())}}}function T(e){return e.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function S(e,t){e=e.toLowerCase(),O[e]=function(){return O[t]},O[e+"|bold"]=function(){return O[t+"|bold"]},O[e+"|italic"]=function(){return O[t+"|italic"]},O[e+"|bold|italic"]=function(){return O[t+"|bold|italic"]}}var D,A,M,E,I,R,P,L,F,B,z,H,N,O,V=e.kendo,U=!!e.Uint8Array,W="\n",j=0,q=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(t){for(var n,i,r,o,a,s,l=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),c=0,u=l.length,d=[];u>c;)o=e.indexOf(l.charAt(c++))<<2|(n=e.indexOf(l.charAt(c++)))>>>4,a=(15&n)<<4|(i=e.indexOf(l.charAt(c++)))>>>2,s=(3&i)<<6|(r=e.indexOf(l.charAt(c++))),d.push(o),64!=i&&d.push(a),64!=r&&d.push(s);return d},encode:function(t){for(var n,i,r,o,a,s,l=0,c=t.length,u="";c>l;)o=(3&(n=t[l++]))<<4|(i=t[l++])>>>4,a=(15&i)<<2|(r=t[l++])>>>6,s=63&r,l-c==2?a=s=64:l-c==1&&(s=64),u+=e.charAt(n>>>2)+e.charAt(o)+e.charAt(a)+e.charAt(s);return u}}}(),G={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]},$={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0},Y={},Q=s(function(e,t){var n=$[e];n?t(n):a(e,function(n){if(null==n)throw Error("Cannot load font from "+e);var i=new V.pdf.TTFFont(n);$[e]=i,t(i)})}),X=s(function(e,t){function i(e){c.src=e,c.complete&&!V.support.browser.msie?o():(c.onload=o,c.onerror=r)}function r(){t(Y[e]="TAINTED")}function o(){var i,o,l,u,d,h,p,f,g,m,v,b;if(s&&/^image\/jpe?g$/i.test(s.type))return(i=new FileReader).onload=function(){c=new y(c.width,c.height,C(new Uint8Array(this.result))),URL.revokeObjectURL(a),t(Y[e]=c)},i.readAsArrayBuffer(s),n;(o=document.createElement("canvas")).width=c.width,o.height=c.height,(l=o.getContext("2d")).drawImage(c,0,0);try{u=l.getImageData(0,0,c.width,c.height)}catch(e){return r()}finally{a&&URL.revokeObjectURL(a)}for(d=!1,h=C(),p=C(),f=u.data,g=0;f.length>g;)h.writeByte(f[g++]),h.writeByte(f[g++]),h.writeByte(f[g++]),255>(m=f[g++])&&(d=!0),p.writeByte(m);d?c=new function(e,t,n,i){this.asStream=function(r){var o=new P(i,{Type:_("XObject"),Subtype:_("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:_("DeviceGray")},!0),a=new P(n,{Type:_("XObject"),Subtype:_("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:_("DeviceRGB"),SMask:r.attach(o)},!0);return a._resourceName=_("I"+ ++j),a}}(c.width,c.height,h,p):(v=(v=o.toDataURL("image/jpeg")).substr(v.indexOf(";base64,")+8),(b=C()).writeBase64(v),b.offset(0),c=new y(c.width,c.height,b)),t(Y[e]=c)}var a,s,l,c=Y[e];c?t(c):(c=new Image,/^data:/i.test(e)||(c.crossOrigin="Anonymous"),U&&!/^data:/i.test(e)?((l=new XMLHttpRequest).onload=function(){s=l.response,i(a=URL.createObjectURL(s))},l.onerror=r,l.open("GET",e,!0),l.responseType="blob",l.send()):i(e))});o.prototype={loadFonts:Q,loadImages:X,getFont:function(e){var t=this.FONTS[e];if(!t){if(!(t=$[e]))throw Error("Font "+e+" has not been loaded");t=this.attach(!0===t?new B(e):new z(this,t)),this.FONTS[e]=t}return t},getImage:function(e){var t=this.IMAGES[e];if(!t){if(!(t=Y[e]))throw Error("Image "+e+" has not been loaded");if("TAINTED"===t)return null;t=this.IMAGES[e]=this.attach(t.asStream(this))}return t},getOpacityGS:function(e,n){var i,r,o,a=t(e).toFixed(3);return e=t(a),a+=n?"S":"F",(r=(i=this._opacityGSCache||(this._opacityGSCache={}))[a])||(o={Type:_("ExtGState")},n?o.CA=e:o.ca=e,(r=this.attach(new R(o)))._resourceName=_("GS"+ ++j),i[a]=r),r},dict:function(e){return new R(e)},name:function(e){return _(e)},stream:function(e,t){return new P(t,e)}},D=Array.isArray||function(e){return e instanceof Array},m.prototype.beforeRender=function(){},A=v(function(e){this.value=e},{render:function(e){var t,n="",i=this.escape();for(t=0;i.length>t;++t)n+=String.fromCharCode(255&i.charCodeAt(t));e("(",n,")")},escape:function(){return this.value.replace(/([\(\)\\])/g,"\\$1")},toString:function(){return this.value}}),M=v(function(e){this.value=e},{render:function(e){e("<");for(var t=0;this.value.length>t;++t)e(c(this.value.charCodeAt(t).toString(16),4));e(">")}},A),E=v(function(e){this.name=e},{render:function(e){e("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(e){return"#"+c(e.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}}),I={},E.get=_,R=v(function(e){this.props=e},{render:function(e){var t=this.props,n=!0;e("<<"),e.withIndent(function(){for(var i in t)u(t,i)&&!/^_/.test(i)&&(n=!1,e.indent(_(i)," ",t[i]))}),n||e.indent(),e(">>")}}),P=v(function(e,t,n){if("string"==typeof e){var i=C();i.write(e),e=i}this.data=e,this.props=t||{},this.compress=n},{render:function(t){var n=this.data.get(),i=this.props;this.compress&&e.pako&&"function"==typeof e.pako.deflate&&(i.Filter?i.Filter instanceof Array||(i.Filter=[i.Filter]):i.Filter=[],i.Filter.unshift(_("FlateDecode")),n=e.pako.deflate(n)),i.Length=n.length,t(new R(i)," stream",W),t.writeData(n),t(W,"endstream")}}),L=v(function(e){(e=this.props=e||{}).Type=_("Catalog")},{setPages:function(e){this.props.Pages=e}},R),F=v(function(){this.props={Type:_("Pages"),Kids:[],Count:0}},{addPage:function(e){this.props.Kids.push(e),this.props.Count++}},R),B=v(function(e){this.props={Type:_("Font"),Subtype:_("Type1"),BaseFont:_(e)},this._resourceName=_("F"+ ++j)},{encodeText:function(e){return new A(e+"")}},R),z=v(function(e,t,n){var i,r;(n=this.props=n||{}).Type=_("Font"),n.Subtype=_("Type0"),n.Encoding=_("Identity-H"),this._pdf=e,this._font=t,this._sub=t.makeSubset(),this._resourceName=_("F"+ ++j),i=t.head,this.name=t.psName,r=this.scale=t.scale,this.bbox=[i.xMin*r,i.yMin*r,i.xMax*r,i.yMax*r],this.italicAngle=t.post.italicAngle,this.ascent=t.ascent*r,this.descent=t.descent*r,this.lineGap=t.lineGap*r,this.capHeight=t.os2.capHeight||this.ascent,this.xHeight=t.os2.xHeight||0,this.stemV=0,this.familyClass=(t.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&7>=this.familyClass,this.isScript=10==this.familyClass,this.flags=(t.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32},{encodeText:function(e){return new M(this._sub.encodeText(e+""))},getTextWidth:function(e,t){var n,i,r=0,o=this._font.cmap.getUnicodeEntry().codeMap;for(n=0;t.length>n;++n)i=o[t.charCodeAt(n)],r+=this._font.widthOfGlyph(i||0);return r*e/1e3},beforeRender:function(){var e,t,n,r,o=this,a=o._sub,s=a.render(),l=new P(C(s),{Length1:s.length},!0),c=o._pdf.attach(new R({Type:_("FontDescriptor"),FontName:_(o._sub.psName),FontBBox:o.bbox,Flags:o.flags,StemV:o.stemV,ItalicAngle:o.italicAngle,Ascent:o.ascent,Descent:o.descent,CapHeight:o.capHeight,XHeight:o.xHeight,FontFile2:o._pdf.attach(l)})),u=a.ncid2ogid,d=a.firstChar,h=a.lastChar,p=[];!function e(t,n){if(h>=t){var i=u[t];null==i?e(t+1):(n||p.push(t,n=[]),n.push(o._font.widthOfGlyph(i)),e(t+1,n))}}(d),e=new R({Type:_("Font"),Subtype:_("CIDFontType2"),BaseFont:_(o._sub.psName),CIDSystemInfo:new R({Registry:new A("Adobe"),Ordering:new A("Identity"),Supplement:0}),FontDescriptor:c,FirstChar:d,LastChar:h,DW:Math.round(o._font.widthOfGlyph(0)),W:p,CIDToGIDMap:o._pdf.attach(o._makeCidToGidMap())}),(t=o.props).BaseFont=_(o._sub.psName),t.DescendantFonts=[o._pdf.attach(e)],n=new H(d,h,a.subset),(r=new P(i(),null,!0)).data(n),t.ToUnicode=o._pdf.attach(r)},_makeCidToGidMap:function(){return new P(C(this._sub.cidToGidMap()),null,!0)}},R),H=v(function(e,t,n){this.firstChar=e,this.lastChar=t,this.map=n},{render:function(e){e.indent("/CIDInit /ProcSet findresource begin"),e.indent("12 dict begin"),e.indent("begincmap"),e.indent("/CIDSystemInfo <<"),e.indent("  /Registry (Adobe)"),e.indent("  /Ordering (UCS)"),e.indent("  /Supplement 0"),e.indent(">> def"),e.indent("/CMapName /Adobe-Identity-UCS def"),e.indent("/CMapType 2 def"),e.indent("1 begincodespacerange"),e.indent("  <0000><ffff>"),e.indent("endcodespacerange");var t=this;e.indent(t.lastChar-t.firstChar+1," beginbfchar"),e.withIndent(function(){var n,i;for(n=t.firstChar;t.lastChar>=n;++n)i=t.map[n],e.indent("<",c(n.toString(16),4),">","<",c(i.toString(16),4),">")}),e.indent("endbfchar"),e.indent("endcmap"),e.indent("CMapName currentdict /CMap defineresource pop"),e.indent("end"),e.indent("end")}}),N=v(function(e,t){this._pdf=e,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._annotations=[],this._font=null,this._fontSize=null,this._contextStack=[],(t=this.props=t||{}).Type=_("Page"),t.ProcSet=[_("PDF"),_("Text"),_("ImageB"),_("ImageC"),_("ImageI")],t.Resources=new R({Font:new R(this._fontResources),ExtGState:new R(this._gsResources),XObject:new R(this._xResources),Pattern:new R(this._patResources),Shading:new R(this._shResources)}),t.Annots=this._annotations},{_out:function(){this._content.data.apply(null,arguments)},transform:function(e,t,n,i,r,o){(function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]})(arguments)||(this._matrix=function(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],u=t[2],d=t[3];return[n*l+i*u,n*c+i*d,r*l+o*u,r*c+o*d,a*l+s*u+t[4],a*c+s*d+t[5]]}(arguments,this._matrix),this._out(e," ",t," ",n," ",i," ",r," ",o," cm"),this._out(W))},translate:function(e,t){this.transform(1,0,0,1,e,t)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),n=Math.sin(e);this.transform(t,n,-n,t,0,0)},beginText:function(){this._textMode=!0,this._out("BT",W)},endText:function(){this._textMode=!1,this._out("ET",W)},_requireTextMode:function(){if(!this._textMode)throw Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw Error("No font selected; call page.setFont() first")},setFont:function(e,t){this._requireTextMode(),null==e?e=this._font:e instanceof z||(e=this._pdf.getFont(e)),null==t&&(t=this._fontSize),this._fontResources[e._resourceName]=e,this._font=e,this._fontSize=t,this._out(e._resourceName," ",t," Tf",W)},setTextLeading:function(e){this._requireTextMode(),this._out(e," TL",W)},setTextRenderingMode:function(e){this._requireTextMode(),this._out(e," Tr",W)},showText:function(e,t){var n;this._requireFont(),e.length>1&&t&&this._font instanceof z&&(n=t/this._font.getTextWidth(this._fontSize,e)*100,this._out(n," Tz ")),this._out(this._font.encodeText(e)," Tj",W)},showTextNL:function(e){this._requireFont(),this._out(this._font.encodeText(e)," '",W)},addLink:function(e,t){var n=this._toPage({x:t.left,y:t.bottom}),i=this._toPage({x:t.right,y:t.top});this._annotations.push(new R({Type:_("Annot"),Subtype:_("Link"),Rect:[n.x,n.y,i.x,i.y],Border:[0,0,0],A:new R({Type:_("Action"),S:_("URI"),URI:new A(e)})}))},setStrokeColor:function(e,t,n){this._out(e," ",t," ",n," RG",W)},setOpacity:function(e){this.setFillOpacity(e),this.setStrokeOpacity(e),this._opacity*=e},setStrokeOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!0);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",W)}},setFillColor:function(e,t,n){this._out(e," ",t," ",n," rg",W)},setFillOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!1);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",W)}},gradient:function(e,t){var n,i,r;this.save(),this.rect(t.left,t.top,t.width,t.height),this.clip(),e.userSpace||this.transform(t.width,0,0,t.height,t.left,t.top),i=(n=x(this._pdf,e,t)).shading._resourceName,this._shResources[i]=n.shading,n.hasAlpha&&(r=n.opacity._resourceName,this._gsResources[r]=n.opacity,this._out("/"+r+" gs ")),this._out("/"+i+" sh",W),this.restore()},setDashPattern:function(e,t){this._out(e," ",t," d",W)},setLineWidth:function(e){this._out(e," w",W)},setLineCap:function(e){this._out(e," J",W)},setLineJoin:function(e){this._out(e," j",W)},setMitterLimit:function(e){this._out(e," M",W)},save:function(){this._contextStack.push(this._context()),this._out("q",W)},restore:function(){this._out("Q",W),this._context(this._contextStack.pop())},moveTo:function(e,t){this._out(e," ",t," m",W)},lineTo:function(e,t){this._out(e," ",t," l",W)},bezier:function(e,t,n,i,r,o){this._out(e," ",t," ",n," ",i," ",r," ",o," c",W)},bezier1:function(e,t,n,i){this._out(e," ",t," ",n," ",i," y",W)},bezier2:function(e,t,n,i){this._out(e," ",t," ",n," ",i," v",W)},close:function(){this._out("h",W)},rect:function(e,t,n,i){this._out(e," ",t," ",n," ",i," re",W)},ellipse:function(e,t,n,i){function r(t){return e+t}function o(e){return t+e}var a=.5522847498307936;this.moveTo(r(0),o(i)),this.bezier(r(n*a),o(i),r(n),o(i*a),r(n),o(0)),this.bezier(r(n),o(-i*a),r(n*a),o(-i),r(0),o(-i)),this.bezier(r(-n*a),o(-i),r(-n),o(-i*a),r(-n),o(0)),this.bezier(r(-n),o(i*a),r(-n*a),o(i),r(0),o(i))},circle:function(e,t,n){this.ellipse(e,t,n,n)},stroke:function(){this._out("S",W)},nop:function(){this._out("n",W)},clip:function(){this._out("W n",W)},clipStroke:function(){this._out("W S",W)},closeStroke:function(){this._out("s",W)},fill:function(){this._out("f",W)},fillStroke:function(){this._out("B",W)},drawImage:function(e){var t=this._pdf.getImage(e);t&&(this._xResources[t._resourceName]=t,this._out(t._resourceName," Do",W))},comment:function(e){var t=this;e.split(/\r?\n/g).forEach(function(e){t._out("% ",e,W)})},_context:function(e){return null==e?{opacity:this._opacity,matrix:this._matrix}:(this._opacity=e.opacity,this._matrix=e.matrix,n)},_toPage:function(e){var t=this._matrix,n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5];return{x:n*e.x+r*e.y+a,y:i*e.x+o*e.y+s}}},R),O={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique",zapfdingbats:"ZapfDingbats","zapfdingbats|bold":"ZapfDingbats","zapfdingbats|italic":"ZapfDingbats","zapfdingbats|bold|italic":"ZapfDingbats"},S("Times New Roman","serif"),S("Courier New","monospace"),S("Arial","sans-serif"),S("Helvetica","sans-serif"),S("Verdana","sans-serif"),S("Tahoma","sans-serif"),S("Georgia","sans-serif"),S("Monaco","monospace"),S("Andale Mono","monospace"),V.pdf={Document:o,BinaryStream:C,defineFont:function e(t,n){if(1==arguments.length)for(var i in t)u(t,i)&&e(i,t[i]);else switch(t=t.toLowerCase(),O[t]=n,t){case"dejavu sans":O["sans-serif"]=n;break;case"dejavu sans|bold":O["sans-serif|bold"]=n;break;case"dejavu sans|italic":O["sans-serif|italic"]=n;break;case"dejavu sans|bold|italic":O["sans-serif|bold|italic"]=n;break;case"dejavu serif":O.serif=n;break;case"dejavu serif|bold":O["serif|bold"]=n;break;case"dejavu serif|italic":O["serif|italic"]=n;break;case"dejavu serif|bold|italic":O["serif|bold|italic"]=n;break;case"dejavu mono":O.monospace=n;break;case"dejavu mono|bold":O["monospace|bold"]=n;break;case"dejavu mono|italic":O["monospace|italic"]=n;break;case"dejavu mono|bold|italic":O["monospace|bold|italic"]=n}},parseFontDef:function(e){var t,n=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i.exec(e);return n?(t=n[8]?parseInt(n[8],10):12,{italic:n[2]&&"italic"==n[2].toLowerCase(),variant:n[4],bold:n[6]&&/bold|700/i.test(n[6]),fontSize:t,lineHeight:n[12]?"normal"==n[12]?t:parseInt(n[12],10):null,fontFamily:n[14].split(/\s*,\s*/g).map(T)}):{fontSize:12,fontFamily:"sans-serif"}},getFontURL:function(e){function t(t){return e.bold&&(t+="|bold"),e.italic&&(t+="|italic"),t.toLowerCase()}var n,i,r,o=e.fontFamily;if(o instanceof Array)for(r=0;o.length>r&&(n=t(o[r]),!(i=O[n]));++r);else i=O[o.toLowerCase()];for(;"function"==typeof i;)i=i();return i||(i="Times-Roman"),i},loadFonts:Q,loadImages:X,getPaperOptions:r,TEXT_RENDERING_MODE:{fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7}}}(window,parseFloat),function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return Object.keys(e).sort(function(e,t){return e-t}).map(parseFloat)}function i(e){var t,n,i;for(this.raw=e,this.scalerType=e.readLong(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),t=this.tables={},n=0;this.tableCount>n;++n)t[(i={tag:e.readString(4),checksum:e.readLong(),offset:e.readLong(),length:e.readLong()}).tag]=i}function r(e){function n(e,t){this.definition=t,this.length=t.length,this.offset=t.offset,this.file=e,this.rawData=e.raw,this.parse(e.raw)}for(var i in n.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)},e)t(e,i)&&(n[i]=n.prototype[i]=e[i]);return n}function o(e){this.font=e,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=function(){var e,t="",n=v+"";for(e=0;n.length>e;++e)t+=String.fromCharCode(n.charCodeAt(e)-48+65);return++v,t}()+"+"+this.font.psName}function a(e,t){var n,i,r,o=this,a=o.contents=y(e);if("ttcf"==a.readString(4)){if(!t)throw Error("Must specify a name for TTC files");for(a.readLong(),n=a.readLong(),i=0;n>i;++i)if(r=a.readLong(),a.saveExcursion(function(){a.offset(r),o.parse()}),o.psName==t)return;throw Error("Font "+t+" not found in collection")}a.offset(0),o.parse()}var s,l,c,u,d,h,p,f,g,m,v,_=e.kendo.pdf,y=_.BinaryStream;i.prototype={readTable:function(e,t){var n=this.tables[e];if(!n)throw Error("Table "+e+" not found in directory");return this[e]=n.table=new t(this,n)},render:function(e){var n,i,r,o,a,s,l,c=Object.keys(e).length,u=Math.pow(2,Math.floor(Math.log(c)/Math.LN2)),d=16*u,h=Math.floor(Math.log(u)/Math.LN2),p=16*c-d,f=y();for(a in f.writeLong(this.scalerType),f.writeShort(c),f.writeShort(d),f.writeShort(h),f.writeShort(p),n=16*c,i=f.offset()+n,r=null,o=y(),e)if(t(e,a))for(s=e[a],f.writeString(a),f.writeLong(this.checksum(s)),f.writeLong(i),f.writeLong(s.length),o.write(s),"head"==a&&(r=i),i+=s.length;i%4;)o.writeByte(0),i++;return f.write(o.get()),l=2981146554-this.checksum(f.get()),f.offset(r+8),f.writeLong(l),f.get()},checksum:function(e){e=y(e);for(var t=0;!e.eof();)t+=e.readLong();return 4294967295&t}},s=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.revision=e.readLong(),this.checkSumAdjustment=e.readLong(),this.magicNumber=e.readLong(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.read(8),this.modified=e.read(8),this.xMin=e.readShort_(),this.yMin=e.readShort_(),this.xMax=e.readShort_(),this.yMax=e.readShort_(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort_(),this.indexToLocFormat=e.readShort_(),this.glyphDataFormat=e.readShort_()},render:function(e){var t=y();return t.writeLong(this.version),t.writeLong(this.revision),t.writeLong(0),t.writeLong(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.write(this.created),t.write(this.modified),t.writeShort_(this.xMin),t.writeShort_(this.yMin),t.writeShort_(this.xMax),t.writeShort_(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort_(this.fontDirectionHint),t.writeShort_(e),t.writeShort_(this.glyphDataFormat),t.get()}}),l=r({parse:function(e){e.offset(this.offset);var t=this.file.head.indexToLocFormat;this.offsets=0===t?e.times(this.length/2,function(){return 2*e.readShort()}):e.times(this.length/4,e.readLong)},offsetOf:function(e){return this.offsets[e]},lengthOf:function(e){return this.offsets[e+1]-this.offsets[e]},render:function(e){var t,n=y(),i=e[e.length-1]>65535;for(t=0;e.length>t;++t)i?n.writeLong(e[t]):n.writeShort(e[t]/2);return{format:i?1:0,table:n.get()}}}),c=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort_(),this.minRightSideBearing=e.readShort_(),this.xMaxExtent=e.readShort_(),this.caretSlopeRise=e.readShort_(),this.caretSlopeRun=e.readShort_(),this.caretOffset=e.readShort_(),e.skip(8),this.metricDataFormat=e.readShort_(),this.numOfLongHorMetrics=e.readShort()},render:function(e){var t=y();return t.writeLong(this.version),t.writeShort_(this.ascent),t.writeShort_(this.descent),t.writeShort_(this.lineGap),t.writeShort(this.advanceWidthMax),t.writeShort_(this.minLeftSideBearing),t.writeShort_(this.minRightSideBearing),t.writeShort_(this.xMaxExtent),t.writeShort_(this.caretSlopeRise),t.writeShort_(this.caretSlopeRun),t.writeShort_(this.caretOffset),t.write([0,0,0,0,0,0,0,0]),t.writeShort_(this.metricDataFormat),t.writeShort(e.length),t.get()}}),u=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.numGlyphs=e.readShort(),this.maxPoints=e.readShort(),this.maxContours=e.readShort(),this.maxComponentPoints=e.readShort(),this.maxComponentContours=e.readShort(),this.maxZones=e.readShort(),this.maxTwilightPoints=e.readShort(),this.maxStorage=e.readShort(),this.maxFunctionDefs=e.readShort(),this.maxInstructionDefs=e.readShort(),this.maxStackElements=e.readShort(),this.maxSizeOfInstructions=e.readShort(),this.maxComponentElements=e.readShort(),this.maxComponentDepth=e.readShort()},render:function(e){var t=y();return t.writeLong(this.version),t.writeShort(e.length),t.writeShort(this.maxPoints),t.writeShort(this.maxContours),t.writeShort(this.maxComponentPoints),t.writeShort(this.maxComponentContours),t.writeShort(this.maxZones),t.writeShort(this.maxTwilightPoints),t.writeShort(this.maxStorage),t.writeShort(this.maxFunctionDefs),t.writeShort(this.maxInstructionDefs),t.writeShort(this.maxStackElements),t.writeShort(this.maxSizeOfInstructions),t.writeShort(this.maxComponentElements),t.writeShort(this.maxComponentDepth),t.get()}}),d=r({parse:function(e){var t,n,i;e.offset(this.offset),n=(t=this.file).hhea,this.metrics=e.times(n.numOfLongHorMetrics,function(){return{advance:e.readShort(),lsb:e.readShort_()}}),i=t.maxp.numGlyphs-t.hhea.numOfLongHorMetrics,this.leftSideBearings=e.times(i,e.readShort_)},forGlyph:function(e){var t=this.metrics,n=t.length;return n>e?t[e]:{advance:t[n-1].advance,lsb:this.leftSideBearings[e-n]}},render:function(e){var t,n,i=y();for(t=0;e.length>t;++t)n=this.forGlyph(e[t]),i.writeShort(n.advance),i.writeShort_(n.lsb);return i.get()}}),h=function(){function e(e){this.raw=e}function n(e){var t,n,r;for(this.raw=e,t=this.glyphIds=[],n=this.idOffsets=[];r=e.readShort(),n.push(e.offset()),t.push(e.readShort()),r&a;)e.skip(r&i?4:2),r&l?e.skip(8):r&s?e.skip(4):r&o&&e.skip(2)}var i,o,a,s,l;return e.prototype={compound:!1,render:function(){return this.raw.get()}},i=1,o=8,a=32,s=64,l=128,n.prototype={compound:!0,render:function(e){var t,n,i=y(this.raw.get());for(t=0;this.glyphIds.length>t;++t)n=this.glyphIds[t],i.offset(this.idOffsets[t]),i.writeShort(e[n]);return i.get()}},r({parse:function(){this.cache={}},glyphFor:function(i){var r,o,a,s,l,c,u,d,h,p,f,g=this.cache;return t(g,i)?g[i]:0===(o=(r=this.file.loca).lengthOf(i))?g[i]=null:(a=this.rawData,s=this.offset+r.offsetOf(i),c=(l=y(a.slice(s,o))).readShort_(),u=l.readShort_(),d=l.readShort_(),h=l.readShort_(),p=l.readShort_(),(f=g[i]=-1==c?new n(l):new e(l)).numberOfContours=c,f.xMin=u,f.yMin=d,f.xMax=h,f.yMax=p,f)},render:function(e,t,n){var i,r,o=y(),a=[];for(i=0;t.length>i;++i)r=e[t[i]],a.push(o.offset()),r&&o.write(r.render(n));return a.push(o.offset()),{table:o.get(),offsets:a}}})}(),p=function(){function e(e,t){this.text=e,this.length=e.length,this.platformID=t.platformID,this.platformSpecificID=t.platformSpecificID,this.languageID=t.languageID,this.nameID=t.nameID}return r({parse:function(t){var n,i,r,o,a,s,l;for(t.offset(this.offset),t.readShort(),n=t.readShort(),i=this.offset+t.readShort(),r=t.times(n,function(){return{platformID:t.readShort(),platformSpecificID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:t.readShort()+i}}),o=this.strings={},a=0;r.length>a;++a)s=r[a],t.offset(s.offset),l=t.readString(s.length),o[s.nameID]||(o[s.nameID]=[]),o[s.nameID].push(new e(l,s));this.postscriptEntry=o[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(n){var i,r,o,a,s,l,c=this.strings,u=0;for(i in c)t(c,i)&&(u+=c[i].length);for(i in r=y(),o=y(),r.writeShort(0),r.writeShort(u),r.writeShort(6+12*u),c)if(t(c,i))for(a=6==i?[new e(n,this.postscriptEntry)]:c[i],s=0;a.length>s;++s)l=a[s],r.writeShort(l.platformID),r.writeShort(l.platformSpecificID),r.writeShort(l.languageID),r.writeShort(l.nameID),r.writeShort(l.length),r.writeShort(o.offset()),o.writeString(l.text);return r.write(o.get()),r.get()}})}(),f=function(){var e=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return r({parse:function(e){var t,n;switch(e.offset(this.offset),this.format=e.readLong(),this.italicAngle=e.readFixed_(),this.underlinePosition=e.readShort_(),this.underlineThickness=e.readShort_(),this.isFixedPitch=e.readLong(),this.minMemType42=e.readLong(),this.maxMemType42=e.readLong(),this.minMemType1=e.readLong(),this.maxMemType1=e.readLong(),this.format){case 65536:case 196608:break;case 131072:for(t=e.readShort(),this.glyphNameIndex=e.times(t,e.readShort),this.names=[],n=this.offset+this.length;e.offset()<n;)this.names.push(e.readString(e.readByte()));break;case 151552:t=e.readShort(),this.offsets=e.read(t);break;case 262144:this.map=e.times(this.file.maxp.numGlyphs,e.readShort)}},glyphFor:function(t){switch(this.format){case 65536:return e[t]||".notdef";case 131072:var n=this.glyphNameIndex[t];return e.length>n?e[n]:this.names[n-e.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[t]||65535}},render:function(t){var n,i,r,o,a,s,l;if(196608==this.format)return this.raw();for((n=y(this.rawData.slice(this.offset,32))).writeLong(131072),n.offset(32),i=[],r=[],o=0;t.length>o;++o)a=t[o],s=this.glyphFor(a),(l=e.indexOf(s))>=0?i.push(l):(i.push(e.length+r.length),r.push(s));for(n.writeShort(t.length),o=0;i.length>o;++o)n.writeShort(i[o]);for(o=0;r.length>o;++o)n.writeByte(r[o].length),n.writeString(r[o]);return n.get()}})}(),g=function(){function e(e,t){function i(n){return t[e[n]]}var r,o,a,s,l,c,u,d,h,p,f,g,m,v,_,b,w=n(e),k=[],x=[],C=null,T=null;for(r=0;w.length>r;++r)a=i(o=w[r])-o,(null==C||a!==T)&&(C&&x.push(C),k.push(o),T=a),C=o;for(C&&x.push(C),x.push(65535),k.push(65535),l=2*(s=k.length),c=2*Math.pow(2,Math.floor(Math.log(s)/Math.LN2)),u=Math.log(c/2)/Math.LN2,d=l-c,h=[],p=[],f=[],r=0;s>r;++r){if(g=k[r],m=x[r],65535==g){h.push(0),p.push(0);break}if(g-(v=i(g))>=32768)for(h.push(0),p.push(2*(f.length+s-r)),_=g;m>=_;++_)f.push(i(_));else h.push(v-g),p.push(0)}return(b=y()).writeShort(3),b.writeShort(1),b.writeLong(12),b.writeShort(4),b.writeShort(16+8*s+2*f.length),b.writeShort(0),b.writeShort(l),b.writeShort(c),b.writeShort(u),b.writeShort(d),x.forEach(b.writeShort),b.writeShort(0),k.forEach(b.writeShort),h.forEach(b.writeShort_),p.forEach(b.writeShort),f.forEach(b.writeShort),b.get()}return r({parse:function(e){var t,n=this,i=n.offset;e.offset(i),n.version=e.readShort(),t=e.readShort(),n.unicodeEntry=null,n.tables=e.times(t,function(){var t=new function(e,t){var n=this;n.platformID=e.readShort(),n.platformSpecificID=e.readShort(),n.offset=t+e.readLong(),e.saveExcursion(function(){var t,i,r,o,a,s,l,c,u,d,h,p;switch(e.offset(n.offset),n.format=e.readShort(),n.length=e.readShort(),n.language=e.readShort(),n.isUnicode=3==n.platformID&&1==n.platformSpecificID&&4==n.format||0===n.platformID&&4==n.format,n.codeMap={},n.format){case 0:for(t=0;256>t;++t)n.codeMap[t]=e.readByte();break;case 4:for(i=e.readShort()/2,e.skip(6),r=e.times(i,e.readShort),e.skip(2),o=e.times(i,e.readShort),a=e.times(i,e.readShort_),s=e.times(i,e.readShort),l=(n.length+n.offset-e.offset())/2,c=e.times(l,e.readShort),t=0;i>t;++t)for(u=o[t],d=r[t],h=u;d>=h;++h)0===s[t]?p=h+a[t]:0!==(p=c[s[t]/2-(i-t)+(h-u)]||0)&&(p+=a[t]),n.codeMap[h]=65535&p}})}(e,i);return t.isUnicode&&(n.unicodeEntry=t),t})},render:function(t,n){var i=y();return i.writeShort(0),i.writeShort(1),i.write(e(t,n)),i.get()},getUnicodeEntry:function(){if(!this.unicodeEntry)throw Error("Font doesn't have an Unicode encoding");return this.unicodeEntry}})}(),m=r({parse:function(e){e.offset(this.offset),this.version=e.readShort(),this.averageCharWidth=e.readShort_(),this.weightClass=e.readShort(),this.widthClass=e.readShort(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort_(),this.ySubscriptYSize=e.readShort_(),this.ySubscriptXOffset=e.readShort_(),this.ySubscriptYOffset=e.readShort_(),this.ySuperscriptXSize=e.readShort_(),this.ySuperscriptYSize=e.readShort_(),this.ySuperscriptXOffset=e.readShort_(),this.ySuperscriptYOffset=e.readShort_(),this.yStrikeoutSize=e.readShort_(),this.yStrikeoutPosition=e.readShort_(),this.familyClass=e.readShort_(),this.panose=e.times(10,e.readByte),this.charRange=e.times(4,e.readLong),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=e.times(2,e.readLong),this.version>1&&(this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()))},render:function(){return this.raw()}}),v=1e5,o.prototype={use:function(e){var t,n,i,r,o;if("string"==typeof e){for(n="",i=0;e.length>i;++i)t=this.use(e.charCodeAt(i)),n+=String.fromCharCode(t);return n}return(t=this.unicodes[e])||(t=this.next++,this.subset[t]=e,this.unicodes[e]=t,(r=this.font.cmap.getUnicodeEntry().codeMap[e])&&(this.ncid2ogid[t]=r,null==this.ogid2ngid[r]&&(o=this.nextGid++,this.ogid2ngid[r]=o,this.ngid2ogid[o]=r))),t},encodeText:function(e){return this.use(e)},glyphIds:function(){return n(this.ogid2ngid)},glyphsFor:function(e,t){var n,i,r;for(t||(t={}),n=0;e.length>n;++n)t[i=e[n]]||(r=t[i]=this.font.glyf.glyphFor(i))&&r.compound&&this.glyphsFor(r.glyphIds,t);return t},render:function(){var e,i,r,o,a,s,l,c=this.glyphsFor(this.glyphIds());for(e in c)t(c,e)&&(e=parseInt(e,10),null==this.ogid2ngid[e]&&(i=this.nextGid++,this.ogid2ngid[e]=i,this.ngid2ogid[i]=e));return r=n(this.ngid2ogid).map(function(e){return this.ngid2ogid[e]},this),a=(o=this.font).glyf.render(c,r,this.ogid2ngid),s=o.loca.render(a.offsets),this.lastChar=this.next-1,l={cmap:g.render(this.ncid2ogid,this.ogid2ngid),glyf:a.table,loca:s.table,hmtx:o.hmtx.render(r),hhea:o.hhea.render(r),maxp:o.maxp.render(r),post:o.post.render(r),name:o.name.render(this.psName),head:o.head.render(s.format),"OS/2":o.os2.render()},this.font.directory.render(l)},cidToGidMap:function(){var e,t,n,i=y(),r=0;for(e=this.firstChar;this.next>e;++e){for(;e>r;)i.writeShort(0),r++;(t=this.ncid2ogid[e])?(n=this.ogid2ngid[t],i.writeShort(n)):i.writeShort(0),r++}return i.get()}},a.prototype={parse:function(){var e=this.directory=new i(this.contents);this.head=e.readTable("head",s),this.loca=e.readTable("loca",l),this.hhea=e.readTable("hhea",c),this.maxp=e.readTable("maxp",u),this.hmtx=e.readTable("hmtx",d),this.glyf=e.readTable("glyf",h),this.name=e.readTable("name",p),this.post=e.readTable("post",f),this.cmap=e.readTable("cmap",g),this.os2=e.readTable("OS/2",m),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(e){return this.hmtx.forGlyph(e).advance*this.scale},makeSubset:function(){return new o(this)}},_.TTFFont=a}(window),function(e,t){"use strict";function n(t,n){function i(e,t,n){return n||(n=u),n.pdf&&null!=n.pdf[e]?n.pdf[e]:t}function r(){function r(e){var t,n,r,s,l=e.options,c=y(e),u=c.bbox;e=c.root,n=!1,"auto"==(t=i("paperSize",i("paperSize","auto"),l))&&(u?(t=[(r=u.getSize()).width,r.height],n=!0,s=u.getOrigin(),(c=new b.Group).transform(new w.Matrix(1,0,0,1,-s.x,-s.y)),c.append(e),e=c):t="A4"),a(e,o.addPage({paperSize:t,margin:i("margin",i("margin"),l),addMargin:n,landscape:i("landscape",i("landscape",!1),l)}),o)}if(!(--s>0)){var o=new e.pdf.Document({producer:i("producer"),title:i("title"),author:i("author"),subject:i("subject"),keywords:i("keywords"),creator:i("creator"),date:i("date")});d?t.children.forEach(r):r(t),n(o.render(),o)}}var s,l=[],c=[],u=t.options,d=i("multiPage");t.traverse(function(t){o({Image:function(e){c.indexOf(e.src())<0&&c.push(e.src())},Text:function(t){var n=e.pdf.parseFontDef(t.options.font),i=e.pdf.getFontURL(n);l.indexOf(i)<0&&l.push(i)}},t)}),s=2,e.pdf.loadFonts(l,r),e.pdf.loadImages(c,r)}function i(e,t){n(e,function(e){t("data:application/pdf;base64,"+e.base64())})}function r(e,t){n(e,function(e){t(new Blob([e.get()],{type:"application/pdf"}))})}function o(e,t){var n=e[t.nodeType];return n?n.call.apply(n,arguments):t}function a(e,t,n){var i,r,a;e.options._pdfDebug&&t.comment("BEGIN: "+e.options._pdfDebug),i=e.transform(),r=e.opacity(),t.save(),null!=r&&1>r&&t.setOpacity(r),function(e,t){var n,i,r,o,a,s,l=e.stroke&&e.stroke();if(l){if(n=l.color){if(null==(n=_(n)))return;t.setStrokeColor(n.r,n.g,n.b),1!=n.a&&t.setStrokeOpacity(n.a)}if(null!=(i=l.width)){if(0===i)return;t.setLineWidth(i)}(r=l.dashType)&&t.setDashPattern(x[r],0),(o=l.lineCap)&&t.setLineCap(C[o]),(a=l.lineJoin)&&t.setLineJoin(T[a]),null!=(s=l.opacity)&&t.setStrokeOpacity(s)}}(e,t),function(e,t){var n,i,r=e.fill&&e.fill();if(r&&!(r instanceof b.Gradient)){if(n=r.color){if(null==(n=_(n)))return;t.setFillColor(n.r,n.g,n.b),1!=n.a&&t.setFillOpacity(n.a)}null!=(i=r.opacity)&&t.setFillOpacity(i)}}(e,t),function(e,t,n){var i=e.clip();i&&(u(i,t),t.clip())}(e,t),i&&(a=i.matrix(),t.transform(a.a,a.b,a.c,a.d,a.e,a.f)),o({Path:d,MultiPath:h,Circle:p,Arc:f,Text:g,Image:v,Group:m},e,t,n),t.restore(),e.options._pdfDebug&&t.comment("END: "+e.options._pdfDebug)}function s(e){return e&&(e instanceof b.Gradient||e.color&&!/^(none|transparent)$/i.test(e.color)&&(null==e.width||e.width>0)&&(null==e.opacity||e.opacity>0))}function l(e,t,n,i){var r,o,a,s,l,c,u,d=e.fill();return d instanceof b.Gradient?(i?t.clipStroke():t.clip(),(r=d instanceof b.RadialGradient)?(o={x:d.center().x,y:d.center().y,r:0},a={x:d.center().x,y:d.center().y,r:d.radius()}):(o={x:d.start().x,y:d.start().y},a={x:d.end().x,y:d.end().y}),s={type:r?"radial":"linear",start:o,end:a,userSpace:d.userSpace(),stops:d.stops.elements().map(function(e){var t,n=e.offset();return n=/%$/.test(n)?parseFloat(n)/100:parseFloat(n),(t=_(e.color())).a*=e.opacity(),{offset:n,color:t}})},c=(l=e.rawBBox()).topLeft(),u=l.getSize(),l={left:c.x,top:c.y,width:u.width,height:u.height},t.gradient(s,l),!0):void 0}function c(e,t,n){s(e.fill())&&s(e.stroke())?l(e,t,0,!0)||t.fillStroke():s(e.fill())?l(e,t,0,!1)||t.fill():s(e.stroke())?t.stroke():t.nop()}function u(e,t,n){var i,r,o,a,s,l,c=e.segments;if(0!==c.length&&!function(e,t){var n,i,r=e.segments;if(4==r.length&&e.options.closed){for(n=[],i=0;r.length>i;++i){if(r[i].controlIn())return!1;n[i]=r[i].anchor()}if(n[0].y==n[1].y&&n[1].x==n[2].x&&n[2].y==n[3].y&&n[3].x==n[0].x||n[0].x==n[1].x&&n[1].y==n[2].y&&n[2].x==n[3].x&&n[3].y==n[0].y)return t.rect(n[0].x,n[0].y,n[2].x-n[0].x,n[2].y-n[0].y),!0}}(e,t)){for(r=0;c.length>r;++r)a=(o=c[r]).anchor(),i?(s=i.controlOut(),l=o.controlIn(),s&&l?t.bezier(s.x,s.y,l.x,l.y,a.x,a.y):t.lineTo(a.x,a.y)):t.moveTo(a.x,a.y),i=o;e.options.closed&&t.close()}}function d(e,t,n){u(e,t),c(e,t)}function h(e,t,n){var i,r=e.paths;for(i=0;r.length>i;++i)u(r[i],t);c(e,t)}function p(e,t,n){var i=e.geometry();t.circle(i.center.x,i.center.y,i.radius),c(e,t)}function f(e,t,n){var i,r=e.geometry().curvePoints();for(t.moveTo(r[0].x,r[0].y),i=1;r.length>i;)t.bezier(r[i].x,r[i++].y,r[i].x,r[i++].y,r[i].x,r[i++].y);c(e,t)}function g(t,n){var i,r=e.pdf.parseFontDef(t.options.font),o=t._position;t.fill()&&t.stroke()?i=k.fillAndStroke:t.fill()?i=k.fill:t.stroke()&&(i=k.stroke),n.transform(1,0,0,-1,o.x,o.y+r.fontSize),n.beginText(),n.setFont(e.pdf.getFontURL(r),r.fontSize),n.setTextRenderingMode(i),n.showText(t.content(),t._pdfRect?t._pdfRect.width():null),n.endText()}function m(e,t,n){var i,r;for(e._pdfLink&&t.addLink(e._pdfLink.url,e._pdfLink),i=e.children,r=0;i.length>r;++r)a(i[r],t,n)}function v(e,t){var n,i,r,o=e.src();o&&(i=(n=e.rect()).getOrigin(),r=n.getSize(),t.transform(r.width,0,0,-r.height,i.x,i.y+r.height),t.drawImage(o))}function _(t){var n=e.parseColor(t,!0);return n?n.toRGB():null}function y(e){function t(e){return a=!0,e}function n(e){return e.visible()&&e.opacity()>0&&(s(e.fill())||s(e.stroke()))}function i(e){var t,n,i=[];for(t=0;e.length>t;++t)null!=(n=r(e[t]))&&i.push(n);return i}function r(r){return function(e,t){var n,i=l,r=c;e.transform()&&(c=c.multiplyCopy(e.transform().matrix())),(n=e.clip())&&(n=n.bbox())&&(n=n.bbox(c),l=l?w.Rect.intersect(l,n):n);try{return t()}finally{l=i,c=r}}(r,function(){if(!(r instanceof b.Group||r instanceof b.MultiPath)){var a=function(e){if(null==l)return!1;var t=e.rawBBox().bbox(c);return l&&t&&(t=w.Rect.intersect(t,l)),t}(r);if(!a)return t(null);u=u?w.Rect.union(u,a):a}return o({Path:function(e){return 0!==e.segments.length&&n(e)?e:t(null)},MultiPath:function(e){if(!n(e))return t(null);var r=new b.MultiPath(e.options);return r.paths=i(e.paths),0===r.paths.length?t(null):r},Circle:function(e){return n(e)?e:t(null)},Arc:function(e){return n(e)?e:t(null)},Text:function(e){return/\S/.test(e.content())&&n(e)?e:t(null)},Image:function(e){return e.visible()&&e.opacity()>0?e:t(null)},Group:function(n){var r=new b.Group(n.options);return r.children=i(n.children),r._pdfLink=n._pdfLink,n===e||0!==r.children.length||n._pdfLink?r:t(null)}},r)})}var a,l=!1,c=w.Matrix.unit(),u=null;do{a=!1,e=r(e)}while(e&&a);return{root:e,bbox:u}}var b=e.drawing,w=e.geometry,k=e.pdf.TEXT_RENDERING_MODE,x={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},C={butt:0,round:1,square:2},T={miter:0,round:1,bevel:2};e.deepExtend(b,{exportPDF:function(e,n){var i,r=t.Deferred();for(i in n)e.options.set("pdf."+i,n[i]);return b.pdf.toDataURL(e,r.resolve),r.promise()},pdf:{toDataURL:i,toBlob:r,saveAs:function(t,n,o,a){window.Blob&&!e.support.browser.safari?r(t,function(t){e.saveAs({dataURI:t,fileName:n}),a&&a(t)}):i(t,function(t){e.saveAs({dataURI:t,fileName:n,proxyURL:o}),a&&a(t)})},toStream:n}})}(window.kendo,window.kendo.jQuery),function(e,t){e.PDFMixin={extend:function(e){e.events.push("pdfExport"),e.options.pdf=this.options,e.saveAsPDF=this.saveAsPDF,e._drawPDF=this._drawPDF,e._drawPDFShadow=this._drawPDFShadow},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",allPages:!1,landscape:!1,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator",date:null},saveAsPDF:function(){var n,i=new t.Deferred,r=i.promise(),o={promise:r};if(!this.trigger("pdfExport",o))return(n=this.options.pdf).multiPage=n.allPages,this._drawPDF(i).then(function(t){return e.drawing.exportPDF(t,n)}).done(function(t){e.saveAs({dataURI:t,fileName:n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy,proxyTarget:n.proxyTarget}),i.resolve()}).fail(function(e){i.reject(e)}),r},_drawPDF:function(n){var i=new t.Deferred;return e.drawing.drawDOM(this.wrapper).done(function(e){var t={page:e,pageNumber:1,progress:1,totalPages:1};n.notify(t),i.resolve(t.page)}).fail(function(e){i.reject(e)}),i},_drawPDFShadow:function(n){var i,r,o;return n=n||{},i=this.wrapper,r=t("<div class='k-pdf-export-shadow'>"),n.width&&r.css({width:n.width,overflow:"visible"}),i.before(r),r.append(n.content||i.clone(!0,!0)),o=t.Deferred(),setTimeout(function(){e.drawing.drawDOM(r).always(function(){r.remove()}).then(function(){o.resolve.apply(o,arguments)}).fail(function(){o.reject.apply(o,arguments)}).progress(function(){o.progress.apply(o,arguments)})},15),o.promise()}}}(kendo,window.kendo.jQuery),function(e,t){function n(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===qe)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function r(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function o(t,n,i,r,o){var a,s=n;for(n=e(),o=o||1,a=0;o>a;a++)n=n.add(t.eq(s+a));"number"==typeof i?n[r?"insertBefore":"insertAfter"](t.eq(i)):n.appendTo(i)}function a(t,n,i){return e(t).add(n).find(i)}function s(e,t,n){var i,r,o,a;for(i=0,r=(n=se(n)?n:[n]).length;r>i;i++)o=n[i],ie(o)&&o.click&&(a=o.name||o.text,t.on(Ve+we,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},ue(o.click,e)))}function l(e,t){var n=[];return c(e,t,n),n[n.length-1]}function c(e,t,n){var i,r;for(n=n||[],i=0;t.length>i;i++){if(e===t[i])return!0;if(t[i].columns){if(r=n.length,n.push(t[i]),c(e,t[i].columns,n))return!0;n.splice(r,n.length-r)}}return!1}function u(e,t){var n=t?B:F;e.hidden=!t,e.attributes=n(e.attributes),e.footerAttributes=n(e.footerAttributes),e.headerAttributes=n(e.headerAttributes)}function d(){return"none"!==this.style.display}function h(e){return p([e]).length>0}function p(e){return ae(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=p(e.columns).length>0),t})}function f(t){return e(t).map(function(){return this.toArray()})}function g(t,n,i,r,o,a,s){var l,c,u=v(t),d=v([n]);u>d&&(l=Array(s+1).join('<th class="k-group-cell k-header">&nbsp;</th>'),c=a.children(":not(.k-filter-row)"),e(Array(u-d+1).join("<tr>"+l+"</tr>")).insertAfter(c.last())),function(e,t){var n,i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;i.length>n;n++)i[n].rowSpan+=t}(a,u-d),function t(n,i,r,o){var a,s,l=b(n[0],i),c=r.find(">tr:not(.k-filter-row):eq("+l.row+")>th.k-header"),u=e(),d=l.cell;for(a=0;n.length>a;a++)u=u.add(c.eq(d+a));for(o.find(">tr:not(.k-filter-row)").eq(l.row).append(u),s=[],a=0;n.length>a;a++)n[a].columns&&(s=s.concat(n[a].columns));s.length&&t(s,i,r,o)}(i,r,o,a)}function m(t,n,i){var r,o,a,s,l,c,u;for(i=i||0,o=n,n=I(n),a={},s=t.find(">tr:not(.k-filter-row)"),l=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=n.length;u>c;c++)a[(r=_(n[c],o)).row]||(a[r.row]=s.eq(r.row).find(".k-header").filter(l)),a[r.row].eq(r.cell).attr(X.attr("index"),i+c);return n.length}function v(e){var t,n,i=0;for(t=0;e.length>t;t++)e[t].columns&&(n=v(e[t].columns))>i&&(i=n);return 1+i}function _(e,t,n,i){var r,o;for(n=n||0,(i=i||{})[n]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=_(e,t[o].columns,n+1,i)))break;i[n]++}return r}function y(e,t,n,i){var r,o,a;return t.columns?(t=t.columns)[i?0:t.length-1]:(o=(r=l(t,e))?r.columns:e,0===(a=le(t,o))&&i?a++:a!=o.length-1||i?(a>0||0===a&&!i)&&(a+=i?-1:1):a--,(t=function(e,t,n,i){var r,o=n.locked;do{r=e[t],t+=i?1:-1}while(r&&t>-1&&e.length>t&&r!=n&&!r.columns&&r.locked==o);return r}(o,a,n,le(n,o)>a))&&t!=n&&t.columns?y(e,t,n,i):null)}function b(e,t,n,i){var r,o;for(n=n||0,(i=i||{})[n]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=b(e,t[o].columns,n+1,i)))break;t[o].hidden||i[n]++}return r}function w(e){return k(D(e)).concat(k(A(e)))}function k(e){var t,n=[],i=[];for(t=0;e.length>t;t++)n.push(e[t]),e[t].columns&&(i=i.concat(e[t].columns));return i.length&&(n=n.concat(k(i))),n}function x(e){var t,n,i=0;for(n=0;e.length>n;n++)(t=e[n]).columns?i+=x(t.columns):t.hidden&&i++;return i}function C(e){var t,n,i,r=0;for(n=0,i=e.length;i>n;n++)(t=e[n].style.width)&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function T(t){var n,i=t.find("tr:not(.k-filter-row)"),r=i.filter(function(){return!e(this).children().length}).remove().length,o=i.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;o.length>n;n++)o[n].rowSpan>1&&(o[n].rowSpan-=r);return i.length-r}function S(e,t,n,i,r){var o,a,s,l=[];for(o=0,s=e.length;s>o;o++)(a=n[i]||[]).push(t.eq(r+o)),n[i]=a,e[o].columns&&(l=l.concat(e[o].columns));l.length&&S(l,t,n,i+1,r+e.length)}function D(e){return ae(e,function(e){return e.locked})}function A(e){return ae(e,function(e){return!e.locked})}function M(e){return ae(e,function(e){return e.locked&&h(e)})}function E(e){var t,n=[];for(t=0;e.length>t;t++)e[t].hidden||(e[t].columns?n=n.concat(E(e[t].columns)):n.push(e[t]));return n}function I(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(I(e[t].columns)):n.push(e[t]);return n}function R(n){var i,r=n.find(">tr:not(.k-filter-row)"),o=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},a=e();return r.length>1&&(a=r.find("th").filter(o).filter(function(){return this.rowSpan>1})),a=a.add(r.last().find("th").filter(o)),i=X.attr("index"),a.sort(function(n,r){var o,a;return n=e(n),r=e(r),o=n.attr(i),a=r.attr(i),o===t&&(o=e(n).index()),a===t&&(a=e(r).index()),(o=parseInt(o,10))>(a=parseInt(a,10))?1:a>o?-1:0}),a}function P(t){var n,i,r,o,a,s,l,c=t.closest("thead"),u=e().add(t),d=t.closest("tr"),h=c.find("tr:not(.k-filter-row)"),p=h.index(d)+t[0].rowSpan,f=X.attr("colspan");if(h.length-1>=p){for(n=d.next(),d.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),i=(i=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)")).filter(function(){return!this.rowSpan||1===this.rowSpan}),o=0,r=0;i.length>r;r++)o+=parseInt(i.eq(r).attr(f),10)||1;for(a=n.find("th:not(.k-group-cell,.k-hierarchy-cell)"),s=parseInt(t.attr(f),10)||1,r=0;s>r;)n=a.eq(r+o),u=u.add(P(n)),(l=parseInt(n.attr(f),10))>1&&(s-=l-1),r++}return u}function L(t,n,i,r){var o,a=t;return r&&t.empty(),J?t[0].innerHTML=i:((o=document.createElement("div")).innerHTML="<table><tbody>"+i+"</tbody></table>",t=o.firstChild.firstChild,n[0].replaceChild(t,a[0]),t=e(t)),t}function F(e){var t=(e=e||{}).style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"))===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1")):t="display:none",re({},e,{style:t})}function B(e){var t=(e=e||{}).style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function z(t,n,i,r){var o,a=t.find(">colgroup"),s=oe(n,function(e){return(o=e.width)&&0!==parseInt(o,10)?X.format('<col style="width:{0}"/>',typeof o===qe?o:o+"px"):"<col />"});(i||a.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),(a=e(Array(r+1).join('<col class="k-group-col">')+s.join(""))).is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a),Ze.msie&&8==Ze.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function H(e){var t,n,i,r={};for(n=0,i=e.length;i>n;n++)r[(t=e[n]).value]=t.text;return r}function N(e,t,n){for(var i=0,r=e[i];r;){if((n||"none"!==r.style.display)&&!Qe.test(r.className)&&--t<0){r.style.display=n?"":"none";break}r=e[++i]}}function O(t,n){for(var i,r,o=0,a=t.length;a>o;o+=1)(r=t.eq(o)).is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(i.attr("colspan"),10)-1):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&((i=e(i)).attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),r=i.find("tr:first")),N(r[0].cells,n,!1))}function V(t,n){for(var i,r,o=0,a=t.length;a>o;o+=1)(r=t.eq(o)).is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(i.attr("colspan"),10)+1):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&((i=e(i)).attr("colspan",parseInt(i.attr("colspan"),10)+1),z(i.find(">form>table"),p(void 0),!1,0),r=i.find("tr:first")),N(r[0].cells,n,!0))}function U(e,t,n){var i,r,o;for(n=n||1,r=0,o=e.length;o>r;r++)(i=e.eq(r).children().last()).attr("colspan",parseInt(i.attr("colspan"),10)+n),(i=t.eq(r).children().last()).attr("colspan",parseInt(i.attr("colspan"),10)-n)}function W(e){var t,n,i=0,r=e.find(">colgroup>col");for(t=0,n=r.length;n>t;t+=1)i+=parseInt(r[t].style.width,10);return i}function j(e,t){var n,i=e.offsetHeight,r=t.offsetHeight;i>r?n=i+"px":r>i&&(n=r+"px"),n&&(e.style.height=t.style.height=n)}function q(e,t){var n,i,r;if(typeof e===qe&&e===t)return e;if(ie(e)&&e.name===t)return e;if(se(e))for(n=0,i=e.length;i>n;n++)if(typeof(r=e[n])===qe&&r===t||r.name===t)return r;return null}function G(t,n){var i,r,o,a=Ze.msie;if(!0===n){if(t=e(t),(i=!0)&&(r=t.parent().scrollTop(),o=t.parent().scrollLeft()),a)try{t[0].setActive()}catch(e){t[0].focus()}else t[0].focus();i&&(t.parent().scrollTop(r),t.parent().scrollLeft(o))}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function $(n){var i=e(n.currentTarget),r=i.is("th"),o=this.table.add(this.lockedTable),a=this.thead.parent().add(e(">table",this.lockedHeader)),s=e(n.target).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon"),l=i.closest("table")[0];if(!X.support.touch)return s&&i.find(X.roleSelector("filtercell")).length?(this.current(i),t):((l===o[0]||l===o[1]||l===a[0]||l===a[1])&&(e(n.target).is("a.k-i-collapse, a.k-i-expand")||(this.options.navigatable&&this.current(i),(r||!s)&&setTimeout(function(){et&&e(X._activeElement()).hasClass("k-widget")||G(l,!0)}),r&&n.preventDefault())),t)}function Y(e,t,i){return'<tr role="row" class="k-grouping-row">'+n(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+i+"</p></td></tr>"}function Q(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var X=window.kendo,K=X.ui,Z=X.data.DataSource,J=X.support.tbodyInnerHtml,ee=X._activeElement,te=K.Widget,ne=X.keys,ie=e.isPlainObject,re=e.extend,oe=e.map,ae=e.grep,se=e.isArray,le=e.inArray,ce=Array.prototype.push,ue=e.proxy,de=X.isFunction,he=e.isEmptyObject,pe=Math,fe="progress",ge="error",me=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ve="tr:not(.k-footer-template):visible",_e=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ye=ve+":first>"+_e+":first",be="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",we=".kendoGrid",ke="edit",xe="save",Ce="detailInit",Te="filterMenuInit",Se="columnMenuInit",De="change",Ae="columnHide",Me="columnShow",Ee="saveChanges",Ie="dataBound",Re="detailExpand",Pe="detailCollapse",Le="k-state-focused",Fe="k-state-selected",Be="k-grid-norecords",ze="columnResize",He="columnReorder",Ne="columnLock",Oe="columnUnlock",Ve="click",Ue="height",We="tabIndex",je="function",qe="string",Ge=/(\}|\#)/gi,$e=/#/gi,Ye="[\\x20\\t\\r\\n\\f]",Qe=RegExp("(^|"+Ye+")(k-group-cell|k-hierarchy-cell)("+Ye+"|$)"),Xe=RegExp("(^|"+Ye+")(k-filter-row)("+Ye+"|$)"),Ke=!1,Ze=X.support.browser,Je=Ze.msie&&7==Ze.version,et=Ze.msie&&8==Ze.version,tt=te.extend({init:function(e,t){var n=this;te.fn.init.call(n,e,t),n._refreshHandler=ue(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(De,t._refreshHandler),t.dataSource=e,t.dataSource.bind(De,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0},destroy:function(){var e=this;te.fn.destroy.call(e),e.dataSource.unbind(De,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(we),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,i=X.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(Ke?"padding-left":"padding-right",i),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+we+" mousewheel"+we,ue(n._wheelScroll,n)),X.support.kineticScrollNeeded&&(n.drag=new X.UserEvents(n.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(r).bind("scroll"+we,ue(n._scroll,n))},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.verticalScrollbar,i=n.scrollTop(),r=X.wheelDeltaY(t);!r||r>0&&0===i||0>r&&i+n[0].clientHeight==n[0].scrollHeight||(t.preventDefault(),e(t.currentTarget).one("wheel"+we,!1),this.verticalScrollbar.scrollTop(i+-r))}},_scroll:function(e){var t=this,n=!t.options.prefetch,i=e.currentTarget.scrollTop,r=t.dataSource,o=t.itemHeight,a=r.skip()||0,s=t._rangeStart||a,l=t.element.innerHeight(),c=!!(t._scrollbarTop&&t._scrollbarTop>i),u=pe.max(pe.floor(i/o),0),d=pe.max(u+pe.floor(l/o),0);t._scrollTop=i-s*o,t._scrollbarTop=i,t._scrolling=n,t._fetch(u,d,c)||(t.wrapper[0].scrollTop=t._scrollTop),n&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout(function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())},100))},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t,n=this._rangeStart||this.dataSource.skip()||0,i=this.dataSource.pageSize();return(t=e>n?e-n+1:n-e-1)>i?i:t},scrollIntoView:function(e){var t=this.wrapper[0],n=t.clientHeight,i=this._scrollTop||t.scrollTop,r=e[0].offsetTop,o=e[0].offsetHeight;i>r?this.verticalScrollbar[0].scrollTop-=n/2:r+o>=i+n&&(this.verticalScrollbar[0].scrollTop+=n/2)},_fetch:function(t,n,i){var r=this,o=r.dataSource,a=r.itemHeight,s=o.take(),l=r._rangeStart||o.skip()||0,c=pe.floor(t/s)*s,u=!1;return l>t?(u=!0,l=pe.max(0,n-s),r._scrollTop=(t-l)*a,r._page(l,s)):n>=l+s&&!i?(u=!0,l=t,r._scrollTop=a,r._page(l,s)):!r._fetching&&r.options.prefetch&&(c+s-.33*s>t&&t>s&&o.prefetch(c-s,s,e.noop),n>c+.33*s&&o.prefetch(c+s,s,e.noop)),u},fetching:function(){return this._fetching},_page:function(e,t){var n=this,i=!n.options.prefetch,r=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,r.inRange(e,t)?r.range(e,t):(i||X.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){n._scrolling||(i&&X.ui.progress(n.wrapper.parent(),!0),r.range(e,t))},100))},repaintScrollbar:function(){var e,t=this,n="",i=25e4,r=t.dataSource,o=X.support.kineticScrollNeeded?0:X.support.scrollbar(),a=t.wrapper[0],s=t.itemHeight=t.options.itemHeight()||0,l=a.scrollWidth>a.offsetWidth?o:0,c=r.total()*s+l;for(e=0;e<pe.floor(c/i);e++)n+='<div style="width:1px;height:'+i+'px"></div>';c%i&&(n+='<div style="width:1px;height:'+c%i+'px"></div>'),t.verticalScrollbar.html(n),a.scrollTop=t._scrollTop},refresh:function(){var e=this,t=e.dataSource,n=e._rangeStart;X.ui.progress(e.wrapper.parent(),!1),clearTimeout(e._timeout),e.repaintScrollbar(),e.drag&&e.drag.cancel(),n&&!e._fetching&&(e._rangeStart=t.skip(),1===t.page()&&(e.verticalScrollbar[0].scrollTop=0)),e._fetching=!1}}),nt={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},it=X.ui.DataBoundWidget.extend({init:function(t,n,i){var r=this;n=se(n)?{dataSource:n}:n,te.fn.init.call(r,t,n),i&&(r._events=i),Ke=X.support.isRtl(t),r._element(),r._aria(),r._columns(r.options.columns),r._dataSource(),r._tbody(),r._pageable(),r._thead(),r._groupable(),r._toolbar(),r._setContentHeight(),r._templates(),r._navigatable(),r._selectable(),r._clipboard(),r._details(),r._editable(),r._attachCustomCommandsEvent(),r._minScreenSupport(),r.options.autoBind?r.dataSource.fetch():r._footer(),r.lockedContent&&(r.wrapper.addClass("k-grid-lockedcolumns"),r._resizeHandler=function(){r.resize()},e(window).on("resize"+we,r._resizeHandler)),X.notify(r)},events:[De,"dataBinding","cancel",Ie,Re,Pe,Ce,Te,Se,ke,xe,"remove",Ee,ze,He,Me,Ae,Ne,Oe],setDataSource:function(e){var t=this,n=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),n&&(n.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:nt.create.text,cancel:nt.cancel.text,save:nt.save.text,destroy:nt.destroy.text,edit:nt.edit.text,update:nt.update.text,canceledit:nt.canceledit.text,excel:nt.excel.text,pdf:nt.pdf.text},noRecords:"No records available."}},destroy:function(){var t,n=this;n._angularItems("cleanup"),n._destroyColumnAttachments(),te.fn.destroy.call(n),this._navigatableTables=null,n._resizeHandler&&e(window).off("resize"+we,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.pager=null,n.groupable&&n.groupable.element&&n.groupable.element.kendoGroupable("destroy"),n.groupable=null,n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.element&&(n.selectable.destroy(),n.clearArea(),n.copyHandler&&(n.wrapper.off("keydown",n.copyHandler),n.unbind(n.copyHandler)),n.updateClipBoardState&&(n.unbind(n.updateClipBoardState),n.updateClipBoardState=null),n.clearAreaHandler&&n.wrapper.off("keyup",n.clearAreaHandler)),n.selectable=null,n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n.virtualScrollable&&n.virtualScrollable.element&&n.virtualScrollable.destroy(),n.virtualScrollable=null,n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(De,n._refreshHandler).unbind(fe,n._progressHandler).unbind(ge,n._errorHandler),n._refreshHandler=n._progressHandler=n._errorHandler=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n.minScreenResizeHandler&&e(window).off("resize",n.minScreenResizeHandler),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(we),X.destroy(n.wrapper),n.rowTemplate=n.altRowTemplate=n.lockedRowTemplate=n.lockedAltRowTemplate=n.detailTemplate=n.footerTemplate=n.groupFooterTemplate=n.lockedGroupFooterTemplate=n.noRecordsTemplate=null,n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n._groupableClickHandler=n._setContentWidthHandler=null},getOptions:function(){var n,i,r;return this.options.dataSource=null,(n=re(!0,{},this.options)).columns=X.deepExtend([],this.columns),r=(i=this.dataSource).options.data&&i._data,i.options.data=null,n.dataSource=e.extend(!0,{},i.options),i.options.data=r,n.dataSource.data=r,n.dataSource.page=i.page(),n.dataSource.filter=i.filter(),n.dataSource.pageSize=i.pageSize(),n.dataSource.sort=i.sort(),n.dataSource.group=i.group(),n.dataSource.aggregate=i.aggregate(),n.dataSource.transport&&(n.dataSource.transport.dataSource=null),n.$angular=t,n},setOptions:function(e){var t,n,i,r,o=this.getOptions();X.deepExtend(o,e),e.dataSource||(o.dataSource=this.dataSource),t=this.wrapper,n=this._events,i=this.element,this.destroy(),this.options=null,this._isMobile&&((r=t.closest(X.roleSelector("pane")).parent()).after(t),r.remove(),t.removeClass("k-grid-mobile")),t[0]!==i[0]&&(t.before(i),t.remove()),i.empty(),this.init(i,o,n),this._setEvents(o)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,n,i=X.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),r&&r.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=I(i.columns||[]);for(t=0,n=r.length;n>t;t++)(e=r[t].command)&&s(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table")).length||(n=e("<table />").appendTo(t.element)),Je&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var i,r,o,a,s,l=this,c=l.options.columnResizeHandleWidth,u=l.options.scrollable,d=l.resizeHandle,h=this._groups();if(d&&l.lockedContent&&d.data("th")[0]!==n[0]&&(d.off(we).remove(),d=null),d||(d=l.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(d)),Ke)i=n.position().left,u&&(a=n.closest(".k-grid-header-wrap, .k-grid-header-locked"),s=Ze.msie?a.scrollLeft():0,i-=(Ze.webkit?a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft():0)-(Ze.mozilla?a[0].scrollWidth-a[0].offsetWidth-(a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft()):0)+s);else{for(i=n[0].offsetWidth,r=R(n.closest("thead")).filter(":visible"),o=0;r.length>o&&r[o]!=n[0];o++)i+=r[o].offsetWidth;h>0&&(i+=t.find(".k-group-cell:first").outerWidth()*h),l._hasDetails()&&(i+=t.find(".k-hierarchy-cell:first").outerWidth())}d.css({top:n.position().top,left:i-c,height:n.outerHeight(),width:3*c}).data("th",n).show(),d.off("dblclick"+we).on("dblclick"+we,function(){l._autoFitLeafColumn(n.data("index"))})},_positionColumnResizeHandle:function(){var t=this,n=t.options.columnResizeHandleWidth,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(i).on("mousemove"+we,"th",function(i){var o,a,s,l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||((o=i.clientX)+(a=e(window).scrollLeft())>(s=l.offset().left+(Ke?0:this.offsetWidth))-n&&s+n>o+a?t._createResizeHandle(l.closest("div"),l):t.resizeHandle?t.resizeHandle.hide():r(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(we).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new X.UserEvents(n.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(n){var i=e(n.target);n.preventDefault(),i.addClass("k-column-active"),t._createResizeHandle(i.closest("div"),i),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=ue(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,n,i,o,a,s,l,c=this,u=c.options,d=this._isMobile,h=X.support.mobileOS?0:X.support.scrollbar();u.resizable&&(t=u.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,d?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new K.Resizable(t.add(c.lockedHeader),{handle:(u.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+c.tbody.attr("clientHeight")})},start:function(t){var h,p,f,g;l=e(t.currentTarget).data("th"),d&&c._hideResizeHandle(),h=l.closest("table"),p=e.inArray(l[0],R(l.closest("thead")).filter(":visible")),f=(a=h.parent().hasClass("k-grid-header-locked"))?c.lockedTable:c.table,g=c.footer||e(),c.footer&&c.lockedContent&&(g=c.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),r(c.wrapper,"col-resize"),s=u.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")):f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")"),n=t.x.location,i=l.outerWidth(),o=a?f.children("tbody").outerWidth():c.tbody.outerWidth(),Ze.webkit&&c.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var r,d,p,f,g,m,v=Ke?-1:1,_=i+t.x.location*v-n*v;u.scrollable?(a&&c.lockedFooter?r=c.lockedFooter.children("table"):c.footer&&(r=c.footer.find(">.k-grid-footer-wrap>table")),r&&r[0]||(r=e()),d=l.closest("table"),p=a?c.lockedTable:c.table,f=!1,g=c.wrapper.width()-h,m=_,a&&o-i+m>g&&(0>(m=i+(g-o-2*h))&&(m=_),f=!0),m>10&&(s.css("width",m),o&&(m=f?g-2*h:o+t.x.location*v-n*v,p.add(d).add(r).css("width",m),a||(c._footerWidth=m)))):_>10&&s.css("width",_)},resizeend:function(){var e,t,n,o=l.outerWidth();r(c.wrapper,""),Ze.webkit&&c.wrapper.removeClass("k-grid-column-resizing"),i!=o&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):l.parent(),(n=l.attr(X.attr("index")))||(n=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),(e=I(c.columns)[n]).width=o,c.trigger(ze,{column:e,oldWidth:i,newWidth:o}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:X.guid(),filter:t.content?".k-grid-header:first "+be:"table:first>.k-grid-header "+be,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(X.attr("title"))||t.attr(X.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t,n=this;n.options.reorderable&&(n.wrapper.data("kendoReorderable")&&n.wrapper.data("kendoReorderable").destroy(),t=function(e,t,i){var r=e[t],o=e[i],a=l(r,n.columns);return e=a?a.columns:n.columns,le(o,e)},n.wrapper.kendoReorderable({draggable:n._draggableInstance,dragOverContainers:function(e,i){var r=w(n.columns);return!1!==r[e].lockable&&t(r,e,i)>-1},inSameContainer:function(i){return e(i.source).parent()[0]===e(i.target).parent()[0]&&t(w(n.columns),i.sourceIndex,i.targetIndex)>-1},change:function(e){var i=w(n.columns),r=i[e.oldIndex],o=t(i,e.oldIndex,e.newIndex);n.trigger(He,{newIndex:o,oldIndex:le(r,i),column:r}),n.reorderColumn(o,r,"before"===e.position)}}))},_reorderHeader:function(e,t,n){var i,r,s,l,c=this,u=_(e[0],c.columns),d=_(t,c.columns),h=[];for(i=0;e.length>i;i++)e[i].columns&&(h=h.concat(e[i].columns));r=a(c.lockedHeader,c.thead,"tr:eq("+u.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),s=D(e).length,l=D([t]).length,h.length?(s>0&&0===l?g(e,t,h,c.columns,c.lockedHeader.find("thead"),c.thead,this._groups()):0===s&&l>0&&g(e,t,h,c.columns,c.thead,c.lockedHeader.find("thead"),this._groups()),(t.columns||u.cell-d.cell>1||d.cell-u.cell>1)&&(t=y(c.columns,t,e[0],n))&&c._reorderHeader(h,t,n)):s!==l&&function(e,t,n){var i=v(D(t)),r=v(A(t)),o=e.rowSpan;e.rowSpan=n?i>r?o-(i-r)||1:o+(r-i):i>r?o+(i-r):o-(r-i)||1}(r[u.cell],c.columns,s),o(r,u.cell,d.cell,n,e.length)},_reorderContent:function(t,n,i){var r,s,l,c,u=this,d=e(),h=t[0],f=p(t),g=le(h,I(u.columns)),m=le(n,I(u.columns)),v=le(h,E(u.columns)),_=le(n,E(u.columns)),y=D(u.columns).length,b=!!n.locked,w=u.footer||u.wrapper.find(".k-grid-footer"),k=r=_;for(n.hidden&&(b?(_=u.lockedTable.find("colgroup"),k=u.lockedHeader.find("colgroup"),r=e(u.lockedFooter).find(">table>colgroup")):(_=u.tbody.prev(),k=u.thead.prev(),r=w.find(".k-grid-footer-wrap").find(">table>colgroup"))),u._hasFilterRow()&&o(u.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length),o(a(u.lockedHeader,u.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),v,k,i,f.length),u.options.scrollable&&o(a(u.lockedTable,u.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),v,_,i,f.length),w&&w.length&&(o(a(u.lockedFooter,w.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),v,r,i,f.length),o(w.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length)),s=u.tbody.children(":not(.k-grouping-row,.k-detail-row)"),u.lockedTable&&(y>m?g>=y&&U(u.lockedTable.find(">tbody>tr.k-grouping-row"),u.table.find(">tbody>tr.k-grouping-row"),t.length):y>g&&U(u.table.find(">tbody>tr.k-grouping-row"),u.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),d=u.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),l=0,c=s.length;c>l;l+=1)o(a(d[l],s[l],">td:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length)},_autoFitLeafColumn:function(e){this.autoFitColumn(I(this.columns)[e])},autoFitColumn:function(t){var n,i,r,o,a,s,l,c,u,p,f,g,m,v,_,y,b,w=this,x=w.options,C=w.columns,T=w.lockedHeader?R(w.lockedHeader.find(">table>thead")).filter(d).length:0,S="col:not(.k-group-col):not(.k-hierarchy-col)",D="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?C[t]:ie(t)?ae(k(C),function(e){return e===t})[0]:ae(k(C),function(e){return e.field===t})[0])&&h(t)){for(n=le(t,I(C)),i=(r=(o=t.locked)?w.lockedHeader.children("table"):w.thead.parent()).find("[data-index='"+n+"']"),s=o?w.lockedTable:w.table,l=w.footer||e(),w.footer&&w.lockedContent&&(l=w.footer.children(o?".k-grid-footer-locked":".k-grid-footer-wrap")),c=l.find("table").first(),w.lockedHeader&&!o&&(n-=T),u=0;C.length>u&&C[u]!==t;u++)C[u].hidden&&n--;if(a=x.scrollable?r.find(S).eq(n).add(s.children("colgroup").find(S).eq(n)).add(c.find("colgroup").find(S).eq(n)):s.children("colgroup").find(S).eq(n),p=r.add(s).add(c),f=i.outerWidth(),a.width(""),p.css("table-layout","fixed"),a.width("auto"),p.addClass("k-autofitting"),p.css("table-layout",""),g=Math.ceil(Math.max(i.outerWidth(),s.find("tr:not(.k-grouping-row)").eq(0).children(D).eq(n).outerWidth(),c.find("tr").eq(0).children(D).eq(n).outerWidth()))+1,a.width(g),t.width=g,x.scrollable){for(m=r.find("col"),_=0,y=0,b=m.length;b>y;y+=1){if(!(v=m[y].style.width)||-1!=v.indexOf("%")){_=0;break}_+=parseInt(v,10)}_&&p.each(function(){this.style.width=_+"px"})}Ze.msie&&8==Ze.version&&(p.css("display","inline-table"),setTimeout(function(){p.css("display","table")},1)),p.removeClass("k-autofitting"),w.trigger(ze,{column:t,oldWidth:f,newWidth:g}),w._applyLockedContainersWidth(),w._syncLockedContentHeight(),w._syncLockedHeaderHeight()}},reorderColumn:function(e,n,i){var r,o,a=this,s=l(n,a.columns),c=s?s.columns:a.columns,u=le(n,c),d=c[e],h=!!d.locked,p=D(a.columns).length;u!==e&&(n.locked||!h||1!=A(a.columns).length)&&(!n.locked||h||1!=p)&&(a._hideResizeHandle(),i===t&&(i=u>e),o=[n],a._reorderHeader(o,d,i),a.lockedHeader&&(T(a.thead),T(a.lockedHeader)),d.columns&&(d=(d=I(d.columns))[i?0:d.length-1]),n.columns&&(o=I(n.columns)),a._reorderContent(o,d,i),r=(r=!!n.locked)!=h,n.locked=h,c.splice(i?e:e+1,0,n),c.splice(e>u?u:u+1,1),a._templates(),a._updateColumnCellIndex(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),r&&(h?a.trigger(Ne,{column:n}):a.trigger(Oe,{column:n})))},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=m(this.lockedHeader.find("thead"),D(this.columns))),m(this.thead,A(this.columns),e)},lockColumn:function(e){var t,n=this.columns;!(e="number"==typeof e?n[e]:ae(n,function(t){return t.field===e})[0])||e.locked||e.hidden||(t=D(n).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;(e="number"==typeof e?n[e]:ae(n,function(t){return t.field===e})[0])&&e.locked&&!e.hidden&&(t=D(n).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=I(D(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){(t=e(t)).is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(X.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t=this,n=t.selectable&&t.selectable.options.multiple,i=t.options.editable,r=function(){var n=ee(),i=t._editContainer;!i||e.contains(i[0],n)||i[0]===n||e(n).closest(".k-animation-container").length||t.editable.end()&&t.closeCell()};i&&("incell"===t._editMode()?!1!==i.update&&t.wrapper.on(Ve+we,"tr:not(.k-grouping-row) > td",function(i){var r=e(this),o=t.lockedTable&&r.closest("table")[0]===t.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==t.tbody[0]&&!o||e(i.target).is(":input")||(t.editable?t.editable.end()&&(n&&e(ee()).blur(),t.closeCell(),t.editCell(r)):t.editCell(r))}).on("focusin"+we,function(){e.contains(this,ee())||(clearTimeout(t.timer),t.timer=null)}).on("focusout"+we,function(){t.timer=setTimeout(r,1)}):!1!==i.update&&t.wrapper.on(Ve+we,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(n){n.preventDefault(),t.editRow(e(this).closest("tr"))}),!1!==i.destroy?t.wrapper.on(Ve+we,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(n){n.preventDefault(),n.stopPropagation(),t.removeRow(e(this).closest("tr"))}):t.wrapper.on(Ve+we,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),t._confirmation()||e.preventDefault()}))},editCell:function(t){var n,i,r,o;t=e(t),i=I((n=this).columns)[n.cellIndex(t)],r=n._modelForContainer(t),n.closeCell(),!r||r.editable&&!r.editable(i.field)||i.command||!i.field||(n._attachModelChange(r),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:r,target:n,change:function(e){n.trigger(xe,{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable"),o=t.parent().addClass("k-grid-edit-row"),n.lockedContent&&j(o[0],n._relatedRow(o).addClass("k-grid-edit-row")[0]),n.trigger(ke,{container:t,model:r}))},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?X.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),function(e,t){var n,i,r,o;e=e[0],t=t[0],e.rows.length!==t.rows.length&&((n=e.offsetHeight)>(i=t.offsetHeight)?(r=t.rows[t.rows.length-1],Xe.test(r.className)&&(r=t.rows[t.rows.length-2]),o=n-i):(r=e.rows[e.rows.length-1],Xe.test(r.className)&&(r=e.rows[e.rows.length-2]),o=i-n),r.style.height=r.offsetHeight+o+"px")}(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(Ve+we,"a.k-grid-cancel",e._editCancelClickHandler),t.off(Ve+we,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(De,e._modelChangeHandler)},closeCell:function(t){var n,i,r,o,a=this,s=a._editContainer;s&&(n=s.closest("tr").attr(X.attr("uid")),o=a.dataSource.getByUid(n),t&&a.trigger("cancel",{container:s,model:o})||(s.removeClass("k-edit-cell"),i=I(a.columns)[a.cellIndex(s)],r=s.parent().removeClass("k-grid-edit-row"),a._destroyEditable(),a._displayCell(s,i,o),s.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(s),a.lockedContent&&j(r.css("height","")[0],a._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},o=re({},X.Template,i.options.templateSettings),a=X.template(i._cellTmpl(t,r),o);r.count>0&&(a=ue(a,r.storage)),e.empty().html(a(n)),i.angular("compile",function(){return{elements:e,data:[{dataItem:n}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i=this,r=i._editMode();"incell"!==r&&i.cancelRow(),t=e(t),i.lockedContent&&(t=t.add(i._relatedRow(t))),t=t.hide(),(n=i._modelForContainer(t))&&!i.trigger("remove",{row:t,model:n})?(i.dataSource.remove(n),("inline"===r||"popup"===r)&&i.dataSource.sync()):"incell"===r&&i._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(n){var i,r,o,a=this;n instanceof X.data.ObservableObject?i=n:(n=e(n),i=a._modelForContainer(n)),r=a._editMode(),a.cancelRow(),i&&(a._attachModelChange(i),"popup"===r?a._createPopupEditor(i):"inline"===r?a._createInlineEditor(n,i):"incell"===r&&e(n).children(me).each(function(){var n=e(this),r=I(a.columns)[n.index()];return(i=a._modelForContainer(n))&&(!i.editable||i.editable(r.field))&&r.field?(a.editCell(n),!1):t}),(o=a.editView?a.editView.element:a._editContainer)&&(this._editCancelClickHandler||(this._editCancelClickHandler=ue(this._editCancelClick,this)),o.on(Ve+we,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=ue(this._editUpdateClick,this)),o.on(Ve+we,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n,i=this,r=i.options.navigatable,o=i.editable.options.model,a=i.editView?i.editView.element:i._editContainer;t.preventDefault(),t.stopPropagation(),i.trigger("cancel",{container:a,model:o})||(n=i.items().index(e(i.current()).parent()),i.cancelRow(),r&&(i.current(i.items().eq(n).children().filter(_e).first()),G(i.table,!0)))},_createPopupEditor:function(n){var i,r,o,a,s,l,c,u,d,h,p,f=this,g="<div "+X.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form'+(f._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',m=[],v=I(f.columns),_=f.options.editable,y=_.template,b=ie(_)?_.window:{},w=re({},X.Template,f.options.templateSettings);if(b=b||{},y)for(typeof y===qe&&(y=window.unescape(y)),g+=X.template(y,w)(n),o=0,a=v.length;a>o;o++)(i=v[o]).command&&(u=q(i.command,"edit"))&&(r=u);else for(o=0,a=v.length;a>o;o++)(i=v[o]).command?i.command&&(u=q(i.command,"edit"))&&(r=u):(g+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",n.editable&&!n.editable(i.field)||!i.field?(h={storage:{},count:0},s=X.template(f._cellTmpl(i,h),w),h.count>0&&(s=ue(s,h.storage)),g+='<div class="k-edit-field">'+s(n)+"</div>"):(m.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),g+="<div "+X.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'));r&&ie(r)&&(r.text&&ie(r.text)&&(l=r.text.update,c=r.text.cancel),r.attr&&(d=r.attr)),f._isMobile?(g+="</div></div>",f.editView=f.pane.append("<div data-"+X.ns+'role="view" data-'+X.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+X.ns+'role="header" class="k-header">'+f._createButton({name:"update",text:l,attr:d})+(b.title||"Edit")+f._createButton({name:"canceledit",text:c,attr:d})+"</div>"+g+"</div>"),p=f._editContainer=f.editView.element.find(".k-popup-edit-form")):(g+='<div class="k-edit-buttons k-state-default">',g+=f._createButton({name:"update",text:l,attr:d})+f._createButton({name:"canceledit",text:c,attr:d}),g+="</div></div></div>",p=f._editContainer=e(g).appendTo(f.wrapper).eq(0).kendoWindow(re({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),f.trigger("cancel",{container:p,model:n}))return i.preventDefault(),t;var r=f.items().index(e(f.current()).parent());f.cancelRow(),f.options.navigatable&&(f.current(f.items().eq(r).children().filter(_e).first()),G(f.table,!0))}}},b))),f.editable=f._editContainer.kendoEditable({fields:m,model:n,clearContainer:!1,target:f}).data("kendoEditable"),f._isMobile&&p.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),f._openPopUpEditor(),f.trigger(ke,{container:p,model:n})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,n){var i,r,o,a=this,s=[];a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){var t,l,c;r=e(this),(i=I(a.columns)[a.cellIndex(r)]).command||!i.field||n.editable&&!n.editable(i.field)?i.command&&(o=q(i.command,"edit"))&&(r.empty(),ie(o)&&(o.text&&ie(o.text)&&(t=o.text.update,l=o.text.cancel),o.attr&&(c=o.attr)),e(a._createButton({name:"update",text:t,attr:c})+a._createButton({name:"canceledit",text:l,attr:c})).appendTo(r)):(s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr(X.attr("container-for"),i.field),r.empty())}),a._editContainer=t,a.editable=new X.ui.Editable(t.addClass("k-grid-edit-row"),{target:a,fields:s,model:n,clearContainer:!1}),t.length>1&&(j(t[0],t[1]),a._applyLockedContainersWidth()),a.trigger(ke,{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t._destroyEditable(),t.dataSource.cancelChanges(e),t._displayRow("popup"!==t._editMode()?n:t.tbody.find("["+X.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(xe,{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n,i,r,o=this,a=o._modelForContainer(t),s=t.hasClass("k-state-selected"),l=t.hasClass("k-alt");a&&(o.lockedContent&&(n=e((l?o.lockedAltRowTemplate:o.lockedRowTemplate)(a)),o._relatedRow(t.last()).replaceWith(n)),o.angular("cleanup",function(){return{elements:t.get()}}),i=e((l?o.altRowTemplate:o.rowTemplate)(a)),t.replaceWith(i),o.angular("compile",function(){return{elements:i.get(),data:[{dataItem:a}]}}),s&&o.options.selectable&&o.select(i.add(n)),n&&j(i[0],n[0]),(r=i.next()).hasClass("k-detail-row")&&r.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,n){var i,r,o=this;return o._isMobile?(i=X.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),r=e(i(t)).appendTo(o.view.element),(o._actionSheet=new X.mobile.ui.ActionSheet(r,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){e(t.currentTarget).parent().hasClass("km-actionsheet-cancel")||o._removeRow(n)},popup:o._actionSheetPopupOptions})).open(n),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,i=!0===n||typeof n===qe?t.options.messages.editable.confirmation:n.confirmation;return!1===i||null==i||(typeof i===je&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===i?t.options.messages.editable.confirmation:i},e))},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(Ee)&&e.dataSource.sync()},addRow:function(){var e,t,n,i,r,o=this,a=o.dataSource,s=o._editMode(),l=o.options.editable.createAt||"",c=a.pageSize(),u=a.view()||[];(o.editable&&o.editable.end()||!o.editable)&&("incell"!=s&&o.cancelRow(),e=a.indexOf(u[0]),"bottom"==l.toLowerCase()&&(e+=u.length,c&&!a.options.serverPaging&&u.length>=c&&(e-=1)),0>e&&(e=a.page()>a.totalPages()?(a.page()-1)*c:0),n=(t=a.insert(e,{})).uid,r=(i=(o.lockedContent?o.lockedTable:o.table).find("tr["+X.attr("uid")+"="+n+"]")).children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(o._firstEditableColumnIndex(i)),"inline"===s&&i.length?o.editRow(i):"popup"===s?o.editRow(t):r.length&&o.editCell(r),"bottom"==l.toLowerCase()&&o.lockedContent&&(o.lockedContent[0].scrollTop=o.content[0].scrollTop=o.content[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,n,i,r=I(this.columns),o=this._modelForContainer(e);for(n=0,i=r.length;i>n;n++)if(t=r[n],o&&(!o.editable||o.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,r=n.options.toolbar,o=n.options.editable;r&&((t=n.wrapper.find(".k-grid-toolbar")).length||(de(r)||(r=typeof r===qe?r:n._toolbarTmpl(r).replace($e,"\\#"),r=ue(X.template(r),n)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(i),n.angular("compile",function(){return{elements:t.get()}})),o&&!1!==o.create&&t.on(Ve+we,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(Ve+we,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(Ve+we,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}),t.on(Ve+we,".k-grid-excel",function(e){e.preventDefault(),n.saveAsExcel()}),t.on(Ve+we,".k-grid-pdf",function(e){e.preventDefault(),n.saveAsPDF()}))},_toolbarTmpl:function(e){var t,n,i="";if(se(e))for(t=0,n=e.length;n>t;t++)i+=this._createButton(e[t]);return i},_createButton:function(e){var n,r=e.template||'<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',o=typeof e===qe?e:e.name||e.text,a={className:nt[o]?nt[o].className:"k-grid-"+(o||"").replace(/\s/g,""),text:o,imageClass:"",attr:"",iconClass:""},s=this.options.messages.commands;if(!(o||ie(e)&&e.template))throw Error("Custom commands should have name specified");return ie(e)?(e.className&&le(a.className,e.className.split(" "))<0?e.className+=" "+a.className:e.className===t&&(e.className=a.className),"edit"===o&&ie(e.text)&&((e=re(!0,{},e)).text=e.text.edit),e.attr&&(ie(e.attr)&&(e.attr=i(e.attr)),typeof e.attr===qe&&(n=e.attr.match(/class="(.+?)"/))&&le(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1])),a=re(!0,a,nt[o],{text:s[o]},e)):a=re(!0,a,nt[o],{text:s[o]}),X.template(r)(a)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Ve+we,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(Ve+we,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(Ve+we,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable,r=be+"["+X.attr("field")+"]",o=t.content?".k-grid-header:first "+r:"table:first>.k-grid-header "+r;i&&!1!==i.enabled&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new K.Groupable(n,re({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:o,filter:o,allowDrag:t.options.reorderable})))},_continuousItems:function(t,n){var i,r,o,a,s,l,c,u;if(this.lockedContent){for(r=(i=this).table.add(i.lockedTable),o=e(t,r[0]),a=e(t,r[1]),s=n?D(i.columns).length:1,l=n?i.columns.length-s:1,c=[],u=0;o.length>u;u+=s)ce.apply(c,o.slice(u,u+s)),ce.apply(c,a.splice(0,l));return c}},_selectable:function(){var n,i,r,o,a=this,s=[],l=a._isLocked(),c=a.options.selectable;c&&(a.selectable&&a.selectable.destroy(),c=X.ui.Selectable.parseOptions(c),n=c.multiple,i=c.cell,a._hasDetails()&&(s[s.length]=".k-detail-row"),(a.options.groupable||a._hasFooters())&&(s[s.length]=".k-grouping-row,.k-group-footer"),""!==(s=s.join(","))&&(s=":not("+s+")"),r=a.table,l&&(r=r.add(a.lockedTable)),o=">"+(i?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)":"tbody>tr"+s),a.selectable=new X.ui.Selectable(r,{filter:o,aria:!0,multiple:n,change:function(){a.trigger(De)},useAllItems:l&&n&&i,relatedTarget:function(t){var n,r,o,s;if(!i&&l){for(r=e(),o=0,s=t.length;s>o;o++)n=a._relatedRow(t[o]),le(n[0],t)<0&&(r=r.add(n));return r}},continuousItems:function(){return a._continuousItems(o,i)}}),a.options.navigatable&&r.on("keydown"+we,function(o){var s=a.current(),c=o.target;if(o.keyCode===ne.SPACEBAR&&e.inArray(c,r)>-1&&!s.is(".k-edit-cell,.k-header")&&s.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),s=i?s:s.parent(),l&&!i&&(s=s.add(a._relatedRow(s))),n)if(o.ctrlKey){if(s.hasClass(Fe))return s.removeClass(Fe),a.trigger(De),t}else a.selectable.clear();else a.selectable.clear();a.selectable.value(s)}}))},_clipboard:function(){var e,t=this.options;t.selectable&&t.allowCopy&&(e=this,t.navigatable||e.table.add(e.lockedTable).attr("tabindex",0).on("mousedown"+we+" keydown"+we,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+we,ve+">"+_e,ue($,e)),e.copyHandler=ue(e.copySelection,e),e.updateClipBoardState=function(){e.areaClipBoard&&e.areaClipBoard.val(e.getTSV()).focus().select()},e.bind("change",e.updateClipBoardState),e.wrapper.on("keydown",e.copyHandler),e.clearAreaHandler=ue(e.clearArea,e),e.wrapper.on("keyup",e.clearAreaHandler))},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&""+window.getSelection()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t,n,i,r,o,a,s=this,l=s.select(),c="\t",u=s.options.allowCopy;return e.isPlainObject(u)&&u.delimeter&&(c=u.delimeter),t="",l.length&&(l.eq(0).is("tr")&&(l=l.find("td:not(.k-group-cell)")),l.filter(":visible"),n=[],i=this.columns.length,r=s._isLocked()&&D(s.columns).length,o=!0,e.each(l,function(t,a){var l,c,u;l=(a=e(a)).closest("tr").index(),c=a.index(),c-=a.prevAll(":hidden").length,r&&o&&(o=e.contains(s.lockedTable[0],a[0])),s._groups()&&o&&(c-=s._groups()),i>(c=o?c:c+r)&&(i=c),u=a.text(),n[l]||(n[l]=[]),n[l][c]=u}),a=n.length,n=e.each(n,function(e,t){t&&(n[e]=t.slice(i),a>e&&(a=e))}),e.each(n.slice(a),function(e,n){t+=n?n.join(c)+"\r\n":"\r\n"})),t},clearArea:function(t){this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(this.options.navigatable?e(this.current()).closest("table").focus():this.table.focus()),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=ue(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e,n,i,r=this.columns,o=!1,a=window.innerWidth>0?window.innerWidth:screen.width;for(e=0;r.length>e;e++)(i=(n=r[e]).minScreenWidth)!==t&&null!==i&&(o=!0,i>a?this.hideColumn(n):this.showColumn(n));return o},_relatedRow:function(t){var n,i,r=this.lockedTable;return t=e(t),r?(i=(n=t.closest(this.table.add(this.lockedTable))).find(">tbody>tr").index(t),(n=n[0]===this.table[0]?r:this.table).find(">tbody>tr").eq(i)):t},clearSelection:function(){this.selectable.clear(),this.trigger(De)},select:function(n){var i=this,r=i.selectable;return(n=e(n)).length?(r.options.multiple||(r.clear(),n=n.first()),i._isLocked()&&(n=n.add(n.map(function(){return i._relatedRow(this)}))),r.value(n),t):r.value()},_updateCurrentAttr:function(t,n){var i,r=e(t).data("headerId");e(t).removeClass(Le).removeAttr("aria-describedby").closest("table").removeAttr("aria-activedescendant"),r?(r=r.replace(this._cellId,""),e(t).attr("id",r)):e(t).removeAttr("id"),n.data("headerId",n.attr("id")).attr("id",this._cellId).addClass(Le).closest("table").attr("aria-activedescendant",this._cellId),n.closest("tr").hasClass("k-grouping-row")||n.hasClass("k-header")?n.attr("aria-describedby",this._cellId):((i=this.columns[this.cellIndex(n)])&&(r=i.headerAttributes.id),n.attr("aria-describedby",r+" "+this._cellId)),this._current=n},_scrollCurrent:function(){var t,n,i,r,o,a,s=this._current,l=this.options.scrollable;s&&l&&(i=(n=(t=s.parent()).closest("table").parent()).is(".k-grid-content-locked,.k-grid-header-locked"),r=n.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),o=e(this.content).find(">.k-virtual-scrollable-wrap").andSelf().last()[0],r&&(l.virtual?(a=Math.max(le(t[0],this._items(t.parent())),0),this._rowVirtualIndex=this.virtualScrollable.itemIndex(a),this.virtualScrollable.scrollIntoView(t)):this._scrollTo(this._relatedRow(t)[0],o)),this.lockedContent&&(this.lockedContent[0].scrollTop=o.scrollTop),i||this._scrollTo(s[0],o))},current:function(t){var n=this._current;return(t=e(t)).length&&(n&&n[0]===t[0]||(this._updateCurrentAttr(n,t),this._scrollCurrent())),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Le),this._current=null)},_scrollTo:function(t,n){var i,r=t.tagName.toLowerCase(),o="td"===r||"th"===r,a=t[o?"offsetLeft":"offsetTop"],s=t[o?"offsetWidth":"offsetHeight"],l=n[o?"scrollLeft":"scrollTop"],c=n[o?"clientWidth":"clientHeight"],u=a+s,d=0,h=0,p=0;Ke&&o&&(i=e(t).closest("table")[0],Ze.msie?h=i.offsetLeft:Ze.mozilla&&(p=i.offsetLeft-X.support.scrollbar())),d=(l=Math.abs(l+h-p))>a?a:u>l+c?c>=s?u-c:a:l,d=Math.abs(d+h)+p,n[o?"scrollLeft":"scrollTop"]=d},_navigatable:function(){var t,n,i,r=this;r.options.navigatable&&(t=r.table.add(r.lockedTable),n=r.thead.parent().add(e(">table",r.lockedHeader)),i=t,r.options.scrollable&&(i=i.add(n),n.attr(We,-1)),this._navigatableTables=i,i.off("mousedown"+we+" focus"+we+" focusout"+we+" keydown"+we),n.on("keydown"+we,ue(r._openHeaderMenu,r)).find("a.k-link").attr("tabIndex",-1),t.attr(We,pe.max(t.attr(We)||0,0)).on("mousedown"+we+" keydown"+we,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),i.on(X.support.touch?"touchstart"+we:"mousedown"+we,ve+">"+_e,ue($,r)).on("focus"+we,ue(r._tableFocus,r)).on("focusout"+we,ue(r._tableBlur,r)).on("keydown"+we,ue(r._tableKeyDown,r)))},_openHeaderMenu:function(e){e.altKey&&e.keyCode==ne.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(We,-1),e.attr(We,0)},_tableFocus:function(t){var n,i;X.support.touch||(n=this.current(),i=e(t.currentTarget),n&&n.is(":visible")?n.addClass(Le):this.current(i.find(ye)),this._setTabIndex(i))},_tableBlur:function(){var e=this.current();e&&e.removeClass(Le)},_tableKeyDown:function(n){var i,r=this.current(),o=this.virtualScrollable&&this.virtualScrollable.fetching(),a=e(n.target),s=!n.isDefaultPrevented()&&!a.is(":button,a,:input,a>.k-icon");return o?(n.preventDefault(),t):((r=r||e(this.lockedTable).add(this.table).find(ye)).length&&(i=!1,s&&n.keyCode==ne.UP&&(i=this._moveUp(r)),s&&n.keyCode==ne.DOWN&&(i=this._moveDown(r)),s&&n.keyCode==(Ke?ne.LEFT:ne.RIGHT)&&(i=this._moveRight(r,n.altKey)),s&&n.keyCode==(Ke?ne.RIGHT:ne.LEFT)&&(i=this._moveLeft(r,n.altKey)),s&&n.keyCode==ne.PAGEDOWN&&(i=this._handlePageDown()),s&&n.keyCode==ne.PAGEUP&&(i=this._handlePageUp()),(n.keyCode==ne.ENTER||n.keyCode==ne.F2)&&(i=this._handleEnterKey(r,n.currentTarget,a)),n.keyCode==ne.ESC&&(i=this._handleEscKey(r,n.currentTarget)),n.keyCode==ne.TAB&&(i=this._handleTabKey(r,n.currentTarget,n.shiftKey)),i&&(n.preventDefault(),n.stopPropagation())),t)},_moveLeft:function(e,t){var n,i,r=e.parent(),o=r.parent();return t?this.collapseRow(r):(i=o.find(ve).index(r),(n=this._prevHorizontalCell(o,e,i))[0]||(o=this._horizontalContainer(o),(n=this._prevHorizontalCell(o,e,i))[0]!==e[0]&&G(o.parent(),!0)),this.current(n)),!0},_moveRight:function(e,t){var n,i,r=e.parent(),o=r.parent();return t?this.expandRow(r):(i=o.find(ve).index(r),(n=this._nextHorizontalCell(o,e,i))[0]||(o=this._horizontalContainer(o,!0),(n=this._nextHorizontalCell(o,e,i))[0]!==e[0]&&G(o.parent(),!0)),this.current(n)),!0},_moveUp:function(e){var t=e.parent().parent(),n=this._prevVerticalCell(t,e);return n[0]||(t=this._verticalContainer(t,!0),(n=this._prevVerticalCell(t,e))[0]&&G(t.parent(),!0)),this.current(n),!0},_moveDown:function(e){var t=e.parent().parent(),n=this._nextVerticalCell(t,e);return n[0]||(t=this._verticalContainer(t),(n=this._nextVerticalCell(t,e))[0]&&G(t.parent(),!0)),this.current(n),!0},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,n,i){var r;return!(!this.options.editable||"incell"!=this._editMode()||t.is("th")||((r=e(ee()).closest(".k-edit-cell"))[0]&&r[0]!==t[0]&&(t=r),!(r=this._tabNext(t,n,i)).length||(this._handleEditing(t,r,r.closest("table")),0)))},_handleEscKey:function(t,n){var i,r=ee(),o="incell"==this._editMode();return function(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}(t)?(o?this.closeCell(!0):(i=e(t).parent().index(),r&&r.blur(),this.cancelRow(),i>=0&&this.current(this.items().eq(i).children(_e).first())),Ze.msie&&9>Ze.version&&document.body.focus(),G(n,!0),!0):!!t.has(r).length&&(G(n,!0),!0)},_toggleCurrent:function(e){var t=e.parent();return!!t.is(".k-master-row,.k-grouping-row")&&(t.find(".k-icon:first").click(),!0)},_handleEnterKey:function(t,n,i){var r,o=this.options.editable,a=i.closest("[role=gridcell]");return i.is("table")||e.contains(t[0],i[0])||(t=a),t.is("th")?(t.find(".k-link").click(),!0):!((o||!this._toggleCurrent(t))&&((r=t.find(":kendoFocusable:first"))[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(r.focus(),0):!o||i.is(":button,.k-button,textarea")||(a[0]||(a=t),this._handleEditing(a,!1,n),0)))},_nextHorizontalCell:function(e,t,n){var i,r,o=t.nextAll(me);return o.length||-1!=(i=e.find(ve)).index(t.parent())?o.first():t.hasClass("k-header")?(r=[],S([D(this.columns)[0]],P(i.eq(0).children().first()),r,0,0),r[n]?r[n][0]:t):t.parent().hasClass("k-filter-row")?i.last().children(me).first():i.eq(n).children(me).first()},_prevHorizontalCell:function(e,t,n){var i,r,o,a=t.prevAll(me);return a.length||-1!=(i=e.find(ve)).index(t.parent())?a.first():t.hasClass("k-header")?(r=[],S([(o=D(this.columns))[o.length-1]],P(i.eq(0).children().last()),r,0,0),r[n]?r[n][0]:t):t.parent().hasClass("k-filter-row")?i.last().children(me).last():i.eq(n).children(me).last()},_currentDataIndex:function(e,n){var i,r=n.attr("data-index");return r?(i=D(this.columns).length)&&!e.closest("div").hasClass("k-grid-content-locked")[0]?r-i:r:t},_prevVerticalCell:function(t,n){var i,r=n.parent(),o=t.children(ve),a=o.index(r),s=this._currentDataIndex(t,n);if(s||n.hasClass("k-header"))return(i=function t(n){var i,r,o,a,s,l,c=n.closest("table"),u=e().add(n),d=n.closest("tr"),h=c.find("tr:not(.k-filter-row)"),p=h.index(d);if(p>0){for(i=h.eq(p-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),r=0,o=d.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(n),a=n.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),s=0;a.length>s;s++)r+=a[s].colSpan||1;for(o+=Math.max(r-1,0),r=0,s=0;i.length>s;s++)if(r+=(l=i.eq(s)).attr("colSpan")?l[0].colSpan:1,o>=s&&r>o){u=t(l).add(u);break}}return u}(n)).eq(i.length-2);if(s=r.children(me).index(n),r.hasClass("k-filter-row"))return R(t).eq(s);if(-1==a){if(!(r=t.find(".k-filter-row"))[0])return R(t).eq(s)}else r=0===a?e():o.eq(a-1);return(i=r.children(me)).eq(i.length>s?s:0)},_nextVerticalCell:function(e,n){var i,r=n.parent(),o=e.children(ve),a=o.index(r),s=this._currentDataIndex(e,n);return-1!=a&&s===t&&n.hasClass("k-header")?P(n).eq(1):(s=s?parseInt(s,10):r.children(me).index(n),(i=(r=o.eq(-1==a?0:a+n[0].rowSpan)).children(me)).eq(i.length>s?s:0))},_verticalContainer:function(e,t){var n=e.parent(),i=this._navigatableTables.length,r=Math.floor(i/2),o=le(n[0],this._navigatableTables);return t&&(r*=-1),((o+=r)>=0||i>o)&&(n=this._navigatableTables.eq(o)),n.find(t?"thead":"tbody")},_horizontalContainer:function(e,t){var n,i,r=this._navigatableTables.length;return 2>=r?e:(n=e.parent(),i=le(n[0],this._navigatableTables),i+=t?1:-1,!t||2!=i&&i!=r?!t&&(1==i||0>i)?e:this._navigatableTables.eq(i).find("thead, tbody"):e)},_tabNext:function(e,t,n){var i=!0,r=n?e.prevAll(me+":first"):e.nextAll(":visible:first");return r.length||(r=e.parent(),this.lockedTable&&(i=n&&t==this.lockedTable[0]||!n&&t==this.table[0],r=this._relatedRow(r)),i&&(r=r[n?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),r=r.children(me+(n?":last":":first"))),r},_handleEditing:function(n,i,r){var o,a,s=this,l=e(ee()),c=s._editMode(),u=Ze.msie,d=u&&9>Ze.version,h=s._editContainer;if(r=e(r),a="incell"==c?n.hasClass("k-edit-cell"):n.parent().hasClass("k-grid-edit-row"),s.editable){if(e.contains(h[0],l[0])&&(Ze.opera||d?l.change().triggerHandler("blur"):(l.blur(),u&&l.blur())),!s.editable)return G(r),t;if(!s.editable.end())return s.current("incell"==c?h:h.children().filter(me).first()),(o=h.find(":kendoFocusable:first")[0])&&o.focus(),t;"incell"==c?s.closeCell():(s.saveRow(),a=!0)}i&&s.current(i),d&&document.body.focus(),G(r,!0),(!a&&!i||i)&&("incell"==c?s.editCell(s.current()):s.editRow(s.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget"),n&&(e.wrapper.css(Ue,n),t.css(Ue,"auto")),e._initMobile()},_initMobile:function(){var t,n=this.options,i=this;this._isMobile=!0===n.mobile&&X.support.mobileOS||"phone"===n.mobile||"tablet"===n.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+X.ns+'role="view" data-'+X.ns+'init-widgets="false"></div>').parent(),this.pane=X.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},n.height&&this.pane.element.parent().css(Ue,n.height),this._editAnimation="slide",this.view.bind("show",function(){i._isLocked()&&(i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight())}))},_tbody:function(){var t,n=this.table;(t=n.find(">tbody")).length||(t=e("<tbody/>").appendTo(n)),this.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,i,r,o=this,a=o.options.scrollable,s=!0!==a&&a.virtual&&!o.virtualScrollable,l=!X.support.kineticScrollNeeded||s?X.support.scrollbar():0;a&&((t=o.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(o.table)),t.css(Ke?"padding-left":"padding-right",a.virtual?l+1:l),n=e('<table role="grid" />'),Je&&n.attr("cellspacing",0),n.width(o.table[0].style.width),n.append(o.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),o.content=o.table.parent(),o.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(o.content=o.content.parent()),o.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(o.content=o.table.wrap('<div class="k-grid-content" />').parent()),s&&(o.virtualScrollable=new tt(o.content,{dataSource:o.dataSource,itemHeight:function(){return o._averageRowHeight()}})),o.scrollables=t.children(".k-grid-header-wrap"),(i=o.wrapper.find(".k-grid-footer")).length&&(o.scrollables=o.scrollables.add(i.children(".k-grid-footer-wrap"))),a.virtual?o.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+we).bind("scroll"+we,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}):(o.content.unbind("scroll"+we).bind("scroll"+we,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}),(r=o.content.data("kendoTouchScroller"))&&r.destroy(),(r=X.touchScroller(o.content))&&r.movable&&(o.touchScroller=r,r.movable.bind("change",function(e){o.scrollables.scrollLeft(-e.sender.x),o.lockedContent&&o.lockedContent.scrollTop(-e.sender.y)}),o.one(Ie,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_renderNoRecordsContent:function(){var t,n=this;n.options.noRecords&&((t=n.table.parent().children("."+Be)).length&&t.remove(),n.dataSource&&n.dataSource.view().length||e(n.noRecordsTemplate({})).insertAfter(n.table))},_setContentWidth:function(t){var n,i=this,r="k-grid-content-expander",o=i.resizable;i.options.scrollable&&i.wrapper.is(":visible")&&(n=i.table.parent().children("."+r),i._setContentWidthHandler=ue(i._setContentWidth,i),i.dataSource&&i.dataSource.view().length?n[0]&&(n.remove(),o&&o.unbind("resize",i._setContentWidthHandler)):(n[0]||(n=e('<div class="k-grid-content-expander"></div>').appendTo(i.table.parent()),o&&o.bind("resize",i._setContentWidthHandler)),i.thead&&(n.width(i.thead.width()),t&&i.content.scrollLeft(t))),i._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),i=this.wrapper[0].clientWidth,r=this._groups(),o=X.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=C(a),c=C(s);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=i&&(l=i-3*o),this.lockedHeader.add(this.lockedContent).width(l),n[0].style.width=n.parent().width()-l-2+"px",t.add(this.table).width(c),this.virtualScrollable&&(i-=o),this.content[0].style.width=i-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),(e=this.footer.find(".k-grid-footer-wrap"))[0].style.width=n[0].clientWidth+"px",e.children().first().width(c))}},_setContentHeight:function(){var e=this,t=e.options,n=e.wrapper.innerHeight(),i=e.wrapper.children(".k-grid-header"),r=X.support.scrollbar();t.scrollable&&e.wrapper.is(":visible")&&(n-=i.outerHeight(),e.pager&&(n-=e.pager.element.outerHeight()),t.groupable&&(n-=e.wrapper.children(".k-grouping-header").outerHeight()),t.toolbar&&(n-=e.wrapper.children(".k-grid-toolbar").outerHeight()),e.footerTemplate&&(n-=e.wrapper.children(".k-grid-footer").outerHeight()),function(e){var t;return!!e[0].style.height||(t=e.height(),e.height("auto"),t!=e.height()?(e.height(""),!0):(e.height(""),!1))}(e.wrapper)&&(n>2*r?(e.lockedContent&&(r=e.table[0].offsetWidth>e.table.parent()[0].clientWidth?r:0,e.lockedContent.height(n-r)),e.content.height(n)):e.content.height(2*r+1)))},_averageRowHeight:function(){var e,t=this,n=t._items(t.tbody).length,i=t._rowHeight;return 0===n?i:(t._rowHeight||(t._rowHeight=i=t.table.outerHeight()/n,t._sum=i,t._measures=1),i!==(e=t.table.outerHeight()/n)&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),i)},_dataSource:function(){var e,n=this,i=n.options,r=i.dataSource;r=se(r)?{data:r}:r,ie(r)&&(re(r,{table:n.table,fields:n.columns}),e=i.pageable,ie(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(De,n._refreshHandler).unbind(fe,n._progressHandler).unbind(ge,n._errorHandler):(n._refreshHandler=ue(n.refresh,n),n._progressHandler=ue(n._requestStart,n),n._errorHandler=ue(n._error,n)),n.dataSource=Z.create(r).bind(De,n._refreshHandler).bind(fe,n._progressHandler).bind(ge,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,o,a,s,l,c,u,d,h=this,p=h.tbody,f=t.model,g=h.tbody.find("tr["+X.attr("uid")+"="+f.uid+"]"),m=g.hasClass("k-alt"),v=h._items(p).index(g),_=h.lockedContent;if(_&&(n=h._relatedRow(g)),g.add(n).children(".k-edit-cell").length&&!h.options.rowTemplate)g.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){i=e(this),(r=I(h.columns)[h.cellIndex(i)]).field===t.field&&(i.hasClass("k-edit-cell")?i.addClass("k-dirty-cell"):(h._displayCell(i,r,f),e('<span class="k-dirty"/>').prependTo(i)))});else if(!g.hasClass("k-grid-edit-row")){for(s=e().add(g),_&&(o=(m?h.lockedAltRowTemplate:h.lockedRowTemplate)(f),s=s.add(n),n.replaceWith(o)),h.angular("cleanup",function(){return{elements:s.get()}}),o=(m?h.altRowTemplate:h.rowTemplate)(f),g.replaceWith(o),o=h._items(p).eq(v),d=[{dataItem:f}],_&&(g=g.add(n),n=h._relatedRow(o)[0],j(o[0],n),o=o.add(n),d.push({dataItem:f})),h.angular("compile",function(){return{elements:o.get(),data:d}}),(a=h.options.selectable)&&g.hasClass("k-state-selected")&&h.select(o),c=s.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=o.children(":not(.k-group-cell,.k-hierarchy-cell)"),v=0,u=h.columns.length;u>v;v++)r=h.columns[v],i=l.eq(v),a&&c.eq(v).hasClass("k-state-selected")&&i.addClass("k-state-selected"),r.field===t.field&&e('<span class="k-dirty"/>').prependTo(i);h.trigger("itemChange",{item:o,data:f,ns:K})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&((t=n.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),n.pager="object"==typeof i&&i instanceof X.ui.Pager?i:new X.ui.Pager(t,re({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n,i,r=this,o=r.dataSource.aggregates(),a="",s=r.footerTemplate,l=r.options,c=r.footer||r.wrapper.find(".k-grid-footer");s?(a=e(r._wrapFooter(s(o))),c.length?(n=a,r.angular("cleanup",function(){return{elements:c.get()}}),c.replaceWith(n),c=r.footer=n):c=r.footer=l.scrollable?l.pageable?a.insertBefore(r.wrapper.children("div.k-grid-pager")):a.appendTo(r.wrapper):a.insertBefore(r.tbody),r.angular("compile",function(){return{elements:c.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:oe(r.columns,function(e){return{column:e,aggregate:o[e.field]}})}})):c&&!r.footer&&(r.footer=c),c.length&&(l.scrollable&&(t=c.attr("tabindex",-1).children(".k-grid-footer-wrap"),r.scrollables=r.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),r._footerWidth&&c.find("table").css("width",r._footerWidth),t&&(i=r.content.scrollLeft(),!0!==l.scrollable&&l.scrollable.virtual&&!r.virtualScrollable&&(i=r.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(i))),r.lockedContent&&(r._appendLockedColumnFooter(),r._applyLockedContainersWidth(),r._syncLockedFooterHeight())},_wrapFooter:function(t){var n="",i=X.support.mobileOS?0:X.support.scrollbar();return this.options.scrollable?(n=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(Je?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),this._appendCols(n.find("table")),n.css(Ke?"padding-left":"padding-right",i),n):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,n,i,r,o,a,s,l,c,u=this,d=I(u.columns),h=u.options,p=h.columnMenu,f=ae(u.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){u.trigger(Se,{field:e.field,container:e.container})},v=function(e){G(e.closest("table"),!0)},_=h.$angular;if(p)for("boolean"==typeof p&&(p={}),s=0,l=(a=R(u.thead)).length;l>s;s++)n=d[s],c=a.eq(s),n.command||!n.field&&!c.attr("data-"+X.ns+"field")||((e=c.data("kendoColumnMenu"))&&e.destroy(),r=!1!==n.sortable&&!1!==p.sortable&&!1!==h.sortable&&re({},h.sortable,{compare:(n.sortable||{}).compare}),o=!(!h.filterable||!1===n.filterable||!1===p.filterable)&&re({pane:u.pane},h.filterable,n.filterable),n.filterable&&n.filterable.dataSource&&(o.forceUnique=!1,o.checkSource=n.filterable.dataSource),o&&(o.format=n.format),i={dataSource:u.dataSource,values:n.values,columns:p.columns,sortable:r,filterable:o,messages:p.messages,owner:u,closeCallback:v,init:m,pane:u.pane,filter:g?":not(.k-column-active)":"",lockedColumns:!f&&!1!==n.lockable&&D(d).length>0},_&&(i.$angular=_),c.kendoColumnMenu(i))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,n,i,r,o,a,s=this,l=I(s.columns),c=function(e){s.trigger(Te,{field:e.field,container:e.container})},u=function(e){G(e.closest("table"),!0)},d=s.options.filterable;if(d&&typeof d.mode==qe&&-1==d.mode.indexOf("menu")&&(d=!1),d&&!s.options.columnMenu)for(i=0,r=(t=R(s.thead)).length;r>i;i++)n=t.eq(i),!1===l[i].filterable||l[i].command||!l[i].field&&!n.attr("data-"+X.ns+"field")||((e=n.data("kendoFilterMenu"))&&e.destroy(),(e=n.data("kendoFilterMultiCheck"))&&e.destroy(),o=l[i].filterable,a=re({},d,o,{dataSource:s.dataSource,values:l[i].values,format:l[i].format,closeCallback:u,title:l[i].title||l[i].field,init:c,pane:s.pane}),o&&o.messages&&(a.messages=re(!0,{},d.messages,o.messages)),o&&o.dataSource&&(a.forceUnique=!1,a.checkSource=o.dataSource),o&&o.multi?n.kendoFilterMultiCheck(a):n.kendoFilterMenu(a))},_filterRow:function(){var t,n,i,r,o,a,s,l,c,u,d,h,p=this;if(p._hasFilterRow())for(t=I(p.columns),n=p.options.filterable,i=p.thead.find(".k-filter-row"),this._updateHeader(this.dataSource.group().length),r=0;t.length>r;r++)if(a=t[r],s=p.options.filterable.operators,l=!1,c=e("<th/>"),u=a.field,a.hidden&&c.hide(),i.append(c),u&&!1!==a.filterable){if(d=a.filterable&&a.filterable.cell||{},(o=p.options.dataSource)instanceof Z&&(o=p.options.dataSource.options),h=re(!0,{},n.messages),a.filterable&&re(!0,h,a.filterable.messages),!1===d.enabled){c.html("&nbsp;");continue}d.dataSource&&(o=d.dataSource,l=!0),a.filterable&&a.filterable.operators&&(s=a.filterable.operators),e("<span/>").attr(X.attr("field"),u).kendoFilterCell({dataSource:p.dataSource,suggestDataSource:o,customDataSource:l,field:u,messages:h,values:a.values,template:d.template,delay:d.delay,inputWidth:d.inputWidth,suggestionOperator:d.suggestionOperator,minLength:d.minLength,dataTextField:d.dataTextField,operator:d.operator,operators:s,showOperators:d.showOperators}).appendTo(c)}else c.html("&nbsp;")},_sortable:function(){var e,t,n,i,r,o,a=this,s=I(a.columns),l=a.options.sortable;if(l){for(r=0,o=(i=R(a.thead)).length;o>r;r++)!1!==(e=s[r]).sortable&&!e.command&&e.field&&((t=(n=i.eq(r)).data("kendoColumnSorter"))&&t.destroy(),n.attr("data-"+X.ns+"field",e.field).kendoColumnSorter(re({},l,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)"})));i=null}},_columns:function(t){var n,i,r,o=this,a=o.table,s=a.find("col"),l=o.options.dataSource;if(t=t.length?t:oe(a.find("th"),function(t,n){var i=(t=e(t)).attr(X.attr("sortable")),r=t.attr(X.attr("filterable")),o=t.attr(X.attr("type")),a=t.attr(X.attr("groupable")),l=t.attr(X.attr("field")),c=t.attr(X.attr("title")),u=t.attr(X.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,title:c,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==a,menu:u,template:t.attr(X.attr("template")),width:s.eq(n).css("width")}}),n=!(o.table.find("tbody tr").length>0&&(!l||!l.transport)),o.options.scrollable){if(r=t,i=D(t),t=A(t),i.length>0&&0===t.length)throw Error("There should be at least one non locked column");(function(e,t){var n,i,r=0,o=e.find("th:not(.k-group-cell)");for(n=0,i=t.length;i>n;n++)t[n].locked&&(o.eq(n).insertBefore(o.eq(r)),o=e.find("th:not(.k-group-cell)"),r++)})(o.element.find("tr:has(th):first"),r),t=i.concat(t)}o.columns=function e(t,n,i){return oe(t,function(t){var r,o;return(!h(t=typeof t===qe?{field:t}:t)||i)&&(t.attributes=F(t.attributes),t.footerAttributes=F(t.footerAttributes),t.headerAttributes=F(t.headerAttributes),r=!0),t.columns&&(t.columns=e(t.columns,n,r)),o=X.guid(),t.headerAttributes=re({id:o},t.headerAttributes),re({encoded:n,hidden:r},t)})}(t,n)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,o){var a,s,l=this,c=re({},X.Template,l.options.templateSettings),u=t.length,d={storage:{},count:0},h=l._hasDetails(),p=[],f=l._groups();if(!e){for(e="<tr",r&&p.push("k-alt"),h&&p.push("k-master-row"),p.length&&(e+=' class="'+p.join(" ")+'"'),u&&(e+=" "+X.attr("uid")+'="#='+X.expr("uid",c.paramName)+'#"'),e+=" role='row'>",f>0&&!o&&(e+=n(f)),h&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),a=0;u>a;a++)(s=t[a]).template,e+="<td"+i(s.attributes)+" role='gridcell'>",e+=l._cellTmpl(s,d),e+="</td>";e+="</tr>"}return e=X.template(e,c),d.count>0?ue(e,d.storage):e},_headerCellText:function(e){var t=re({},X.Template,this.options.templateSettings),n=e.headerTemplate,i=typeof n,r=e.title||e.field||"";return i===je?r=X.template(n,t)({}):i===qe&&(r=n),r},_cellTmpl:function(e,t){var n,i,r=this,o=re({},X.Template,r.options.templateSettings),a=e.template,s=o.paramName,l=e.field,c="",u=e.format,d=typeof a,h=e.values;if(e.command){if(se(e.command)){for(n=0,i=e.command.length;i>n;n++)c+=r._createButton(e.command[n]);return c.replace($e,"\\#")}return r._createButton(e.command).replace($e,"\\#")}return d===je?(t.storage["tmpl"+t.count]=a,c+="#=this.tmpl"+t.count+"("+s+")#",t.count++):d===qe?c+=a:h&&h.length&&ie(h[0])&&"value"in h[0]&&l?(c+="#var v ="+X.stringify(H(h)).replace($e,"\\#")+"#",c+="#var f = v[",o.useWithBlock||(c+=s+"."),c+=l+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",u&&(c+='kendo.format("'+u.replace(Ge,"\\$1")+'",'),c+=l?(l=X.expr(l,s))+"==null?'':"+l:"''",u&&(c+=")"),c+="#"),c},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),o=t.footer||t.wrapper.find(".k-grid-footer"),a=i.aggregate(),s=I(t.columns),l=I(D(t.columns)),c=n.scrollable?I(A(t.columns)):s;if(n.scrollable&&l.length){if(n.rowTemplate||n.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,c),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!he(a)||!he(a)&&!o.length||ae(s,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(s,a,"footerTemplate","k-footer-template")),r&&ae(s,function(e){return e.groupFooterTemplate}).length&&(a=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(c,a,"groupFooterTemplate","k-group-footer",l.length),n.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,a,"groupFooterTemplate","k-group-footer"))),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,n,i,r=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",o={storage:{},count:0},a=e.extend({},X.Template,this.options.templateSettings),s=a.paramName,l="";return"function"==(n=typeof(t=this.options.noRecords.template?this.options.noRecords.template:X.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,r)))?(o.storage["tmpl"+o.count]=t,l+="#=this.tmpl"+o.count+"("+s+")#",o.count++):"string"===n&&(l+=t),i=X.template(X.format('<div class="{0}">{1}</div>',Be,l),a),o.count>0&&(i=e.proxy(i,o.storage)),i},_footerTmpl:function(e,t,r,o,a){var s,l,c,u,d,h=this,p=re({},X.Template,h.options.templateSettings),f=p.paramName,g="",m={},v=0,_={},y=h._groups(),b=h.dataSource._emptyAggregates(t);for(g+='<tr class="'+o+'">',y>0&&!a&&(g+=n(y)),h._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),s=0,l=e.length;l>s;s++)u=typeof(c=(d=e[s])[r]),g+="<td"+i(d.footerAttributes)+">",c?(u!==je&&(_=b[d.field]?re({},p,{paramName:f+"['"+d.field+"']"}):{},c=X.template(c,_)),m["tmpl"+v]=c,g+="#=this.tmpl"+v+"("+f+")#",v++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=X.template(g,p),v>0?ue(g,m):g},_detailTmpl:function(e){var t=this,i="",r=re({},X.Template,t.options.templateSettings),o=r.paramName,a={},s=0,l=t._groups(),c=p(I(t.columns)).length,u=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">",u===je?(a["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+o+")#",s++):i+=e,i+="</td></tr>",i=X.template(i,r),s>0?ue(i,a):i},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events[Ce]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==qe&&-1!=t.mode.indexOf("row"),i=this.columns,r=e.grep(i,function(e){return!1===e.filterable});return i.length&&r.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&D(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(Ve+we,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,r,o=e(this),a=o.hasClass("k-plus"),s=o.closest("tr.k-master-row"),l=t.detailTemplate,c=t._hasDetails();return o.toggleClass("k-plus",!a).toggleClass("k-minus",a),i=s.next(),c&&!i.hasClass("k-detail-row")&&(r=t.dataItem(s),i=e(l(r)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:i.get(),data:[{dataItem:r}]}}),t.trigger(Ce,{masterRow:s,detailRow:i,data:r,detailCell:i.find(".k-detail-cell")})),t.trigger(a?Re:Pe,{masterRow:s,detailRow:i}),i.toggle(a),t._current&&t._current.attr("aria-expanded",a),n.preventDefault(),!1})},dataItem:function(t){if(!(t=e(t)[0]))return null;var n,i,r=this.tbody.children(),o=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(i=a,n=0;a>n;n++)o.test(r[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,n){var r,o,a,s,l,c,u="",d=I(this.columns);for(r=0,s=e.length;s>r;r++)o=e[r].column||e[r],a=this._headerCellText(o),l="",c=le(o,d),o.command?(u+="<th"+i(o.headerAttributes),n&&!e[r].colSpan&&(u+=" rowspan='"+n+"'"),c>-1&&(u+=X.attr("index")+"='"+c+"'"),u+=">"+a+"</th>"):(o.field&&(l=X.attr("field")+"='"+o.field+"' "),u+="<th role='columnheader' "+l,n&&!e[r].colSpan&&(u+=" rowspan='"+n+"'"),e[r].colSpan>1&&(u+='colspan="'+(e[r].colSpan-x(o.columns))+'" ',u+=X.attr("colspan")+"='"+e[r].colSpan+"'"),o.title&&(u+=X.attr("title")+'="'+o.title.replace('"',"&quot;").replace(/'/g,"'")+'" '),o.groupable!==t&&(u+=X.attr("groupable")+"='"+o.groupable+"' "),o.aggregates&&o.aggregates.length&&(u+=X.attr("aggregates")+"='"+o.aggregates+"'"),c>-1&&(u+=X.attr("index")+"='"+c+"'"),u+=i(o.headerAttributes),u+=">"+a+"</th>");return u},_appendLockedColumnContent:function(){var t,n,i,r,o,a=this.columns,s=this.table.find("colgroup"),l=s.find("col:not(.k-group-col,.k-hierarchy-col)"),c=e(),u=0,d=0;for(t=0,n=a.length;n>t;t++)if(a[t].locked)if(h(a[t])){for(r=1,a[t].columns&&(r=I(a[t].columns).length-x(a[t].columns)),r=r||1,o=0;r>o;o++)c=c.add(l.eq(t+d+o-u));d+=r-1}else u++;i=e('<div class="k-grid-content-locked"><table'+(Je?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),s.detach(),i.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,r=i.footer,o=r.find(".k-footer-template>td"),a=r.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=i._groups(),c=e(),u=e();for(c=c.add(o.filter(".k-group-cell")),t=0,n=I(D(i.columns)).length;n>t;t++)c=c.add(o.eq(t+l));for(u=u.add(a.filter(".k-group-col")),t=0,n=I(M(i.columns)).length;n>t;t++)u=u.add(a.eq(t+l));c.appendTo(s.find("tr")),u.appendTo(s.find("colgroup")),i.lockedFooter=s.prependTo(r)},_appendLockedColumnHeader:function(t){var n,i,r,o,a,s,l,c,u,d,p=this,g=this.columns,m=[],v=0,_=e(),y=p._hasFilterRow(),b=0,w=e(),k=0,C=e(),D=p.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),A=p.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),M=p.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),E=0;for(n=0,r=g.length;r>n;n++){if(g[n].locked){if(s=A.eq(n),k=I(g[n].columns||[]).length,h(g[n])){for(g[n].columns&&(l=k-x(g[n].columns)),l=l||1,c=0;l>c;c++)_=_.add(D.eq(n+E+c-v));E+=l-1}for(S([g[n]],P(s),m,0,0),k=k||1,u=0;k>u;u++)w=w.add(M.eq(b+u));b+=k}g[n].columns&&(v+=x(g[n].columns)),h(g[n])||v++}if(m.length){for(i='<div class="k-grid-header-locked" style="width:1px"><table'+(Je?' cellspacing="0"':"")+"><colgroup/><thead>",i+=Array(m.length+1).join("<tr></tr>"),(D=(a=e(i+=(y?'<tr class="k-filter-row" />':"")+"</thead></table></div>")).find("colgroup")).append(p.thead.prev().find("col.k-group-col").add(_)),o=a.find("thead tr:not(.k-filter-row)"),n=0,r=m.length;r>n;n++)C=f(m[n]),o.eq(n).append(p.thead.find("tr:eq("+n+") .k-group-cell").add(C));(d=T(this.thead))>m.length&&function(e,t){var n,i,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(i=0;r.length>i;i++)(n=r[i].rowSpan)>1&&(r[i].rowSpan=n-t||1)}(a,d-m.length),a.find(".k-filter-row").append(p.thead.find(".k-filter-row .k-group-cell").add(w)),this.lockedHeader=a.prependTo(t),this.thead.find(".k-group-cell").remove(),this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);X.destroy(e),e.off(we).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,i,r,o,a=this,s=a.columns,l=a._hasDetails()&&s.length,c=a._hasFilterRow(),u="",d=a.table.find(">thead"),h=a.element.find("thead:first").length>0;if(d.length||(d=e("<thead/>").insertBefore(a.tbody)),a.lockedHeader&&a.thead?((n=a.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),n=e(),a._removeLockedContainers()):n=a.element.find(h?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!n.length&&!(n=d.children().first()).length){for(i=[{rowSpan:1,cells:[],index:0}],a._prepareColumns(i,s),t=0;i.length>t;t++)u+="<tr>",l&&(u+='<th class="k-hierarchy-cell">&nbsp;</th>'),u+=a._createHeaderCells(i[t].cells,i[t].rowSpan),u+="</tr>";n=e(u)}c&&((r=e("<tr/>")).addClass("k-filter-row"),(l||n.find(".k-hierarchy-cell").length)&&r.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'),(o=(a.thead||d).find(".k-filter-row")).length&&(X.destroy(o),o.remove()),d.append(r)),n.children().length?l&&!n.find(".k-hierarchy-cell")[0]&&n.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(u="",l&&(u+='<th class="k-hierarchy-cell">&nbsp;</th>'),u+=a._createHeaderCells(s),n.html(u)),n.attr("role","row").find("th").addClass("k-header"),a.options.scrollable||d.addClass("k-grid-header"),n.find("script").remove().end().prependTo(d),a.thead&&a._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:d.find("th").get()}}),this.angular("compile",function(){return{elements:d.find("th").get(),data:oe(s,function(e){return{column:e}})}}),a.thead=d.attr("role","rowgroup"),a._sortable(),a._filterable(),a._filterRow(),a._scrollable(),a._updateCols(),a._columnMenu(),this.options.scrollable&&D(this.columns).length&&(a._appendLockedColumnHeader(a.thead.closest(".k-grid-header")),a._appendLockedColumnContent(),a.lockedContent.bind("DOMMouseScroll"+we+" mousewheel"+we,ue(a._wheelScroll,a)),a._applyLockedContainersWidth()),a._updateColumnCellIndex(),a._updateFirstColumnClass(),a._resizable(),a._draggable(),a._reorderable(),a.groupable&&a._attachGroupable()},_updateFirstColumnClass:function(){var t,n,i=this,r=i.columns||[];i._hasDetails()&&r.length||i._groups()||(t=e(),n=i.thead.find(">tr:not(.k-filter-row):not(:first)"),r=A(r),n.length&&r[0]&&!r[0].columns&&(t=t.add(n)),i._isLocked()&&(n=i.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=D(i.columns),n.length&&r[0]&&!r[0].columns&&(t=t.add(n))),t.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,n,i){var r,o,a=i||e[e.length-1],s=e[a.index+1],l=0;for(r=0;t.length>r;r++)o={column:t[r],colSpan:0},a.cells.push(o),t[r].columns&&t[r].columns.length&&(s||(s={rowSpan:0,cells:[],index:e.length},e.push(s)),o.colSpan=t[r].columns.length,this._prepareColumns(e,t[r].columns,o,s),l+=o.colSpan-1,a.rowSpan=e.length-a.index);n&&(n.colSpan+=l)},_wheelScroll:function(t){var n,i,r;t.ctrlKey||(n=this.content,this.options.scrollable.virtual&&(n=this.virtualScrollable.verticalScrollbar),i=n.scrollTop(),(r=X.wheelDeltaY(t))&&(t.preventDefault(),e(t.currentTarget).one("wheel"+we,!1),n.scrollTop(i+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&z(e=e||this.lockedHeader.find("table").add(this.lockedTable),E(M(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?z(e,E(function(e){return ae(e,function(e){return!e.locked&&h(e)})}(this.columns)),this._hasDetails(),0):z(e,E(p(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n,i=this;for(t in e=e.toJSON(),n=!(i.table.find("tbody tr").length>0&&(!i.dataSource||!i.dataSource.transport)),e)i.columns.push({field:t,encoded:n,headerAttributes:{id:X.guid()}});i._thead(),i._templates()}},_rowsHtml:function(e,t){var n,i,r="",o=t.rowTemplate,a=t.altRowTemplate;for(n=0,i=e.length;i>n;n++)r+=n%2?a(e[n]):o(e[n]),this._data.push(e[n]);return r},_groupRowHtml:function(e,t,n,i,r,o){var a,s,l=this,c="",u=e.field,d=ae(I(l.columns),function(e){return e.field==u})[0]||{},h=d.groupHeaderTemplate,p=(d.title||u)+": "+function(e,t,n,i){var r=n&&n.length&&ie(n[0])&&"value"in n[0]?H(n)[e]:e;return r=null!=r?r:"",t?X.format(t,r):!1===i?r:X.htmlEncode(r)}(e.value,d.format,d.values,d.encoded),f=l._groupAggregatesDefaultObject||{},g=re({},f,e.aggregates),m=re({},{field:e.field,value:e.value,aggregates:g},e.aggregates[e.field]),v=r.groupFooterTemplate,_=e.items;if(h&&(p=typeof h===je?h(m):X.template(h)(m)),c+=i(t,n,p),e.hasSubgroups)for(a=0,s=_.length;s>a;a++)c+=l._groupRowHtml(_[a],o?t:t-1,n+1,i,r,o);else c+=l._rowsHtml(_,r);return v&&(c+=v(g)),c},collapseGroup:function(t){t=e(t);var n,i,r,o,a,s=this.options.groupable.showFooter?0:1,l=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1),r=0,o=(t=t.nextAll("tr")).length;o>r&&(i=(a=t.eq(r)).find(".k-group-cell").length,a.hasClass("k-grouping-row")?s++:a.hasClass("k-group-footer")&&s--,!(n>=i||a.hasClass("k-group-footer")&&0>s));r++)a.hide(),l.eq(r).hide()},expandGroup:function(t){t=e(t);var n,i,r,o,a,s=this.options.groupable.showFooter,l=e(),c=[],u=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0),o=0,a=(t=t.nextAll("tr")).length;a>o&&!(n>=(r=(i=t.eq(o)).find(".k-group-cell").length));o++)r!=n+1||i.hasClass("k-detail-row")||(i.show(),l.eq(o).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&this.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),l.eq(o+1).show())),i.hasClass("k-grouping-row")&&(s&&c.push(i.is(":visible")),u++),i.hasClass("k-group-footer")&&(s&&i.toggle(c.pop()),1==u?(i.show(),l.eq(o).show()):u--)},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader.find("thead"):n.thead,r=i.find("tr.k-filter-row").find("th.k-group-cell").length,o=i.find("tr:first").find("th.k-group-cell").length,a=i.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>o?(e(Array(t-o+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.children("tr:not(.k-filter-row)")),n.element.is(":visible")&&a.find("th.k-group-cell").hide()):o>t&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>r&&e(Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=W(t.eq(0)),t.width(n._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable)).width(W(t.eq(0))))},hideColumn:function(n){var i,r,o,s,l,c,f,g,m,v=this,_=0,y=v.footer||v.wrapper.find(".k-grid-footer"),w=v.columns,x=v.lockedHeader?R(v.lockedHeader.find(">table>thead")).filter(d).length:0;if((n="number"==typeof n?w[n]:ie(n)?ae(k(w),function(e){return e===n})[0]:ae(k(w),function(e){return e.field===n})[0])&&h(n)){if(n.columns&&n.columns.length){for(l=b(n,w),u(n,!1),N(a(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+l.row+")>th"),l.cell,!1),r=0;n.columns.length>r;r++)this.hideColumn(n.columns[r]);return v.trigger(Ae,{column:n}),t}if(g=le(n,p(I(w))),u(n,!1),v._setParentsVisibility(n,!1),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,c=g,v.lockedHeader&&x>g?m=v.lockedHeader.find(">table>thead"):c-=x,R(m).filter(d).eq(c)[0].style.display="none",N(a(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!1),y[0]&&(v._updateCols(y.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(y.find(">.k-grid-footer-locked>table")),N(y.find(".k-footer-template>td"),g,!1)),v.lockedTable&&x>g?O(v.lockedTable.find(">tbody>tr"),g):O(v.tbody.children(),g-x),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight(),v._syncLockedFooterHeight();else{for(r=0,f=(o=v.thead.prev().find("col")).length;f>r;r+=1){if(!(s=o[r].style.width)||-1!=s.indexOf("%")){_=0;break}_+=parseInt(s,10)}i=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),v._footerWidth=null,_&&(i.each(function(){this.style.width=_+"px"}),v._footerWidth=_),Ze.msie&&8==Ze.version&&(i.css("display","inline-table"),setTimeout(function(){i.css("display","table")},1))}v._updateFirstColumnClass(),v.trigger(Ae,{column:n})}},_setParentsVisibility:function(t,n){var i,r,o,s,l,d=this.columns,h=[],f=n?function(e){return p(e.columns).length&&e.hidden}:function(e){return!p(e.columns).length&&!e.hidden};if(c(t,d,h)&&h.length)for(i=h.length-1;i>=0;i--)o=_(r=h[i],d),s=a(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+o.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o.cell),f(r)&&(u(r,n),s[0].style.display=n?"":"none"),s.filter("["+X.attr("colspan")+"]").length&&(l=parseInt(s.attr(X.attr("colspan")),10),s[0].colSpan=l-x(r.columns)||1)},showColumn:function(n){var i,r,o,s,l,c,d,p,f,g,m=this,v=m.columns,y=m.footer||m.wrapper.find(".k-grid-footer"),b=m.lockedHeader?R(m.lockedHeader.find(">table>thead")).length:0;if((n="number"==typeof n?v[n]:ie(n)?ae(k(v),function(e){return e===n})[0]:ae(k(v),function(e){return e.field===n})[0])&&!h(n)){if(n.columns&&n.columns.length){for(c=_(n,v),u(n,!0),N(a(e(">table>thead",m.lockedHeader),m.thead,">tr:eq("+c.row+")>th"),c.cell,!0),i=0;n.columns.length>i;i++)this.showColumn(n.columns[i]);return m.trigger(Me,{column:n}),t}if(f=le(n,I(v)),u(n,!0),m._setParentsVisibility(n,!0),m._templates(),m._updateCols(),m._updateLockedCols(),g=m.thead,l=f,m.lockedHeader&&b>f?g=m.lockedHeader.find(">table>thead"):l-=b,R(g).eq(l)[0].style.display="",N(a(e(">table>thead",m.lockedHeader),m.thead,">tr.k-filter-row>th"),f,!0),y[0]&&(m._updateCols(y.find(">.k-grid-footer-wrap>table")),m._updateLockedCols(y.find(">.k-grid-footer-locked>table")),N(y.find(".k-footer-template>td"),f,!0)),m.lockedTable&&b>f?V(m.lockedTable.find(">tbody>tr"),f):V(m.tbody.children(),f-b),m.lockedTable)m._updateTablesWidth(),m._applyLockedContainersWidth(),m._syncLockedContentHeight(),m._syncLockedHeaderHeight();else if(o=e(">.k-grid-header table:first,>.k-grid-footer table:first",m.wrapper).add(m.table),n.width){for(s=0,i=0,r=(p=m.thead.prev().find("col")).length;r>i;i+=1){if((d=p[i].style.width).indexOf("%")>-1){s=0;break}s+=parseInt(d,10)}m._footerWidth=null,s&&(o.each(function(){this.style.width=s+"px"}),m._footerWidth=s)}else o.width("");m._updateFirstColumnClass(),m.trigger(Me,{column:n})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),X.ui.progress(t,e)},_resize:function(e,t){this.content&&(this._setContentWidth(),this._setContentHeight()),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar())},_isActiveInTable:function(){var t=ee();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var n,i=this,r=i.dataSource.view(),o=i.options.navigatable,a=e(i.current()),s=!1,l=(i.dataSource.group()||[]).length,c=i.content&&i.content.scrollLeft(),u=l+E(p(i.columns)).length;t&&"itemchange"===t.action&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(i._angularItems("cleanup"),o&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(s=a.is("th"),n=Math.max(i.cellIndex(a),0)),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(r[0],l)),u=l+i.columns.length),i._group=l>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(l),i._group=l>0),i._renderContent(r,u,l),i._renderLockedContent(r,u,l),i._footer(),i._renderNoRecordsContent(),i._setContentHeight(),i._setContentWidth(c),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.touchScroller?i.touchScroller.movable.trigger("change"):i.content.trigger("scroll")),i._restoreCurrent(n,s),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._angularItems("compile"),i.trigger(Ie)))},_restoreCurrent:function(n,i){var r,o,a;n===t||0>n||(this._removeCurrent(),i?this.current(this.thead.find("th:not(.k-group-cell)").eq(n)):(r=0,this._rowVirtualIndex?r=this.virtualScrollable.position(this._rowVirtualIndex):n=0,o=e(),this.lockedTable&&(o=this.lockedTable.find(">tbody>tr").eq(r)),a=(o=o.add(this.tbody.children().eq(r))).find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(n),this.current(a)),this._current&&G(this._current.closest("table")[0],!0))},_angularItems:function(e){X.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"===e&&this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var n=this;n._group&&n.angular(t,function(){return{elements:n.tbody.children(".k-grouping-row"),data:e.map(function e(t){var n,i,r=[];for(i=0;t.length>i&&"field"in(n=t[i])&&"value"in n&&"items"in n;i++)r.push(n),n.hasSubgroups&&(r=r.concat(e(n.items)));return r}(n.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var n=this;n._group&&n.groupFooterTemplate&&n.angular(t,function(){return{elements:n.tbody.children(".k-group-footer"),data:e.map(function e(t){var n,i,r=[];for(i=0;t.length>i&&"field"in(n=t[i])&&"value"in n&&"items"in n;i++)n.hasSubgroups&&(r=r.concat(e(n.items))),r.push(n.aggregates);return r}(n.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,n){var i,r,o=this,a="",s=null!=o.lockedContent,l={rowTemplate:o.rowTemplate,altRowTemplate:o.altRowTemplate,groupFooterTemplate:o.groupFooterTemplate};if(t=s?t-E(M(o.columns)).length:t,n>0)for(t=s?t-n:t,o.detailTemplate&&t++,o.groupFooterTemplate&&(o._groupAggregatesDefaultObject=o.dataSource.aggregates()),i=0,r=e.length;r>i;i++)a+=o._groupRowHtml(e[i],t,0,s?Q:Y,l,s);else a+=o._rowsHtml(e,l);o.tbody=L(o.tbody,o.table,a,this.options.$angular)},_renderLockedContent:function(e,t,n){var i,r,o,a="",s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(o=this.lockedTable,n>0)for(t-=p(I(A(this.columns))).length,i=0,r=e.length;r>i;i++)a+=this._groupRowHtml(e[i],t,0,Y,s);else a=this._rowsHtml(e,s);L(o.children("tbody"),o,a,this.options.$angular),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var n,i,r,o,a=e[0].rows,s=a.length,l=t[0].rows,c=e.add(t),u=c.length,d=[];for(n=0;s>n&&l[n];n++)a[n].style.height&&(a[n].style.height=l[n].style.height=""),o=0,(i=a[n].offsetHeight)>(r=l[n].offsetHeight)?o=i:r>i&&(o=r),d.push(o);for(n=0;u>n;n++)c[n].style.display="none";for(n=0;s>n;n++)d[n]&&(a[n].style.height=l[n].style.height=d[n]+1+"px");for(n=0;u>n;n++)c[n].style.display=""}});X.ExcelMixin&&X.ExcelMixin.extend(it.prototype),X.PDFMixin&&(X.PDFMixin.extend(it.prototype),it.prototype._drawPDF=function(n){function i(){u&&a!==t?(c.unbind("change",r),c.one("change",function(){s.resolve(o)}),c.page(a)):s.resolve(o)}function r(){l._drawPDFShadow({width:l.wrapper.width()}).done(function(e){var t=c.page(),r=u?c.totalPages():1,a={page:e,pageNumber:t,progress:t/r,totalPages:r};n.notify(a),o.append(a.page),r>t?c.page(t+1):i()}).fail(function(e){s.reject(e)})}var o,a,s=new e.Deferred,l=this,c=l.dataSource,u=l.options.pdf.allPages;return this._initPDFProgress(n),o=new X.drawing.Group,a=c.page(),u?(c.bind("change",r),c.page(1)):r(),s.promise()},it.prototype._initPDFProgress=function(t){var n,i=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");i.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(i),n=e("<div class='k-loading-pdf-progress'>").appendTo(i).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar"),t.progress(function(e){n.value(e.progress)}).always(function(){X.destroy(i),i.remove()})}),K.plugin(it),K.plugin(tt)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i="change",r="cancel",o="dataBound",a="dataBinding",s=n.ui.Widget,l=n.keys,c="progress",u="error",d="k-state-focused",h="k-state-selected",p="k-edit-item",f="edit",g="remove",m="save",v=".kendoListView",_=e.proxy,y=n._activeElement,b=n.ui.progress,w=n.data.DataSource,k=n.ui.DataBoundWidget.extend({init:function(t,i){var r=this;i=e.isArray(i)?{dataSource:i}:i,s.fn.init.call(r,t,i),i=r.options,r.wrapper=t=r.element,t[0].id&&(r._itemId=t[0].id+"_lv_active"),r._element(),r._dataSource(),r._templates(),r._navigatable(),r._selectable(),r._pageable(),r._crudHandlers(),r.options.autoBind&&r.dataSource.fetch(),n.notify(r)},events:[i,r,a,o,f,g,m],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},setOptions:function(e){s.fn.setOptions.call(this,e),this._templates(),this.selectable&&(this.selectable.destroy(),this.selectable=null),this._selectable()},_templates:function(){var e=this.options;this.template=n.template(e.template||""),this.altTemplate=n.template(e.altTemplate||e.template),this.editTemplate=n.template(e.editTemplate||"")},_item:function(e){return this.element.children()[e]()},items:function(){return this.element.children()},dataItem:function(t){var i=n.attr("uid"),r=e(t).closest("["+i+"]").attr(i);return this.dataSource.getByUid(r)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_unbindDataSource:function(){var e=this;e.dataSource.unbind(i,e._refreshHandler).unbind(c,e._progressHandler).unbind(u,e._errorHandler)},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=_(e.refresh,e),e._progressHandler=_(e._progress,e),e._errorHandler=_(e._error,e)),e.dataSource=w.create(e.options.dataSource).bind(i,e._refreshHandler).bind(c,e._progressHandler).bind(u,e._errorHandler)},_progress:function(){b(this.element,!0)},_error:function(){b(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var i,r,s,l,c,u=this,d=u.dataSource.view(),h="",p=u.template,f=u.altTemplate,g=y();if("itemchange"===(e=e||{}).action)return u._hasBindingTarget()||u.editable||(i=e.items[0],(s=u.items().filter("["+n.attr("uid")+"="+i.uid+"]")).length>0&&(l=s.index(),u.angular("cleanup",function(){return{elements:[s]}}),s.replaceWith(p(i)),(s=u.items().eq(l)).attr(n.attr("uid"),i.uid),u.angular("compile",function(){return{elements:[s],data:[{dataItem:i}]}}),u.trigger("itemChange",{item:s,data:i}))),t;if(!u.trigger(a,{action:e.action||"rebind",items:e.items,index:e.index})){for(u._angularItems("cleanup"),u._destroyEditable(),l=0,c=d.length;c>l;l++)h+=l%2?f(d[l]):p(d[l]);for(u.element.html(h),r=u.items(),l=0,c=d.length;c>l;l++)r.eq(l).attr(n.attr("uid"),d[l].uid).attr("role","option").attr("aria-selected","false");u.element[0]===g&&u.options.navigatable&&u.current(r.eq(0)),u._angularItems("compile"),u.trigger(o)}},_pageable:function(){var t,i,r=this,o=r.options.pageable;e.isPlainObject(o)&&(i=o.pagerId,t=e.extend({},o,{dataSource:r.dataSource,pagerId:null}),r.pager=new n.ui.Pager(e("#"+i),t))},_selectable:function(){var e,r,o=this,a=o.options.selectable,s=o.options.navigatable;a&&(e=n.ui.Selectable.parseOptions(a).multiple,o.selectable=new n.ui.Selectable(o.element,{aria:!0,multiple:e,filter:">*",change:function(){o.trigger(i)}}),s&&o.element.on("keydown"+v,function(n){if(n.keyCode===l.SPACEBAR){if(r=o.current(),n.target==n.currentTarget&&n.preventDefault(),e)if(n.ctrlKey){if(r&&r.hasClass(h))return r.removeClass(h),t}else o.selectable.clear();else o.selectable.clear();o.selectable.value(r)}}))},current:function(e){var n=this,i=n.element,r=n._current,o=n._itemId;return e===t?r:(r&&r[0]&&(r[0].id===o&&r.removeAttr("id"),r.removeClass(d),i.removeAttr("aria-activedescendant")),e&&e[0]&&(o=e[0].id||o,n._scrollTo(e[0]),i.attr("aria-activedescendant",o),e.addClass(d).attr("id",o)),n._current=e,t)},_scrollTo:function(t){var n,i,r=this,o=!1,a="scroll";"auto"==r.wrapper.css("overflow")||r.wrapper.css("overflow")==a?n=r.wrapper[0]:(n=window,o=!0),(i=function(i,r){var s=o?e(t).offset()[i.toLowerCase()]:t["offset"+i],l=t["client"+r],c=e(n)[a+i](),u=e(n)[r.toLowerCase()]();s+l>c+u?e(n)[a+i](s+l-u):c>s&&e(n)[a+i](s)})("Top","Height"),i("Left","Width")},_navigatable:function(){var t=this,i=t.options.navigatable,r=t.element;i&&(t._tabindex(),r.on("focus"+v,function(){var e=t._current;e&&e.is(":visible")||(e=t._item("first")),t.current(e)}).on("focusout"+v,function(){t._current&&t._current.removeClass(d)}).on("keydown"+v,function(i){var o,a,s=i.keyCode,c=t.current(),u=e(i.target),d=!u.is(":button,textarea,a,a>.t-icon,input"),h=u.is(":text"),f=n.preventDefault,g=r.find("."+p),m=y();if(!(!d&&!h&&l.ESC!=s||h&&l.ESC!=s&&l.ENTER!=s))if(l.UP===s||l.LEFT===s)c&&(c=c.prev()),t.current(c&&c[0]?c:t._item("last")),f(i);else if(l.DOWN===s||l.RIGHT===s)c&&(c=c.next()),t.current(c&&c[0]?c:t._item("first")),f(i);else if(l.PAGEUP===s)t.current(null),t.dataSource.page(t.dataSource.page()-1),f(i);else if(l.PAGEDOWN===s)t.current(null),t.dataSource.page(t.dataSource.page()+1),f(i);else if(l.HOME===s)t.current(t._item("first")),f(i);else if(l.END===s)t.current(t._item("last")),f(i);else if(l.ENTER===s)0!==g.length&&(d||h)?(o=t.items().index(g),m&&m.blur(),t.save(),a=function(){t.element.trigger("focus"),t.current(t.items().eq(o))},t.one("dataBound",a)):""!==t.options.editTemplate&&t.edit(c);else if(l.ESC===s){if(0===(g=r.find("."+p)).length)return;o=t.items().index(g),t.cancel(),t.element.trigger("focus"),t.current(t.items().eq(o))}}),r.on("mousedown"+v+" touchstart"+v,">*",_(function(n){t.current(e(n.currentTarget)),e(n.target).is(":button,a,:input,a>.k-icon,textarea")||r.focus()},t)))},clearSelection:function(){this.selectable.clear(),this.trigger(i)},select:function(n){var i=this.selectable;return(n=e(n)).length?(i.options.multiple||(i.clear(),n=n.first()),i.value(n),t):i.value()},_destroyEditable:function(){var e=this;e.editable&&(e.editable.destroy(),delete e.editable)},_modelFromElement:function(e){var t=e.attr(n.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(){var e,t,i,r=this,o=r.editable,a=r.template;return o&&(o.element.index()%2&&(a=r.altTemplate),r.angular("cleanup",function(){return{elements:[o.element]}}),e=r._modelFromElement(o.element),r._destroyEditable(),i=o.element.index(),o.element.replaceWith(a(e)),(t=r.items().eq(i)).attr(n.attr("uid"),e.uid),r._hasBindingTarget()&&n.bind(t,e),r.angular("compile",function(){return{elements:[t],data:[{dataItem:e}]}})),!0},edit:function(e){var t,i,r=this,o=r._modelFromElement(e),a=o.uid;r.cancel(),i=(e=r.items().filter("["+n.attr("uid")+"="+a+"]")).index(),e.replaceWith(r.editTemplate(o)),t=r.items().eq(i).addClass(p).attr(n.attr("uid"),o.uid),r.editable=t.kendoEditable({model:o,clearContainer:!1,errorTemplate:!1,target:r}).data("kendoEditable"),r.trigger(f,{model:o,item:t})},save:function(){var e,t,n=this,i=n.editable;i&&(t=i.element,e=n._modelFromElement(t),i.end()&&!n.trigger(m,{model:e,item:t})&&(n._closeEditable(),n.dataSource.sync()))},remove:function(e){var t=this,n=t.dataSource,i=t._modelFromElement(e);t.editable&&(n.cancelChanges(t._modelFromElement(t.editable.element)),t._closeEditable()),t.trigger(g,{model:i,item:e})||(e.hide(),n.remove(i),n.sync())},add:function(){var e=this,t=e.dataSource,n=t.indexOf((t.view()||[])[0]);0>n&&(n=0),e.cancel(),t.insert(n,{}),e.edit(e.element.children().first())},cancel:function(){var e,t,n=this,i=n.dataSource;n.editable&&(e=n.editable.element,t=n._modelFromElement(e),n.trigger(r,{model:t,container:e})||(i.cancelChanges(t),n._closeEditable()))},_crudHandlers:function(){var t=this,i="click"+v;t.element.on(i,".k-edit-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.edit(r),i.preventDefault()}),t.element.on(i,".k-delete-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.remove(r),i.preventDefault()}),t.element.on(i,".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on(i,".k-cancel-button",function(e){t.cancel(),e.preventDefault()})},destroy:function(){var e=this;s.fn.destroy.call(e),e._unbindDataSource(),e._destroyEditable(),e.element.off(v),e.pager&&e.pager.destroy(),n.destroy(e.element)}});n.ui.plugin(k)}(window.kendo.jQuery),function(e,t){function n(t){return e.map(i(t),function(e){return e.name}).join(", ")}function i(e){var t=e[0];return t.files?r(t.files):[{name:function(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}(t.value),extension:o(t.value),size:null}]}function r(t){return e.map(t,function(e){return function(e){var t=e.name||e.fileName;return{name:v.htmlEncode(t),extension:o(t),size:e.size||e.fileSize,rawFile:e}}(e)})}function o(e){var t=e.match(w);return t?t[0]:""}function a(t,n){var i=v.guid();return e.map(t,function(e){return e.uid=n?v.guid():i,e})}function s(t){return!t.multiple&&e(".k-file",t.wrapper).length>1}function l(n,i,r){var o,a;return i._supportsRemove()?(o=n.data("fileNames"),a=e.map(o,function(e){return e.name}),i._submitRemove(a,r,function(e,t,r){i._removeFileEntry(n),i.trigger(T,{operation:"remove",files:o,response:e,XMLHttpRequest:r})},function(e){s(i)&&i._removeFileEntry(n),i.trigger(S,{operation:"remove",files:o,XMLHttpRequest:e}),b("Server response: "+e.responseText)}),t):(s(i)&&i._removeFileEntry(n),t)}function c(t,n,i){var r=!1,o="";try{o=e.parseJSON(u(t)),r=!0}catch(e){i()}r&&n(o)}function u(e){return(t===e||""===e)&&(e="{}"),e}function d(e){e.stopPropagation(),e.preventDefault()}function h(e,t,n,i){var r,o;e.on("dragenter"+t,function(){n(),o=new Date,r||(r=setInterval(function(){new Date-o>100&&(i(),clearInterval(r),r=null)},100))}).on("dragover"+t,function(){o=new Date})}function p(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function f(t){return e(t.target).closest(".k-file")}var g,m,v=window.kendo,_=v.ui.Widget,y=v.antiForgeryTokens,b=v.logToConsole,w=/\.([^\.]+)$/,k=".kendoUpload",x="select",C="upload",T="success",S="error",D="complete",A="cancel",M="progress",E="remove",I=_.extend({init:function(t,n){var i,r,o,a=this;_.fn.init.call(a,t,n),a.name=t.name,a.multiple=a.options.multiple,a.localization=a.options.localization,i=a.element,a.wrapper=i.closest(".k-upload"),0===a.wrapper.length&&(a.wrapper=a._wrapInput(i)),a._activeInput(i),a.toggle(a.options.enabled),r=a._ns=k+"-"+v.guid(),i.closest("form").on("submit"+r,e.proxy(a._onParentFormSubmit,a)).on("reset"+r,e.proxy(a._onParentFormReset,a)),a.options.async.saveUrl?(a._module=a._supportsFormData()?new m(a):new g(a),a._async=!0,(o=a.options.files).length>0&&a._renderInitialFiles(o)):a._module=new R(a),a._supportsDrop()&&a._setupDropZone(),a.wrapper.on("click",".k-upload-action",e.proxy(a._onFileAction,a)).on("click",".k-upload-selected",e.proxy(a._onUploadSelected,a)),a.element.val()&&a._onInputChange({target:a.element})},events:[x,C,T,S,D,A,M,E],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0,withCredentials:!0},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this,n=t.element;_.fn.setOptions.call(t,e),t.multiple=t.options.multiple,n.attr("multiple",!!t._supportsMultiple()&&t.multiple),t.toggle(t.options.enabled)},enable:function(e){e=t===e||e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){var t=this;e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),e(t.element).off(k),_.fn.destroy.call(t)},_addInput:function(t){if(t[0].nodeType){var n=this,i=t.clone().val("");i.insertAfter(n.element).data("kendoUpload",n),e(n.element).hide().attr("tabindex","-1").removeAttr("id").off(k),n._activeInput(i),n.element.focus()}},_activeInput:function(t){var n=this,i=n.wrapper;n.element=t,t.attr("multiple",!!n._supportsMultiple()&&n.multiple).attr("autocomplete","off").on("click"+k,function(e){i.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+k,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+k,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+k,e.proxy(n._onInputChange,n)).on("keydown"+k,e.proxy(n._onInputKeyDown,n))},_onInputKeyDown:function(e){var t=this.wrapper.find(".k-upload-action:first");e.keyCode===v.keys.TAB&&t.length>0&&(e.preventDefault(),t.focus())},_onInputChange:function(t){var n=this,i=e(t.target),r=a(n._inputFiles(i),n._isAsyncNonBatch());n.trigger(x,{files:r})?(n._addInput(i),i.remove()):n._module.onSelect({target:i},r)},_onDrop:function(t){var n=this,i=t.originalEvent.dataTransfer.files,o=a(r(i),n._isAsyncNonBatch());d(t),i.length>0&&(!n.multiple&&o.length>1&&o.splice(1,o.length-1),n.trigger(x,{files:o})||n._module.onSelect({target:e(".k-dropzone",n.wrapper)},o))},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(t){var n,i,r=this,o=0;for(t=a(t,!0),o=0;t.length>o;o++)n=t[o],(i=r._enqueueFile(n.name,{fileNames:[n]})).addClass("k-file-success").data("files",[t[o]]),e(".k-progress",i).width("100%"),r.options.template||e(".k-upload-status",i).prepend("<span class='k-upload-pct'>100%</span>"),r._supportsRemove()&&r._fileAction(i,E)},_prepareTemplateData:function(e,t){var n=t.fileNames,i={},r=0,o=0;for(o=0;n.length>o;o++)r+=n[o].size;return i.name=e,i.size=r,i.files=t.fileNames,i},_prepareDefaultFileEntryTemplate:function(t,n){var i="",r=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span><strong class='k-upload-status'></strong></li>");return 1==n.fileNames.length&&n.fileNames[0].extension&&(i=n.fileNames[0].extension.substring(1),e(".k-icon",r).addClass("k-i-"+i)),r},_enqueueFile:function(t,n){var i,r,o,a,s=this,l=n.fileNames[0].uid,c=e(".k-upload-files",s.wrapper),u=s.options.template;return 0===c.length&&(c=e("<ul class='k-upload-files k-reset'></ul>").appendTo(s.wrapper),s.options.showFileList||c.hide(),s.wrapper.removeClass("k-upload-empty")),i=e(".k-file",c),u?(o=s._prepareTemplateData(t,n),u=v.template(u),(r=e("<li class='k-file'>"+u(o)+"</li>")).find(".k-upload-action").addClass("k-button k-button-bare"),s.angular("compile",function(){return{elements:r,data:[o]}})):r=s._prepareDefaultFileEntryTemplate(t,n),r.attr(v.attr("uid"),l).appendTo(c).data(n),s._async||e(".k-progress",r).width("100%"),!s.multiple&&i.length>0&&(a={files:i.data("fileNames")},s.trigger(E,a)||s._module.onRemove({target:e(i,s.wrapper)},a.data)),r},_removeFileEntry:function(t){var n,i=t.closest(".k-upload-files");t.remove(),n=e(".k-file",i),e(".k-file-success, .k-file-error",i).length===n.length&&this._hideUploadButton(),0===n.length&&(i.remove(),this.wrapper.addClass("k-upload-empty"),this._hideHeaderUploadstatus())},_fileAction:function(e,t){var n={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},i={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};n.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+i[t]+" "+n[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(n[t],this.localization[t],i[t]))))},_fileState:function(t,n){var i=this.localization,r={uploading:{text:i.statusUploading},uploaded:{text:i.statusUploaded},failed:{text:i.statusFailed}}[n];r&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(r.text)},_renderAction:function(t,n,i){return e(""!==t?"<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+i+" "+t+"' title='"+n+"'></span></button>":"<button type='button' class='k-button'>"+n+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var n,i,r,o,a=this;return a.wrapper.hasClass("k-state-disabled")||(i=(n=e(t.target).closest(".k-upload-action")).find(".k-icon"),o={files:(r=n.closest(".k-file")).data("fileNames")},i.hasClass("k-delete")?a.trigger(E,o)||a._module.onRemove({target:e(r,a.wrapper)},o.data):i.hasClass("k-cancel")?(a.trigger(A,o),a._module.onCancel({target:e(r,a.wrapper)}),this._checkAllComplete(),a._updateHeaderUploadStatus()):i.hasClass("k-retry")&&(e(".k-warning",r).remove(),a._module.onRetry({target:e(r,a.wrapper)}))),!1},_onUploadSelected:function(){return this.wrapper.hasClass("k-state-disabled")||this._module.onSaveSelected(),!1},_onFileProgress:function(t,n){this.options.template?e(".k-progress",t.target).width(n+"%"):(0===e(".k-upload-pct",t.target).length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(n+"%"),e(".k-progress",t.target).width(n+"%")),this.trigger(M,{files:f(t).data("fileNames"),percentComplete:n})},_onUploadSuccess:function(e,t,n){var i=f(e);this._fileState(i,"uploaded"),i.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(T,{files:i.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:n}),this._supportsRemove()?this._fileAction(i,E):this._clearFileAction(i),this._checkAllComplete()},_onUploadError:function(t,n){var i=f(t),r=e(".k-upload-pct",i);this._fileState(i,"failed"),i.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",i).width("100%"),r.length>0?r.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",i).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(i,"retry"),this.trigger(S,{operation:"upload",files:i.data("fileNames"),XMLHttpRequest:n}),b("Server response: "+n.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,n=e(".k-dropzone",this.wrapper),i=e(".k-upload-status-total",this.wrapper);0!==i.length&&i.remove(),i='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span></strong>",n.length>0?n.append(i):e(".k-upload-button",this.wrapper).after(i)},_updateHeaderUploadStatus:function(){var t,n,i,r=this,o=r.localization;0===e(".k-file",r.wrapper).not(".k-file-success, .k-file-error").length&&(t=e(".k-file.k-file-error",r.wrapper),n=e(".k-upload-status-total",r.wrapper),i=e(".k-icon",n).removeClass("k-loading").addClass(0!==t.length?"k-warning":"k-i-tick").text(0!==t.length?o.statusWarning:o.statusUploaded),n.text(r.localization.headerStatusUploaded).append(i))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var n,i=this.element;t!==this._module.onAbort&&this._module.onAbort(),i.value||((n=e(i)).attr("disabled","disabled"),window.setTimeout(function(){n.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(v.support.browser.opera||v.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase();return!(!/chrome/.test(e)&&/safari/.test(e)&&/windows/.test(e))&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,n,i=this;e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>"),t=i._ns,h(n=e(".k-dropzone",i.wrapper).append(e("<em>"+i.localization.dropFilesHere+"</em>")).on("dragenter"+t,d).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this)),t,function(){n.addClass("k-dropzone-hovered")},function(){n.removeClass("k-dropzone-hovered")}),h(e(document),t,function(){n.addClass("k-dropzone-active"),n.closest(".k-upload").removeClass("k-upload-empty")},function(){n.removeClass("k-dropzone-active"),0===e("li.k-file",n.closest(".k-upload")).length&&n.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,n,i,r){var o=this.options.async.removeField||"fileNames",a=e.extend(n,y());a[o]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:u,url:this.options.async.removeUrl,traditional:!0,data:a,success:i,error:r,xhrFields:{withCredentials:this.options.async.withCredentials}})},_wrapInput:function(e){var t=this.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),t.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(D)},_inputFiles:function(e){return i(e)}}),R=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};R.prototype={onSelect:function(t,i){var r,o=this.upload,a=e(t.target);o._addInput(a),r=o._enqueueFile(n(a),{relatedInput:a,fileNames:i}),o._fileAction(r,E)},onRemove:function(e){var t=f(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}},g=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},I._frameId=0,g.prototype={onSelect:function(t,n){var i=this.upload,r=e(t.target),o=this.prepareUpload(r,n);i.options.async.autoUpload?this.performUpload(o):(i._supportsRemove()&&this.upload._fileAction(o,E),i._showUploadButton())},prepareUpload:function(t,i){var r,o,a,s=this.upload,l=e(s.element),c=s.options.async.saveField||t.attr("name");return s._addInput(t),t.attr("name",c),r=this.createFrame(s.name+"_"+I._frameId++),this.registerFrame(r),o=this.createForm(s.options.async.saveUrl,r.attr("name")).append(l),a=s._enqueueFile(n(t),{frame:r,relatedInput:l,fileNames:i}),r.data({form:o,file:a}),a},performUpload:function(t){var n,i,r,o={files:t.data("fileNames")},a=t.data("frame"),s=this.upload;if(s.trigger(C,o))s._removeFileEntry(a.data("file")),this.cleanupFrame(a),this.unregisterFrame(a);else{for(i in s._hideUploadButton(),s._showHeaderUploadStatus(),a.appendTo(document.body),n=a.data("form").attr("action",s.options.async.saveUrl).appendTo(document.body),o.data=e.extend({},o.data,y()),o.data)0===(r=n.find("input[name='"+i+"']")).length&&(r=e("<input>",{type:"hidden",name:i}).prependTo(n)),r.val(o.data[i]);s._fileAction(t,A),s._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),a.one("load",e.proxy(this.onIframeLoad,this)),n[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this);p(n)||t.performUpload(n)})},onIframeLoad:function(t){var n,i=e(t.target);try{n=i.contents().text()}catch(e){n="Error trying to get server response: "+e}this.processResponse(i,n)},processResponse:function(t,n){var i=t.data("file"),r=this,o={responseText:n};c(n,function(n){e.extend(o,{statusText:"OK",status:"200"}),r.upload._onFileProgress({target:e(i,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(i,r.upload.wrapper)},n,o),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(o,{statusText:"error",status:"500"}),r.upload._onUploadError({target:e(i,r.upload.wrapper)},o)})},onCancel:function(t){var n=e(t.target).data("frame");this.stopFrameSubmit(n),this.cleanupFrame(n),this.unregisterFrame(n),this.upload._removeFileEntry(n.data("file"))},onRetry:function(e){var t=f(e);this.performUpload(t)},onRemove:function(e,t){var n=f(e),i=n.data("frame");i?(this.unregisterFrame(i),this.upload._removeFileEntry(n),this.cleanupFrame(i)):l(n,this.upload,t)},onAbort:function(){var t=this.element,n=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),n.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,n){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+n+"'/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},(m=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e}).prototype={onSelect:function(t,n){var i=this.upload,r=this,o=e(t.target),a=this.prepareUpload(o,n);e.each(a,function(){i.options.async.autoUpload?r.performUpload(this):(i._supportsRemove()&&i._fileAction(this,E),i._showUploadButton())})},prepareUpload:function(t,n){var i=this.enqueueFiles(n);return t.is("input")&&(e.each(i,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",i),this.upload._addInput(t)),i},enqueueFiles:function(t){var n,i,r,o,a=this.upload,s=t.length,l=[];if(!0===a.options.async.batch)n=e.map(t,function(e){return e.name}).join(", "),(o=a._enqueueFile(n,{fileNames:t})).data("files",t),l.push(o);else for(i=0;s>i;i++)n=(r=t[i]).name,(o=a._enqueueFile(n,{fileNames:[r]})).data("files",[r]),l.push(o);return l},performUpload:function(t){var n,i=this.upload,r=this.createFormData(),o=this.createXHR(),a={files:t.data("fileNames"),XMLHttpRequest:o};if(i.trigger(C,a))this.removeFileEntry(t);else{if(i._fileAction(t,A),i._hideUploadButton(),i._showHeaderUploadStatus(),a.formData)r=a.formData;else{for(n in a.data=e.extend({},a.data,y()),a.data)r.append(n,a.data[n]);this.populateFormData(r,t.data("files"))}i._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),this.postFormData(i.options.async.saveUrl,r,t,o)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this);p(n)||t.performUpload(n)})},onCancel:function(e){var t=f(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=f(e);this.performUpload(t)},onRemove:function(e,t){var n=f(e);n.hasClass("k-file-success")?l(n,this.upload,t):this.removeFileEntry(n)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,n,i){var r=this;n.data("request",i),i.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,n)},!1),i.addEventListener(S,function(e){r.onRequestError.call(r,e,n)},!1),i.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,n)},!1),i.open("POST",e,!0),i.withCredentials=this.upload.options.async.withCredentials,i.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var n,i=this.upload,r=t.length;for(n=0;r>n;n++)e.append(i.options.async.saveField||i.name,t[n].rawFile);return e},onRequestSuccess:function(t,n){function i(){o.upload._onUploadError({target:e(n,o.upload.wrapper)},r)}var r=t.target,o=this;r.status>=200&&299>=r.status?c(r.responseText,function(t){o.upload._onFileProgress({target:e(n,o.upload.wrapper)},100),o.upload._onUploadSuccess({target:e(n,o.upload.wrapper)},t,r),o.cleanupFileEntry(n)},i):i()},onRequestError:function(t,n){var i=t.target;this.upload._onUploadError({target:e(n,this.upload.wrapper)},i)},cleanupFileEntry:function(t){var n=t.data("relatedInput"),i=!0;n&&(e.each(n.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(i=i&&this.hasClass("k-file-success"))}),i&&n.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,n){var i=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(n,this.upload.wrapper)},i)},stopUploadRequest:function(e){e.data("request").abort()}},v.ui.plugin(I)}(window.kendo.jQuery),function(e,t){function n(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function i(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var r,o,a,s=window.kendo,l=s.ui.Widget,c=e.isPlainObject,u=e.proxy,d=e.extend,h=s.support.placeholder,p=s.support.browser,f=s.isFunction,g=/(^\/|\/$)/g,m="change",v="apply",_="error",y="click",b=".kendoFileBrowser",w=".kendoBreadcrumbs",k=".kendoSearchBox",x="name",C="size",T="type",S={field:T,dir:"asc"},D=s.template('<li class="k-tile-empty"><strong>${text}</strong></li>');d(!0,s.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),d(!0,s.data,{transports:{filebrowser:s.data.RemoteTransport.extend({init:function(t){s.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),f(this.options[t])?this.options[t].call(this,n):s.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),p.msie&&p.version,r=l.extend({init:function(e,t){var n=this;t=t||{},l.fn.init.call(n,e,t),n.element.addClass("k-filebrowser"),n.element.on(y+b,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-delete)",u(n._deleteClick,n)).on(y+b,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-addfolder)",u(n._addClick,n)).on("keydown"+b,"li.k-state-selected input",u(n._directoryKeyDown,n)).on("blur"+b,"li.k-state-selected input",u(n._directoryBlur,n)),n._dataSource(),n.refresh(),n.path(n.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[_,m,v],destroy:function(){var e=this;l.fn.destroy.call(e),e.dataSource.unbind(_,e._errorHandler),e.element.add(e.list).add(e.toolbar).off(b),s.destroy(e.element)},value:function(){var e,i=this,r=i._selectedItem(),o=i.options.transport.fileUrl;return r&&"f"===r.get(T)?(e=n(i.path(),r.get(x)).replace(g,""),o&&(e=f(o)?o(e):s.format(o,encodeURIComponent(e))),e):t},_selectedItem:function(){var e=this.listView.select();return e.length?this.dataSource.getByUid(e.attr(s.attr("uid"))):t},_toolbar:function(){var t=this,n=s.template('<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-add"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-addfolder" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-delete" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></a></div></div>'),i=t.options.messages,r=[{text:i.orderByName,value:"name"},{text:i.orderBySize,value:"size"}];t.toolbar=e(n({messages:i,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:i.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:u(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t=this;t.options.transport.uploadUrl&&(function(e,t,n){var i,r;e.on("dragenter"+b,function(){t(),r=new Date,i||(i=setInterval(function(){new Date-r>100&&(n(),clearInterval(i),i=null)},100))}).on("dragover"+b,function(){r=new Date})}(e(document.documentElement),e.proxy(t._dropEnter,t),e.proxy(t._dropLeave,t)),t._scrollHandler=u(t._positionDropzone,t))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+b,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+b,this._scrollHandler)},_positionDropzone:function(){var e=this.element,t=e.offset();this.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(t).css({width:e[0].clientWidth,height:e[0].clientHeight,lineHeight:e[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),n=s.format(e.options.messages.deleteFile,t.find("strong").text());t.length&&e._showMessage(n,"confirm")&&e.listView.remove(t)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return function(e,t){var n=e[t];return c(n)?n.from||n.field||t:n}(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,l=x,c=C;o.test(a)?(e.data={path:n.path()},(t=n._createFile(a))?n.upload.one("success",function(e){t.set(l,e.response[n._getFieldName(l)]),t.set(c,e.response[n._getFieldName(c)]),n._tiles=n.listView.items().filter("["+s.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),n._showMessage(s.format(i.messages.invalidFileType,a,r)))},_findFile:function(e){var t,n,i,r=this.dataSource.data();for(e=e.toLowerCase(),t=0,i=r.length;i>t;t++)if("f"===r[t].get("type")&&r[t].get("name").toLowerCase()===e){n=r[t];break}return n},_createFile:function(e){var t,n,i=this,r=0,o={},a=T,l=i.dataSource.view(),c=i._findFile(e);if(c&&!i._showMessage(s.format(i.options.messages.overwriteFile,e),"confirm"))return null;if(c)return c;for(t=0,n=l.length;n>t;t++)if("f"===l[t].get(a)){r=t;break}return o[a]="f",o[x]=e,o[C]=0,i.dataSource.insert(++r,o)},createDirectory:function(){var e,t,n=this,i=0,r=T,o=x,a=n.dataSource.data(),l=n._nameDirectory(),c=new n.dataSource.reader.model;for(e=0,t=a.length;t>e;e++)"d"===a[e].get(r)&&(i=e);c.set(r,"d"),c.set(o,l),n.listView.one("dataBound",function(){var e=n.listView.items().filter("["+s.attr("uid")+"="+c.uid+"]"),t=e.find("input");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){t.select()})}).one("save",function(e){var t=e.model.get(o);t?e.model.set(o,n._nameExists(t,c.uid)?n._nameDirectory():t):e.model.set(o,l)}),n.dataSource.insert(++i,c)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var n,i,r=this.dataSource.data();for(n=0,i=r.length;i>n;n++)if("d"===r[n].get("type")&&r[n].get("name").toLowerCase()===e.toLowerCase()&&r[n].uid!==t)return!0;return!1},_nameDirectory:function(){var t,n,i,r="New folder",o=this.dataSource.data(),a=[],s=x;for(n=0,i=o.length;i>n;n++)"d"===o[n].get("type")&&o[n].get(s).toLowerCase().indexOf(r.toLowerCase())>-1&&a.push(o[n].get(s));if(e.inArray(r,a)>-1){n=2;do{t=r+" ("+n+")",n++}while(e.inArray(t,a)>-1);r=t}return r},orderBy:function(e){this.dataSource.sort([{field:T,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:x,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("dblclick"+b,"li",u(t._dblClick,t)),t.listView=new s.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+s.attr("type")+"=f]"):this.wrapper.append(D({text:t.options.messages.emptyFolder}))},change:u(t._listViewChange,t)})},_dblClick:function(t){var i,r=this,o=e(t.currentTarget);o.hasClass("k-edit-item")&&r._directoryBlur(),o.filter("["+s.attr("type")+"=d]").length?(i=r.dataSource.getByUid(o.attr(s.attr("uid"))))&&(r.path(n(r.path(),i.get(x))),r.breadcrumbs.value(r.path())):o.filter("["+s.attr("type")+"=f]").length&&r.trigger(v)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-delete").parent().removeClass("k-state-disabled"),"f"===e.get(T)&&this.trigger(m))},_dataSource:function(){var e=this,t=e.options,n=t.transport,i=d({},S),r={field:x,dir:"asc"},o={type:n.type||"filebrowser",sort:[i,r]};c(n)&&(n.path=u(e.path,e),o.transport=n),c(t.schema)?o.schema=t.schema:n.type&&c(s.data.schemas[n.type])&&s.data.schemas[n.type],e.dataSource&&e._errorHandler?e.dataSource.unbind(_,e._errorHandler):e._errorHandler=u(e._error,e),e.dataSource=s.data.DataSource.create(o).bind(_,e._errorHandler)},_navigation:function(){var t=this,n=e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);t.breadcrumbs=n.find("input:first").kendoBreadcrumbs({value:t.options.path,change:function(){t.path(this.value())}}).data("kendoBreadcrumbs"),t.searchBox=n.parent().find("input:last").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox")},_error:function(e){var t,n=this;n.trigger(_,e)||(t=e.xhr.status,"error"==e.status?"404"==t?n._showMessage(n.options.messages.directoryNotFound):"0"!=t&&n._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&n._showMessage("Error! Server timeout."))},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation(),e._toolbar(),e._content()},_editTmpl:function(){var e='<li class="k-tile k-state-selected" '+s.attr("uid")+'="#=uid#" ';return e+=s.attr("type")+'="${'+T+'}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>',e+="#}#",e+='#if(type == "d") { #',e+='<input class="k-input" '+s.attr("bind")+'="value:'+x+'"/>',e+="#}#",e+="</li>",u(s.template(e),{sizeFormatter:i})},_itemTmpl:function(){var e='<li class="k-tile" '+s.attr("uid")+'="#=uid#" ';return e+=s.attr("type")+'="${'+T+'}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${name}</strong>",e+='#if(type == "f") { # <span class="k-filesize">${this.sizeFormatter(size)}</span> #}#',e+="</li>",u(s.template(e),{sizeFormatter:i})},path:function(e){var n=this,i=n._path||"";return e!==t?(n._path=e.replace(g,"")+"/",n.dataSource.read({path:n._path}),t):(i&&(i=i.replace(g,"")),"/"===i||""===i?"":i+"/")}}),o=l.extend({init:function(e,t){var n=this;t=t||{},l.fn.init.call(n,e,t),h&&n.element.attr("placeholder",n.options.label),n._wrapper(),n.element.on("keydown"+k,u(n._keydown,n)).on("change"+k,u(n._updateValue,n)),n.wrapper.on(y+k,"a",u(n._click,n)),h||n.element.on("focus"+k,u(n._focus,n)).on("blur"+k,u(n._blur,n))},options:{name:"SearchBox",label:"Search",value:""},events:[m],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(k),l.fn.destroy.call(e)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();t!==e.value()&&(e.value(t),e.trigger(m))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){h||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,n=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input"),n.length||(n=t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(),h||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<a href="#" class="k-icon k-i-search k-search"/>').appendTo(n)),this.wrapper=n,this.label=n.find(">label")},value:function(e){var n=this;return e!==t?(n.options.value=e,n.element.val(e),n._toggleLabel(),t):n.options.value}}),a=l.extend({init:function(e,t){var n=this;t=t||{},l.fn.init.call(n,e,t),n._wrapper(),n.wrapper.on("focus"+w,"input",u(n._focus,n)).on("blur"+w,"input",u(n._blur,n)).on("keydown"+w,"input",u(n._keydown,n)).on(y+w,"a.k-i-arrow-n:first",u(n._rootClick,n)).on(y+w,"a:not(.k-i-arrow-n)",u(n._click,n)),n.value(n.options.value)},options:{name:"Breadcrumbs",gap:50},events:[m],destroy:function(){var e=this;l.fn.destroy.call(e),e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(w)},_update:function(e){(e="/"===(e||"").charAt(0)?e:"/"+(e||""))!==this.value()&&(this.value(e),this.trigger(m))},_click:function(t){t.preventDefault(),this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-n)").addBack()))},_rootClick:function(e){e.preventDefault(),this._update("")},_focus:function(){var e=this,t=e.element;e.overlay.hide(),e.element.val(e.value()),setTimeout(function(){t.select()})},_blur:function(){if(!this.overlay.is(":visible")){var e=this,t=e.element,n=t.val().replace(/\/{2,}/g,"/");e.overlay.show(),t.val(""),e._update(n)}},_keydown:function(e){var t=this;13===e.keyCode&&(t._blur(),setTimeout(function(){t.overlay.find("a:first").focus()}))},_wrapper:function(){var t,n=this.element,i=n.parents(".k-breadcrumbs");n[0].style.width="",n.addClass("k-input"),i.length||(i=n.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()),(t=i.find(".k-breadcrumbs-wrap")).length||(t=e('<div class="k-breadcrumbs-wrap"/>').appendTo(i)),this.wrapper=i,this.overlay=t},refresh:function(){var n,i,r,o="",a=this.value();for(a!==t&&a.match(/^\//)||(a="/"+(a||"")),i=0,r=(n=a.split("/")).length;r>i;i++)n[i]&&(o||(o+='<a href="#" class="k-icon k-i-arrow-n">root</a>'),o+='<a class="k-link" href="#">'+n[i]+"</a>",o+='<span class="k-icon k-i-arrow-e">&gt;</span>');this.overlay.empty().append(e(o)),this._adjustSectionWidth()},_adjustSectionWidth:function(){var t,n=this,i=n.wrapper.width()-n.options.gap,r=n.overlay.find("a");r.each(function(n){(t=e(this)).parent().width()>i&&(n==r.length-1?t.width(i):t.prev().addBack().hide())})},value:function(e){return e!==t?(this._value=e.replace(/\/{2,}/g,"/"),this.refresh(),t):this._value},_path:function(t){return"/"+e.map(t,function(t){return e(t).text()}).join("/")}}),s.ui.plugin(r),s.ui.plugin(a),s.ui.plugin(o)}(window.kendo.jQuery),function(e,t){function n(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var i,r,o=window.kendo,a=o.ui.FileBrowser,s=e.isPlainObject,l=e.proxy,c=e.extend,u=o.support.browser,d=o.isFunction,h=/(^\/|\/$)/g,p="error",f=".kendoImageBrowser",g="name",m="size",v="type",_={field:v,dir:"asc"},y=o.template('<li class="k-tile-empty"><strong>${text}</strong></li>');c(!0,o.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),c(!0,o.data,{transports:{imagebrowser:o.data.RemoteTransport.extend({init:function(t){o.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),d(this.options[t])?this.options[t].call(this,n):o.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),i=u.msie&&8>u.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},r=a.extend({init:function(e,t){t=t||{},a.fn.init.call(this,e,t),this.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,n=this,i=n._selectedItem(),r=n.options.transport.imageUrl;return i&&"f"===i.get(v)?(e=function(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}(n.path(),i.get(g)).replace(h,""),r&&(e=d(r)?r(e):o.format(r,encodeURIComponent(e))),e):t},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,a=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),s=e.files[0].name,l=g,c=m;a.test(s)?(e.data={path:n.path()},(t=n._createFile(s))?(t._uploading=!0,n.upload.one("success",function(e){delete t._uploading,t.set(l,e.response[n._getFieldName(l)]),t.set(c,e.response[n._getFieldName(c)]),n._tiles=n.listView.items().filter("["+o.attr("type")+"=f]"),n._scroll()})):e.preventDefault()):(e.preventDefault(),n._showMessage(o.format(i.messages.invalidFileType,s,r)))},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll"+f,l(t._scroll,t)).on("dblclick"+f,"li",l(t._dblClick,t)),t.listView=new o.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+o.attr("type")+"=f]"),t._scroll()):this.wrapper.append(y({text:t.options.messages.emptyFolder}))},change:l(t._listViewChange,t)})},_dataSource:function(){var e=this,t=e.options,n=t.transport,i=c({},_),r={field:g,dir:"asc"},a={type:n.type||"imagebrowser",sort:[i,r]};s(n)&&(n.path=l(e.path,e),a.transport=n),s(t.schema)?a.schema=t.schema:n.type&&s(o.data.schemas[n.type])&&o.data.schemas[n.type],e.dataSource&&e._errorHandler?e.dataSource.unbind(p,e._errorHandler):e._errorHandler=l(e._error,e),e.dataSource=o.data.DataSource.create(a).bind(p,e._errorHandler)},_loadImage:function(t){var n=this,i=e(t),r=n.dataSource.getByUid(i.attr(o.attr("uid"))),a=r.get(g),s=n.options.transport.thumbnailUrl,l=e("<img />",{alt:a}),c="?";r._uploading||(l.hide().on("load"+f,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()}),i.find(".k-loading").after(l),d(s)?s=s(n.path(),encodeURIComponent(a)):(s.indexOf("?")>=0&&(c="&"),s=s+c+"path="+n.path()+encodeURIComponent(a)),l.attr("src",s),t.loaded=!0)},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var n=e.list.outerHeight(),r=e.list.scrollTop(),o=r+n;e._tiles.each(function(){var n=i(this),a=n+this.offsetHeight;return(n>=r&&o>n||a>=r&&o>a)&&e._loadImage(this),!(n>o)&&t}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e='<li class="k-tile" '+o.attr("uid")+'="#=uid#" ';return e+=o.attr("type")+'="${'+v+'}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+=this.options.transport&&this.options.transport.thumbnailUrl?'<div class="k-thumb"><span class="k-icon k-loading"></span></div>':'<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${name}</strong>",e+='#if(type == "f") { # <span class="k-filesize">${this.sizeFormatter(size)}</span> #}#',e+="</li>",l(o.template(e),{sizeFormatter:n})}}),o.ui.plugin(r)}(window.kendo.jQuery),function(e,t){var n,i,r,o,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.support.mobileOS,u=a.support.browser,d=e.extend,h=e.proxy,p=a.deepExtend,f=".kendoEditor",g=a.keys,m=s.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return a.template(e.template,{useWithBlock:!1})(e)}}),v={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= data.cssClass #"></span><span class="k-tool-text">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',overflowAnchorTemplate:'<a href="" role="button" class="k-tool k-overflow-anchor" data-popup unselectable="on"><span unselectable="on" class="k-icon k-i-more"></span></a>',formatByName:function(t,n){for(var i=0;n.length>i;i++)if(e.inArray(t,n[i].tags)>=0)return n[i]},registerTool:function(e,t){var n=t.options;n&&n.template&&(n.template.options.cssClass="k-"+e),t.name||(t.options.name=e,t.name=e.toLowerCase()),T.defaultTools[e]=t},registerFormat:function(e,t){T.fn.options.formats[e]=t}},_=!c||c.ios&&c.flatVersion>=500||!c.ios&&t!==document.documentElement.contentEditable,y=["bold","italic","underline"],b=["justifyLeft","justifyCenter","justifyRight"],w=["insertUnorderedList","insertOrderedList"],k=["indent","outdent"],x=["createLink","unlink"],C=["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],T=l.extend({init:function(t,n){var i,r,o,s,c,u=this,g=a.ui.editor,m=g.Dom;_&&(l.fn.init.call(u,t,n),u.options=p({},u.options,n),c=(t=u.element)[0],s=m.name(c),t.closest("form").on("submit"+f,function(){u.update()}),(o=d({},u.options)).editor=u,"textarea"==s?(u._wrapTextarea(),r=u.wrapper.find(".k-editor-toolbar"),c.id&&r.attr("aria-controls",c.id)):(u.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),o.popup=!0,r=e('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(t)),u.toolbar=new g.Toolbar(r[0],o),u.toolbar.bindTo(u),"textarea"==s&&setTimeout(function(){var e=u.wrapper[0].style.height,t=parseInt(e,10),n=u.wrapper.height();e.indexOf("px")>0&&!isNaN(t)&&n>t&&u.wrapper.height(t-(n-t))}),u._resizable(),u._initializeContentElement(u),u.keyboard=new g.Keyboard([new g.BackspaceHandler(u),new g.TypingHandler(u),new g.SystemHandler(u)]),u.clipboard=new g.Clipboard(this),u.undoRedoStack=new g.UndoRedoStack,n&&n.value?i=n.value:u.textarea?(i=c.value,u.options.encoded&&e.trim(c.defaultValue).length&&(i=c.defaultValue),i=i.replace(/[\r\n\v\f\t ]+/gi," ")):i=c.innerHTML,u.value(i),e(document).on("mousedown",h(u._endTyping,u)).on("mouseup",h(u._mouseup,u)),u.toolbar.resize(),a.notify(u))},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(e){}},_selectionChange:function(){u.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_resizable:function(){var n=this.options.resizable;(e.isPlainObject(n)?n.content===t||!0===n.content:n)&&this.textarea&&(e("<div class='k-resize-handle'><span class='k-icon k-resize-se' /></div>").insertAfter(this.textarea),this.wrapper.kendoResizable(d({},this.options.resizable,{start:function(t){var n=this.editor=e(t.currentTarget).closest(".k-editor");this.initialSize=n.height(),n.find("td:last").append("<div class='k-overlay' />")},resize:function(e){var t=e.y.initialDelta,n=this.initialSize+t,i=this.options.min||0,r=this.options.max||1/0;n=Math.min(r,Math.max(i,n)),this.editor.height(n)},resizeend:function(){this.editor.find(".k-overlay").remove(),this.editor=null}})))},_wrapTextarea:function(){var t=this,n=t.element,i=n[0].style.width,r=n[0].style.height,o=e(v.editorWrapperTemplate).insertBefore(n).width(i).height(r),a=o.find(".k-editable-area");n.attr("autocomplete","off").appendTo(a).addClass("k-content k-raw-content").css("display","none"),t.textarea=n,t.wrapper=o},_createContentElement:function(t){var n,i,r,o=this,s=o.textarea,l=o.options.domain,c=l||document.domain,u="",d='javascript:""';return(l||c!=location.hostname)&&(d="javascript:document.write('"+(u='<script>document.domain="'+c+'"<\/script>')+"')"),s.hide(),n=e("<iframe />",{title:o.options.messages.editAreaTitle,frameBorder:"0"})[0],e(n).css("display","").addClass("k-content").insertBefore(s),n.src=d,i=n.contentWindow||n,r=i.document||n.contentDocument,e(n).one("load",function(){o.toolbar.decorateFrom(r.body)}),r.open(),r.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(a.support.isRtl(s)?"direction:rtl;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}</style>"+u+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');<\/script>"+e.map(t,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),r.close(),i},_blur:function(){var e=this.textarea,t=e?e.val():this._oldValue,n=this.options.encoded?this.encodedValue():this.value();this.update(),e&&e.trigger("blur"),n!=t&&this.trigger("change")},_spellCorrect:function(n){var i,r=!1;e(n.body).on("contextmenu"+f,function(){n.one("select",function(){i=null}),n._spellCorrectTimeout=setTimeout(function(){i=new a.ui.editor.RestorePoint(n.getRange()),r=!1},10)}).on("input"+f,function(){return i?a.support.browser.mozilla&&!r?(r=!0,t):(a.ui.editor._finishUpdate(n,i),t):t})},_initializeContentElement:function(){var n,i,r=this;r.textarea?(r.window=r._createContentElement(r.options.stylesheets),n=r.document=r.window.contentDocument||r.window.document,r.body=n.body,i=r.window,e(n).on("mouseup"+f,h(r._mouseup,r))):(r.window=window,n=r.document=document,r.body=r.element[0],i=r.body,r.toolbar.decorateFrom(r.body)),e(i).on("blur"+f,h(this._blur,this));try{n.execCommand("enableInlineTableEditing",null,!1)}catch(e){}a.support.touch&&e(n).on("selectionchange"+f,h(this._selectionChange,this)).on("keydown"+f,function(){a._activeElement()!=n.body&&r.window.focus()}),this._spellCorrect(r),e(r.body).on("dragstart"+f,!1).on("keydown"+f,function(e){var n,i,o,a,s,l;return(e.keyCode!==g.BACKSPACE&&e.keyCode!==g.DELETE||"true"===r.body.getAttribute("contenteditable"))&&(e.keyCode===g.F10?(setTimeout(h(r.toolbar.focus,r.toolbar),100),e.preventDefault(),t):((e.keyCode==g.LEFT||e.keyCode==g.RIGHT)&&(o=(n=r.getRange())[(i=e.keyCode==g.LEFT)?"startContainer":"endContainer"],a=n[i?"startOffset":"endOffset"],s=i?-1:1,i&&(a-=1),a+s>0&&3==o.nodeType&&"\ufeff"==o.nodeValue[a]&&(n.setStart(o,a+s),n.collapse(!0),r.selectRange(n))),(l=r.keyboard.toolFromShortcut(r.toolbar.tools,e))?(e.preventDefault(),/^(undo|redo)$/.test(l)||r.keyboard.endTyping(!0),r.trigger("keydown",e),r.exec(l),!1):(r.keyboard.clearTimeout(),r.keyboard.keydown(e),t)))}).on("keyup"+f,function(t){(e.inArray(t.keyCode,[8,9,33,34,35,36,37,38,39,40,40,45,46])>-1||65==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey)&&r._selectionChange(),r.keyboard.keyup(t)}).on("mousedown"+f,function(t){if(r._selectionStarted=!0,!u.gecko){var n=e(t.target);(2==t.which||1==t.which&&t.ctrlKey)&&n.is("a[href]")&&window.open(n.attr("href"),"_new")}}).on("click"+f,function(e){var t;"img"===a.ui.editor.Dom.name(e.target)&&((t=r.createRange()).selectNode(e.target),r.selectRange(t))}).on("cut"+f+" paste"+f,function(e){r.clipboard["on"+e.type](e)}).on("focusin"+f,function(){e(this).addClass("k-state-active"),r.toolbar.show()}).on("focusout"+f,function(){setTimeout(function(){var t=a._activeElement(),n=r.body,i=r.toolbar;t==n||e.contains(n,t)||e(t).is(".k-editortoolbar-dragHandle")||i.focused()||(e(n).removeClass("k-state-active"),i.hide())},10)})},_mouseup:function(){var e=this;e._selectionStarted&&setTimeout(function(){e._selectionChange()},1)},refresh:function(){var e=this;e.textarea&&(e.textarea.val(e.value()),e.wrapper.find("iframe").remove(),e._initializeContentElement(e),e.value(e.textarea.val()))},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",editAreaTitle:"Editable area. Press F10 for toolbar.",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},formats:{},encoded:!0,domain:null,resizable:!1,serialization:{entities:!0,semantic:!0,scripts:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],y,b,w,k,x,["insertImage"],C)},destroy:function(){var t=this;l.fn.destroy.call(t),e(t.window).add(t.document).add(t.body).add(t.wrapper).add(t.element.closest("form")).off(f),e(document).off("mousedown",h(t._endTyping,t)).off("mouseup",h(t._mouseup,t)),clearTimeout(this._spellCorrectTimeout),t._focusOutside(),t.toolbar.destroy(),a.destroy(t.wrapper)},_focusOutside:function(){a.support.browser.msie&&this.textarea&&e("<input style='position:absolute;left:-10px;top:-10px;width:1px;height:1px;font-size:0;border:0;' />").appendTo(document.body).focus().blur().remove()},state:function(e){var t,n,i=T.defaultTools[e],r=i&&(i.options.finder||i.finder),o=a.ui.editor.RangeUtils;return!!r&&(t=this.getRange(),!(n=o.textNodes(t)).length&&t.collapsed&&(n=[t.startContainer]),r.getFormat?r.getFormat(n):r.isFormatted(n))},value:function(e){var n=this.body,i=a.ui.editor,r=i.Serializer.domToXhtml(n,this.options.serialization);return e===t?r:(e!=r&&(i.Serializer.htmlToDom(e,n),u.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools()),t)},saveSelection:function(t){var n=(t=t||this.getRange()).commonAncestorContainer,i=this.body;(n==i||e.contains(i,n))&&(this.selectionRestorePoint=new a.ui.editor.RestorePoint(t))},_focusBody:function(){var e,t=this.body,n=this.wrapper&&this.wrapper.find("iframe")[0],i=this.document.documentElement,r=a._activeElement();r!=t&&r!=n&&(e=i.scrollTop,t.focus(),i.scrollTop=e)},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(e):this._oldValue=e},encodedValue:function(){return a.ui.editor.Dom.encode(this.value())},createRange:function(e){return a.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return a.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),n=this.document;return t.startContainer!=n||t.endContainer!=n||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return a.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(t,n){var i=new a.ui.editor.InsertHtmlCommand(e.extend({range:this.getRange(),html:t},n));i.editor=this,i.exec()},exec:function(e,n){var i,r,o,a=this,s=null;if(!e)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if("true"!==a.body.getAttribute("contenteditable"))return!1;if(e=e.toLowerCase(),a.keyboard.isTypingInProgress()||a.restoreSelection(),!(r=a.toolbar.toolById(e)))for(o in T.defaultTools)if(o.toLowerCase()==e){r=T.defaultTools[o];break}if(r){if(i=a.getRange(),r.command&&(s=r.command(d({range:i},n))),a.trigger("execute",{name:e,command:s}))return;if(/^(undo|redo)$/i.test(e))a.undoRedoStack[e]();else if(s&&(s.managesUndoRedo||a.undoRedoStack.push(s),s.editor=a,s.exec(),s.async))return s.change=h(a._selectionChange,a),t;a._selectionChange()}}});T.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},a.ui.plugin(T),(n=s.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title}),e.children(".k-tool-text").html(t.title)},command:function(e){return new this.options.command(e)},update:e.noop})).exec=function(e,t,n){e.exec(t,{value:n})},i=n.extend({init:function(e){n.fn.init.call(this,e)},command:function(e){return new a.ui.editor.FormatCommand(d(e,{formatter:this.options.formatter}))},update:function(e,t){var n=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",n),e.attr("aria-pressed",n)}}),v.registerTool("separator",new n({template:new m({template:v.separatorTemplate})})),r=u.msie&&9>u.version?"\ufeff":"",o='<br class="k-br" />',u.msie&&(10>u.version?o="\ufeff":11>u.version&&(o=" ")),d(a.ui,{editor:{ToolTemplate:m,EditorUtils:v,Tool:n,FormatTool:i,_bomFill:r,emptyElementContent:o}}),a.PDFMixin&&(a.PDFMixin.extend(T.prototype),T.prototype._drawPDF=function(){return a.drawing.drawDOM(this.body,this.options.pdf)},T.prototype.saveAsPDF=function(){var t,n,i=new e.Deferred,r=i.promise(),o={promise:r};if(!this.trigger("pdfExport",o))return t=this.options.pdf,n=t.paperSize,this._drawPDF(i).then(function(e){return t.paperSize="auto",a.drawing.exportPDF(e,t)}).done(function(e){a.saveAs({dataURI:e,fileName:t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy}),t.paperSize=n,i.resolve()}).fail(function(e){i.reject(e)}),r})}(window.jQuery),function(e){function t(e){var t,n,i={};for(t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}var n,i,r,o,a,s,l,c,u,d,h=window.kendo,p=e.map,f=e.extend,g=h.support.browser,m="style",v="float",_="cssFloat",y="styleFloat",b="class",w="k-marker",k=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),x="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),C=x.concat(["ul","ol","li"]),T=t(C),S="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),D=t(S),A=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),M=function(e){1==e.nodeType&&e.normalize()};g.msie&&g.version>=8&&(M=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,n=t;n=n.nextSibling;)3==n.nodeType&&3==t.nodeType&&(n.nodeValue=t.nodeValue+n.nodeValue,d.remove(t)),t=n}),n=/^\s+$/,i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,r=/\ufeff/g,o=/^(\s+|\ufeff)$/,s="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),l=/[<>\&]/g,c=/[\u00A0-\u2666<>\&]/g,u={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},d={block:T,inline:D,findNodeIndex:function(e,t){var n=0;if(!e)return-1;for(;e=e.previousSibling;)t&&3==e.nodeType||n++;return n},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,n){try{return!d.isDataNode(t)&&(e.contains(t,d.isDataNode(n)?n.parentNode:n)||n.parentNode==t)}catch(e){return!1}},isAncestorOrSelf:function(e,t){return d.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(d.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return d.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var n,i=e.cloneNode(!1),r="",o=e.nextSibling;o&&3==o.nodeType&&o.nodeValue;)r+=o.nodeValue,n=o,o=o.nextSibling,d.remove(n);e.deleteData(t,e.length),i.deleteData(0,t),i.nodeValue+=r,d.insertAfter(i,e)},attrEquals:function(e,t){var n,i;for(n in t)if(i=e[n],n==v&&(i=e[h.support.cssFloat?_:y]),"object"==typeof i){if(!d.attrEquals(i,t[n]))return!1}else if(i!=t[n])return!1;return!0},blockParentOrBody:function(e){return d.parentOfType(e,C)||e.ownerDocument.body},blockParents:function(t){var n,i,r,o=[];for(n=0,i=t.length;i>n;n++)(r=d.parentOfType(t[n],d.blockElements))&&e.inArray(r,o)<0&&o.push(r);return o},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:M,blockElements:C,nonListBlockElements:x,inlineElements:S,empty:k,fillAttrs:A,toHex:function(e){var t=i.exec(e);return t?"#"+p(t.slice(1),function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e}).join(""):e},encode:function(e,t){var n=!t||t.entities?c:l;return e.replace(n,function(e){var t=e.charCodeAt(0),n=u[t];return n?"&"+n+";":e})},stripBom:function(e){return(e||"").replace(r,"")},insignificant:function(e){var t=e.attributes;return"k-marker"==e.className||d.is(e,"br")&&("k-br"==e.className||t._moz_dirty||t._moz_editor_bogus_node)},significantNodes:function(t){return e.grep(t,function(e){var t=d.name(e);return!("br"==t||d.insignificant(e)||3==e.nodeType&&o.test(e.nodeValue)||1==e.nodeType&&!k[t]&&d.emptyNode(e))})},emptyNode:function(e){return!d.significantNodes(e.childNodes).length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!d.isWhitespace(e)})},lastTextNode:function(e){var t,n=null;if(3==e.nodeType)return e;for(t=e.lastChild;t;t=t.previousSibling)if(n=d.lastTextNode(t))return n;return n},is:function(e,t){return d.name(e)==t},isMarker:function(e){return e.className==w},isWhitespace:function(e){return n.test(e.nodeValue)},isBlock:function(e){return T[d.name(e)]},isEmpty:function(e){return k[d.name(e)]},isInline:function(e){return D[d.name(e)]},scrollContainer:function(e){var t=d.windowFromDocument(e),n=(t.contentWindow||t).document||t.ownerDocument||t;return h.support.browser.webkit||"BackCompat"==n.compatMode?n.body:n.documentElement},scrollTo:function(t){var n,i,r=e(d.isDataNode(t)?t.parentNode:t),o=d.windowFromDocument(t.ownerDocument).innerHeight,a=d.scrollContainer(t.ownerDocument);n=r.offset().top,(i=r[0].offsetHeight)||(i=parseInt(r.css("line-height"),10)||Math.ceil(1.2*parseInt(r.css("font-size"),10))||15),i+n>a.scrollTop+o&&(a.scrollTop=i+n-o)},persistScrollTop:function(e){a=d.scrollContainer(e).scrollTop},restoreScrollTop:function(e){d.scrollContainer(e).scrollTop=a},insertAt:function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){var t,n;for(t=e.childNodes.length-1;t>=0;t--)n=e.childNodes[t],d.isDataNode(n)?(d.stripBom(n.nodeValue).length||d.remove(n),d.isWhitespace(n)&&d.insertBefore(n,e)):n.className!=w&&(d.trim(n),n.childNodes.length||d.isEmpty(n)||d.remove(n));return e},closest:function(e,t){for(;e&&d.name(e)!=t;)e=e.parentNode;return e},sibling:function(e,t){do{e=e[t]}while(e&&1!=e.nodeType);return e},next:function(e){return d.sibling(e,"nextSibling")},prev:function(e){return d.sibling(e,"previousSibling")},parentOfType:function(e,t){do{e=e.parentNode}while(e&&!d.ofType(e,t));return e},ofType:function(t,n){return e.inArray(d.name(t),n)>=0},changeTag:function(e,t,n){var i,r,o,a,s,l=d.create(e.ownerDocument,t),c=e.attributes;if(!n)for(i=0,r=c.length;r>i;i++)(s=c[i]).specified&&(o=s.nodeName,a=s.nodeValue,o==b?l.className=a:o==m?l.style.cssText=e.style.cssText:l.setAttribute(o,a));for(;e.firstChild;)l.appendChild(e.firstChild);return d.insertBefore(l,e),d.remove(e),l},editableParent:function(e){for(;e&&(3==e.nodeType||"true"!==e.contentEditable);)e=e.parentNode;return e},wrap:function(e,t){return d.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,n){return d.attr(e.createElement(t),n)},attr:function(e,t){for(var n in(t=f({},t))&&m in t&&(d.style(e,t.style),delete t.style),t)null===t[n]?(e.removeAttribute(n),delete t[n]):"className"==n&&(e[n]=t[n]);return f(e,t)},style:function(t,n){e(t).css(n||{})},unstyle:function(e,t){for(var n in t)n==v&&(n=h.support.cssFloat?_:y),e.style[n]="";""===e.style.cssText&&e.removeAttribute(m)},inlineStyle:function(t,n,i){var r,o=e(d.create(t.ownerDocument,n,i));return t.appendChild(o[0]),r=p(s,function(e){return g.msie&&"line-height"==e&&"1px"==o.css(e)?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),r},getEffectiveBackground:function(e){var t=e.css("background-color");return t.indexOf("rgba(0, 0, 0, 0")<0&&"transparent"!==t?t:"html"===e[0].tagName.toLowerCase()?"Window":d.getEffectiveBackground(e.parent())},removeClass:function(t,n){var i,r,o=" "+t.className+" ",a=n.split(" ");for(i=0,r=a.length;r>i;i++)o=o.replace(" "+a[i]+" "," ");(o=e.trim(o)).length?t.className=o:t.removeAttribute(b)},commonAncestor:function(){var e,t,n,i,r,o=arguments.length,a=[],s=1/0,l=null;if(!o)return null;if(1==o)return arguments[0];for(e=0;o>e;e++){for(t=[],n=arguments[e];n;)t.push(n),n=n.parentNode;a.push(t.reverse()),s=Math.min(s,t.length)}if(1==o)return a[0][0];for(e=0;s>e;e++){for(i=a[0][e],r=1;o>r;r++)if(i!=a[r][e])return l;l=i}return l},closestSplittableParent:function(t){var n,i,r;return(n=1==t.length?d.parentOfType(t[0],["ul","ol"]):d.commonAncestor.apply(null,t))||(n=d.parentOfType(t[0],["p","td"])||t[0].ownerDocument.body),d.isInline(n)&&(n=d.blockParentOrBody(n)),i=p(t,d.editableParent),r=d.commonAncestor(i)[0],e.contains(n,r)&&(n=r),n},closestEditable:function(t,n){var i,r=d.editableParent(t);return(i=d.ofType(t,n)?t:d.parentOfType(t,n))&&r&&e.contains(i,r)?i=r:!i&&r&&(i=r),i},closestEditableOfType:function(e,t){var n=d.closestEditable(e,t);return n&&d.ofType(n,t)?n:void 0},filter:function(e,t,n){for(var i,r=0,o=t.length,a=[];o>r;r++)i=d.name(t[r]),(!n&&i==e||n&&i!=e)&&a.push(t[r]);return a},ensureTrailingBreaks:function(t){var n=e(t).find("p,td,th"),i=n.length,r=0;if(i)for(;i>r;r++)d.ensureTrailingBreak(n[r]);else d.ensureTrailingBreak(t)},removeTrailingBreak:function(t){e(t).find("br[type=_moz],.k-br").remove()},ensureTrailingBreak:function(e){var t,n,i;d.removeTrailingBreak(e),(!(n=(t=e.lastChild)&&d.name(t))||"br"!=n&&"img"!=n||"br"==n&&"k-br"!=t.className)&&((i=e.ownerDocument.createElement("br")).className="k-br",e.appendChild(i))}},h.ui.editor.Dom=d}(window.kendo.jQuery),function(e,t){var n,i,r=window.kendo,o=r.ui.editor,a=o.Dom,s=e.extend,l="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),c=/"/g,u=/<br[^>]*>/i,d=/^\d+(\.\d*)?(px)?$/i,h=/<p><\/p>/i,p=/([\w|\-]+)\s*:\s*([^;]+);?/i,f=/^sizzle-\d+/i,g=/^k-script-/i,m=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,v=document.createElement("div");v.innerHTML=" <hr>",n=3===v.firstChild.nodeType,v=null,i={toEditableHtml:function(e){var t='<br class="k-br">';return(e=e||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"\x3c!--[CDATA[$1]]--\x3e").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<k:script$1>$2</k:script>").replace(/<img([^>]*)>/gi,function(e){return e.replace(m,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,t+"<$1").replace(/^[\s]*(&nbsp;|\u00a0)/i,"$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+t)},_fillEmptyElements:function(t){e(t).find("p").each(function(){var t,n=e(this);if(/^\s*$/g.test(n.text())&&!n.find("img,input").length){for(t=this;t.firstChild&&3!=t.firstChild.nodeType;)t=t.firstChild;1!=t.nodeType||a.empty[a.name(t)]||(t.innerHTML=r.ui.editor.emptyElementContent)}})},_removeSystemElements:function(t){e(".k-paste-container",t).remove()},_resetOrderedLists:function(e){var t,n,i,r=e.getElementsByTagName("ol");for(t=0;r.length>t;t++)i=(n=r[t]).getAttribute("start"),n.setAttribute("start",1),i?n.setAttribute("start",i):n.removeAttribute(i)},_preventScriptExecution:function(t){e(t).find("*").each(function(){var e,t,n,i,r=this.attributes;for(t=0,n=r.length;n>t;t++)i=(e=r[t]).nodeName,e.specified&&/^on/i.test(i)&&(this.setAttribute("k-script-"+i,e.value),this.removeAttribute(i))})},htmlToDom:function(t,n){var o,s,l=r.support.browser,c=l.msie,u=c&&9>l.version;return t=i.toEditableHtml(t),u&&(o="originalsrc",t=(t=(t="<br/>"+t).replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,(s="originalhref")+'="$1"')).replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,o+'="$1"')),n.innerHTML=t,u?(a.remove(n.firstChild),e(n).find("k\\:script,script,link,img,a").each(function(){var e=this;e[s]&&(e.setAttribute("href",e[s]),e.removeAttribute(s)),e[o]&&(e.setAttribute("src",e[o]),e.removeAttribute(o))})):c&&(a.normalize(n),i._resetOrderedLists(n)),i._preventScriptExecution(n),i._fillEmptyElements(n),i._removeSystemElements(n),e("table",n).addClass("k-table"),n},domToXhtml:function(i,o){function s(t){return e.grep(t,function(e){return"style"!=e.name})}function m(t){var n,i,r,o,s,l=e.trim,u=l(t).split(";"),d=[];for(o=0,s=u.length;s>o;o++)u[o].length&&(n=p.exec(u[o]))&&(i=l(n[1].toLowerCase()),r=l(n[2]),"font-size-adjust"!=i&&"font-stretch"!=i&&(i.indexOf("color")>=0?r=a.toHex(r):i.indexOf("font")>=0?r=r.replace(c,"'"):/\burl\(/g.test(r)&&(r=r.replace(c,"")),d.push({property:i,value:r})));return d}function v(e){var t,n=m(e);for(t=0;n.length>t;t++)x.push(n[t].property),x.push(":"),x.push(n[t].value),x.push(";")}function _(e){var t,n,i,r,s,l,c=[],u=e.attributes;for(n=0,i=u.length;i>n;n++)r=(t=u[n]).nodeName,s=t.value,l=t.specified,"value"==r&&"value"in e&&e.value?l=!0:"type"==r&&"text"==s?l=!0:"class"!=r||s?f.test(r)?l=!1:"complete"==r?l=!1:"altHtml"==r?l=!1:"start"==r&&(a.is(e,"ul")||a.is(e,"ol"))?l=!1:r.indexOf("_moz")>=0?l=!1:g.test(r)&&(l=!!o.scripts):l=!1,l&&c.push(t);return c}function y(n,i){var o,s,l,c,u,h,p,f;if(i=i||_(n),a.is(n,"img")&&(h=n.style.width,p=n.style.height,f=e(n),h&&d.test(h)&&(f.attr("width",parseInt(h,10)),a.unstyle(n,{width:t})),p&&d.test(p)&&(f.attr("height",parseInt(p,10)),a.unstyle(n,{height:t}))),i.length)for(i.sort(function(e,t){return e.nodeName>t.nodeName?1:t.nodeName>e.nodeName?-1:0}),o=0,s=i.length;s>o;o++)c=(l=i[o]).nodeName,u=l.value,("class"!=c||"k-table"!=u)&&(c=c.replace(g,""),x.push(" "),x.push(c),x.push('="'),"style"==c?v(u||n.style.cssText):x.push("src"==c||"href"==c?r.htmlEncode(n.getAttribute(c,2)):a.fillAttrs[c]?c:u),x.push('"'))}function b(e,t,n){for(var i=e.firstChild;i;i=i.nextSibling)k(i,t,n)}function w(e){return e.nodeValue.replace(/\ufeff/g,"")}function k(e,i,r){var s,l,c,u,d,h=e.nodeType;if(1==h){if(!(s=a.name(e))||a.insignificant(e))return;if(a.isInline(e)&&1==e.childNodes.length&&3==e.firstChild.nodeType&&!w(e.firstChild))return;if(!o.scripts&&("script"==s||"k:script"==s))return;if((l=C[s])&&(t===l.semantic||o.semantic^l.semantic))return l.start(e),b(e,!1,l.skipEncoding),l.end(e),t;x.push("<"),x.push(s),y(e),a.empty[s]?x.push(" />"):(x.push(">"),b(e,i||a.is(e,"pre")),x.push("</"),x.push(s),x.push(">"))}else 3==h?(u=w(e),!i&&n&&(c=e.parentNode,(d=e.previousSibling)||(d=(a.isInline(c)?c:e).previousSibling),(!d||""===d.innerHTML||a.isBlock(d))&&(u=u.replace(/^[\r\n\v\f\t ]+/,"")),u=u.replace(/ +/," ")),x.push(r?u:a.encode(u,o))):4==h?(x.push("<![CDATA["),x.push(e.data),x.push("]]>")):8==h&&(e.data.indexOf("[CDATA[")<0?(x.push("\x3c!--"),x.push(e.data),x.push("--\x3e")):(x.push("<!"),x.push(e.data),x.push(">")))}var x=[],C={iframe:{start:function(e){x.push("<iframe"),y(e),x.push(">")},end:function(){x.push("</iframe>")}},"k:script":{start:function(e){x.push("<script"),y(e),x.push(">")},end:function(){x.push("<\/script>")},skipEncoding:!0},span:{semantic:!0,start:function(t){var n,i,r=t.style,o=s(_(t));o.length&&(x.push("<span"),y(t,o),x.push(">")),"underline"==r.textDecoration&&x.push("<u>"),n=[],r.color&&n.push('color="'+a.toHex(r.color)+'"'),r.fontFamily&&n.push('face="'+r.fontFamily+'"'),r.fontSize&&(i=e.inArray(r.fontSize,l),n.push('size="'+i+'"')),n.length&&x.push("<font "+n.join(" ")+">")},end:function(e){var t=e.style;(t.color||t.fontFamily||t.fontSize)&&x.push("</font>"),"underline"==t.textDecoration&&x.push("</u>"),s(_(e)).length&&x.push("</span>")}},strong:{semantic:!0,start:function(){x.push("<b>")},end:function(){x.push("</b>")}},em:{semantic:!0,start:function(){x.push("<i>")},end:function(){x.push("</i>")}},b:{semantic:!1,start:function(){x.push("<strong>")},end:function(){x.push("</strong>")}},i:{semantic:!1,start:function(){x.push("<em>")},end:function(){x.push("</em>")}},u:{semantic:!1,start:function(){x.push('<span style="text-decoration:underline;">')},end:function(){x.push("</span>")}},font:{semantic:!1,start:function(e){var t,n,i;x.push('<span style="'),t=e.getAttribute("color"),n=l[e.getAttribute("size")],i=e.getAttribute("face"),t&&(x.push("color:"),x.push(a.toHex(t)),x.push(";")),i&&(x.push("font-family:"),x.push(i),x.push(";")),n&&(x.push("font-size:"),x.push(n),x.push(";")),x.push('">')},end:function(){x.push("</span>")}}};return C.script=C["k:script"],t===(o=o||{}).semantic&&(o.semantic=!0),function(e){var t=e.childNodes.length;return t&&3==e.firstChild.nodeType&&(1==t||2==t&&a.insignificant(e.lastChild))}(i)?a.encode(w(i.firstChild).replace(/[\r\n\v\f\t ]+/," "),o):(b(i),""===(x=x.join("")).replace(u,"").replace(h,"")?"":x)}},s(o,{Serializer:i})}(window.kendo.jQuery),function(e){function t(e,t){(function(e){try{return function(e,t,n,i){var r,o,a,s;if(e==t)return i-n;for(r=t;r&&r.parentNode!=e;)r=r.parentNode;if(r)return d(r)-n;for(r=e;r&&r.parentNode!=t;)r=r.parentNode;if(r)return i-d(r)-1;for(o=u.commonAncestor(e,t),a=e;a&&a.parentNode!=o;)a=a.parentNode;for(a||(a=o),s=t;s&&s.parentNode!=o;)s=s.parentNode;return s||(s=o),a==s?0:d(s)-d(a)}(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(e){return!0}})(e)&&(t?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function n(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!u.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function i(e,t,n){var i,r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],a=0,s=h(r),l=s?r:r.childNodes[o]||null,c=s?r.parentNode:r,d=t.ownerDocument,p=d.body.createTextRange();(3==r.nodeType||4==r.nodeType)&&(a=o),c||(c=d.body),"img"==c.nodeName.toLowerCase()?(p.moveToElementText(c),p.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",p)):(i=c.insertBefore(u.create(d,"a"),l),p.moveToElementText(i),u.remove(i),p[n?"moveStart":"moveEnd"]("character",a),p.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",p))}function r(e,t,n,i){var r,o,a,s,l,c,p,f=u.create(t.ownerDocument,"a"),g=e.duplicate(),m=i?"StartToStart":"StartToEnd",v=!1;f.innerHTML="\ufeff",g.collapse(i),o=g.parentElement(),u.isAncestorOrSelf(n,o)||(o=n);do{v?o.insertBefore(f,f.previousSibling):(o.appendChild(f),v=!0),g.moveToElementText(f)}while((r=g.compareEndPoints(m,e))>0&&f.previousSibling);a=f.nextSibling,-1==r&&h(a)?(g.setEndPoint(i?"EndToStart":"EndToEnd",e),u.remove(f),c=[a,g.text.length]):(s=!i&&f.previousSibling,l=i&&f.nextSibling,h(l)?c=[l,0]:h(s)?c=[s,s.length]:(p=d(f),c=o.nextSibling&&p==o.childNodes.length-1?[o.nextSibling,0]:[o,p]),u.remove(f)),t[i?"setStart":"setEnd"].apply(t,c)}var o=window.kendo,a=o.Class,s=e.extend,l=o.ui.editor,c=o.support.browser,u=l.Dom,d=u.findNodeIndex,h=u.isDataNode,p=u.findClosestAncestor,f=u.getNodeLength,g=u.normalize,m={selectionFromWindow:function(e){return"getSelection"in e?e.getSelection():new y(e.document)},selectionFromRange:function(e){var t=C.documentFromRange(e);return m.selectionFromDocument(t)},selectionFromDocument:function(e){return m.selectionFromWindow(u.windowFromDocument(e))}},v=a.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,i){this.startContainer=e,this.startOffset=i,n(this),t(this,!0)},setEnd:function(e,i){this.endContainer=e,this.endOffset=i,n(this),t(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,d(e))},setStartAfter:function(e){this.setStart(e.parentNode,d(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,d(e))},setEndAfter:function(e){this.setEnd(e.parentNode,d(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(p(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function e(t){for(;t.next();)t.hasPartialSubtree()?e(t.getSubtreeIterator()):t.remove()}(new _(t))},cloneContents:function(){var e=C.documentFromRange(this);return function t(n){for(var i,r=e.createDocumentFragment();i=n.next();)i=i.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&i.appendChild(t(n.getSubtreeIterator())),r.appendChild(i);return r}(new _(this))},extractContents:function(){var e,t=this,n=t.cloneRange();return t.startContainer!=t.commonAncestorContainer&&t.setStartAfter(p(t.commonAncestorContainer,t.startContainer)),t.collapse(!0),e=C.documentFromRange(t),function n(i){for(var r,o=e.createDocumentFragment();r=i.next();)i.hasPartialSubtree()?(r=r.cloneNode(!1)).appendChild(n(i.getSubtreeIterator())):i.remove(t.originalRange),o.appendChild(r);return o}(new _(n))},insertNode:function(e){var t=this;h(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&u.splitDataNode(t.startContainer,t.startOffset),u.insertAfter(e,t.startContainer)):u.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new v(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return("#text"==e?this.startContainer.nodeValue:e)+"("+this.startOffset+") : "+("#text"==t?this.endContainer.nodeValue:t)+"("+this.endOffset+")"}}),_=a.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var n=t.commonAncestorContainer;this._next=t.startContainer!=n||h(t.startContainer)?p(n,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=n||h(t.endContainer)?p(n,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,h(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0)).deleteData(e.range.endOffset,t.length-e.range.endOffset),e.range.startContainer==e._current&&(t=t.cloneNode(!0)).deleteData(0,e.range.startOffset)),t},traverse:function(e){for(var t,n=this;n._current=n._next,n._next=n._current&&n._current.nextSibling!=n._end?n._current.nextSibling:null,t=n._current;)n.hasPartialSubtree()?n.getSubtreeIterator().traverse(e):e(t);return t},remove:function(e){var t,n,i,r,o,a=this,s=a.range.startContainer==a._current,l=a.range.endContainer==a._current;h(a._current)&&(s||l)?(t=s?a.range.startOffset:0,i=(n=l?a.range.endOffset:a._current.length)-t,e&&(s||l)&&(a._current==e.startContainer&&e.startOffset>=t&&(e.startOffset-=i),a._current==e.endContainer&&e.endOffset>=n&&(e.endOffset-=i)),a._current.deleteData(t,i)):(r=a._current.parentNode,!e||a.range.startContainer!=r&&a.range.endContainer!=r||(o=d(a._current),r==e.startContainer&&e.startOffset>=o&&(e.startOffset-=1),r==e.endContainer&&e.endOffset>o&&(e.endOffset-=1)),u.remove(a._current))},hasPartialSubtree:function(){return!h(this._current)&&(u.isAncestorOrSelf(this._current,this.range.startContainer)||u.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),u.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),u.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new _(t)}}),y=a.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();i(t,e,!1),i(t,e,!0),t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;"None"!=e.type&&e.empty()},getRangeAt:function(){var e,t,n,i,o,a,s,l=new v(this.ownerDocument),c=this.ownerDocument.selection;try{if(((e=c.createRange()).item?e.item(0):e.parentElement()).ownerDocument!=this.ownerDocument)return l}catch(e){return l}if("Control"==c.type)l.selectNode(e.item(0));else if(r(e,l,t=function(e){var t=e.duplicate(),n=e.duplicate();return t.collapse(!0),n.collapse(!1),u.commonAncestor(e.parentElement(),t.parentElement(),n.parentElement())}(e),!0),r(e,l,t,!1),9==l.startContainer.nodeType&&l.setStart(l.endContainer,l.startOffset),9==l.endContainer.nodeType&&l.setEnd(l.startContainer,l.endOffset),0===e.compareEndPoints("StartToEnd",e)&&l.collapse(!1),n=l.startContainer,i=l.endContainer,o=this.ownerDocument.body,!(l.collapsed||0!==l.startOffset||l.endOffset!=f(l.endContainer)||n==i&&h(n)&&n.parentNode==o)){for(a=!1,s=!1;0===d(n)&&n==n.parentNode.firstChild&&n!=o;)n=n.parentNode,a=!0;for(;d(i)==f(i.parentNode)-1&&i==i.parentNode.lastChild&&i!=o;)i=i.parentNode,s=!0;n==o&&i==o&&a&&s&&(l.setStart(n,0),l.setEnd(i,f(o)))}return l}}),b=a.extend({init:function(e){this.enumerate=function(){var t=[];return new _(e).traverse(function e(n){if(u.is(n,"img")||3==n.nodeType&&(!u.isWhitespace(n)||"\ufeff"==n.nodeValue))t.push(n);else for(n=n.firstChild;n;)e(n),n=n.nextSibling}),t}}}),w=a.extend({init:function(e,t){var n=this;n.range=e,n.rootNode=C.documentFromRange(e),n.body=t||n.getEditable(e),"body"!=u.name(n.body)&&(n.rootNode=n.body),n.html=n.body.innerHTML,n.startContainer=n.nodeToPath(e.startContainer),n.endContainer=n.nodeToPath(e.endContainer),n.startOffset=n.offset(e.startContainer,e.startOffset),n.endOffset=n.offset(e.endContainer,e.endOffset)},index:function(e){for(var t,n=0,i=e.nodeType;e=e.previousSibling;)(3!=(t=e.nodeType)||i!=t)&&n++,i=t;return n},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&!t.attributes.contentEditable);)t=t.parentNode;return t},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,n,i){for(var r=this.rootNode,o=n.length,a=i;o--;)r=r.childNodes[n[o]];for(;r&&3==r.nodeType&&a>r.nodeValue.length;)a-=r.nodeValue.length,r=r.nextSibling;r&&a>=0&&e[t?"setStart":"setEnd"](r,a)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),k=a.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=u.create(C.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(e){var t,n,i,r,o=this,a=o.caret.previousSibling,s=0;a&&(s=h(a)?a.nodeValue.length:d(a)),t=o.caret.parentNode,n=a?d(a):0,u.remove(o.caret),g(t),i=t.childNodes[n],h(i)?e.setStart(i,s):i?(r=u.lastTextNode(i))?e.setStart(r,r.nodeValue.length):e[a?"setStartAfter":"setStartBefore"](i):(c.msie||t.innerHTML||(t.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(t)),e.collapse(!0)},add:function(e,t){var n,i,r=this,o=e.collapsed&&!C.isExpandable(e),a=C.documentFromRange(e);return t&&e.collapsed&&(r.addCaret(e),e=C.expand(e)),(n=e.cloneRange()).collapse(!1),r.end=u.create(a,"span",{className:"k-marker"}),n.insertNode(r.end),(n=e.cloneRange()).collapse(!0),r.start=r.end.cloneNode(!0),n.insertNode(r.start),r._removeDeadMarkers(r.start,r.end),o&&(i=a.createTextNode("\ufeff"),u.insertAfter(i.cloneNode(),r.start),u.insertBefore(i,r.end)),g(e.commonAncestorContainer),e.setStartBefore(r.start),e.setEndAfter(r.end),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"\ufeff"==e.previousSibling.nodeValue&&u.remove(e.previousSibling),t.nextSibling&&"\ufeff"==t.nextSibling.nodeValue&&u.remove(t.nextSibling)},_normalizedIndex:function(e){for(var t=d(e),n=e;n.previousSibling;)3==n.nodeType&&3==n.previousSibling.nodeType&&t--,n=n.previousSibling;return t},remove:function(e){var t,n,i,r,o,a,s,l,c=this,d=c.start,p=c.end;for(g(e.commonAncestorContainer);!d.nextSibling&&d.parentNode;)d=d.parentNode;for(;!p.previousSibling&&p.parentNode;)p=p.parentNode;if(d.previousSibling&&3==d.previousSibling.nodeType&&d.nextSibling&&3==d.nextSibling.nodeType,p.previousSibling&&3==p.previousSibling.nodeType&&p.nextSibling&&3==p.nextSibling.nodeType,d=d.nextSibling,p=p.previousSibling,t=!1,n=!1,d==c.end&&(n=!!c.start.previousSibling,d=p=c.start.previousSibling||c.end.nextSibling,t=!0),u.remove(c.start),u.remove(c.end),!d||!p)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);if(i=t?h(d)?d.nodeValue.length:d.childNodes.length:0,r=h(p)?p.nodeValue.length:p.childNodes.length,3==d.nodeType)for(;d.previousSibling&&3==d.previousSibling.nodeType;)i+=(d=d.previousSibling).nodeValue.length;if(3==p.nodeType)for(;p.previousSibling&&3==p.previousSibling.nodeType;)r+=(p=p.previousSibling).nodeValue.length;o=d.parentNode,a=p.parentNode,s=this._normalizedIndex(d),l=this._normalizedIndex(p),g(o),3==d.nodeType&&(d=o.childNodes[s]),g(a),3==p.nodeType&&(p=a.childNodes[l]),t?(3==d.nodeType?e.setStart(d,i):e[n?"setStartAfter":"setStartBefore"](d),e.collapse(!0)):(3==d.nodeType?e.setStart(d,i):e.setStartBefore(d),3==p.nodeType?e.setEnd(p,r):e.setEndAfter(p)),c.caret&&c.removeCaret(e)}}),x=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,C={nodes:function(e){var t=C.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=C.textNodes(e)).length||(t=u.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new b(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return c.msie&&9>c.version?new v(e):e.createRange()},selectRange:function(e){var t,n=C.image(e);n&&(e.setStartAfter(n),e.setEndAfter(n)),(t=m.selectionFromRange(e)).removeAllRanges(),t.addRange(e)},stringify:function(e){return o.format("{0}:{1} - {2}:{3}",u.name(e.startContainer),e.startOffset,u.name(e.endContainer),e.endOffset)},split:function(e,t,n){function i(i){var r,o=e.cloneRange();o.collapse(i),o[i?"setStartBefore":"setEndAfter"](t),r=o.extractContents(),n&&(r=u.trim(r)),u[i?"insertBefore":"insertAfter"](r,t)}i(!0),i(!1)},mapAll:function(t,n){var i=[];return new _(t).traverse(function(t){var r=n(t);r&&e.inArray(r,i)<0&&i.push(r)}),i},getAll:function(e,t){var n=t;return"string"==typeof t&&(t=function(e){return u.is(e,n)}),C.mapAll(e,function(e){return t(e)?e:void 0})},getMarkers:function(e){return C.getAll(e,function(e){return"k-marker"==e.className})},image:function(e){var t=C.getAll(e,"img");return 1==t.length?t[0]:void 0},isStartOf:function(e,t){var n,i;for(e=e.cloneRange();0===e.startOffset&&e.startContainer!=t;){for(n=u.findNodeIndex(e.startContainer),i=e.startContainer.parentNode;n>0&&u.insignificant(i[n-1]);)n--;e.setStart(i,n)}return 0===e.startOffset&&e.startContainer==t},isEndOf:function(e,t){var n,i;return(e=e.cloneRange()).collapse(!1),n=e.startContainer,u.isDataNode(n)&&e.startOffset==u.getNodeLength(n)&&(e.setStart(n.parentNode,u.findNodeIndex(n)+1),e.collapse(!0)),e.setEnd(t,u.getNodeLength(t)),i=[],new _(e).traverse(function(e){u.insignificant(e)||i.push(e)}),!i.length},wrapSelectedElements:function(e){function t(e,t){var n,i=u.getNodeLength(t);if(e==i)return!0;for(n=e;i>n;n++)if(!u.insignificant(t.childNodes[n]))return!1;return!0}for(var n=u.editableParent(e.startContainer),i=u.editableParent(e.endContainer);0===e.startOffset&&e.startContainer!=n;)e.setStart(e.startContainer.parentNode,u.findNodeIndex(e.startContainer));for(;t(e.endOffset,e.endContainer)&&e.endContainer!=i;)e.setEnd(e.endContainer.parentNode,u.findNodeIndex(e.endContainer)+1);return e},expand:function(e){var t,n,i,r,o=e.cloneRange(),a=o.startContainer.childNodes[0===o.startOffset?0:o.startOffset-1],s=o.endContainer.childNodes[o.endOffset];return h(a)&&h(s)?(t=a.nodeValue,n=s.nodeValue,t&&n?(i=t.split("").reverse().join("").search(x),r=n.search(x),i&&r?(r=-1==r?n.length:r,i=-1==i?0:t.length-i,o.setStart(a,i),o.setEnd(s,r),o):o):o):o},isExpandable:function(e){var t,n,i,r,o,a,s=e.startContainer,l=C.documentFromRange(e);return s!=l&&s!=l.body&&(t=e.cloneRange(),!!(n=s.nodeValue)&&(i=n.substring(0,t.startOffset),r=n.substring(t.startOffset),o=0,a=0,i&&(o=i.split("").reverse().join("").search(x)),r&&(a=r.search(x)),o&&a))}};s(l,{SelectionUtils:m,W3CRange:v,RangeIterator:_,W3CSelection:y,RangeEnumerator:b,RestorePoint:w,Marker:k,RangeUtils:C})}(window.kendo.jQuery),function(e){function t(e,t){var n=e.selectionRestorePoint=new u(e.getRange()),i=new f(t,n);return i.editor=e,e.undoRedoStack.push(i),n}var n=window.kendo,i=n.Class,r=n.ui.editor,o=r.EditorUtils,a=o.registerTool,s=r.Dom,l=r.Tool,c=r.ToolTemplate,u=r.RestorePoint,d=r.Marker,h=e.extend,p=i.extend({init:function(e){this.options=e,this.restorePoint=new u(e.range),this.marker=new d,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(t,i){var r=this.editor;return e(t).appendTo(document.body).kendoWindow(h({},r.options.dialogOptions,i)).closest(".k-window").toggleClass("k-rtl",n.support.isRtl(r.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)}}),f=i.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),g=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e,t=this.editor,n=this.options,i=n.range,r=t.body,o=new u(i,r),a=n.html||n.value||"";t.selectRange(i),t.clipboard.paste(a,n),n.postProcess&&n.postProcess(t,t.getRange()),(e=new f(o,new u(t.getRange(),r))).editor=t,t.undoRedoStack.push(e),t.focus()}}),m=l.extend({initialize:function(e,t){var n=t.editor,i=this.options,o=i.items?i.items:n.options.insertHtml;new r.SelectBox(e,{dataSource:o,dataTextField:"text",dataValueField:"value",change:function(){l.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new g(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),v=i.extend({init:function(){this.clear()},push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},clear:function(){this.stack=[],this.currentCommandIndex=-1},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),_=i.extend({init:function(e){this.editor=e},keydown:function(n){var i,r=this,o=r.editor,a=o.keyboard,s=a.isTypingKey(n),l=h(e.Event(),n);return r.editor.trigger("keydown",l),l.isDefaultPrevented()?(n.preventDefault(),!0):!(l.isDefaultPrevented()||!s||a.isTypingInProgress()||(i=o.getRange(),r.startRestorePoint=new u(i),a.startTyping(function(){r.endRestorePoint=t(o,r.startRestorePoint)}),0))},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),!!t.isTypingInProgress()&&(t.endTyping(),!0)}}),y=i.extend({init:function(e){this.editor=e},_addCaret:function(e){var t=s.create(this.editor.document,"a");return e.appendChild(t),t},_restoreCaret:function(e){var t=this.editor.createRange();t.setStartAfter(e),t.collapse(!0),this.editor.selectRange(t),s.remove(e)},_handleDelete:function(e){var t,n,i=e.endContainer,o=s.closestEditableOfType(i,s.blockElements);return!(!o||!r.RangeUtils.isEndOf(e,o)||(t=this._addCaret(o),(n=s.next(o))&&"p"==s.name(n)?(this._merge(o,n),this._restoreCaret(t),0):(s.remove(t),1)))},_handleBackspace:function(e){var t,n,i,o,a=e.startContainer,l=e.startOffset,c=s.closestEditableOfType(a,["li"]),u=s.closestEditableOfType(a,"p,h1,h2,h3,h4,h5,h6".split(","));if(s.isDataNode(a)){for(;l>=0&&"\ufeff"==a.nodeValue[l-1];)a.deleteData(l-1,1),l--;e.setStart(a,Math.max(0,l)),e.collapse(!0),this.editor.selectRange(e)}return u&&u.previousSibling&&r.RangeUtils.isStartOf(e,u)?(t=u.previousSibling,n=this._addCaret(t),this._merge(t,u),this._restoreCaret(n),!0):!(!c||!r.RangeUtils.isStartOf(e,c)||(i=new r.GreedyBlockFormatter([{tags:["p"]}]),o=c.firstChild,i.editor=this.editor,i.apply(c.childNodes),e.setStart(o,0),this.editor.selectRange(e),0))},_handleSelection:function(t){var n,i,o,a=t.commonAncestorContainer,l=s.closest(a,"table"),c=r.emptyElementContent;return/t(able|body)/i.test(s.name(a))&&t.selectNode(l),(n=new d).add(t,!1),t.setStartAfter(n.start),t.setEndBefore(n.end),i=t.startContainer,o=t.endContainer,t.deleteContents(),l&&""===e(l).text()&&(t.selectNode(l),t.deleteContents()),a=t.commonAncestorContainer,"p"===s.name(a)&&""===a.innerHTML&&(a.innerHTML=c,t.setStart(a,0)),this._join(i,o),s.insertAfter(this.editor.document.createTextNode("\ufeff"),n.start),n.remove(t),i=t.startContainer,"tr"==s.name(i)&&(i=i.childNodes[Math.max(0,t.startOffset-1)],t.setStart(i,s.getNodeLength(i))),t.collapse(!0),this.editor.selectRange(t),!0},_root:function(e){for(;e&&e.parentNode&&"body"!=s.name(e.parentNode);)e=e.parentNode;return e},_join:function(e,t){(e=this._root(e))!=(t=this._root(t))&&s.is(t,"p")&&this._merge(e,t)},_merge:function(e,t){for(s.removeTrailingBreak(e);t.firstChild;)e.appendChild(t.firstChild);s.remove(t)},keydown:function(e){var i,r,o=this.editor.getRange(),a=e.keyCode,s=n.keys,l=a===s.BACKSPACE,c=a==s.DELETE;!l&&!c||o.collapsed?l?i="_handleBackspace":c&&(i="_handleDelete"):i="_handleSelection",i&&(r=new u(o),this[i](o)&&(e.preventDefault(),t(this.editor,r)))},keyup:e.noop}),b=i.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=t(this.editor,this.startRestorePoint)},changed:function(){return!!this.startRestorePoint&&this.startRestorePoint.html!=this.editor.body.innerHTML},keydown:function(e){var t=this,n=t.editor,i=n.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),t.startRestorePoint=new u(n.getRange()),!0):!!i.isSystem(e)&&(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0)},keyup:function(){var e=this;return!(!e.systemCommandIsInProgress||!e.changed()||(e.systemCommandIsInProgress=!1,e.createUndoCommand(),0))}}),w=i.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&90>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e||229==e},toolFromShortcut:function(t,n){var i,r,o=String.fromCharCode(n.keyCode);for(i in t)if(((r=e.extend({ctrl:!1,alt:!1,shift:!1},t[i].options)).key==o||r.key==n.keyCode)&&r.ctrl==n.ctrlKey&&r.alt==n.altKey&&r.shift==n.shiftKey)return i},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(t){var n=this;n.clearTimeout(),t?n.stopTyping():n.timeout=window.setTimeout(e.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var n,i=this.handlers;for(n=0;i.length>n&&!i[n][t](e);n++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),k=i.extend({init:function(e){this.editor=e,this.cleaners=[new C,new T,new S,new D]},htmlToFragment:function(e){var t=this.editor.document,n=s.create(t,"div"),i=t.createDocumentFragment();for(n.innerHTML=e;n.firstChild;)i.appendChild(n.firstChild);return i},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e,t,n=this.editor;if(!this._inProgress)return this._inProgress=!0,e=n.getRange(),t=new u(e),s.persistScrollTop(n.document),{range:e,restorePoint:t}},_endModification:function(e){t(this.editor,e.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(e,t){var n=this,i=n.editor,r=n._startModification();r&&(e.call(n,i,r.range),setTimeout(function(){t.call(n,i,r.range),n._endModification(r)}))},oncut:function(){this._contentModification(e.noop,e.noop)},_fileToDataURL:function(t){var n=e.Deferred(),i=new FileReader;return t instanceof window.File||(t=t.getAsFile()),i.onload=e.proxy(n.resolve,n),i.readAsDataURL(t),n.promise()},_triggerPaste:function(e,t){var n={html:e||""};n.html=n.html.replace(/\ufeff/g,""),this.editor.trigger("paste",n),this.paste(n.html,t||{})},_handleImagePaste:function(t){var n,i,r,o;if("FileReader"in window&&(r=(i=(n=t.clipboardData||t.originalEvent.clipboardData||window.clipboardData)&&(n.items||n.files))&&e.grep(i,function(e){return/^image\//i.test(e.type)})).length&&(o=this._startModification()))return e.when.apply(e,e.map(r,this._fileToDataURL)).done(e.proxy(function(){var t=Array.prototype.slice.call(arguments),n=e.map(t,function(e){return'<img src="'+e.target.result+'" />'}).join("");this._triggerPaste(n),this._endModification(o)},this)),!0},onpaste:function(t){return this._handleImagePaste(t)?void t.preventDefault():void this._contentModification(function(i,r){var o,a,l,c=s.create(i.document,"div",{className:"k-paste-container",innerHTML:"\ufeff"}),u=n.support.browser;i.body.appendChild(c),u.msie&&11>u.version?(t.preventDefault(),(o=i.createRange()).selectNodeContents(c),i.selectRange(o),(a=i.document.body.createTextRange()).moveToElementText(c),e(i.body).unbind("paste"),a.execCommand("Paste"),e(i.body).bind("paste",e.proxy(this.onpaste,this))):((l=i.createRange()).selectNodeContents(c),i.selectRange(l)),r.deleteContents()},function(t,n){var i,r="";t.selectRange(n),(i=e(t.body).children(".k-paste-container")).each(function(){var e=this.lastChild;e&&s.is(e,"br")&&s.remove(e),r+=this.innerHTML}),i.remove(),this._triggerPaste(r,{clean:!0})})},splittableParent:function(e,t){var n,i;if(e)return s.closestEditableOfType(t,["p","ul","ol"])||t.parentNode;if(n=t.parentNode,i=t.ownerDocument.body,s.isInline(n))for(;n.parentNode!=i&&!s.isBlock(n.parentNode);)n=n.parentNode;return n},paste:function(t,n){var i,o,a,l,c,u,p,f,g,m,v,_,y=this.editor;for(n=h({clean:!1,split:!0},n),i=0,o=this.cleaners.length;o>i;i++)this.cleaners[i].applicable(t)&&(t=this.cleaners[i].clean(t));if(n.clean&&(t=(t=t.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3")).replace(/<(a|span)[^>]*><\/\1>/gi,"")),t=t.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>"),a=this.isBlock(t),y.focus(),(l=y.getRange()).deleteContents(),l.startContainer==y.document&&l.selectNodeContents(y.body),u=(c=new d).addCaret(l),f=!1,g=(p=this.splittableParent(a,u))!=y.body&&!s.is(p,"td"),n.split&&g&&(a||s.isInline(p))&&(l.selectNode(u),r.RangeUtils.split(l,p,!0),f=!0),(m=this.htmlToFragment(t)).firstChild&&"k-paste-container"===m.firstChild.className){for(v=[],i=0,o=m.childNodes.length;o>i;i++)v.push(m.childNodes[i].innerHTML);m=this.htmlToFragment(v.join("<br />"))}if(e(m.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),l.insertNode(m),p=this.splittableParent(a,u),f){for(;u.parentNode!=p;)s.unwrap(u.parentNode);s.unwrap(u.parentNode)}s.normalize(l.commonAncestorContainer),u.style.display="inline",s.restoreScrollTop(y.document),s.scrollTo(u),c.removeCaret(l),_=l.commonAncestorContainer.parentNode,l.collapsed&&"tbody"==s.name(_)&&(l.setStartAfter(e(_).closest("table")[0]),l.collapse(!0)),y.selectRange(l)}}),x=i.extend({clean:function(e){var t,n,i=this.replacements;for(t=0,n=i.length;n>t;t+=2)e=e.replace(i[t],i[t+1]);return e}}),C=x.extend({init:function(){this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return/<script[^>]*>/i.test(e)}}),T=x.extend({init:function(){this.replacements=[/<span\s+class="Apple-tab-span"[^>]*>\s*<\/span>/gi," ",/\t/gi," ",/&nbsp;&nbsp; &nbsp;/gi," "]},applicable:function(e){return/&nbsp;&nbsp; &nbsp;|class="?Apple-tab-span/i.test(e)}}),S=x.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)font(\s[^>]*)?>/gi,this.convertFontMatch,/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,"",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "}]},convertFontMatch:function(e,t,n){var i=/face=['"]([^'"]+)['"]/i.exec(n),r=n&&i&&i[1];return t?"</span>":r?'<span style="font-family:'+r+'">':"<span>"},applicable:function(e){return/class="?Mso/i.test(e)||/style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},listType:function(e){var t;return/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(e)&&(t=!0),e=e.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),!t&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e)||t&&/^.\u00a0+/.test(e)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(e)?"ol":void 0},_convertToLi:function(e){var t;return 1==e.childNodes.length?t=e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(s.remove(e.firstChild),3==e.firstChild.nodeType&&/^[ivx]+\.$/i.test(e.firstChild.nodeValue)&&s.remove(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&s.remove(e.firstChild),t=e.innerHTML),s.remove(e),s.create(document,"li",{innerHTML:t})},lists:function(t){var n,i,r,o,a,l,c,u,d,h=e(s.blockElements.join(","),t),p=-1,f={ul:{},ol:{}},g=t;for(r=0;h.length>r;r++)if(o=h[r],a=this.listType(o.innerHTML),"td"!=(i=s.name(o)))if(a&&"p"==i){if(l=parseFloat(o.style.marginLeft||0),c=f[a][l],(l>p||!c)&&(c=s.create(document,a),g==t?s.insertBefore(c,o):g.appendChild(c),f[a][l]=c),n!=a)for(u in f)for(d in f[u])e.contains(c,f[u][d])&&delete f[u][d];g=this._convertToLi(o),c.appendChild(g),p=l,n=a}else o.innerHTML?(f={ul:{},ol:{}},g=t,p=-1):s.remove(o)},removeAttributes:function(e){for(var t=e.attributes,n=t.length;n--;)"colspan"!=s.name(t[n])&&e.removeAttributeNode(t[n])},createColGroup:function(t){var i=t.cells,r=e(t).closest("table"),o=r.children("colgroup");2>i.length||(o.length&&(i=o.children(),o[0].parentNode.removeChild(o[0])),(o=e(e.map(i,function(e){var t=e.width;return t&&0!==parseInt(t,10)?n.format('<col style="width:{0}px;"/>',t):"<col />"}).join(""))).is("colgroup")||(o=e("<colgroup/>").append(o)),o.prependTo(r))},convertHeaders:function(t){var n,i=t.cells,r=e.map(i,function(t){var n=e(t).children("p").children("strong")[0];return n&&"strong"==s.name(n)?n:void 0});if(r.length==i.length){for(n=0;r.length>n;n++)s.unwrap(r[n]);for(e(t).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(t),n=0;i.length>n;n++)s.changeTag(i[n],"th")}},removeParagraphs:function(t){var n,i,r,o;for(n=0;t.length>n;n++)for(this.removeAttributes(t[n]),i=0,r=(o=e(t[n]).children("p")).length;r>i;i++)r-1>i&&s.insertAfter(s.create(document,"br"),o[i]),s.unwrap(o[i])},removeDefaultColors:function(e){for(var t=0;e.length>t;t++)/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText)&&s.unwrap(e[t])},tables:function(t){var n,i,r,o,a,s=e(t).find("table"),l=this;for(o=0;s.length>o;o++){for(r=i=(n=s[o].rows)[0],a=1;n.length>a;a++)n[a].cells.length>r.cells.length&&(r=n[a]);l.createColGroup(r),l.convertHeaders(i),l.removeAttributes(s[o]),l.removeParagraphs(s.eq(o).find("td,th")),l.removeDefaultColors(s.eq(o).find("span"))}},headers:function(t){var n,i=e(t).find("p.MsoTitle");for(n=0;i.length>n;n++)s.changeTag(i[n],"h1")},clean:function(e){var t,n=this;return e=x.fn.clean.call(n,e),e=n.stripEmptyAnchors(e),t=s.create(document,"div",{innerHTML:e}),n.headers(t),n.lists(t),n.tables(t),t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}}),D=x.extend({init:function(){this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}}),A=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e=this.editor;n.support.browser.msie?e.document.execCommand("print",!1,null):e.window.print&&e.window.print()}}),M=p.extend({init:function(e){this.async=!0,p.fn.init.call(this,e)},exec:function(){var e=this,t=this.lockRange(!0);this.editor.saveAsPDF().then(function(){e.releaseRange(t)})}});h(r,{_finishUpdate:t,Command:p,GenericCommand:f,InsertHtmlCommand:g,InsertHtmlTool:m,UndoRedoStack:v,TypingHandler:_,SystemHandler:b,BackspaceHandler:y,Keyboard:w,Clipboard:k,Cleaner:x,TabCleaner:T,MSWordFormatCleaner:S,WebkitFormatCleaner:D,PrintCommand:A,ExportPdfCommand:M}),a("insertHtml",new m({template:new c({template:o.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})})),a("print",new l({command:A,template:new c({template:o.buttonTemplate,title:"Print"})})),a("pdf",new l({command:M,template:new c({template:o.buttonTemplate,title:"Export PDF"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=t.ui.editor,r=t.ui.Editor.fn.options.formats,o=i.EditorUtils,a=i.Tool,s=i.ToolTemplate,l=i.FormatTool,c=i.Dom,u=i.RangeUtils,d=e.extend,h=i.EditorUtils.registerTool,p=i.EditorUtils.registerFormat,f="k-marker",g=n.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,n=0,i=0,r=0,o=e.parentNode;for(t=o.firstChild;t;t=t.nextSibling)t!=e&&(t.className==f?r++:3==t.nodeType?n++:i++);return r>1&&o.firstChild.className==f&&o.lastChild.className==f?0:i+n},findSuitable:function(e,t){var n,i;if(!t&&this.numberOfSiblings(e)>0)return null;for(n=e.parentNode,i=this.format[0].tags;!c.ofType(n,i);){if(this.numberOfSiblings(n)>0)return null;n=n.parentNode}return n},findFormat:function(e){var t,n,i,r,o,a=this.format,s=c.attrEquals;for(t=0,n=a.length;n>t;t++){if(i=e,r=a[t].tags,o=a[t].attr,i&&c.ofType(i,r)&&s(i,o))return i;for(;i;)if((i=c.parentOfType(i,r))&&s(i,o))return i}return null},isFormatted:function(e){var t,n;for(t=0,n=e.length;n>t;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=n.extend({init:function(e,t){this.finder=new g(e),this.attributes=d({},e[0].attr,t),this.tag=e[0].tags[0]},wrap:function(e){return c.wrap(e,c.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)},toggle:function(e){var t=u.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,n,i,r,o=[];for(t=0,n=e.length;n>t;t++){if(i=e[t],r=this.finder.findSuitable(i))c.attr(r,this.attributes);else{for(;!c.isBlock(i.parentNode)&&1==i.parentNode.childNodes.length;)i=i.parentNode;r=this.wrap(i)}o.push(r)}this.consolidate(o)},remove:function(e){var t,n,i;for(t=0,n=e.length;n>t;t++)(i=this.finder.findFormat(e[t]))&&(this.attributes&&this.attributes.style?(c.unstyle(i,this.attributes.style),i.style.cssText||i.attributes.class||c.unwrap(i)):c.unwrap(i))},split:function(e){var t,n,i=u.textNodes(e),r=i.length;if(r>0)for(t=0;r>t;t++)(n=this.finder.findFormat(i[t]))&&u.split(e,n,!0)},consolidate:function(e){for(var t,n;e.length>1;)if(t=e.pop(),n=e[e.length-1],t.previousSibling&&t.previousSibling.className==f&&n.appendChild(t.previousSibling),t.tagName==n.tagName&&t.previousSibling==n&&t.style.cssText==n.style.cssText){for(;t.firstChild;)n.appendChild(t.firstChild);c.remove(t)}}}),v=g.extend({init:function(e,t){this.format=e,this.greedyProperty=t,g.fn.init.call(this,e)},getInlineCssValue:function(t){var n,i,r,o,a,s,l,u,d,h,p,f,g=t.attributes,m=e.trim;if(g)for(n=0,i=g.length;i>n;n++)if(o=(r=g[n]).nodeName,a=r.nodeValue,r.specified&&"style"==o)for(u=0,d=(s=m(a||t.style.cssText).split(";")).length;d>u;u++)if((l=s[u]).length){if(p=m((h=l.split(":"))[0].toLowerCase()),f=m(h[1]),p!=this.greedyProperty)continue;return p.indexOf("color")>=0?c.toHex(f):f}},getFormatInner:function(t){var n,i,r,o=e(c.isDataNode(t)?t.parentNode:t).parentsUntil("[contentEditable]").addBack().toArray().reverse();for(n=0,i=o.length;i>n;n++)if(r="className"==this.greedyProperty?o[n].className:this.getInlineCssValue(o[n]))return r;return"inherit"},getFormat:function(e){var t,n,i=this.getFormatInner(e[0]);for(t=1,n=e.length;n>t;t++)if(i!=this.getFormatInner(e[t]))return"";return i},isFormatted:function(e){return""!==this.getFormat(e)}}),_=m.extend({init:function(e,n,i){m.fn.init.call(this,e,n),this.values=n,this.finder=new v(e,i),i&&(this.greedyProperty=t.toCamelCase(i))},activate:function(e,t){var n=this.greedyProperty,i="apply";this.split(e),n&&"inherit"==this.values.style[n]&&(i="remove"),this[i](t)}}),y=l.extend({init:function(e){l.fn.init.call(this,d(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}}),b=a.extend({update:function(e,t){var n=e.data(this.type);n.close(),n.value(this.finder.getFormat(t))}}),w=b.extend({init:function(e){a.fn.init.call(this,e),this.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(d(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(e,t){var n,i=t.editor,r=this.options,o=r.name,s=[];r.defaultValue&&(s=[{text:i.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),n=s.concat(r.items?r.items:i.options[o]||[]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:n,change:function(){a.exec(i,o,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+o).find("*").addBack().attr("unselectable","on"),e.data(this.type).value("inherit")}}),k=a.extend({init:function(e){a.fn.init.call(this,e),this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(d(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(n,i){var r=i.editor,o=this.name,s=d({},k.fn.options,this.options),l=s.palette;(n=this._widget=new t.ui.ColorPicker(n,{value:e.isArray(l)?l[0]:"#000",toolIcon:"k-"+s.name,palette:l,change:function(){var e=n.value();e&&a.exec(r,o,e),r.focus()},activate:function(e){e.preventDefault(),n.trigger("change")}})).wrapper.attr({title:i.title,unselectable:"on"}).find("*").attr("unselectable","on")}});d(i,{InlineFormatFinder:g,InlineFormatter:m,DelayedExecutionTool:b,GreedyInlineFormatFinder:v,GreedyInlineFormatter:_,InlineFormatTool:y,FontTool:w,ColorTool:k}),p("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),h("bold",new y({key:"B",ctrl:!0,format:r.bold,template:new s({template:o.buttonTemplate,title:"Bold"})})),p("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),h("italic",new y({key:"I",ctrl:!0,format:r.italic,template:new s({template:o.buttonTemplate,title:"Italic"})})),p("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),h("underline",new y({key:"U",ctrl:!0,format:r.underline,template:new s({template:o.buttonTemplate,title:"Underline"})})),p("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),h("strikethrough",new y({format:r.strikethrough,template:new s({template:o.buttonTemplate,title:"Strikethrough"})})),p("superscript",[{tags:["sup"]}]),h("superscript",new y({format:r.superscript,template:new s({template:o.buttonTemplate,title:"Superscript"})})),p("subscript",[{tags:["sub"]}]),h("subscript",new y({format:r.subscript,template:new s({template:o.buttonTemplate,title:"Subscript"})})),h("foreColor",new k({cssAttr:"color",domAttr:"color",name:"foreColor",template:new s({template:o.colorPickerTemplate,title:"Color"})})),h("backColor",new k({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new s({template:o.colorPickerTemplate,title:"Background Color"})})),h("fontName",new w({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Name"})})),h("fontSize",new w({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery),function(e){var t,n=window.kendo,i=n.Class,r=e.extend,o=n.ui.editor,a=n.ui.Editor.fn.options.formats,s=o.Dom,l=o.Command,c=o.ToolTemplate,u=o.FormatTool,d=o.EditorUtils,h=d.registerTool,p=d.registerFormat,f=o.RangeUtils,g=i.extend({init:function(e){this.format=e},contains:function(e,t){var n,i,r;for(n=0,i=t.length;i>n;n++)if(!(r=t[n])||!s.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var n,i,r,o,a=this.format,l=[];for(n=0,i=t.length;i>n;n++){for(o=a.length-1;o>=0&&!(r=s.ofType(t[n],a[o].tags)?t[n]:s.parentOfType(t[n],a[o].tags));o--);if(!r||"true"===r.contentEditable)return[];e.inArray(r,l)<0&&l.push(r)}for(n=0,i=l.length;i>n;n++)if(this.contains(l[n],l))return[l[n]];return l},findFormat:function(e){var t,n,i,r,o,a=this.format,l=s.editableParent(e);for(t=0,n=a.length;n>t;t++)for(i=e,r=a[t].tags,o=a[t].attr;i&&s.isAncestorOf(l,i);){if(s.ofType(i,r)&&s.attrEquals(i,o))return i;i=i.parentNode}return null},getFormat:function(e){var t,n,i=this,r=function(e){return i.findFormat(s.isDataNode(e)?e.parentNode:e)},o=r(e[0]);if(!o)return"";for(t=1,n=e.length;n>t;t++)if(o!=r(e[t]))return"";return o.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,n=e.length;n>t;t++)if(!this.findFormat(e[t]))return!1;return!0}}),m=i.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new g(e)},wrap:function(e,t,n){var i,r,o,a,l,c=1==n.length?s.blockParentOrBody(n[0]):s.commonAncestor.apply(null,n);for(s.isInline(c)&&(c=s.blockParentOrBody(c)),i=s.significantChildNodes(c),r=s.findNodeIndex(i[0]),o=s.create(c.ownerDocument,e,t),a=0;i.length>a;a++)l=i[a],s.isBlock(l)?(s.attr(l,t),o.childNodes.length&&(s.insertBefore(o,l),o=o.cloneNode(!1)),r=s.findNodeIndex(l)+1):o.appendChild(l);o.firstChild&&s.insertAt(c,o,r)},apply:function(t){function n(e){return r({},e&&e.attr,u)}var i,o,a,l,c,u=this.values,h=s.filter("img",t),p=n(d.formatByName("img",this.format));if(e.each(h,function(){s.attr(this,p)}),h.length!=t.length)if(o=s.filter("img",t,!0),(a=this.finder.findSuitable(o)).length)for(l=0,c=a.length;c>l;l++)i=d.formatByName(s.name(a[l]),this.format),s.attr(a[l],n(i));else i=this.format[0],this.wrap(i.tags[0],n(i),o)},remove:function(e){var t,n,i,r,o;for(t=0,n=e.length;n>t;t++)(i=this.finder.findFormat(e[t]))&&("div"!=(o=s.name(i))||i.getAttribute("class")?((r=d.formatByName(o,this.format)).attr.style&&s.unstyle(i,r.attr.style),r.attr.className&&s.removeClass(i,r.attr.className)):s.unwrap(i))},toggle:function(e){var t=this,n=f.nodes(e);t.finder.isFormatted(n)?t.remove(n):t.apply(n)}}),v=i.extend({init:function(e,t){var n=this;n.format=e,n.values=t,n.finder=new g(e)},apply:function(e){var t,n,i,r,a,l,c,u=this.format,d=s.blockParents(e),h=u[0].tags[0];if(d.length)for(t=0,n=d.length;n>t;t++)"li"==(c=s.name(d[t]))?(i=d[t].parentNode,r=new o.ListFormatter(i.nodeName.toLowerCase(),h),(a=this.editor.createRange()).selectNode(d[t]),r.toggle(a)):h&&("td"==c||d[t].attributes.contentEditable)?new m(u,this.values).apply(d[t].childNodes):(l=s.changeTag(d[t],h),s.attr(l,u[0].attr));else new m(u,this.values).apply(e)},toggle:function(e){var t=f.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=f.textNodes(e)).length||(t=s.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),_=l.extend({init:function(e){e.formatter=e.formatter(),l.fn.init.call(this,e)}}),y=u.extend({init:function(e){u.fn.init.call(this,r(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}});r(o,{BlockFormatFinder:g,BlockFormatter:m,GreedyBlockFormatter:v,FormatCommand:_,BlockFormatTool:y}),t=["ul","ol","li"],p("justifyLeft",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{float:"left",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"left",listStylePosition:""}}}]),h("justifyLeft",new y({format:a.justifyLeft,template:new c({template:d.buttonTemplate,title:"Justify Left"})})),p("justifyCenter",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:t,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),h("justifyCenter",new y({format:a.justifyCenter,template:new c({template:d.buttonTemplate,title:"Justify Center"})})),p("justifyRight",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{float:"right",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),h("justifyRight",new y({format:a.justifyRight,template:new c({template:d.buttonTemplate,title:"Justify Right"})})),p("justifyFull",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:t,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),h("justifyFull",new y({format:a.justifyFull,template:new c({template:d.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.Dom,o=i.Command,a=i.Tool,s=i.BlockFormatter,l=r.normalize,c=i.RangeUtils,u=i.EditorUtils.registerTool,d=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},_insertMarker:function(e,t){var n,i=r.create(e,"a");return i.className="k-marker",t.insertNode(i),i.parentNode||((n=t.commonAncestorContainer).innerHTML="",n.appendChild(i)),l(i.parentNode),i},_moveFocus:function(e,t){if(r.isEmpty(t))e.setStartBefore(t);else{e.selectNodeContents(t);var n=c.textNodes(e)[0];if(!n){for(;t.childNodes.length&&!r.is(t.firstChild,"br");)t=t.firstChild;n=t}r.isEmpty(n)?e.setStartBefore(n):e.selectNodeContents(n)}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),n=r.parentOfType(e.startContainer,t),i=r.parentOfType(e.endContainer,t);return n&&!i||!n&&i},_blankAfter:function(e){for(;e&&(r.isMarker(e)||""===r.stripBom(e.nodeValue));)e=e.nextSibling;return!e},exec:function(){var e,t,n,o,a,u,d,h,p=this.getRange(),f=c.documentFromRange(p),g=i.emptyElementContent,m=this.shouldTrim(p);p.deleteContents(),a=this._insertMarker(f,p),u=r.closestEditableOfType(a,["li"]),d=r.closestEditableOfType(a,"h1,h2,h3,h4,h5,h6".split(",")),u?r.emptyNode(u)&&(o=r.create(f,"p"),u.nextSibling&&((h=p.cloneRange()).selectNode(u),c.split(h,u.parentNode)),r.insertAfter(o,u.parentNode),r.remove(1==u.parentNode.childNodes.length?u.parentNode:u),o.innerHTML=g,n=o):d&&this._blankAfter(a)&&(o=r.create(f,"p"),r.insertAfter(o,d),o.innerHTML=g,r.remove(a),n=o),n||(u||d||new s([{tags:["p"]}]).apply([a]),p.selectNode(a),e=r.parentOfType(a,[u?"li":d?r.name(d):"p"]),c.split(p,e,m),t=e.previousSibling,r.is(t,"li")&&t.firstChild&&!r.is(t.firstChild,"br")&&(t=t.firstChild),n=e.nextSibling,this.clean(t),this.clean(n,{links:!0}),r.is(n,"li")&&n.firstChild&&!r.is(n.firstChild,"br")&&(n=n.firstChild),r.remove(e),l(t)),l(n),this._moveFocus(p,n),p.collapse(!0),r.scrollTo(n),c.selectRange(p)},clean:function(t,n){var o,a=t;if(t.firstChild&&r.is(t.firstChild,"br")&&r.remove(t.firstChild),r.isDataNode(t)&&!t.nodeValue&&(t=t.parentNode),t){for(o=!1;t.firstChild&&1==t.firstChild.nodeType;)o=o||r.significantNodes(t.childNodes).length>1,t=t.firstChild;if(r.isEmpty(t)||!/^\s*$/.test(t.innerHTML)||o||(e(a).find(".k-br").remove(),t.innerHTML=i.emptyElementContent),n&&n.links)for(;t!=a;){if(r.is(t,"a")&&r.emptyNode(t)){r.unwrap(t);break}t=t.parentNode}}}}),h=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},exec:function(){var e,n=this.getRange(),i=r.create(c.documentFromRange(n),"br"),o=t.support.browser,a=o.msie&&11>o.version;n.deleteContents(),n.insertNode(i),l(i.parentNode),a||i.nextSibling&&!r.isWhitespace(i.nextSibling)||((e=i.cloneNode(!0)).className="k-br",r.insertAfter(e,i)),n.setStartAfter(i),n.collapse(!0),r.scrollTo(i.nextSibling||i),c.selectRange(n)}});n(i,{ParagraphCommand:d,NewLineCommand:h}),u("insertLineBreak",new a({key:13,shift:!0,command:h})),u("insertParagraph",new a({key:13,command:d}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,o=r.Dom,a=r.RangeUtils,s=r.EditorUtils,l=r.Command,c=r.ToolTemplate,u=r.FormatTool,d=r.BlockFormatFinder,h=a.textNodes,p=r.EditorUtils.registerTool,f=d.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];d.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t,n,i=[];for(n=0;e.length>n;n++)(t=this.findFormat(e[n]))&&o.name(t)==this.tag&&i.push(t);if(1>i.length)return!1;if(i.length!=e.length)return!1;for(n=0;i.length>n&&i[n].parentNode==t.parentNode;n++)if(i[n]!=t)return!1;return!0},findSuitable:function(e){var t=this.findFormat(e[0]);return t&&o.name(t)==this.tag?t:null}}),g=n.extend({init:function(e,t){var n=this;n.finder=new f(e),n.tag=e,n.unwrapTag=t},isList:function(e){var t=o.name(e);return"ul"==t||"ol"==t||"dl"==t},wrap:function(e,t){var n,i,r=o.create(e.ownerDocument,"li");for(n=0;t.length>n;n++)if(i=t[n],o.is(i,"li"))e.appendChild(i);else if(this.isList(i))for(;i.firstChild;)e.appendChild(i.firstChild);else if(o.is(i,"td")){for(;i.firstChild;)r.appendChild(i.firstChild);e.appendChild(r),i.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(i),o.isBlock(i)&&(e.appendChild(r),o.unwrap(i),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var n=0;t.length>n;n++)if(o.isAncestorOrSelf(e,t[n]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var n=e.nextSibling;if(n&&o.isBlock(n))return!1;if((n=e.previousSibling)&&o.isBlock(n))return!1}return this.containsAny(e,t)||o.isInline(e)||3==e.nodeType},_parentLists:function(t){var n=o.closestEditable(t);return e(t).parentsUntil(n,"ul,ol")},split:function(e){var t,n,i,r,s,l,c=h(e);if(c.length)for(t=o.parentOfType(c[0],["li"]),n=o.parentOfType(c[c.length-1],["li"]),e.setStartBefore(t),e.setEndAfter(n),r=0,s=c.length;s>r;r++)(l=this.finder.findFormat(c[r]))&&((i=this._parentLists(l)).length?a.split(e,i.last()[0],!0):a.split(e,l,!0))},merge:function(e,t){for(var n,i=t.previousSibling;i&&("k-marker"==i.className||3==i.nodeType&&o.isWhitespace(i));)i=i.previousSibling;if(i&&o.name(i)==e){for(;t.firstChild;)i.appendChild(t.firstChild);o.remove(t),t=i}for(n=t.nextSibling;n&&("k-marker"==n.className||3==n.nodeType&&o.isWhitespace(n));)n=n.nextSibling;if(n&&o.name(n)==e){for(;t.lastChild;)n.insertBefore(t.lastChild,n.firstChild);o.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|tr|td/.test(o.name(e))&&!e.attributes.contentEditable},applyOnSection:function(t,n){function i(){u.push(this)}var r,a,s,l=this.tag,c=o.closestSplittableParent(n),u=[],d=this.finder.findSuitable(n);for(d||(d=new f("ul"==l?"ol":"ul").findSuitable(n)),/table|tbody/.test(o.name(c))?r=e.map(n,function(e){return o.parentOfType(e,["td"])}):(r=o.significantChildNodes(c),e.grep(r,o.isBlock).length&&(r=e.grep(r,e.proxy(function(e){return this.containsAny(e,n)},this))),r.length||(r=n)),a=0;r.length>a;a++)s=r[a],(!d||!o.isAncestorOrSelf(d,s))&&this.suitable(s,n)&&(d&&this.isList(s)?(e.each(s.childNodes,i),o.remove(s)):u.push(s));u.length==r.length&&this.breakable(c)&&(u=[c]),d||(d=o.create(c.ownerDocument,l),o.insertBefore(d,u[0])),this.wrap(d,u),o.is(d,l)||o.changeTag(d,l),this.merge(l,d)},apply:function(e){var t,n,i,r=0,a=[];do{i=o.closestEditable(e[r],["td","body"]),t&&i==t?n.push(e[r]):(t&&a.push({section:t,nodes:n}),n=[e[r]],t=i),r++}while(e.length>r);for(a.push({section:t,nodes:n}),r=0;a.length>r;r++)this.applyOnSection(a[r].section,a[r].nodes)},unwrap:function(e){var t,n,i,r,a=e.ownerDocument.createDocumentFragment(),s=this.unwrapTag;for(n=e.firstChild;n;n=n.nextSibling){for(i=o.create(e.ownerDocument,s||"p");n.firstChild;)r=n.firstChild,o.isBlock(r)?(i.firstChild&&(a.appendChild(i),i=o.create(e.ownerDocument,s||"p")),a.appendChild(r)):i.appendChild(r);i.firstChild&&a.appendChild(i)}(t=this._parentLists(e))[0]?(o.insertAfter(a,t.last()[0]),t.last().remove()):o.insertAfter(a,e),o.remove(e)},remove:function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)(t=this.finder.findFormat(e[n]))&&this.unwrap(t)},toggle:function(e){var t,n=this,i=h(e),r=e.commonAncestorContainer;i.length||(e.selectNodeContents(r),(i=h(e)).length||(t=r.ownerDocument.createTextNode(""),e.startContainer.appendChild(t),i=[t],e.selectNode(t.parentNode))),n.finder.isFormatted(i)?(n.split(e),n.remove(i)):n.apply(i)}}),m=l.extend({init:function(e){e.formatter=new g(e.tag),l.fn.init.call(this,e)}}),v=u.extend({init:function(e){this.options=e,u.fn.init.call(this,i(e,{finder:new f(e.tag)}))},command:function(e){return new m(i(e,{tag:this.options.tag}))}});i(r,{ListFormatFinder:f,ListFormatter:g,ListCommand:m,ListTool:v}),p("insertUnorderedList",new v({tag:"ul",template:new c({template:s.buttonTemplate,title:"Insert unordered list"})})),p("insertOrderedList",new v({tag:"ol",template:new c({template:s.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=e.proxy,o=t.ui.editor,a=o.Dom,s=o.RangeUtils,l=o.EditorUtils,c=o.Command,u=o.Tool,d=o.ToolTemplate,h=o.InlineFormatter,p=o.InlineFormatFinder,f=s.textNodes,g=o.EditorUtils.registerTool,m=n.extend({findSuitable:function(e){return a.parentOfType(e,["a"])}}),v=n.extend({init:function(){this.finder=new m},apply:function(e,t){var n,i,r,o,l,c,u,d=f(e);if(t.innerHTML){for(i=s.documentFromRange(e),n=s.getMarkers(e),e.deleteContents(),o=a.create(i,"a",t),e.insertNode(o),l=o.parentNode,"a"==a.name(l)&&a.insertAfter(o,l),a.emptyNode(l)&&a.remove(l),c=o,u=0;n.length>u;u++)a.insertAfter(n[u],c),c=n[u];n.length&&(a.insertBefore(i.createTextNode("\ufeff"),n[1]),a.insertAfter(i.createTextNode("\ufeff"),n[1]),e.setStartBefore(n[0]),e.setEndAfter(n[n.length-1]))}else(r=new h([{tags:["a"]}],t)).finder=this.finder,r.apply(d)}}),_=c.extend({init:function(e){e.formatter={toggle:function(e){new h([{tags:["a"]}]).remove(f(e))}},this.options=e,c.fn.init.call(this,e)}}),y=c.extend({init:function(e){this.options=e,c.fn.init.call(this,e),this.formatter=new v,e.url?this.exec=function(){this.formatter.apply(e.range,{href:e.url,innerHTML:e.text||e.url,target:e.target})}:(this.attributes=null,this.async=!0)},_dialogTemplate:function(){return t.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var t,n,i,o,s=(this.getRange().collapsed,this.editor.options.messages);this._initialText="",this._range=this.lockRange(!0),n=(t=f(this._range)).length?this.formatter.finder.findSuitable(t[0]):null,i=t.length&&"img"==a.name(t[0]),o=this.createDialog(this._dialogTemplate(),{title:s.createLink,close:r(this._close,this),visible:!1}),n&&(this._range.selectNodeContents(n),t=f(this._range)),this._initialText=this.linkText(t),o.find(".k-dialog-insert").click(r(this._apply,this)).end().find(".k-dialog-close").click(r(this._close,this)).end().find(".k-edit-field input").keydown(r(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(n)).end().find("#k-editor-link-text").val(this._initialText).end().find("#k-editor-link-title").val(n?n.title:"").end().find("#k-editor-link-target").attr("checked",!!n&&"_blank"==n.target).end().find(".k-editor-link-text-row").toggle(!i),this._dialog=o.data("kendoWindow").center().open(),e("#k-editor-link-url",o).focus().select()},_keydown:function(e){var n=t.keys;e.keyCode==n.ENTER?this._apply(e):e.keyCode==n.ESC&&this._close(e)},_apply:function(t){var n,i,r,o=this._dialog.element,s=e("#k-editor-link-url",o).val(),l=e("#k-editor-link-text",o);s&&"http://"!=s&&(s.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(s)&&(s="mailto:"+s),this.attributes={href:s},(n=e("#k-editor-link-title",o).val())&&(this.attributes.title=n),l.is(":visible")&&((i=l.val())||this._initialText?i&&i!==this._initialText&&(this.attributes.innerHTML=a.stripBom(i)):this.attributes.innerHTML=s),r=e("#k-editor-link-target",o).is(":checked"),this.attributes.target=r?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(t),this.change&&this.change()},_close:function(e){e.preventDefault(),this._dialog.destroy(),a.windowFromDocument(s.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(e){return e?e.getAttribute("href",2):"http://"},linkText:function(e){var t,n="";for(t=0;e.length>t;t++)n+=e[t].nodeValue;return a.stripBom(n||"")},redo:function(){var e=this.lockRange(!0);this.formatter.apply(e,this.attributes),this.releaseRange(e)}}),b=u.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),u.fn.init.call(this,e.extend(t,{command:_}))},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});i(t.ui.editor,{LinkFormatFinder:m,LinkFormatter:v,UnlinkCommand:_,LinkCommand:y,UnlinkTool:b}),g("createLink",new u({key:"K",ctrl:!0,command:y,template:new d({template:l.buttonTemplate,title:"Create Link"})})),g("unlink",new b({key:"K",ctrl:!0,shift:!0,template:new d({template:l.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,u=r.Command,d=r.LinkFormatter,h=c.textNodes,p=n.keys,f="#k-editor-file-url",g="#k-editor-file-title",m=u.extend({init:function(e){var t=this;u.fn.init.call(t,e),t.formatter=new d,t.async=!0,t.attributes={}},insertFile:function(e,t){var n=this.attributes,i=c.documentFromRange(t);if(n.href&&"http://"!=n.href){if(!e)return(e=a.create(i,"a",{href:n.href})).innerHTML=n.innerHTML,t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(i.createTextNode("\ufeff"),e),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;a.attr(e,n)}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this.lockRange();this.formatter.apply(e,this.attributes),this.releaseRange(e)},exec:function(){function e(e){var n=r.element,i=n.find(f).val().replace(/ /g,"%20"),a=n.find(g).val();o.attributes={href:i,innerHTML:""!==a?a:i},u=o.insertFile(d,s),t(e),o.change&&o.change()}function t(e){e.preventDefault(),r.destroy(),a.windowFromDocument(c.documentFromRange(s)).focus(),u||o.releaseRange(s)}var r,o=this,s=o.lockRange(),l=h(s),u=!1,d=l.length?this.formatter.finder.findSuitable(l[0]):null,m=o.editor.options,v=m.messages,_=m.fileBrowser,y=!!(n.ui.FileBrowser&&_&&_.transport&&void 0!==_.transport.read),b={title:v.insertFile,visible:!1,resizable:y};b.close=t,y&&(b.width=750),r=this.createDialog(o._dialogTemplate(y),b).toggleClass("k-filebrowser-dialog",y).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(t).end().find(".k-edit-field input").keydown(function(n){n.keyCode==p.ENTER?e(n):n.keyCode==p.ESC&&t(n)}).end().find(f).val(d?d.getAttribute("href",2):"http://").end().find(g).val(d?d.title:"").end().data("kendoWindow"),y&&new n.ui.FileBrowser(r.element.find(".k-filebrowser"),i({},_,{change:function(){r.element.find(f).val(this.value())},apply:e})),r.center().open(),r.element.find(f).focus().select()}});n.ui.editor.FileCommand=m,s("insertFile",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,u=r.Command,d=n.keys,h="#k-editor-image-url",p="#k-editor-image-title",f="#k-editor-image-width",g="#k-editor-image-height",m=u.extend({init:function(e){var t=this;u.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var n,i=this.attributes,r=c.documentFromRange(t);if(i.src&&"http://"!=i.src){if(n=function(){setTimeout(function(){i.width||e.removeAttribute("width"),i.height||e.removeAttribute("height"),e.removeAttribute("complete")})},!e)return(e=a.create(r,"img",i)).onload=e.onerror=n,t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(r.createTextNode("\ufeff"),e),n(),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;e.onload=e.onerror=n,a.attr(e,i),n()}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();e.insertImage(c.image(t),t)||e.releaseRange(t)},exec:function(){function e(e){var n=r.element,i=parseInt(n.find(f).val(),10),a=parseInt(n.find(g).val(),10);o.attributes={src:n.find(h).val().replace(/ /g,"%20"),alt:n.find(p).val()},o.attributes.width=null,o.attributes.height=null,!isNaN(i)&&i>0&&(o.attributes.width=i),!isNaN(a)&&a>0&&(o.attributes.height=a),l=o.insertImage(u,s),t(e),o.change&&o.change()}function t(e){e.preventDefault(),r.destroy(),a.windowFromDocument(c.documentFromRange(s)).focus(),l||o.releaseRange(s)}var r,o=this,s=o.lockRange(),l=!1,u=c.image(s),m=u&&u.getAttribute("width")||"",v=u&&u.getAttribute("height")||"",_=o.editor.options,y=_.messages,b=_.imageBrowser,w=!!(n.ui.ImageBrowser&&b&&b.transport&&void 0!==b.transport.read),k={title:y.insertImage,visible:!1,resizable:w};k.close=t,w&&(k.width=750),r=this.createDialog(o._dialogTemplate(w),k).toggleClass("k-filebrowser-dialog",w).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(t).end().find(".k-edit-field input").keydown(function(n){n.keyCode==d.ENTER?e(n):n.keyCode==d.ESC&&t(n)}).end().find(h).val(u?u.getAttribute("src",2):"http://").end().find(p).val(u?u.alt:"").end().find(f).val(m).end().find(g).val(v).end().data("kendoWindow"),w&&new n.ui.ImageBrowser(r.element.find(".k-imagebrowser"),i({},b,{change:function(){r.element.find(h).val(this.value())},apply:e})),r.center().open(),r.element.find(h).focus().select()}});n.ui.editor.ImageCommand=m,s("insertImage",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.DropDownList,r=n.ui.editor.Dom,o=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),n.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",e.proxy(this._initSelectOverlay,this))),o.text(o.options.title),o.bind("open",function(){if(o.options.autoSize){var e,t=o.list;t.css({whiteSpace:"nowrap",width:"auto"}),(e=t.width())?e+=20:e=o._listWidth,t.css("width",e+n.support.scrollbar()),o._listWidth=e}})},options:{name:"SelectBox",index:-1},_initSelectOverlay:function(){var t,i,r,o,a=this,s=a.value(),l=this.dataSource.view(),c="",u=n.htmlEncode;for(i=0;l.length>i;i++)c+="<option value='"+u((t=l[i]).value)+"'",t.value==s&&(c+=" selected"),c+=">"+u(t.text)+"</option>";r=e("<select class='k-select-overlay'>"+c+"</select>"),(o=e(this.element).closest(".k-widget")).next(".k-select-overlay").remove(),r.insertAfter(o),r.on("change",function(){a.value(this.value),a.trigger("change")})},value:function(e){var n=this,r=i.fn.value.call(n,e);return e===t?r:(i.fn.value.call(n)||n.text(n.options.title),t)},decorate:function(t){var n,i,o,a,s=this.dataSource,l=s.data();for(t&&this.list.css("background-color",r.getEffectiveBackground(e(t))),n=0;l.length>n;n++)i=l[n].tag||"span",o=l[n].className,a=(a=r.inlineStyle(t,i,{className:o})).replace(/"/g,"'"),l[n].style=a+";display:inline-block";s.trigger("change")}});n.ui.plugin(o),n.ui.editor.SelectBox=o}(window.kendo.jQuery),function(e,t){function n(n,i){var r="rtl"==e(n).css("direction")?"Right":"Left",o="td"!=s.name(n)?"margin"+r:"padding"+r;return i===t?n.style[o]||0:(i>0?n.style[o]=i+"px":(n.style[o]="",n.style.cssText||n.removeAttribute("style")),t)}var i=window.kendo,r=i.Class,o=e.extend,a=i.ui.editor,s=a.Dom,l=a.EditorUtils,c=l.registerTool,u=a.Command,d=a.Tool,h=a.ToolTemplate,p=a.RangeUtils,f=s.blockElements,g=a.BlockFormatFinder,m=a.BlockFormatter,v=r.extend({init:function(){this.finder=new g([{tags:s.blockElements}])},apply:function(t){var i,r,o,a,l,c,u,d,h=this.finder.findSuitable(t),p=[];if(h.length){for(i=0,r=h.length;r>i;i++)s.is(h[i],"li")?e(h[i]).index()?e.inArray(h[i].parentNode,p)<0&&p.push(h[i]):p.push(h[i].parentNode):p.push(h[i]);for(;p.length;)if(o=p.shift(),s.is(o,"li"))if(a=o.parentNode,c=(l=e(o).prev("li")).find("ul,ol").last(),(u=e(o).children("ul,ol")[0])&&l[0])c[0]?(c.append(o),c.append(e(u).children()),s.remove(u)):(l.append(u),u.insertBefore(o,u.firstChild));else for((u=l.children("ul,ol")[0])||(u=s.create(o.ownerDocument,s.name(a)),l.append(u));o&&o.parentNode==a;)u.appendChild(o),o=p.shift();else for(n(o,parseInt(n(o),10)+30),d=0;p.length>d;d++)e.contains(o,p[d])&&p.splice(d,1)}else new m([{tags:["p"]}],{style:{marginLeft:30}}).apply(t)},remove:function(t){var i,r,o,a,s,l,c,u=this.finder.findSuitable(t);for(r=0,o=u.length;o>r;r++){if((c=e(u[r])).is("li")){if((s=(a=c.parent()).parent()).is("li,ul,ol")&&!n(a[0])){if(i&&e.contains(i,s[0]))continue;(l=c.nextAll("li")).length&&e(a[0].cloneNode(!1)).appendTo(c).append(l),s.is("li")?c.insertAfter(s):c.appendTo(s),a.children("li").length||a.remove();continue}if(i==a[0])continue;i=a[0]}else i=u[r];n(i,parseInt(n(i),10)-30)}}}),_=u.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(p.nodes(e))}},u.fn.init.call(this,e)}}),y=u.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(p.nodes(e))}},u.fn.init.call(this,e)}}),b=d.extend({init:function(e){d.fn.init.call(this,e),this.finder=new g([{tags:f}])},initialize:function(e,t){d.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(i,r){var o,a,l,c,u=this.finder.findSuitable(r);for(l=0,c=u.length;c>l;l++)if((o=n(u[l]))||(a=e(u[l]).parents("ul,ol").length,o=s.is(u[l],"li")&&(a>1||n(u[l].parentNode))||s.ofType(u[l],["ul","ol"])&&a>0),o)return i.removeClass("k-state-disabled"),t;i.addClass("k-state-disabled").removeClass("k-state-hover")}});o(a,{IndentFormatter:v,IndentCommand:_,OutdentCommand:y,OutdentTool:b}),c("indent",new d({command:_,template:new h({template:l.buttonTemplate,title:"Indent"})})),c("outdent",new b({command:y,template:new h({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.EditorUtils,o=i.Command,a=i.Tool,s=i.ToolTemplate,l=o.extend({init:function(e){var t=this;t.options=e,o.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function n(e){e.preventDefault(),a.data("kendoWindow").destroy(),r.focus()}var i=this,r=i.editor,o=r.options.messages,a=e(t.template(l.template)(o)).appendTo(document.body),s=l.indent(r.value()),c=".k-editor-textarea";this.createDialog(a,{title:o.viewHtml,close:n,visible:!1}).find(c).val(s).end().find(".k-dialog-update").click(function(e){r.value(a.find(c).val()),n(e),i.change&&i.change(),r.trigger("change")}).end().find(".k-dialog-close").click(n).end().data("kendoWindow").center().open(),a.find(c).focus()}});n(l,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),t.ui.editor.ViewHtmlCommand=l,i.EditorUtils.registerTool("viewHtml",new a({command:l,template:new s({template:r.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.editor,i=n.Tool,r=n.ToolTemplate,o=n.DelayedExecutionTool,a=n.Command,s=n.Dom,l=n.EditorUtils,c=n.RangeUtils,u=l.registerTool,d=o.extend({init:function(e){var n=this;i.fn.init.call(n,t.deepExtend({},n.options,e)),n.type="kendoSelectBox",n.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t,n=e.value;return n?e.tag||e.className?e:(0===(t=n.indexOf("."))?e.className=n.substring(1):-1==t?e.tag=n:(e.tag=n.substring(0,t),e.className=n.substring(t+1)),e):e},command:function(t){var i=t.value;return i=this.toFormattingItem(i),new n.FormatCommand({range:t.range,formatter:function(){var t=(i.tag||i.context||"span").split(","),r=[{tags:t,attr:{className:i.className||""}}];return e.inArray(t[0],s.inlineElements)>=0?new n.GreedyInlineFormatter(r):new n.GreedyBlockFormatter(r)}})},initialize:function(e,n){var r=n.editor,o=this.options,a=o.name,s=this;e.width(o.width),e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o.items||r.options[a],title:r.options.messages[a],autoSize:!0,change:function(){var e=this.dataItem();e&&i.exec(r,a,e.toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;t.length>e;e++)t[e]=s.toFormattingItem(t[e])},highlightFirst:!1,template:t.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}),e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(t,n){var i,r,o,a;for(i=0;t.length>i;i++)if(o=((r=t[i]).tag||r.context||"")+(r.className?"."+r.className:""),e(n[0]).closest(o)[0]){if(1==n.length)return r.value;for(a=1;n.length>a&&e(n[a]).closest(o)[0];a++)if(a==n.length-1)return r.value}return""},update:function(t,n){var i,r,a,l,c,u=e(t).data(this.type);if(u&&(r=(i=u.dataSource).data(),(c=s.commonAncestor.apply(null,n))==s.closestEditable(c)||this._ancestor!=c)){for(this._ancestor=c,a=0;r.length>a;a++)l=r[a].context,r[a].visible=!l||!!e(c).closest(l).length;i.filter([{field:"visible",operator:"eq",value:!0}]),o.fn.update.call(this,t,n),u.value(this.getFormattingValue(i.view(),n)),u.wrapper.toggleClass("k-state-disabled",!i.view().length)}},destroy:function(){this._ancestor=null}}),h=a.extend({exec:function(){var t=new n.ListFormatter("ul"),i=this.lockRange(!0),r=this.options.remove||"strong,em,span,sup,sub,del,b,i,u,font".split(",");c.wrapSelectedElements(i),new n.RangeIterator(i).traverse(function n(i){var o,a,l,c;if(i&&!s.isMarker(i)){if("ul"==(o=s.name(i))||"ol"==o)for(a=i.previousSibling,l=i.nextSibling,t.unwrap(i);a&&a!=l;a=a.nextSibling)n(a);else if("blockquote"==o)s.changeTag(i,"p");else if(1==i.nodeType&&!s.insignificant(i)){for(c=i.childNodes.length-1;c>=0;c--)n(i.childNodes[c]);i.removeAttribute("style"),i.removeAttribute("class")}e.inArray(o,r)>-1&&s.unwrap(i)}}),this.releaseRange(i)}});e.extend(n,{FormattingTool:d,CleanFormatCommand:h}),u("formatting",new d({template:new r({template:l.dropDownListTemplate,title:"Format"})})),u("cleanFormatting",new i({command:h,template:new r({template:l.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery),function(e){var t,n=window.kendo,i=n.ui,r=i.editor,o=i.Widget,a=e.extend,s=e.proxy,l=n.keys,c=".kendoEditor",u=n.ui.editor.EditorUtils,d=n.ui.editor.ToolTemplate,h="overflowAnchor",p=".k-tool-group:visible a.k-tool:not(.k-state-disabled),.k-tool.k-overflow-anchor,.k-tool-group:visible .k-widget.k-colorpicker,.k-tool-group:visible .k-selectbox,.k-tool-group:visible .k-dropdown,.k-tool-group:visible .k-combobox .k-input",f=n.ui.editor.Tool.extend({initialize:function(t,n){t.attr({unselectable:"on"});var i=n.editor.toolbar;t.on("click",e.proxy(function(){this.overflowPopup.toggle()},i))},options:{name:h},command:e.noop,update:e.noop,destroy:e.noop});u.registerTool(h,new f({key:"",ctrl:!0,template:new d({template:u.overflowAnchorTemplate})})),t=o.extend({init:function(e,t){var i=this;t=a({},t,{name:"EditorToolbar"}),o.fn.init.call(i,e,t),t.popup&&i._initPopup(),t.resizable&&t.resizable.toolbar&&(i._resizeHandler=n.onResize(function(){i.resize()}),i.element.addClass("k-toolbar-resizable"))},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting","print","pdf"],fonts:["fontName","fontSize"],colors:["foreColor","backColor"]},overflowFlaseTools:["formatting","fontName","fontSize","foreColor","backColor","insertHtml"],_initPopup:function(){this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(t){e(t.target).is(".k-icon")||t.preventDefault()}).data("kendoWindow")},_toggleOverflowStyles:function(e,t){e.find("li").toggleClass("k-item k-state-default",t).find(".k-tool:not(.k-state-disabled),.k-overflow-button").toggleClass("k-overflow-button k-button",t)},_initOverflowPopup:function(t){var n=this;n.overflowPopup=e("<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>").appendTo("body").kendoPopup({anchor:t,origin:"bottom right",position:"top right",copyAnchorStyles:!1,open:function(e){this.element.is(":empty")&&e.preventDefault(),n._toggleOverflowStyles(this.element,!0)},activate:s(n.focusOverflowPopup,n)}).data("kendoPopup")},items:function(){var e,t,n=this.options.resizable&&this.options.resizable.toolbar;return t=this.element.children().find("> *, select"),n&&(e=this.overflowPopup,t=t.add(e.element.children().find("> *"))),t},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(e){var t,n=this.tools;for(t in n)if(t.toLowerCase()==e)return n[t]},toolGroupFor:function(t){var n,i=this.groups;if(this.isCustomTool(t))return"custom";for(n in i)if(e.inArray(t,i[n])>=0)return n},bindTo:function(t){var n=this,i=n.window;n._editor&&n._editor.unbind("select",s(n.resize,n)),n._editor=t,n.options.resizable&&n.options.resizable.toolbar&&t.options.tools.push(h),n.tools=n.expandTools(t.options.tools),n.render(),n.element.find(".k-combobox .k-input").keydown(function(t){var n=e(this).closest(".k-combobox").data("kendoComboBox"),i=t.keyCode;i==l.RIGHT||i==l.LEFT?n.close():i==l.DOWN&&(n.dropDown.isOpened()||(t.stopImmediatePropagation(),n.open()))}),n._attachEvents(),n.items().each(function(){var i,r=n._toolName(this),o="more"!==r?n.tools[r]:n.tools.overflowAnchor,a=o&&o.options,s=t.options.messages,l=a&&a.tooltip||s[r],c=e(this);o&&o.initialize&&(("fontSize"==r||"fontName"==r)&&(i=s[r+"Inherit"],c.find("input").val(i).end().find("span.k-input").text(i).end()),o.initialize(c,{title:n._appendShortcutSequence(l,o),editor:n._editor}),c.closest(".k-widget",n.element).addClass("k-editor-widget"),c.closest(".k-colorpicker",n.element).next(".k-colorpicker").addClass("k-editor-widget"))}),t.bind("select",s(n.resize,n)),n.update(),i&&i.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,n,i=this,r=i.window,o=i.options.editor;r&&(e=r.wrapper,t=o.element,e.is(":visible")&&i.window.options.visible||(e[0].style.width||e.width(t.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)),r._moved||(n=t.offset(),e.css({top:Math.max(0,parseInt(n.top,10)-e.outerHeight()-parseInt(i.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(n.left,10))})),r.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var e="tabIndex",t=this.element,n=this._editor.element.attr(e);t.attr(e,n||0).focus().find(p).first().focus(),n||0===n||t.removeAttr(e)},focusOverflowPopup:function(){var e="tabIndex",t=this.overflowPopup.element,n=this._editor.element.attr(e);t.closest(".k-animation-container").addClass("k-overflow-wrapper"),t.attr(e,n||0).focus().find(p).first().focus(),n||0===n||t.removeAttr(e)},_appendShortcutSequence:function(e,t){if(!t.key)return e;var n=e+" (";return t.ctrl&&(n+="Ctrl + "),t.shift&&(n+="Shift + "),t.alt&&(n+="Alt + "),n+(t.key+")")},_nativeTools:["insertLineBreak","insertParagraph","redo","undo"],tools:{},isCustomTool:function(e){return!(e in n.ui.Editor.defaultTools)},expandTools:function(t){var i,o,s,l,c=this._nativeTools,u=n.deepExtend({},n.ui.Editor.defaultTools),d={};for(o=0;t.length>o;o++)l=(i=t[o]).name,e.isPlainObject(i)?l&&u[l]?(d[l]=a({},u[l]),a(d[l].options,i)):((s=a({cssClass:"k-i-custom",type:"button",title:""},i)).name||(s.name="custom"),s.cssClass="k-"+("custom"==s.name?"i-custom":s.name),s.template||"button"!=s.type||(s.template=r.EditorUtils.buttonTemplate,s.title=s.title||s.tooltip),d[l]={options:s}):u[i]&&(d[i]=u[i]);for(o=0;c.length>o;o++)d[c[o]]||(d[c[o]]=u[c[o]]);return d},render:function(){function t(t){var i;return t.getHtml?i=t.getHtml():(e.isFunction(t)||(t=n.template(t)),i=t(o)),e.trim(i)}function i(){p.children().length&&(k&&(p.data("position",w),w++),p.appendTo(_))}function r(t){t!==h?(p=e("<li class='k-tool-group' role='presentation' />")).data("overflow",-1===e.inArray(t,x)):p=e("<li class='k-overflow-tools' />")}var o,a,l,c,u,d,p,f,g=this,m=g.tools,v=g._editor.element,_=g.element.empty(),y=g._editor.options.tools,b=n.support.browser,w=0,k=g.options.resizable&&g.options.resizable.toolbar,x=this.overflowFlaseTools;for(_.empty(),y.length&&(c=y[0].name||y[0]),r(c),f=0;y.length>f;f++)c=y[f].name||y[f],!(o=m[c]&&m[c].options)&&e.isPlainObject(c)&&(o=c),a=o&&o.template,"break"==c&&(i(),e("<li class='k-row-break' />").appendTo(g.element),r(c)),a&&((u!=(d=g.toolGroupFor(c))||c==h)&&(i(),r(c),u=d),a=t(a),l=e(a).appendTo(p),"custom"==d&&(i(),r(c)),o.exec&&l.hasClass("k-tool")&&l.click(s(o.exec,v[0])));i(),e(g.element).children(":has(> .k-tool)").addClass("k-button-group"),g.options.popup&&b.msie&&9>b.version&&g.window.wrapper.find("*").attr("unselectable","on"),g.updateGroups(),k&&g._initOverflowPopup(g.element.find(".k-overflow-anchor")),g.angular("compile",function(){return{elements:g.element}})},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return!e(this).hasClass("k-state-disabled")}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var n=e(this).data("kendoSelectBox");n&&n.decorate(t)})},destroy:function(){o.fn.destroy.call(this);var e,t=this.tools;for(e in t)t[e].destroy&&t[e].destroy();this.window&&this.window.destroy(),this._resizeHandler&&n.unbindResize(this._resizeHandler),this.overflowPopup&&this.overflowPopup.destroy()},_attachEvents:function(){var t=this,n="[role=button].k-tool",i=n+":not(.k-state-disabled)",r=t.overflowPopup?t.overflowPopup.element:e([]);t.element.add(r).off(c).on("mouseenter"+c,i,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+c,i,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+c,n,function(e){e.preventDefault()}).on("keydown"+c,p,function(n){function i(e,t,n){var i=t.find(p),r=i.index(a)+e;return n&&(r=Math.max(0,Math.min(i.length-1,r))),i[r]}var r,o,a=this,s=t.options.resizable&&t.options.resizable.toolbar,c=n.keyCode;c==l.RIGHT||c==l.LEFT?e(a).hasClass(".k-dropdown")||(r=i(c==l.RIGHT?1:-1,t.element,!0)):!s||c!=l.UP&&c!=l.DOWN?c==l.ESC?(t.overflowPopup.visible()&&t.overflowPopup.close(),r=t._editor):c!=l.TAB||n.ctrlKey||n.altKey||(o=s&&e(a.parentElement).hasClass("k-overflow-tool-group")?t.overflowPopup.element:t.element,n.shiftKey?r=i(-1,o):(r=i(1,o))||(r=t._editor)):r=i(c==l.DOWN?1:-1,t.overflowPopup.element,!0),r&&(n.preventDefault(),r.focus())}).on("click"+c,i,function(n){var i=e(this);n.preventDefault(),n.stopPropagation(),i.removeClass("k-state-hover"),i.is("[data-popup]")||t._editor.exec(t._toolName(this))}).on("click"+c,"[role=button].k-tool.k-state-disabled",function(e){e.preventDefault()})},_toolName:function(t){var n,i;if(t)return n=t.className,/k-tool\b/i.test(n)&&(n=t.firstChild.className),(i=e.grep(n.split(" "),function(e){return!/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)}))[0]?i[0].substring(i[0].lastIndexOf("-")+1):"custom"},refreshTools:function(){var t=this,i=t._editor.getRange(),r=n.ui.editor.RangeUtils.textNodes(i);r.length||(r=[i.startContainer]),t.items().each(function(){var n=t.tools[t._toolName(this)];n&&n.update&&n.update(e(this),r)}),this.update()},update:function(){this.updateGroups()},_resize:function(e){var t=e.width,n=this.options.resizable&&this.options.resizable.toolbar,i=this.overflowPopup;this.refreshTools(),n&&(i.visible()&&i.close(!0),this._refreshWidths(),this._shrink(t),this._stretch(t),this._toggleOverflowStyles(this.element,!1),this._toggleOverflowStyles(this.overflowPopup.element,!0),this.element.children("li.k-overflow-tools").css("visibility",i.element.is(":empty")?"hidden":"visible"))},_refreshWidths:function(){this.element.children("li").each(function(t,n){var i=e(n);i.data("outerWidth",i.outerWidth(!0))})},_shrink:function(e){var t,n,i;if(e<this._groupsWidth())for(i=(n=this._visibleGroups().filter(":not(.k-overflow-tools)")).length-1;i>=0&&(t=n.eq(i),!(e>this._groupsWidth()));i--)this._hideGroup(t)},_stretch:function(e){var t,n,i;if(e>this._groupsWidth())for(n=this._hiddenGroups(),i=0;n.length>i&&(t=n.eq(i),!(e<this._groupsWidth())&&this._showGroup(t,e));i++);},_hiddenGroups:function(){var t=this.overflowPopup,n=this.element.children("li.k-tool-group").filter(":hidden");return(n=n.add(t.element.children("li"))).sort(function(t,n){return e(t).data("position")>e(n).data("position")?1:-1}),n},_visibleGroups:function(){return this.element.children("li.k-tool-group, li.k-overflow-tools").filter(":visible")},_groupsWidth:function(){var t=0;return this._visibleGroups().each(function(){t+=e(this).data("outerWidth")}),Math.ceil(t)},_hideGroup:function(e){if(e.data("overflow")){var t=this.overflowPopup;e.detach().prependTo(t.element).addClass("k-overflow-tool-group")}else e.hide()},_showGroup:function(t,n){var i,r;return!!(t.length&&n>this._groupsWidth()+t.data("outerWidth"))&&(t.hasClass("k-overflow-tool-group")?(0===(i=t.data("position"))?t.detach().prependTo(this.element):(r=this.element.children().filter(function(t,n){return e(n).data("position")===i-1}),t.detach().insertAfter(r)),t.removeClass("k-overflow-tool-group")):t.show(),!0)}}),e.extend(r,{Toolbar:t})}(window.jQuery),function(e){var t=window.kendo,n=e.extend,i=e.proxy,r=t.ui.editor,o=r.Dom,a=r.EditorUtils,s=r.RangeUtils,l=r.Command,c=".kendoEditor",u="k-state-active",d="k-state-selected",h=r.Tool,p=r.ToolTemplate,f=r.InsertHtmlCommand,g=r.BlockFormatFinder,m=r.EditorUtils.registerTool,v="<td>"+r.emptyElementContent+"</td>",_=new g([{tags:["table"]}]),y=f.extend({_tableHtml:function(e,t){return e=e||1,t=t||1,"<table class='k-table' data-last>"+Array(e+1).join("<tr>"+Array(t+1).join(v)+"</tr>")+"</table>"},postProcess:function(t,n){var i=e("table[data-last]",t.document).removeAttr("data-last");n.setStart(i.find("td")[0],0),n.collapse(!0),t.selectRange(n)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),e.postProcess=this.postProcess,f.fn.exec.call(this)}}),b=h.extend({initialize:function(t,n){h.fn.initialize.call(this,t,n);var r=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:i(this._open,this),activate:i(this._activate,this),close:i(this._close,this)}).data("kendoPopup");t.click(i(this._toggle,this)).keydown(i(this._keydown,this)),this._editor=n.editor,this._popup=r},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass(u)},_close:function(){this._popup.options.anchor.removeClass(u)},_keydown:function(e){var n=t.keys,i=e.keyCode;i==n.DOWN&&e.altKey?this._popup.open():i==n.ESC&&this._popup.close()},_toggle:function(t){e(t.target).closest(".k-tool").hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){var t=this.popup();t.wrapper&&"block"==t.wrapper.css("display")&&t.close(),e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),w=b.extend({init:function(t){this.cols=8,this.rows=6,b.fn.init.call(this,e.extend(t,{command:y,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function n(t){var n=e(window);return{row:Math.floor((t.clientY+n.scrollTop()-d.top)/r)+1,col:Math.floor((t.clientX+n.scrollLeft()-d.left)/i)+1}}var i,r,o=this,a=o._popup.element,s=a.find(".k-ct-cell"),l=s.eq(0),u=s.eq(s.length-1),d=t.getOffset(l),h=t.getOffset(u),p=o.cols,f=o.rows;a.find("*").addBack().attr("unselectable","on"),h.left+=u[0].offsetWidth,h.top+=u[0].offsetHeight,i=(h.left-d.left)/p,r=(h.top-d.top)/f,a.on("mousemove"+c,function(e){o._setTableSize(n(e))}).on("mouseleave"+c,function(){o._setTableSize()}).on("mouseup"+c,function(e){o._exec(n(e))})},_valid:function(e){return e&&e.row>0&&e.col>0&&this.rows>=e.row&&this.cols>=e.col},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(n){var i=this._popup.element,r=i.find(".k-status"),o=i.find(".k-ct-cell"),a=this.cols,s=this._editor.options.messages;this._valid(n)?(r.text(t.format(s.createTableHint,n.row,n.col)),o.each(function(t){e(this).toggleClass(d,n.col>t%a&&n.row>t/a)})):(r.text(s.dialogCancel),o.removeClass(d))},_keydown:function(e){var n,i,r,o,a,s,l,c;b.fn._keydown.call(this,e),this._popup.visible()&&(n=t.keys,i=e.keyCode,r=this._popup.element.find(".k-ct-cell"),o=Math.max(r.filter(".k-state-selected").last().index(),0),a=Math.floor(o/this.cols),s=o%this.cols,l=!1,i!=n.DOWN||e.altKey?i==n.UP?(l=!0,a--):i==n.RIGHT?(l=!0,s++):i==n.LEFT&&(l=!0,s--):(l=!0,a++),c={row:Math.max(1,Math.min(this.rows,a+1)),col:Math.max(1,Math.min(this.cols,s+1))},i==n.ENTER?this._exec(c):this._setTableSize(c),l&&(e.preventDefault(),e.stopImmediatePropagation()))},_open:function(){var e=this._editor.options.messages;b.fn._open.call(this),this.popup().element.find(".k-status").text(e.dialogCancel).end().find(".k-ct-cell").removeClass(d)},_close:function(){b.fn._close.call(this),this.popup().element.off(c)},update:function(e,t){var n;b.fn.update.call(this,e),n=_.isFormatted(t),e.toggleClass("k-state-disabled",n)}}),k=l.extend({exec:function(){for(var e,t,n,i=this.lockRange(!0),a=i.endContainer;"td"!=o.name(a);)a=a.parentNode;for((e=a.parentNode).children.length,t=e.cloneNode(!0),n=0;e.cells.length>n;n++)t.cells[n].innerHTML=r.emptyElementContent;"before"==this.options.position?o.insertBefore(t,e):o.insertAfter(t,e),this.releaseRange(i)}}),x=l.extend({exec:function(){var e,t,n,i,a=this.lockRange(!0),s=o.closest(a.endContainer,"td"),l=o.closest(s,"table").rows,c=this.options.position;for(e=o.findNodeIndex(s,!0),t=0;l.length>t;t++)(i=(n=l[t].cells[e]).cloneNode()).innerHTML=r.emptyElementContent,"before"==c?o.insertBefore(i,n):o.insertAfter(i,n);this.releaseRange(a)}}),C=l.extend({exec:function(){var t,n,i,r=this.lockRange(),a=s.mapAll(r,function(t){return e(t).closest("tr")[0]}),l=o.closest(a[0],"table");if(a.length>=l.rows.length)(!(t=o.next(l))||o.insignificant(t))&&(t=o.prev(l)),o.remove(l);else for(n=0;a.length>n;n++)i=a[n],o.removeTextSiblings(i),t=(t=o.next(i)||o.prev(i)).cells[0],o.remove(i);t&&(r.setStart(t,0),r.collapse(!0),this.editor.selectRange(r))}}),T=l.extend({exec:function(){var e,t,n=this.lockRange(),i=o.closest(n.endContainer,"td"),r=o.closest(i,"table"),a=r.rows,s=o.findNodeIndex(i,!0);if(1==a[0].cells.length)(!(e=o.next(r))||o.insignificant(e))&&(e=o.prev(r)),o.remove(r);else for(o.removeTextSiblings(i),e=o.next(i)||o.prev(i),t=0;a.length>t;t++)o.remove(a[t].cells[s]);e&&(n.setStart(e,0),n.collapse(!0),this.editor.selectRange(n))}}),S=h.extend({command:function(e){return"delete"==(e=n(e,this.options)).action?"row"==e.type?new C(e):new T(e):"row"==e.type?new k(e):new x(e)},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var n=!_.isFormatted(t);e.toggleClass("k-state-disabled",n)}});n(t.ui.editor,{PopupTool:b,TableCommand:y,InsertTableTool:w,TableModificationTool:S,InsertRowCommand:k,InsertColumnCommand:x,DeleteRowCommand:C,DeleteColumnCommand:T}),m("createTable",new w({template:new p({template:a.buttonTemplate,popup:!0,title:"Create table"})})),m("addColumnLeft",new S({type:"column",position:"before",template:new p({template:a.buttonTemplate,title:"Add column on the left"})})),m("addColumnRight",new S({type:"column",template:new p({template:a.buttonTemplate,title:"Add column on the right"})})),m("addRowAbove",new S({type:"row",position:"before",template:new p({template:a.buttonTemplate,title:"Add row above"})})),m("addRowBelow",new S({type:"row",template:new p({template:a.buttonTemplate,title:"Add row below"})})),m("deleteRow",new S({type:"row",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete row"})})),m("deleteColumn",new S({type:"column",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.caret,r=n.keys,o=n.ui,a=o.Widget,s=".kendoMaskedTextBox",l=e.proxy,c=(n.support.propertyChangeEvent?"propertychange":"input")+s,u="k-state-disabled",d="disabled",h="readonly",p="change",f=a.extend({init:function(t,r){var o,l=this;a.fn.init.call(l,t,r),l._rules=e.extend({},l.rules,l.options.rules),t=l.element,o=t[0],l.wrapper=t,l._tokenize(),l._form(),l.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+s,function(){var e=o.value;e?l._togglePrompt(!0):o.value=l._old=l._emptyMask,l._oldValue=e,l._timeoutId=setTimeout(function(){i(t,0,e?l._maskLength:0)})}).on("focusout"+s,function(){var e=t.val();clearTimeout(l._timeoutId),o.value=l._old="",e!==l._emptyMask&&(o.value=l._old=e),l._change(),l._togglePrompt()}),t.is("[disabled]")||e(l.element).parents("fieldset").is(":disabled")?l.enable(!1):l.readonly(t.is("[readonly]")),l.value(l.options.value||t.val()),n.notify(l)},options:{name:"MaskedTextBox",clearPromptChar:!1,unmaskOnPost:!1,promptChar:"_",culture:"",rules:{},value:"",mask:""},events:[p],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(t){var n=this;a.fn.setOptions.call(n,t),n._rules=e.extend({},n.rules,n.options.rules),n._tokenize(),this._unbindInput(),this._bindInput(),n.value(n.element.val())},destroy:function(){var e=this;e.element.off(s),e._formElement&&(e._formElement.off("reset",e._resetHandler),e._formElement.off("submit",e._submitHandler)),a.fn.destroy.call(e)},raw:function(){return this._unmask(this.element.val(),0).replace(RegExp(this.options.promptChar,"g"),"")},value:function(e){var i=this.element,r=this._emptyMask;return e===t?this.element.val():(null===e&&(e=""),r?(e=this._unmask(e+""),i.val(e?r:""),this._mask(0,this._maskLength,e),e=i.val(),this._oldValue=e,n._activeElement()!==i&&(e===r?i.val(""):this._togglePrompt()),t):(i.val(e),t))},_togglePrompt:function(e){var t=this.element[0],n=t.value;this.options.clearPromptChar&&(n=e?this._oldValue:n.replace(RegExp(this.options.promptChar,"g")," "),t.value=this._old=n)},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},_bindInput:function(){var e=this;e._maskLength&&e.element.on("keydown"+s,l(e._keydown,e)).on("keypress"+s,l(e._keypress,e)).on("paste"+s,l(e._paste,e)).on(c,l(e._propertyChange,e))},_unbindInput:function(){this.element.off("keydown"+s).off("keypress"+s).off("paste"+s).off(c)},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly;t._unbindInput(),r||i?n.attr(d,i).attr(h,r).toggleClass(u,i):(n.removeAttr(d).removeAttr(h).removeClass(u),t._bindInput())},_change:function(){var e=this,t=e.value();t!==e._oldValue&&(e._oldValue=t,e.trigger(p),e.element.trigger(p))},_propertyChange:function(){var e,t,r=this,o=r.element[0],a=o.value;n._activeElement()===o&&(a===r._old||r._pasting||(t=i(o)[0],e=r._unmask(a.substring(t),t),o.value=r._old=a.substring(0,t)+r._emptyMask.substring(t),r._mask(t,t,e),i(o,t)))},_paste:function(e){var t=this,n=e.target,r=i(n),o=r[0],a=r[1],s=t._unmask(n.value.substring(a),a);t._pasting=!0,setTimeout(function(){var e=n.value,r=e.substring(o,i(n)[0]);n.value=t._old=e.substring(0,o)+t._emptyMask.substring(o),t._mask(o,o,r),o=i(n)[0],t._mask(o,o,s),i(n,o),t._pasting=!1})},_form:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._submitHandler=function(){t.element[0].value=t._old=t.raw()},t.options.unmaskOnPost&&r.on("submit",t._submitHandler),t._formElement=r.on("reset",t._resetHandler))},_keydown:function(e){var n,o=e.keyCode,a=this.element[0],s=i(a),l=s[0],c=s[1],u=o===r.BACKSPACE;u||o===r.DELETE?(l===c&&(u?l-=1:c+=1,n=this._find(l,u)),n!==t&&n!==l?(u&&(n+=1),i(a,n)):l>-1&&this._mask(l,c,"",u),e.preventDefault()):o===r.ENTER&&this._change()},_keypress:function(e){var t,n;0===e.which||e.metaKey||e.ctrlKey||e.keyCode===r.ENTER||(t=String.fromCharCode(e.which),n=i(this.element),this._mask(n[0],n[1],t),(e.keyCode===r.BACKSPACE||t)&&e.preventDefault())},_find:function(e,t){var n=this.element.val()||this._emptyMask,i=1;for(!0===t&&(i=-1);e>-1||this._maskLength>=e;){if(n.charAt(e)!==this.tokens[e])return e;e+=i}return-1},_mask:function(e,r,o,a){var s,l,c,u,d=this.element[0],h=d.value||this._emptyMask,p=this.options.promptChar,f=0;for((e=this._find(e,a))>r&&(r=e),l=this._unmask(h.substring(r),r),s=(o=this._unmask(o,e)).length,o&&(l=l.replace(RegExp("^_{0,"+s+"}"),"")),o+=l,h=h.split(""),c=o.charAt(f);this._maskLength>e;)h[e]=c||p,c=o.charAt(++f),u===t&&f>s&&(u=e),e=this._find(e+1);d.value=this._old=h.join(""),n._activeElement()===d&&(u===t&&(u=this._maskLength),i(d,u))},_unmask:function(t,n){var i,r,o,a,s,l,c,u;if(!t)return"";for(t=(t+"").split(""),o=0,a=n||0,s=this.options.promptChar,l=t.length,c=this.tokens.length,u="";c>a&&((i=t[o])===(r=this.tokens[a])||i===s?(u+=i===s?s:"",o+=1,a+=1):"string"!=typeof r?((r.test&&r.test(i)||e.isFunction(r)&&r(i))&&(u+=i,a+=1),o+=1):a+=1,!(o>=l)););return u},_tokenize:function(){for(var e,t,i,r,o=[],a=0,s=(this.options.mask||"").split(""),l=s.length,c=0,u="",d=this.options.promptChar,h=n.getCulture(this.options.culture).numberFormat,p=this._rules;l>c;c++)if(t=p[e=s[c]])o[a]=t,u+=d,a+=1;else for("."===e||","===e?e=h[e]:"$"===e?e=h.currency.symbol:"\\"===e&&(e=s[c+=1]),i=0,r=(e=e.split("")).length;r>i;i++)o[a]=e[i],u+=e[i],a+=1;this.tokens=o,this._emptyMask=u,this._maskLength=u.length}});o.plugin(f)}(window.kendo.jQuery),function(e,t){function n(e){var n="string"==typeof e?[{name:e}]:e,i="[object Array]"===se.call(n)?n:n!==t?[n]:[];return ce(i,function(e){return"string"==typeof e?{name:e}:{name:e.name,type:e.type}})}function i(e){var n="string"==typeof e?[{name:[e],expand:!1}]:e,i="[object Array]"===se.call(n)?n:n!==t?[n]:[];return ce(i,function(e){return"string"==typeof e?{name:[e],expand:!1}:{name:"[object Array]"===se.call(e.name)?e.name.slice():[e.name],expand:e.expand}})}function r(t){var n,i,r={};for(i in t.length&&function e(t,n,i,r){var o,a,s,l;if(i||(i=n),r||(r=0),(l=i.members[r])&&!l.measure){if(a=(s=l.children).length,i===n?t[ne.stringify([l.name])]=!!a:a&&(t[ne.stringify(X(i,r))]=!0),a)for(o=0;a>o;o++)e(t,n,s[o],r);e(t,n,i,r+1)}}(r,t[0]),n=[],r)n.push({name:e.parseJSON(i),expand:r[i]});return n}function o(e,t,n){var r,o;return function(e,t){var n,i,r,o,a=(t.tuples||[])[0];if(a&&a.members.length>e.length)for(n=a.members,i=0;n.length>i;i++)if(!n[i].measure){for(r=!1,o=0;e.length>o;o++)if(0===A(e[o]).indexOf(n[i].hierarchy)){r=!0;break}r||e.push({name:[n[i].name],expand:!1})}}(t,e=e||{}),n.length>1&&t.push({name:pe,measure:!0,children:i(n)}),r={members:t},e.tuples&&(o=_(e.tuples,r)).tuple&&(t=function(e){var t,n=[],i=e.members;for(t=0;i.length>t;t++)i[t].measure||n.push({name:[i[t].name],expand:i[t].children.length>0});return n}(o.tuple)),t}function a(e){var t=ne.getter(e.field,!0);return function(n,i){return e.aggregate(t(n.dataItem),i,n)}}function s(e){return"number"==typeof e&&!isNaN(e)}function l(e){return e&&e.getTime}function c(e,n,i){return e.tuples.length<p(n.tuples,i)?n:t}function u(e,t,n,i,r){var o,a,s,l=e.length,c=p(t,i),u=i.length||1;for(a=0;n>a;a++)for(o=0;l>o;o++)s=h(e[o],t)*u,s+=o%u,r[a*l+o].ordinal=a*c+s}function d(e,t,n,i,r){var o,a,s,l=e.length,c=(p(t,i),i.length||1);for(a=0;l>a;a++)for(s=h(e[a],t),s*=c,s+=a%c,o=0;n>o;o++)r[a*n+o].ordinal=s*n+o}function h(e,t){return _(t,e).index}function p(e,t){var n,i,r;if(!e.length)return 0;for(i=(n=e.slice()).shift(),r=1;i;)i.members?[].push.apply(n,i.members):i.children&&(i.measure||(r+=i.children.length),[].push.apply(n,i.children)),i=n.shift();return t.length&&(r*=t.length),r}function f(e){return e||(e={tuples:[]}),e.tuples||(e.tuples=[]),e}function g(e,t,n){var i,r,o,a;if(!e)return 0;for(o=i=Math.max(n.length,1),a=(r=e.members.slice(0,t)).shift(),i>1&&(i+=1);a;)a.name===pe?o+=i:a.children?[].push.apply(r,a.children):(o++,[].push.apply(r,a.members)),a=r.shift();return o}function m(e,t,n){var i,r,o,a,s,l;if(!t[0])return{parsedRoot:null,tuples:e,memberIndex:0,index:0};if(!(i=_(e,t[0])).tuple)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};if(r=i.tuple.members,o=t[0].members,a=-1,r.length!==o.length)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};for(s=0,l=r.length;l>s;s++)!r[s].measure&&o[s].children[0]&&(-1==a&&o[s].children.length&&(a=s),r[s].children=o[s].children);return n=Math.max(n.length,1),{parsedRoot:i.tuple,index:i.index*n,memberIndex:a,tuples:e}}function v(e,t){var n,i,r=!0;for(e=e.members,t=t.members,n=0,i=e.length;i>n;n++)e[n].measure||t[n].measure||(r=r&&A(e[n])===A(t[n]));return r}function _(e,t){var n,i,r,o,a,s,l,c=0;for(n=0,i=e.length;i>n;n++){if(v(r=e[n],t))return{tuple:r,index:c};for(c++,a=0,s=r.members.length;s>a;a++)if(!(l=r.members[a]).measure&&(c+=(o=_(l.children,t)).index,o.tuple))return{tuple:o.tuple,index:c}}return{index:c}}function y(e,t){var n,i,r,o="";for(i=0,r=e.length;r>i;i++)t[o+=(n=e[i]).name]||(t[o]=n)}function b(e,t){var n,i,r,o,a=e.members,s="",l="";for(n=0,i=a.length;i>n;n++){if(r=a[n],o){if(t[s+r.name]){o=t[s+=r.name];continue}return t[s+r.parentName]?t[s+r.parentName]:t[l+r.parentName]?t[l+r.parentName]:t[l]}if(s+=r.name,!(o=t[r.parentName])&&!(o=t[s]))return null;o&&(l+=o.name)}return o}function w(n,i){if(!(0>i)){var r={name:pe,measure:!0,children:[e.extend({members:[],dataIndex:n.dataIndex},n.members[i])]};n.members.splice(i,1,r),n.dataIndex=t}}function k(e,t){var n,i,r,o,a,s;if(1>e.length)return[];for(n=[],i={},r=function(e,t){var n,i,r,o;if(0===t.length)return-1;for(n=t[0],r=0,o=(i=e.members).length;o>r;r++)if(i[r].name==n.name)return r}(e[0],t),o=0;e.length>o;o++)(a=e[o]).dataIndex=o,w(a,r),(s=b(a,i))?s.children.push(0>r||!s.measure?a:a.members[r].children[0]):n.push(a),y(a.members,i);return n}function x(e){var n,i,r,o,a,s,l;for(n=[],i=(e=e.slice()).shift();i;){for(i.dataIndex!==t&&n.push(i.dataIndex),a=0,r=0,o=i.members.length;o>r;r++)s=(l=i.members[r]).children,l.measure?[].splice.apply(e,[0,0].concat(s)):[].splice.apply(e,[a,0].concat(s)),a+=s.length;i=e.shift()}return n}function C(e){var t=e.split(".");return t.length>2?t[0]+"."+t[1]:e}function T(e,t){var n=e.length-1,i=e[n],r=function(e,t){for(var n=0,i=e.length;i>n;n++)if(0===t.indexOf(e[n].field))return e[n];return null}(t,i);return r&&r.dir?i="ORDER("+i+".Children,"+r.field+".CurrentMember.MEMBER_CAPTION,"+r.dir+")":i+=".Children",e[n]=i,e}function S(e,t){var n=e.slice(0);return t.length>1&&n.push("{"+D(t).join(",")+"}"),function e(t){var n,i="CROSSJOIN({";return t.length>2?(n=t.pop(),i+=e(t)):(i+=t.shift(),n=t.pop()),i+="},{",(i+=n)+"})"}(n)}function D(e){for(var n,i=0,r=e.length,o=[];r>i;i++)n=e[i],o.push(n.name!==t?n.name:n);return o}function A(e){return e=e.name||e,"[object Array]"===se.call(e)&&(e=e[e.length-1]),e}function M(e){for(var t=e.length,n=[],i=0;t>i;i++)n.push(e[i].name[0]);return n}function E(e,t){var n,i,r,o=0,a=e.length,s=t.length;for(t=t.slice(0);a>o;o++)for(n=e[o],r=0;s>r;r++)if(i=C(t[r]),-1!==n.indexOf(i)){t[r]=n;break}return{names:t,expandedIdx:r,uniquePath:t.slice(0,r+1).join("")}}function I(e){for(var t,n,i,r,o,a,s=[],l=[],c=[],u=0,d=e.length;d>u;u++)if(r=(t=e[u]).name,a=!1,"[object Array]"!==se.call(r)&&(t.name=r=[r]),r.length>1)l.push(t);else{for(o=C(r[0]),n=0,i=c.length;i>n;n++)if(0===c[n].name[0].indexOf(o)){a=!0;break}a||c.push(t),t.expand&&s.push(t)}return{root:c,expanded:s=s.concat(l)}}function R(e,t,n){var i,r,o,a,s,l,c,u="";if(r=M((i=I(e=e||[])).root),o=[],a=(i=i.expanded).length,s=0,c=[],r.length>1||t.length>1){for(o.push(S(r,t));a>s;s++)c=E(l=T(i[s].name,n),r).names,o.push(S(c,t));u+=o.join(",")}else{for(;a>s;s++)l=T(i[s].name,n),c.push(l[0]);u+=r.concat(c).join(",")}return u}function P(e){var t="",n=e.value,i=e.field,r=e.operator;return"in"==r?(t+="{",t+=n,t+="}"):(t+="Filter(",t+=i+".MEMBERS",t+=ne.format(z[r],i,n),t+=")"),t}function L(e,t,n){var i,r,o="";if(t){for(r in o+="<"+e+">",t)i=t[r],n&&(r=r.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),o+="<"+r+">"+i+"</"+r+">";o+="</"+e+">"}else o+="<"+e+"/>";return o}function F(e){return null==e?[]:"[object Array]"!==se.call(e)?[e]:e}function B(e){var t,n,i,r,o={tuples:[]},a=F(ne.getter("Tuples.Tuple",!0)(e)),s=ne.getter("Caption['#text']"),l=ne.getter("UName['#text']"),c=ne.getter("LName['#text']"),u=ne.getter("LNum['#text']"),d=ne.getter("CHILDREN_CARDINALITY['#text']",!0),h=ne.getter("['@Hierarchy']"),p=ne.getter("PARENT_UNIQUE_NAME['#text']",!0);for(t=0;a.length>t;t++){for(n=[],i=F(a[t].Member),r=0;i.length>r;r++)n.push({children:[],caption:s(i[r]),name:l(i[r]),levelName:c(i[r]),levelNum:u(i[r]),hasChildren:parseInt(d(i[r]),10)>0,parentName:p(i[r]),hierarchy:h(i[r])});o.tuples.push({members:n})}return o}var z,H,N,O,V,U,W,j,q,G,$,Y,Q,X,K,Z,J,ee,te,ne=window.kendo,ie=ne.ui,re=ne.Class,oe=ie.Widget,ae=ne.data.DataSource,se={}.toString,le=function(e){return e},ce=e.map,ue=e.extend,de=ne.isFunction,he="change",pe="Measures",fe="progress",ge="stateReset",me="auto",ve="<div/>",_e=".kendoPivotGrid",ye="__row_total__",be="dataBinding",we="dataBound",ke="expandMember",xe="collapseMember",Ce="k-i-arrow-s",Te="k-i-arrow-e",Se="<span>#: data.member.caption || data.member.name #</span>",De={sum:function(e,t){var n=t.accumulator;return s(n)?s(e)&&(n+=e):n=e,n},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,n){var i=n.accumulator;return n.count===t&&(n.count=0),s(i)?s(e)&&(i+=e):i=e,s(e)&&n.count++,i},result:function(e){var t=e.accumulator;return s(t)&&(t/=e.count),t}},max:function(e,t){var n=t.accumulator;return s(n)||l(n)||(n=e),e>n&&(s(e)||l(e))&&(n=e),n},min:function(e,t){var n=t.accumulator;return s(n)||l(n)||(n=e),n>e&&(s(e)||l(e))&&(n=e),n}},Ae=re.extend({init:function(e){this.options=ue({},this.options,e),this.dimensions=this._normalizeDescriptors("field",this.options.dimensions),this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){var n,i,r,o;if(t=t||{},n={},"[object Array]"===se.call(t)){for(r=0,o=t.length;o>r;r++)"string"==typeof(i=t[r])?n[i]={}:i[e]&&(n[i[e]]=i);t=n}return t},_rootTuples:function(e,n){var i,r,o,a,s=n.length||1,l=this.dimensions||[],c=0,u=e.length,d=[],h=[];if(u||n.length){for(c=0;s>c;c++){for(i={members:[]},a=0;u>a;a++)o=(r=e[a]).split("&"),i.members[i.members.length]={children:[],caption:(l[r]||{}).caption||"All",name:r,levelName:r,levelNum:"0",hasChildren:!0,parentName:o.length>1?o[0]:t,hierarchy:r};s>1&&(i.members[i.members.length]={children:[],caption:n[c].caption,name:n[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!1,parentName:t,hierarchy:"MEASURES"}),d[d.length]=i}h.push(ye)}return{keys:h,tuples:d}},_expandedTuples:function(e,n,i){var r,o,a,s,l,c,u,d,h,p,f,g=i.length||1,m=this.dimensions||[],v=[],_=[];for(a in e){for(s=e[a],l=v[(u=this._findExpandedMember(n,s.uniquePath)).index]||[],c=_[u.index]||[],d=u.member.names,r=0;g>r;r++){for(o={members:[]},f=0;d.length>f;f++)f===u.member.expandedIdx?(o.members[o.members.length]={children:[],caption:s.value,name:s.name,hasChildren:!1,levelNum:1,levelName:s.parentName+s.name,parentName:s.parentName,hierarchy:s.parentName+s.name},0===r&&c.push(X(o,f).join(""))):(h=(p=d[f]).split("&"),o.members[o.members.length]={children:[],caption:(m[p]||{}).caption||"All",name:p,levelName:p,levelNum:"0",hasChildren:!0,parentName:h.length>1?h[0]:t,hierarchy:p});g>1&&(o.members[o.members.length]={children:[],caption:i[r].caption,name:i[r].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!0,parentName:t,hierarchy:"MEASURES"}),l[l.length]=o}v[u.index]=l,_[u.index]=c}return{keys:_,tuples:v}},_findExpandedMember:function(e,t){for(var n=0;e.length>n;n++)if(e[n].uniquePath===t)return{member:e[n],index:n}},_asTuples:function(e,t,n){var i,r;return n=n||[],i=this._rootTuples(t.root,n),r=this._expandedTuples(e,t.expanded,n),{keys:[].concat.apply(i.keys,r.keys),tuples:[].concat.apply(i.tuples,r.tuples)}},_measuresInfo:function(e,t){for(var n,i,r=0,o=e&&e.length,a=[],s={},l={},c=this.measures||{};o>r;r++)n=c[i=e[r].descriptor.name]||{},a.push(i),n.result&&(s[i]=n.result),n.format&&(l[i]=n.format);return{names:a,formats:l,resultFuncs:s,rowAxis:t}},_toDataArray:function(e,t,n,i){var r,o,a,s,l,c,u,d,h,p,f=[],g=1,m=[],v=n.length||1,_=i.length||1;for(t.rowAxis?g=(m=t.names).length:p=t.names,a=0;v>a;a++)for(u=e[n[a]||ye],c=0;g>c;c++)for(t.rowAxis&&(p=[m[c]]),s=0;_>s;s++)for(h=i[s]||ye,d=u.items[h],r=h===ye?u.aggregates:d?d.aggregates:{},l=0;p.length>l;l++)o=p[l],this._addData(f,r[o],t.formats[o],t.resultFuncs[o]);return f},_addData:function(e,t,n,i){var r,o="";t&&(t=i?i(t):t.accumulator,o=n?ne.format(n,t):t),e[r=e.length]={ordinal:r,value:t||"",fmtValue:o}},_matchDescriptors:function(e,n,i){for(var r,o,a,s,l=n.names,c=n.expandedIdx;c>0;)if((r=l[--c].split("&")).length>1&&(o=r[0],a=r[1],(s=(s=i[o](e))!==t&&null!==s?""+s:s)!=a))return!1;return!0},_calculateAggregate:function(e,t,n){var i,r,o,a={};for(o=0;e.length>o;o++)r=e[o].descriptor.name,(i=n.aggregates[r]||{}).accumulator=e[o].aggregator(t,i),a[r]=i;return a},_processColumns:function(e,n,i,r,o,a,s,l){for(var c,u,d,h,p,f,g,m,v=o.dataItem,_=0;n.length>_;_++)u=n[_],this._matchDescriptors(v,u,i)&&(m=u.names.slice(0,u.expandedIdx).join(""),g=f=u.names[u.expandedIdx],d=r[p=m+(f=f+"&"+(c=(c=i[f](v))!==t&&null!==c?""+c:c))]||{index:s.columnIndex,parentName:g,name:f,uniquePath:m+g,value:c},h=a.items[p]||{aggregates:{}},a.items[p]={index:d.index,aggregates:this._calculateAggregate(e,o,h)},l&&(r[p]||s.columnIndex++,r[p]=d))},_measureAggregators:function(e){var t,n,i,r,o,s,l=e.measures||[],c=this.measures||{},u=[];if(l.length){for(i=0,r=l.length;r>i;i++)if(o=null,n=c[(t=l[i]).name]){if("string"==typeof(s=n.aggregate)){if(!(o=De[s.toLowerCase()]))throw Error("There is no such aggregate function");n.aggregate=o.aggregate||o,n.result=o.result}u.push({descriptor:t,caption:n.caption,result:n.result,aggregator:a(n)})}}else u.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}});return u},_normalizeName:function(e){return-1!==e.indexOf(" ")&&(e='["'+e+'"]'),e},_buildGetters:function(e){var t,n,i,r={};for(i=0;e.length>i;i++)(t=(n=e[i]).split("&")).length>1?r[t[0]]=ne.getter(t[0],!0):r[n]=ne.getter(this._normalizeName(n),!0);return r},_parseDescriptors:function(e){var t,n=I(e),i=M(n.root),r=n.expanded,o=[];for(t=0;r.length>t;t++)o.push(E(r[t].name,i));return{root:i,expanded:o}},process:function(e,n){var r,o,a,s,l,c,u,d,h,p,f,g,m,v,_,y,b,w,k,x,C,T,S,D,A,M,E,I,R,P;if(e=e||[],r=(n=n||{}).measures||[],o="rows"===n.measuresAxis,a=n.columns||[],s=n.rows||[],!a.length&&s.length&&(!r.length||r.length&&o)&&(a=s,s=[],o=!1),a.length||s.length||(o=!1),!a.length&&r.length&&(a=i(n.measures)),a=this._parseDescriptors(a),s=this._parseDescriptors(s),l={},c={},u={},h={columnIndex:0},p=this._measureAggregators(n),f=this._buildGetters(a.root),g=this._buildGetters(s.root),m=!1,v=a.expanded,w=0!==(_=s.expanded).length,R=e.length,P=0,a.root.length||s.root.length)for(m=!0,P=0;R>P;P++)for(b={dataItem:y=e[P],index:P},T=l[ye]||{items:{},aggregates:{}},this._processColumns(p,v,f,c,b,T,h,!w),T.aggregates=this._calculateAggregate(p,b,T),l[ye]=T,k=0;_.length>k;k++)x=_[k],this._matchDescriptors(y,x,g)?(D=x.names.slice(0,x.expandedIdx).join(""),A=C=x.names[x.expandedIdx],u[S=D+(C=C+"&"+(d=(d=g[C](y))!==t?""+d:d))]={uniquePath:D+A,parentName:A,name:C,value:d},M=l[S]||{items:{},aggregates:{}},this._processColumns(p,v,f,c,b,M,h,!0),M.aggregates=this._calculateAggregate(p,b,M),l[S]=M):this._processColumns(p,v,f,c,b,{items:{},aggregates:{}},h,!0);return m&&R?(!(p.length>1)||n.columns&&n.columns.length||(a={root:[],expanded:[]}),E=this._asTuples(c,a,o?[]:p),I=this._asTuples(u,s,o?p:[]),c=E.tuples,u=I.tuples,l=this._toDataArray(l,this._measuresInfo(p,o),I.keys,E.keys)):l=c=u=[],{axes:{columns:{tuples:c},rows:{tuples:u}},data:l}}}),Me=re.extend({init:function(e,t){this.transport=t,this.options=t.options||{},this.transport.discover||de(e.discover)&&(this.discover=e.discover)},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){return this.transport.discover?this.transport.discover(e):(e.success({}),t)},catalog:function(n){var i,r=this.options||{};return n===t?(r.connection||{}).catalog:((i=r.connection||{}).catalog=n,this.options.connection=i,e.extend(this.transport.options,{connection:i}),t)},cube:function(e){var n,i=this.options||{};return e===t?(i.connection||{}).cube:((n=i.connection||{}).cube=e,this.options.connection=n,ue(!0,this.transport.options,{connection:n}),t)}}),Ee=ae.extend({init:function(t){var r,o=((t||{}).schema||{}).cube,a="columns",s={axes:le,cubes:le,catalogs:le,measures:le,dimensions:le,hierarchies:le,levels:le,members:le};o&&(s=e.extend(s,this._cubeSchema(o)),this.cubeBuilder=new Ae(o)),ae.fn.init.call(this,ue(!0,{},{schema:s},t)),this.transport=new Me(this.options.transport||{},this.transport),this._columns=i(this.options.columns),this._rows=i(this.options.rows),r=this.options.measures||[],"[object Object]"===se.call(r)&&(a=r.axis||"columns",r=r.values||[]),this._measures=n(r),this._measuresAxis=a,this._skipNormalize=0,this._axes={}},_cubeSchema:function(e){return{dimensions:function(){var t,n=[],i=e.dimensions;for(t in i)n.push({name:t,caption:i[t].caption||t,uniqueName:t,defaultHierarchy:t,type:1});return e.measures&&n.push({name:pe,caption:pe,uniqueName:pe,type:2}),n},hierarchies:function(){return[]},measures:function(){var t,n=[],i=e.measures;for(t in i)n.push({name:t,caption:t,uniqueName:t,aggregator:t});return n}}},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},catalog:function(e){return e===t?this.transport.catalog():(this.transport.catalog(e),this._mergeState({}),this._axes={},this.data([]),t)},cube:function(e){return e===t?this.transport.cube():(this.transport.cube(e),this._axes={},this._mergeState({}),this.data([]),t)},axes:function(){return this._axes},columns:function(e){return e===t?this._columns:(this._skipNormalize+=1,this._clearAxesData=!0,this._columns=i(e),this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures()}),t)},rows:function(e){return e===t?this._rows:(this._skipNormalize+=1,this._clearAxesData=!0,this._rows=i(e),this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures()}),t)},measures:function(e){return e===t?this._measures:(this._skipNormalize+=1,this._clearAxesData=!0,this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:n(e)}),t)},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var n,r,a="columns"===t?"columns":"rows",s="columns"===t?"rows":"columns",l=i(e),c=A(l[l.length-1]);for(this._lastExpanded=a,l=o(this.axes()[a],l,this.measures()),n=0;l.length>n;n++)if(A(l[n])===c){if(l[n].expand)return;l[n].expand=!0}else l[n].expand=!1;(r={})[a]=l,r[s]=this._descriptorsForAxis(s),this._query(r)},_descriptorsForAxis:function(e){var t=this.axes(),n=this[e]()||[];return t&&t[e]&&t[e].tuples&&t[e].tuples[0]&&(n=r(t[e].tuples||[])),n},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e,(t=t||{}).items=t.items||this._view,this.trigger(he,t)},_query:function(e){var t=this;return e||(this._skipNormalize+=1,this._clearAxesData=!0),t.query(ue({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(t){var n=this._mergeState(t);return this._data.length&&this.cubeBuilder?(this._params(n),this._updateLocalData(this._pristineData),e.Deferred().resolve().promise()):this.read(n)},_mergeState:function(e){return(e=ae.fn._mergeState.call(this,e))!==t&&(this._measures=n(e.measures),e.columns?e.columns=i(e.columns):e.columns||(this._columns=[]),e.rows?e.rows=i(e.rows):e.rows||(this._rows=[])),e},filter:function(e){return e===t?this._filter:(this._skipNormalize+=1,this._clearAxesData=!0,this._query({filter:e,page:1}),t)},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;this.cubeBuilder&&(t=(this.reader.data(e)||[]).slice(0)),ae.fn.success.call(this,e),t&&(this._pristineData=t)},_processResult:function(e,t){var n,i,r,o,a,s,l,h,g,m,v;return this.cubeBuilder&&(e=(n=this.cubeBuilder.process(e,this._requestData)).data,t=n.axes),h=this.columns(),g=this.rows(),m=t.columns&&t.columns.tuples,h.length||!g.length||!m||!this._rowMeasures().length&&this.measures().length||(t={columns:{},rows:t.columns}),h.length||g.length||"rows"!==this.measuresAxis()||!m||(t={columns:{},rows:t.columns}),this._axes={columns:f(this._axes.columns),rows:f(this._axes.rows)},t={columns:f(t.columns),rows:f(t.rows)},i=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,h,this._columnMeasures()),r=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,g,this._rowMeasures()),this._skipNormalize-=1,this.cubeBuilder||(e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:i,rowIndexes:r,data:e})),"rows"==this._lastExpanded?(o=t.columns.tuples,s=this._columnMeasures(),(a=c(t.columns,this._axes.columns,s))&&(l="columns",t.columns=a,u(o,a.tuples,t.rows.tuples.length,s,e),this.cubeBuilder||(e=this._normalizeData({columnsLength:p(t.columns.tuples,s),rowsLength:t.rows.tuples.length,data:e})))):"columns"==this._lastExpanded&&(o=t.rows.tuples,s=this._rowMeasures(),(a=c(t.rows,this._axes.rows,s))&&(l="rows",t.rows=a,d(o,a.tuples,t.columns.tuples.length,s,e),this.cubeBuilder||(e=this._normalizeData({columnsLength:p(t.rows.tuples,s),rowsLength:t.columns.tuples.length,data:e})))),this._lastExpanded=null,v=this._mergeAxes(t,e,l),this._axes=v.axes,v.data},_readData:function(e){var t=this.reader.axes(e),n=this.reader.data(e);return this._processResult(n,t)},_createTuple:function(e,t,n){var i,r,o,a,s,l,c,u,d=e.members,h=d.length,p={members:[]},f=0;for(t&&(h-=1);h>f;f++)r=+(u=d[f]).levelNum,o=u.name,a=u.parentName,c=u.caption||o,s=u.hasChildren,l=u.hierarchy,i=u.levelName,n&&(c="All",0===r?a=u.name:r-=1,s=!0,o=l=i=a),p.members.push({name:o,children:[],caption:c,levelName:i,levelNum:""+r,hasChildren:s,hierarchy:l,parentName:n?"":a});return t&&p.members.push({name:t.name,children:[]}),p},_hasRoot:function(e,t,n){var i,r,o,a,s,l,c;if(t.length)return _(t,e).tuple;for(a=!0,l=0,c=(i=e.members).length;c>l;l++)if(s=+(r=i[l]).levelNum||0,o=n[l],!(0===s||o&&r.name===A(o))){a=!1;break}return a},_mergeAxes:function(e,t,n){var i,r,o,a,s,l=this._columnMeasures(),c=this._rowMeasures(),u=this.axes(),d=e.rows.tuples.length,h=p(u.columns.tuples,l),f=e.columns.tuples.length;return"columns"==n?(f=h,r=e.columns.tuples):t=function(e,t){var n,i,r,o,a,s,l,c;if(!e||!e.length)return t;for(n=[],r=(i=x(e)).length,o=Math.max(t.length/r,1),s=0;o>s;s++)for(l=r*s,a=0;r>a;a++)c=i[a]+l,n[l+a]=t[c]||{value:"",fmtValue:"",ordinal:c};return n}(r=k(e.columns.tuples,l),t),o=m(u.columns.tuples,r,l),"rows"==n?(d=p(e.rows.tuples,c),r=e.rows.tuples):t=function(e,t){var n,i,r,o,a,s,l,c,u;if(!e||!e.length)return t;for(n=[],r=(i=x(e)).length,o=Math.max(t.length/r,1),a=0;r>a;a++)for(l=o*a,c=o*i[a],s=0;o>s;s++)u=parseInt(c+s,10),n[parseInt(l+s,10)]=t[u]||{value:"",fmtValue:"",ordinal:u};return n}(r=k(e.rows.tuples,c),t),a=m(u.rows.tuples,r,c),u.columns.tuples=o.tuples,u.rows.tuples=a.tuples,h!==p(u.columns.tuples,l)?(i=o.index+g(o.parsedRoot,o.memberIndex,l),s=h+f,t=this._mergeColumnData(t,i,d,f,s)):(i=a.index+g(a.parsedRoot,a.memberIndex,c),t=this._mergeRowData(t,i,d,f)),{axes:u,data:t}},_mergeColumnData:function(e,t,n,i,r){var o,a,s,l=this.data().toJSON(),c=0,u=Math.max(this._columnMeasures().length,1);for(n=Math.max(n,1),l.length>0&&(c=u,r-=u),o=0;n>o;o++)a=t+o*r,(s=e.splice(0,i)).splice(0,c),[].splice.apply(l,[a,0].concat(s));return l},_mergeRowData:function(e,t,n,i){var r,o,a,s=this.data().toJSON(),l=Math.max(this._rowMeasures().length,1);for(i=Math.max(i,1),s.length>0&&(n-=l,e.splice(0,i*l)),r=0;n>r;r++)a=e.splice(0,i),o=t*i+r*i,[].splice.apply(s,[o,0].concat(a));return s},_columnMeasures:function(){var e=this.measures(),t=[];return"columns"===this.measuresAxis()&&(0===this.columns().length?t=e:e.length>1&&(t=e)),t},_rowMeasures:function(){var e=this.measures(),t=[];return"rows"===this.measuresAxis()&&(0===this.rows().length?t=e:e.length>1&&(t=e)),t},_updateLocalData:function(e,t){this.cubeBuilder&&(t&&(this._requestData=t),e=this._processResult(e)),this._data=this._observe(e),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},data:function(e){return e===t?this._data:(this._pristineData=e.slice(0),this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()}),t)},_normalizeTuples:function(e,t,n,i){var r,o,a,s=i.length||1,l=0,c=[],u={},d=0;if(e.length){if(0>=this._skipNormalize&&!this._hasRoot(e[0],t,n)){for(this._skipNormalize=0;s>l;l++)c.push(this._createTuple(e[0],i[l],!0)),u[l]=l;e.splice.apply(e,[0,e.length].concat(c).concat(e)),l=s}if(i.length)for(a=r=e[l],o=r.members.length-1;r;){if(d>=s&&(d=0),r.members[o].name!==i[d].name&&(e.splice(l,0,this._createTuple(r,i[d])),u[l]=l),d+=1,r=e[l+=1],s>d&&(!r||K(a,o-1)!==K(r,o-1))){for(;s>d;d++)e.splice(l,0,this._createTuple(a,i[d])),u[l]=l,l+=1;r=e[l]}a=r}return u}},_normalizeData:function(e){var n,i,r=e.data,o=e.columnIndexes||{},a=e.rowIndexes||{},s=e.columnsLength||1,l=s*(e.rowsLength||1),c=0,u=0,d=0,h=Array(l);if(r.length===l)return r;for(;l>c;c++){for(;a[parseInt(c/s,10)]!==t;)for(i=0;s>i;i++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;for(;o[c%s]!==t;)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;if(n=r[u]){if(n.ordinal-d>1)for(d+=1;n.ordinal>d;d++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;d=n.ordinal,n.ordinal=c,h[c]=n,u+=1}else h[c]={value:"",fmtValue:"",ordinal:c}}return h},discover:function(t,n){var i=this,r=i.transport;return e.Deferred(function(e){r.discover(ue({success:function(t){t=i.reader.parse(t),i._handleCustomErrors(t)||(n&&(t=n(t)),e.resolve(t))},error:function(t,n,r){e.reject(t),i.error(t,n,r)}},t))}).promise().done(function(){i.trigger("schemaChange")})},schemaMeasures:function(){var e=this;return e.discover({data:{command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.measures(t)})},schemaKPIs:function(){var e=this;return e.discover({data:{command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.kpis(t)})},schemaDimensions:function(){var e=this;return e.discover({data:{command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.dimensions(t)})},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},function(e){return t.reader.hierarchies(e)})},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},function(e){return t.reader.levels(e)})},schemaCubes:function(){var e=this;return e.discover({data:{command:"schemaCubes",restrictions:{catalogName:e.transport.catalog()}}},function(t){return e.reader.cubes(t)})},schemaCatalogs:function(){var e=this;return e.discover({data:{command:"schemaCatalogs"}},function(t){return e.reader.catalogs(t)})},schemaMembers:function(e){var t=this;return t.discover({data:{command:"schemaMembers",restrictions:ue({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)}},function(e){return t.reader.members(e)})},_params:function(e){this._clearAxesData&&(this._axes={},this._data=this._observe([]),this._clearAxesData=!1,this.trigger(ge));var t=ae.fn._params.call(this,e);return t=ue({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t),this.cubeBuilder&&(this._requestData=t),t}});Ee.create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},n=t.data;if(t.data=n,!(t instanceof Ee)&&t instanceof ne.data.DataSource)throw Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof Ee?t:new Ee(t)},z={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") = 0',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', NOT {0}.CurrentMember.MEMBER_CAPTION = "{1}"'},H={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"},N={read:function(e){var t,n,i,r,o,a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';return a+="SELECT NON EMPTY {",t=e.columns||[],n=e.rows||[],i=e.measures||[],r="rows"===e.measuresAxis,o=e.sort||[],!t.length&&n.length&&(!i.length||i.length&&r)&&(t=n,n=[],r=!1),t.length||n.length||(r=!1),t.length?a+=R(t,r?[]:i,o):i.length&&!r&&(a+=D(i).join(",")),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(n.length||r&&i.length>1)&&(a+=", NON EMPTY {",a+=n.length?R(n,r?i:[],o):D(i).join(","),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),e.filter?(a+=" FROM ",a+="(",a+=function(e,t){var n,i,r="",o=e.filters,a=o.length;for(i=a-1;i>=0;i--)n="SELECT (",n+=P(o[i]),n+=") ON 0",r=i==a-1?n+=" FROM ["+t+"]":n+" FROM ( "+r+" )";return r}(e.filter,e.connection.cube),a+=")"):a+=" FROM ["+e.connection.cube+"]",1==i.length&&t.length&&(a+=" WHERE ("+D(i).join(",")+")"),(a+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>").replace(/\&/g,"&amp;")},discover:function(t){var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return n+="<RequestType>"+(H[(t=t||{}).command]||t.command)+"</RequestType>",n+="<Restrictions>"+L("RestrictionList",t.restrictions,!0)+"</Restrictions>",t.connection&&t.connection.catalog&&(t.properties=e.extend({},{Catalog:t.connection.catalog},t.properties)),(n+="<Properties>"+L("PropertyList",t.properties)+"</Properties>")+"</Discover></Body></Envelope>"}},O=ne.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=ue(!0,{},this.options,e),ne.data.RemoteTransport.call(this,e),de(t.discover)?this.discover=t.discover:"string"==typeof t.discover?this.options.discover={url:t.discover}:t.discover||(this.options.discover=this.options.read)},setup:function(t,n){return t.data=t.data||{},e.extend(!0,t.data,{connection:this.options.connection}),ne.data.RemoteTransport.fn.setup.call(this,t,n)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return N[t](e,t)}},discover:function(t){return e.ajax(this.setup(t,"discover"))}}),V={cubes:{name:ne.getter("CUBE_NAME['#text']",!0),caption:ne.getter("CUBE_CAPTION['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),type:ne.getter("CUBE_TYPE['#text']",!0)},catalogs:{name:ne.getter("CATALOG_NAME['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0)},measures:{name:ne.getter("MEASURE_NAME['#text']",!0),caption:ne.getter("MEASURE_CAPTION['#text']",!0),uniqueName:ne.getter("MEASURE_UNIQUE_NAME['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),aggregator:ne.getter("MEASURE_AGGREGATOR['#text']",!0),groupName:ne.getter("MEASUREGROUP_NAME['#text']",!0),displayFolder:ne.getter("MEASURE_DISPLAY_FOLDER['#text']",!0),defaultFormat:ne.getter("DEFAULT_FORMAT_STRING['#text']",!0)},kpis:{name:ne.getter("KPI_NAME['#text']",!0),caption:ne.getter("KPI_CAPTION['#text']",!0),value:ne.getter("KPI_VALUE['#text']",!0),goal:ne.getter("KPI_GOAL['#text']",!0),status:ne.getter("KPI_STATUS['#text']",!0),trend:ne.getter("KPI_TREND['#text']",!0),statusGraphic:ne.getter("KPI_STATUS_GRAPHIC['#text']",!0),trendGraphic:ne.getter("KPI_TREND_GRAPHIC['#text']",!0),description:ne.getter("KPI_DESCRIPTION['#text']",!0),groupName:ne.getter("MEASUREGROUP_NAME['#text']",!0)},dimensions:{name:ne.getter("DIMENSION_NAME['#text']",!0),caption:ne.getter("DIMENSION_CAPTION['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),uniqueName:ne.getter("DIMENSION_UNIQUE_NAME['#text']",!0),defaultHierarchy:ne.getter("DEFAULT_HIERARCHY['#text']",!0),type:ne.getter("DIMENSION_TYPE['#text']",!0)},hierarchies:{name:ne.getter("HIERARCHY_NAME['#text']",!0),caption:ne.getter("HIERARCHY_CAPTION['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),uniqueName:ne.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),dimensionUniqueName:ne.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:ne.getter("HIERARCHY_DISPLAY_FOLDER['#text']",!0),origin:ne.getter("HIERARCHY_ORIGIN['#text']",!0),defaultMember:ne.getter("DEFAULT_MEMBER['#text']",!0)},levels:{name:ne.getter("LEVEL_NAME['#text']",!0),caption:ne.getter("LEVEL_CAPTION['#text']",!0),description:ne.getter("DESCRIPTION['#text']",!0),uniqueName:ne.getter("LEVEL_UNIQUE_NAME['#text']",!0),dimensionUniqueName:ne.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:ne.getter("LEVEL_DISPLAY_FOLDER['#text']",!0),orderingProperty:ne.getter("LEVEL_ORDERING_PROPERTY['#text']",!0),origin:ne.getter("LEVEL_ORIGIN['#text']",!0),hierarchyUniqueName:ne.getter("HIERARCHY_UNIQUE_NAME['#text']",!0)},members:{name:ne.getter("MEMBER_NAME['#text']",!0),caption:ne.getter("MEMBER_CAPTION['#text']",!0),uniqueName:ne.getter("MEMBER_UNIQUE_NAME['#text']",!0),dimensionUniqueName:ne.getter("DIMENSION_UNIQUE_NAME['#text']",!0),hierarchyUniqueName:ne.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),levelUniqueName:ne.getter("LEVEL_UNIQUE_NAME['#text']",!0),childrenCardinality:ne.getter("CHILDREN_CARDINALITY['#text']",!0)}},U=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"],W=ne.data.XmlDataReader.extend({init:function(e){ne.data.XmlDataReader.call(this,e),this._extend(e)},_extend:function(e){for(var t,n,i=0,r=U.length;r>i;i++)(n=e[t=U[i]])&&n!==le&&(this[t]=n)},parse:function(e){var t=ne.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return ne.getter("['Envelope']['Body']",!0)(t)},errors:function(e){var t=ne.getter("['Fault']",!0)(e);return t?[{faultstring:ne.getter("faultstring['#text']",!0)(t),faultcode:ne.getter("faultcode['#text']",!0)(t)}]:null},axes:function(e){var t,n,i,r;for(e=ne.getter('ExecuteResponse["return"].root',!0)(e),t=F(ne.getter("Axes.Axis",!0)(e)),i={columns:{},rows:{}},r=0;t.length>r;r++)"sliceraxis"!==(n=t[r])["@name"].toLowerCase()&&(i.columns.tuples?i.rows=B(n):i.columns=B(n));return i},data:function(e){var t,n,i,r,o,a;for(e=ne.getter('ExecuteResponse["return"].root',!0)(e),t=F(ne.getter("CellData.Cell",!0)(e)),n=[],i=ne.getter("['@CellOrdinal']"),r=ne.getter("Value['#text']"),o=ne.getter("FmtValue['#text']"),a=0;t.length>a;a++)n.push({value:r(t[a]),fmtValue:o(t[a]),ordinal:parseInt(i(t[a]),10)});return n},_mapSchema:function(e,t){var n,i,r,o,a;for(e=ne.getter('DiscoverResponse["return"].root',!0)(e),n=F(ne.getter("row",!0)(e)),i=[],r=0;n.length>r;r++){for(a in o={},t)o[a]=t[a](n[r]);i.push(o)}return i},measures:function(e){return this._mapSchema(e,V.measures)},kpis:function(e){return this._mapSchema(e,V.kpis)},hierarchies:function(e){return this._mapSchema(e,V.hierarchies)},levels:function(e){return this._mapSchema(e,V.levels)},dimensions:function(e){return this._mapSchema(e,V.dimensions)},cubes:function(e){return this._mapSchema(e,V.cubes)},catalogs:function(e){return this._mapSchema(e,V.catalogs)},members:function(e){return this._mapSchema(e,V.members)}}),ue(!0,ne.data,{PivotDataSource:Ee,XmlaTransport:O,XmlaDataReader:W,PivotCubeBuilder:Ae,transports:{xmla:O},readers:{xmla:W}}),j=function(e,t){if(!e)return null;for(var n=0,i=e.length;i>n;n++)if(e[n].field===t)return e[n];return null},q=function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r},ne.ui.PivotSettingTarget=oe.extend({init:function(t,n){var i=this;oe.fn.init.call(i,t,n),i.element.addClass("k-pivot-setting"),i.dataSource=ne.data.PivotDataSource.create(n.dataSource),i._refreshHandler=e.proxy(i.refresh,i),i.dataSource.first(he,i._refreshHandler),n.template||(i.options.template="<div data-"+ne.ns+'name="${data.name || data}">${data.name || data}'+(i.options.enabled?'<a class="k-button k-button-icon k-button-bare"><span class="k-icon k-setting-delete"></span></a>':"")+"</div>"),i.template=ne.template(i.options.template),i.emptyTemplate=ne.template(i.options.emptyTemplate),i._sortable(),i.element.on("click"+_e,".k-button,.k-item",function(t){var n=e(t.target),r=n.closest("["+ne.attr("name")+"]").attr(ne.attr("name"));r&&(n.hasClass("k-setting-delete")?i.remove(r):i.options.sortable&&n[0]===t.currentTarget&&i.sort({field:r,dir:n.find(".k-i-sort-asc")[0]?"desc":"asc"}))}),(n.filterable||n.sortable)&&(i.fieldMenu=new ie.PivotFieldMenu(i.element,{messages:i.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:n.filterable,sortable:n.sortable,dataSource:i.dataSource})),i.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:!1,sortable:!1,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(he,this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first(he,this._refreshHandler),this.refresh()},_sortable:function(){var e=this;e.options.enabled&&(this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,filter:">:not(.k-empty)",hint:e.options.hint,cursor:"move",start:function(e){e.item.focus().blur()},change:function(t){var n=t.item.attr(ne.attr("name"));"receive"==t.action?e.add(n):"remove"==t.action?e.remove(n):"sort"==t.action&&e.move(n,t.newIndex)}}).data("kendoSortable"))},_indexOf:function(e,t){var n,i,r=-1;for(n=0,i=t.length;i>n;n++)if(A(t[n])===e){r=n;break}return r},_isKPI:function(e){return"kpi"===e.type||e.measure},validate:function(e){var t,n,i=2==e.type||"aggregator"in e||this._isKPI(e);return i?"measures"===this.options.setting:"measures"===this.options.setting?i:(t=this.dataSource[this.options.setting](),n=e.defaultHierarchy||e.uniqueName,!(this._indexOf(n,t)>-1||(t=this.dataSource["columns"===this.options.setting?"rows":"columns"](),this._indexOf(n,t)>-1)))},add:function(t){var n,i,r=this.dataSource[this.options.setting]();for(n=0,i=(t=e.isArray(t)?t.slice(0):[t]).length;i>n;n++)-1!==this._indexOf(t[n],r)&&(t.splice(n,1),n-=1,i-=1);t.length&&(r=r.concat(t),this.dataSource[this.options.setting](r))},move:function(e,t){var n=this.dataSource[this.options.setting](),i=this._indexOf(e,n);i>-1&&(e=n.splice(i,1)[0],n.splice(t,0,e),this.dataSource[this.options.setting](n))},remove:function(e){var t=this.dataSource[this.options.setting](),n=this._indexOf(e,t);n>-1&&(t.splice(n,1),this.dataSource[this.options.setting](t))},sort:function(e){var t=this.options.sortable,n=(!0===t||t.allowUnsort)&&"asc"===e.dir,i=this.dataSource.sort()||[],r=q(i,e.field);n&&i.length!==r.length&&(e=null),e&&r.push(e),this.dataSource.sort(r)},refresh:function(){var e,n="",i=this.dataSource[this.options.setting](),r=i.length,o=0;if(r)for(;r>o;o++)e=(e=i[o]).name===t?{name:e}:e,n+=this.template(ue({sortIcon:this._sortIcon(e.name)},e));else n=this.emptyTemplate(this.options.messages.empty);this.element.html(n)},destroy:function(){oe.fn.destroy.call(this),this.dataSource.unbind(he,this._refreshHandler),this.element.off(_e),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null},_sortIcon:function(e){var t=this.dataSource.sort(),n=j(t,A(e)),i="";return n&&(i="k-i-sort-"+n.dir),i}}),G=oe.extend({init:function(n,i){var r,o,a=this;oe.fn.init.call(a,n,i),a._dataSource(),a._bindConfigurator(),a._wrapper(),a._createLayout(),a._columnBuilder=r=new Z,a._rowBuilder=o=new J,a._contentBuilder=new ee,a._templates(),a.columnsHeader.add(a.rowsHeader).on("click","span.k-icon",function(){var n,i,s,l=e(this),c=r,u="expandColumn",d=l.attr(ne.attr("path")),h={axis:"columns",path:e.parseJSON(d)};l.parent().is("td")&&(c=o,u="expandRow",h.axis="rows"),i=l.hasClass(Ce),s=c.metadata[d].expanded===t,n=i?xe:ke,a.trigger(n,h)||(c.metadata[d].expanded=!i,l.toggleClass(Ce,!i).toggleClass(Te,i),!i&&s?a.dataSource[u](h.path):a.refresh())}),a._scrollable(),a.options.autoBind&&a.dataSource.fetch(),ne.notify(a)},events:[be,we,ke,xe],options:{name:"PivotGrid",autoBind:!0,reorderable:!0,filterable:!1,sortable:!1,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate,t=this.options.rowHeaderTemplate,n=this.options.dataCellTemplate,i=this.options.kpiStatusTemplate,r=this.options.kpiTrendTemplate;this._columnBuilder.template=ne.template(e||Se,{useWithBlock:!!e}),this._contentBuilder.dataTemplate=ne.template(n||'#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',{useWithBlock:!!n}),this._contentBuilder.kpiStatusTemplate=ne.template(i||'<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "open" : data.dataItem.value < 0 ? "denied" : "hold"#">#:data.dataItem.value#</span>',{useWithBlock:!!i}),this._contentBuilder.kpiTrendTemplate=ne.template(r||'<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "increase" : data.dataItem.value < 0 ? "decrease" : "equal"#">#:data.dataItem.value#</span>',{useWithBlock:!!r}),this._rowBuilder.template=ne.template(t||Se,{useWithBlock:!!t})},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfigurator("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var n,i=this._contentBuilder,r=i.columnIndexes[e||0],o=i.rowIndexes[t||0];return r&&o?(n=o.index*i.rowLength+r.index,{columnTuple:r.tuple,rowTuple:o.tuple,measure:r.measure||o.measure,dataItem:this.dataSource.view()[n]}):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measuresTarget&&this.measuresTarget.setDataSource(e),this.rowsTarget&&this.rowsTarget.setDataSource(e),this.columnsTarget&&this.columnsTarget.setDataSource(e),this._bindConfigurator(),this.options.autoBind&&e.fetch()},setOptions:function(e){oe.fn.setOptions.call(this,e),this._templates()},_dataSource:function(){var t=this,n=t.options.dataSource;n=e.isArray(n)?{data:n}:n,t.dataSource&&this._refreshHandler?t.dataSource.unbind(he,t._refreshHandler).unbind(ge,t._stateResetHandler).unbind(fe,t._progressHandler).unbind("error",t._errorHandler):(t._refreshHandler=e.proxy(t.refresh,t),t._progressHandler=e.proxy(t._requestStart,t),t._stateResetHandler=e.proxy(t._stateReset,t),t._errorHandler=e.proxy(t._error,t)),t.dataSource=ne.data.PivotDataSource.create(n).bind(he,t._refreshHandler).bind(fe,t._progressHandler).bind(ge,t._stateResetHandler).bind("error",t._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_stateReset:function(){this._columnBuilder.reset(),this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-widget k-pivot"),e&&this.wrapper.css("height",e)},_measureFields:function(){this.measureFields=e(ve).addClass("k-pivot-toolbar k-header k-settings-measures"),this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(t,n){var i='<span tabindex="0" class="k-button" data-'+ne.ns+'name="${data.name}">${data.name}',r=n.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(n.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),this.options.reorderable&&(o+='<span class="k-icon k-si-close k-setting-delete"></span>'),o&&(i+='<span class="k-field-actions">'+o+"</span>"),i+="</span>",new ne.ui.PivotSettingTarget(t,e.extend({template:i,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},n))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}}),this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var t=this,n=e('<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>'),i=n.find(".k-pivot-rowheaders"),r=n.find(".k-pivot-table"),o=e(ve).addClass("k-grid k-widget");t._measureFields(),t.columnFields=e(ve).addClass("k-pivot-toolbar k-header k-settings-columns"),t.rowFields=e(ve).addClass("k-pivot-toolbar k-header k-settings-rows"),t.columnsHeader=e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'),t.columnsHeader.parent().css("padding-right",ne.support.scrollbar()),t.rowsHeader=e('<div class="k-grid k-widget k-alt"/>'),t.content=e('<div class="k-grid-content" />'),i.append(t.measureFields),i.append(t.rowFields),i.append(t.rowsHeader),o.append(t.columnsHeader.parent()),o.append(t.content),r.append(t.columnFields),r.append(o),t.wrapper.append(n),t.columnsHeaderTree=new ne.dom.Tree(t.columnsHeader[0]),t.rowsHeaderTree=new ne.dom.Tree(t.rowsHeader[0]),t.contentTree=new ne.dom.Tree(t.content[0]),t._initSettingTargets()},_progress:function(e){ne.ui.progress(this.wrapper,e)},_resize:function(){this.columnsHeader.children("table"),this.content.children("table"),this.content[0].firstChild&&(this._setSectionsWidth(),this._setSectionsHeight(),this._setContentWidth(),this._setContentHeight())},_setSectionsWidth:function(){var e=this.rowsHeader,t=e.parent(".k-pivot-rowheaders").width(me),n=Math.max(this.measureFields.outerWidth(),this.rowFields.outerWidth());n=Math.max(e.children("table").width(),n),t.width(n)},_setSectionsHeight:function(){var e=this.measureFields.height(me).height(),t=this.columnFields.height(me).height(),n=this.rowFields.height(me).innerHeight(),i=this.columnsHeader.height(me).innerHeight(),r=n-this.rowFields.height(),o=t>e?t:e,a=i>n?i:n;this.measureFields.height(o),this.columnFields.height(o),this.rowFields.height(a-r),this.columnsHeader.height(a)},_setContentWidth:function(){var e=this.content.find("table"),t=this.columnsHeader.children("table"),n=e.children("colgroup").children().length*this.options.columnWidth,i=Math.ceil(n/this.content.width()*100);100>i&&(i=100),e.add(t).css("width",i+"%"),this._resetColspan(t)},_setContentHeight:function(){var e=this,n=e.content,i=e.rowsHeader,r=e.wrapper.innerHeight(),o=ne.support.scrollbar(),a=n[0].offsetHeight===n[0].clientHeight,s=e.options.height;if(e.wrapper.is(":visible")){if(!r||!s)return a&&(o=0),n.height("auto"),i.height(n.height()-o),t;r-=e.columnFields.outerHeight(),2*o>=(r-=e.columnsHeader.outerHeight())&&(r=2*o+1,a||(r+=o)),n.height(r),a&&(o=0),i.height(r-o)}},_resetColspan:function(e){var n=this,i=e.children("tbody").children(":first").children(":first");n._colspan===t&&(n._colspan=i.attr("colspan")),i.attr("colspan",1),clearTimeout(n._layoutTimeout),n._layoutTimeout=setTimeout(function(){i.attr("colspan",n._colspan),n._colspan=t})},_axisMeasures:function(e){var t=[],n=this.dataSource,i=n.measures(),r=i.length>1||i[0]&&i[0].type;return n.measuresAxis()===e&&(0===n[e]().length||r)&&(t=i),t},items:function(){return[]},refresh:function(){var e,t=this,n=t.dataSource,i=n.axes(),r=(i.columns||{}).tuples||[],o=(i.rows||{}).tuples||[],a=t._columnBuilder,s=t._rowBuilder,l={},c={};t.trigger(be,{action:"rebind"})||(a.measures=t._axisMeasures("columns"),t.columnsHeaderTree.render(a.build(r)),t.rowsHeaderTree.render(s.build(o)),l={indexes:a._indexes,measures:a.measures,metadata:a.metadata},c={indexes:s._indexes,measures:this._axisMeasures("rows"),metadata:s.metadata},t.contentTree.render(t._contentBuilder.build(n.view(),l,c)),t._resize(),t.touchScroller?t.touchScroller.contentResized():(e=ne.touchScroller(t.content))&&e.movable&&(t.touchScroller=e,e.movable.bind("change",function(e){t.columnsHeader.scrollLeft(-e.sender.x),t.rowsHeader.scrollTop(-e.sender.y)})),t._progress(!1),t.trigger(we))},_scrollable:function(){var t=this,n=t.columnsHeader,i=t.rowsHeader;t.content.scroll(function(){n.scrollLeft(this.scrollLeft),i.scrollTop(this.scrollTop)}),i.bind("DOMMouseScroll"+_e+" mousewheel"+_e,e.proxy(t._wheelScroll,t))},_wheelScroll:function(t){var n,i;t.ctrlKey||(n=ne.wheelDeltaY(t),i=this.content.scrollTop(),n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+_e,!1),this.rowsHeader.scrollTop(i+-n),this.content.scrollTop(i+-n)))}}),$=ne.dom.element,Y=ne.dom.html,ne.dom.text,Q=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:0!==t}},X=function(e,t){for(var n=[],i=0;t>=i;i++)n.push(e.members[i].name);return n},K=function(e,t){for(var n="",i=0;t>=i;i++)n+=e.members[i].name;return n},Z=re.extend({init:function(){this.measures=1,this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[$("table",null,[n,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this._rowLength(),t=[],n=0;e>n;n++)t.push($("col",null));return $("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.map={},this.rows=[],this.rootTuple=t,this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push($("tr",null,[$("th",null,[Y("&nbsp;")])])),$("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r,o=this.rows,a=o.length,s=0;a>s;s++)if(1!==(e=o[s]).rowSpan)for(n=0,t=(i=e.children).length;t>n;n++)(r=i[n]).tupleAll&&(r.attr.rowSpan=e.rowSpan)},_rowIndex:function(e){for(var t=this.rows,n=t.length,i=0;n>i&&t[i]!==e;i++);return i},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[],t=e.length,n=0,i=0;if(t)for(;t>i;i++)n+=e[i].attr.colSpan||1;return n||(n=this.measures),n},_row:function(e,t,n){var i,r,o=this.rootTuple.members[t].name,a=e.members[t].levelNum,s=o+a,l=this.map,c=l[s];return c?(c.notFirst=!1,c.parentMember&&c.parentMember===n||(c.parentMember=n,c.collapsed=0,c.colSpan=0)):((c=$("tr",null,[])).parentMember=n,c.collapsed=0,c.colSpan=0,c.rowSpan=1,l[s]=c,(i=l[o+(+a-1)])&&(r=i.children,c.notFirst=!(!r[1]||-1!==r[1].attr.className.indexOf("k-alt"))||i.notFirst),this.rows.splice(this._rowIndex(i)+1,0,c)),c},_measures:function(e,t,n){var i,r,o,a=this.map,s=a.measureRow;for(s||(s=$("tr",null,[]),a.measureRow=s,this.rows.push(s)),r=0,o=e.length;o>r;r++)i=e[r],s.children.push(this._cell(n||"",[this._content(i,t)],i));return o},_content:function(e,t){return Y(this.template({member:e,tuple:t}))},_cell:function(e,t,n){var i=$("th",{className:"k-header"+e},t);return i.value=n.caption||n.name,i},_buildRows:function(e,n,i){var r,o,a,s,l,c,u,d,h,p,f=e.members,g=f[n],m=f[n+1],v=[],_=0,y=0,b=0;if(g.measure)return this._measures(g.children,e),t;if(d=ne.stringify(X(e,n)),r=this._row(e,n,i),s=(a=g.children).length,(h=this.metadata[d])||(this.metadata[d]=h=Q(+g.levelNum,n)),this._indexes.push({path:d,tuple:e}),g.hasChildren&&(!1===h.expanded&&(y=h.maxChildren,r.collapsed+=y,h.children=0,s=0),(u={className:"k-icon "+(s?Ce:Te)})[ne.attr("path")]=d,v.push($("span",u))),v.push(this._content(g,e)),l=this._cell(r.notFirst?" k-first":"",v,g),r.children.push(l),r.colSpan+=1,s){for(c=this._cell(" k-alt",[this._content(g,e)],g),r.children.push(c);s>_;_++)o=this._buildRows(a[_],n,g);p=o.colSpan,y=o.collapsed,l.attr.colSpan=p,h.children=p,h.members=1,r.colSpan+=p,r.collapsed+=y,r.rowSpan=o.rowSpan+1,m&&(m.measure?p=this._measures(m.children,e," k-alt"):(p=(o=this._buildRows(e,n+1)).colSpan,r.collapsed+=o.collapsed,b=o.collapsed),c.attr.colSpan=p,p-=1,h.members+=p,r.colSpan+=p)}else m&&(m.measure?p=this._measures(m.children,e):(p=(o=this._buildRows(e,n+1)).colSpan,r.collapsed+=o.collapsed,b=o.collapsed),h.members=p,p>1&&(l.attr.colSpan=p,r.colSpan+=p-1));return h.members+b>h.maxMembers&&(h.maxMembers=h.members+b),(a=h.children+y)>h.maxChildren&&(h.maxChildren=a),(c||l).tupleAll=!0,r}}),J=re.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[$("table",null,[n,t])]},reset:function(){this.metadata={}},_rowLength:function(){for(var e=this.rows[0].children,t=0,n=0,i=e[n];i;)t+=i.attr.colSpan||1,i=e[++n];return t},_colGroup:function(){for(var e=this._rowLength(),t=[],n=0;e>n;n++)t.push($("col",null));return $("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.rootTuple=t,this.rows=[],this.map={},this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push($("tr",null,[$("td",null,[Y("&nbsp;")])])),$("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r=this.rows,o=r.length,a=0,s=this.rootTuple.members,l=s[0].name,c=s.length,u=0,d=this.map;o>a;a++)for(e=r[a],u=0;c>u;u++)n=this[s[u].name],(t=e.colSpan["dim"+u])&&n>t.levelNum&&(t.attr.colSpan=n-t.levelNum+1);e=d[l],i=d[l+"all"],e&&(e.children[0].attr.className="k-first"),i&&(i.children[0].attr.className+=" k-first")},_row:function(e){var t=$("tr",null,e);return t.rowSpan=1,t.colSpan={},this.rows.push(t),t},_content:function(e,t){return Y(this.template({member:e,tuple:t}))},_cell:function(e,t,n){var i=$("td",{className:e},t);return i.value=n.caption||n.name,i},_buildRows:function(e,t){var n,i,r,o,a,s,l,c,u,d=this.map,h=e.members,p=h[t],f=h[t+1],g=p.children,m=g.length,v=+p.levelNum+1,_=this.rootTuple.members[t].name,y=X(e,t-1).join(""),b=y+(p.parentName||""),w=d[b+"all"]||d[b],k=[];if(!w||w.hasChild?w=this._row():w.hasChild=!0,p.measure){for(a=w.allCell?"k-grid-footer":"",w.children.push(this._cell(a,[this._content(g[0],e)],g[0])),w.rowSpan=m,u=1;m>u;u++)this._row([this._cell(a,[this._content(g[u],e)],g[u])]);return w}if(d[y+p.name]=w,n=ne.stringify(X(e,t)),(o=this.metadata[n])||(this.metadata[n]=o=Q(v-1,t)),this._indexes.push({path:n,tuple:e}),p.hasChildren&&(!1===o.expanded&&(m=0,o.children=0),(s={className:"k-icon "+(m?Ce:Te)})[ne.attr("path")]=n,k.push($("span",s))),k.push(this._content(p,e)),a=w.allCell&&!m?"k-grid-footer":"",(c=this._cell(a,k,p)).levelNum=v,w.children.push(c),w.colSpan["dim"+t]=c,(!this[_]||v>this[_])&&(this[_]=v),m){for(w.allCell=!1,w.hasChild=!1,u=0;m>u;u++)w!==(i=this._buildRows(g[u],t))&&(w.rowSpan+=i.rowSpan);w.rowSpan>1&&(c.attr.rowSpan=w.rowSpan),o.children=w.rowSpan,(l=this._cell("k-grid-footer",[this._content(p,e)],p)).levelNum=v,(r=this._row([l])).colSpan["dim"+t]=l,r.allCell=!0,d[y+p.name+"all"]=r,f&&(i=this._buildRows(e,t+1),l.attr.rowSpan=i.rowSpan),w.rowSpan+=r.rowSpan,o.members=r.rowSpan}else f&&(w.hasChild=!1,this._buildRows(e,t+1),(l||c).attr.rowSpan=w.rowSpan,o.members=w.rowSpan);return o.children>o.maxChildren&&(o.maxChildren=o.children),o.members>o.maxMembers&&(o.maxMembers=o.members),w}}),ee=re.extend({init:function(){this.columnAxis={},this.rowAxis={}},build:function(e,n,i){var r,o,a=n.indexes[0],s=n.metadata[a?a.path:t];return this.columnAxis=n,this.rowAxis=i,this.data=e,this.rowLength=s?s.maxChildren+s.maxMembers:n.measures.length||1,this.rowLength||(this.rowLength=1),r=this._tbody(),o=this._colGroup(),[$("table",null,[o,r])]},_colGroup:function(){var e=this.columnAxis.measures.length||1,t=[],n=0;for(this.rows[0]&&(e=this.rows[0].children.length);e>n;n++)t.push($("col",null));return $("colgroup",null,t)},_tbody:function(){return this.rows=[],this.data[0]?(this.columnIndexes=this._indexes(this.columnAxis,this.rowLength),this.rowIndexes=this._indexes(this.rowAxis,Math.ceil(this.data.length/this.rowLength)),this._buildRows()):this.rows.push($("tr",null,[$("td",null,[Y("&nbsp;")])])),$("tbody",null,this.rows)},_indexes:function(e,n){var i,r,o,a,s,l=[],c=e.indexes,u=e.metadata,d=e.measures,h=d.length||1,p=0,f=0,g=0,m=c.length;if(!m){for(o=0;h>o;o++)l[o]={index:o,measure:d[o],tuple:null};return l}for(;m>g;g++){if(s=0,(a=(r=u[(i=c[g]).path]).children+r.members)&&(a-=h),!1===r.expanded&&r.children!==r.maxChildren&&(s=r.maxChildren),r.parentMember&&0===r.levelNum&&(a=-1),a>-1){for(o=0;h>o;o++)l[a+f+o]={children:a,index:p,measure:d[o],tuple:i.tuple},p+=1;for(;l[f]!==t;)f+=1}if(f===n)break;p+=s}return l},_buildRows:function(){for(var e=this.rowIndexes,t=e.length,n=0;t>n;n++)this.rows.push(this._buildRow(e[n]))},_buildRow:function(e){for(var t,n,i,r,o,a,s,l=e.index*this.rowLength,c=this.columnIndexes,u=c.length,d=[],h=0;u>h;h++)o={},(t=c[h]).children&&(o.className="k-alt"),r="",a=this.data[l+t.index],s=t.measure||e.measure,n={columnTuple:t.tuple,rowTuple:e.tuple,measure:s,dataItem:a},""!==a.value&&s&&s.type&&("status"===s.type?r=this.kpiStatusTemplate(n):"trend"===s.type&&(r=this.kpiTrendTemplate(n))),r||(r=this.dataTemplate(n)),(i=$("td",o,[Y(r)])).value=a.value,d.push(i);return o={},e.children&&(o.className="k-grid-footer"),$("tr",o,d)}}),ie.plugin(G),ne.PivotExcelExporter=ne.Class.extend({init:function(e){this.options=e,this.widget=e.widget,this.dataSource=this.widget.dataSource},_columns:function(){var e,t=this.widget.columnsHeaderTree.children[0],n=this.widget.rowsHeaderTree.children[0],i=t.children[0].children.length,r=n.children[0].children.length,o=this.widget.options.columnWidth,a=[];if(r&&this.dataSource.data()[0])for(e=0;r>e;e++)a.push({autoWidth:!0});for(e=0;i>e;e++)a.push({autoWidth:!1,width:o});return a},_cells:function(e,t,n){for(var i,r,o,a,s,l=[],c=0,u=e.length;u>c;c++){for(r=[],i=(o=e[c].children).length,a=0;i>a;a++)s=o[a],r.push({background:"#7a7a7a",color:"#fff",value:s.value,colSpan:s.attr.colSpan||1,rowSpan:s.attr.rowSpan||1});n&&n(r,c),l.push({cells:r,type:t})}return l},_rows:function(){var e,t,n=this.widget.columnsHeaderTree.children[0],i=this.widget.rowsHeaderTree.children[0],r=n.children[0].children.length,o=i.children[0].children.length,a=n.children[1].children,s=i.children[1].children,l=this.widget.contentTree.children[0].children[1].children,c=this._cells(a,"header");return o&&c[0].cells.splice(0,0,{background:"#7a7a7a",color:"#fff",value:"",colSpan:o,rowSpan:a.length}),e=function(e,t){for(var n,i=0,o=l[t].children;r>i;i++)n=+o[i].value,isNaN(n)&&(n=""),e.push({background:"#dfdfdf",color:"#333",value:n,colSpan:1,rowSpan:1})},t=this._cells(s,"data",e),c.concat(t)},_freezePane:function(){var e=this.widget.columnsHeaderTree.children[0];return{colSplit:this.widget.rowsHeaderTree.children[0].children[0].children.length,rowSplit:e.children[1].children.length}},workbook:function(){var t;return this.dataSource.view()[0]?(t=e.Deferred()).resolve():t=this.dataSource.fetch(),t.then(e.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:null}]}},this))}}),te={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var t=this.options.excel||{};new ne.PivotExcelExporter({widget:this}).workbook().then(e.proxy(function(e){if(!this.trigger("excelExport",{workbook:e})){var n=new ne.ooxml.Workbook(e);ne.saveAs({dataURI:n.toDataURL(),fileName:e.fileName||t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy})}},this))}},ne.PivotExcelMixin=te,ne.ooxml&&ne.ooxml.Workbook&&te.extend(G.prototype),ne.PDFMixin&&(ne.PDFMixin.extend(G.prototype),G.fn._drawPDF=function(){return this._drawPDFShadow({width:this.wrapper.width()})})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=e.proxy,o=e.extend,a="visibility",s="k-state-hover";i.HierarchicalDragAndDrop=n.Class.extend({init:function(t,a){this.element=t,this.hovered=t,this.options=o({dragstart:e.noop,drag:e.noop,drop:e.noop,dragend:e.noop},a),this._draggable=new i.Draggable(t,{ignore:"input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-expand,span.k-icon.k-i-collapse",filter:a.filter,autoScrolL:a.autoScroll,cursorOffset:{left:10,top:n.support.mobileOS?-40/n.support.zoomLevel():10},hint:r(this._hint,this),dragstart:r(this.dragstart,this),dragcancel:r(this.dragcancel,this),drag:r(this.drag,this),dragend:r(this.dragend,this),$angular:a.$angular})},_hint:function(e){return"<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />"+this.options.hintText(e)+"</div>"},_removeTouchHover:function(){n.support.touch&&this.hovered&&(this.hovered.find("."+s).removeClass(s),this.hovered=!1)},_hintStatus:function(n){var i=this._draggable.hint.find(".k-drag-status")[0];return n?(i.className="k-icon k-drag-status "+n,t):e.trim(i.className.replace(/k-(icon|drag-status)/g,""))},dragstart:function(t){this.source=t.currentTarget.closest(this.options.itemSelector),this.options.dragstart(this.source)&&t.preventDefault(),this.dropHint=this.options.reorderable?e("<div class='k-drop-hint' />").css(a,"hidden").appendTo(this.element):e()},drag:function(t){var i,r,o,l,c,u,d,h,p,f,g,m=this.options,v=this.source,_=this.dropTarget=e(n.eventTarget(t)),y=_.closest(m.allowedContainers);y.length?v[0]==_[0]||m.contains(v[0],_[0])?g="k-denied":(g="k-insert-middle",(i=(p=m.itemFromTarget(_)).item).length?(this._removeTouchHover(),r=i.outerHeight(),l=p.content,m.reorderable?(c=r/(l.length>0?4:2),u=(o=n.getOffset(i).top)+c>t.y.location,d=t.y.location>o+r-c,h=l.length&&!u&&!d):(h=!0,u=!1,d=!1),this.hovered=!!h&&y,this.dropHint.css(a,h?"hidden":"visible"),this._lastHover&&this._lastHover[0]!=l[0]&&this._lastHover.removeClass(s),this._lastHover=l.toggleClass(s,h),h?g="k-add":((f=i.position()).top+=u?0:r,this.dropHint.css(f)[u?"prependTo":"appendTo"](m.dropHintContainer(i)),u&&p.first&&(g="k-insert-top"),d&&p.last&&(g="k-insert-bottom"))):_[0]!=this.dropHint[0]&&(this._lastHover&&this._lastHover.removeClass(s),g=e.contains(this.element[0],y[0])?"k-denied":"k-add")):(g="k-denied",this._removeTouchHover()),this.options.drag({originalEvent:t.originalEvent,source:v,target:_,pageY:t.y.location,pageX:t.x.location,status:g.substring(2),setStatus:function(e){g=e}}),"k-denied"==g&&this._lastHover&&this._lastHover.removeClass(s),0!==g.indexOf("k-insert")&&this.dropHint.css(a,"hidden"),this._hintStatus(g)},dragcancel:function(){this.dropHint.remove()},dragend:function(e){var n,i,r,o="over",l=this.source,c=this.dropHint,u=this.dropTarget;return"visible"==c.css(a)?(o=this.options.dropPositionFrom(c),n=c.closest(this.options.itemSelector)):u&&((n=u.closest(this.options.itemSelector)).length||(n=u.closest(this.options.allowedContainers))),i={originalEvent:e.originalEvent,source:l[0],destination:n[0],valid:"k-denied"!=this._hintStatus(),setValid:function(e){this.valid=e},dropTarget:u[0],position:o},r=this.options.drop(i),c.remove(),this._removeTouchHover(),this._lastHover&&this._lastHover.removeClass(s),!i.valid||r?(this._draggable.dropped=i.valid,t):(this._draggable.dropped=!0,this.options.dragend({originalEvent:e.originalEvent,source:l,destination:n,position:o}),t)},destroy:function(){this._lastHover=this.hovered=null,this._draggable.destroy()}})}(window.kendo.jQuery),function(e,t){function n(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function i(e){return h.template(e,{useWithBlock:!1})}function r(e){return e.find("> div .k-checkbox [type=checkbox]")}function o(e){return function(t,n){var i,r=(n=n.closest(N)).parent();return r.parent().is("li")&&(i=r.parent()),this._dataSourceMove(t,r,i,function(t,i){return this._insert(t.data(),i,n.index()+e)})}}function a(t){var n=t.children("div"),i=t.children("ul"),r=n.children(".k-icon"),o=t.children(":checkbox"),a=n.children(".k-in");t.hasClass("k-treeview")||(n.length||(n=e("<div />").prependTo(t)),!r.length&&i.length?r=e("<span class='k-icon' />").prependTo(n):i.length&&i.children().length||(r.remove(),i.remove()),o.length&&e("<span class='k-checkbox' />").appendTo(n).append(o),a.length||((a=t.children("a").eq(0).addClass("k-in")).length||(a=e("<span class='k-in' />")),a.appendTo(n),n.length&&function(t,n){for(var i;t&&"ul"!=t.nodeName.toLowerCase();)i=t,t=t.nextSibling,3==i.nodeType&&(i.nodeValue=e.trim(i.nodeValue)),d.test(i.className)?n.insertBefore(i,n.firstChild):n.appendChild(i)}(n[0].nextSibling,a[0])))}var s,l,c,u,d,h=window.kendo,p=h.ui,f=h.data,g=e.extend,m=h.template,v=e.isArray,_=p.Widget,y=f.HierarchicalDataSource,b=e.proxy,w=h.keys,k=".kendoTreeView",x="select",C="check",T="navigate",S="change",D="error",A="checked",M="indeterminate",E="dragstart",I="drag",R="drop",P="dragend",L="dataBound",F="click",B="undefined",z="k-state-hover",H="k-treeview",N=".k-item",O="string",V="aria-selected",U="aria-disabled",W={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},j=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&typeof e.nodeName===O};l=n(".k-group"),c=n(".k-group,.k-content"),u=function(e){return e.children("div").children(".k-icon")},d=/k-sprite/,s=h.ui.DataBoundWidget.extend({init:function(e,t){var n,i,r=this,o=t&&!!t.dataSource;v(t)&&(t={dataSource:t}),t&&typeof t.loadOnDemand==B&&v(t.dataSource)&&(t.loadOnDemand=!1),_.prototype.init.call(r,e,t),e=r.element,t=r.options,n=e.is("ul")&&e||e.hasClass(H)&&e.children("ul"),(i=!o&&n.length)&&(t.dataSource.list=n),r._animation(),r._accessors(),r._templates(),e.hasClass(H)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),n&&(r.root=e,r._group(r.wrapper))),r._tabindex(),r.root.attr("role","tree"),r._dataSource(i),r._attachEvents(),r._dragging(),i?r._syncHtmlAndDataSource():t.autoBind&&(r._progress(!0),r.dataSource.fetch()),t.checkboxes&&t.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=h.format("{0}_tv_active",r.element[0].id)),h.notify(r)},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",i="mouseenter";t.wrapper.on(i+k,".k-in.k-state-selected",function(e){e.preventDefault()}).on(i+k,n,function(){e(this).addClass(z)}).on("mouseleave"+k,n,function(){e(this).removeClass(z)}).on(F+k,n,b(t._click,t)).on("dblclick"+k,".k-in:not(.k-state-disabled)",b(t._toggleButtonClick,t)).on(F+k,".k-plus,.k-minus",b(t._toggleButtonClick,t)).on("keydown"+k,b(t._keydown,t)).on("focus"+k,b(t._focus,t)).on("blur"+k,b(t._blur,t)).on("mousedown"+k,".k-in,.k-checkbox :checkbox,.k-plus,.k-minus",b(t._mousedown,t)).on("change"+k,".k-checkbox :checkbox",b(t._checkboxChange,t)).on("click"+k,".k-checkbox :checkbox",b(t._checkboxClick,t)).on("click"+k,".k-request-retry",b(t._retryRequest,t)).on("click"+k,function(n){e(n.target).is(":kendoFocusable")||t.focus()})},_checkboxClick:function(t){var n=e(t.target);n.data(M)&&(n.data(M,!1).prop(M,!1).prop(A,!0),this._checkboxChange(t))},_syncHtmlAndDataSource:function(e,t){var n,i,o,a,s,l,c,u;for(e=e||this.root,n=(t=t||this.dataSource).view(),i=h.attr("uid"),o=h.attr("expanded"),a=this.options.checkboxes,s=e.children("li"),l=0;s.length>l;l++)u=n[l],(c=s.eq(l)).attr("role","treeitem").attr(i,u.uid),u.expanded="true"===c.attr(o),a&&(u.checked=r(c).prop(A)),this._syncHtmlAndDataSource(c.children("ul"),u.children)},_animation:function(){var e=this.options,t=e.animation;!1===t?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=g({reverse:!0},t.expand)),g(t.collapse,{hide:!0}),e.animation=t},_dragging:function(){var t,n=this.options.dragAndDrop,i=this.dragging;n&&!i?(t=this,this.dragging=new p.HierarchicalDragAndDrop(this.element,{reorderable:!0,$angular:this.options.$angular,autoScroll:this.options.autoScroll,filter:"div:not(.k-state-disabled) .k-in",allowedContainers:".k-treeview",itemSelector:".k-treeview .k-item",hintText:b(this._hintText,this),contains:function(t,n){return e.contains(t,n)},dropHintContainer:function(e){return e},itemFromTarget:function(e){var t=e.closest(".k-top,.k-mid,.k-bot");return{item:t,content:e.closest(".k-in"),first:t.hasClass("k-top"),last:t.hasClass("k-bot")}},dropPositionFrom:function(e){return e.prevAll(".k-in").length>0?"after":"before"},dragstart:function(e){return t.trigger(E,{sourceNode:e[0]})},drag:function(e){t.trigger(I,{originalEvent:e.originalEvent,sourceNode:e.source[0],dropTarget:e.target[0],pageY:e.pageY,pageX:e.pageX,statusClass:e.status,setStatusClass:e.setStatus})},drop:function(e){return t.trigger(R,{originalEvent:e.originalEvent,sourceNode:e.source,destinationNode:e.destination,valid:e.valid,setValid:function(t){this.valid=t,e.setValid(t)},dropTarget:e.dropTarget,dropPosition:e.position})},dragend:function(e){function n(n){t.updateIndeterminate(),t.trigger(P,{originalEvent:e.originalEvent,sourceNode:n&&n[0],destinationNode:r[0],dropPosition:o})}var i=e.source,r=e.destination,o=e.position;"over"==o?t.append(i,r,n):("before"==o?i=t.insertBefore(i,r):"after"==o&&(i=t.insertAfter(i,r)),n(i))}})):!n&&i&&(i.destroy(),this.dragging=null)},_hintText:function(e){return this.templates.dragClue({item:this.dataItem(e),treeview:this.options})},_templates:function(){var e=this,t=e.options,n=b(e._fieldAccessor,e);t.template&&typeof t.template==O?t.template=m(t.template):t.template||(t.template=i("# var text = "+n("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",i=t.index,r=e.length-1;return e.firstLevel&&0===i&&(n+="k-top "),n+(0===i&&i!=r?"k-top":i==r?"k-bot":"k-mid")},textClass:function(e){var t="k-in";return!1===e.enabled&&(t+=" k-state-disabled"),!0===e.selected&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return t+=!0!==e.expanded?" k-plus":" k-minus",!1===e.enabled&&(t+="-disabled"),t},groupAttributes:function(e){var t="";return e.firstLevel||(t="role='group'"),t+(!0!==e.expanded?" style='display:none'":"")},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:i("#= data.treeview.template(data) #"),group:i("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:i("# var imageUrl = "+n("imageUrl")+"(data.item); ## var spriteCssClass = "+n("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"),itemElement:i("# var item = data.item, r = data.r; ## var url = "+n("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #' role='presentation' /># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag#  class='#= r.textClass(item) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:i("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+h.attr("uid")+"='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''## if (item.expanded) { #data-expanded='true' aria-expanded='true'# } #>#= r.itemElement(data) #</li>"),loading:i("<div class='k-icon k-loading' /> #: data.messages.loading #"),retry:i("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item > div:first-child")},setDataSource:function(t){var n=this.options;n.dataSource=t,this._dataSource(),n.checkboxes&&n.checkboxes.checkChildren&&this.dataSource.one("change",e.proxy(this.updateIndeterminate,this,null)),this.dataSource.fetch()},_bindDataSource:function(){this._refreshHandler=b(this.refresh,this),this._errorHandler=b(this._error,this),this.dataSource.bind(S,this._refreshHandler),this.dataSource.bind(D,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(S,this._refreshHandler),e.unbind(D,this._errorHandler))},_dataSource:function(e){var t=this,n=t.options.dataSource;n=v(n)?{data:n}:n,t._unbindDataSource(),n.fields||(n.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),t.dataSource=n=y.create(n),e&&(n.fetch(),function e(t){for(var n=0;t.length>n;n++)t[n]._initChildren(),t[n].children.fetch(),e(t[n].children.view())}(n.view())),t._bindDataSource()},events:[E,I,R,P,L,"expand","collapse",x,S,T,C],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,autoScroll:!1,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e,t,n,i=this.options,r=this.element;for(e in W)t=i[W[e]],n=r.attr(h.attr(e+"-field")),!t&&n&&(t=n),t||(t=e),v(t)||(t=[t]),i[W[e]]=t},_fieldAccessor:function(t){var n=this.options[W[t]],i=n.length,r="(function(item) {";return 0===i?r+="return item['"+t+"'];":(r+="var levels = ["+e.map(n,function(e){return"function(d){ return "+h.expr(e)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+i+"-1)](item)"),r+"})"},setOptions:function(e){_.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(N)[0]})},_setChecked:function(t,n){if(t&&e.isFunction(t.view))for(var i=0,r=t.view();r.length>i;i++)r[i][A]=n,r[i].children&&this._setChecked(r[i].children,n)},_setIndeterminate:function(e){var t,n,i,o=l(e),a=!0;if(o.length&&(n=(t=r(o.children())).length)){if(n>1){for(i=1;n>i;i++)if(t[i].checked!=t[i-1].checked||t[i].indeterminate||t[i-1].indeterminate){a=!1;break}}else a=!t[0].indeterminate;return r(e).data(M,!a).prop(M,!a).prop(A,a&&t[0].checked)}},updateIndeterminate:function(e){var t,n,i;if(e=e||this.wrapper,(t=l(e).children()).length){for(n=0;t.length>n;n++)this.updateIndeterminate(t.eq(n));(i=this._setIndeterminate(e))&&i.prop(A)&&(this.dataItem(e).checked=!0)}},_bubbleIndeterminate:function(e){if(e.length){var t,n=this.parent(e);n.length&&(this._setIndeterminate(n),!1===(t=n.children("div").find(".k-checkbox :checkbox")).prop(M)?this.dataItem(n).set(A,t.prop(A)):delete this.dataItem(n).checked,this._bubbleIndeterminate(n))}},_checkboxChange:function(t){var n=e(t.target),i=n.prop(A),r=n.closest(N),o=this.dataItem(r);o.checked!=i&&(o.set(A,i),this._trigger(C,r))},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(N))},_mousedown:function(t){var n=e(t.currentTarget).closest(N);this._clickTarget=n,this.current(n)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select(),n=this._clickTarget;h.support.touch||(n&&n.length&&(t=n),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,n=t[0],i=[],r=[],o=document.documentElement;do{(n=n.parentNode).scrollHeight>n.clientHeight&&(i.push(n),r.push(n.scrollTop))}while(n!=o);for(t.focus(),e=0;i.length>e;e++)i[e].scrollTop=r[e]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var n,i,r=/\bk-treeview\b/,o=/\bk-item\b/;typeof t==O&&(t=this.element.find(t)),j(t)||(t=t[0]),i=o.test(t.className);do{t=t.parentNode,o.test(t.className)&&(i?n=t:i=!0)}while(!r.test(t.className)&&!n);return e(n)},_nextVisible:function(e){function t(e){for(;e.length&&!e.next().length;)e=i.parent(e);return e.next().length?e.next():e}var n,i=this,r=i._expanded(e);return e.length&&e.is(":visible")?r&&(n=l(e).children().first()).length||(n=t(e)):n=i.root.children().eq(0),i._enabled(n)||(n=i._nextVisible(n)),n},_previousVisible:function(e){var t,n,i=this;if(!e.length||e.prev().length)for(n=e.length?e.prev():i.root.children().last();i._expanded(n)&&(t=l(n).children().last()).length;)n=t;else n=i.parent(e)||e;return i._enabled(n)||(n=i._previousVisible(n)),n},_keydown:function(n){var i,r=this,o=n.keyCode,a=r.current(),s=r._expanded(a),l=a.find(".k-checkbox:first :checkbox"),c=h.support.isRtl(r.element);n.target==n.currentTarget&&(!c&&o==w.RIGHT||c&&o==w.LEFT?s?i=r._nextVisible(a):r.expand(a):!c&&o==w.LEFT||c&&o==w.RIGHT?s?r.collapse(a):(i=r.parent(a),r._enabled(i)||(i=t)):o==w.DOWN?i=r._nextVisible(a):o==w.UP?i=r._previousVisible(a):o==w.HOME?i=r._nextVisible(e()):o==w.END?i=r._previousVisible(e()):o==w.ENTER?a.find(".k-in:first").hasClass("k-state-selected")||r._trigger(x,a)||r.select(a):o==w.SPACEBAR&&l.length&&(l.prop(A,!l.prop(A)).data(M,!1).prop(M,!1),r._checkboxChange({target:l}),i=a),i&&(n.preventDefault(),a[0]!=i[0]&&(r._trigger(T,i),r.current(i))))},_click:function(t){var n=e(t.currentTarget),i=c(n.closest(N)),r=n.attr("href");(r?"#"==r||r.indexOf("#"+this.element.id+"-")>=0:i.length&&!i.children().length)&&t.preventDefault(),n.hasClass(".k-state-selected")||this._trigger(x,n)||this.select(n)},_wrapper:function(){var e,t,n=this,i=n.element;i.is("ul")?(e=i.wrap("<div />").parent(),t=i):t=(e=i).children("ul").eq(0),n.wrapper=e.addClass("k-widget k-treeview"),n.root=t},_group:function(e){var t=this,n=e.hasClass(H),i={firstLevel:n,expanded:n||t._expanded(e)},r=e.children("ul");r.addClass(t.templates.groupCssClass(i)).css("display",i.expanded?"":"none"),t._nodes(r,i)},_nodes:function(t,n){var i,r=this,o=t.children("li");n=g({length:o.length},n),o.each(function(t,o){o=e(o),i={index:t,expanded:r._expanded(o)},a(o),r._updateNodeClasses(o,n,i),r._group(o)})},_checkboxes:function(){var e,t=this.options,n=t.checkboxes;n&&(e="<input type='checkbox' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",n.name&&(e+=" name='"+n.name+"'"),typeof(n=g({template:e+=" />"},t.checkboxes)).template==O&&(n.template=m(n.template)),t.checkboxes=n)},_updateNodeClasses:function(e,t,n){var i=e.children("div"),r=e.children("ul"),o=this.templates;e.hasClass("k-treeview")||((n=n||{}).expanded=typeof n.expanded!=B?n.expanded:this._expanded(e),n.index=typeof n.index!=B?n.index:e.index(),n.enabled=typeof n.enabled!=B?n.enabled:!i.children(".k-in").hasClass("k-state-disabled"),(t=t||{}).firstLevel=typeof t.firstLevel!=B?t.firstLevel:e.parent().parent().hasClass(H),t.length=typeof t.length!=B?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(o.wrapperCssClass(t,n)),i.removeClass("k-top k-mid k-bot").addClass(o.cssClass(t,n)),i.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(o.textClass(n)),(r.length||"true"==e.attr("data-hasChildren"))&&(i.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(o.toggleButtonClass(n)),r.addClass("k-group")))},_processNodes:function(t,n){var i=this;i.element.find(t).each(function(t,r){n.call(i,t,e(r).closest(N))})},dataItem:function(t){var n=e(t).closest(N).attr(h.attr("uid")),i=this.dataSource;return i&&i.getByUid(n)},_insertNode:function(t,n,i,r,o){var s,c,u,d,h=this,p=l(i),f=p.children().length+1,g={firstLevel:i.hasClass(H),expanded:!o,length:f},m="",v=function(e,t){e.appendTo(t)};for(u=0;t.length>u;u++)(d=t[u]).index=n+u,m+=h._renderItem({group:g,item:d});if((c=e(m)).length){for(h.angular("compile",function(){return{elements:c.get(),data:t.map(function(e){return{dataItem:e}})}}),p.length||(p=e(h._renderGroup({group:g})).appendTo(i)),r(c,p),i.hasClass("k-item")&&(a(i),h._updateNodeClasses(i)),h._updateNodeClasses(c.prev().first()),h._updateNodeClasses(c.next().last()),u=0;t.length>u;u++)(d=t[u]).hasChildren&&(s=d.children.data()).length&&h._insertNode(s,d.index,c.eq(u),v,!h._expanded(c.eq(u)));return c}},_updateNodes:function(t,n){function i(e,t){e.find(".k-checkbox :checkbox").prop(A,t).data(M,!1).prop(M,!1)}var r,o,a,s,l,u,d,h=this,f={treeview:h.options,item:s},g="expanded"!=n&&"checked"!=n;if("selected"==n)s=t[0],o=h.findByUid(s.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",s[n]).end(),s[n]&&h.current(o),o.attr(V,!!s[n]);else{for(d=e.map(t,function(e){return h.findByUid(e.uid).children("div")}),g&&h.angular("cleanup",function(){return{elements:d}}),r=0;t.length>r;r++)f.item=s=t[r],o=(a=d[r]).parent(),g&&a.children(".k-in").html(h.templates.itemContent(f)),n==A?(i(a,l=s[n]),h.options.checkboxes.checkChildren&&(i(o.children(".k-group"),l),h._setChecked(s.children,l),h._bubbleIndeterminate(o))):"expanded"==n?h._toggle(o,s,s[n]):"enabled"==n&&(o.find(".k-checkbox :checkbox").prop("disabled",!s[n]),u=!c(o).is(":visible"),o.removeAttr(U),s[n]||(s.selected&&s.set("selected",!1),s.expanded&&s.set("expanded",!1),u=!0,o.attr(V,!1).attr(U,!0)),h._updateNodeClasses(o,{},{enabled:s[n],expanded:!u})),a.length&&this.trigger("itemChange",{item:a,data:s,ns:p});g&&h.angular("compile",function(){return{elements:d,data:e.map(t,function(e){return[{dataItem:e}]})}})}},_appendItems:function(e,t,n){var i=l(n).children(),r=!this._expanded(n);typeof e==B&&(e=i.length),this._insertNode(t,e,n,function(t,n){e>=i.length?t.appendTo(n):t.insertBefore(i.eq(e))},r),this._expanded(n)&&(this._updateNodeClasses(n),l(n).css("display","block"))},_refreshChildren:function(e,t,n){var i,r,o,s=this.options,c=s.loadOnDemand,u=s.checkboxes&&s.checkboxes.checkChildren;if(l(e).empty(),t.length)for(this._appendItems(n,t,e),r=l(e).children(),c&&u&&this._bubbleIndeterminate(r.last()),i=0;r.length>i;i++)o=r.eq(i),this.trigger("itemChange",{item:o.children("div"),data:this.dataItem(o),ns:p});else a(e)},_refreshRoot:function(t){var n,i,r,o=this._renderGroup({items:t,group:{firstLevel:!0,expanded:!0}});for(this.root.length?(this._angularItems("cleanup"),n=e(o),this.root.attr("class",n.attr("class")).html(n.html())):this.root=this.wrapper.html(o).children("ul"),this.root.attr("role","tree"),i=0;t.length>i;i++)r=this.root.children(".k-item"),this.trigger("itemChange",{item:r.eq(i),data:t[i],ns:p});this._angularItems("compile")},refresh:function(e){var n,i,r=e.node,o=e.action,a=e.items,s=this.wrapper,l=this.options,c=l.loadOnDemand,u=l.checkboxes&&l.checkboxes.checkChildren;if(e.field){if(!a[0]||!a[0].level)return;return this._updateNodes(a,e.field)}if(r&&(s=this.findByUid(r.uid),this._progress(s,!1)),u&&"remove"!=o){for(i=!1,n=0;a.length>n;n++)if("checked"in a[n]){i=!0;break}if(!i&&r&&r.checked)for(n=0;a.length>n;n++)a[n].checked=!0}if("add"==o?this._appendItems(e.index,a,s):"remove"==o?this._remove(this.findByUid(a[0].uid),!1):"itemchange"==o?this._updateNodes(a):"itemloaded"==o?this._refreshChildren(s,a,e.index):this._refreshRoot(a),"remove"!=o)for(n=0;a.length>n;n++)(!c||a[n].expanded)&&a[n].load();this.trigger(L,{node:r?s:t})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),n=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),u(t).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(n))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2!=arguments.length||!!t,this._processNodes(e,function(e,n){this.dataItem(n).set("enabled",t)})},current:function(n){var i=this,r=i._current,o=i.element,a=i._ariaId;return arguments.length>0&&n&&n.length?(r&&(r[0].id===a&&r.removeAttr("id"),r.find(".k-in:first").removeClass("k-state-focused")),(r=i._current=e(n,o).closest(N)).find(".k-in:first").addClass("k-state-focused"),(a=r[0].id||a)&&(i.wrapper.removeAttr("aria-activedescendant"),r.attr("id",a),i.wrapper.attr("aria-activedescendant",a)),t):(r||(r=i._nextVisible(e())),r)},select:function(n){var i=this,r=i.element;return arguments.length?(n=e(n,r).closest(N),r.find(".k-state-selected").each(function(){var t=i.dataItem(this);t?(t.set("selected",!1),delete t.selected):e(this).removeClass("k-state-selected")}),n.length&&i.dataItem(n).set("selected",!0),i.trigger(S),t):r.find(".k-state-selected").closest(N)},_toggle:function(e,t,n){var i,r,o=this.options,a=c(e),s=n?"expand":"collapse";a.data("animating")||this._trigger(s,e)||(this._expanded(e,n),i=t&&t.loaded(),r=!a.children().length,!n||i&&!r?(this._updateNodeClasses(e,{},{expanded:n}),n||a.css("height",a.height()).css("height"),a.kendoStop(!0,!0).kendoAnimate(g({reset:!0},o.animation[s],{complete:function(){n&&a.css("height","")}}))):(o.loadOnDemand&&this._progress(e,!0),a.remove(),t.load()))},toggle:function(t,n){t=e(t),u(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(n=!this._expanded(t)),this._expanded(t,n))},destroy:function(){var e=this;_.fn.destroy.call(e),e.wrapper.off(k),e._unbindDataSource(),e.dragging&&e.dragging.destroy(),h.destroy(e.element),e.root=e.wrapper=e.element=null},_expanded:function(e,n){var i=h.attr("expanded"),r=this.dataItem(e);return 1==arguments.length?"true"===e.attr(i)||r&&r.expanded:(c(e).data("animating")||(r&&(r.set("expanded",n),n=r.expanded),n?(e.attr(i,"true"),e.attr("aria-expanded","true")):(e.removeAttr(i),e.attr("aria-expanded","false"))),t)},_progress:function(e,t){var n=this.element,i=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e)?n.html(i):n.empty():u(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,n){var i=this.dataItem(e),r=this.options[W.text],o=i.level(),a=r.length,s=r[Math.min(o,a-1)];return n?(i.set(s,n),t):i[s]},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(t,n,i,r){var o,a=this._objectOrSelf(i||n),s=a.dataSource,l=e.Deferred().resolve().promise();return i&&i[0]!=a.element[0]&&((o=a.dataItem(i)).loaded()||(a._progress(i,!0),l=o.load()),i!=this.root&&((s=o.children)&&s instanceof y||(o._initChildren(),o.loaded(!0),s=o.children))),t=this._toObservableData(t),r.call(this,s,t,l)},_toObservableData:function(t){var n,i,r=t;return(t instanceof window.jQuery||j(t))&&(n=this._objectOrSelf(t).dataSource,i=e(t).attr(h.attr("uid")),(r=n.getByUid(i))&&(r=n.remove(r))),r},_insert:function(e,t,n){t instanceof h.data.ObservableArray?t=t.toJSON():v(t)||(t=[t]);var i=e.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),e.splice.apply(e,[n,0].concat(t)),this.findByUid(e[n].uid)},insertAfter:o(1),insertBefore:o(0),append:function(t,n,i){var r=this,o=r.root;return n&&(o=l(n)),r._dataSourceMove(t,o,n,function(t,o,a){var s;return a.then(function(){s=function(){n&&r._expanded(n,!0);var e=t.data(),i=Math.max(e.length,0);return r._insert(e,o,i)}(),(i=i||e.noop)(s)}),s||null})},_remove:function(t,n){var i,r,o,s=this;return t=e(t,s.element),this.angular("cleanup",function(){return{elements:t.get()}}),i=t.parent().parent(),r=t.prev(),o=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(a(i),s._updateNodeClasses(i)),s._updateNodeClasses(r),s._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,i){return e(i).text()==t}).closest(N)},findByUid:function(t){var n,i,r=this.element.find(".k-item"),o=h.attr("uid");for(i=0;r.length>i;i++)if(r[i].getAttribute(o)==t){n=r[i];break}return e(n)},expandPath:function(n,i){function r(e,t,n){e&&!e.loaded()?e.set("expanded",!0):t.call(n)}var o,a,s;for(n=n.slice(0),o=this,s=(a=this.dataSource).get(n[0]),i=i||e.noop;n.length>0&&s&&(s.expanded||s.loaded());)s.set("expanded",!0),n.shift(),s=a.get(n[0]);return n.length?(a.bind("change",function(e){var t=e.node&&e.node.id;t&&t===n[0]&&(n.shift(),n.length?r(a.get(n[0]),i,o):i.call(o))}),r(s,i,o),t):i.call(o)},_parents:function(e){for(var t=e&&e.parentNode(),n=[];t&&t.parentNode;)n.push(t),t=t.parentNode();return n},expandTo:function(e){var t,n;for(e instanceof h.data.Node||(e=this.dataSource.get(e)),t=this._parents(e),n=0;t.length>n;n++)t[n].set("expanded",!0)},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",i=0,r=e.items,o=r?r.length:0,a=e.group;for(a.length=o;o>i;i++)e.group=a,e.item=r[i],e.item.index=i,n+=t._renderItem(e);return n},e.r=t.templates,t.templates.group(e)}}),p.plugin(s)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r,o,a;if(!e)return[];for(i=0,r=[],o=(e=e.filters).length;o>i;i++)a=e[i].operator,(n||"in"===a)&&a!==n||e[i].field!==t||r.push(e[i]);return r}function i(t,i,r){var o,a=0,s=r.length;if(t=n(t,i,"in")[0])for(o=t.value.split(",");s>a;a++)r[a].checked=e.inArray(r[a].uniqueName,o)>=0;else for(;s>a;a++)r[a].checked=!0}var r=window.kendo,o=r.ui,a="kendoContextMenu",s=e.proxy,l=".kendoPivotFieldMenu",c=o.Widget,u=c.extend({init:function(e,t){c.fn.init.call(this,e,t),this._dataSource(),this._layout(),r.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:!0,sortable:!0,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var t=this.options;this.wrapper=e(r.template(d)({ns:r.ns,filterable:t.filterable,sortable:t.sortable,messages:t.messages})),this.menu=this.wrapper[a]({filter:t.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:!1,open:s(this._menuOpen,this),select:s(this._select,this),copyAnchorStyles:!1}).data(a),this._createWindow(),t.filterable&&this._initFilterForm()},_initFilterForm:function(){var e=this.menu.element.find(".k-filter-item"),t=s(this._filter,this);this._filterOperator=new r.ui.DropDownList(e.find("select")),this._filterValue=e.find(".k-textbox"),e.on("submit"+l,t).on("click"+l,".k-button-filter",t).on("click"+l,".k-button-clear",s(this._reset,this))},_setFilterForm:function(e){var t=this._filterOperator,n="",i="";e&&(n=e.operator,i=e.value),t.value(n),t.value()||t.select(0),this._filterValue.val(i)},_clearFilters:function(e){var t,i,r=this.dataSource.filter()||{},o=0;for(r.filters=r.filters||[],i=(t=n(r,e)).length;i>o;o++)r.filters.splice(r.filters.indexOf(t[o]),1);return r},_filter:function(e){var n,i,r=this,o=r._filterValue.val();return e.preventDefault(),o?(n={field:r.currentMember,operator:r._filterOperator.value(),value:o},(i=r._clearFilters(r.currentMember)).filters.push(n),r.dataSource.filter(i),r.menu.close(),t):(r.menu.close(),t)},_reset:function(e){var t=this,n=t._clearFilters(t.currentMember);e.preventDefault(),n.filters[0]||(n={}),t.dataSource.filter(n),t._setFilterForm(null),t.menu.close()},_sort:function(e){var t=this.currentMember,n=this.dataSource.sort()||[];(n=function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r}(n,t)).push({field:t,dir:e}),this.dataSource.sort(n),this.menu.close()},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},_dataSource:function(){this.dataSource=r.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var t=this.options.messages;this.includeWindow=e(r.template(h)({messages:t})).on("click"+l,".k-button-ok",s(this._applyIncludes,this)).on("click"+l,".k-button-cancel",s(this._closeWindow,this)),this.includeWindow=new o.Window(this.includeWindow,{title:t.title,visible:!1,resizable:!1,open:s(this._windowOpen,this)})},_applyIncludes:function(e){var t,i=[],r=this.treeView.dataSource.view(),o=r[0].checked,a=this.dataSource.filter(),s=n(a,this.currentMember,"in")[0];(function e(t,n){var i,r=t.length;for(i=0;r>i;i++)t[i].checked&&0!==t[i].level()&&n.push(t[i].uniqueName),t[i].hasChildren&&e(t[i].children.view(),n)})(r,i),s&&(o?(a.filters.splice(a.filters.indexOf(s),1),a.filters.length||(a={})):s.value=i.join(","),t=a),i.length&&(t||o||(t={field:this.currentMember,operator:"in",value:i.join(",")},a&&(a.filters.push(t),t=a))),t&&this.dataSource.filter(t),this._closeWindow(e)},_closeWindow:function(e){e.preventDefault(),this.includeWindow.close()},_treeViewDataSource:function(){var e=this;return r.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return parseInt(e.childrenCardinality,10)>0}}},transport:{read:function(t){var n={},r=e.treeView.dataSource.get(t.data.uniqueName);t.data.uniqueName?(n.memberUniqueName=r.uniqueName.replace(/\&/g,"&amp;"),n.treeOp=1):n.levelUniqueName=e.currentMember+".[(ALL)]",e.dataSource.schemaMembers(n).done(function(n){i(e.dataSource.filter(),e.currentMember,n),t.success(n)}).fail(t.error)}}})},_createTreeView:function(e){var t=this;t.treeView=new o.TreeView(e,{autoBind:!1,dataSource:t._treeViewDataSource(),dataTextField:"caption",template:"#: data.item.caption || data.item.name #",checkboxes:{checkChildren:!0},dataBound:function(){o.progress(t.includeWindow.element,!1)}})},_menuOpen:function(t){var i;t.event&&(i=r.attr("name"),this.currentMember=e(t.event.target).closest("["+i+"]").attr(i),this.options.filterable&&this._setFilterForm(n(this.dataSource.filter(),this.currentMember)[0]))},_select:function(t){var n=e(t.item);e(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close"),n.hasClass("k-include-item")?this.includeWindow.center().open():n.hasClass("k-sort-asc")?this._sort("asc"):n.hasClass("k-sort-desc")&&this._sort("desc")},_windowOpen:function(){this.treeView||this._createTreeView(this.includeWindow.element.find(".k-treeview")),o.progress(this.includeWindow.element,!0),this.treeView.dataSource.read()},destroy:function(){c.fn.destroy.call(this),this.menu&&(this.menu.destroy(),this.menu=null),this.treeView&&(this.treeView.destroy(),this.treeView=null),this.includeWindow&&(this.includeWindow.destroy(),this.includeWindow=null),this.wrapper=null,this.element=null}}),d='<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item k-filter-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.filterFields}</span><ul><li><div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div></li></ul></li># } #</ul>',h='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>';o.plugin(u)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=n.data.DataSource,o=i.Widget,a="change",s="boolean",l="enums",c="string",u="Is equal to",d="Is not equal to",h=e.proxy,p=o.extend({init:function(i,r){var u,d,p,f,g,m,v,_,y,b,w;if(i=e(i).addClass("k-filtercell"),u=this.wrapper=e("<span/>").appendTo(i),g=r,_=(d=this).operators=r.operators||{},y=d.input=e("<input/>").attr(n.attr("bind"),"value: value").appendTo(u),o.fn.init.call(d,i[0],r),r=d.options,p=d.dataSource=r.dataSource,d.model=p.reader.model,v=r.type=c,(b=(n.getter("reader.model.fields",!0)(p)||{})[r.field])&&b.type&&(v=r.type=b.type),r.values&&(r.type=v=l),_=_[v]||r.operators[v],!g.operator)for(m in _){r.operator=m;break}d._parse=function(e){return e+""},d.model&&d.model.fields&&(w=d.model.fields[r.field])&&w.parse&&(d._parse=h(w.parse,w)),d.viewModel=f=n.observable({operator:r.operator,value:null,operatorVisible:function(){var e=this.get("value");return null!==e&&e!==t&&"undefined"!=e}}),f.bind(a,h(d.updateDsFilter,d)),v==c&&d.initSuggestDataSource(r),null!==r.inputWidth&&y.width(r.inputWidth),d._setInputType(r,v),v!=s&&!1!==r.showOperators?d._createOperatorDropDown(_):u.addClass("k-operator-hidden"),d._createClearIcon(),n.bind(this.wrapper,f),v==c&&(r.template||d.setAutoCompleteSource()),v==l&&d.setComboBoxSource(d.options.values),d._refreshUI(),d._refreshHandler=h(d._refreshUI,d),d.dataSource.bind(a,d._refreshHandler)},_setInputType:function(t,i){var r,o,a,u,d,h=this,p=h.input;"function"==typeof t.template?t.template.call(h.viewModel,{element:h.input,dataSource:h.suggestDataSource}):i==c?p.attr(n.attr("role"),"autocomplete").attr(n.attr("text-field"),t.dataTextField||t.field).attr(n.attr("filter"),t.suggestionOperator).attr(n.attr("delay"),t.delay).attr(n.attr("min-length"),t.minLength).attr(n.attr("value-primitive"),!0):"date"==i?p.attr(n.attr("role"),"datepicker"):i==s?(p.remove(),r=e("<input type='radio'/>"),o=h.wrapper,a=n.guid(),u=e("<label/>").text(t.messages.isTrue).append(r),r.attr(n.attr("bind"),"checked:value").attr("name",a).val("true"),d=u.clone().text(t.messages.isFalse),r.clone().val("false").appendTo(d),o.append([u,d])):"number"==i?p.attr(n.attr("role"),"numerictextbox"):i==l&&p.attr(n.attr("role"),"combobox").attr(n.attr("text-field"),"text").attr(n.attr("suggest"),!0).attr(n.attr("filter"),"contains").attr(n.attr("value-field"),"value").attr(n.attr("value-primitive"),!0)},_createOperatorDropDown:function(t){var i,r,o=[];for(i in t)o.push({text:t[i],value:i});r=e('<input class="k-dropdown-operator" '+n.attr("bind")+'="value: operator"/>').appendTo(this.wrapper),this.operatorDropDown=r.kendoDropDownList({dataSource:o,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),this.operatorDropDown.wrapper.find(".k-i-arrow-s").removeClass("k-i-arrow-s").addClass("k-filter")},initSuggestDataSource:function(e){var i=e.suggestDataSource;i instanceof r||(!e.customDataSource&&i&&(i.group=t),i=this.suggestDataSource=r.create(i)),e.customDataSource||(i._pageSize=t,i.reader.data=function(e,t){var i=n.getter(t,!0);return function(t){for(var n,r,o=e(t),a=[],s=0,l={};o.length>s;)n=o[s++],r=i(n),l.hasOwnProperty(r)||(a.push(n),l[r]=!0);return a}}(i.reader.data,this.options.field)),this.suggestDataSource=i},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");e&&e.setDataSource(this.suggestDataSource)},setComboBoxSource:function(e){var t=r.create({data:e}),n=this.input.data("kendoComboBox");n&&n.setDataSource(t)},_refreshUI:function(){var t=this,n=function t(n,i){var r,o,a=[];if(e.isPlainObject(n))if(n.hasOwnProperty("filters"))a=n.filters;else if(n.field==i)return n;for(e.isArray(n)&&(a=n),r=0;a.length>r;r++)if(o=t(a[r],i))return o}(t.dataSource.filter(),this.options.field)||{},i=t.viewModel;t.manuallyUpdatingVM=!0,n=e.extend(!0,{},n),t.options.type==s&&i.value!==n.value&&t.wrapper.find(":radio").prop("checked",!1),n.operator&&i.set("operator",n.operator),i.set("value",n.value),t.manuallyUpdatingVM=!1},updateDsFilter:function(n){var i,r,o,a=this,s=a.viewModel;a.manuallyUpdatingVM||"operator"==n.field&&s.value===t||(r={logic:"and",filters:[]},(i=e.extend({},a.viewModel.toJSON(),{field:a.options.field})).value!==t&&null!==i.value&&r.filters.push(i),o=a._merge(r),a.dataSource.filter(o.filters.length?o:{}))},_merge:function(t){var n,i,r,o=this,a=t.logic||"and",s=t.filters,l=o.dataSource.filter()||{filters:[],logic:"and"};for(function t(n,i){n.filters&&(n.filters=e.grep(n.filters,function(e){return t(e,i),e.filters?e.filters.length:e.field!=i}))}(l,o.options.field),i=0,r=s.length;r>i;i++)(n=s[i]).value=o._parse(n.value);return(s=e.grep(s,function(e){return""!==e.value&&null!==e.value})).length&&(l.filters.length?(t.filters=s,"and"!==l.logic&&(l.filters=[{logic:l.logic,filters:l.filters}],l.logic="and"),l.filters.push(s.length>1?t:s[0])):(l.filters=s,l.logic=a)),l},_createClearIcon:function(){var t=this;e("<button type='button' class='k-button k-button-icon'/>").attr(n.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(h(t.clearFilter,t)).appendTo(t.wrapper)},clearFilter:function(){this.viewModel.set("value",null)},destroy:function(){var e=this;e.filterModel=null,o.fn.destroy.call(e),n.destroy(e.element)},events:[a],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:t,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:u,neq:d,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:u,neq:d,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:u,neq:d,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:u,neq:d}}}});i.plugin(p)}(window.kendo.jQuery),function(e,t){function n(t){(t=e(t)).children(m).children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent();t.append("<span class='k-icon "+(n.hasClass(M)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function i(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(w),t.filter(".k-last:not(:last-child)").removeClass(f),t.filter(":first-child").addClass(w),t.filter(":last-child").addClass(f)}var r=window.kendo,o=r.ui,a=r.keys,s=e.extend,l=e.each,c=r.template,u=o.Widget,d=/^(ul|a|div)$/i,h=".kendoPanelBar",p="href",f="k-last",g="k-link",m="."+g,v="error",_=".k-item",y=".k-group:visible",b="k-image",w="k-first",k="expand",x="select",C="k-content",T="activate",S="collapse",D="mouseenter",A="contentLoad",M="k-state-active",E="> .k-panel",I="> .k-content",R="k-state-focused",P="k-state-disabled",L="k-state-selected",F="."+L,B="k-state-highlight",z=_+":not(.k-state-disabled)",H="> "+z+" > "+m+", .k-panel > "+z+" > "+m,N="> li > "+F+", .k-panel > li > "+F,O="aria-disabled",V="aria-expanded",U="aria-hidden",W="aria-selected",j=":visible",q="single",G={content:c("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:c("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:c("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:c("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:c("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:c("<span class='#= arrowClass(item) #'></span>"),sprite:c("<span class='k-sprite #= spriteCssClass #'></span>"),empty:c("")},$={aria:function(e){var t="";return(e.items||e.content||e.contentUrl)&&(t+=V+"='"+(e.expanded?"true":"false")+"' "),!1===e.enabled&&(t+=O+"='true'"),t},wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=!1===t.enabled?" "+P:!0===t.expanded?" "+M:" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(e,t){var n=g;return t.firstLevel&&(n+=" k-header"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){return"k-icon"+(e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand")},text:function(e){return!1===e.encoded?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url||e.contentUrl?"a":"span"},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return!0!==e.item.expanded?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}},Y=u.extend({init:function(t,n){var i,o=this;u.fn.init.call(o,t,n),t=o.wrapper=o.element.addClass("k-widget k-reset k-header k-panelbar"),n=o.options,t[0].id&&(o._itemId=t[0].id+"_pb_active"),o._tabindex(),o._initData(n),o._updateClasses(),o._animations(n),t.on("click"+h,H,function(t){o._click(e(t.currentTarget))&&t.preventDefault()}).on(D+h+" mouseleave"+h,H,o._toggleHover).on("click"+h,".k-item.k-state-disabled > .k-link",!1).on("keydown"+h,e.proxy(o._keydown,o)).on("focus"+h,function(){var e=o.select();o._current(e[0]?e:o._first())}).on("blur"+h,function(){o._current(null)}).attr("role","menu"),(i=t.find("li."+M+" > ."+C))[0]&&o.expand(i.parent(),!1),r.notify(o)},events:[k,S,x,T,v,A],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){u.fn.destroy.call(this),this.element.off(h),r.destroy(this.element)},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=s(!0,t,e.animation),"dataSource"in e&&this._initData(e),u.fn.setOptions.call(this,e)},expand:function(t,n){var i=this,r={};return n=!1!==n,(t=this.element.find(t)).each(function(o,a){var s=(a=e(a)).find(E).add(a.find(I));if(!a.hasClass(P)&&s.length>0){if(i.options.expandMode==q&&i._collapseAllExpanded(a))return i;t.find("."+B).removeClass(B),a.addClass(B),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(k,a)||i._toggleItem(a,!1),n||(i.options.animation=r)}}),i},collapse:function(t,n){var i=this,r={};return n=!1!==n,(t=i.element.find(t)).each(function(t,o){var a=(o=e(o)).find(E).add(o.find(I));!o.hasClass(P)&&a.is(j)&&(o.removeClass(B),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(S,o)||i._toggleItem(o,!0),n||(i.options.animation=r))}),i},_toggleDisabled:function(e,t){(e=this.element.find(e)).toggleClass("k-state-default",t).toggleClass(P,!t).attr(O,!t)},select:function(n){var i=this;return n===t?i.element.find(N).parent():((n=i.element.find(n)).length?n.each(function(){var n=e(this),r=n.children(m);return n.hasClass(P)?i:(i._triggerEvent(x,n)||i._updateSelected(r),t)}):this._updateSelected(n),i)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var r=this._insert(e,t,t.length?t.find(E):null);return l(r.items,function(){r.group.append(this),i(this)}),n(t),i(r.group.find(".k-first, .k-last")),r.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.before(this),i(this)}),i(t),n.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.after(this),i(this)}),i(t),n.group.height("auto"),this},remove:function(e){var t=(e=this.element.find(e)).parentsUntil(this.element,_),r=e.parent("ul");return e.remove(),!r||r.hasClass("k-panelbar")||r.children(_).length||r.remove(),t.length&&(n(t=t.eq(0)),i(t)),this},reload:function(t){var n=this;(t=n.element.find(t)).each(function(){var t=e(this);n._ajaxRequest(t,t.children("."+C),!t.is(j))})},_first:function(){return this.element.children(z).first()},_last:function(){var e=this.element.children(z).last(),t=e.children(y);return t[0]?t.children(z).last():e},_current:function(n){var i=this,r=i._focused,o=i._itemId;return n===t?r:(i.element.removeAttr("aria-activedescendant"),r&&r.length&&(r[0].id===o&&r.removeAttr("id"),r.children(m).removeClass(R)),e(n).length&&(o=n[0].id||o,n.attr("id",o).children(m).addClass(R),i.element.attr("aria-activedescendant",o)),i._focused=n,t)},_keydown:function(e){var t=this,n=e.keyCode,i=t._current();e.target==e.currentTarget&&(n==a.DOWN||n==a.RIGHT?(t._current(t._nextItem(i)),e.preventDefault()):n==a.UP||n==a.LEFT?(t._current(t._prevItem(i)),e.preventDefault()):n==a.ENTER||n==a.SPACEBAR?(t._click(i.children(m)),e.preventDefault()):n==a.HOME?(t._current(t._first()),e.preventDefault()):n==a.END&&(t._current(t._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(y),n=e.nextAll(":visible").first();return t[0]&&(n=t.children("."+w)),n[0]||(n=e.parent(y).parent(_).next()),n[0]||(n=this._first()),n.hasClass(P)&&(n=this._nextItem(n)),n},_prevItem:function(e){if(!e)return this._last();var t,n=e.prevAll(":visible").first();if(n[0])for(t=n;t[0];)(t=t.children(y).children("."+f))[0]&&(n=t);else(n=e.parent(y).parent(_))[0]||(n=this._last());return n.hasClass(P)&&(n=this._prevItem(n)),n},_insert:function(t,n,i){var o,a,l=this,c=e.isPlainObject(t),u=n&&n[0];return u||(i=l.element),a={firstLevel:i.hasClass("k-panelbar"),expanded:i.parent().hasClass(M),length:i.children().length},u&&!i.length&&(i=e(Y.renderGroup({group:a})).appendTo(n)),t instanceof r.Observable&&(t=t.toJSON()),c||e.isArray(t)?(o=e.map(c?[t]:t,function(t,n){return e("string"==typeof t?t:Y.renderItem({group:a,item:s(t,{index:n})}))}),u&&n.attr(V,!1)):(o="string"==typeof t&&"<"!=t.charAt(0)?l.element.find(t):e(t),l._updateItemsClasses(o)),{items:o,group:i}},_toggleHover:function(t){var n=e(t.currentTarget);n.parents("li."+P).length||n.toggleClass("k-state-hover",t.type==D)},_updateClasses:function(){var t,r,o=this;(t=o.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group")).parent().attr(V,!1).not("."+M).children("ul").attr(U,!0).hide(),r=o.element.add(t).children(),o._updateItemsClasses(r),n(r),i(r)},_updateItemsClasses:function(e){for(var t=e.length,n=0;t>n;n++)this._updateItemClasses(e[n],n)},_updateItemClasses:function(t,n){var i,o,a=this._selected,s=this.options.contentUrls,l=s&&s[n],c=this.element[0];t=e(t).addClass("k-item").attr("role","menuitem"),r.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children("img").addClass(b),(o=t.children("a").addClass(g))[0]&&(o.attr("href",l),o.children("img").addClass(b)),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").attr(O,!0).removeAttr("disabled"),t.children("div").addClass(C).attr("role","region").attr(U,!0).hide().parent().attr(V,!1),(o=t.children(F))[0]&&(a&&a.removeAttr(W).children(F).removeClass(L),o.addClass(L),this._selected=t.attr(W,!0)),t.children(m)[0]||(i="<span class='"+g+"'/>",s&&s[n]&&t[0].parentNode==c&&(i='<a class="k-link k-header" href="'+s[n]+'"/>'),t.contents().filter(function(){return!(this.nodeName.match(d)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll(i)),t.parent(".k-panelbar")[0]&&t.children(m).addClass("k-header")},_click:function(e){var t,n,i,r,o,a,s=this,l=s.element;if(!e.parents("li."+P).length&&e.closest(".k-widget")[0]==l[0]){if(o=(r=e.closest(m)).closest(_),s._updateSelected(r),n=o.find(E).add(o.find(I)),t=!((!(i=r.attr(p))||"#"!=i.charAt(i.length-1)&&-1==i.indexOf("#"+s.element[0].id+"-"))&&!n.length),n.data("animating"))return t;if(s._triggerEvent(x,o)&&(t=!0),!1!==t)return s.options.expandMode==q&&s._collapseAllExpanded(o)?t:(n.length&&(a=n.is(j),s._triggerEvent(a?S:k,o)||(t=s._toggleItem(o,a))),t)}},_toggleItem:function(e,n){var i,r,o=e.find(E),a=e.find(m).attr(p);return o.length?(this._toggleGroup(o,n),i=!0):(r=e.children("."+C)).length&&(i=!0,r.is(":empty")&&a!==t?this._ajaxRequest(e,r,n):this._toggleGroup(r,n)),i},_toggleGroup:function(e,t){var n=this,i=n.options.animation,r=i.expand,o=s({},i.collapse),a=o&&"effects"in o;e.is(j)==t&&(e.parent().attr(V,!t).attr(U,t).toggleClass(M,!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),r=t?s(a?o:s({reverse:!0},r),{hide:!0}):s({complete:function(e){n._triggerEvent(T,e.closest(_))}},r),e.kendoStop(!0,!0).kendoAnimate(r))},_collapseAllExpanded:function(t){var n,i=this,r=!1,o=t.find(E).add(t.find(I));return o.is(j)&&(r=!0),o.is(j)||0===o.length||(n=t.siblings()).find(E).add(n.find(I)).filter(function(){return e(this).is(j)}).each(function(t,n){n=e(n),(r=i._triggerEvent(S,n.closest(_)))||i._toggleGroup(n,!0)}),r},_ajaxRequest:function(t,n,i){var r=this,o=t.find(".k-panelbar-collapse, .k-panelbar-expand"),a=t.find(m),s=setTimeout(function(){o.addClass("k-loading")},100),l=a.attr(p);e.ajax({type:"GET",cache:!1,url:l,dataType:"html",data:{},error:function(e,t){o.removeClass("k-loading"),r.trigger(v,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(s),o.removeClass("k-loading")},success:function(e){function o(){return{elements:n.get()}}try{r.angular("cleanup",o),n.html(e),r.angular("compile",o)}catch(e){var a=window.console;a&&a.error&&a.error(e.name+": "+e.message+" in "+l),this.error(this.xhr,"error")}r._toggleGroup(n,i),r.trigger(A,{item:t[0],contentElement:n[0]})}})},_triggerEvent:function(e,t){return this.trigger(e,{item:t[0]})},_updateSelected:function(e){var t=this,n=t.element,i=e.parent(_),r=t._selected;r&&r.removeAttr(W),t._selected=i.attr(W,!0),n.find(N).removeClass(L),n.find("> ."+B+", .k-panel > ."+B).removeClass(B),e.addClass(L),e.parentsUntil(n,_).filter(":has(.k-header)").addClass(B),t._current(i[0]?i:null)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});s(Y,{renderItem:function(e){e=s({panelBar:{},group:{}},e);var t=G.empty,n=e.item;return G.item(s(e,{image:n.imageUrl?G.image:t,sprite:n.spriteCssClass?G.sprite:t,itemWrapper:G.itemWrapper,renderContent:Y.renderContent,arrow:n.items||n.content||n.contentUrl?G.arrow:t,subGroup:Y.renderGroup},$))},renderGroup:function(e){return G.group(s({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=s({length:r},e.group);r>n;n++)t+=Y.renderItem(s(e,{group:o,item:s({index:n},i[n])}));return t}},e,$))},renderContent:function(e){return G.content(s(e,$))}}),r.ui.plugin(Y)}(window.kendo.jQuery),function(e){var t=e.proxy,n=".kendoResponsivePanel",i="open",r="close",o="click"+n+" touchstart"+n,a=kendo.ui.Widget,s=a.extend({init:function(i,r){a.fn.init.call(this,i,r),this._guid="_"+kendo.guid(),this._toggleHandler=t(this._toggleButtonClick,this),this._closeHandler=t(this._close,this),e(document.documentElement).on(o,this.options.toggleButton,this._toggleHandler),this._registerBreakpoint(),this.element.addClass("k-rpanel k-rpanel-"+this.options.orientation+" "+this._guid),this._resizeHandler=t(this.resize,this,!1),e(window).on("resize"+n,this._resizeHandler)},_mediaQuery:"@media (max-width: #= breakpoint-1 #px) {.#= guid #.k-rpanel-animate.k-rpanel-left,.#= guid #.k-rpanel-animate.k-rpanel-right {-webkit-transition: -webkit-transform .2s ease-out;-ms-transition: -ms-transform .2s ease-out;transition: transform .2s ease-out;} .#= guid #.k-rpanel-top {overflow: hidden;}.#= guid #.k-rpanel-animate.k-rpanel-top {-webkit-transition: max-height .2s linear;-ms-transition: max-height .2s linear;transition: max-height .2s linear;}} @media (min-width: #= breakpoint #px) {#= toggleButton # { display: none; } .#= guid #.k-rpanel-left { float: left; } .#= guid #.k-rpanel-right { float: right; } .#= guid #.k-rpanel-left, .#= guid #.k-rpanel-right {position: relative;-webkit-transform: translateX(0);-ms-transform: translateX(0);transform: translateX(0);-webkit-transform: translateX(0) translateZ(0);-ms-transform: translateX(0) translateZ(0);transform: translateX(0) translateZ(0);} .#= guid #.k-rpanel-top { max-height: none; }}",_registerBreakpoint:function(){var e=this.options;this._registerStyle(kendo.template(this._mediaQuery)({breakpoint:e.breakpoint,toggleButton:e.toggleButton,guid:this._guid}))},_registerStyle:function(t){var n=e("head,body")[0],i=document.createElement("style");n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))},options:{name:"ResponsivePanel",orientation:"left",toggleButton:".k-rpanel-toggle",breakpoint:640,autoClose:!0},events:[i,r],_resize:function(){this.element.removeClass("k-rpanel-animate")},_toggleButtonClick:function(e){e.preventDefault(),this.element.hasClass("k-rpanel-expanded")?this.close():this.open()},open:function(){this.trigger(i)||(this.element.addClass("k-rpanel-animate k-rpanel-expanded"),this.options.autoClose&&e(document.documentElement).on(o,this._closeHandler))},close:function(){this.trigger(r)||(this.element.addClass("k-rpanel-animate").removeClass("k-rpanel-expanded"),e(document.documentElement).off(o,this._closeHandler))},_close:function(t){var n=t.isDefaultPrevented();e(t.target).closest(this.options.toggleButton+",.k-rpanel").length||n||this.close()},destroy:function(){a.fn.destroy.call(this),e(window).off("resize"+n,this._resizeHandler),e(document.documentElement).off(o,this._closeHandler)}});kendo.ui.plugin(s)}(window.kendo.jQuery),function(e,t){function n(t){t.children(m).addClass(x),t.children("a").addClass(b).children(m).addClass(x),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(R),t.filter("li[disabled]").addClass(I).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(P+" "+B),t.attr("role","tab"),t.filter("."+P).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+b).length||t.contents().filter(function(){return!(this.nodeName.match(f)||3==this.nodeType&&!u(this.nodeValue))}).wrapAll("<span class='"+b+"'/>")})}function i(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(C),t.filter(".k-last:not(:last-child)").removeClass(w),t.filter(":first-child").addClass(C),t.filter(":last-child").addClass(w)}function r(e,t){return"<span class='k-button k-button-icon k-button-bare k-tabstrip-"+e+"' unselectable='on'><span class='k-icon "+t+"'></span></span>"}var o=window.kendo,a=o.ui,s=o.keys,l=e.map,c=e.each,u=e.trim,d=e.extend,h=o.template,p=a.Widget,f=/^(a|div)$/i,g=".kendoTabStrip",m="img",v="href",_="prev",y="show",b="k-link",w="k-last",k="click",x="k-image",C="k-first",T="select",S="activate",D="k-content",A="contentUrl",M="mouseenter",E="contentLoad",I="k-state-disabled",R="k-state-default",P="k-state-active",L="k-state-focused",F="k-state-hover",B="k-tab-on-top",z=".k-item:not(."+I+")",H=".k-tabstrip-items > "+z+":not(."+P+")",N={content:h("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:h("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:h("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:h("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:h("<span class='k-sprite #= spriteCssClass #'></span>"),empty:h("")},O={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=!1===t.enabled?" k-state-disabled":" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return!1===e.encoded?e.text:o.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return!0!==e.active?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?o.attr("content-url")+'="'+e.contentUrl+'"':""}},V=p.extend({init:function(t,n){var i,r,a=this;p.fn.init.call(a,t,n),a._animations(a.options),n=a.options,a._wrapper(),a._isRtl=o.support.isRtl(a.wrapper),a._tabindex(),a._updateClasses(),a._dataSource(),n.dataSource&&a.dataSource.fetch(),a._tabPosition(),a._scrollable(),a.options.contentUrls&&a.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,n){e(n).find(">."+b).data(A,a.options.contentUrls[t])}),a.wrapper.on(M+g+" mouseleave"+g,H,a._toggleHover).on("focus"+g,e.proxy(a._active,a)).on("blur"+g,function(){a._current(null)}),a._keyDownProxy=e.proxy(a._keydown,a),n.navigatable&&a.wrapper.on("keydown"+g,a._keyDownProxy),a.wrapper.children(".k-tabstrip-items").on(k+g,".k-state-disabled .k-link",!1).on(k+g," > "+z,function(t){var n=a.wrapper[0];if(n!==document.activeElement)if(o.support.browser.msie)try{n.setActive()}catch(e){n.focus()}else n.focus();a._click(e(t.currentTarget))&&t.preventDefault()}),i=a.tabGroup.children("li."+P),r=a.contentHolder(i.index()),i[0]&&r.length>0&&0===r[0].childNodes.length&&a.activateTab(i.eq(0)),a.element.attr("role","tablist"),a.element[0].id&&(a._ariaId=a.element[0].id+"_ts_active"),o.notify(a)},_active:function(){var e=this.tabGroup.children().filter("."+P);(e=e[0]?e:this._endItem("first"))[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(z)[e]()},_item:function(e,t){var n;return n=t===_?"last":"first",e?((e=e[t]())[0]||(e=this._endItem(n)),e.hasClass(I)&&(e=this._item(e,t)),e):this._endItem(n)},_current:function(e){var n=this,i=n._focused,r=n._ariaId;return e===t?i:(i&&(i[0].id===r&&i.removeAttr("id"),i.removeClass(L)),e&&(e.hasClass(P)||e.addClass(L),n.element.removeAttr("aria-activedescendant"),(r=e[0].id||r)&&(e.attr("id",r),n.element.attr("aria-activedescendant",r))),n._focused=e,t)},_keydown:function(e){var n,i=this,r=e.keyCode,o=i._current(),a=i._isRtl;if(e.target==e.currentTarget){if(r==s.DOWN||r==s.RIGHT)n=a?_:"next";else if(r==s.UP||r==s.LEFT)n=a?"next":_;else if(r==s.ENTER||r==s.SPACEBAR)i._click(o),e.preventDefault();else{if(r==s.HOME)return i._click(i._endItem("first")),e.preventDefault(),t;if(r==s.END)return i._click(i._endItem("last")),e.preventDefault(),t}n&&(i._click(i._item(o,n)),e.preventDefault())}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler):t._refreshHandler=e.proxy(t.refresh,t),t.dataSource=o.data.DataSource.create(t.options.dataSource).bind("change",t._refreshHandler)},setDataSource:function(e){var t=this;t.options.dataSource=e,t._dataSource(),t.dataSource.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var t,n,i,r=this,a=r.options,s=o.getter(a.dataTextField),l=o.getter(a.dataContentField),c=o.getter(a.dataContentUrlField),u=o.getter(a.dataImageUrlField),d=o.getter(a.dataUrlField),h=o.getter(a.dataSpriteCssClass),p=[],f=r.dataSource.view();for((e=e||{}).action&&(f=e.items),t=0,i=f.length;i>t;t++)n={text:s(f[t])},a.dataContentField&&(n.content=l(f[t])),a.dataContentUrlField&&(n.contentUrl=c(f[t])),a.dataUrlField&&(n.url=d(f[t])),a.dataImageUrlField&&(n.imageUrl=u(f[t])),a.dataSpriteCssClass&&(n.spriteCssClass=h(f[t])),p[t]=n;if("add"==e.action)e.index<r.tabGroup.children().length?r.insertBefore(p,r.tabGroup.children().eq(e.index)):r.append(p);else if("remove"==e.action)for(t=0;f.length>t;t++)r.remove(e.index);else"itemchange"==e.action?(t=r.dataSource.view().indexOf(f[0]),e.field===a.dataTextField&&r.tabGroup.children().eq(t).find(".k-link").text(f[0].get(e.field))):(r.trigger("dataBinding"),r.remove("li"),r.append(p),r.trigger("dataBound"))},value:function(n){var i=this;return n===t?i.select().text():(n!=i.value()&&i.tabGroup.children().each(function(){e.trim(e(this).text())==n&&i.select(this)}),t)},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this,n=t.options.animation;t._animations(e),e.animation=d(!0,n,e.animation),e.navigatable?t.wrapper.on("keydown"+g,t._keyDownProxy):t.wrapper.off("keydown"+g,t._keyDownProxy),p.fn.setOptions.call(t,e)},events:[T,S,y,"error",E,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",tabPosition:"top",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1,scrollable:{distance:200}},destroy:function(){var e=this;p.fn.destroy.call(e),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler),e.wrapper.off(g),e.wrapper.children(".k-tabstrip-items").off(g),e._scrollableModeActive&&(e._scrollPrevButton.off().remove(),e._scrollNextButton.off().remove()),e.scrollWrap.children(".k-tabstrip").unwrap(),o.destroy(e.wrapper)},select:function(t){var n=this;return 0===arguments.length?n.tabGroup.children("li."+P):(isNaN(t)||(t=n.tabGroup.children().get(t)),t=n.tabGroup.find(t),e(t).each(function(t,i){(i=e(i)).hasClass(P)||n.trigger(T,{item:i[0],contentElement:n.contentHolder(i.index())[0]})||n.activateTab(i)}),n)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){var n=this;return(t=this.tabGroup.find(t)).each(function(){var t=e(this),i=t.find("."+b).data(A),r=n.contentHolder(t.index());i&&n.ajaxRequest(t,r,null,i)}),n},append:function(e){var t=this,n=t._create(e);return c(n.tabs,function(e){var i=n.contents[e];t.tabGroup.append(this),"bottom"==t.options.tabPosition?t.tabGroup.before(i):t._scrollableModeActive?t._scrollPrevButton.before(i):t.wrapper.append(i),t.angular("compile",function(){return{elements:[i]}})}),i(t.tabGroup),t._updateContentElements(),t.resize(!0),t},insertBefore:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return c(o.tabs,function(e){var t=o.contents[e];n.before(this),a.before(t),r.angular("compile",function(){return{elements:[t]}})}),i(r.tabGroup),r._updateContentElements(),r.resize(!0),r},insertAfter:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return c(o.tabs,function(e){var t=o.contents[e];n.after(this),a.after(t),r.angular("compile",function(){return{elements:[t]}})}),i(r.tabGroup),r._updateContentElements(),r.resize(!0),r},remove:function(t){var n,i=this,r=typeof t;return"string"===r?t=i.tabGroup.find(t):"number"===r&&(t=i.tabGroup.children().eq(t)),n=t.map(function(){var t=i.contentElement(e(this).index());return o.destroy(t),t}),t.remove(),n.remove(),i._updateContentElements(),i.resize(!0),i},_create:function(i){var r,o,a,s=this;return e.isPlainObject(i)||e.isArray(i)?(i=e.isArray(i)?i:[i],r=l(i,function(t,n){return e(V.renderItem({group:s.tabGroup,item:d(t,{index:n})}))}),o=l(i,function(n,i){return"string"==typeof n.content||n.contentUrl?e(V.renderContent({item:d(n,{index:i})})):t})):(r="string"==typeof i&&"<"!=i[0]?s.element.find(i):e(i),o=e(),r.each(function(){if(a=e("<div class='"+D+"'/>"),/k-tabstrip-items/.test(this.parentNode.className)){var t=parseInt(this.getAttribute("aria-controls").replace(/^.*-/,""),10)-1;a=e(s.contentElement(t))}o=o.add(a)}),n(r)),{tabs:r,contents:o}},_toggleDisabled:function(t,n){(t=this.tabGroup.find(t)).each(function(){e(this).toggleClass(R,n).toggleClass(I,!n)})},_updateClasses:function(){var r,o,a,s=this;s.wrapper.addClass("k-widget k-header k-tabstrip"),s.tabGroup=s.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),s.tabGroup[0]||(s.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(s.wrapper)),(r=s.tabGroup.find("li").addClass("k-item")).length&&(a=(o=r.filter("."+P).index())>=0?o:t,s.tabGroup.contents().filter(function(){return 3==this.nodeType&&!u(this.nodeValue)}).remove()),o>=0&&r.eq(o).addClass(B),s.contentElements=s.wrapper.children("div"),s.contentElements.addClass(D).eq(a).addClass(P).css({display:"block"}),r.length&&(n(r),i(s.tabGroup),s._updateContentElements())},_updateContentElements:function(){var t=this,n=t.options.contentUrls||[],i=t.tabGroup.find(".k-item"),r=(t.element.attr("id")||o.guid())+"-",a=t.wrapper.children("div");a.length&&i.length>a.length?(a.each(function(e){var t=parseInt(this.id.replace(r,""),10),n=i.filter("[aria-controls="+r+t+"]"),o=r+(e+1);n.data("aria",o),this.setAttribute("id",o)}),i.each(function(){var t=e(this);this.setAttribute("aria-controls",t.data("aria")),t.removeData("aria")})):i.each(function(i){var o=a.eq(i),s=r+(i+1);this.setAttribute("aria-controls",s),!o.length&&n[i]?e("<div class='"+D+"'/>").appendTo(t.wrapper).attr("id",s):(o.attr("id",s),e(this).children(".k-loading")[0]||n[i]||e("<span class='k-loading k-complete'/>").prependTo(this)),o.attr("role","tabpanel"),o.filter(":not(."+P+")").attr("aria-hidden",!0).attr("aria-expanded",!1),o.filter("."+P).attr("aria-expanded",!0)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),o.kineticScrollNeeded&&o.mobile.ui.Scroller&&(o.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_wrapper:function(){var e=this;e.wrapper=e.element.is("ul")?e.element.wrapAll("<div />").parent():e.element,e.scrollWrap=e.wrapper.parent(".k-tabstrip-wrapper"),e.scrollWrap[0]||(e.scrollWrap=e.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent())},_tabPosition:function(){var e=this,t=e.options.tabPosition;e.wrapper.addClass("k-floatwrap k-tabstrip-"+t),"bottom"==t&&e.tabGroup.appendTo(e.wrapper),e.resize(!0)},_setContentElementsDimensions:function(){var e,t,n,i,r,o,a=this,s=a.options.tabPosition;("left"==s||"right"==s)&&(t=(e=a.wrapper.children(".k-content")).filter(":visible"),n="margin-"+s,i=a.tabGroup,r=i.outerWidth(),o=Math.ceil(i.height())-parseInt(t.css("padding-top"),10)-parseInt(t.css("padding-bottom"),10)-parseInt(t.css("border-top-width"),10)-parseInt(t.css("border-bottom-width"),10),setTimeout(function(){e.css(n,r).css("min-height",o)}))},_resize:function(){this._setContentElementsDimensions(),this._scrollable()},_sizeScrollWrap:function(e){var t,n;e.is(":visible")&&(t=this.options.tabPosition,n=Math.floor(e.outerHeight(!0))+("left"===t||"right"===t?2:this.tabsHeight),this.scrollWrap.css("height",n).css("height"))},_toggleHover:function(t){e(t.currentTarget).toggleClass(F,t.type==M)},_click:function(e){var t,n,i=this,r=e.find("."+b),o=r.attr(v),a=i.options.collapsible,s=i.contentHolder(e.index());if(e.closest(".k-widget")[0]==i.wrapper[0]){if(e.is("."+I+(a?"":",."+P)))return!0;if(n=r.data(A)||o&&("#"==o.charAt(o.length-1)||-1!=o.indexOf("#"+i.element[0].id+"-")),t=!o||n,i.tabGroup.children("[data-animating]").length)return t;if(i.trigger(T,{item:e[0],contentElement:s[0]}))return!0;if(!1!==t)return a&&e.is("."+P)?(i.deactivateTab(e),!0):(i.activateTab(e)&&(t=!0),t)}},_scrollable:function(){var e,t,n,i,a=this,s=a.options;a._scrollableAllowed()&&(a.wrapper.addClass("k-tabstrip-scrollable"),e=a.wrapper[0].offsetWidth,(t=a.tabGroup[0].scrollWidth)>e&&!a._scrollableModeActive?(a._nowScrollingTabs=!1,a._isRtl=o.support.isRtl(a.element),a.wrapper.append(r("prev","k-i-arrow-w")+r("next","k-i-arrow-e")),n=a._scrollPrevButton=a.wrapper.children(".k-tabstrip-prev"),i=a._scrollNextButton=a.wrapper.children(".k-tabstrip-next"),a.tabGroup.css({marginLeft:n.outerWidth()+9,marginRight:i.outerWidth()+12}),n.on("mousedown"+g,function(){a._nowScrollingTabs=!0,a._scrollTabsByDelta(s.scrollable.distance*(a._isRtl?1:-1))}),i.on("mousedown"+g,function(){a._nowScrollingTabs=!0,a._scrollTabsByDelta(s.scrollable.distance*(a._isRtl?-1:1))}),n.add(i).on("mouseup"+g,function(){a._nowScrollingTabs=!1}),a._scrollableModeActive=!0,a._toggleScrollButtons()):a._scrollableModeActive&&e>=t?(a._scrollableModeActive=!1,a.wrapper.removeClass("k-tabstrip-scrollable"),a._scrollPrevButton.off().remove(),a._scrollNextButton.off().remove(),a.tabGroup.css({marginLeft:"",marginRight:""})):a._scrollableModeActive?a._toggleScrollButtons():a.wrapper.removeClass("k-tabstrip-scrollable"))},_scrollableAllowed:function(){var e=this.options;return e.scrollable&&!isNaN(e.scrollable.distance)&&("top"==e.tabPosition||"bottom"==e.tabPosition)},_scrollTabsToItem:function(e){var t,n=this,i=n.tabGroup,r=i.scrollLeft(),o=e.outerWidth(),a=n._isRtl?e.position().left:e.position().left-i.children().first().position().left,s=i[0].offsetWidth,l=Math.ceil(parseFloat(i.css("padding-left")));n._isRtl?0>a?t=r+a-(s-r)-l:a+o>s&&(t=r+a-o+2*l):a+o>r+s?t=a+o-s+2*l:r>a&&(t=a-l),i.finish().animate({scrollLeft:t},"fast","linear",function(){n._toggleScrollButtons()})},_scrollTabsByDelta:function(e){var t=this,n=t.tabGroup,i=n.scrollLeft();n.finish().animate({scrollLeft:i+e},"fast","linear",function(){t._nowScrollingTabs?t._scrollTabsByDelta(e):t._toggleScrollButtons()})},_toggleScrollButtons:function(){var e=this,t=e.tabGroup,n=t.scrollLeft();e._scrollPrevButton.toggle(e._isRtl?t[0].scrollWidth-t[0].offsetWidth-1>n:0!==n),e._scrollNextButton.toggle(e._isRtl?0!==n:t[0].scrollWidth-t[0].offsetWidth-1>n)},deactivateTab:function(e){var t=this,n=t.options.animation,i=n.open,r=d({},n.close),a=r&&"effects"in r;e=t.tabGroup.find(e),r=d(a?r:d({reverse:!0},i),{hide:!0}),o.size(i.effects)?(e.kendoAddClass(R,{duration:i.duration}),e.kendoRemoveClass(P,{duration:i.duration})):(e.addClass(R),e.removeClass(P)),e.removeAttr("aria-selected"),t.contentAnimators.filter("."+P).kendoStop(!0,!0).kendoAnimate(r).removeClass(P).attr("aria-hidden",!0)},activateTab:function(e){var t,n,i,r,a,s,l,c,u,h,p,f,g,m,v;if(!this.tabGroup.children("[data-animating]").length)return e=this.tabGroup.find(e),n=(t=this).options.animation,i=n.open,a=(r=d({},n.close))&&"effects"in r,s=e.parent().children(),l=s.filter("."+P),c=s.index(e),r=d(a?r:d({reverse:!0},i),{hide:!0}),o.size(i.effects)?(l.kendoRemoveClass(P,{duration:r.duration}),e.kendoRemoveClass(F,{duration:r.duration})):(l.removeClass(P),e.removeClass(F)),u=t.contentAnimators,t.inRequest&&(t.xhr.abort(),t.inRequest=!1),0===u.length?(t.tabGroup.find("."+B).removeClass(B),e.addClass(B).css("z-index"),e.addClass(P),t._current(e),t.trigger("change"),t._scrollableModeActive&&t._scrollTabsToItem(e),!1):(h=u.filter("."+P),p=t.contentHolder(c),f=p.closest(".k-content"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),t._sizeScrollWrap(h),0===p.length?(h.removeClass(P).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(r),!1):(e.attr("data-animating",!0),g=!!e.children("."+b).data(A)&&p.is(":empty"),m=function(){t.tabGroup.find("."+B).removeClass(B),e.addClass(B).css("z-index"),o.size(i.effects)?(l.kendoAddClass(R,{duration:i.duration}),e.kendoAddClass(P,{duration:i.duration})):(l.addClass(R),e.addClass(P)),l.removeAttr("aria-selected"),e.attr("aria-selected",!0),t._current(e),t._sizeScrollWrap(f),f.addClass(P).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(d({init:function(){t.trigger(y,{item:e[0],contentElement:p[0]}),o.resize(p)}},i,{complete:function(){e.removeAttr("data-animating"),t.trigger(S,{item:e[0],contentElement:p[0]}),o.resize(p),t.scrollWrap.css("height","").css("height")}}))},v=function(){g?(e.removeAttr("data-animating"),t.ajaxRequest(e,p,function(){e.attr("data-animating",!0),m(),t.trigger("change")})):(m(),t.trigger("change")),t._scrollableModeActive&&t._scrollTabsToItem(e)},h.removeClass(P),h.attr("aria-hidden",!0),h.attr("aria-expanded",!1),h.length?h.kendoStop(!0,!0).kendoAnimate(d({complete:v},r)):v(),!0))},contentElement:function(e){var n,i,r,a;if(isNaN(e-0))return t;if(e=(n=this.contentElements&&this.contentElements[0]&&!o.kineticScrollNeeded?this.contentElements:this.contentAnimators)&&0>e?n.length+e:e,i=RegExp("-"+(e+1)+"$"),n)for(r=0,a=n.length;a>r;r++)if(i.test(n.eq(r).closest(".k-content")[0].id))return n[r];return t},contentHolder:function(t){var n=e(this.contentElement(t)),i=n.children(".km-scroll-container");return o.support.touch&&i[0]?i:n},ajaxRequest:function(t,n,i,r){var a,s,l,c,u,d,h,p,f;t=this.tabGroup.find(t),a=this,s=e.ajaxSettings.xhr,l=t.find("."+b),c={},u=t.width()/2,d=!1,(h=t.find(".k-loading").removeClass("k-complete"))[0]||(h=e("<span class='k-loading'/>").prependTo(t)),p=2*u-h.width(),f=function(){h.animate({marginLeft:(parseInt(h.css("marginLeft"),10)||0)<u?p:0},500,f)},o.support.browser.msie&&10>o.support.browser.version&&setTimeout(f,40),r=r||l.data(A)||l.attr(v),a.inRequest=!0,a.xhr=e.ajax({type:"GET",cache:!1,url:r,dataType:"html",data:c,xhr:function(){var t=this,n=s(),i=t.progressUpload?"progressUpload":!!t.progress&&"progress";return n&&e.each([n,n.upload],function(){this.addEventListener&&this.addEventListener("progress",function(e){i&&t[i](e)},!1)}),t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),n},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";h.stop(!0).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){a.trigger("error",{xhr:e,status:t})&&this.complete()},stopProgress:function(){clearInterval(d),h.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(e){a.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==e.statusText&&h.remove()},success:function(e){var s,l,c;h.addClass("k-complete");try{l=10,(s=this).noProgress&&(h.width(l+"%"),d=setInterval(function(){s.progress({lengthComputable:!0,loaded:Math.min(l,100),total:100}),l+=10},40)),a.angular("cleanup",function(){return{elements:n.get()}}),o.destroy(n),n.html(e)}catch(e){(c=window.console)&&c.error&&c.error(e.name+": "+e.message+" in "+r),this.error(this.xhr,"error")}i&&i.call(a,n),a.angular("compile",function(){return{elements:n.get()}}),a.trigger(E,{item:t[0],contentElement:n[0]})}})}});d(V,{renderItem:function(e){e=d({tabStrip:{},group:{}},e);var t=N.empty,n=e.item;return N.item(d(e,{image:n.imageUrl?N.image:t,sprite:n.spriteCssClass?N.sprite:t,itemWrapper:N.itemWrapper},O))},renderContent:function(e){return N.content(d(e,O))}}),o.ui.plugin(V)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*I))}function i(e){return 60*e.getHours()*I+e.getMinutes()*I+1e3*e.getSeconds()+e.getMilliseconds()}function r(e,t,n){var r,o=i(t),a=i(n);return!e||o==a||(o>(r=i(e))&&(r+=R),o>a&&(a+=R),r>=o&&a>=r)}function o(e){var t=e.parseFormats;e.format=p(e.format||c.getCulture(e.culture).calendars.standard.patterns.t),(t=U(t)?t:[t]).splice(0,0,e.format),e.parseFormats=t}function a(e){e.preventDefault()}var s,l,c=window.kendo,u=c.keys,d=c.parseDate,h=c._activeElement,p=c._extractFormat,f=c.support,g=f.browser,m=c.ui,v=m.Widget,_="open",y="close",b="change",w=".kendoTimePicker",k="click"+w,x="k-state-default",C="disabled",T="readonly",S="li",D="<span/>",A="k-state-focused",M="k-state-hover",E="mousedown"+w,I=6e4,R=864e5,P="k-state-selected",L="k-state-disabled",F="aria-selected",B="aria-expanded",z="aria-hidden",H="aria-disabled",N="aria-readonly",O="aria-activedescendant",V="id",U=e.isArray,W=e.extend,j=e.proxy,q=Date,G=new q;G=new q(G.getFullYear(),G.getMonth(),G.getDate(),0,0,0),(s=function(t){var n=this,i=t.id;n.options=t,n.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:f.kineticScrollNeeded?"":"auto"}).on(k,S,j(n._click,n)).on("mouseenter"+w,S,function(){e(this).addClass(M)}).on("mouseleave"+w,S,function(){e(this).removeClass(M)}),n.list=e("<div class='k-list-container'/>").append(n.ul).on(E,a),i&&(n._timeViewID=i+"_timeview",n._optionID=i+"_option_selected",n.ul.attr(V,n._timeViewID)),n._popup(),n._heightHandler=j(n._height,n),n.template=c.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})}).prototype={current:function(n){var i=this,r=i.options.active;return n===t?i._current:(i._current&&i._current.removeClass(P).removeAttr(F).removeAttr(V),n&&(n=e(n).addClass(P).attr(V,i._optionID).attr(F,!0),i.scroll(n[0])),i._current=n,r&&r(n),t)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(w),e.list.off(w),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,n=this,i=n.options,o=i.format,a=c.toString,s=n.template,l=e.length,u=0,d="";l>u;u++)r(t=e[u],i.min,i.max)&&(d+=s(a(t,o,i.culture)));n._html(d)},refresh:function(){var e,t,r,o=this,a=o.options,s=a.format,l=function(){var e=new q,t=new q(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new q(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}(),u=0>l,d=a.min,h=a.max,p=i(d),f=i(h),g=a.interval*I,m=c.toString,v=o.template,_=new q(+d),y=_.getDate(),b=0,w="";for(r=u?(R+l*I)/g:R/g,p!=f&&(p>f&&(f+=R),r=(f-p)/g+1),t=parseInt(r,10);r>b;b++)b&&n(_,g,u),f&&t==b&&(e=i(_),y<_.getDate()&&(e+=R),e>f&&(_=new q(+h))),w+=v(m(_,s,a.culture));o._html(w)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e){var t=this;t.ul[0].innerHTML=e,t.popup.unbind(_,t._heightHandler),t.popup.one(_,t._heightHandler),t.current(null),t.select(t._value)},scroll:function(e){if(e){var t,n=this.ul[0],i=e.offsetTop,r=e.offsetHeight,o=n.scrollTop,a=n.clientHeight,s=i+r,l=this._touchScroller;l?(i>(t=this.list.height())&&(i=i-t+r),l.scrollTo(0,-i)):n.scrollTop=o>i?i:s>o+a?s-a:o}},select:function(t){var n=this,i=n.options,r=n._current;t instanceof Date&&(t=c.toString(t,i.format,i.culture)),"string"==typeof t&&(t=r&&r.text()===t?r:(t=e.grep(n.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}))[0]?t:null),n.current(t)},setOptions:function(e){var t=this.options;e.min=d(e.min),e.max=d(e.max),this.options=W(t,e,{active:t.active,change:t.change,close:t.close,open:t.open}),this.bind()},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,i=e(t.currentTarget),r=i.text(),o=n.options.dates;o&&o.length>0&&(r=o[i.index()]),t.isDefaultPrevented()||(n.select(i),n.options.change(r,!0),n.close())},_height:function(){var e=this,t=e.list,n=t.parent(".k-animation-container"),i=e.options.height;e.ul[0].children.length&&t.add(n).show().height(e.ul[0].scrollHeight>i?i:"auto").hide()},_parse:function(e){var t=this.options,n=this._value||G;return e instanceof q?e:((e=d(e,t.parseFormats,t.culture))&&(e=new q(n.getFullYear(),n.getMonth(),n.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.options.anchor;(n.data("width")||!i)&&(t=(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0)?parseFloat(e.width):r.outerWidth(),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i=t-(n.outerWidth()-n.width()),n.css({fontFamily:r.css("font-family"),width:i}).data("width",i))},_popup:function(){var e=this,t=e.list,n=e.options,i=n.anchor;e.popup=new m.Popup(t,W(n.popup,{anchor:i,open:n.open,close:n.close,animation:n.animation,isRtl:f.isRtl(n.anchor)})),e._touchScroller=c.touchScroller(e.popup.element)},move:function(e){var n=this,i=e.keyCode,r=n.ul[0],o=n._current,a=i===u.DOWN;if(i===u.UP||a){if(e.altKey)return n.toggle(a),t;(o=a?o?o[0].nextSibling:r.firstChild:o?o[0].previousSibling:r.lastChild)&&n.select(o),n.options.change(n._current.text()),e.preventDefault()}else(i===u.ENTER||i===u.TAB||i===u.ESC)&&(e.preventDefault(),o&&n.options.change(o.text(),!0),n.close())}},s.getMilliseconds=i,c.TimeView=s,l=v.extend({init:function(t,n){var i,r,a=this;v.fn.init.call(a,t,n),t=a.element,(n=a.options).min=d(t.attr("min"))||d(n.min),n.max=d(t.attr("max"))||d(n.max),o(n),a._initialOptions=W({},n),a._wrapper(),a.timeView=r=new s(W({},n,{id:t.attr(V),anchor:a.wrapper,format:n.format,change:function(e,n){n?a._change(e):t.val(e)},open:function(e){a.timeView._adjustListWidth(),a.trigger(_)?e.preventDefault():(t.attr(B,!0),i.attr(z,!1))},close:function(e){a.trigger(y)?e.preventDefault():(t.attr(B,!1),i.attr(z,!0))},active:function(e){t.removeAttr(O),e&&t.attr(O,r._optionID)}})),i=r.ul,a._icon(),a._reset();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":r._timeViewID}),t.is("[disabled]")||e(a.element).parents("fieldset").is(":disabled")?a.enable(!1):a.readonly(t.is("[readonly]")),a._old=a._update(n.value||a.element.val()),a._oldText=t.val(),c.notify(a)},options:{name:"TimePicker",min:G,max:G,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[_,y,b],setOptions:function(e){var t=this,n=t._value;v.fn.setOptions.call(t,e),o(e=t.options),t.timeView.setOptions(e),n&&t.element.val(c.toString(n,e.format,e.culture))},dataBind:function(e){U(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._arrow.off(w),o=t.element.off(w),s=t._inputWrapper.off(w);i||n?(s.addClass(n?L:x).removeClass(n?x:L),o.attr(C,n).attr(T,i).attr(H,n).attr(N,i)):(s.addClass(x).removeClass(L).on("mouseenter.kendoTimePicker mouseleave.kendoTimePicker",t._toggleHover),o.removeAttr(C).removeAttr(T).attr(H,!1).attr(N,!1).on("keydown"+w,j(t._keydown,t)).on("focusout"+w,j(t._blur,t)).on("focus"+w,function(){t._inputWrapper.addClass(A)}),r.on(k,j(t._click,t)).on(E,a))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;v.fn.destroy.call(e),e.timeView.destroy(),e.element.off(w),e._arrow.off(w),e._inputWrapper.off(w),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(A)},_click:function(){var e=this.element;this.timeView.toggle(),f.touch||e[0]===h()||e.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t._typing||t.element.trigger(b),t.trigger(b)),t._typing=!1},_icon:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),n._arrow=t.attr({role:"button","aria-controls":n.timeView._timeViewID})},_keydown:function(e){var t=this,n=e.keyCode,i=t.timeView,r=t.element.val();i.popup.visible()||e.altKey?i.move(e):n===u.ENTER&&r!==t._oldText?t._change(r):t._typing=!0},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:((n=i.timeView._parse(n))&&(n=new q(+n),r[e]=n,i.timeView.options[e]=n,i.timeView.bind()),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(M,"mouseenter"===t.type)},_update:function(e){var t=this,n=t.options,i=t.timeView,o=i._parse(e);return r(o,n.min,n.max)||(o=null),t._value=o,t.element.val(o?c.toString(o,n.format,n.culture):e),i.value(o),o},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-timepicker"))[0]||(t=(t=i.wrap(D).parent().addClass("k-picker-wrap k-state-default")).wrap(D).parent()),t[0].style.cssText=i[0].style.cssText,n.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(i[0].className),i.css({width:"100%",height:i[0].style.height}),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))}}),m.plugin(l)}(window.kendo.jQuery),function(e,t){function n(){var e,t=this.options.anchor,n=t.outerWidth();a.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?n-(this.element.outerWidth()-this.element.width()):n,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function i(e){e.target.is(".k-toggle-button")||e.target.toggleClass(v,"press"==e.type)}function r(t){return(t=e(t)).hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}function o(e){e.preventDefault()}var a=window.kendo,s=a.Class,l=a.ui.Widget,c=e.proxy,u=a.isFunction,d="k-button",h="k-overflow-button",p="k-toggle-button",f="k-button-group",g="k-split-button",m="k-separator",v="k-state-active",_="k-state-disabled",y="k-state-hidden",b="k-icon",w="k-i-",k="k-split-button-arrow",x="k-overflow-anchor",C="k-toolbar-first-visible",T="k-toolbar-last-visible",S="click",D="toggle",A="open",M="close",E="overflowOpen",I="overflowClose",R="never",P="auto",L="always",F="k-overflow-hidden",B=a.attr("uid"),z=a.Class.extend({addOverflowAttr:function(){this.element.attr(a.attr("overflow"),this.options.overflow||P)},addUidAttr:function(){this.element.attr(B,this.options.uid)},addIdAttr:function(){this.options.id&&this.element.attr("id",this.options.id)},addOverflowIdAttr:function(){this.options.id&&this.element.attr("id",this.options.id+"_overflow")},attributes:function(){this.options.attributes&&this.element.attr(this.options.attributes)},show:function(){this.element.removeClass(y).show(),this.options.hidden=!1},hide:function(){this.element.addClass(y).hide(),this.options.hidden=!0},remove:function(){this.element.remove()},enable:function(e){e===t&&(e=!0),this.element.toggleClass(_,!e),this.options.enable=e},twin:function(){var e=this.element.attr(B);return this.overflow?this.toolbar.element.find("["+B+"='"+e+"']").data(this.options.type):this.toolbar.options.resizable?this.toolbar.popup.element.find("["+B+"='"+e+"']").data(this.options.type):t}}),H=z.extend({init:function(n,i){var r=e(n.useButtonTag?"<button></button>":"<a></a>");this.element=r,this.options=n,this.toolbar=i,this.attributes(),n.primary&&r.addClass("k-primary"),n.togglable&&(r.addClass(p),this.toggle(n.selected)),n.url===t||n.useButtonTag||(r.attr("href",n.url),n.mobile&&r.attr(a.attr("role"),"button")),n.group&&(r.attr(a.attr("group"),n.group),(this.overflow&&this.options.overflow===L||!this.overflow)&&(this.group=this.toolbar.addToGroup(this,n.group))),!n.togglable&&n.click&&u(n.click)&&(this.clickHandler=n.click),n.togglable&&n.toggle&&u(n.toggle)&&(this.toggleHandler=n.toggle)},toggle:function(e,t){e=!!e,this.group&&e?this.group.select(this):this.group||this.select(e),t&&this.twin()&&this.twin().toggle(e)},getParentGroup:function(){return this.options.isChild?this.element.closest("."+f).data("buttonGroup"):t},_addGraphics:function(){var t,n,i,r=this.element,o=this.options.icon,a=this.options.spriteCssClass,s=this.options.imageUrl;(a||s||o)&&(t=!0,r.contents().not("span.k-sprite,span."+b+",img.k-image").each(function(n,i){(1==i.nodeType||3==i.nodeType&&e.trim(i.nodeValue).length>0)&&(t=!1)}),r.addClass(t?"k-button-icon":"k-button-icontext")),o?((n=r.children("span."+b).first())[0]||(n=e('<span class="'+b+'"></span>').prependTo(r)),n.addClass(w+o)):a?((n=r.children("span.k-sprite").first())[0]||(n=e('<span class="k-sprite"></span>').prependTo(r)),n.addClass(a)):s&&((i=r.children("img.k-image").first())[0]||(i=e('<img alt="icon" class="k-image" />').prependTo(r)),i.attr("src",s))}}),N=H.extend({init:function(e,t){H.fn.init.call(this,e,t);var n=this.element;n.addClass(d),this.addIdAttr(),e.align&&n.addClass("k-align-"+e.align),"overflow"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),e.hasIcon="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),e.hasIcon&&this._addGraphics(),this.addUidAttr(),this.addOverflowAttr(),this.enable(e.enable),e.hidden&&this.hide(),this.element.data({type:"button",button:this})},select:function(e){e===t&&(e=!1),this.element.toggleClass(v,e),this.options.selected=e}}),O=H.extend({init:function(e,t){this.overflow=!0,H.fn.init.call(this,e,t);var n=this.element;n.addClass(h+" "+d),"toolbar"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),e.hasIcon="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),e.hasIcon&&this._addGraphics(),e.isChild||this._wrap(),this.addOverflowIdAttr(),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.enable(e.enable),e.hidden&&this.hide(),this.element.data({type:"button",button:this})},_wrap:function(){this.element=this.element.wrap("<li></li>").parent()},overflowHidden:function(){this.element.addClass(F)},select:function(e){e===t&&(e=!1),this.options.isChild?this.element.toggleClass(v,e):this.element.find(".k-button").toggleClass(v,e),this.options.selected=e}}),V=z.extend({createButtons:function(t){var n,i=this.options,r=i.buttons||[];for(n=0;r.length>n;n++)r[n].uid||(r[n].uid=a.guid()),new t(e.extend({mobile:i.mobile,isChild:!0,type:"button"},r[n]),this.toolbar).element.appendTo(this.element)},refresh:function(){this.element.children().filter(":not('."+y+"'):first").addClass("k-group-start"),this.element.children().filter(":not('."+y+"'):last").addClass("k-group-end")}}),U=V.extend({init:function(t,n){var i=this.element=e("<div></div>");this.options=t,this.toolbar=n,this.addIdAttr(),t.align&&i.addClass("k-align-"+t.align),this.createButtons(N),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.refresh(),i.addClass(f),this.element.data({type:"buttonGroup",buttonGroup:this})}}),W=V.extend({init:function(t,n){var i=this.element=e("<li></li>");this.options=t,this.toolbar=n,this.overflow=!0,this.addOverflowIdAttr(),this.createButtons(O),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.refresh(),i.addClass((t.mobile?"":f)+" k-overflow-group"),this.element.data({type:"buttonGroup",buttonGroup:this})},overflowHidden:function(){this.element.addClass(F)}}),j=z.extend({init:function(t,n){var i=this.element=e('<div class="'+g+'"></div>');this.options=t,this.toolbar=n,this.mainButton=new N(t,n),this.arrowButton=e('<a class="'+d+" "+k+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),this.popupElement=e('<ul class="k-list-container k-split-container"></ul>'),this.mainButton.element.appendTo(i),this.arrowButton.appendTo(i),this.popupElement.appendTo(i),t.align&&i.addClass("k-align-"+t.align),t.id||(t.id=t.uid),i.attr("id",t.id+"_wrapper"),this.addOverflowAttr(),this.addUidAttr(),this.createMenuButtons(),this.createPopup(),this.mainButton.main=!0,i.data({type:"splitButton",splitButton:this,kendoPopup:this.popup})},createMenuButtons:function(){var t,n=this.options,i=n.menuButtons;for(t=0;i.length>t;t++)new N(e.extend({mobile:n.mobile,type:"button",click:n.click},i[t]),this.toolbar).element.wrap("<li></li>").parent().appendTo(this.popupElement)},createPopup:function(){var t=this.options,i=this.element;this.popupElement.attr("id",t.id+"_optionlist").attr(B,t.rootUid),t.mobile&&(this.popupElement=r(this.popupElement)),this.popup=this.popupElement.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:i,isRtl:this.toolbar._isRtl,copyAnchorStyles:!1,animation:t.animation,open:n}).data("kendoPopup")},remove:function(){this.popup.destroy(),this.element.remove()},toggle:function(){this.popup.toggle()},enable:function(e){e===t&&(e=!0),this.mainButton.enable(e),this.options.enable=e}}),q=z.extend({init:function(t,n){var i,r=this.element=e('<li class="'+g+'"></li>'),o=t.menuButtons;for(this.options=t,this.toolbar=n,this.overflow=!0,this.mainButton=new O(e.extend({isChild:!0},t)),this.mainButton.element.appendTo(r),i=0;o.length>i;i++)new O(e.extend({mobile:t.mobile,isChild:!0},o[i]),this.toolbar).element.appendTo(r);this.addUidAttr(),this.addOverflowAttr(),this.mainButton.main=!0,r.data({type:"splitButton",splitButton:this})},overflowHidden:function(){this.element.addClass(F)}}),G=z.extend({init:function(t,n){var i=this.element=e("<div>&nbsp;</div>");this.element=i,this.options=t,this.toolbar=n,this.attributes(),this.addIdAttr(),this.addUidAttr(),this.addOverflowAttr(),i.addClass(m),i.data({type:"separator",separator:this})}}),$=z.extend({init:function(t,n){var i=this.element=e("<li>&nbsp;</li>");this.element=i,this.options=t,this.toolbar=n,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),i.addClass(m),i.data({type:"separator",separator:this})},overflowHidden:function(){this.element.addClass(F)}}),Y=z.extend({init:function(t,n,i){var r=u(t)?t(n):t;r=r instanceof jQuery?r.wrap("<div></div>").parent():e("<div></div>").html(r),this.element=r,this.options=n,this.options.type="template",this.toolbar=i,this.attributes(),this.addUidAttr(),this.addIdAttr(),this.addOverflowAttr(),r.data({type:"template",template:this})}}),Q=z.extend({init:function(t,n,i){var r=e(u(t)?t(n):t);r=r instanceof jQuery?r.wrap("<li></li>").parent():e("<li></li>").html(r),this.element=r,this.options=n,this.options.type="template",this.toolbar=i,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),this.addOverflowAttr(),r.data({type:"template",template:this})},overflowHidden:function(){this.element.addClass(F)}}),X={button:{toolbar:N,overflow:O},buttonGroup:{toolbar:U,overflow:W},splitButton:{toolbar:j,overflow:q},separator:{toolbar:G,overflow:$},overflowAnchor:'<div class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'},K=s.extend({init:function(e){this.name=e,this.buttons=[]},add:function(e){this.buttons[this.buttons.length]=e},remove:function(t){var n=e.inArray(t,this.buttons);this.buttons.splice(n,1)},select:function(e){for(var t=0;this.buttons.length>t;t++)this.buttons[t].select(!1);e.select(!0)}}),Z=l.extend({init:function(t,n){var r,s=this;if(l.fn.init.call(s,t,n),n=s.options,(t=s.wrapper=s.element).addClass("k-toolbar k-widget"),this.uid=a.guid(),this._isRtl=a.support.isRtl(t),this._groups={},t.attr(B,this.uid),s.isMobile="boolean"==typeof n.mobile?n.mobile:s.element.closest(".km-root")[0],s.animation=s.isMobile?{open:{effects:"fade"}}:{},s.isMobile&&(t.addClass("km-widget"),b="km-icon",w="km-",d="km-button",f="km-buttongroup km-widget",v="km-state-active",_="km-state-disabled"),n.resizable?(s._renderOverflow(),t.addClass("k-toolbar-resizable"),s.overflowUserEvents=new a.UserEvents(s.element,{threshold:5,allowSelection:!0,filter:"."+x,tap:c(s._toggleOverflow,s)}),s._resizeHandler=a.onResize(function(){s.resize()})):s.popup={element:e([])},n.items&&n.items.length)for(r=0;n.items.length>r;r++)s.add(n.items[r]);s.userEvents=new a.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+B+"="+this.uid+"] ."+d+", ["+B+"="+this.uid+"] ."+h,tap:c(s._buttonClick,s),press:i,release:i}),s.element.on(S,"."+_,o),n.resizable&&s.popup.element.on(S,NaN+_,o),n.resizable&&this._toggleOverflowAnchor(),a.notify(s)},events:[S,D,A,M,E,I],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},addToGroup:function(e,t){var n;return(n=this._groups[t]?this._groups[t]:this._groups[t]=new K).add(e),n},destroy:function(){var t=this;t.element.find("."+g).each(function(t,n){e(n).data("kendoPopup").destroy()}),t.userEvents.destroy(),t.options.resizable&&(a.unbindResize(t._resizeHandler),t.overflowUserEvents.destroy(),t.popup.destroy()),l.fn.destroy.call(t)},add:function(t){var n,i,r=X[t.type],o=t.template,s=this,l=s.isMobile?"":"k-item k-state-default",c=t.overflowTemplate;e.extend(t,{uid:a.guid(),animation:s.animation,mobile:s.isMobile,rootUid:s.uid}),o&&!c?t.overflow=R:t.overflow||(t.overflow=P),t.overflow!==R&&s.options.resizable&&(c?i=new Q(c,t,s):r&&(i=new r.overflow(t,s)).element.addClass(l),i&&(t.overflow===P&&i.overflowHidden(),i.element.appendTo(s.popup.container),s.angular("compile",function(){return{elements:i.element.get()}}))),t.overflow!==L&&(o?n=new Y(o,t,s):r&&(n=new r.toolbar(t,s)),n&&(s.options.resizable?(n.element.appendTo(s.element).css("visibility","hidden"),s._shrink(s.element.innerWidth()),n.element.css("visibility","visible")):n.element.appendTo(s.element),s.angular("compile",function(){return{elements:n.element.get()}})))},_getItem:function(e){var t,n,i,r,o=this.options.resizable;return r=(t=this.element.find(e)).length?t.data("type"):"",(n=t.data(r))&&n.main&&(r="splitButton",n=(t=t.parent("."+g)).data(r)),!t.length&&o&&(r=(t=this.popup.element.find(e)).data("type"),i=t.data(r)),i&&i.main&&(r="splitButton",i=(t=t.parent("."+g)).data(r)),n&&o&&(i=n.twin()),{type:r,toolbar:n,overflow:i}},remove:function(e){var t=this._getItem(e);t.toolbar&&t.toolbar.remove(),t.overflow&&t.overflow.remove(),this.resize(!0)},hide:function(e){var t=this._getItem(e);t.toolbar&&(t.toolbar.hide(),"button"===t.toolbar.options.type&&t.toolbar.options.isChild&&t.toolbar.getParentGroup().refresh()),t.overflow&&(t.overflow.hide(),"button"===t.overflow.options.type&&t.overflow.options.isChild&&t.overflow.getParentGroup().refresh()),this.resize(!0)},show:function(e){var t=this._getItem(e);t.toolbar&&(t.toolbar.show(),"button"===t.toolbar.options.type&&t.toolbar.options.isChild&&t.toolbar.getParentGroup().refresh()),t.overflow&&(t.overflow.show(),"button"===t.overflow.options.type&&t.overflow.options.isChild&&t.overflow.getParentGroup().refresh()),this.resize(!0)},enable:function(e,n){var i=this._getItem(e);t===n&&(n=!0),i.toolbar&&i.toolbar.enable(n),i.overflow&&i.overflow.enable(n)},getSelectedFromGroup:function(e){return this.element.find("."+p+"[data-group='"+e+"']").filter("."+v)},toggle:function(n,i){var r=e(n).data("button");r.options.togglable&&(i===t&&(i=!0),r.toggle(i,!0))},_renderOverflow:function(){var t=this,n=X.overflowContainer,i=t._isRtl,o=i?"left":"right";t.overflowAnchor=e(X.overflowAnchor).addClass(d),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),n=r(n)):t.overflowAnchor.append('<span class="k-icon k-i-more"></span>'),t.popup=new a.ui.Popup(n,{origin:"bottom "+o,position:"top "+o,anchor:t.overflowAnchor,isRtl:i,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(n){var r=a.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):r.css("margin-left",(i?-1:1)*((r.outerWidth()-r.width())/2+1)),t.trigger(E)&&n.preventDefault()},close:function(e){t.trigger(I)&&e.preventDefault()}}),t.popup.container=t.isMobile?t.popup.element.find(".k-overflow-container"):t.popup.element,t.popup.container.attr(B,this.uid)},_toggleOverflowAnchor:function(){this.overflowAnchor.css(this.popup.element.children(":not(."+F+", .k-popup)").length>0?{visibility:"visible",width:""}:{visibility:"hidden",width:"1px"})},_buttonClick:function(n){var i,r,o,a,s,l=this,c=n.target.closest("."+k).length;return n.preventDefault(),c?(l._toggle(n),t):((i=e(n.target).closest("."+d,l.element)).hasClass(x)||(!(r=i.data("button"))&&l.popup&&(r=(i=e(n.target).closest("."+h,l.popup.container)).parent("li").data("button")),r&&r.options.enable&&(r.options.togglable?(a=u(r.toggleHandler)?r.toggleHandler:null,r.toggle(!r.options.selected,!0),s={target:i,group:r.options.group,checked:r.options.selected,id:r.options.id},a&&a.call(l,s),l.trigger(D,s)):(a=u(r.clickHandler)?r.clickHandler:null,s={target:i,id:r.options.id},a&&a.call(l,s),l.trigger(S,s)),i.hasClass(h)&&l.popup.close(),(o=i.closest(".k-split-container"))[0]&&(o.data("kendoPopup")||o.parents(".km-popup-wrapper").data("kendoPopup")).close())),t)},_toggle:function(t){var n=e(t.target).closest("."+g).data("splitButton");t.preventDefault(),n.options.enable&&((n.popup.element.is(":visible")?this.trigger(M,{target:n.element}):this.trigger(A,{target:n.element}))||n.toggle())},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0;return this.element.children(":visible:not('."+y+"')").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,n,i;if(e<this._childrenWidth())for(i=(n=this.element.children(":visible:not([data-overflow='never'], ."+x+")")).length-1;i>=0&&(t=n.eq(i),!(e>this._childrenWidth()));i--)this._hideItem(t)},_stretch:function(e){var t,n,i;if(e>this._childrenWidth())for(n=this.element.children(":hidden:not('."+y+"')"),i=0;n.length>i&&(t=n.eq(i),!(e<this._childrenWidth())&&this._showItem(t,e));i++);},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(F)},_showItem:function(e,t){return!!(e.length&&t>this._childrenWidth()+e.outerWidth(!0))&&(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(F),!0)},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),n=e.filter(":not(.k-overflow-hidden)"),i=t.filter(":visible");e.add(t).removeClass(C+" "+T),n.first().add(i.first()).addClass(C),n.last().add(i.last()).addClass(T)}});a.ui.plugin(Z)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(2100,0,1);return t.setMinutes(-e),t}function i(e){e.preventDefault()}function r(t){var n,i=o.getCulture(t.culture).calendars.standard.patterns,r=!t.parseFormats.length;t.format=c(t.format||i.g),t.timeFormat=n=c(t.timeFormat||i.t),o.DateView.normalize(t),r&&t.parseFormats.push("yyyy-MM-ddTHH:mm:ss"),-1===e.inArray(n,t.parseFormats)&&t.parseFormats.splice(1,0,n)}var o=window.kendo,a=o.TimeView,s=o.parseDate,l=o._activeElement,c=o._extractFormat,u=o.calendar,d=u.isInRange,h=u.restrictValue,p=u.isEqualDatePart,f=a.getMilliseconds,g=o.ui,m=g.Widget,v="open",_="close",y="change",b=".kendoDateTimePicker",w="click"+b,k="disabled",x="readonly",C="k-state-default",T="k-state-focused",S="k-state-disabled",D="mousedown"+b,A="month",M="<span/>",E="aria-activedescendant",I="aria-expanded",R="aria-hidden",P="aria-owns",L="aria-disabled",F="aria-readonly",B=Date,z=new B(1800,0,1),H=new B(2099,11,31),N={view:"date"},O={view:"time"},V=e.extend,U=m.extend({init:function(t,n){var i=this;m.fn.init.call(i,t,n),t=i.element,(n=i.options).min=s(t.attr("min"))||s(n.min),n.max=s(t.attr("max"))||s(n.max),r(n),i._initialOptions=V({},n),i._wrapper(),i._views(),i._icons(),i._reset(),i._template();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1}),i._midnight=i._calculateMidnight(n.min,n.max),t.is("[disabled]")||e(i.element).parents("fieldset").is(":disabled")?i.enable(!1):i.readonly(t.is("[readonly]")),i._old=i._update(n.value||i.element.val()),i._oldText=t.val(),o.notify(i)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new B(z),max:new B(H),interval:30,height:200,footer:"",start:A,depth:A,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#'},events:[v,_,y],setOptions:function(e){var t,n,i,a=this,l=a._value;m.fn.setOptions.call(a,e),(e=a.options).min=t=s(e.min),e.max=n=s(e.max),r(e),a._midnight=a._calculateMidnight(e.min,e.max),i=e.value||a._value||a.dateView._current,t&&!p(t,i)&&(t=new B(z)),n&&!p(n,i)&&(n=new B(H)),a.dateView.setOptions(e),a.timeView.setOptions(V({},e,{format:e.timeFormat,min:t,max:n})),l&&(a.element.val(o.toString(l,e.format,e.culture)),a._updateARIA(l))},_editable:function(t){var n=this,r=n.element.off(b),a=n._dateIcon.off(b),s=n._timeIcon.off(b),c=n._inputWrapper.off(b),u=t.readonly,d=t.disable;u||d?(c.addClass(d?S:C).removeClass(d?C:S),r.attr(k,d).attr(x,u).attr(L,d).attr(F,u)):(c.addClass(C).removeClass(S).on("mouseenter.kendoDateTimePicker mouseleave.kendoDateTimePicker",n._toggleHover),r.removeAttr(k).removeAttr(x).attr(L,!1).attr(F,!1).on("keydown"+b,e.proxy(n._keydown,n)).on("focus"+b,function(){n._inputWrapper.addClass(T)}).on("focusout"+b,function(){n._inputWrapper.removeClass(T),r.val()!==n._oldText&&n._change(r.val()),n.close("date"),n.close("time")}),a.on(D,i).on(w,function(){n.toggle("date"),o.support.touch||r[0]===l()||r.focus()}),s.on(D,i).on(w,function(){n.toggle("time"),o.support.touch||r[0]===l()||r.focus()}))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;m.fn.destroy.call(e),e.dateView.destroy(),e.timeView.destroy(),e.element.off(b),e._dateIcon.off(b),e._timeIcon.off(b),e._inputWrapper.off(b),e._form&&e._form.off("reset",e._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(y),t._typing||t.element.trigger(y))},_option:function(e,i){var r,o,a=this,l=a.options,c=a.timeView,u=c.options,d=a._value||a._old;if(i===t)return l[e];if(i=s(i,l.parseFormats,l.culture)){if(l.min.getTime()===l.max.getTime()&&(u.dates=[]),l[e]=new B(i.getTime()),a.dateView[e](i),a._midnight=a._calculateMidnight(l.min,l.max),d&&(r=p(l.min,d),o=p(l.max,d)),r||o){if(u[e]=i,r&&!o&&(u.max=n(l.interval)),o){if(a._midnight)return c.dataBind([H]),t;r||(u.min=z)}}else u.max=H,u.min=z;c.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_update:function(t){var i,r,a,l,c,u=this,f=u.options,g=f.min,m=f.max,v=f.dates,_=u.timeView,y=u._value,b=s(t,f.parseFormats,f.culture),w=null===b&&null===y||b instanceof Date&&y instanceof Date;return+b==+y&&w?((c=o.toString(b,f.format,f.culture))!==t&&u.element.val(null===b?t:c),b):(null!==b&&p(b,g)?b=h(b,g,m):d(b,g,m)||(b=null),u._value=b,_.value(b),u.dateView.value(b),b&&(a=u._old,r=_.options,v[0]&&(v=e.grep(v,function(e){return p(b,e)}))[0]&&(_.dataBind(v),l=!0),l||(p(b,g)&&(r.min=g,r.max=n(f.interval),i=!0),p(b,m)&&(u._midnight?(_.dataBind([H]),l=!0):(r.max=m,i||(r.min=z),i=!0))),!l&&(!a&&i||a&&!p(a,b))&&(i||(r.max=H,r.min=z),_.bind())),u.element.val(b?o.toString(b,f.format,f.culture):t),u._updateARIA(b),b)},_keydown:function(e){var t=this,n=t.dateView,i=t.timeView,r=t.element.val(),a=n.popup.visible();e.altKey&&e.keyCode===o.keys.DOWN?t.toggle(a?"time":"date"):a?(n.move(e),t._updateARIA(n._current)):i.popup.visible()?i.move(e):e.keyCode===o.keys.ENTER&&r!==t._oldText?t._change(r):t._typing=!0},_views:function(){var e,t,n,i,r,l,c=this,u=c.element,h=c.options,p=u.attr("id");c.dateView=e=new o.DateView(V({},h,{id:p,anchor:c.wrapper,change:function(){var t,n=e.calendar.value(),i=+n,r=+h.min,o=+h.max;(i===r||i===o)&&((t=new B(+c._value)).setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),d(t,r,o)&&(n=t)),c._change(n),c.close("date")},close:function(e){c.trigger(_,N)?e.preventDefault():(u.attr(I,!1),n.attr(R,!0),t.popup.visible()||u.removeAttr(P))},open:function(t){c.trigger(v,N)?t.preventDefault():(u.val()!==c._oldText&&(l=s(u.val(),h.parseFormats,h.culture),c.dateView[l?"current":"value"](l)),n.attr(R,!1),u.attr(I,!0).attr(P,e._dateViewID),c._updateARIA(l))}})),n=e.div,r=h.min.getTime(),c.timeView=t=new a({id:p,value:h.value,anchor:c.wrapper,animation:h.animation,format:h.timeFormat,culture:h.culture,height:h.height,interval:h.interval,min:new B(z),max:new B(H),dates:r===h.max.getTime()?[new Date(r)]:[],parseFormats:h.parseFormats,change:function(n,i){n=t._parse(n),h.min>n?(n=new B(+h.min),t.options.min=n):n>h.max&&(n=new B(+h.max),t.options.max=n),i?(c._timeSelected=!0,c._change(n)):(u.val(o.toString(n,h.format,h.culture)),e.value(n),c._updateARIA(n))},close:function(t){c.trigger(_,O)?t.preventDefault():(i.attr(R,!0),u.attr(I,!1),e.popup.visible()||u.removeAttr(P))},open:function(e){t._adjustListWidth(),c.trigger(v,O)?e.preventDefault():(u.val()!==c._oldText&&(l=s(u.val(),h.parseFormats,h.culture),c.timeView.value(l)),i.attr(R,!1),u.attr(I,!0).attr(P,t._timeViewID),t.options.active(t.current()))},active:function(e){u.removeAttr(E),e&&u.attr(E,t._optionID)}}),i=t.ul},_icons:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),t=t.children(),n._dateIcon=t.eq(0).attr({role:"button","aria-controls":n.dateView._dateViewID}),n._timeIcon=t.eq(1).attr({role:"button","aria-controls":n.timeView._timeViewID})},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-datetimepicker"))[0]||(t=(t=i.wrap(M).parent().addClass("k-picker-wrap k-state-default")).wrap(M).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=o.template(this.options.ARIATemplate)},_calculateMidnight:function(e,t){return f(e)+f(t)===0},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr(E),i&&((t=i._cell).attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr(E,t.attr("id")))}});g.plugin(U)}(window.kendo.jQuery),function(e,t){function n(e){return v.test(e)}function i(e){return m.test(e)||/^\d+$/.test(e)}function r(e){return!n(e)&&!i(e)}function o(e,t){var i=parseInt(e,10);return n(e)&&(i=Math.floor(i*t/100)),i}function a(e,n){return function(i,r){var o=this.element.find(i).data(D);return 1==arguments.length?o[e]:(o[e]=r,n&&this.element.data("kendo"+this.options.name).resize(!0),t)}}function s(e){var t=this,n=e.orientation;t.owner=e,t._element=e.element,t.orientation=n,p(t,n===C?c:l),t._resizable=new u.ui.Resizable(e.element,{orientation:n,handle:".k-splitbar-draggable-"+n+"[data-marker="+e._marker+"]",hint:f(t._createHint,t),start:f(t._start,t),max:f(t._max,t),min:f(t._min,t),invalidClass:"k-restricted-size-"+n,resizeend:f(t._stop,t)})}var l,c,u=window.kendo,d=u.ui,h=u.keys,p=e.extend,f=e.proxy,g=d.Widget,m=/^\d+(\.\d+)?px$/i,v=/^\d+(\.\d+)?%$/i,_=".kendoSplitter",y="expand",b="collapse",w="contentLoad",k="error",x="layoutChange",C="horizontal",T="vertical",S="click",D="pane",A="k-state-focused",M="k-"+D,E="."+M,I=g.extend({init:function(e,t){var n,i=this;g.fn.init.call(i,e,t),i.wrapper=i.element,n=i.options.orientation.toLowerCase()!=T,i.orientation=n?C:T,i._dimension=n?"width":"height",i._keys={decrease:n?h.LEFT:h.UP,increase:n?h.RIGHT:h.DOWN},i._resizeStep=10,i._marker=u.guid().substring(0,8),i._initPanes(),i.resizing=new s(i),i.element.triggerHandler("init"+_)},events:[y,b,w,k,"resize",x],_addOverlays:function(){this._panes().append("<div class='k-splitter-overlay k-overlay' />")},_removeOverlays:function(){this._panes().children(".k-splitter-overlay").remove()},_attachEvents:function(){var t=this,n=t.options.orientation;t.element.children(".k-splitbar-draggable-"+n).on("keydown"+_,f(t._keydown,t)).on("mousedown"+_,function(e){e.currentTarget.focus()}).on("focus"+_,function(t){e(t.currentTarget).addClass(A)}).on("blur"+_,function(n){e(n.currentTarget).removeClass(A),t.resizing&&t.resizing.end()}).on("mouseenter"+_,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on("mouseleave"+_,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+_,f(t._addOverlays,t)).end().children(".k-splitbar").on("dblclick"+_,f(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(S+_,t._arrowClick(b)).end().children(".k-expand-next, .k-expand-prev").on(S+_,t._arrowClick(y)).end().end(),e(window).on("resize"+_+t._marker,f(t.resize,t,!1)),e(document).on("mouseup"+_+t._marker,f(t._removeOverlays,t))},_detachEvents:function(){var t=this;t.element.children(".k-splitbar-draggable-"+t.orientation).off(_).end().children(".k-splitbar").off("dblclick"+_).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(_),e(window).off(_+t._marker),e(document).off(_+t._marker)},options:{name:"Splitter",orientation:C,panes:[]},destroy:function(){g.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),u.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var n,i=this,r=t.keyCode,o=i.resizing,a=e(t.currentTarget),s=i._keys,l=r===s.increase,c=r===s.decrease;l||c?(t.ctrlKey?(n=a[c?"next":"prev"](),o&&o.isResizing()&&o.end(),n[i._dimension]()?i._triggerAction(b,a[c?"prev":"next"]()):i._triggerAction(y,n)):o&&o.move((c?-1:1)*i._resizeStep,a),t.preventDefault()):r===h.ENTER&&o&&(o.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(n,i){"script"!=i.nodeName.toLowerCase()&&t._initPane(i,e[n])}),this.resize()},_initPane:function(t,n){(t=e(t).attr("role","group").addClass(M)).data(D,n||{}).toggleClass("k-scrollable",!n||!1!==n.scrollable),this.ajaxRequest(t)},ajaxRequest:function(e,t,n){var i,r=this;i=(e=r.element.find(e)).data(D),(t=t||i.contentUrl)&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),u.isLocalUrl(t)?jQuery.ajax({url:t,data:n||{},type:"GET",dataType:"html",success:function(t){r.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),r.angular("compile",function(){return{elements:e.get()}}),r.trigger(w,{pane:e[0]})},error:function(t,n){r.trigger(k,{pane:e[0],status:n,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n,i=this,r=e(t.target);r.closest(".k-splitter")[0]==i.element[0]&&1===(n=r.children(".k-icon:not(.k-resize-handle)")).length&&(n.is(".k-collapse-prev")?i._triggerAction(b,r.prev()):n.is(".k-collapse-next")?i._triggerAction(b,r.next()):n.is(".k-expand-prev")?i._triggerAction(y,r.prev()):n.is(".k-expand-next")&&i._triggerAction(y,r.next()))},_arrowClick:function(t){var n=this;return function(i){var r,o=e(i.target);o.closest(".k-splitter")[0]==n.element[0]&&(r=o.is(".k-"+t+"-prev")?o.parent().prev():o.parent().next(),n._triggerAction(t,r))}},_updateSplitBar:function(e,t,n){var i=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,o=!1!==t.resizable&&!1!==n.resizable,a=t.collapsible,s=t.collapsed,l=n.collapsible,c=n.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(s||c)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,o&&!s&&!c).toggleClass("k-splitbar-static-"+r,!o&&!a&&!l).html(i("k-collapse-prev",a&&!s&&!c)+i("k-expand-prev",a&&s&&!c)+i("k-resize-handle",o)+i("k-collapse-next",l&&!c&&!s)+i("k-expand-next",l&&c&&!s)),o||a||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),i=n.prevAll(E).first().data(D),r=n.nextAll(E).first().data(D);r&&t._updateSplitBar(n,i,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element?this.element.children(E):e()},_resize:function(){var n,i,a,s,l,c,d,h,p,f=this,g=f.element,m=g.children(E),v=f.orientation==C,_=g.children(".k-splitbar"),y=_.length,b=v?"width":"height",w=g[b]();f.wrapper.addClass("k-splitter-resizing"),0===y?(y=m.length-1,m.slice(0,y).after("<div tabindex='0' class='k-splitbar' data-marker='"+f._marker+"' />"),f._updateSplitBars(),_=g.children(".k-splitbar")):f._updateSplitBars(),_.each(function(){w-=this[v?"offsetWidth":"offsetHeight"]}),n=0,i=e(),m.css({position:"absolute",top:0})[b](function(){var a,s=e(this),l=s.data(D)||{};if(s.removeClass("k-state-collapsed"),l.collapsed)a=l.collapsedSize?o(l.collapsedSize,w):0,s.css("overflow","hidden").addClass("k-state-collapsed");else{if(r(l.size))return i=i.add(this),t;a=o(l.size,w)}return n+=a,a}),w-=n,a=i.length,s=Math.floor(w/a),i.slice(0,a-1).css(b,s).end().eq(a-1).css(b,w-(a-1)*s),l=0,c=v?"height":"width",d=v?"left":"top",h=v?"offsetWidth":"offsetHeight",0===a&&(p=m.filter(function(){return!(e(this).data(D)||{}).collapsed}).last())[b](w+p[0][h]),g.children().css(c,g[c]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[d]=Math.floor(l)+"px",l+=t[h])}),f._detachEvents(),f._attachEvents(),f.wrapper.removeClass("k-splitter-resizing"),u.resize(m),f.trigger(x)},toggle:function(e,n){var i;i=(e=this.element.find(e)).data(D),(n||i.collapsible)&&(1==arguments.length&&(n=i.collapsed!==t&&i.collapsed),i.collapsed=!n,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),this.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,n){var i=this;return n.length&&(i.options.panes.splice(t,0,e),i._initPane(n,e),i._removeSplitBars(),i.resize(!0)),n},append:function(t){t=t||{};var n=this,i=e("<div />").appendTo(n.element);return n._addPane(t,n.options.panes.length,i)},insertBefore:function(t,n){n=e(n),t=t||{};var i=this.wrapper.children(".k-pane").index(n),r=e("<div />").insertBefore(e(n));return this._addPane(t,i,r)},insertAfter:function(t,n){n=e(n),t=t||{};var i=this.wrapper.children(".k-pane").index(n),r=e("<div />").insertAfter(e(n));return this._addPane(t,i+1,r)},remove:function(t){var n=this;return(t=e(t)).length&&(u.destroy(t),t.each(function(t,i){n.options.panes.splice(n.wrapper.children(".k-pane").index(i),1),e(i).remove()}),n._removeSplitBars(),n.options.panes.length&&n.resize(!0)),n},size:a("size",!0),min:a("min"),max:a("max")});d.plugin(I),l={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},c={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"},s.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,r=e(t.currentTarget),o=r.prev(),a=r.next(),s=o.data(D),l=a.data(D),c=parseInt(o[0].style[n.positioningProperty],10),u=parseInt(a[0].style[n.positioningProperty],10)+a[0][n.sizingDomProperty]-r[0][n.sizingDomProperty],d=parseInt(n._element.css(n.sizingProperty),10),h=function(e){var t=parseInt(e,10);return(i(e)?t:d*t/100)||0},p=h(s.min),f=h(s.max)||u-c,g=h(l.min),m=h(l.max)||u-c;n.previousPane=o,n.nextPane=a,n._maxPosition=Math.min(u-g,c+f),n._minPosition=Math.max(c+p,u-m)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var n,i,o,a,s,l,c,d,h=this,p=e(t.currentTarget),f=h.owner;return f._panes().children(".k-splitter-overlay").remove(),t.keyCode!==u.keys.ESC&&(n=t.position,i=p.prev(),o=p.next(),a=i.data(D),s=o.data(D),l=n-parseInt(i[0].style[h.positioningProperty],10),c=parseInt(o[0].style[h.positioningProperty],10)+o[0][h.sizingDomProperty]-n-p[0][h.sizingDomProperty],d=h._element.children(E).filter(function(){return r(e(this).data(D).size)}).length,(!r(a.size)||d>1)&&(r(a.size)&&d--,a.size=l+"px"),(!r(s.size)||d>1)&&(s.size=c+"px"),f.resize(!0)),!1}}}(window.kendo.jQuery),function(e,t){function n(e){return e[e.length-1]}function i(e){return e instanceof Array?e:[e]}function r(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function o(e,t,n){var i=document.createElement(n||"div");return t&&(i.className=t),e.appendChild(i),i}function a(n,i,r){var o=r.template;n=e(n),i.item||(o=r.placeholderTemplate),this.angular("cleanup",function(){return{elements:[n]}}),n.attr("data-uid",i.item?i.item.uid:"").attr("data-offset-index",i.index).html(o(i.item||{})),n.toggleClass(g,i.current),n.toggleClass(f,i.selected),n.toggleClass("k-first",i.newGroup),n.toggleClass("k-loading-item",!i.item),0!==i.index&&i.newGroup&&e("<div class="+p+"></div>").appendTo(n).html(r.groupTemplate({group:i.group})),i.top!==t&&function(e,t){s.support.browser.msie&&10>s.support.browser.version?e.style.top=t+"px":(e.style.webkitTransform="translateY("+t+"px)",e.style.transform="translateY("+t+"px)")}(n[0],i.top),this.angular("compile",function(){return{elements:[n],data:[{dataItem:i.item,group:i.group,newGroup:i.newGroup}]}})}var s=window.kendo,l=s.ui,c=l.Widget,u=l.DataBoundWidget,d=e.proxy,h="k-virtual-item",p="k-group",f="k-state-selected",g="k-state-focused",m="k-state-hover",v="change",_="click",y="listBound",b="itemChange",w="activate",k="deactivate",x=".VirtualList",C=u.extend({init:function(t,n){var r=this;r._listCreated=!1,r._fetching=!1,r._filter=!1,c.fn.init.call(r,t,n),r.options.itemHeight||(r.options.itemHeight=function(){var t,n=e('<div class="k-popup"><ul class="k-list"><li class="k-item"><li></ul></div>');return n.css({position:"absolute",left:"-200000px",visibility:"hidden"}),n.appendTo(document.body),t=parseFloat(s.getComputedStyles(n.find(".k-item")[0],["line-height"])["line-height"]),n.remove(),t}()),n=r.options,r.element.addClass("k-list k-virtual-list").attr("role","listbox"),r.content=r.element.wrap("<div unselectable='on' class='k-virtual-content'></div>").parent(),r.wrapper=r.content.wrap("<div class='k-virtual-wrap'></div>").parent(),r.header=r.content.before("<div class='k-group-header'></div>").prev(),r.element.on("mouseenter"+x,"li:not(.k-loading-item)",function(){e(this).addClass(m)}).on("mouseleave"+x,"li",function(){e(this).removeClass(m)}),r._values=i(r.options.value),r._selectedDataItems=[],r._selectedIndexes=[],r._rangesList={},r._activeDeferred=null,r._promisesList=[],r._optionID=s.guid(),r.setDataSource(n.dataSource),r.content.on("scroll"+x,s.throttle(function(){r._renderItems()},n.delay)),r._selectable()},options:{name:"VirtualList",autoBind:!0,delay:100,height:null,listScreens:4,threshold:.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:!1,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:group#",fixedGroupTemplate:"fixed header template",valueMapper:null},events:[v,_,y,b,w,k],setOptions:function(e){c.fn.setOptions.call(this,e),this._selectProxy&&!1===this.options.selectable?this.element.off(_,"."+h,this._selectProxy):!this._selectProxy&&this.options.selectable&&this._selectable(),this.refresh()},items:function(){return e(this._items)},destroy:function(){this.wrapper.off(x),this.dataSource.unbind(v,this._refreshHandler),c.fn.destroy.call(this)},setDataSource:function(t){var n,i=this,r=t||{};r=e.isArray(r)?{data:r}:r,r=s.data.DataSource.create(r),i.dataSource?(i.dataSource.unbind(v,i._refreshHandler),i.dataSource.unbind(v,i._rangeChangeHandler),n=i.value(),i.value([]),i.mute(function(){i.value(n)})):(i._refreshHandler=e.proxy(i.refresh,i),i._rangeChangeHandler=e.proxy(i.rangeChange,i)),i.dataSource=r.bind(v,i._refreshHandler).bind(v,i._rangeChangeHandler),0!==i.dataSource.view().length?i.refresh():i.options.autoBind&&i.dataSource.fetch()},rangeChange:function(){var e=this,t=e.dataSource.page();e.isBound()&&!0===e._rangeChange&&e._lastPage!==t&&(e._lastPage=t,e.trigger(y))},refresh:function(e){var t,n=this,i=e&&e.action;n._mute||(n._fetching?n._renderItems&&n._renderItems(!0):(n._filter&&n.focus(0),n._createList(),i||!n._values.length||n._filter?(n._lastPage=n.dataSource.page(),n._listCreated=!0,n.trigger(y)):n.value(n._values,!0).done(function(){n._lastPage=n.dataSource.page(),n._listCreated=!0,n.trigger(y)})),"itemchange"===i&&(t=function(e,t){var n,i,r,o=t.length,a=[];for(i=0;e.length>i;i++)for(n=e[i],r=0;o>r;r++)n===t[r]&&a.push({index:i,item:n});return a}(n._selectedDataItems,e.items)).length&&n.trigger("selectedItemChange",{items:t}),n._fetching=!1)},removeAt:function(e){return this._selectedIndexes.splice(e,1),this._values.splice(e,1),{position:e,dataItem:this._selectedDataItems.splice(e,1)[0]}},setValue:function(e){this._values=i(e)},value:function(n,r){var o=this;return n===t?o._values.slice():(n=i(n),"multiple"===o.options.selectable&&o.select().length&&n.length&&o.select(-1),o._valueDeferred&&"resolved"!==o._valueDeferred.state()||(o._valueDeferred=e.Deferred()),n.length||o.select(-1),o._values=n,(o.isBound()&&!o._mute||r)&&o._prefetchByValue(n),o._valueDeferred)},_prefetchByValue:function(e){var n,o,a,s=this,l=s._dataView,c=s._valueGetter,u=[];for(o=0;e.length>o;o++)for(a=0;l.length>a;a++)(n=l[a].item)&&(r(n)?e[o]===n:e[o]===c(n))&&u.push(a);if(u.length===e.length)return s._values=[],s.select(u),t;if("function"!=typeof s.options.valueMapper)throw Error("valueMapper is not provided");s.options.valueMapper({value:"multiple"===this.options.selectable?e:e[0],success:function(e){s._values=[],s._selectedIndexes=[],s._selectedDataItems=[],(e=i(e)).length||(e=[-1]),s.select(e)}})},deferredRange:function(t){var n=this.dataSource,i=this.itemCount,r=this._rangesList,o=e.Deferred(),a=[],s=Math.floor(t/i)*i,l=Math.ceil(t/i)*i,c=l===s?[l]:[s,l];return e.each(c,function(t,o){var s,l=o+i,c=r[o];c&&c.end===l?s=c.deferred:(s=e.Deferred(),r[o]={end:l,deferred:s},n._multiplePrefetch(o,i,function(){s.resolve()})),a.push(s)}),e.when.apply(e,a).then(function(){o.resolve()}),o},prefetch:function(t){var n=this,i=this.itemCount,r=!n._promisesList.length;return n._activeDeferred||(n._activeDeferred=e.Deferred(),n._promisesList=[]),e.each(t,function(e,t){var r=Math.floor(t/i)*i;n._promisesList.push(n.deferredRange(r))}),r&&e.when.apply(e,n._promisesList).done(function(){n._activeDeferred.resolve(),n._activeDeferred=null,n._promisesList=[]}),n._activeDeferred},_findDataItem:function(e){var t,n,i=this.dataSource.view();if("group"===this.options.type)for(n=0;i.length>n;n++){if(!(e>=(t=i[n].items).length))return t[e];e-=t.length}return i[e]},selectedDataItems:function(){return this._selectedDataItems.slice()},scrollTo:function(e){this.content.scrollTop(e)},scrollToIndex:function(e){this.scrollTo(e*this.options.itemHeight)},focus:function(i){var r,o,a,s,l,c,u=this.options.itemHeight,d=this._optionID,h=!0;if(i===t)return(s=this.element.find("."+g)).length?s:null;if("function"==typeof i)for(a=this.dataSource.flatView(),l=0;a.length>l;l++)if(i(a[l])){i=l;break}return i instanceof Array&&(i=n(i)),isNaN(i)?(r=e(i),o=parseInt(e(r).attr("data-offset-index"),10)):(o=i,r=this._getElementByIndex(o)),-1===o?(this.element.find("."+g).removeClass(g),this._focusedIndex=t,t):(r.length?(r.hasClass(g)&&(h=!1),this._focusedIndex!==t&&((s=this._getElementByIndex(this._focusedIndex)).removeClass(g).removeAttr("id"),h&&this.trigger(k)),this._focusedIndex=o,r.addClass(g).attr("id",d),"top"===(c=this._getElementLocation(o))?this.scrollTo(o*u):"bottom"===c?this.scrollTo(o*u+u-this.screenHeight):"outScreen"===c&&this.scrollTo(o*u),h&&this.trigger(w)):(this._focusedIndex=o,this.items().removeClass(g),this.scrollToIndex(o)),t)},focusIndex:function(){return this._focusedIndex},first:function(){this.scrollTo(0),this.focus(0)},last:function(){var e=this.dataSource.total();this.scrollTo(this.heightContainer.offsetHeight),this.focus(e)},prev:function(){var e,n=this._focusedIndex;return!isNaN(n)&&n>0?(n-=1,this.focus(n),(e=this.focus())&&e.hasClass("k-loading-item")&&(n+=1,this.focus(n)),n):t},next:function(){var e,n=this._focusedIndex,i=this.dataSource.total()-1;return!isNaN(n)&&i>n?(n+=1,this.focus(n),(e=this.focus())&&e.hasClass("k-loading-item")&&(n-=1,this.focus(n)),n):t},select:function(e){var i,r,o,a=this,s="multiple"!==a.options.selectable,l=!!a._activeDeferred,c=[];return e===t?a._selectedIndexes.slice():(i=a._getIndecies(e),a._filter&&!s&&a._deselectFiltered(i)||!i.length||s&&!a._filter&&n(i)===n(this._selectedIndexes)||(c=a._deselect(i),s&&(a._activeDeferred=null,l=!1,i.length&&(i=[n(i)])),o=function(){var e=a._select(i);a.focus(i),(e.length||c.length)&&a.trigger(v,{added:e,removed:c}),a._valueDeferred&&a._valueDeferred.resolve()},r=a.prefetch(i),l||(r?r.done(o):o())),t)},isBound:function(){return this._listCreated},mute:function(e){this._mute=!0,d(e(),this),this._mute=!1},filter:function(e){return e===t?this._filter:(this._filter=e,this._rangeChange=!0,t)},skipUpdate:e.noop,_getElementByIndex:function(t){return this.items().filter(function(n,i){return t===parseInt(e(i).attr("data-offset-index"),10)})},_clean:function(){this.result=t,this._lastScrollTop=t,this._lastPage=t,e(this.heightContainer).remove(),this.heightContainer=t,this.element.empty()},_height:function(){var e=!!this.dataSource.view().length,t=this.options.height,n=this.options.itemHeight,i=this.dataSource.total();return e?t/n>i&&(t=i*n):t=0,t},_screenHeight:function(){var e=this._height();this.content.height(e),this.screenHeight=e},_getElementLocation:function(e){var t=this.content.scrollTop(),n=this.screenHeight,i=this.options.itemHeight,r=e*i,o=r+i,a=t+n;return r===t-i||o>t&&t>r?"top":r===a||a>r&&o>a?"bottom":r>=t&&t+(n-i)>=r?"inScreen":"outScreen"},_templates:function(){var e,t={template:this.options.template,placeholderTemplate:this.options.placeholderTemplate,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(e in t)"function"!=typeof t[e]&&(t[e]=s.template(t[e]));this.templates=t},_generateItems:function(e,t){for(var n,i=[],r=this.options.itemHeight+"px";t-- >0;)(n=document.createElement("li")).tabIndex=-1,n.className=h+" k-item",n.setAttribute("role","option"),n.style.height=r,n.style.minHeight=r,e.appendChild(n),i.push(n);return i},_saveInitialRanges:function(){var t,n=this.dataSource._ranges,i=e.Deferred();for(i.resolve(),this._rangesList={},t=0;n.length>t;t++)this._rangesList[n[t].start]={end:n[t].end,deferred:i}},_createList:function(){var t=this,n=t.content.get(0),i=t.options,r=t.dataSource;r.total(),t._listCreated&&t._clean(),t._saveInitialRanges(),t._screenHeight(),t._buildValueGetter(),t.itemCount=function(e,t,n){return Math.ceil(e*t/n)}(t.screenHeight,i.listScreens,i.itemHeight),t.itemCount>r.total()&&(t.itemCount=r.total()),t._templates(),t._items=t._generateItems(t.element[0],t.itemCount),t._setHeight(i.itemHeight*r.total()),t.options.type=(r.group()||[]).length?"group":"flat","flat"===t.options.type?t.header.hide():t.header.show(),t.getter=t._getter(function(){t._renderItems(!0)}),t._onScroll=function(e,n){var i=t._listItems(t.getter);return t._fixedHeader(e,i(e,n))},t._renderItems=t._whenChanged(function(e,t){return function(n){return t(e.scrollTop,n)}}(n,t._onScroll),function(e){return function(t,n){return e(t.items,t.index,n),t}}(t._reorderList(t._items,e.proxy(a,t)))),t._renderItems(),t._calculateGroupPadding(t.screenHeight)},_setHeight:function(e){var t,n,i=this.heightContainer;if(i?t=i.offsetHeight:i=this.heightContainer=o(this.content[0],"k-height-container"),e!==t)for(i.innerHTML="";e>0;)n=Math.min(e,25e4),o(i).style.height=n+"px",e-=n},_getter:function(){var e=null,t=this.dataSource,n=t.skip(),i=this.options.type,r=this.itemCount,o={};return function(a,s){var l,c,u,d,h,p,f,g,m=this;if(t.inRange(s,r)){if(n!==s&&(m._mute=!0,m._fetching=!0,m._rangeChange=!0,t.range(s,r),n=s,m._rangeChange=!1,m._fetching=!1,m._mute=!1),"group"===i){if(!o[s])for(c=o[s]=[],d=0,h=(u=t.view()).length;h>d;d++)for(f=0,g=(p=u[d]).items.length;g>f;f++)c.push({item:p.items[f],group:p.value});l=o[s][a-s]}else l=t.view()[a-s];return l}return e!==s&&(e=s,n=s,m._fetching=!0,m._getterDeferred&&m._getterDeferred.reject(),m._getterDeferred=m.deferredRange(s),m._getterDeferred.then(function(){var e=m._indexConstraint(m.content[0].scrollTop);m._getterDeferred=null,e>=s&&s+r>=e&&(m._fetching=!0,m._rangeChange=!0,t.range(s,r),m._rangeChange=!1)})),null}},_fixedHeader:function(e,t){var n,i=this.currentVisibleGroup,r=this.options.itemHeight,o=Math.floor((e-t.top)/r),a=t.items[o];return a&&a.item&&(n=a.group)!==i&&(this.header[0].innerHTML=n||"",this.currentVisibleGroup=n),t},_itemMapper:function(e,t,n){var i,o=this.options.type,a=this.options.itemHeight,s=this._focusedIndex,l=!1,c=!1,u=!1,d=null,h=this._valueGetter;if("group"===o&&(e&&(u=0===t||this._currentGroup&&this._currentGroup!==e.group,this._currentGroup=e.group),d=e?e.group:null,e=e?e.item:null),n.length&&e)for(i=0;n.length>i;i++)if(r(e)?n[i]===e:n[i]===h(e)){n.splice(i,1),l=!0;break}return s===t&&(c=!0),{item:e||null,group:d,newGroup:u,selected:l,current:c,index:t,top:t*a}},_range:function(e){var t,n,i,r=this.itemCount,o=this._values.slice(),a=[];for(this._view={},this._currentGroup=null,n=e,i=e+r;i>n;n++)t=this._itemMapper(this.getter(n,e),n,o),a.push(t),this._view[t.index]=t;return this._dataView=a,a},_getDataItemsCollection:function(e,t){var n=this._range(this._listIndex(e,t));return{index:n.length?n[0].index:0,top:n.length?n[0].top:0,items:n}},_listItems:function(){var t=this.screenHeight,n=function(e,t){var n=(e.listScreens-1-e.threshold)*t,i=e.threshold*t;return function(e,t,r){return t>r?n>t-e.top:0===e.top||t-e.top>i}}(this.options,t);return e.proxy(function(e,t){var i=this.result,r=this._lastScrollTop;return!t&&i&&n(i,e,r)||(i=this._getDataItemsCollection(e,r)),this._lastScrollTop=e,this.result=i,i},this)},_whenChanged:function(e,t){var n;return function(i){var r=e(i);r!==n&&(n=r,t(r,i))}},_reorderList:function(t,n){var i=this,r=t.length,o=-1/0;return n=e.proxy(function(t,n){return function(i,r){for(var o=0,a=i.length;a>o;o++)t(i[o],r[o],n),r[o].item&&(this.trigger(b,{item:e(i[o]),data:r[o].item,ns:s.ui}),r[o].index===this._selectedIndex&&this.select(this._selectedIndex))}}(n,this.templates),this),function(e,a,s){var l,c,u=a-o;s||Math.abs(u)>=r?(l=t,c=e):(l=function(e,t){var n;return t>0?(n=e.splice(0,t),e.push.apply(e,n)):(n=e.splice(t,-t),e.unshift.apply(e,n)),n}(t,u),c=u>0?e.slice(-u):e.slice(0,-u)),n(l,c,i._listCreated),o=a}},_bufferSizes:function(){var e=this.options;return function(e,t,n){return{down:e*n,up:e*(t-1-n)}}(this.screenHeight,e.listScreens,e.oppositeBuffer)},_indexConstraint:function(e){var t=this.itemCount,n=this.options.itemHeight,i=this.dataSource.total();return Math.min(Math.max(i-t,0),Math.max(0,Math.floor(e/n)))},_listIndex:function(e,t){var n,i=this._bufferSizes();return n=e-(e>t?i.down:i.up),this._indexConstraint(n)},_selectable:function(){this.options.selectable&&(this._selectProxy=e.proxy(this,"_clickHandler"),this.element.on(_+x,"."+h,this._selectProxy))},_getIndecies:function(e){var t,n,i=[];if("function"==typeof e)for(t=this.dataSource.flatView(),n=0;t.length>n;n++)if(e(t[n])){i.push(n);break}return"number"==typeof e&&i.push(e),e instanceof jQuery&&(e=parseInt(e.attr("data-offset-index"),10),isNaN(e)||i.push(e)),e instanceof Array&&(i=e),i},_deselect:function(n){var i,r,o,a,s,l,c=[],u=this._selectedIndexes,d=0,h=this.options.selectable,p=0;if(-1===n[d]){for(s=0;u.length>s;s++)r=u[s],this._getElementByIndex(r).removeClass(f),c.push({index:r,position:s,dataItem:this._selectedDataItems[s]});return this._values=[],this._selectedDataItems=[],this._selectedIndexes=[],n.splice(0,n.length),c}if(!0===h)i=n[d],(r=u[d])!==t&&i!==r&&(this._getElementByIndex(r).removeClass(f),c.push({index:r,position:d,dataItem:this._selectedDataItems[d]}),this._values=[],this._selectedDataItems=[],this._selectedIndexes=[]);else if("multiple"===h)for(l=0;n.length>l;l++)if((r=u[d=e.inArray(n[l],u)])!==t){if(!(a=this._getElementByIndex(r)).hasClass("k-state-selected"))continue;a.removeClass(f),this._values.splice(d,1),this._selectedIndexes.splice(d,1),o=this._selectedDataItems.splice(d,1)[0],n.splice(l,1),c.push({index:r,position:d+p,dataItem:o}),p++,l--}return c},_deselectFiltered:function(t){for(var n,i,r,o,a=this.element[0].children,s=this._values,l=[],c=0;t.length>c;c++){for(r=-1,i=t[c],n=this._valueGetter(this._view[i].item),o=0;s.length>o;o++)if(n==s[o]){r=o;break}r>-1&&(l.push(this.removeAt(r)),e(a[i]).removeClass("k-state-selected"))}return!!l.length&&(this.trigger("change",{added:[],removed:l}),!0)},_select:function(t){var n,i,o=this,a="multiple"!==this.options.selectable,s=this.dataSource,l=this.itemCount,c=this._valueGetter,u=[];return a&&(o._selectedIndexes=[],o._selectedDataItems=[],o._values=[]),i=s.skip(),e.each(t,function(e,t){var a=((l>t?1:Math.floor(t/l)+1)-1)*l;o.mute(function(){s.range(a,l),n=o._findDataItem([t-a]),o._selectedIndexes.push(t),o._selectedDataItems.push(n),o._values.push(r(n)?n:c(n)),u.push({index:t,dataItem:n}),o._getElementByIndex(t).addClass(f),s.range(i,l)})}),u},_clickHandler:function(t){var n=e(t.currentTarget);!t.isDefaultPrevented()&&n.attr("data-uid")&&this.trigger(_,{item:n})},_buildValueGetter:function(){this._valueGetter=s.getter(this.options.dataValueField)},_calculateGroupPadding:function(e){var t=this.items().first(),n=this.header,i=0;n[0]&&"none"!==n[0].style.display&&("auto"!==e&&(i=s.support.scrollbar()),i+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("right"),10),n.css("padding-right",i))}});s.ui.VirtualList=C,s.ui.plugin(C)}(window.kendo.jQuery),function(e){function t(e,t){var n=[];return function e(i,r){var o,a;if(r=r[t])for(o=n[i]=n[i]||[],a=0;r.length>a;a++)o.push(r[a]),e(i+1,r[a])}(0,e),n}function n(){return x.support.cssBorderSpacing?"":'cellspacing="0"'}function i(t,i){return t.length?"<table "+n()+' class="'+e.trim("k-scheduler-table "+(i||""))+'"><tr>'+t.join("</tr><tr>")+"</tr></table>":""}function r(t,n,r){var o,a=[];if(r>0)for(o=0;t>o;o++)a.push("<th>&nbsp;</th>");return n&&a.push('<th class="k-scheduler-times-all-day">'+n.text+"</th>"),1>r?e():e('<div class="k-scheduler-times">'+i(a)+"</div>")}function o(t,n,r){var o,a,s,l,c,u,d,h,p,f,g=[];for(a=0;t.length>a;a++){for(l=[],c=n/(s=t[a]).length,o=0;s.length>o;o++)u=s[o],l.push('<th colspan="'+(u.colspan||c)+'" class="'+(u.className||"")+'">'+u.text+"</th>");g.push(l.join(""))}if(d=[],r){for(h=t[t.length-1],p=[],f=r.cellContent,o=0;h.length>o;o++)p.push('<td class="'+(h[o].className||"")+'">'+(f?f(o):"&nbsp;")+"</th>");d.push(p.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+i(g)+function(e,t){return e.length?"<div style='position:relative'>"+i(e,t)+"</div>":""}(d,"k-scheduler-header-all-day")+"</div></div>")}function a(t,n){var r,o,a,s,l,c=Array(n).join().split(","),u=[];for(o=0;t.length>o;o++)for(s=n/(a=t[o]).length,r=0;a.length>r;r++)l=a[r].className||"",a[r].allDay&&(l="k-scheduler-times-all-day"),c[s*r]+='<th class="'+l+'" rowspan="'+s+'">'+a[r].text+"</th>";for(r=0;n>r;r++)u.push(c[r]);return 1>n?e():e('<div class="k-scheduler-times">'+i(u)+"</div>")}function s(){return e('<div class="k-scheduler-content"><table '+n()+' class="k-scheduler-table"/></div>')}function l(e){return{start:e.start,end:e.end}}function c(e){var t,n,i,r,o,a,s,c=[];for(t=0;e.length>t;t++){for(i=l(n=e[t]),r=null,o=0,a=c.length;a>o;o++)if(s=i.start>c[o].end,c[o].start>i.start||s){r=c[o],i.end>r.end&&(r.end=i.end);break}r||(r={start:i.start,end:i.end,events:[]},c.push(r)),r.events.push(n)}return c}function u(e,t,n,i){var r,o,a,s,l=t[0];if(l){for(r=[],o=l.dataSource.view(),a=0;o.length>a;a++)(s={text:i({text:x.htmlEncode(x.getter(l.dataTextField)(o[a])),color:x.getter(l.dataColorField)(o[a]),field:l.field,title:l.title,name:l.name,value:x.getter(l.dataValueField)(o[a])}),className:"k-slot-cell"})[e]=u(e,t.slice(1),n,i),r.push(s);return r}return n}function d(e){e.className=e.className.replace(k,"")+" k-state-selected"}var h,p,f,g,m,v,_,y,b,w,k,x=window.kendo,C=x.ui,T=C.Widget,S=x.keys,D=Math;x.ui.scheduler={},h=x.Class.extend({init:function(e){this._index=e,this._timeSlotCollections=[],this._daySlotCollections=[]},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,n){var i=new m(e,t,this._index,n.length);return n.push(i),i},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t){return this._slotByPosition(e,t,this._daySlotCollections)},timeSlotByPosition:function(e,t){return this._slotByPosition(e,t,this._timeSlotCollections)},_slotByPosition:function(e,t,n){var i,r,o,a,s,l,c=x.support.browser;for(i=0;n.length>i;i++)for(r=n[i],o=0;o<r.count();o++)if(s=(a=r.at(o)).offsetWidth,l=a.clientHeight,c.msie&&(l=a.clientHeight-1,s=a.clientWidth),e>=a.offsetLeft&&a.offsetLeft+s>e&&t>=a.offsetTop&&a.offsetTop+l>=t)return a},refresh:function(){var e;for(e=0;this._daySlotCollections.length>e;e++)this._daySlotCollections[e].refresh();for(e=0;this._timeSlotCollections.length>e;e++)this._timeSlotCollections[e].refresh()},timeSlotRanges:function(e,t){var n,i=this._timeSlotCollections,r=this._startSlot(e,i);return!r.inRange&&e>=r.slot.end&&(r=null),n=r,t>e&&(n=this._endSlot(t,i)),n&&!n.inRange&&n.slot.start>=t&&(n=null),null===r&&null===n?[]:(null===r&&(r={inRange:!0,slot:i[n.slot.collectionIndex].first()}),null===n&&(n={inRange:!0,slot:i[r.slot.collectionIndex].last()}),this._continuousRange(f,i,r,n))},daySlotRanges:function(e,t,n){var i,r=this._daySlotCollections,o=this._startSlot(e,r,n);if(!o.inRange&&e>=o.slot.end&&(o=null),i=o,t>e&&(i=this._endSlot(t,r,n)),i&&!i.inRange&&i.slot.start>=t&&(i=null),null===o&&null===i)return[];if(null===o)do{e+=x.date.MS_PER_DAY,o=this._startSlot(e,r,n)}while(!o.inRange&&e>=o.slot.end);if(null===i)do{t-=x.date.MS_PER_DAY,i=this._endSlot(t,r,n)}while(!i.inRange&&i.slot.start>=t);return this._continuousRange(g,r,o,i)},_continuousRange:function(e,t,n,i){var r,o,a,s,l,c,u=n.slot,d=i.slot,h=u.collectionIndex,p=d.collectionIndex,f=[];for(r=h;p>=r;r++)a=(o=t[r]).first(),s=o.last(),l=!1,c=!1,r==h&&(c=!n.inRange),r==p&&(l=!i.inRange),u.start>a.start&&(a=u),s.start>d.start&&(s=d),p>h&&(r==h?l=!0:r==p?c=!0:l=c=!0),f.push(new e({start:a,end:s,collection:o,head:l,tail:c}));return f},slotRanges:function(e,t){var n=e._startTime||x.date.toUtcTime(e.start),i=e._endTime||x.date.toUtcTime(e.end);return void 0===t&&(t=e.isMultiDay()),t?this.daySlotRanges(n,i,e.isAllDay):this.timeSlotRanges(n,i)},ranges:function(e,t,n,i){return"number"!=typeof e&&(e=x.date.toUtcTime(e)),"number"!=typeof t&&(t=x.date.toUtcTime(t)),n?this.daySlotRanges(e,t,i):this.timeSlotRanges(e,t)},_startCollection:function(e,t){var n,i;for(n=0;t.length>n;n++)if((i=t[n]).startInRange(e))return i;return null},_endCollection:function(e,t,n){var i,r;for(i=0;t.length>i;i++)if((r=t[i]).endInRange(e,n))return r;return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var n=t?-1:1,i=this._getCollections(e.isDaySlot)[e.collectionIndex+n];return i?i[t?"last":"first"]():void 0},firstSlot:function(){return this._getCollections(this.daySlotCollectionCount())[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,t){var n=this;return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,-1,function(e,i,r){return t||e||0!==r||!n.daySlotCollectionCount()?void 0:n._daySlotCollections[0].at(i)})},downSlot:function(e,t){var n=this;return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,1,function(e,i,r){return!t&&e&&n.timeSlotCollectionCount()?n._timeSlotCollections[r].at(0):void 0})},leftSlot:function(e){return this._horizontalSlot(e,-1)},rightSlot:function(e){return this._horizontalSlot(e,1)},_horizontalSlot:function(e,t){var n,i=e.index,r=e.isDaySlot,o=e.collectionIndex,a=this._getCollections(r);return r?i+=t:o+=t,(n=a[o])?n.at(i):void 0},_verticalSlot:function(e,t,n){var i,r=e.index,o=e.isDaySlot,a=e.collectionIndex,s=this._getCollections(o);return(e=n(o,a,r))?e:(o?a+=t:r+=t,(i=s[a])?i.at(r):void 0)},_collection:function(e,t){return(t?this._daySlotCollections:this._timeSlotCollections)[e]},_startSlot:function(e,t,n){var i,r=this._startCollection(e,t),o=!0;return r||(r=t[0],o=!1),(i=r.slotByStartDate(e,n))||(i=r.first(),o=!1),{slot:i,inRange:o}},_endSlot:function(e,t,n){var i,r=this._endCollection(e,t,n),o=!0;return r||(r=t[t.length-1],o=!1),(i=r.slotByEndDate(e,n))||(i=r.last(),o=!1),{slot:i,inRange:o}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}}),p=x.Class.extend({init:function(t){e.extend(this,t)},innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.end:this.start},endSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.start:this.end}}),f=p.extend({innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},outerRect:function(e,t,n){return this._rect("offset",e,t,n)},_rect:function(e,t,n,i){var r,o,a,s,l,c,u,d,h=this.start,p=this.end,f=x.support.isRtl(h.element);return"number"!=typeof t&&(t=x.date.toUtcTime(t)),"number"!=typeof n&&(n=x.date.toUtcTime(n)),i?(r=h.offsetTop,o=p.offsetTop+p[e+"Height"],f?(a=p.offsetLeft,s=h.offsetLeft+h[e+"Width"]):(a=h.offsetLeft,s=p.offsetLeft+p[e+"Width"])):(0>(l=t-h.start)&&(l=0),c=h.end-h.start,r=h.offsetTop+h[e+"Height"]*l/c,0>(u=p.end-n)&&(u=0),d=p.end-p.start,o=p.offsetTop+p[e+"Height"]-p[e+"Height"]*u/d,f?(a=Math.round(p.offsetLeft+p[e+"Width"]*u/d),s=Math.round(h.offsetLeft+h[e+"Width"]-h[e+"Width"]*l/c)):(a=Math.round(h.offsetLeft+h[e+"Width"]*l/c),s=Math.round(p.offsetLeft+p[e+"Width"]-p[e+"Width"]*u/d))),{top:r,bottom:o,left:0===a?a:a+1,right:s}},innerRect:function(e,t,n){return this._rect("client",e,t,n)}}),g=p.extend({innerWidth:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0,o=n!==i?"offsetWidth":"clientWidth";for(e=n;i>=e;e++)r+=t.at(e)[o];return r}}),m=x.Class.extend({init:function(e,t,n,i){this._slots=[],this._events=[],this._start=x.date.toUtcTime(e),this._end=x.date.toUtcTime(t),this._groupIndex=n,this._collectionIndex=i},refresh:function(){for(var e=0;this._slots.length>e;e++)this._slots[e].refresh()},startInRange:function(e){return e>=this._start&&this._end>e},endInRange:function(e,t){var n=t?this._end>e:this._end>=e;return e>=this._start&&n},slotByStartDate:function(e){var t,n,i=e;for("number"!=typeof i&&(i=x.date.toUtcTime(e)),t=0;this._slots.length>t;t++)if((n=this._slots[t]).startInRange(i))return n;return null},slotByEndDate:function(e,t){var n,i,r=e;if("number"!=typeof r&&(r=x.date.toUtcTime(e)),t)return this.slotByStartDate(e,!1);for(n=0;this._slots.length>n;n++)if((i=this._slots[n]).endInRange(r))return i;return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,n,i){var r=new _(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},addDaySlot:function(e,t,n,i){var r=new y(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}}),v=x.Class.extend({init:function(e,t,n,i,r,o){this.element=e,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.start=t,this.end=n,this.element=e,this.groupIndex=i,this.collectionIndex=r,this.index=o,this.isDaySlot=!1},startDate:function(){return x.timezone.toLocalDate(this.start)},endDate:function(){return x.timezone.toLocalDate(this.end)},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(){return this.start},endOffset:function(){return this.end}}),_=v.extend({init:function(e,t,n,i,r,o,a){v.fn.init.apply(this,arguments),this.isHorizontal=!!a},refresh:function(){var e=this.element;this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft},offsetX:function(e,t){return this.offsetLeft+t},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.start;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=x.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s},endOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.end;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=x.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s}}),y=v.extend({init:function(e,t,n,i,r,o,a){v.fn.init.apply(this,arguments),this.eventCount=a,this.isDaySlot=!0,this.element.children.length?(this.firstChildHeight=this.element.children[0].offsetHeight+3,this.firstChildTop=this.element.children[0].offsetTop):(this.firstChildHeight=3,this.firstChildTop=0)},refresh:function(){this.clientHeight=this.element.clientHeight,this.offsetTop=this.element.offsetTop},startDate:function(){var e=new Date(this.start);return x.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return x.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e}}),x.ui.SchedulerView=T.extend({init:function(t,n){T.fn.init.call(this,t,n),this._scrollbar=b=b||x.support.scrollbar(),this._isRtl=x.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=x.guid(),this._resourcesForGroups(),this._selectedSlots=[]},_isMobile:function(){var e=this.options;return!0===e.mobile&&x.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return!0===e.mobile&&x.support.mobileOS&&!x.support.mobileOS.tablet||"phone"===e.mobile},_addResourceView:function(){var e=new h(this.groups.length);return this.groups.push(e),e},dateForTitle:function(){return x.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},shortDateForTitle:function(){return x.format(this.options.selectedShortDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var n=this[t?"prevGroupSlot":"nextGroupSlot"](e.start,e.groupIndex,e.isAllDay);return n&&(e.groupIndex+=t?-1:1),n},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return!1},_horizontalSlots:function(e,t,n,i){var r,o,a=i?"leftSlot":"rightSlot",s=t[0].start,l=t[t.length-1].end,c=this.groups[e.groupIndex];return n||(r=this._normalizeHorizontalSelection(e,t,i))&&(s=l=r),s=c[a](s),l=c[a](l),n||this._isVerticallyGrouped()||s&&l||(s=l=this._changeGroup(e,i)),s&&l||(o=this._continuousSlot(e,t,i),(o=this._changeGroupContinuously(e,o,n,i))&&(s=l=o)),{startSlot:s,endSlot:l}},_verticalSlots:function(e,t,n,i){var r,o,a=t[0].start,s=t[t.length-1].end,l=this.groups[e.groupIndex];return n||(r=this._normalizeVerticalSelection(e,t,i))&&(a=s=r),a=l[o=i?"upSlot":"downSlot"](a,n),s=l[o](s,n),n||!this._isVerticallyGrouped()||a&&s||(a=s=this._changeGroup(e,i)),{startSlot:a,endSlot:s}},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,n){return n?t[0].start:t[t.length-1].end},_continuousSlot:function(){return null},constrainSelection:function(e){var t,n=this.groups[0];this.inRange(e)?n.daySlotCollectionCount()||(e.isAllDay=!1):(t=n.firstSlot(),e.isAllDay=t.isDaySlot,e.start=t.startDate(),e.end=t.endDate()),this.groups[e.groupIndex]||(e.groupIndex=0)},move:function(e,t,n){var i,r,o,a,s,l,c=!1,u=this.groups[e.groupIndex];if(u.timeSlotCollectionCount()||(e.isAllDay=!0),i=u.ranges(e.start,e.end,e.isAllDay,!1),t===S.DOWN||t===S.UP){if(c=!0,a=t===S.UP,this._updateDirection(e,i,n,a,!0),!(s=this._verticalSlots(e,i,n,a)).startSlot&&!n&&this._changeViewPeriod(e,a,!0))return c}else if((t===S.LEFT||t===S.RIGHT)&&(c=!0,a=t===S.LEFT,this._updateDirection(e,i,n,a,!1),!(s=this._horizontalSlots(e,i,n,a)).startSlot&&!n&&this._changeViewPeriod(e,a,!1)))return c;return c&&(r=s.startSlot,o=s.endSlot,n?(l=e.backward)&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate()):r&&o&&(e.isAllDay=r.isDaySlot,e.start=r.startDate(),e.end=o.endDate()),e.events=[]),c},moveToEventInGroup:function(t,n,i,r){for(var o,a=t._continuousEvents||[],s=r?-1:1,l=a.length,c=r?l-1:0;l>c&&c>-1&&(o=a[c],!(!r&&o.start.startDate()>=n.startDate()||r&&o.start.startDate()<=n.startDate())||(i.length&&(o=a[c+s]),!o||-1!==e.inArray(o.uid,i)));)c+=s;return o},moveToEvent:function(e,t){for(var n,i=e.groupIndex,r=this.groups[i],o=r.ranges(e.start,e.end,e.isAllDay,!1)[0].start,a=this.groups.length,s=t?-1:1,l=e.events;a>i&&i>-1&&(n=this.moveToEventInGroup(r,o,l,t),i+=s,(r=this.groups[i])&&!n);)l=[],o=t?r.lastSlot():r.firstSlot(!0);return n&&(e.events=[n.uid],e.start=n.start.startDate(),e.end=n.end.endDate(),e.isAllDay=n.start.isDaySlot,e.groupIndex=n.start.groupIndex),!!n},current:function(e){return void 0===e?this._current:(this._current=e,void(this.content.has(e)&&this._scrollTo(e,this.content[0])))},select:function(e){this.clearSelection(),this._selectEvents(e)||this._selectSlots(e)},_selectSlots:function(e){var t,n,i,r,o,a,s,l=e.isAllDay,c=this.groups[e.groupIndex];for(c.timeSlotCollectionCount()||(l=!0),this._selectedSlots=[],t=c.ranges(e.start,e.end,l,!1),r=0;t.length>r;r++)for(a=(o=t[r]).collection,s=o.start.index;o.end.index>=s;s++)(n=(i=a.at(s)).element).setAttribute("aria-selected",!0),d(n),this._selectedSlots.push({start:i.startDate(),end:i.endDate(),element:n});e.backward&&(n=t[0].start.element),this.current(n)},_selectEvents:function(t){var n,i,r=!1,o=t.events,a=this.groups[t.groupIndex]._continuousEvents||[],s=a.length;if(!o[0]||!a[0])return r;for(i=e(),t.events=[],n=0;s>n;n++)e.inArray(a[n].uid,o)>-1&&(i=i.add(a[n].element),t.events.push(a[n].uid));return i[0]&&(i.addClass("k-state-selected").attr("aria-selected",!0),this.current(i.last()[0]),this._selectedSlots=[],r=!0),r},inRange:function(e){var t=this.startDate(),n=x.date.addDays(this.endDate(),1),i=e.start,r=e.end;return i>=t&&n>i&&r>t&&n>=r},_resourceValue:function(e,t){return e.valuePrimitive&&(t=x.getter(e.dataValueField)(t)),t},_resourceBySlot:function(e){var t,n,i,r,o=this.groupedResources,a={};if(o.length)for(t=e.groupIndex,n=o.length-1;n>=0;n--)i=o[n],r=this._resourceValue(i,i.dataSource.view()[t%i.dataSource.total()]),i.multiple&&(r=[r]),x.setter(i.field)(a,r),t=Math.floor(t/i.dataSource.total());return a},_createResizeHint:function(t,n,i,r){return e('<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>').css({left:t,top:n,width:i,height:r})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var n,i=e.offsetTop,r=e.offsetHeight,o=t.scrollTop,a=t.clientHeight,s=i+r;n=o>i?i:s>o+a?a>=r?s-a:i:o,t.scrollTop=n},_shouldInverseResourceColor:function(e){var t=new w(e.color).isDark(),n=this.element.css("color");return t==new w(n).isDark()},_eventTmpl:function(t,n){var i,r=this.options,o=e.extend({},x.Template,r.templateSettings),a=o.paramName,s="",l=typeof t,c={storage:{},count:0};return"function"===l?(c.storage["tmpl"+c.count]=t,s+="#=this.tmpl"+c.count+"("+a+")#",c.count++):"string"===l&&(s+=t),i=x.template(x.format(n,s),o),c.count>0&&(i=e.proxy(i,c.storage)),i},eventResources:function(e){var t,n,i,r,o,a,s,l,c,u,d=[],h=this.options;if(!h.resources)return d;for(t=0;h.resources.length>t;t++)if(i=(n=h.resources[t]).field,null!=(r=x.getter(i)(e)))for(n.multiple||(r=[r]),o=n.dataSource.view(),a=0;r.length>a;a++){for(s=null,l=r[a],n.valuePrimitive||(l=x.getter(n.dataValueField)(l)),c=0;o.length>c;c++)if(o[c].get(n.dataValueField)==l){s=o[c];break}null!==s&&(u=x.getter(n.dataColorField)(s),d.push({field:n.field,title:n.title,name:n.name,text:x.getter(n.dataTextField)(s),value:l,color:u}))}return d},createLayout:function(i){var r,o,a,s,l,c=-1;for(i.rows||(i.rows=[]),r=0;i.rows.length>r;r++)if(i.rows[r].allDay){c=r;break}o=i.rows[c],c>=0&&i.rows.splice(c,1),a=this.columnLevels=t(i,"columns"),s=this.rowLevels=t(i,"rows"),this.table=e("<table "+n()+' class="k-scheduler-layout k-scheduler-'+this.name+'view"/>'),l=s[s.length-1].length,this.table.append(this._topSection(a,o,l)),this.table.append(this._bottomSection(a,s,l)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var t,n,i,r,o,a,s=this,l=s.element.find(">.k-scheduler-toolbar"),c=s.element.innerHeight(),u=this._scrollbar,d=0,h=this._isRtl?"left":"right";for(t=0;l.length>t;t++)c-=l.eq(t).outerHeight();s.datesHeader&&(d=s.datesHeader.outerHeight()),s.timesHeader&&s.timesHeader.outerHeight()>d&&(d=s.timesHeader.outerHeight()),s.datesHeader&&s.timesHeader&&(n=s.datesHeader.find("table:first tr"),s.timesHeader.find("tr").height(function(t){e(this).height(n.eq(t).height())})),d&&(c-=d),s.footer&&(c-=s.footer.outerHeight()),i=function(e){var t;return!!e[0].style.height||(t=e.height(),e.height("auto"),t!=e.height()?(e.height(""),!0):(e.height(""),!1))},r=s.content[0],o=x.support.kineticScrollNeeded?0:u,i(s.element)&&(s.content.height(c>2*u?c:2*u+1),s.times.height(r.clientHeight),(a=s.times.find("table")).length&&a.height(s.content.find("table")[0].clientHeight)),r.offsetWidth-r.clientWidth>0?(s.table.addClass("k-scrollbar-v"),s.datesHeader.css("padding-"+h,o-parseInt(s.datesHeader.children().css("border-"+h+"-width"),10))):s.datesHeader.css("padding-"+h,""),r.offsetHeight-r.clientHeight>0||r.clientHeight>s.content.children(".k-scheduler-table").height()?s.table.addClass("k-scrollbar-h"):s.table.removeClass("k-scrollbar-h")},_topSection:function(t,n,i){this.timesHeader=r(t.length,n,i);var a=t[t.length-1].length;return this.datesHeader=o(t,a,n),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(t,n,i){return this.times=a(n,i),this.content=s(t[t.length-1],n[n.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t,n=this;this.content.bind("scroll.kendoSchedulerView",function(){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),n.times.scrollTop(this.scrollTop)}),(t=x.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-event-active").length>0}}))&&t.movable&&(this._touchScroller=t,this.content=t.scrollElement,t.movable.bind("change",function(e){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),n.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e,t,n,i,r=[],o=this.options.group,a=this.options.resources;if(o=o&&o.resources?o.resources:[],a&&o.length)for(e=0,t=a.length;t>e;e++)for(n=0,i=o.length;i>n;n++)a[e].name===o[n]&&r.push(a[e]);this.groupedResources=r},_createColumnsLayout:function(e,t,n){return u("columns",e,t,n)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t,n){return u("rows",e,t,n)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},destroy:function(){var e=this;T.fn.destroy.call(this),e.table&&(x.destroy(e.table),e.table.remove()),e.groups=null,e.table=null,e.content=null,e.times=null,e.datesHeader=null,e.timesHeader=null,e.footer=null,e._resizeHint=null,e._moveHint=null},calendarInfo:function(){return x.getCulture().calendars.standard},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(i=r._collection(n?o.index:o.collectionIndex,!1)).last():(i=r._collection(r.daySlotCollectionCount()-1,!0)).at(o.index):r.timeSlotCollectionCount()?(i=r._collection(n?0:r.timeSlotCollectionCount()-1,n),n?i.last():i.at(o.index)):(i=r._collection(o.collectionIndex,!0)).last()},nextGroupSlot:function(e,t,n){var i,r,o=this.groups[t],a=o.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o.timeSlotCollectionCount()?(r=o.daySlotCollectionCount(),i=o._collection(r?0:a.collectionIndex,r),n?i.first():i.at(a.collectionIndex)):(i=o._collection(0,!0)).at(a.index):o.timeSlotCollectionCount()?(i=o._collection(0,n),n?i.first():i.at(a.index)):(i=o._collection(a.collectionIndex,!0)).first()},_eventOptionsForMove:function(){return{}},_updateEventForResize:function(){},_updateEventForSelection:function(e){return e}}),(w=function(e){var t,n,i,r,o,a=this,s=w.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,(i=t.exec(e))&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)}).prototype={resolveColor:function(e){return"#"==(e=e||"#000").charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),w.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},percBrightness:function(){var e=this;return D.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)},isDark:function(){return 180>this.percBrightness()}},w.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],w.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},k=/\s*k-state-selected/,e.extend(C.SchedulerView,{createColumns:function(e){return c(e)},createRows:function(e){return c(e)},rangeIndex:l,collidingEvents:function(e,t,n){var i,r,o,a;for(i=e.length-1;i>=0;i--)o=(r=l(e[i])).start,a=r.end,(t>=o&&a>=t||o>=t&&n>=a||o>=t&&n>=o)&&(t>o&&(t=o),a>n&&(n=a));return function(e,t,n){var i,r,o=[];for(i=0;e.length>i;i++)r=l(e[i]),(t>r.start&&r.end>t||r.start>=t&&n>=r.end)&&o.push(e[i]);return o}(e,t,n)},groupEqFilter:function(t){return function(n){if(e.isArray(n)||n instanceof x.data.ObservableArray){for(var i=0;n.length>i;i++)if(n[i]==t)return!0;return!1}return n==t}}})}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return l(t,g(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e,t,n,i){return i=i?n>=e:n>e,e>t&&i}function o(e,t,n,i){var r,o=e._continuousEvents,s=o[o.length-1],l=h(t.start.startDate()).getTime();if(i&&s&&h(s.start.startDate()).getTime()==l){for(r=o.length-1;r>-1&&!(o[r].isAllDay||h(o[r].start.startDate()).getTime()<l);r--);o.splice(r+1,0,{element:n,isAllDay:!0,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})}else o.push({element:n,isAllDay:i,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})}var a=window.kendo,s=a.ui,l=a.date.setTime,c=s.SchedulerView,u=e.extend,d=e.proxy,h=a.date.getDate,p=a.date.MS_PER_MINUTE,f=a.date.MS_PER_DAY,g=a.date.getMilliseconds,m=".kendoMultiDayView",v=a.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),_=a.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),y=a.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),b=c.extend({init:function(e,t){var n=this;c.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=function(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},_currentTimeMarkerUpdater:function(){var t,n,i,r,o,s,l,c=new Date,u=this.options;for(!1===u.currentTimeMarker.useLocalTimezone&&(t=u.dataSource.options.schema.timezone,u.dataSource&&t&&(n=a.timezone.offset(c,t),c=a.timezone.convert(c,c.getTimezoneOffset(),n))),this.times.find(".k-current-time").remove(),i=u.group&&"horizontal"!=u.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],s=a.date.toUtcTime(c),0===(l=o.timeSlotRanges(s,s+1)).length)return;l[0].collection.slotByStartDate(c)&&e("<div class='k-current-time'></div>").appendTo(this.times).css({top:Math.round(l[0].innerRect(c,new Date(c.getTime()+1),!1).top),height:"1px",right:"1px",left:0})}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;!1!==i&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(d(this._currentTimeMarkerUpdater,n),e))},_updateResizeHint:function(e,t,n,i){var r,o,s,l,u,d,h,p,f,g,m=e.isMultiDay(),v=this.groups[t].ranges(n,i,m,e.isAllDay);for(this._removeResizeHint(),r=0;v.length>r;r++)l=(s=(o=v[r]).startSlot()).offsetWidth,u=s.clientHeight,d=s.offsetTop,m?l=o.innerWidth():(d=(h=o.outerRect(n,i,this.options.snap)).top,u=h.bottom-h.top),p=c.fn._createResizeHint.call(this,s.offsetLeft,d,l,u),this._resizeHint=this._resizeHint.add(p);f="t",g=this.content,m&&(f="M/dd",(g=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(g=this.content)),this._resizeHint.appendTo(g),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(n),f)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),f))},_updateMoveHint:function(e,t,n){var i,r,o,s,l,c,u,d=e.isMultiDay(),h=this.groups[t],p=a.date.toUtcTime(e.start)+n,f=p+e.duration(),m=h.ranges(p,f,d,e.isAllDay);for(p=a.timezone.toLocalDate(p),f=a.timezone.toLocalDate(f),this._removeMoveHint(),!d&&(0===g(f)||g(f)<g(this.startTime()))&&m.length>1&&m.pop(),i=0;m.length>i;i++)o=(r=m[i]).start,(s=this._createEventElement(e.clone({start:p,end:f}),!d)).addClass("k-event-drag-hint"),l={left:o.offsetLeft+2,top:o.offsetTop},this._isRtl&&(l.left=.1*o.clientWidth+o.offsetLeft+2),d?l.width=r.innerWidth()-4:(c=r.outerRect(p,f,this.options.snap),l.top=c.top,l.height=c.bottom-c.top,l.width=.9*o.clientWidth-4),s.css(l),this._moveHint=this._moveHint.add(s);u=this.content,d&&((u=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(u=this.content)),this._moveHint.appendTo(u)},_slotByPosition:function(e,t){var n,i,r;for(this._isVerticallyGrouped()?(i=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):i=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),i&&(e-=i.left,t-=i.top),e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(n=this.groups[r].daySlotByPosition(e,t))return n;for(i&&(e+=i.left,t+=i.top),e-=(i=this.content.offset()).left,t-=i.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(n=this.groups[r].timeSlotByPosition(e,t))return n;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,u,d,h,p,f,m,v,_=this._timeSlotInterval(),y=this.content.find("tr:not(.k-scheduler-header-all-day)");for(y.attr("role","row"),n=y.length,this._isVerticallyGrouped()&&(n=Math.floor(n/e)),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=r*n,s=0,this._isVerticallyGrouped()||(s=i);(r+1)*n>o;){for(l=y[o].children,c=this.groups[i],o%n==0&&(a=g(new Date(+this.startTime()))),u=s*t;(s+1)*t>u;u++)d=l[u],h=u%t,p=c.getTimeSlotCollection(h),f=this._dates[h],v=(m=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate())+a)+_,d.setAttribute("role","gridcell"),d.setAttribute("aria-selected",!1),p.addTimeSlot(d,m,v);a+=_,o++}},_daySlotGroups:function(e,t){var n,i,r,o,s,l,c,u,d,h,p;for((n=this.element.find(this._isVerticallyGrouped()?".k-scheduler-header-all-day":".k-scheduler-header-all-day tr")).attr("role","row"),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=this.groups[i].getDaySlotCollection(0),s=n[r].children,l=0,this._isVerticallyGrouped()||(l=i),c=0,u=l*t;(l+1)*t>u;u++)d=s[u],u%t==0&&(c=0),h=this._dates[c],p=Date.UTC(h.getFullYear(),h.getMonth(),h.getDate()),c++,d.setAttribute("role","gridcell"),d.setAttribute("aria-selected",!1),o.addDaySlot(d,p,p+a.date.MS_PER_DAY)},_groups:function(){var e,t,n,i=this._groupCount(),r=this._columnCountInResourceView();for(this.groups=[],e=0;i>e;e++){for(t=this._addResourceView(e),n=0;r>n;n++)t.addTimeSlotCollection(this._dates[n],a.date.addDays(this._dates[n],1));this.options.allDaySlot&&t.addDaySlotCollection(this._dates[0],a.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(i,r),this.options.allDaySlot&&this._daySlotGroups(i,r)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:a.date.today(),endTime:a.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:v,allDayEventTemplate:_,dateHeaderTemplate:y,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=u({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>'),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=a.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.allDaySlotTemplate=a.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+m,".k-scheduler-content td",function(n){var i,r;e(this).parent().hasClass("k-scheduler-header-all-day")||((i=t._slotByPosition(n.pageX,n.pageY))&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}).on("dblclick"+m,".k-scheduler-header-all-day td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:a.date.getDate(i.startDate()),end:a.date.getDate(i.startDate())},n)})),e.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+m,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this,n=0;a.support.mobileOS.android&&(n=5),!1!==t.options.editable.create&&(t._addUserEvents=new a.UserEvents(t.element,{threshold:n,filter:".k-scheduler-content td",tap:function(n){var i,r;e(n.target).parent().hasClass("k-scheduler-header-all-day")||((i=t._slotByPosition(n.x.location,n.y.location))&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}}),t._allDayUserEvents=new a.UserEvents(t.element,{threshold:n,filter:".k-scheduler-header-all-day td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:a.date.getDate(i.startDate()),end:a.date.getDate(i.startDate())},n)})),e.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new a.UserEvents(t.element,{threshold:n,filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(a.attr("uid"))}),n.preventDefault()}}))},_layout:function(e){var t,n,i,r=[],o=[],s=this.options,l=this;for(t=0;e.length>t;t++)(n={}).text=l.dateHeaderTemplate({date:e[t]}),a.date.isToday(e[t])&&(n.className="k-today"),r.push(n);return i=this.groupedResources,s.allDaySlot&&o.push({text:s.messages.allDay,allDay:!0,cellContent:function(t){var n=t;return t=i.length&&"vertical"!==l._groupOrientation()?t%e.length:t,l.allDaySlotTemplate({date:e[t],resources:function(){return l._resourceBySlot({groupIndex:n})}})}}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,n,i){var r={text:(t?l.majorTimeHeaderTemplate:l.minorTimeHeaderTemplate)({date:e}),className:i?"k-slot-cell":""};o.push(r)}),i.length&&("vertical"===this._groupOrientation()?o=this._createRowsLayout(i,o,this.groupHeaderTemplate):r=this._createColumnsLayout(i,r,this.groupHeaderTemplate)),{columns:r,rows:o}},_footer:function(){var t,n,i,r=this.options;!1!==r.footer&&(t='<div class="k-header k-scheduler-footer">',(n=r.footer.command)&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+m,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_forTimeRange:function(e,t,i,r){var o,a,s,c,u,d,h,m,v,_,y,b,w;for(e=n(e),t=n(t),o=this,a=g(e),s=g(t),c=o.options.minorTickCount,d=(u=o.options.majorTick*p)/c||1,m=(h=new Date(+e)).getDate(),_=0,b="",y=f/d,a!=s&&(a>s&&(s+=f),y=(s-a)/d),y=Math.round(y);y>_;_++)b+=i(h,0==(w=_%(u/d)),c-1>w,w===c-1),l(h,d,!1);return s&&(v=g(h),m<h.getDate()&&(v+=f),v>s&&(h=new Date(+t))),r&&(b+=r(h)),b},_content:function(e){var t,n,i,r=this,o=r.options,s=r.startTime(),l=this.endTime(),c=1,u=1,d=e.length,h="",p=this.groupedResources,f=this.slotTemplate,g=this.allDaySlotTemplate,m=!1;for(p.length&&((m="vertical"===r._groupOrientation())?(u=this._rowCountForLevel(this.rowLevels.length-2),o.allDaySlot&&(t=function(t){var n,i,o='<tr class="k-scheduler-header-all-day">',a=function(){return r._resourceBySlot({groupIndex:t})};for(n=0,i=e.length;i>n;n++)o+="<td>"+g({date:e[n],resources:a})+"</td>";return o+"</tr>"})):c=this._columnCountForLevel(this.columnLevels.length-2)),h+="<tbody>",n=function(t,n){var o,s,l,u,h="",p="",g=0;for(h="<tr"+(n?' class="k-middle-row"':"")+">",u=function(e){return function(){return r._resourceBySlot({groupIndex:e})}};c>g;g++)for(o=0,s=d;s>o;o++)p="",a.date.isToday(e[o])&&(p+="k-today"),(a.date.getMilliseconds(t)<a.date.getMilliseconds(r.options.workDayStart)||a.date.getMilliseconds(t)>=a.date.getMilliseconds(r.options.workDayEnd)||!r._isWorkDay(e[o]))&&(p+=" k-nonwork-hour"),h+="<td"+(""!==p?' class="'+p+'"':"")+">",l=a.date.getDate(e[o]),a.date.setTime(l,a.date.getMilliseconds(t)),h+=f({date:l,resources:u(m?i:g)}),h+="</td>";return h+"</tr>"},i=0;u>i;i++)h+=t?t(i):"",h+=this._forTimeRange(s,l,n);h+="</tbody>",this.content.find("table").append(h)},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_render:function(t){var n,i=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),(n=this.element.find(".k-scheduler-header-all-day td")).length&&(this._allDayHeaderHeight=n.first()[0].clientHeight),i.datesHeader.on("click"+m,".k-nav-day",function(t){var n=e(t.currentTarget).closest("th"),r=n.offset(),o=i._slotByPosition(r.left,r.top+n.outerHeight());i.trigger("navigate",{view:"day",date:o.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=g(this.endTime())||f;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),e.datesHeader&&e.datesHeader.off(m),e.element&&e.element.off(m),e.footer&&e.footer.remove(),c.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(!1!==e.options.editable.create&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),!1!==e.options.editable.update&&e._editUserEvents.destroy())},inRange:function(e){var t=c.fn.inRange.call(this,e),n=g(this.startTime()),i=g(this.endTime())||a.date.MS_PER_DAY,r=g(e.start),o=g(e.end)||a.date.MS_PER_DAY;return t&&r>=n&&i>=o},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*p},_timeSlotIndex:function(e){var t=this.options;return(g(e)-g(this.startTime()))/(t.majorTick/t.minorTickCount*p)},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var n,r,o=this._dates||[];for(n=0,r=o.length;r>n;n++)if(i(e,a.date.getDate(o[n]),new Date(a.date.getDate(o[n]).getTime()+f-(t?0:1))))return 1*n;return-1},_positionAllDayEvent:function(t,n){var i,r,o,a,s,l,u,d=n.innerWidth(),h=n.start.index,p=n.end.index,f=c.collidingEvents(n.events(),h,p),g=this._headerColumnCount||0,m=h!==p?5:4,v=this._allDayHeaderHeight,_=n.startSlot();for(t.css({left:_.offsetLeft+2,width:d-m}),n.addEvent({slotIndex:h,start:h,end:p,element:t}),f.push({slotIndex:h,start:h,end:p,element:t}),(i=c.createRows(f)).length&&i.length>g&&(this._headerColumnCount=i.length),r=n.start.offsetTop,o=0,a=i.length;a>o;o++)for(l=0,u=(s=i[o].events).length;u>l;l++)e(s[l].element).css({top:r+o*v})},_arrangeColumns:function(e,t,n,i){var r,o,a,s,l,u,d,h,p,f,g,m=i.start;for(e={element:e,slotIndex:m.index,start:t,end:t+n},a=.1*(o=m.clientWidth),l=i.events(),u=c.collidingEvents(l,e.start,e.end),i.addEvent(e),u.push(e),d=(o-a)/(r=c.createColumns(u)).length,h=0,p=r.length;p>h;h++)for(f=0,g=(s=r[h].events).length;g>f;f++)s[f].element[0].style.width=d-4+"px",s[f].element[0].style.left=(this._isRtl?a:0)+m.offsetLeft+h*d+2+"px"},_positionEvent:function(e,t,n){var i=e._startTime||e.start,r=e._endTime||e.end,o=n.innerRect(i,r,!1),a=o.bottom-o.top-2;0>a&&(a=0),t.css({top:o.top,height:a}),this._arrangeColumns(t,o.top,t[0].clientHeight,n)},_createEventElement:function(t,n,r,o){var s,l,c,d,p,m,v=n?this.eventTemplate:this.allDayEventTemplate,_=this.options.editable,y=this._isMobile(),b=_&&!1!==_.destroy&&!y,w=_&&!1!==_.resize,k=h(this.startDate()),x=h(this.endDate()),C=g(this.startTime()),T=g(this.endTime()),S=t._time("start"),D=t._time("end");return C>=T&&(T=g(new Date(this.endTime().getTime()+f-1))),n||t.isAllDay||(x=new Date(x.getTime()+f)),l=t.start,c=t.end,t.isAllDay&&(c=h(t.end)),!i(h(l),k,x)&&!i(c,k,x)||n&&C>S&&D>T?s=!0:h(l)<k||n&&C>S?o=!0:(c>x&&!n||n&&D>T)&&(r=!0),d=this.eventResources(t),t._startTime&&S!==a.date.getMilliseconds(t.start)&&(l=new Date(S),l=a.timezone.apply(l,"Etc/UTC")),t._endTime&&D!==a.date.getMilliseconds(t.end)&&(c=new Date(D),c=a.timezone.apply(c,"Etc/UTC")),p=u({},{ns:a.ns,resizable:w,showDelete:b,middle:s,head:r,tail:o,singleDay:1==this._dates.length,resources:d,inverseColor:!(!d||!d[0])&&this._shouldInverseResourceColor(d[0])},t,{start:l,end:c}),m=e(v(p)),this.angular("compile",function(){return{elements:m,data:[{dataItem:p}]}}),m},_isInTimeSlot:function(e){var t,n=this.startTime(),i=this.endTime(),o=e._startTime||e.start,s=e._endTime||e.end;return g(i)===g(a.date.getDate(i))&&(i=a.date.getDate(i),l(i,f-1)),e._date("end")>e._date("start")&&(s=+e._date("end")+(f-1)),s-=e._date("end"),o-=e._date("start"),i=g(i),(n=g(n))===o&&o===s||r(o,n,i,t=o!==i)||r(s,n,i,t)||r(n,o,s)||r(i,o,s)},_isInDateSlot:function(e){var t=this.groups[0],n=t.firstSlot().start,r=t.lastSlot().end-1,o=a.date.toUtcTime(e.start),s=a.date.toUtcTime(e.end);return(i(o,n,r)||i(s,n,r)||i(n,o,s)||i(r,o,s))&&(!i(s,n,n)||i(s,o,o)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){var t,n;if(this._height!==e&&(this._height=e,(t=this.element.find(".k-scheduler-header-all-day td")).length))for(t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e),n=0;this.groups.length>n;n++)this.groups[n].refresh()},_renderEvents:function(e,t){var n,i,r,a,s,l,c,u,d,h,p,g,m,v,_,y=this.datesHeader.find(".k-scheduler-header-wrap > div");for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))if(s=(a=n.isAllDay||n.end.getTime()-n.start.getTime()>=f)&&!this._isVerticallyGrouped()?y:this.content,a)this.options.allDaySlot&&((u=this.groups[t])._continuousEvents||(u._continuousEvents=[]),(c=u.slotRanges(n)).length&&(l=this._createEventElement(n,!a),this._positionAllDayEvent(l,c[0]),o(u,c[0],l,!0),l.appendTo(s)));else if(this._isInTimeSlot(n))for((u=this.groups[t])._continuousEvents||(u._continuousEvents=[]),d=(c=u.slotRanges(n)).length,h=0;d>h;h++)p=c[h],g=n.start,m=n.end,d>1&&(0===h?m=p.end.endDate():h==d-1?g=p.start.startDate():(g=p.start.startDate(),m=p.end.endDate())),v=n.clone({start:g,end:m,_startTime:n._startTime,_endTime:n.endTime}),this._isInTimeSlot(v)&&(_=p.head,(l=this._createEventElement(n,!a,_,p.tail)).appendTo(s),this._positionEvent(v,l,p),o(u,p,l,!1))},render:function(t){var n,r,o,s;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return e.isMultiDay()&&i(t,h(e.start),h(e.end))}).length}))}),o=Math.max.apply(null,r),this._updateAllDayHeaderHeight((o+1)*this._allDayHeaderHeight),s=0;n.length>s;s++)this._renderEvents(n[s],s);this.refreshLayout(),this.trigger("activate")},_eventsByResource:function(e,t,n){var i,r,o,s,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),s=new a.data.Query(e).filter({field:l.field,operator:c.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),n):n.push(s);else n.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,n,i,r){var o=e.isAllDay,a=t[0].start,s=t[t.length-1].end;n&&(r?o||a.index!==s.index||a.collectionIndex!==s.collectionIndex||(e.backward=i):(o&&a.index===s.index||!o&&a.collectionIndex===s.collectionIndex)&&(e.backward=i))},_changeViewPeriod:function(e,n,i){var r,o,a,s;return i?t:(r=n?this.previousDate():this.nextDate(),o=e.start,a=e.end,e.start=new Date(r),e.end=new Date(r),s=e.isAllDay?f:g(a),l(e.start,g(o)),l(e.end,s),this._isVerticallyGrouped()||(e.groupIndex=n?this.groups.length-1:0),e.events=[],!0)}});u(!0,s,{MultiDayView:b,DayView:b.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:b.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"week",calculateDateRange:function(){var e,t=this.options.date,n=a.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),i=[];for(e=0;7>e;e++)i.push(n),n=a.date.nextDay(n);this._render(i)}}),WorkWeekView:b.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"workWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.startDate()),this.calendarInfo().firstDay,1)},previousDate:function(){var e=a.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);return a.date.previousDay(e)},calculateDateRange:function(){for(var e=this.options.date,t=a.date.dayOfWeek,n=t(t(e,this.calendarInfo().firstDay,-1),this.options.workWeekStart,1),i=t(n,this.options.workWeekEnd,1),r=[];i>=n;)r.push(n),n=a.date.nextDay(n);this._render(r)}})})}(window.kendo.jQuery),function(e){function t(e){var t,n,i=0;for(t=0,n=e.length;n>t;t++)i+=e[t].items.length;return i}function n(e,t){return e.valuePrimitive&&(t=o.getter(e.dataValueField)(t)),t}function i(e){for(var t,n=0,i=e.length,o=[];i>n;n++)(t=e[n]).groups?(t=r(t.groups),o=o.concat(t)):o=o.concat(r(t.items));return o}function r(e){for(var t=[].concat(e),n=t.shift(),i=[],r=[].push;n;)n.groups?r.apply(t,n.groups):n.items?r.apply(t,n.items):r.call(i,n),n=t.shift();return i}var o=window.kendo,a=o.ui,s=".kendoAgendaView";a.AgendaView=a.SchedulerView.extend({init:function(t,n){a.SchedulerView.fn.init.call(this,t,n),(n=this.options).editable&&(n.editable=e.extend({delete:!0},n.editable,{create:!1,update:!1})),this.title=n.title,this.name="agenda",this._eventTemplate=this._eventTmpl(n.eventTemplate,'<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-exception"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</div>'),this._dateTemplate=o.template(n.eventDateTemplate),this._groupTemplate=o.template(n.eventGroupTemplate),this._timeTemplate=o.template(n.eventTimeTemplate),this.element.on("mouseenter"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+s,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)","_remove"),this._renderLayout(n.date)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(t){t.preventDefault(),this.trigger("remove",{uid:e(t.currentTarget).closest(".k-task").attr(o.attr("uid"))})},nextDate:function(){return o.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return o.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=o.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")},_layout:function(){var e,t,n,i=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];if(this._isMobilePhoneView()||i.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"}),(e=this.groupedResources).length){for(t=[],n=0;e.length>n;n++)t.push({text:"",className:"k-scheduler-groupcolumn"});i=t.concat(i)}return{columns:i}},_tasks:function(e){var t,n,i,r,a,s,l,c=[];for(t=0;e.length>t;t++)if(i=(n=e[t]).start,r=n.end,a=(o.date.getDate(r)-o.date.getDate(i))/o.date.MS_PER_DAY+1,(s=n.clone()).startDate=o.date.getDate(i),s.startDate>=this.startDate()&&c.push(s),a>1)for(s.end=o.date.nextDay(i),s.head=!0,l=1;a>l;l++)i=s.end,(s=n.clone()).start=i,s.startDate=o.date.getDate(i),s.end=o.date.nextDay(i),l==a-1?(s.end=new Date(s.start.getFullYear(),s.start.getMonth(),s.start.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),s.tail=!0):(s.isAllDay=!0,s.middle=!0),(o.date.getDate(s.end)<=this.endDate()&&s.start>=this.startDate()||o.date.getDate(s.start).getTime()==this.endDate().getTime())&&c.push(s);return new o.data.Query(c).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){var n,i,r,a,s,l,c,u,d,h=[],p=this.options.editable,f=p&&!1!==p.destroy&&!this._isMobile(),g=this._isMobilePhoneView();for(n=0;e.length>n;n++)for(i=e[n].value,r=e[n].items,a=o.date.isToday(i),s=0;r.length>s;s++){if(l=r[s],c=[],u=g?[]:c,0===n&&0===s&&t.length)for(d=0;t.length>d;d++)u.push(o.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[d].rowSpan,this._groupTemplate({value:t[d].text}),t[d].className));0===s&&(g?(u.push(o.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>',this._dateTemplate({date:i}))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+u.join("")+"</tr>")):c.push(o.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',r.length,this._dateTemplate({date:i}),n!=e.length-1||t.length?"":" k-last",t.length?"":" k-first"))),l.format=l.head?"{0:t}":l.tail?"{1:t}":"{0:t}-{1:t}",l.resources=this.eventResources(l),c.push(o.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',l.tail||l.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(l.clone({start:l._startTime||l.start,end:l.endTime||l.end})),l.head||l.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(l.clone({showDelete:f})))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+c.join("")+"</tr>")}return h.join("")},render:function(e){var t,n,r=this.content.find("table").empty(),o=[];e.length>0&&((t=this.groupedResources).length?(o=this._createGroupConfiguration(e,t,null),this._renderGroups(o,r,[])):(o=this._tasks(e),r.append(this._renderTaskGroups(o,[])))),n=this._eventsList=i(o),this._angularItems(r,n),this.refreshLayout(),this.trigger("activate")},_angularItems:function(e,t){this.angular("compile",function(){var n=[];return{elements:t.map(function(t){return n.push({dataItem:t}),e.find(".k-task["+o.attr("uid")+"="+t.uid+"]")}),data:n}})},_renderGroups:function(e,t,n){var i,r,o;for(i=0,r=e.length;r>i;i++)(o=n.splice(0)).push(e[i]),e[i].groups?this._renderGroups(e[i].groups,t,o):t.append(this._renderTaskGroups(e[i].items,o))},_createGroupConfiguration:function(e,i,r){var s,l,c,u,d,h,p,f=i[0],g=[],m=f.dataSource.view(),v=this._isMobilePhoneView();for(s=0;m.length>s;s++)l=n(f,m[s]),(c=new o.data.Query(e).filter({field:f.field,operator:a.SchedulerView.groupEqFilter(l)}).toArray()).length&&(u=this._tasks(c),d=r?"":" k-first",s===m.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(d+=" k-last"),h={text:o.getter(f.dataTextField)(m[s]),value:l,rowSpan:0,className:d},i.length>1?(h.groups=this._createGroupConfiguration(c,i.slice(1),h),r&&(r.rowSpan+=h.rowSpan)):(h.items=u,p=t(h.items),v&&(p+=h.items.length),h.rowSpan=p,r&&(r.rowSpan+=p)),g.push(h));return g},selectionByElement:function(t){var n,i,r;return!(t=e(t)).hasClass("k-scheduler-datecolumn")&&this._eventsList.length?(t.is(".k-task")&&(t=t.closest("td")),{index:n=this._isMobile()?(r=t.parent()).parent().children().filter(function(){return e(this).children(":not(.k-scheduler-datecolumn)").length}).index(r):t.parent().index(),start:(i=this._eventsList[n]).start,end:i.end,isAllDay:i.isAllDay,uid:i.uid}):void 0},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",!0)[0];this.current(t)},move:function(e,t){var n,i=!1,r=e.index;return t==o.keys.UP?(r--,i=!0):t==o.keys.DOWN&&(r++,i=!0),i&&(n=this._eventsList[r])&&(e.start=n.start,e.end=n.end,e.isAllDay=n.isAllDay,e.events=[n.uid],e.index=r),i},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(s),a.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",selectedShortDateFormat:"{0:d} - {1:d}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i;return(i=e)>=t&&n>=i}var n=window.kendo,i=n.ui,r=i.SchedulerView,o=".kendoMonthView",a=e.extend,s=n.date.getDate,l=n.date.MS_PER_DAY,c=n.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),u=n.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'),d=n.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');i.MonthView=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.title=n.options.title,n.name="month",n._templates(),n._editable(),n._renderLayout(n.options.date),n._groups()},_updateDirection:function(e,t,n,i,r){var o,a,s,l;n&&(o=t[0].start,a=t[t.length-1].end,s=o.index===a.index,l=o.collectionIndex===a.collectionIndex,(r?s&&l||l:s&&l)&&(e.backward=i))},_changeViewPeriod:function(e,t,i){var r=i?7:1;return t&&(r*=-1),e.start=n.date.addDays(e.start,r),e.end=n.date.addDays(e.end,r),(!i||i&&this._isVerticallyGrouped())&&(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0},_continuousSlot:function(e,t,n){var i=e.backward?0:t.length-1;return this.groups[e.groupIndex].continuousSlot(t[i].start,n)},_changeGroupContinuously:function(e,t,n,i){var r,o,a,s;return n||(r=e.groupIndex,o=this.groups.length-1,a=this._isVerticallyGrouped(),s=this.groups[r],!t&&a?(t=s[i?"lastSlot":"firstSlot"](),r+=i?-1:1):t&&!a&&(r=i?o:0),(0>r||r>o)&&(r=i?o:0,t=null),e.groupIndex=r),t},_normalizeHorizontalSelection:function(e,t,n){return n?t[0].start:t[t.length-1].end},_normalizeVerticalSelection:function(e,t){return e.backward?t[0].start:t[t.length-1].end},_templates:function(){var e=this.options,t=a({},n.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.dayTemplate=n.template(e.dayTemplate,t),this.groupHeaderTemplate=n.template(e.groupHeaderTemplate,t)},dateForTitle:function(){return n.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},shortDateForTitle:function(){return n.format(this.options.selectedShortDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return n.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return n.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(t){var i=this;this._firstDayOfMonth=n.date.firstDayOfMonth(t),this._lastDayOfMonth=n.date.lastDayOfMonth(t),this._startDate=function(e,t){for(var i=t.firstDay,r=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());r.getDay()!=i;)n.date.setTime(r,-1*l);return r}(t,this.calendarInfo()),this.createLayout(this._layout()),this._content(),this.refreshLayout(),this.content.on("click"+o,".k-nav-day,.k-more-events",function(t){var n=e(t.currentTarget).offset(),r=i._slotByPosition(n.left,n.top);t.preventDefault(),i.trigger("navigate",{view:"day",date:r.startDate()})})},_editable:function(){this.options.editable&&!this._isMobilePhoneView()&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+o,".k-scheduler-monthview .k-event a:has(.k-si-close)",function(i){t.trigger("remove",{uid:e(this).closest(".k-event").attr(n.attr("uid"))}),i.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+o,".k-scheduler-monthview .k-scheduler-content td",function(n){var i,r=e(n.currentTarget).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:a({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+o,".k-scheduler-monthview .k-event",function(i){t.trigger("edit",{uid:e(this).closest(".k-event").attr(n.attr("uid"))}),i.preventDefault()})},_touchEditable:function(){var t=this,i=0;n.support.mobileOS.android&&(i=5),!1!==t.options.editable.create&&(t._addUserEvents=new n.UserEvents(t.element,{threshold:i,filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(n){var i,r=e(n.target).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:a({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new n.UserEvents(t.element,{threshold:i,filter:".k-scheduler-monthview .k-event",tap:function(i){0===e(i.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(i.target).closest(".k-event").attr(n.attr("uid"))}),i.preventDefault())}}))},selectionByElement:function(t){var n=e(t).offset();return this._slotByPosition(n.left,n.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e,t="<tbody>",n=1,i=this.groupedResources;for(i.length&&this._isVerticallyGrouped()&&(n=this._rowCountForLevel(i.length-1)),e=0;n>e;e++)t+=this._createCalendar(e);t+="</tbody>",this.content.find("table").html(t)},_createCalendar:function(e){var t,i,r,o=this.startDate(),a=[o],s="",l=1,c=this._isVerticallyGrouped(),u=this.groupedResources;for(u.length&&(c||(l=this._columnCountForLevel(u.length-1))),this._slotIndices={},t=0;6>t;t++){for(s+="<tr>",a.push(o),i=7*t,r=0;l>r;r++)s+=this._createRow(o,i,7,c?e:r);o=n.date.addDays(o,7),s+="</tr>"}return this._weekStartDates=a,this._endDate=n.date.previousDay(o),s},_createRow:function(e,t,i,r){var o,a=this,l=a._firstDayOfMonth,c=a._lastDayOfMonth,u=a.dayTemplate,d="",h="",p=function(){return a._resourceBySlot({groupIndex:r})};for(o=0;i>o;o++)d="",n.date.isToday(e)&&(d+="k-today"),n.date.isInDateRange(e,l,c)||(d+=" k-other-month"),h+="<td ",""!==d&&(h+='class="'+d+'"'),h+=">",h+=u({date:e,resources:p}),h+="</td>",a._slotIndices[s(e).getTime()]=t+o,e=n.date.nextDay(e);return h},_layout:function(){var t,n,i,r=this.calendarInfo(),o=function(e,t){return e.slice(t).concat(e.slice(0,t))}(this._isMobile()?r.days.namesShort:r.days.names,r.firstDay),a=e.map(o,function(e){return{text:e}}),s=this.groupedResources;if(s.length)if(this._isVerticallyGrouped()){for(n=[],i=0;6>i;i++)n.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"});t=this._createRowsLayout(s,n,this.groupHeaderTemplate)}else a=this._createColumnsLayout(s,a,this.groupHeaderTemplate);return{columns:a,rows:t}},_createEventElement:function(t){var i,r=this.options.editable,o=this._isMobile();return t.showDelete=r&&!1!==r.destroy&&!o,t.resizable=r&&!1!==r.resize&&!o,t.ns=n.ns,t.resources=this.eventResources(t),t.inverseColor=!(!t.resources||!t.resources[0])&&this._shouldInverseResourceColor(t.resources[0]),i=e(this.eventTemplate(t)),this.angular("compile",function(){return{elements:i,data:[{dataItem:t}]}}),i},_isInDateSlot:function(e){var i=this.groups[0],r=i.firstSlot().start,o=i.lastSlot().end-1,a=n.date.toUtcTime(e.start),s=n.date.toUtcTime(e.end);return(t(a,r,o)||t(s,r,o)||t(r,a,s)||t(o,a,s))&&(!t(s,r,r)||t(s,a,a)||e.isAllDay)},_slotIndex:function(e){return this._slotIndices[s(e).getTime()]},_positionMobileEvent:function(t,i,o){var a,s,l,c,u,d,h=t.start;t.start.offsetLeft>t.end.offsetLeft&&(h=t.end),s=a=t.start.index,(l=r.collidingEvents(t.events(),a,s)).push({element:i,start:a,end:s}),c=r.createRows(l),(d=(u=t.collection.at(a)).container)||(d=e(n.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>',h.offsetTop+h.firstChildTop+h.firstChildHeight-3+"px",h.offsetLeft+"px",h.offsetWidth+"px")),u.container=d,this.content[0].appendChild(d[0])),3>=c.length&&(t.addEvent({element:i,start:a,end:s,groupIndex:h.groupIndex}),o._continuousEvents.push({element:i,uid:i.attr(n.attr("uid")),start:t.start,end:t.end}),d[0].appendChild(i[0]))},_positionEvent:function(t,i,o){var a,s,l,c,u,h,p,f,g,m,v,_,y,b,w=this.options.eventHeight,k=t.start;for(t.start.offsetLeft>t.end.offsetLeft&&(k=t.end),a=t.start.index,s=t.end.index,l=k.eventCount,c=r.collidingEvents(t.events(),a,s),u=a!==s?5:4,c.push({element:i,start:a,end:s}),h=r.createRows(c),p=0,f=Math.min(h.length,l);f>p;p++)for(g=h[p].events,m=k.offsetTop+k.firstChildHeight+p*w+3*p+"px",v=0,_=g.length;_>v;v++)g[v].element[0].style.top=m;if(h.length>l)for(y=a;s>=y;y++){if((b=t.collection.at(y)).more)return;b.more=e(d({ns:n.ns,start:y,end:y,width:b.clientWidth-2,left:b.offsetLeft+2,top:b.offsetTop+b.firstChildHeight+l*w+3*l})),this.content[0].appendChild(b.more[0])}else t.addEvent({element:i,start:a,end:s,groupIndex:k.groupIndex}),i[0].style.width=t.innerWidth()-u+"px",i[0].style.left=k.offsetLeft+2+"px",i[0].style.height=w+"px",o._continuousEvents.push({element:i,uid:i.attr(n.attr("uid")),start:t.start,end:t.end}),i.appendTo(this.content)},_slotByPosition:function(e,t){var n,i,r=this.content.offset();for(e-=r.left,t-=r.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),n=0;this.groups.length>n;n++)if(i=this.groups[n].daySlotByPosition(e,t))return i;return null},_createResizeHint:function(e){var t=e.startSlot().offsetLeft,n=e.start.offsetTop,i=e.innerWidth(),o=e.start.clientHeight-2,a=r.fn._createResizeHint.call(this,t,n,i,o);a.appendTo(this.content),this._resizeHint=this._resizeHint.add(a)},_updateResizeHint:function(e,t,i,r){var o,a;for(this._removeResizeHint(),o=this.groups[t].ranges(i,r,!0,e.isAllDay),a=0;o.length>a;a++)this._createResizeHint(o[a]);this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(n.toString(n.timezone.toLocalDate(i),"M/dd")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(n.toString(n.timezone.toLocalDate(r),"M/dd"))},_updateMoveHint:function(e,t,i){var r,o,a,s,l,c=n.date.toUtcTime(e.start)+i,u=c+e.duration(),d=this.groups[t].ranges(c,u,!0,e.isAllDay);for(this._removeMoveHint(),r=0;d.length>r;r++)a=(o=d[r]).startSlot(),s=o.endSlot(),(l=this._createEventElement(e.clone({head:o.head,tail:o.tail}))).css({left:a.offsetLeft+2,top:a.offsetTop+a.firstChildHeight,height:this.options.eventHeight,width:o.innerWidth()-(a.index!==s.index?5:4)}),l.addClass("k-event-drag-hint"),l.appendTo(this.content),this._moveHint=this._moveHint.add(l)},_groups:function(){var e,t,i,r,o,a,s,l,c,u,d,h,p,f,g,m,v=this._groupCount();for(this.groups=[],e=0;v>e;e++)this._addResourceView(e);for(t=this.content[0].getElementsByTagName("tr"),i=0;v>i;i++)for(r=0,o=0,this._isVerticallyGrouped()&&(o=i),a=6*o;6*(o+1)>a;a++)for(s=this.groups[i].addDaySlotCollection(n.date.addDays(this.startDate(),r),n.date.addDays(this.startDate(),r+7)),c=(l=t[a]).children,u=0,l.setAttribute("role","row"),this._isVerticallyGrouped()||(u=i),d=7*u;7*(u+1)>d;d++)p=(h=c[d]).clientHeight,f=h.children.length?h.children[0].offsetHeight+3:0,g=n.date.toUtcTime(n.date.addDays(this.startDate(),r)),r++,m=Math.floor((p-f-this.options.moreButtonHeight)/(this.options.eventHeight+3)),h.setAttribute("role","gridcell"),h.setAttribute("aria-selected",!1),s.addDaySlot(h,g,g+n.date.MS_PER_DAY,m)},render:function(e){this.content.children(".k-event,.k-more-events,.k-events-container").remove(),this._groups(),e=new n.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0,1):this._renderEvents(e,0),this.refreshLayout(),this.trigger("activate")},_renderEvents:function(e,t){var n,i,r,o,a,s,l,c,u,d,h,p=this._isMobilePhoneView();for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))for((o=this.groups[t])._continuousEvents||(o._continuousEvents=[]),s=(a=o.slotRanges(n,!0)).length,l=0;s>l;l++)c=a[l],u=n.start,d=n.end,s>1&&(0===l?d=c.end.endDate():l==s-1?u=c.start.startDate():(u=c.start.startDate(),d=c.end.endDate())),h=n.clone({start:u,end:d,head:c.head,tail:c.tail}),p?this._positionMobileEvent(c,this._createEventElement(h),o):this._positionEvent(c,this._createEventElement(h),o)},_renderGroups:function(e,t,i,o){var a,s,l,c,u=t[0];if(u)for(a=u.dataSource.view(),s=0;a.length>s;s++)l=this._resourceValue(u,a[s]),c=new n.data.Query(e).filter({field:u.field,operator:r.groupEqFilter(l)}).toArray(),t.length>1?i=this._renderGroups(c,t.slice(1),i++,o+1):this._renderEvents(c,i++);return i},_groupCount:function(){var e=this.groupedResources;return e.length?this._isVerticallyGrouped()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){this.table&&this.table.removeClass("k-scheduler-monthview"),this.content&&this.content.off(o),this.element&&this.element.off(o),r.fn.destroy.call(this),this._isMobile()&&!this._isMobilePhoneView()&&this.options.editable&&(!1!==this.options.editable.create&&this._addUserEvents.destroy(),!1!==this.options.editable.update&&this._editUserEvents.destroy())},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:!0,selectedDateFormat:"{0:y}",selectedShortDateFormat:"{0:y}",groupHeaderTemplate:"#=text#",dayTemplate:c,eventTemplate:u}})}(window.kendo.jQuery),function(e,t){function n(e,t){var n;return 0!==e&&t>e?n=t-e:(n=e%t)&&(n=t-n),n}function i(e){var t=e.getMonth();return(g(e)?K[t]:Z[t])+e.getDate()}function r(e,n){var i,r;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),Y(e,0),i=e.getFullYear(),n!==t?($(e,n,-1),e.setDate(e.getDate()+4)):e.setDate(e.getDate()+(4-(e.getDay()||7))),Y(e,0),r=Math.floor((e.getTime()-new Date(i,0,1,-6))/864e5),1+Math.floor(r/7)}function o(e,t){var n=7-(Q(e).getDay()+7-(t||7))||7;return 0>n&&(n+=7),Math.ceil((e.getDate()-n)/7)+1}function a(e,t){return e+(t>e?7:0)}function s(e,t,n){var i,r,s,l,c,u=t.offset;return u?(r=o(i=new Date(e.getFullYear(),e.getMonth()+1,0),n),l=(s=a(t.day,n))<a(new Date(e.getFullYear(),e.getMonth(),1).getDay(),n),c=s>a(i.getDay(),n),0>u?u=r+(u+1-(c?1:0)):l&&(u+=1),r-=c?1:0,(l?1:0)>u||u>r?null:u):o(e,n)}function l(e,t){return o(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function c(e,t,n){return o(e,n)===s(e,t,n)}function u(e,t,n){for(var i,r,l,c,u=a(t.getDay(),n),d=e.length,h=[],p=0;d>p;p++)if(r=e[p],c=o(t,n),null!==(i=s(t,r,n)))if(i>c)h.push(r);else if(c===i)if((l=a(r.day,n))>u)h.push(r);else if(u===l)return null;return h}function d(e,t,n){for(var i,r=0,o=e.length,a=[];o>r;r++){if(i=e[r],n&&(i=n(i)),t===i)return null;i>t&&a.push(i)}return a}function h(e,t){for(var n,i=0,r=e.length;r>i;i++){if(n=parseInt(e[i],10),isNaN(n)||t.start>n||n>t.end||0===n&&0>t.start)return null;e[i]=n}return e.sort(m)}function p(e){for(var n,i,r,o=0,a=e.length;a>o;o++){if(i=(n=e[o]).length,r=n.substring(i-2).toUpperCase(),(r=te[r])===t)return null;e[o]={offset:parseInt(n.substring(0,i-2),10)||0,day:r}}return e}function f(e){var t=e.getMonth();return 1===t?1===new Date(e.getFullYear(),1,29).getMonth()?29:28:J[t]}function g(e){return(e=e.getFullYear())%4==0&&e%100!=0||e%400==0}function m(e,t){return e-t}function v(e,t){var n,i,r=0,o=[];if(e)for(n=(e=e.split(";")).length;n>r;r++)(i=k(e[r],t))&&o.push(i);return o}function _(t,n,i){for(var r=e.isArray(t)?t:v(t,i),o=n.getTime()-n.getMilliseconds(),a=0,s=r.length;s>a;a++)if(r[a].getTime()===o)return!0;return!1}function y(e,t){var n,i,r=0,o=[].concat(e);for(n=o.length;n>r;r++)i=o[r],i=N.timezone.convert(i,t||i.getTimezoneOffset(),"Etc/UTC"),o[r]=N.toString(i,oe);return o.join(";")+";"}function b(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),11,31);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth()+1,0);break;case"weekly":$(n,t.weekStart,-1),n.setDate(n.getDate()+6)}return t.hours&&n.setHours(23),t.minutes&&n.setMinutes(59),t.seconds&&n.setSeconds(59),n}function w(e,t,n){var i,r,o,a,s=e.slice(n._startIdx),l=s.length,c=n.positions,u=[];for(o=0,a=c.length;a>o;o++)0>(i=c[o])?i=l+i:i-=1,(r=s[i])&&r.start>=t&&u.push(r);return e=e.slice(0,n._startIdx).concat(u),n._startIdx=e.length,e}function k(e,t){return(e=N.parseDate(e,ne))&&t&&(e=O.convert(e,e.getTimezoneOffset(),t)),e}function x(e,n){var i,r,o,a,s,l,c,u,d=e.split(";");for(c=0,u=d.length;u>c;c++)if(r=(i=d[c].split(":"))[0],o=i[1],-1!==r.indexOf("TZID")&&(a=r.substring(r.indexOf("TZID")).split("=")[1]),o)for(s=0,l=(o=o.split(",")).length;l>s;s++)o[s]=k(o[s],a||n);return o?{value:o,tzid:a}:t}function C(n,i){var r,o,a,s,l,c,u,d,f,g={},m=0,v=!1;if(!n)return null;for((c=n.split("\n"))[1]||-1===n.indexOf("DTSTART")&&-1===n.indexOf("DTEND")&&-1===n.indexOf("EXDATE")||(c=n.split(" ")),m=0,a=c.length;a>m;m++)-1!==(l=e.trim(c[m])).indexOf("DTSTART")?g.start=x(l,i):-1!==l.indexOf("DTEND")?g.end=x(l,i):-1!==l.indexOf("EXDATE")?g.exdates=x(l,i):-1!==l.indexOf("RRULE")?s=l.substring(6):e.trim(l)&&(s=l);for(m=0,a=(s=s.split(";")).length;a>m;m++)switch(u=s[m],r=u.split("="),o=e.trim(r[1]).split(","),e.trim(r[0]).toUpperCase()){case"FREQ":g.freq=o[0].toLowerCase();break;case"UNTIL":g.until=k(o[0],i);break;case"COUNT":g.count=parseInt(o[0],10);break;case"INTERVAL":g.interval=parseInt(o[0],10);break;case"BYSECOND":g.seconds=h(o,{start:0,end:60}),v=!0;break;case"BYMINUTE":g.minutes=h(o,{start:0,end:59}),v=!0;break;case"BYHOUR":g.hours=h(o,{start:0,end:23}),v=!0;break;case"BYMONTHDAY":g.monthDays=h(o,{start:-31,end:31}),v=!0;break;case"BYYEARDAY":g.yearDays=h(o,{start:-366,end:366}),v=!0;break;case"BYMONTH":g.months=h(o,{start:1,end:12}),v=!0;break;case"BYDAY":g.weekDays=f=p(o),v=!0;break;case"BYWEEKNO":g.weeks=h(o,{start:-53,end:53}),v=!0;break;case"BYSETPOS":g.positions=h(o,{start:-366,end:366});break;case"WKST":g.weekStart=d=te[o[0]]}return g.freq===t||g.count!==t&&g.until?null:(g.interval||(g.interval=1),d===t&&(g.weekStart=d=N.culture().calendar.firstDay),f&&(g.weekDays=f.sort(function(e,t){var n=e.day,i=t.day;return d>n&&(n+=7),d>i&&(i+=7),n-i})),g.positions&&!v&&(g.positions=null),g._hasRuleValue=v,g)}function T(e,t){for(var n,i=e.value,r=e.tzid||"",o=i.length,a=0;o>a;a++)n=i[a],n=O.convert(n,r||t||n.getTimezoneOffset(),"Etc/UTC"),i[a]=N.toString(n,"yyyyMMddTHHmmssZ");return r&&(r=";TZID="+r),r+":"+i.join(",")+" "}function S(e,n){var i=e.weekStart,r="FREQ="+e.freq.toUpperCase(),o=e.exdates||"",a=e.start||"",s=e.end||"",l=e.until;return e.interval>1&&(r+=";INTERVAL="+e.interval),e.count&&(r+=";COUNT="+e.count),l&&(l=O.convert(l,n||l.getTimezoneOffset(),"Etc/UTC"),r+=";UNTIL="+N.toString(l,"yyyyMMddTHHmmssZ")),e.months&&(r+=";BYMONTH="+e.months),e.weeks&&(r+=";BYWEEKNO="+e.weeks),e.yearDays&&(r+=";BYYEARDAY="+e.yearDays),e.monthDays&&(r+=";BYMONTHDAY="+e.monthDays),e.weekDays&&(r+=";BYDAY="+function(e){for(var t,n,i=0,r=e.length,o=[];r>i;i++)"string"==typeof(t=e[i])?n=t:(n=""+ee[t.day],t.offset&&(n=t.offset+n)),o.push(n);return""+o}(e.weekDays)),e.hours&&(r+=";BYHOUR="+e.hours),e.minutes&&(r+=";BYMINUTE="+e.minutes),e.seconds&&(r+=";BYSECOND="+e.seconds),e.positions&&(r+=";BYSETPOS="+e.positions),i!==t&&(r+=";WKST="+ee[i]),a&&(a="DTSTART"+T(a,n)),s&&(s="DTEND"+T(s,n)),o&&(o="EXDATE"+T(o,n)),(a||s||o)&&(r=a+s+o+"RRULE:"+r),r}var D,A,M,E,I,R,P,L,F,B,z,H,N=window.kendo,O=N.timezone,V=N.Class,U=N.ui,W=U.Widget,j=U.DropDownList,q=N.date,G=q.setTime,$=q.setDayOfWeek,Y=q.adjustDST,Q=q.firstDayOfMonth,X=q.getMilliseconds,K=[0,31,60,91,121,152,182,213,244,274,305,335,366],Z=[0,31,59,90,120,151,181,212,243,273,304,334,365],J=[31,28,30,31,30,31,30,31,30,31,30,31],ee={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},te={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},ne=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],ie=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],re=ie.length,oe="yyyyMMddTHHmmssZ",ae={months:function(e,t,n){var i=n.months,r=d(i,e.getMonth()+1),o=!1;return null!==r&&(r.length?e.setMonth(r[0]-1,1):e.setFullYear(e.getFullYear()+1,i[0]-1,1),o=!0),o},monthDays:function(e,t,n){for(var i,r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=i+e),e};t>=e;){if(r=e.getMonth(),i=f(e),null===(o=d(n.monthDays,e.getDate(),l)))return a;if(a=!0,o.length){if(e.setMonth(r,o.sort(m)[0]),Y(e,s),r===e.getMonth())break}else e.setMonth(r+1,1)}return a},yearDays:function(e,t,n){for(var r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=r+e),e};t>e;){if(r=g(e)?366:365,null===(o=d(n.yearDays,i(e),l)))return a;if(a=!0,r=e.getFullYear(),o.length){e.setFullYear(r,0,o.sort(m)[0]),Y(e,s);break}e.setFullYear(r+1,0,1)}return a},weeks:function(e,t,n){for(var i,o,a,s=n.weekStart,l=!1,c=e.getHours(),u=function(e){return 0>e&&(e=53+e),e};t>e;){if(null===(o=d(n.weeks,r(e,s),u)))return l;if(l=!0,i=e.getFullYear(),o.length){a=7*o.sort(m)[0]-1,e.setFullYear(i,0,a),$(e,s,-1),Y(e,c);break}e.setFullYear(i+1,0,1)}return l},weekDays:function(e,t,n){var i,r,a=n.weekDays,s=n.weekStart,d=u(a,e,s),h=e.getHours();if(null===d)return!1;if((i=d[0])||(i=a[0],$(e,s)),r=i.day,i.offset)for(;t>=e&&!c(e,i,s);)o(e,s)===l(e,s)?(e.setMonth(e.getMonth()+1,1),Y(e,h)):(e.setDate(e.getDate()+7),Y(e,h),$(e,s,-1));return e.getDay()!==r&&$(e,r),!0},hours:function(e,t,n){var i=n.hours,r=n._startTime,o=r.getHours(),a=d(i,o),s=!1;return null!==a&&(s=!0,e.setHours(o),Y(e,o),a.length?(a=a[0],e.setHours(a)):(a=e.getHours(),e.setDate(e.getDate()+1),Y(e,a),a=i[0],e.setHours(a),Y(e,a)),n.minutes&&e.setMinutes(0),r.setHours(a,e.getMinutes())),s},minutes:function(e,t,n){var i=n.minutes,r=d(i,e.getMinutes()),o=n._startTime.getHours(),a=!1;return null!==r&&(a=!0,r.length?r=r[0]:(o+=1,r=i[0]),n.seconds&&e.setSeconds(0),e.setHours(o,r),Y(e,o%=24),n._startTime.setHours(o,r,e.getSeconds())),a},seconds:function(e,t,n){var i=n.seconds,r=n._startTime.getHours(),o=d(i,e.getSeconds()),a=e.getMinutes(),s=!1;return null!==o&&(s=!0,o.length?e.setSeconds(o[0]):(a+=1,e.setMinutes(a,i[0]),a>59&&(a%=60,r=(r+1)%24)),n._startTime.setHours(r,a,e.getSeconds())),s}},se=V.extend({next:function(e,t){var n,i,r=t._startTime,o=r.getDate();if(t.seconds)i=e.getSeconds()+1,e.setSeconds(i),r.setSeconds(i),r.setDate(o);else{if(!t.minutes)return!1;n=e.getMinutes()+1,e.setMinutes(n),r.setMinutes(n),r.setDate(o)}return!0},normalize:function(e){var t=e.rule;4===e.idx&&t.hours&&(t._startTime.setHours(0),this._hour(e.date,t))},limit:function(e,n,i){for(var r,o,a,s,l,c=i.interval;n>=e;){for(a=o=t,l=e.getDate(),s=0;re>s;s++){if(i[r=ie[s]]){if(a=ae[r](e,n,i),o!==t&&a)break;o=a}a&&this.normalize({date:e,rule:i,day:l,idx:s})}if((1===c||!this.interval(i,e))&&s===re)break}},interval:function(e,t){var i,o,a=new Date(e._startPeriod),s=new Date(t),l=t.getHours(),c=e.weekStart,u=e.interval,d=e.freq,h=!1,p=0,f=0,g=1;return"hourly"===d?(i=s.getTimezoneOffset()-a.getTimezoneOffset(),o=e._startTime.getHours(),s=s.getTime(),l!==o&&(s+=(o-l)*q.MS_PER_HOUR),s-=a,i&&(s-=i*q.MS_PER_MINUTE),0!==(p=n(i=Math.floor(s/q.MS_PER_HOUR),u))&&(this._hour(t,e,p),h=!0)):"daily"===d?(q.setTime(s,-a),0!==(p=n(i=Math.floor(s/q.MS_PER_DAY),u))&&(this._date(t,e,p),h=!0)):"weekly"===d?(i=52*(t.getFullYear()-a.getFullYear()),0!==(p=n(p=r(t,c)-r(a,c)+i,u))&&(q.setDayOfWeek(t,e.weekStart,-1),t.setDate(t.getDate()+7*p),Y(t,l),h=!0)):"monthly"===d?(i=t.getFullYear()-a.getFullYear(),0!==(p=n(i=t.getMonth()-a.getMonth()+12*i,u))&&(g=e._hasRuleValue?1:t.getDate(),t.setFullYear(t.getFullYear(),t.getMonth()+p,g),Y(t,l),h=!0)):"yearly"===d&&(p=n(i=t.getFullYear()-a.getFullYear(),u),e.months||(f=t.getMonth()),e.yearDays||e.monthDays||e.weekDays||(g=t.getDate()),0!==p&&(t.setFullYear(t.getFullYear()+p,f,g),Y(t,l),h=!0)),h},_hour:function(e,t,n){var i=t._startTime,r=i.getHours();n&&(r+=n),e.setHours(r),r%=24,i.setHours(r),Y(e,r)},_date:function(e,t,n){var i=e.getHours();e.setDate(e.getDate()+n),Y(e,i)||this._hour(e,t)}}),le=se.extend({next:function(e,t){se.fn.next(e,t)||this._hour(e,t,1)},normalize:function(e){var t=e.rule;4===e.idx&&(t._startTime.setHours(0),this._hour(e.date,t))}}),ce=se.extend({next:function(e,t){se.fn.next(e,t)||this[t.hours?"_hour":"_date"](e,t,1)}}),ue=ce.extend({setup:function(e,t){e.weekDays||(e.weekDays=[{day:t.getDay(),offset:0}])}}),de=se.extend({next:function(e,t){var n,i;if(!se.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else{for(n=e.getDate(),i=e.getHours(),e.setMonth(e.getMonth()+1),Y(e,i);e.getDate()!==n;)e.setDate(n),Y(e,i);this._hour(e,t)}},normalize:function(e){var t=e.rule,n=e.date,i=n.getHours();0!==e.idx||t.monthDays||t.weekDays?se.fn.normalize(e):(n.setDate(e.day),Y(n,i))},setup:function(e,t,n){e.monthDays||e.weekDays||n.setDate(t.getDate())}}),he=de.extend({next:function(e,t){var n,i=e.getHours();if(!se.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else if(t.months){for(n=e.getDate(),e.setMonth(e.getMonth()+1),Y(e,i);e.getDate()!==n;)e.setDate(n),Y(e,i);this._hour(e,t)}else e.setFullYear(e.getFullYear()+1),Y(e,i),this._hour(e,t)},setup:function(){}}),pe={hourly:new le,daily:new ce,weekly:new ue,monthly:new de,yearly:new he},fe="click";N.recurrence={rule:{parse:C,serialize:S},expand:function(e,n,i,r){var o,a,s,l,c,u,d,h,p,f,g,m,k,x,T,S,D,A,M,E,I=C(e.recurrenceRule,r),R=[];if(!I)return[e];for(E=(M=I.positions)?0:1,p=I.start,f=I.end,(p||f)&&(e=e.clone({start:p?new Date(p.value[0]):t,end:f?new Date(f.value[0]):t})),T=(S=e.start).getTime(),x=X(S),!(k=v(e.recurrenceException,r))[0]&&I.exdates&&(k=I.exdates.value,e.set("recurrenceException",y(k,r))),h=n=new Date(n),i=new Date(i),m=I.freq,A=pe[m],D=I.count,I.until&&i>I.until&&(i=new Date(I.until)),g="yearly"===m||"monthly"===m||"weekly"===m,T>n||D||I.interval>1||g?n=new Date(T):(l=n.getHours(),c=n.getMinutes(),u=n.getSeconds(),I.hours||(l=S.getHours()),I.minutes||(c=S.getMinutes()),I.seconds||(u=S.getSeconds()),n.setHours(l,c,u,S.getMilliseconds())),I._startPeriod=new Date(n),M&&(n=function(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),0,1);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth(),1);break;case"weekly":$(n,t.weekStart,-1)}return t.hours&&n.setHours(0),t.minutes&&n.setMinutes(0),t.seconds&&n.setSeconds(0),n}(n,I),i=b(i,I),0>X(i)-X(n)&&(l=n.getHours(),i.setHours(l,n.getMinutes(),n.getSeconds(),n.getMilliseconds()),q.adjustDST(i,l)),I._startPeriod=new Date(n),I._endPeriod=b(n,I),I._startIdx=0),d=e.duration(),I._startTime=o=q.toInvariantTime(n),A.setup&&A.setup(I,S,n),A.limit(n,i,I);i>=n;)if(s=new Date(n),G(s,d),((n>=h||s>h)&&!_(k,n,r)||M)&&(a=(o=q.toUtcTime(q.getDate(n))+X(I._startTime))+d,T!==n.getTime()||x!==X(I._startTime)?R.push(e.toOccurrence({start:new Date(n),end:s,_startTime:o,_endTime:a})):(e._startTime=o,e._endTime=a,R.push(e))),M){if(A.next(n,I),A.limit(n,i,I),n>I._endPeriod&&(R=w(R,S,I),I._endPeriod=b(n,I),E=R.length),D&&D===E)break}else{if(D&&D===E)break;E++,A.next(n,I),A.limit(n,i,I)}return R},dayInYear:i,weekInYear:r,weekInMonth:o,numberOfWeeks:l,isException:_,toExceptionString:y},D=function(e){for(var t=N.culture().calendar.days.namesShort,n=t.length,i="",r=0,o=[];n>r;r++)o.push(r);for(t=t.slice(e).concat(t.slice(0,e)),o=o.slice(e).concat(o.slice(0,e)),r=0;n>r;r++)i+='<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="'+o[r]+'" /> '+t[r]+"</label>";return i},A=N.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />#:messages.day#</label><input class="k-recur-monthday" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" />#:messages.of#<input class="k-recur-month" /></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" /></li></ul></div># } #'),M=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}],E=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}],I=[{day:0,offset:0},{day:6,offset:0}],P=(R=W.extend({init:function(e,t){var n,i=this,r=t&&t.frequencies;W.fn.init.call(i,e,t),i.wrapper=i.element,(t=i.options).start=n=t.start||q.today(),r&&(t.frequencies=r),"string"==typeof n&&(t.start=N.parseDate(n,"yyyyMMddTHHmmss")),null===t.firstWeekDay&&(t.firstWeekDay=N.culture().calendar.firstDay),i._namespace="."+t.name},options:{value:"",start:"",timezone:"",spinners:!0,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:!1,messages:{frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of "},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var e=this,t=e._value;e._container.find(".k-recur-interval").kendoNumericTextBox({spinners:e.options.spinners,value:t.interval||1,decimals:0,format:"#",min:1,change:function(){t.interval=this.value(),e._trigger()}})},_weekDayRule:function(e){var t=this,n=(t._weekDay.element||t._weekDay).val(),i=+(t._weekDayOffset.element||t._weekDayOffset).val(),r=null,o=null;e||("day"===n?(r=M,o=i):"weekday"===n?(r=E,o=i):"weekend"===n?(r=I,o=i):r=[{offset:i,day:+n}]),t._value.weekDays=r,t._value.positions=o},_weekDayView:function(){var e,t,n,i,r=this,o=r._value.weekDays,a=r._value.positions,s=r._weekDayOffset;o&&(n=o.length,a&&(7===n?(t="day",e=a):5===n?(t="weekday",e=a):2===n&&(t="weekend",e=a)),t||(t=(o=o[0]).day,e=o.offset||""),s[i=s.value?"value":"val"](e),r._weekDay[i](t))},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n._trigger()};o[0]&&(n._weekDayOffset=new j(n._container.find(".k-recur-weekday-offset"),{change:a,dataTextField:"text",dataValueField:"value",dataSource:[{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}]}),t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}],n._weekDay=new j(o,{value:n.options.start.getDay(),change:a,dataTextField:"text",dataValueField:"value",dataSource:t.concat(e.map(N.culture().calendar.days.names,function(e,t){return{text:e,value:t}}))}),n._weekDayView())},_initWeekDays:function(){var t,n,i,r,o,a=this,s=a._value,l=a._container.find(".k-recur-weekday-checkbox");if(l[0]&&(l.on(fe+a._namespace,function(){s.weekDays=e.map(l.filter(":checked"),function(e){return{day:+e.value,offset:0}}),a.options.mobile||a._trigger()}),s.weekDays))for(i=0,r=l.length,o=s.weekDays.length;r>i;i++)for(n=l[i],t=0;o>t;t++)n.value==s.weekDays[t].day&&(n.checked=!0)},_initMonthDay:function(){var e=this,t=e._value,n=e._container.find(".k-recur-monthday");n[0]&&(e._monthDay=new N.ui.NumericTextBox(n,{spinners:e.options.spinners,min:1,max:31,decimals:0,format:"#",value:t.monthDays?t.monthDays[0]:e.options.start.getDate(),change:function(){var n=this.value();t.monthDays=n?[n]:n,e._trigger()}}))},_initCount:function(){var e=this,t=e._container.find(".k-recur-count"),n=e._value;e._count=t.kendoNumericTextBox({spinners:e.options.spinners,value:n.count||1,decimals:0,format:"#",min:1,change:function(){n.count=this.value(),e._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until;e._until=t.kendoDatePicker({min:r&&n>r?r:n,value:r||new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59),change:function(){var t=this.value();i.until=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59),e._trigger()}}).data("kendoDatePicker")},_trigger:function(){this.options.mobile||this.trigger("change")}})).extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),n._initFrequency(),n._initContainer(),n.value(n.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){var e=this;e._frequency.destroy(),e._container.find("input[type=radio],input[type=checkbox]").off(fe+e._namespace),N.destroy(e._container),R.fn.destroy.call(e)},value:function(e){var n,i=this,r=i.options.timezone;return e===t?i._value.freq?S(i._value,r):"":(i._value=C(e,r)||{},(n=i._value.freq)?i._frequency.value(n):i._frequency.select(0),i._initView(i._frequency.value()),t)},_initContainer:function(){var t=this.element,n=e('<div class="k-recur-view" />'),i=t.parent(".k-edit-field");i[0]?n.insertAfter(i):t.append(n),this._container=n},_initFrequency:function(){var t,n=this,i=n.options,r=i.frequencies,o=i.messages.frequencies,a=e("<input />");(t=(r=e.map(r,function(e){return{text:o[e],value:e}}))[0])&&"never"===t.value&&(t.value=""),n.element.append(a),n._frequency=new j(a,{dataTextField:"text",dataValueField:"value",dataSource:r,change:function(){n._value={},n._initView(n._frequency.value()),n.trigger("change")}})},_initView:function(e){var n=this,i=n._value,r=n.options,o={frequency:e||"never",weekDayCheckBoxes:D,firstWeekDay:r.firstWeekDay,messages:r.messages[e],end:r.messages.end};return N.destroy(n._container),n._container.html(A(o)),e?(i.freq=e,"weekly"!==e||i.weekDays||(i.weekDays=[{day:r.start.getDay(),offset:0}]),n._initInterval(),n._initWeekDays(),n._initMonthDay(),n._initWeekDay(),n._initMonth(),n._initCount(),n._initUntil(),n._period(),n._end(),t):(n._value={},t)},_initMonth:function(){var t,n=this,i=n._value,r=i.months||[n.options.start.getMonth()+1],o=n._container.find(".k-recur-month");o[0]&&(t={change:function(){i.months=[+this.value()],n.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:e.map(N.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}})},n._month1=new j(o[0],t),n._month2=new j(o[1],t),r&&(r=r[0],n._month1.value(r),n._month2.value(r)))},_end:function(){var e,t=this,n=t._value,i=t._container,r=t._namespace,o=function(e){t._toggleEnd(e.currentTarget.value),t.trigger("change")};t._buttonNever=i.find(".k-recur-end-never").on(fe+r,o),t._buttonCount=i.find(".k-recur-end-count").on(fe+r,o),t._buttonUntil=i.find(".k-recur-end-until").on(fe+r,o),n.count?e="count":n.until&&(e="until"),t._toggleEnd(e)},_period:function(){var e=this,t=e._value,n="monthly"===t.freq,i=n?e._toggleMonthDay:e._toggleYear,r=".k-recur-"+(n?"month":"year")+"-radio",o=e._container.find(r);(n||"yearly"===t.freq)&&(o.on(fe+e._namespace,function(t){i.call(e,t.currentTarget.value),e.trigger("change")}),e._buttonMonthDay=o.eq(0),e._buttonWeekDay=o.eq(1),i.call(e,t.weekDays?"weekday":"monthday"))},_toggleEnd:function(e){var t,n,i,r,o=this;"count"===e?(o._buttonCount.prop("checked",!0),i=!0,r=!1,t=o._count.value(),n=null):"until"===e?(o._buttonUntil.prop("checked",!0),i=!1,r=!0,t=null,n=o._until.value()):(o._buttonNever.prop("checked",!0),i=r=!1,t=n=null),o._count.enable(i),o._until.enable(r),o._value.count=t,o._value.until=n},_toggleMonthDay:function(e){var t,n=this,i=!1,r=!0,o=!1;"monthday"===e?(n._buttonMonthDay.prop("checked",!0),t=[n._monthDay.value()],i=!0,r=!1,o=!0):(n._buttonWeekDay.prop("checked",!0),t=null),n._weekDay.enable(r),n._weekDayOffset.enable(r),n._monthDay.enable(i),n._value.monthDays=t,n._weekDayRule(o)},_toggleYear:function(e){var t,n=this,i=!1,r=!0;"monthday"===e?(i=!0,r=!1,t=n._month1.value()):t=n._month2.value(),n._month1.enable(i),n._month2.enable(r),n._value.months=[t],n._toggleMonthDay(e)}}),U.plugin(P),L=N.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>'),F=N.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month"></select></div># } #'),B=N.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #'),z=N.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>'),H=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),t=n.options,n._optionTemplate=N.template('<option value="#:value#">#:text#</option>'),n.value(t.value),n._pane=t.pane,n._initRepeatButton(),n._initRepeatEnd(),n._defaultValue=n._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:!0,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?S(n._value,i):"":(n._value=C(e,i)||{},t)},destroy:function(){this._destroyView(),N.destroy(this._endFields),this._repeatButton.off(fe+this._namespace),R.fn.destroy.call(this)},_initRepeatButton:function(){var t=this,n=t.options.messages.frequencies[this._value.freq||"never"];t._repeatButton=e('<a href="#" class="k-button k-scheduler-recur">'+n+"</a>").on(fe+t._namespace,function(e){e.preventDefault(),t._createView("repeat"),t._pane.navigate("recurrence",t.options.animations.left)}),t.element.append(t._repeatButton)},_initRepeatEnd:function(){var t=this,n=e('<div class="k-edit-label"><label>'+t.options.messages.end.mobileLabel+"</label></div>").insertAfter(t.element.parent(".k-edit-field")),i=e('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on(fe+t._namespace,function(e){e.preventDefault(),t._value.freq&&(t._createView("end"),t._pane.navigate("recurrence",t.options.animations.left))}).insertAfter(n);t._endFields=n.add(i).toggleClass("k-state-disabled",!t._value.freq),t._endButton=i.find(".k-scheduler-recur-end").text(t._endText())},_endText:function(){var e=this._value,t=this.options.messages.end,n=t.never;return e.count?n=N.format("{0} {1}",t.after,e.count):e.until&&(n=N.format("{0} {1:d}",t.on,e.until)),n},_initFrequency:function(){var t=this,n=t.options.messages.frequencies,i=z({dataSource:e.map(this.options.frequencies,function(e){return{text:n[e],value:"never"!==e?e:""}}),value:t._value.freq||"",ns:N.ns});t._view.element.find(".k-recur-pattern").append(i).on(fe+t._namespace,".k-scheduler-navigation li",function(n){var i=e(this);n.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),t._value={freq:i.children("a").attr(N.attr("value"))},t._initRepeatView()})},_initEndNavigation:function(){var t,n=this,i=n.options.messages.end.patterns,r=n._value,o="";r.count?o="count":r.until&&(o="until"),t=z({dataSource:[{text:i.never,value:""},{text:i.after,value:"count"},{text:i.on,value:"until"}],value:o,ns:N.ns}),n._view.element.find(".k-recur-pattern").append(t).on(fe+n._namespace,".k-scheduler-navigation li",function(t){var i=e(this),o=null,a=null;t.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),n._initEndView(i.children("a").attr(N.attr("value"))),n._count?(o=n._count.value(),a=null):n._until&&(o=null,a=n._until.val?N.parseDate(n._until.val(),"yyyy-MM-dd"):n._until.value()),r.count=o,r.until=a})},_createView:function(t){var n=this,i=n.options.messages,r=i["repeat"===t?"repeatTitle":"endTitle"],o='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+i.cancel+"</a>"+i.headerTitle+'<a href="#" class="k-button k-scheduler-update">'+i.update+"</a></div>",a=n._pane.view().id;n._view=n._pane.append(o+L({headerTitle:r})),n._view.element.on(fe+n._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(t){t.preventDefault(),t.stopPropagation(),e(this).hasClass("k-scheduler-update")?(n.trigger("change"),n._defaultValue=e.extend({},n._value)):n._value=n._defaultValue;var r=n._value.freq;n._endButton.text(n._endText()),n._endFields.toggleClass("k-state-disabled",!r),n._repeatButton.text(i.frequencies[r||"never"]),n._pane.one("viewShow",function(){n._destroyView()}),n._pane.navigate(a,n.options.animations.right)}),n._container=n._view.element.find(".k-recur-view"),"repeat"===t?(n._initFrequency(),n._initRepeatView()):(n._initEndNavigation(),n._initEndView())},_destroyView:function(){this._view&&(this._view.destroy(),this._view.element.remove()),this._view=null},_initRepeatView:function(){var e=this,n=e._value.freq||"never",i={frequency:n,weekDayCheckBoxes:D,firstWeekDay:e.options.firstWeekDay,messages:e.options.messages[n]},r=F(i),o=e._container,a=e._value;return N.destroy(o),o.html(r),r?("weekly"!==n||a.weekDays||(a.weekDays=[{day:e.options.start.getDay(),offset:0}]),e._initInterval(),e._initMonthDay(),e._initWeekDays(),e._initWeekDay(),e._initMonth(),e._period(),t):(e._value={},t)},_initEndView:function(e){var n,i=this,r=i._value;e===t&&(r.count?e="count":r.until&&(e="until")),n={endPattern:e,messages:i.options.messages.end},N.destroy(i._container),i._container.html(B(n)),i._initCount(),i._initUntil()},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n.trigger("change")};o[0]&&(n._weekDayOffset=n._container.find(".k-recur-weekday-offset").html(n._options([{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}])).change(a),t=(t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}]).concat(e.map(N.culture().calendar.days.names,function(e,t){return{text:e,value:t}})),n._weekDay=o.html(n._options(t)).change(a).val(n.options.start.getDay()),n._weekDayView())},_initMonth:function(){var t,n=this,i=n._value,r=n.options.start,o=i.months||[r.getMonth()+1],a=n._container.find(".k-recur-month"),s=N.culture().calendar.months.names;a[0]&&(t=e.map(s,function(e,t){return{text:e,value:t+1}}),a.html(n._options(t)).change(function(){i.months=[+this.value]}),n._monthSelect=a,o&&a.val(o[0]))},_period:function(){var t,n,i,r=this,o=r._value,a=r._container,s=r.options.messages[o.freq],l=a.find(".k-repeat-rule"),c=a.find(".k-weekday-view"),u=a.find(".k-monthday-view");l[0]&&(t=o.weekDays?"weekday":"monthday",n=z({value:t,dataSource:[{text:s.dayOfMonth,value:"monthday"},{text:s.dayOfWeek,value:"weekday"}],ns:N.ns}),i=function(e){var t=r._weekDay.val(),n=r._weekDayOffset.val(),i=r._monthDay.value(),a=r._monthSelect?r._monthSelect.val():null;"monthday"===e?(o.weekDays=null,o.monthDays=i?[i]:i,o.months=a?[+a]:a,c.hide(),u.show()):(o.monthDays=null,o.months=a?[+a]:a,o.weekDays=[{offset:+n,day:+t}],c.show(),u.hide())},l.append(n).on(fe+r._namespace,".k-scheduler-navigation li",function(t){var n,r=e(this).addClass("k-state-selected");t.preventDefault(),r.siblings().removeClass("k-state-selected"),n=r.children("a").attr(N.attr("value")),i(n)}),i(t))},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until,o=r&&n>r?r:n;e._until=N.support.input.date?t.attr("min",N.toString(o,"yyyy-MM-dd")).val(N.toString(r||n,"yyyy-MM-dd")).on("change",function(){i.until=N.parseDate(this.value,"yyyy-MM-dd")}):t.kendoDatePicker({min:o,value:r||n,change:function(){i.until=this.value()}}).data("kendoDatePicker")},_options:function(e,t){var n=0,i="",r=e.length,o=this._optionTemplate;for(t&&(i+=o({value:"",text:t}));r>n;n++)i+=o(e[n]);return i}}),U.plugin(H)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return o(t,u(e)),t}var i=window.kendo,r=i.ui,o=i.date.setTime,a=r.SchedulerView,s=e.extend,l=e.proxy,c=i.date.getDate,u=i.date.getMilliseconds,d=i.date.MS_PER_DAY,h=i.date.MS_PER_MINUTE,p=".kendoTimelineView",f=i.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),g=i.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"),m=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=function(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t,n,r,o,a,s,l,c,u,d,h=new Date,p=this.options;if(this.datesHeader.find(".k-current-time").remove(),this._isInDateSlot({start:h,end:h}))for(!1===p.currentTimeMarker.useLocalTimezone&&(t=p.dataSource.options.schema.timezone,p.dataSource&&t&&(n=i.timezone.offset(h,t),h=i.timezone.convert(h,h.getTimezoneOffset(),n))),r=p.group&&"vertical"!=p.group.orientation?this.groups.length:1,o=0;r>o;o++){if(a=this.groups[o],s=i.date.toUtcTime(h),0===(l=a.timeSlotRanges(s,s+1)).length)return;l[0].collection.slotByStartDate(h)&&(c=e("<div class='k-current-time'></div>"),u=this.datesHeader,d=Math.round(l[0].innerRect(h,new Date(h.getTime()+1),!1).left),c.appendTo(u.find(".k-scheduler-header-wrap")).css({left:this._adjustLeftPosition(d),width:"1px",bottom:"1px",top:0}))}},_adjustLeftPosition:function(e){return this._isRtl&&(e-=this.content[0].scrollWidth-this.content[0].offsetWidth),e},_currentTime:function(){var e,t=this,n=t.options.currentTimeMarker;!1!==n&&void 0!==n.updateInterval&&(e=n.updateInterval,t._currentTimeMarkerUpdater(),t._currentTimeUpdateTimer=setInterval(l(this._currentTimeMarkerUpdater,t),e))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+p,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(i.attr("uid"))}),n.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+p,".k-scheduler-content td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:s({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+p,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(i.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this,n=0;i.support.mobileOS.android&&(n=5),!1!==t.options.editable.create&&(t._addUserEvents=new i.UserEvents(t.element,{threshold:n,filter:".k-scheduler-content td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:s({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new i.UserEvents(t.element,{threshold:n,filter:".k-event",tap:function(n){var r=e(n.target).closest(".k-event");r.hasClass("k-event-active")||t.trigger("edit",{uid:r.attr(i.attr("uid"))}),n.preventDefault()}}))},_slotByPosition:function(e,t){var n,r,o,a=this.content,s=a.offset();for(e-=s.left,t-=s.top,this._isRtl?(o=i.support.browser).mozilla?(e+=a[0].scrollWidth-a[0].offsetWidth,e+=a[0].scrollLeft):o.msie?(e-=a.scrollLeft(),e+=a[0].scrollWidth-a[0].offsetWidth):o.webkit&&(e+=a[0].scrollLeft):e+=a[0].scrollLeft,t+=a[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(n=this.groups[r].timeSlotByPosition(e,t))return n;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",date:i.date.today(),startTime:i.date.today(),endTime:i.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:f,dateHeaderTemplate:g,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=s({},i.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.majorTimeHeaderTemplate=i.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=i.template(e.dateHeaderTemplate,t),this.slotTemplate=i.template(e.slotTemplate,t),this.groupHeaderTemplate=i.template(e.groupHeaderTemplate,t)},_render:function(t){var n=this;t=t||[],n._dates=t,n._startDate=t[0],n._endDate=t[t.length-1||0],n._calculateSlotRanges(),n.createLayout(n._layout(t)),n._content(t),n._footer(),n._setContentWidth(),n.refreshLayout(),n.datesHeader.on("click"+p,".k-nav-day",function(t){var i=e(t.currentTarget).closest("th"),r=n._slotByPosition(i.offset().left,n.content.offset().top);n.trigger("navigate",{view:"timeline",date:r.startDate()})}),n.timesHeader.find("table tr:last").hide(),n.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content.width(),t=this.content.find("table"),n=100,i=t.find("tr:first").children().length*this.options.columnWidth;i>e&&(n=Math.ceil(i/e*100)),t.add(this.datesHeader.find("table")).css("width",n+"%")},_calculateSlotRanges:function(){var e,t,n,r,a=this._dates,s=this.startTime(),l=this.endTime();for(u(l)===u(i.date.getDate(l))&&(l=i.date.getDate(l),o(l,d-1)),l=u(l),s=u(s),e=[],t=0;a.length>t;t++)n=c(a[t]),o(n,s),r=c(a[t]),o(r,l),e.push({start:i.date.toUtcTime(n),end:i.date.toUtcTime(r)});this._slotRanges=e},_forTimeRange:function(e,t,i,r){var a,s,l,c,p,f,g,m,v,_,y,b,w,k,x;for(e=n(e),t=n(t),a=this,s=u(e),l=u(t),c=a.options.minorTickCount,f=(p=a.options.majorTick*h)/c||1,m=(g=new Date(+e)).getDate(),_=0,b="",y=d/f,s!=l&&(s>l&&(l+=d),y=(l-s)/f),y=Math.round(y);y>_;_++)k=0==(w=_%(p/f)),x=c,y%c!=0&&k&&c>y-(_+1)&&(x=y%c),b+=i(g,k,c-1>w,w===c-1,x),o(g,f,!1);return l&&(v=u(g),m<g.getDate()&&(v+=d),v>l&&(g=new Date(+t))),r&&(b+=r(g)),b},_layout:function(e){var t,n,i,r=[],o=[],a=this,s=[{text:a.options.messages.defaultRowText}],l=[];for(t=0;a.options.minorTickCount>t;t++)l.push({text:"",className:""});for(this._forTimeRange(a.startTime(),a.endTime(),function(e,t,n,i,o){var s,c=a.majorTimeHeaderTemplate;t&&(function e(t){var n,i=0;if(t.columns){for(n=0;t.columns.length>n;n++)i+=e(t.columns[n]);return t.colspan=i,i}return t.colspan=1,1}(s={text:c({date:e}),className:i?"k-slot-cell":"",columns:l.slice(0,o)}),r.push(s))}),n=0;e.length>n;n++)o.push({text:a.dateHeaderTemplate({date:e[n]}),className:"k-slot-cell",columns:r.slice(0)});return(i=this.groupedResources).length&&("vertical"===this._groupOrientation()?s=a._createRowsLayout(i,null,this.groupHeaderTemplate):o=a._createColumnsLayout(i,o,this.groupHeaderTemplate)),{columns:o,rows:s}},_footer:function(){var t,n,i,r=this.options;!1!==r.footer&&(t='<div class="k-header k-scheduler-footer">',(n=r.footer.command)&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+p,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_content:function(e){var t,n,r,o,a,s=this,l=s.options,c=s.startTime(),u=this.endTime(),d=1,h=1,p=e.length,f="",g=this.groupedResources,m=this.slotTemplate,v=!1;for(g.length&&((v="vertical"===s._groupOrientation())?h=s._groupCount():d=s._groupCount()),f+="<tbody>",t=function(t){var a,c="",u="";return i.date.isToday(e[o])&&(u+="k-today"),(i.date.getMilliseconds(t)<i.date.getMilliseconds(l.workDayStart)||i.date.getMilliseconds(t)>=i.date.getMilliseconds(l.workDayEnd)||!s._isWorkDay(e[o]))&&(u+=" k-nonwork-hour"),c+="<td"+(""!==u?' class="'+u+'"':"")+">",a=i.date.getDate(e[o]),i.date.setTime(a,i.date.getMilliseconds(t)),(c+=m({date:a,resources:function(e){return function(){return s._resourceBySlot({groupIndex:e})}}(v?n:r)}))+"</td>"},n=0;h>n;n++){for(f+="<tr>",r=0;d>r;r++)for(o=0,a=p;a>o;o++)f+=this._forTimeRange(c,u,t);f+="</tr>"}f+="</tbody>",this.content.find("table").append(f)},_groups:function(){var e,t,n,r,o=this._groupCount(),a=this._dates,s=a.length;for(this.groups=[],e=0;o>e;e++)t=this._addResourceView(e),n=a[0],r=a[a.length-1||0],t.addTimeSlotCollection(n,i.date.addDays(r,1));this._timeSlotGroups(o,s)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,d,h,p,f,g,m,v,_,y=this._timeSlotInterval(),b=this._isVerticallyGrouped(),w=this.content.find("tr"),k=w.length;for(w.attr("role","row"),b&&(k=Math.floor(k/e)),n=0;e>n;n++)for(i=0,r=this.groups[n],b&&(i=n),a=0,b||(a=n),c=(l=(s=w[i*k].children).length/(b?1:e))/t,d=0;t>d;d++)for(h=d*c+l*a,o=u(new Date(+this.startTime())),p=0;c>p;p++)f=s[p+h],g=r.getTimeSlotCollection(0),m=this._dates[d],_=(v=Date.UTC(m.getFullYear(),m.getMonth(),m.getDate())+o)+y,f.setAttribute("role","gridcell"),f.setAttribute("aria-selected",!1),g.addTimeSlot(f,v,_,!0),o+=y},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*h},nextDate:function(){return i.date.nextDay(this.endDate())},previousDate:function(){return i.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(e){var t,n,r,o,a;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),e=new i.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),t=[],this._eventsByResource(e,this.groupedResources,t),n=[],r=0,o=0;t.length>o;o++)a={groupIndex:o,maxRowCount:0,events:{}},n.push(a),this._renderEvents(t[o],o,a),a.maxRowCount>r&&(r=a.maxRowCount);this._setRowsHeight(n,t.length,r),this._positionEvents(n,t.length),this.trigger("activate")},_positionEvents:function(e,t){var n,i,r,o;for(n=0;t>n;n++)for(r in i=e[n].events)o=i[r],this._positionEvent(o)},_setRowsHeight:function(t,n,i){var r,o,a,s,l=this.options.eventHeight+2,c=this._getBottomRowOffset();for(n=this._isVerticallyGrouped()?n:1,r=0;n>r;r++)o=(l+2)*((this._isVerticallyGrouped()?t[r].maxRowCount:i)||1)+c,a=e(this.times.find("tr")[r]),s=e(this.content.find("tr")[r]),a.height(o),s.height(o);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,n=.5*this.options.eventHeight;return this._isMobile()?(e=30,t=60):(e=15,t=30),n>t?n=t:e>n&&(n=e),n},_positionEvent:function(e){var t,n,i,r=this.options.eventHeight+2,o=e.slotRange.innerRect(e.start,e.end,!1),a=this._adjustLeftPosition(o.left),s=o.right-o.left-2;0>s&&(s=0),this.options.eventMinWidth>s&&(i=(n=(t=e.slotRange.collection)._slots[t._slots.length-1]).offsetLeft+n.offsetWidth,a+(s=this.options.eventMinWidth)>i&&(s=i-o.left-2)),e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(r+2)+"px",left:a,width:s})},_refreshSlots:function(){for(var e=0;this.groups.length>e;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,n){var r,o,s,l,c=t[0];if(c)for(r=c.dataSource.view(),o=0;r.length>o;o++)s=this._resourceValue(c,r[o]),l=new i.data.Query(e).filter({field:c.field,operator:a.groupEqFilter(s)}).toArray(),t.length>1?this._eventsByResource(l,t.slice(1),n):n.push(l);else n.push(e)},_isInDateSlot:function(e){var t=e.start,n=e.end,r=c(this._startDate);return i.date.addDays(c(this._endDate),1)>t&&n>=r},_isInTimeSlot:function(e){var t,n=e._startTime||i.date.toUtcTime(e.start),r=e._endTime||i.date.toUtcTime(e.end),o=this._slotRanges;for(n===r&&(r+=1),t=0;o.length>t;t++)if(o[t].end>n&&r>o[t].start)return!0;return!1},_adjustEvent:function(e){var t=e.start,n=e.end,r=e._time("start"),a=e._time("end"),s=u(this.startTime()),l=u(this.endTime()),h=null,p=null,f=!1,g=!1;return e.isAllDay?(h=c(t),s>r&&(o(h,s),g=!0),p=c(n),l===u(c(this.endTime()))?p=i.date.addDays(p,1):(o(p,l),f=!0)):(l=0===l?d:l,s>r?(h=c(t),o(h,s),g=!0):r>l&&(h=c(t),h=i.date.addDays(h,1),o(h,s),g=!0),a>l?(p=c(n),o(p,l),f=!0):s>a&&(p=c(n),p=i.date.addDays(p,-1),o(p,l),f=!0)),{occurrence:e.clone({start:h||t,end:p||n,_startTime:h?i.date.toUtcTime(h):e._startTime,_endTime:p?i.date.toUtcTime(p):e._endTime,isAllDay:!1}),head:f,tail:g}},_renderEvents:function(e,t,n){var i,r,o,a,s,l,c,u,h,p;for(r=0,o=e.length;o>r;r++)i=e[r],this._isInDateSlot(i)&&(a=i.isAllDay||i.end.getTime()-i.start.getTime()>=d,s=this.content,(a||this._isInTimeSlot(i))&&(l=this._adjustEvent(i),(c=this.groups[t])._continuousEvents||(c._continuousEvents=[]),u=c.slotRanges(l.occurrence,!1)[0],this._isInTimeSlot(l.occurrence)&&((h=this._createEventElement(l.occurrence,i,u.head||l.head,u.tail||l.tail)).appendTo(s).css({top:0,height:this.options.eventHeight}),p={start:l.occurrence._startTime||l.occurrence.start,end:l.occurrence._endTime||l.occurrence.end,element:h,uid:i.uid,slotRange:u,rowIndex:0,offsetTop:0},n.events[i.uid]=p,this.addContinuousEvent(c,u,h,i.isAllDay),this._arrangeRows(p,u,n))))},addContinuousEvent:function(e,t,n,r){e._continuousEvents.push({element:n,isAllDay:r,uid:n.attr(i.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,n,r,o){var a,l,c=this.eventTemplate,u=this.options.editable,d=this._isMobile(),h=u&&!1!==u.destroy&&!d,p=u&&!1!==u.resize,f=n._time("start"),g=n._time("end"),m=n.start,v=n.end,_=this.eventResources(n);return n._startTime&&f!==i.date.getMilliseconds(n.start)&&(m=new Date(f),m=i.timezone.apply(m,"Etc/UTC")),n._endTime&&g!==i.date.getMilliseconds(n.end)&&(v=new Date(g),v=i.timezone.apply(v,"Etc/UTC")),a=s({},{ns:i.ns,resizable:p,showDelete:h,head:r,tail:o,singleDay:1==this._dates.length,resources:_,inverseColor:!(!_||!_[0])&&this._shouldInverseResourceColor(_[0])},n,{start:m,end:v}),l=e(c(a)),this.angular("compile",function(){return{elements:l,data:[{dataItem:a}]}}),l},_arrangeRows:function(e,t,n){var i,r,o,s,l,c,u=t.start.index,d=t.end.index,h=e.slotRange.innerRect(e.start,e.end,!1),p=h.right+this.options.eventMinWidth,f=function(e,t,n){var i,r,o;for(i=e.length-1;i>=0;i--)r=e[i].rectLeft,o=e[i].rectRight,(t>=r&&o>=t||r>=t&&n>=o||r>=t&&n>=r)&&(t>r&&(t=r),o>n&&(n=o));return function(e,t,n){var i,r,o=[];for(i=0;e.length>i;i++)r={rectLeft:e[i].rectLeft,rectRight:e[i].rectRight},(t>r.rectLeft&&r.rectRight>t||r.rectLeft>=t&&n>=r.rectRight)&&o.push(e[i]);return o}(e,t,n)}(t.events(),h.left,p);for(t.addEvent({slotIndex:u,start:u,end:d,rectLeft:h.left,rectRight:p,element:e.element,uid:e.uid}),f.push({start:u,end:d,uid:e.uid}),(i=a.createRows(f)).length>n.maxRowCount&&(n.maxRowCount=i.length),r=0,o=i.length;o>r;r++)for(l=0,c=(s=i[r].events).length;c>l;l++)n.events[s[l].uid].rowIndex=r},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){return this._adjustEvent(e.clone()).occurrence},_eventOptionsForMove:function(e){return e.isAllDay?{isAllDay:!1}:{}},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,n){var i,r,o,a,s,l,c,u,d,h,p=this.groups[t],f=e.clone({start:e.start,end:e.end}),g=f.duration();for(f.start=new Date(f.start.getTime()+n),f.end=new Date(+f.start+g),i=this._adjustEvent(f),r=p.slotRanges(i.occurrence,!1),this._removeMoveHint(),o=0;r.length>o;o++)s=(a=r[o]).start,(l=this._createEventElement(i.occurrence,i.occurrence,!1,!1)).addClass("k-event-drag-hint"),0>(u=(c=a.innerRect(i.occurrence.start,i.occurrence.end,this.options.snap)).right-c.left-2)&&(u=0),d={left:this._adjustLeftPosition(c.left),top:s.offsetTop,height:s.offsetHeight-2,width:u},l.css(d),this._moveHint=this._moveHint.add(l);h=this.content,this._moveHint.appendTo(h)},_updateResizeHint:function(e,t,n,r){var o,s,l,c,u,d,h,p,f,g=this.groups[t].ranges(n,r,!1,!1);for(this._removeResizeHint(),o=0;g.length>o;o++)l=(s=g[o]).startSlot(),(c=s.innerRect(n,r,!1)).top=l.offsetTop,u=c.right-c.left,d=l.offsetHeight,h=this._adjustLeftPosition(c.left),p=a.fn._createResizeHint.call(this,h,c.top,u,d),this._resizeHint=this._resizeHint.add(p);f=this.content,this._resizeHint.appendTo(f),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(i.toString(i.timezone.toLocalDate(n),"t")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(i.toString(i.timezone.toLocalDate(r),"t"))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,n,i,r){var o=t[0].start,a=t[t.length-1].end;n&&!r&&o.index===a.index&&o.collectionIndex===a.collectionIndex&&(e.backward=i)},_changeGroup:function(e,t){var n=this[t?"prevGroupSlot":"nextGroupSlot"](e.start,e.groupIndex,!1);return n&&(e.groupIndex+=t?-1:1),n},prevGroupSlot:function(e,t,n){var i=this.groups[t],r=i.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r:i._collection(0,n).last()},nextGroupSlot:function(e,t,n){var i=this.groups[t],r=i.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?r:i._collection(0,n).first()},_verticalSlots:function(e,t,n,i){var r=i?"leftSlot":"rightSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isVerticallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_horizontalSlots:function(e,t,n,i){var r=i?"upSlot":"downSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isHorizontallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_changeViewPeriod:function(e,t){var n,i=t?this.previousDate():this.nextDate(),r=e.start,a=e.end;return e.start=new Date(i),e.end=new Date(i),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0),n=a-r,t?(a=0===(a=u(this.endTime()))?d:a,o(e.start,a-n),o(e.end,a)):(r=u(this.startTime()),o(e.start,r),o(e.end,r+n)),e.events=[],!0},move:function(e,t,n){var r,o,a,s,l,c=!1,u=this.groups[e.groupIndex],d=i.keys,h=u.ranges(e.start,e.end,!1,!1);if(t===d.DOWN||t===d.UP)c=!0,a=t===d.UP,this._updateDirection(e,h,n,a,!0),s=this._verticalSlots(e,h,n,a);else if(!(t!==d.LEFT&&t!==d.RIGHT||(c=!0,a=t===d.LEFT,this._updateDirection(e,h,n,a,!1),s=this._horizontalSlots(e,h,n,a),s.startSlot&&s.endSlot||n||!this._changeViewPeriod(e,a,!1))))return c;return c&&(r=s.startSlot,o=s.endSlot,n?(l=e.backward)&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate()):r&&o&&(e.start=r.startDate(),e.end=o.endDate()),e.events=[]),c},destroy:function(){var e=this;e.element&&e.element.off(p),e.footer&&e.footer.remove(),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),a.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(!1!==e.options.editable.create&&e._addUserEvents.destroy(),!1!==e.options.editable.update&&e._editUserEvents.destroy())}});s(!0,r,{TimelineView:m,TimelineWeekView:m.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t=this.options.date,n=i.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),r=[];for(e=0;7>e;e++)r.push(n),n=i.date.nextDay(n);this._render(r)}}),TimelineWorkWeekView:m.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return i.date.dayOfWeek(i.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return i.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=i.date.dayOfWeek(e,this.options.workWeekStart,-1),n=i.date.dayOfWeek(t,this.options.workWeekEnd,1),r=[];n>=t;)r.push(t),t=i.date.nextDay(t);this._render(r)}}),TimelineMonthView:m.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var e,t,n=this.options.date,r=i.date.firstDayOfMonth(n),o=[];for(e=0,t=i.date.lastDayOfMonth(n).getDate();t>e;e++)o.push(r),r=i.date.nextDay(r);this._render(o)}})})}(window.kendo.jQuery),function(e,t){function n(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function i(e,t){var n=t.timezone;n&&(e[C.attr("timezone")]=n)}function r(e,t){var n,i=t.model.fields[t.field].validation;i&&(n=i.dateCompare)&&N(n)&&n.message&&(e[C.attr("dateCompare-msg")]=n.message)}function o(e,t,n,i){var r,o,a;for(o=0,a=(e=e||[]).length;a>o;o++)r=e[o],i?r.startTimezone||r.endTimezone?n?(r.start=C.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=C.timezone.convert(r.end,r.endTimezone||r.startTimezone,n),r.start=C.timezone[t](r.start,n),r.end=C.timezone[t](r.end,n)):(r.start=C.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=C.timezone[t](r.end,r.endTimezone||r.startTimezone)):n&&(r.start=C.timezone[t](r.start,n),r.end=C.timezone[t](r.end,n)):r.startTimezone||r.endTimezone?(r.start=C.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=C.timezone[t](r.end,r.endTimezone||r.startTimezone),n&&(r.start=C.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=C.timezone.convert(r.end,r.endTimezone||r.startTimezone,n))):n&&(r.start=C.timezone[t](r.start,n),r.end=C.timezone[t](r.end,n)),i&&delete r.uid;return e}function a(e,t){for(var n,i=e.length,r=0;i>r;r++)if((n=e[r]).uid===t)return n}function s(e,t,n){return n?C.timezone.convert(e,t,n):C.timezone.remove(e,t)}function l(t,n){var i,r,o=(t.fields||t)[n],a=["url","email","number","date","boolean"],s=o?o.validation:{},l=(function(t){(t=null!=t?t:"").type||e.type(t)}(o),C.attr("type")),c=e.inArray,u={};for(i in s)r=s[i],c(i,a)>=0?u[l]=i:C.isFunction(r)||(u[i]=N(r)?r.value||i:r),u[C.attr(i+"-msg")]=r.message;return u}function c(t,n){var i=l(n,t.field);return function(n){e(C.format('<select data-{0}bind="value:{1}">',C.ns,t.field)).appendTo(n).attr(i).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function u(t){var n=l(t.model,t.field);return function(t){e('<textarea name="description" class="k-textbox"/>').attr(n).appendTo(t)}}function d(e,t){var n,i=e.end.getTime()-e.start.getTime(),r=new Date(e.start.getTime());return C.date.setTime(r,t),n=new Date(r.getTime()),C.date.setTime(n,i,!0),{start:r,end:n}}var h,p,f,g,m,v,_,y,b,w,k,x,C=window.kendo,T=C.date,S=C.support.input,D=T.MS_PER_DAY,A=T.getDate,M=C.date.getMilliseconds,E=C.recurrence,I=C.keys,R=C.ui,P=R.Widget,L=R.DataBoundWidget,F="string",B=R.Popup,z=R.Calendar,H=C.data.DataSource,N=e.isPlainObject,O=e.extend,V=e.proxy,U=Object.prototype.toString,W=e.isArray,j=".kendoScheduler",q="click",G="change",$="cancel",Y="remove",Q="save",X="edit",K=/(?:value:start|value:end)(?:,|$)/,Z=A(new Date),J="recurrenceException",ee="Do you want to edit only this event occurrence or the whole series?",te=C.template('<li class="k-current-view" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>'),ne=C.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-refresh"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div>'),ie=C.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-refresh"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-current"><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li></ul></div>'),re=C.Class.extend({init:function(t,n){var i=t.timezone;this.reader=n,n.model&&(this.model=n.model),this.timezone=i,this.data=function(e,t){return function(n){return o(n=e(n),"apply",t),n||[]}}(e.proxy(this.data,this),i),this.serialize=function(e,t){return function(n){return n&&("[object Array]"===U.call(n)||n instanceof C.data.ObservableArray||(n=[n])),o(n,"remove",t,!0),(n=e(n))||[]}}(e.proxy(this.serialize,this),i)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),oe=C.data.Model.define({init:function(e){var t=this;C.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],n="_"+e+"Time";return this[n]?this[n]-C.date.toUtcTime(C.date.getDate(t)):M(t)},_date:function(e){var t="_"+e+"Time";return this[t]?this[t]-this._time(e):C.date.getDate(this[e])},clone:function(t,n){var i=this.uid,r=new this.constructor(e.extend({},this.toJSON(),t));return n||(r.uid=i),r},duration:function(){var e=this.end,t=this.start;return e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*C.date.MS_PER_MINUTE},expand:function(e,t,n){return E?E.expand(this,e,t,n):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this._startTime&&this.set("_startTime",C.date.toUtcTime(this.start)),this._endTime&&this.set("_endTime",C.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=C.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return(t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}))[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=C.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e._startTime,delete e._endTime,e},shouldSerialize:function(e){return C.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var n,i,r,o=this.isAllDay||!1;C.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=o&&(n=C.date.getDate(this.start),i=new Date(this.end),0===(r=C.date.getMilliseconds(i))&&t&&(r=D),this.set("start",n),!0===t?(C.date.setTime(i,-r),n>i&&(i=n)):C.date.setTime(i,D-r),this.set("end",i))},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,dateCompare:{value:function(e){var t,n,i,r,o,a,l,c,u,d,h,p;return!(e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),n=t.find("[name=start]:visible"),i=t.find("[name=end]:visible"),i[0]&&n[0]&&(a=C.widgetInstance(n,C.ui),l=C.widgetInstance(i,C.ui),c=t.data("kendoEditable"),u=c?c.options.model:null,a&&l?(r=a.value(),o=l.value()):(r=C.parseDate(n.val()),o=C.parseDate(i.val())),r&&o)))||(u&&(d=n.attr(C.attr("timezone")),h=u.startTimezone,p=u.endTimezone,h=h||p,p=p||h,h&&(r=s(r,h,d),o=s(o,p,d))),o>=r)}}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),ae=H.extend({init:function(e){H.fn.init.call(this,O(!0,{},{schema:{modelBase:oe,model:oe}},e)),this.reader=new re(this.options.schema,this.reader)},expand:function(e,t){var n=this.view(),i={};return e&&t&&(i={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t=new Date(t.getTime()+D-1)}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+D-1)},{field:"end",operator:"gte",value:e}]}]},n=new C.data.Query(function(e,t,n,i){for(var r=e.length,o=[],a=0;r>a;a++)o=o.concat(e[a].expand(t,n,i));return o}(n,e,t,this.reader.timezone)).filter(i).toArray()),n},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),H.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof oe)){var n=t;(t=this._createNewModel()).accept(n)}return(!this._pushCreated&&t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),H.fn.insert.call(this,e,t)}},pushCreate:function(e){this._pushCreated=!0,H.fn.pushCreate.call(this,e),this._pushCreated=!1},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),H.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),n=t.shift(),i=e.id;n;)n.recurrenceId===i&&H.fn.remove.call(this,n),n=t.shift();e.set(J,"")},_removeExceptionDate:function(e){var t,n;e.recurrenceId&&(t=this.get(e.recurrenceId))&&(n=e.start,t.set(J,t.recurrenceException.replace(E.toExceptionString(n,this.reader.timezone),"")))},_addExceptionDate:function(e){var t=e.start,n=this.reader.timezone,i=this.get(e.recurrenceId),r=i.recurrenceException||"";E.isException(r,t,n)||i.set(J,r+E.toExceptionString(t,n))}});ae.create=function(e){(W(e)||e instanceof C.data.ObservableArray)&&(e={data:e});var t=e||{},n=t.data;if(t.data=n,!(t instanceof ae)&&t instanceof C.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof ae?t:new ae(t)},O(!0,C.data,{SchedulerDataSource:ae,SchedulerDataReader:re,SchedulerEvent:oe}),h={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}},p={mobile:{dateRange:function(t,n){var o={name:n.field},a=S.date?"":C.attr("role")+'="datepicker" ',s=C.attr("role")+'="datetimepicker" ',l=n.model.isAllDay,c=C.attr("validate")+"='"+!l+"'",u=C.attr("validate")+"='"+l+"'";i(o,n),r(o,n),e('<input type="datetime-local" required '+C.attr("type")+'="date" '+s+C.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+c+"/>").attr(o).appendTo(t),e('<input type="date" required '+C.attr("type")+'="date" '+a+C.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+u+"/>").attr(o).appendTo(t),e("<span "+C.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,i){var r=n(i.model,i.messages.noTimezone);e('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">'+r+"</a>").click(i.click).appendTo(t)},timezone:function(t,n){e("<div "+C.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoMobileTimezoneEditor({optionLabel:n.noTimezone})},recurrence:function(t,n){e("<div "+C.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages,pane:n.pane,value:n.model[n.field]})},description:u,multipleResources:function(t,n){var i=l(n,t.field);return function(n){var r,o,a="",s=t.dataSource.view();for(r=0,o=s.length;o>r;r++)a+=C.format('<option value="{0}">{1}</option>',C.getter(t.dataValueField)(s[r]),C.getter(t.dataTextField)(s[r]));e(C.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',C.ns,t.field,a,t.valuePrimitive)).appendTo(n).attr(i)}},resources:c},desktop:{dateRange:function(t,n){var o={name:n.field},a=n.model.isAllDay,s=C.attr("validate")+"='"+!a+"' ",l=C.attr("validate")+"='"+a+"' ";i(o,n),r(o,n),e('<input type="text" required '+C.attr("type")+'="date" '+C.attr("role")+'="datetimepicker" '+C.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+s+"/>").attr(o).appendTo(t),e('<input type="text" required '+C.attr("type")+'="date" '+C.attr("role")+'="datepicker" '+C.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+l+"/>").attr(o).appendTo(t),e("<span "+C.attr("bind")+'="text: '+n.field+'Timezone"></span>').appendTo(t),"end"===n.field&&e("<span "+C.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+C.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,n){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+n.messages.timezoneEditorButton+"</a>").click(n.click).appendTo(t)},timezone:function(t,n){e("<div "+C.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoTimezoneEditor({optionLabel:n.noTimezone})},recurrence:function(t,n){e("<div "+C.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages})},description:u,multipleResources:function(t,n){var i=l(n,t.field);return function(n){e(C.format('<select data-{0}bind="value:{1}">',C.ns,t.field)).appendTo(n).attr(i).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}},resources:c}},f=C.Observable.extend({init:function(e,t){C.Observable.fn.init.call(this),this.element=e,this.options=O(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=V(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var n,i,r,o=this.container,a=this.editable.options.model.isAllDay,s=C.attr("bind");o.find("["+s+"*=end],["+s+"*=start]").each(function(){n=e(this),K.test(n.attr(s))&&(i=n.is("["+C.attr("role")+"=datetimepicker],[type*=datetime]"),r=a!==i,n.attr(C.attr("validate"),r))})}},fields:function(e,t){var n,i,r=this,o=r.options.messages,a=r.options.timezone,s=[{field:"title",title:o.editor.title},{field:"start",title:o.editor.start,editor:e.dateRange,timezone:a},{field:"end",title:o.editor.end,editor:e.dateRange,timezone:a},{field:"isAllDay",title:o.editor.allDayEvent}];C.timezone.windows_zones&&(s.push({field:"timezone",title:o.editor.timezone,editor:e.timezonePopUp,click:function(e){e.preventDefault(),r._initTimezoneEditor(t,this)},messages:o.editor,model:t}),s.push({field:"startTimezone",title:o.editor.startTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone}),s.push({field:"endTimezone",title:o.editor.endTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone})),t.recurrenceId||s.push({field:"recurrenceRule",title:o.editor.repeat,editor:e.recurrence,timezone:a,messages:o.recurrenceEditor,pane:this.pane}),"description"in t&&s.push({field:"description",title:o.editor.description,editor:e.description({model:t,field:"description"})});for(n=0;this.options.resources.length>n;n++)i=this.options.resources[n],s.push({field:i.field,title:i.title,editor:i.multiple?e.multipleResources(i,t):e.resources(i,t)});return s},end:function(){return this.editable.end()},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.messages,l=O({},C.Template,this.options.templateSettings),c=l.paramName,u=this.options.editable.template,d="";if(u)typeof u===F&&(u=window.unescape(u)),d+=C.template(u,l)(e);else for(i=0,r=t.length;r>i;i++)"startTimezone"===(o=t[i]).field&&(d+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',d+='<div class="k-edit-form-container">',d+='<div class="k-edit-label"></div>',d+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+s.editor.separateTimezones+"</label></div>"),d+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",!e.editable||e.editable(o.field)?(n.push(o),d+="<div "+C.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(a="#:",o.field?a+=(o=C.expr(o.field,c))+"==null?'':"+o:a+="''",a+="#",d+='<div class="k-edit-field">'+(a=C.template(a,l))(e)+"</div>"),"endTimezone"===o.field&&(d+=this._createEndTimezoneButton());return d},_createEndTimezoneButton:function(){return"</div></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),g=f.extend({init:function(){f.fn.init.apply(this,arguments),this.pane=C.mobile.ui.Pane.wrap(this.element),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view(),this._actionSheetButtonTemplate=C.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>'),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"}},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var i,r=this,o=r.pane,a=r.options.messages,s=r.timezoneView,l=r.container.find(".k-scheduler-timezones"),c=l.find(".k-timezone-toggle"),u=l.find(".k-edit-label:last").add(l.find(".k-edit-field:last")),d=function(e){if("startTimezone"===e.field){var n=t.startTimezone;c.prop("disabled",!n),n||(u.hide(),t.set("endTimezone",""),c.prop("checked",!1))}};r._startTimezone=t.startTimezone||"",r._endTimezone=t.endTimezone||"",s||(i='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+a.cancel+"</a>"+a.editor.timezoneTitle+'<a href="#" class="k-button k-scheduler-update">'+a.save+"</a></div></div>",this.timezoneView=s=o.append(i),s.contentElement().append(l.show()),s.element.on(q+j,".k-scheduler-cancel, .k-scheduler-update",function(i){var s,l;i.preventDefault(),i.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&r._revertTimezones(t),t.unbind("change",d),s=o.element.find("#edit").data("kendoMobileView"),l=n(t,a.editor.noTimezone),s.contentElement().find(".k-timezone-button").text(l),o.navigate(s,r.options.animations.right)}),c.click(function(){u.toggle(c.prop("checked")),t.set("endTimezone","")}),t.bind("change",d)),c.prop("checked",t.endTimezone).prop("disabled",!t.startTimezone),t.endTimezone?u.show():u.hide(),o.navigate(s,r.options.animations.left)},_createActionSheetButton:function(e){return e.template=this._actionSheetButtonTemplate,this.createButton(e)},showDialog:function(t){var n,i,r="",o='<ul><li class="km-actionsheet-title">'+t.title+"</li>",a=this.element.find(".k-event["+C.attr("uid")+"='"+t.model.uid+"']");for(this.container&&(a=this.container.find(".k-scheduler-delete"))[0]&&(r="phone"),n=0;t.buttons.length>n;n++)o+=this._createActionSheetButton(t.buttons[n]);(i=e(o+="</ul>").appendTo(this.pane.view().element).kendoMobileActionSheet({type:r,cancel:this.options.messages.cancel,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(n){var r=i.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(e(n.currentTarget));r>-1&&(i.close(),t.buttons[r].click())},popup:this._actionSheetPopupOptions}).data("kendoMobileActionSheet")).open(a)},editEvent:function(t){var n,i,r,o,a,s=this.pane,l="",c=this.options.messages,u=c.save,d=c.destroy,h=c.cancel,f=c.editor.editorTitle;return l+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" '+C.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+h+"</a>"+f+'<a href="#" class="k-button k-scheduler-update">'+u+"</a></div>",n=this.fields(p.mobile,t),i=this,r=[],l+=this._buildEditTemplate(t,n,r),!t.isNew()&&this.options.editable&&!1!==this.options.editable.destroy&&(l+='<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">'+d+"</a></div>"),l+="</div>",o=s.append(l),a=this.container=o.element,this.editable=a.kendoEditable({fields:r,model:t,clearContainer:!1,target:i.options.target,validateOnBlur:!0}).data("kendoEditable"),a.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),this.trigger("edit",{container:a,model:t})?this.trigger("cancel",{container:a,model:t}):(a.on(q+j,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete",function(n){var r,o;n.preventDefault(),n.stopPropagation(),(r=e(this)).hasClass("k-scheduler-edit")?s.navigate("#edit",i.options.animations.right):(o="cancel",r.hasClass("k-scheduler-update")?o="save":r.hasClass("k-scheduler-delete")&&(o="remove"),i.trigger(o,{container:a,model:t}))}),s.navigate(o,i.options.animations.left),t.bind("change",i.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(C.roleSelector("view")).not(this.view.element)},close:function(){var e,t,n,i;if(this.container){for(this.pane.navigate("",this.options.animations.right),n=0,i=(e=this._views()).length;i>n;n++)(t=e.eq(n).data("kendoMobileView"))&&t.purge();e.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind("change",this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),m=f.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var n,i,r,o=this,a=o.options.editable,s="<div "+C.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',l=o.options.messages,c=l.save,u=l.cancel,d=l.destroy,h=this.fields(p.desktop,t),f=[];return s+=this._buildEditTemplate(t,h,f),i=N(a)?a.window:{},s+='<div class="k-edit-buttons k-state-default">',s+=this.createButton({name:"update",text:c,attr:n})+this.createButton({name:"canceledit",text:u,attr:n}),t.isNew()||!1===a.destroy||(s+=this.createButton({name:"delete",text:d,attr:n})),s+="</div></div></div>",r=this.container=e(s).appendTo(o.element).eq(0).kendoWindow(O({modal:!0,resizable:!1,draggable:!0,title:l.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&o.trigger($,{container:r,model:t})&&e.preventDefault()}},i)),o.editable=r.kendoEditable({fields:f,model:t,clearContainer:!1,validateOnBlur:!0,target:o.options.target}).data("kendoEditable"),o.trigger(X,{container:r,model:t})?o.trigger($,{container:r,model:t}):(r.data("kendoWindow").center().open(),r.on(q+j,"a.k-scheduler-cancel",function(e){e.preventDefault(),e.stopPropagation(),o.trigger($,{container:r,model:t})}),r.on(q+j,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("save",{container:r,model:t})}),r.on(q+j,"a.k-scheduler-delete",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(Y,{container:r,model:t})}),C.cycleForm(r),t.bind("change",o.toggleDateValidationHandler)),o.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind("change",e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',(t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}))+"</div></div></div>"},showDialog:function(t){var n,i,r,o=C.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);for(o+='<div class="k-edit-buttons k-state-default">',n=0;t.buttons.length>n;n++)o+=this.createButton(t.buttons[n]);o+="</div></div></div>",i=this.element,this.popup&&this.popup.destroy(),(r=this.popup=e(o).appendTo(i).eq(0).on("click",".k-button",function(n){n.preventDefault(),r.close();var i=e(n.currentTarget).index();t.buttons[i].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),i.focus()}}).getKendoWindow()).center().open()},_initTimezoneEditor:function(e,t){var n,i=this,r=i.container.find(".k-scheduler-timezones"),o=r.find(".k-timezone-toggle"),a=r.find(".k-edit-label:last").add(r.find(".k-edit-field:last")),s=r.find(".k-scheduler-savetimezone"),l=r.find(".k-scheduler-canceltimezone"),c=i._timezonePopup,u=function(t){if("startTimezone"===t.field){var n=e.startTimezone;o.prop("disabled",!n),n||(a.hide(),e.set("endTimezone",""),o.prop("checked",!1))}};i._startTimezone=e.startTimezone,i._endTimezone=e.endTimezone,c||(i._timezonePopup=c=r.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:i.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(n){e.unbind("change",u),n.userTriggered&&i._revertTimezones(e),t&&t.focus()}}),o.click(function(){a.toggle(o.prop("checked")),e.set("endTimezone","")}),s.click(function(e){e.preventDefault(),n.close()}),l.click(function(t){t.preventDefault(),i._revertTimezones(e),n.close()}),e.bind("change",u)),o.prop("checked",e.endTimezone).prop("disabled",!e.startTimezone),e.endTimezone?a.show():a.hide(),(n=c.data("kendoWindow")).center().open()}}),v=L.extend({init:function(t,n){var i=this;P.fn.init.call(i,t,n),i.options.views&&i.options.views.length||(i.options.views=["day","week"]),i.resources=[],i._initModel(),i._wrapper(),i._views(),i._toolbar(),i._dataSource(),i._resources(),i._resizeHandler=function(){i.resize()},i.wrapper.on("mousedown"+j+" selectstart"+j,function(t){e(t.target).is(":kendoFocusable")||t.preventDefault()}),i.options.editable&&!1!==i.options.editable.resize&&i._resizable(),i._movable(),i._bindResize(),i.options.messages&&i.options.messages.recurrence&&(E.options=i.options.messages.recurrence),i._selectable(),i._ariaId=C.guid(),i._createEditor()},_bindResize:function(){e(window).on("resize"+j,this._resizeHandler)},_unbindResize:function(){e(window).off("resize"+j,this._resizeHandler)},dataItems:function(){var n,i,r,o,a,s=this.items(),l=this._data,c=e.map(s,function(t){return e(t).attr("data-uid")}),u={},d=c.length;for(n=0;d>n;n++)u[c[n]]=null;for(r=l.length,n=0;r>n;n++)u[(o=l[n]).uid]!==t&&(u[o.uid]=o);for(i in a=[],u)a.push(u[i]);return a},_isMobile:function(){var e=this.options;return!0===e.mobile&&C.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return!0===e.mobile&&C.support.mobileOS&&!C.support.mobileOS.tablet||"phone"===e.mobile},_groupsByResource:function(e,t,n,i,r){var o,a,s,l,c,u,d;if(n||(n=[]),o=e[0]){for(s=o.dataSource.view(),l=0,c=0;s.length>c;c++)u=C.getter(o.dataValueField)(s[c]),d=t+l+c,(a=this._groupsByResource(e.slice(1),d,n,u,o.field))[o.field]=u,l=a.groupIndex,r&&i&&(a[r]=i),1===e.length&&(a.groupIndex=t+c,n.push(a));return a}return{}},data:function(){return this._data},select:function(n){var i,r,o,a,s,l,c,u,d=this,h=d.view(),p=d._selection,f=h.groups;if(n===t)return o=h._selectedSlots,p?(p&&p.events&&(r=d._selectedEvents()),{start:p.start,end:p.end,events:r,slots:o,resources:h._resourceBySlot(p)}):[];if(!n)return d._selection=null,h.clearSelection(),t;if(e.isArray(n)&&(n={events:n.splice(0)}),n.resources){for(a in s=[],l=[],h.groupedResources&&d._groupsByResource(h.groupedResources,0,l),n.resources)s.push({field:a,operator:"eq",value:n.resources[a]});i=new C.data.Query(l).filter(s).toArray()}return n.events&&n.events.length?(d._selectEvents(n.events,i),d._select(),t):(f&&n.start&&n.end&&(c=A(h._startDate),C.date.addDays(A(h._endDate),1)>n.start&&n.end>=c&&(u=(i&&i.length?f[i[0].groupIndex]:f[0]).ranges(n.start,n.end,n.isAllDay,!1)).length&&(d._selection={start:C.timezone.toLocalDate(u[0].start.start),end:C.timezone.toLocalDate(u[u.length-1].end.end),groupIndex:u[0].start.groupIndex,index:u[0].start.index,isAllDay:u[0].start.isDaySlot,events:[]},d._select())),t)},_selectEvents:function(e,t){var n,i,r,o,a,s,l,c,u=this,d=u.view(),h=d.groups,p=e.length,f=t&&t.length;for(n=0;p>n;n++)if(h&&f){for(r=[],o=(i=h[t[0].groupIndex]).timeSlotCollectionCount(),a=i.daySlotCollectionCount(),s=0;o>s;s++)r=r.concat(i.getTimeSlotCollection(s).events());for(l=0;a>l;l++)r=r.concat(i.getDaySlotCollection(l).events());(r=new C.data.Query(r).filter({field:"element[0].getAttribute('data-uid')",operator:"eq",value:e[n]}).toArray())[0]&&u._createSelection(r[0].element)}else(c=d.element.find(C.format(".k-event[data-uid={0}], .k-task[data-uid={0}]",e[n]))).length&&u._createSelection(c[0])},_selectable:function(){var t,n=this,i=n.wrapper,r=C.support.mobileOS?"touchend":"mousedown";n.options.selectable&&(n._tabindex(),i.on(r+j,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var t=e.which,r=e.button,o=C.support.browser,a=t&&3===t||r&&2==r;C.support.mobileOS&&e.isDefaultPrevented()||(a||n._createSelection(e.currentTarget),i.focus(),o.msie&&9>o.version&&setTimeout(function(){i.focus()}))}),t=e.proxy(n._mouseMove,n),i.on("mousedown"+j,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var n=e.which,r=e.button;n&&3===n||r&&2==r||i.on("mousemove"+j,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("mouseup"+j+" mouseleave"+j,function(){i.off("mousemove"+j,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("focus"+j,function(){n._selection||n._createSelection(n.wrapper.find(".k-scheduler-content").find("td:first")),n._select()}),i.on("focusout"+j,function(){n.view().clearSelection(),n._ctrlKey=n._shiftKey=!1}),i.on("keydown"+j,V(n._keydown,n)),i.on("keyup"+j,function(e){n._ctrlKey=e.ctrlKey,n._shiftKey=e.shiftKey}))},_select:function(){var t,n,i,r,o,a=this,s=a.view(),l=a.wrapper,c=s.current(),u=a._selection;if(c&&(c.removeAttribute("id"),c.removeAttribute("aria-label"),l.removeAttr("aria-activedescendant")),s.select(u),(c=s.current())&&a._old!==c){if(t=e(c).data("uid"),a._old&&t&&t===e(a._old).data("uid"))return;i=u,r=a._selectedEvents(),o=s._selectedSlots,r[0]?(i=r[0]||u,n=C.format(a.options.messages.ariaEventLabel,i.title,i.start,i.start)):n=C.format(a.options.messages.ariaSlotLabel,i.start,i.end),c.setAttribute("id",a._ariaId),c.setAttribute("aria-label",n),l.attr("aria-activedescendant",a._ariaId),a._old=c,a.trigger("change",{start:u.start,end:u.end,events:r,slots:o,resources:s._resourceBySlot(u)})}},_selectedEvents:function(){for(var e,t=this._selection.events,n=t.length,i=0,r=[];n>i;i++)(e=this.occurrenceByUid(t[i]))&&r.push(e);return r},_mouseMove:function(t){var n=this;clearTimeout(n._moveTimer),n._moveTimer=setTimeout(function(){var i,r,o,a=n.view(),s=n._selection;s&&(i=a.selectionByElement(e(t.currentTarget)))&&s.groupIndex===i.groupIndex&&(r=i.startDate(),o=i.endDate(),r>=s.end?s.backward=!1:s.start>=o&&(s.backward=!0),s.backward?s.start=r:s.end=o,n._select())},5)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_keydown:function(t){var n=this,i=t.keyCode,r=n.view(),o=r.options.editable,a=n._selection,s=t.shiftKey;n._ctrlKey=t.ctrlKey,n._shiftKey=t.shiftKey,i===I.TAB?r.moveToEvent(a,s)&&(n._select(),t.preventDefault()):o&&i===I.ENTER?a.events.length?!1!==o.update&&n.editEvent(a.events[0]):!1!==o.create&&(a.isAllDay&&(a=e.extend({},a,{end:C.date.addDays(a.end,-1)})),n.addEvent(O({},a,r._resourceBySlot(a)))):i===I.DELETE&&!1!==o&&!1!==o.destroy?n.removeEvent(a.events[0]):i>=49&&57>=i?n.view(n._viewByIndex(i-49)):r.move(a,i,s)&&(r.inRange(a)?n._select():n.date(a.start),t.preventDefault()),n._adjustSelectedDate()},_createSelection:function(t){var n,i,r;this._selection&&(this._ctrlKey||this._shiftKey)||(this._selection={events:[],groupIndex:0}),t=e(t),r=this._selection,t.is(".k-event")&&(n=t.attr(C.attr("uid"))),(i=this.view().selectionByElement(t))&&(r.groupIndex=i.groupIndex||0),n&&(i=a(this._data,n)),i&&i.uid&&(n=[i.uid]),this._updateSelection(i,n),this._adjustSelectedDate()},_updateSelection:function(e,t){var n,i,r=this._selection;e&&r&&(n=this.view(),e.uid&&(e=n._updateEventForSelection(e)),this._shiftKey&&r.start&&r.end?(i=r.end>e.end,r.end=e.endDate?e.endDate():e.end,i&&n._timeSlotInterval&&C.date.setTime(r.end,-n._timeSlotInterval())):(r.start=e.startDate?e.startDate():e.start,r.end=e.endDate?e.endDate():e.end),r.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,r.index=e.index,r.events=this._ctrlKey?r.events.concat(t||[]):t||[])},options:{name:"Scheduler",date:Z,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editable:{confirmation:"Are you sure you want to delete this event?"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],direction:"horizontal"},views:[],selectable:!1},events:[Y,X,$,Q,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var t=this;P.fn.destroy.call(t),t.dataSource&&(t.dataSource.unbind(G,t._refreshHandler),t.dataSource.unbind("progress",t._progressHandler),t.dataSource.unbind("error",t._errorHandler)),t.calendar&&(t.calendar.destroy(),t.popup.destroy()),t.view()&&t.view().destroy(),t._editor&&t._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t.element.add(t.wrapper).add(t.toolbar).add(t.popup).off(j),clearTimeout(t._moveTimer),t._model=null,t.toolbar=null,t.element=null,e(window).off("resize"+j,t._resizeHandler),C.destroy(t.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.find(".k-scheduler-content").children(".k-event, .k-task")},_movable:function(){var n,i,r,o,a,s,l,c=this,u=0,h=c._isMobile(),p=c.options.editable&&!1!==c.options.editable.move,f=c.options.editable&&!1!==c.options.editable.resize;(p||f&&h)&&(h&&C.support.mobileOS.android&&(u=5),c._moveDraggable=new C.ui.Draggable(c.element,{distance:u,filter:".k-event",ignore:".k-resize-handle",holdToDrag:h}),p&&c._moveDraggable.bind("dragstart",function(e){var o=c.view(),u=e.currentTarget;return o.options.editable&&!1!==o.options.editable.move?h&&!u.hasClass("k-event-active")?(c.element.find(".k-event-active").removeClass("k-event-active"),e.preventDefault(),t):(a=c.occurrenceByUid(u.attr(C.attr("uid"))),(s=a.clone()).update(o._eventOptionsForMove(s)),n=o._slotByPosition(e.x.startLocation,e.y.startLocation),r=n.startOffset(e.x.startLocation,e.y.startLocation,c.options.snap),i=n,l=n,(!n||c.trigger("moveStart",{event:a}))&&e.preventDefault(),t):(e.preventDefault(),t)}).bind("drag",function(e){var t,l,u=c.view(),h=u._slotByPosition(e.x.location,e.y.location);h&&(o=h.startOffset(e.x.location,e.y.location,c.options.snap),h.isDaySlot!==n.isDaySlot?(n=u._slotByPosition(e.x.location,e.y.location),r=n.startOffset(e.x.location,e.y.location,c.options.snap),t=o-r,s.isAllDay=h.isDaySlot,s.start=C.timezone.toLocalDate(r),s.end=C.timezone.toLocalDate(o),u._updateMoveHint(s,h.groupIndex,t),l={start:s.start,end:s.end}):(t=o-r,u._updateMoveHint(s,h.groupIndex,t),l=d(s,t)),c.trigger("move",{event:a,slot:{element:h.element,start:h.startDate(),end:h.endDate(),isDaySlot:h.isDaySlot},resources:u._resourceBySlot(h),start:l.start,end:l.end})?u._updateMoveHint(s,h.groupIndex,t):i=h)}).bind("dragend",function(t){var u,h,p,f,g,m,v;c.view()._removeMoveHint(),h=(u=d(s,o-r)).start,p=u.end,f=c.view()._resourceBySlot(i),g=c.view()._resourceBySlot(n),c.trigger("moveEnd",{event:a,slot:{element:i.element,start:i.startDate(),end:i.endDate()},start:h,end:p,resources:f})||a.start.getTime()===h.getTime()&&a.end.getTime()===p.getTime()&&l.isDaySlot===i.isDaySlot&&C.stringify(f)===C.stringify(g)||(m=c.view()._eventOptionsForMove(a),v=l.isDaySlot!==i.isDaySlot?i.isDaySlot?e.extend({start:i.startDate(),end:i.startDate(),isAllDay:i.isDaySlot},m,f):e.extend({isAllDay:i.isDaySlot,start:h,end:p},m,f):e.extend({isAllDay:a.isAllDay,start:h,end:p},m,f),c._updateEvent(null,a,v)),t.currentTarget.removeClass("k-event-active"),this.cancelHold()}).bind("dragcancel",function(){c.view()._removeMoveHint(),this.cancelHold()}),h&&(c._moveDraggable.bind("hold",function(e){c.element.find(".k-scheduler-monthview").length&&e.preventDefault(),c.element.find(".k-event-active").removeClass("k-event-active"),e.currentTarget.addClass("k-event-active")}),c._moveDraggable.userEvents.bind("press",function(e){e.preventDefault()})))},_resizable:function(){function t(e){var t,n={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(t in n)if(e.hasClass(t))return n[t]}var n,i,r,o,a,s=this,l=0;s._isMobile()&&C.support.mobileOS.android&&(l=5),s._resizeDraggable=new C.ui.Draggable(s.element,{distance:l,filter:".k-resize-handle",dragstart:function(t){var l=e(t.currentTarget).closest(".k-event").attr(C.attr("uid")),c=s.view();r=s.occurrenceByUid(l),o=r.clone(),c._updateEventForResize(o),a=c._slotByPosition(t.x.startLocation,t.y.startLocation),s.trigger("resizeStart",{event:r})&&t.preventDefault(),n=C.date.toUtcTime(o.start),i=C.date.toUtcTime(o.end)},drag:function(l){var c,u,d,h,p;a&&(c=t(e(l.currentTarget)),(d=(u=s.view())._slotByPosition(l.x.location,l.y.location))&&a.groupIndex==d.groupIndex&&(a=d,h=n,p=i,"south"==c?!a.isDaySlot&&a.end-C.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap)):"north"==c?!a.isDaySlot&&C.date.toUtcTime(o.end)-a.start>=u._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap)):"east"==c?a.isDaySlot&&C.date.toUtcTime(C.date.getDate(a.endDate()))>=C.date.toUtcTime(C.date.getDate(o.start))?i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&a.end-C.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(i=a.endOffset(l.x.location,l.y.location,s.options.snap)):"west"==c&&(a.isDaySlot&&C.date.toUtcTime(C.date.getDate(o.end))>=C.date.toUtcTime(C.date.getDate(a.startDate()))?n=a.startOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&C.date.toUtcTime(o.end)-a.start>=u._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap))),s.trigger("resize",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:C.timezone.toLocalDate(n),end:C.timezone.toLocalDate(i),resources:u._resourceBySlot(a)})?(n=h,i=p):u._updateResizeHint(o,a.groupIndex,n,i)))},dragend:function(l){var c=e(l.currentTarget),u=new Date(o.start.getTime()),d=new Date(o.end.getTime()),h=t(c);s.view()._removeResizeHint(),"south"==h?d=C.timezone.toLocalDate(i):"north"==h?u=C.timezone.toLocalDate(n):"east"==h?d=a.isDaySlot?C.date.getDate(C.timezone.toLocalDate(i)):C.timezone.toLocalDate(i):"west"==h&&(a.isDaySlot?((u=new Date(C.timezone.toLocalDate(n))).setHours(0),u.setMinutes(0)):u=C.timezone.toLocalDate(n)),!s.trigger("resizeEnd",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:u,end:d,resources:s.view()._resourceBySlot(a)})&&d.getTime()>=u.getTime()&&(o.start.getTime()!=u.getTime()||o.end.getTime()!=d.getTime())&&(s.view()._updateEventForResize(r),s._updateEvent(h,r,{start:u,end:d})),a=null,r=null},dragcancel:function(){s.view()._removeResizeHint(),a=null,r=null}})},_updateEvent:function(e,t,n){var i,r=this,o=function(e,t){try{r._preventRefresh=!0,e.update(n),r._convertDates(e)}finally{r._preventRefresh=!1}r.trigger(Q,{event:e})||(t&&t(),r._updateSelection(e),r.dataSource.sync())},a=function(e){return e.recurrenceRule?r.dataSource.getByUid(e.uid):r.dataSource.get(e.recurrenceId)};t.recurrenceRule||t.isOccurrence()?(i=r.options.messages.recurrenceMessages,r._showRecurringDialog(t,function(){var e=a(t),n=e.toOccurrence({start:t.start,end:t.end});o(r.dataSource.add(n),function(){r._convertDates(e)})},function(){var i,s,l=a(t);("south"==e||"north"==e)&&(n.start&&(i=C.date.getDate(l.start),C.date.setTime(i,M(n.start)),n.start=i),n.end&&(s=C.date.getDate(l.end),C.date.setTime(s,M(n.end)),n.end=s)),r.dataSource._removeExceptions(l),o(l)},{title:i.editWindowTitle,text:i.editRecurring?i.editRecurring:ee,occurrenceText:i.editWindowOccurrence,seriesText:i.editWindowSeries})):o(r.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+C.attr("uid")+"]"),this.dataSource.getByUid(t.attr(C.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t){var n,i,r,o,a,s=this.options.editable;!0===s||!1!==s.confirmation?(i=(n=this.options.messages).deleteWindowTitle,r=typeof s.confirmation===F?s.confirmation:n.editable.confirmation,this._isEditorOpened()&&t.isRecurring()&&(i=(o=this.options.messages.recurrenceMessages).deleteWindowTitle,r=t.isException()?o.deleteRecurringConfirmation?o.deleteRecurringConfirmation:"Are you sure you want to delete this event occurrence?":o.deleteSeriesConfirmation?o.deleteSeriesConfirmation:"Are you sure you want to delete the whole series?"),a=[{name:"destroy",text:n.destroy,click:function(){e()}}],this._isMobile()&&C.mobile.ui.Pane||a.push({name:"canceledit",text:n.cancel,click:function(){e(!0)}}),this._unbindResize(),this.showDialog({model:t,text:r,title:i,buttons:a}),this._bindResize()):e()},addEvent:function(e){var t,n=this._editor.editable,i=this.dataSource;e=e||{},!this.trigger("add",{event:e})&&(n&&n.end()||!n)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),(t=i.add(e))&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e,t,n,i=this._editor;i&&(e=i.editable,t=i.container,n=this._modelForContainer(t),t&&e&&e.end()&&!this.trigger(Q,{container:t,event:n})&&(n.isRecurrenceHead()&&this.dataSource._removeExceptions(n),n.dirty||n.isOccurrence()||this._convertDates(n,"remove"),this.dataSource.sync()))},cancelEvent:function(){var e,t=this._editor,n=t.container;n&&((e=this._modelForContainer(n))&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._unbindResize(),this._createPopupEditor(e),this._bindResize()},_editRecurringDialog:function(e){var t=this,n=t.options.messages.recurrenceMessages;t._showRecurringDialog(e,function(){e.isException()?t._editEvent(e):t.addEvent(e)},function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},{title:n.editWindowTitle,text:n.editRecurring?n.editRecurring:ee,occurrenceText:n.editWindowOccurrence,seriesText:n.editWindowSeries})},_showRecurringDialog:function(e,t,n,i){var r=this.options.editable,o=N(r)?r.editRecurringMode:"dialog";"series"===o?n():"occurrence"===o?t():(this._unbindResize(),this.showDialog({model:e,title:i.title,text:i.text,buttons:[{text:i.occurrenceText,click:t},{text:i.seriesText,click:n}]}),this._bindResize())},_createButton:function(e){var t=e.template||'<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',n=typeof e===F?e:e.name||e.text,i={className:"k-scheduler-"+(n||"").replace(/\s/g,""),text:n,attr:""};if(!(n||N(e)&&e.template))throw Error("Custom commands should have name specified");return N(e)?(e.className&&(e.className+=" "+i.className),"edit"===n&&N(e.text)&&((e=O(!0,{},e)).text=e.text.edit),i=O(!0,i,h[n],e)):i=O(!0,i,h[n]),C.template(t)(i)},_convertDates:function(e,t){var n=this.dataSource.reader.timezone,i=e.startTimezone,r=e.endTimezone,o=e.start,a=e.start;t=t||"apply",i=i||r,r=r||i,i&&(n?"apply"===t?(o=C.timezone.convert(e.start,n,i),a=C.timezone.convert(e.end,n,r)):(o=C.timezone.convert(e.start,i,n),a=C.timezone.convert(e.end,r,n)):(o=C.timezone[t](e.start,i),a=C.timezone[t](e.end,r)),e._set("start",o),e._set("end",a))},_createEditor:function(){var e,n=this;(e=n._editor=this._isMobile()&&C.mobile.ui.Pane?new g(this.wrapper,O({},this.options,{target:this,timezone:n.dataSource.reader.timezone,resources:n.resources,createButton:V(this._createButton,this)})):new m(this.wrapper,O({},this.options,{target:this,createButton:V(this._createButton,this),timezone:n.dataSource.reader.timezone,resources:n.resources}))).bind("cancel",function(e){return n.trigger("cancel",{container:e.container,event:e.model})?(e.preventDefault(),t):(n.cancelEvent(),n.focus(),t)}),e.bind("edit",function(e){n.trigger(X,{container:e.container,event:e.model})&&e.preventDefault()}),e.bind("save",function(){n.saveEvent()}),e.bind("remove",function(e){n.removeEvent(e.model)})},_createPopupEditor:function(e){var t=this._editor;(!e.isNew()||e.isOccurrence())&&(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,n="string"==typeof e?t.occurrenceByUid(e):e;n&&(n.isRecurring()?t._deleteRecurringDialog(n):t._confirmation(function(e){e||t._removeEvent(n)},n))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=a(this._data,e)),t},occurrencesInRange:function(e,t){return new C.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(Y,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t,n,i,r,o,a=this,s=e,l=a.options.editable,c=function(){var e=s.recurrenceId?s:s.toOccurrence(),t=a.dataSource.get(e.recurrenceId);a._convertDates(t),a._removeEvent(e)},u=function(){s.recurrenceId&&(s=a.dataSource.get(s.recurrenceId)),a._removeEvent(s)};("dialog"!=(N(l)?l.editRecurringMode:"dialog")||a._isEditorOpened())&&(t=function(){a._confirmation(function(e){e||c()},s)},n=function(){a._confirmation(function(e){e||u()},s)}),i=n||u,r=t||c,a._isEditorOpened()?e.isException()?r():i():(o=a.options.messages.recurrenceMessages,a._showRecurringDialog(e,r,i,{title:o.deleteWindowTitle,text:o.deleteRecurring?o.deleteRecurring:"Do you want to delete only this event occurrence or the whole series?",occurrenceText:o.deleteWindowOccurrence,seriesText:o.deleteWindowSeries}))},_isEditorOpened:function(){return!!this._editor.container},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}}),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(Y,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(Y,t._viewRemoveHandler),t._viewAddHandler&&e.unbind("add",t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind("add",this._viewAddHandler),t._viewEditHandler&&e.unbind(X,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(X,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){var n,i;e.view&&(i=(n="isWorkDay"in e)?"changeWorkDay":"changeView",t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:i,date:e.date})||(n&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date)))},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){t._selection&&(this.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t,n,i=this;e&&i.views[e]&&(i._selectedView&&i._unbindView(i._selectedView),i._selectedView=i._renderView(e),i._selectedViewName=e,i._viewsCount>1&&(t=te({views:i.views,view:e,ns:C.ns}),(n=i.toolbar.find(".k-scheduler-views li:first-child")).is(".k-current-view")?n.replaceWith(t):i.toolbar.find(".k-scheduler-views").prepend(t),i.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected")))},view:function(e){var n=this;return e?(n._selectView(e),n.rebind(),t):n._selectedView},viewName:function(){return this.view().name},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),this._model.set("formattedShortDate",t.shortDateForTitle()),t},resize:function(e){var t=this.getSize(),n=this._size,i=this.view();i&&i.groups&&(e||!n||t.width!==n.width||t.height!==n.height)&&(this.refresh({action:"resize"}),this._size=t)},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,n=t.start;n&&!C.date.isInDateRange(e,A(n),A(t.end))&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())},_initializeView:function(e){var t,n,i=this.views[e];if(i){if(t=N(i),typeof(n=i.type)===F&&(n=C.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,function(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}(O(!0,{},this.options,t?i:{},{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode})))}return i},_views:function(){var e,t,n,i,r,o,a,s,l=this.options.views;for(this.views={},this._viewsCount=0,o=0,a=l.length;a>o;o++)s=!1,e=l[o],(i=N(e))?typeof(r=e.type?e.type:e)!==F&&(r=e.title,s=!0):r=e,(t=_[r])&&!s&&(e.type=t.type,t.title=this.options.messages.views[r],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=O({title:r},t,i?e:{}),r&&(this.views[r]=e,this._viewsCount++,(!n||e.selected)&&(n=r));n&&(this._selectedViewName=n)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,n=t.dataSource;n=W(n)?{data:n}:n,!t.timezone||n instanceof ae?n instanceof ae&&(t.timezone=n.options.schema?n.options.schema.timezone:""):n=O(!0,n,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(G,e._refreshHandler).unbind("progress",e._progressHandler).unbind("error",e._errorHandler):(e._refreshHandler=V(e.refresh,e),e._progressHandler=V(e._requestStart,e),e._errorHandler=V(e._error,e)),e.dataSource=C.data.SchedulerDataSource.create(n).bind(G,e._refreshHandler).bind("progress",e._progressHandler).bind("error",e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");C.ui.progress(t,e)},_resources:function(){var t,n,i,r,o,a=this,s=a.options.resources;for(t=0;s.length>t;t++){if(i=(n=s[t]).field,r=n.dataSource,!i||!r)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');a.resources.push({field:i,name:n.name||i,title:n.title||i,dataTextField:n.dataTextField||"text",dataValueField:n.dataValueField||"value",dataColorField:n.dataColorField||"color",valuePrimitive:null==n.valuePrimitive||n.valuePrimitive,multiple:n.multiple||!1,dataSource:C.data.DataSource.create(r)})}o=e.map(a.resources,function(e){return e.dataSource.fetch()}),e.when.apply(null,o).then(function(){a.options.autoBind?a.view(a._selectedViewName):a._selectView(a._selectedViewName)})},_initModel:function(){var e=this;e._model=C.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options,n=t.height,i=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),e._isMobilePhoneView()&&e.wrapper.addClass("k-scheduler-phone"),n&&e.wrapper.height(n),i&&e.wrapper.width(i)},date:function(e){return null!=e&&A(e)>=A(this.options.min)&&A(e)<=A(this.options.max)&&this._model.set("selectedDate",e),A(this._model.get("selectedDate"))},_toolbar:function(){var n,i,r=this,o=r.options,a=[];o.toolbar&&(a=e.isArray(o.toolbar)?o.toolbar:[o.toolbar]),n=this._isMobilePhoneView()?ie:ne,i=e(n({messages:o.messages,pdf:e.grep(a,function(e){return"pdf"==e||"pdf"==e.name}).length>0,ns:C.ns,views:r.views,viewsCount:r._viewsCount})),r.wrapper.append(i),r.toolbar=i,C.bind(r.toolbar,r._model),i.on(q+j,".k-pdf",function(e){e.preventDefault(),r.saveAsPDF()}),i.on(q+j,".k-scheduler-navigation li",function(n){var i=e(this),o=new Date(r.date()),a="";if(n.preventDefault(),i.hasClass("k-nav-today"))a="today",o=new Date;else if(i.hasClass("k-nav-next"))a="next",o=r.view().nextDate();else if(i.hasClass("k-nav-prev"))a="previous",o=r.view().previousDate();else if(i.hasClass("k-nav-current")&&!r._isMobilePhoneView())return r._showCalendar(),t;r.trigger("navigate",{view:r._selectedViewName,action:a,date:o})||r.date(o)}),i.on(q+j,".k-scheduler-views li, .k-scheduler-refresh",function(t){t.preventDefault();var n=e(this).attr(C.attr("name"));r.trigger("navigate",{view:n,action:"changeView",date:r.date()})||(r.view(n),r.element.find(".k-state-expanded").removeClass("k-state-expanded"))}),i.on(q+j,".k-scheduler-views li.k-current-view",function(){r.element.find(".k-scheduler-views").toggleClass("k-state-expanded")}),i.find("li").hover(function(){e(this).addClass("k-state-hover")},function(){e(this).removeClass("k-state-hover")})},_showCalendar:function(){var t=this,n=t.toolbar.find(".k-nav-current"),i=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new B(i,{anchor:n,activate:function(){t.calendar||(t.calendar=new z(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})||(t.date(e),t.popup.close())},min:t.options.min,max:t.options.max})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},refresh:function(e){var t=this,n=this.view();this._progress(!1),this.angular("cleanup",function(){return{elements:t.items()}}),e=e||{},n&&(e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(n.startDate(),n.endDate()),n.render(this._data),this.trigger("dataBound")))},slotByPosition:function(e,t){var n,i=this.view();return i._slotByPosition&&(n=i._slotByPosition(e,t))?{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}:null},slotByElement:function(t){var n=e(t).offset();return this.slotByPosition(n.left,n.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),_={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}},R.plugin(v),C.PDFMixin&&(C.PDFMixin.extend(v.prototype),y="k-scheduler-pdf-export",v.fn._drawPDF=function(t){var n,i,r=this.wrapper,o=r[0].style.cssText;return r.css({width:r.width(),height:r.height()}),r.addClass(y),this.resize(!0),n=this,i=new e.Deferred,this._drawPDFShadow().done(function(e){var n={page:e,pageNumber:1,progress:1,totalPages:1};t.notify(n),i.resolve(n.page)}).fail(function(e){i.reject(e)}).always(function(){r[0].style.cssText=o,r.removeClass(y),n.resize(!0)}),i}),b=P.extend({init:function(e,t){var n=this,i=C.timezone.windows_zones;if(!i||!C.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");P.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new C.data.Query(i),n._zoneTitleId=C.guid(),n._zoneTitlePicker(),n._zonePicker(),n._zoneTitle.bind("cascade",function(){this.value()||n._zone.wrapper.hide()}),n._zone.bind("cascade",function(){n._value=this.value(),n.trigger("change")}),n.value(n.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=this,n=e('<input id="'+t._zoneTitleId+'"/>').appendTo(t.wrapper);t._zoneTitle=new C.ui.DropDownList(n,{dataSource:C.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel})},_zonePicker:function(){var t=this,n=e("<input />").appendTo(this.wrapper);t._zone=new C.ui.DropDownList(n,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){P.fn.destroy.call(this),C.destroy(this.wrapper)},value:function(e){var n,i=this;return e===t?i._value:((n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])?(i._zoneTitle.value(n.other_zone),i._zone.value(n.zone)):i._zoneTitle.select(0),t)}}),R.plugin(b),w=C.template('<option value="#=other_zone#">#=name#</option>'),k=C.template('<option value="#=zone#">#=territory#</option>'),x=P.extend({init:function(e,t){var n=this,i=C.timezone.windows_zones;if(!i||!C.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");P.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new C.data.Query(i),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,k))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,n){var i=0,r="",o=e.length;for(n&&(r+=t({other_zone:"",name:n}));o>i;i++)r+=t(e[i]);return r},_zoneTitlePicker:function(){var t=this,n=t._options(C.timezone.zones_titles,w,t.options.optionLabel);t._zoneTitle=e("<select>"+n+"</select>").appendTo(t.wrapper).change(function(){var e=this.value,n=t._zone;t._bindZones(e),e&&n[0].children.length>1?n.show():n.hide(),t._value=n[0].value,t.trigger("change")})},_zonePicker:function(){var t=this;t._zone=e('<select style="display:none"></select>').appendTo(this.wrapper).change(function(){t._value=this.value,t.trigger("change")}),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){P.fn.destroy.call(this),C.destroy(this.wrapper)},value:function(e){var n,i=this,r=i._zone,o="",a="";return e===t?i._value:((n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])&&(a=n.zone,o=n.other_zone),i._zoneTitle.val(o),i._bindZones(o),r.val(a),(a=r[0].value)&&r[0].children.length>1?r.show():r.hide(),i._value=a,t)}}),R.plugin(x)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.Widget,i=e.proxy,r=Math.abs,o=n.extend({init:function(e,r){function o(e){return function(t){s._triggerTouch(e,t)}}function a(e){return function(t){s.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}var s=this;n.fn.init.call(s,e,r),r=s.options,e=s.element,s.wrapper=e,s.events=new t.UserEvents(e,{filter:r.filter,surface:r.surface,minHold:r.minHold,multiTouch:r.multiTouch,allowSelection:!0,press:o("touchstart"),hold:o("hold"),tap:i(s,"_tap"),gesturestart:a("gesturestart"),gesturechange:a("gesturechange"),gestureend:a("gestureend")}),r.enableSwipe?(s.events.bind("start",i(s,"_swipestart")),s.events.bind("move",i(s,"_swipemove"))):(s.events.bind("start",i(s,"_dragstart")),s.events.bind("move",o("drag")),s.events.bind("end",o("dragend"))),t.notify(s)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})&&t.preventDefault()},_tap:function(e){var n=this,i=n.lastTap,r=e.touch;i&&n.options.doubleTapTimeout>r.endTime-i.endTime&&t.touchDelta(r,i).distance<20?(n._triggerTouch("doubletap",e),n.lastTap=null):(n._triggerTouch("tap",e),n.lastTap=r)},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this.options,n=e.touch,i=e.event.timeStamp-n.startTime,o=n.x.initialDelta>0?"right":"left";r(n.x.initialDelta)>=t.minXDelta&&r(n.y.initialDelta)<t.maxYDelta&&t.maxDuration>i&&(this.trigger("swipe",{direction:o,touch:e.touch}),n.cancel())}});t.ui.plugin(o)}(window.kendo.jQuery),function(e){function t(){var t=n._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var n=window.kendo,i=n.dom,r=i.element,o=i.text,a=n.support.browser,s=n.support.mobileOS,l=n.ui,c=l.Widget,u=e.extend,d=e.map,h=e.isFunction,p=a.msie&&9>a.version,f=n.keys,g={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},m=".kendoGanttList",v="click",_=".",y=l.GanttList=c.extend({init:function(e,t){c.fn.init.call(this,e,t),0===this.options.columns.length&&this.options.columns.push("title"),this.dataSource=this.options.dataSource,this._columns(),this._layout(),this._domTrees(),this._header(),this._sortable(),this._editable(),this._selectable(),this._draggable(),this._attachEvents(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.parent().outerHeight())},destroy:function(){c.fn.destroy.call(this),this._reorderDraggable&&this._reorderDraggable.destroy(),this._tableDropArea&&this._tableDropArea.destroy(),this._contentDropArea&&this._contentDropArea.destroy(),this.touch&&this.touch.destroy(),this.timer&&clearTimeout(this.timer),this.content.off(m),this.header.find(_+y.link).off(m),this.header=null,this.content=null,this.levels=null,n.destroy(this.element)},options:{name:"GanttList",selectable:!0,editable:!0},_attachEvents:function(){var t=this,n=y.styles;t.content.on(v+m,"td > span."+n.icon+":not(."+n.iconHidden+")",function(n){var i=e(this),r=t._modelFromElement(i);r.set("expanded",!r.get("expanded")),n.stopPropagation()})},_domTrees:function(){this.headerTree=new i.Tree(this.header[0]),this.contentTree=new i.Tree(this.content[0])},_columns:function(){var e=this.options.columns;this.columns=d(e,function(e){return e="string"==typeof e?{field:e,title:g[e]}:e,u(new function(){this.field="",this.title="",this.editable=!1,this.sortable=!1},e)})},_layout:function(){var e=this.element,t=y.styles;e.addClass(t.wrapper).append("<div class='"+t.gridHeader+"'><div class='"+t.gridHeaderWrap+"'></div></div>").append("<div class='"+t.gridContentWrap+"'></div>"),this.header=e.find(_+t.gridHeaderWrap),this.content=e.find(_+t.gridContent)},_header:function(){var e=this.headerTree,t=r("colgroup",null,this._cols()),n=r("thead",{role:"rowgroup"},[r("tr",{role:"row"},this._ths())]),i=r("table",{style:{minWidth:this.options.listWidth+"px"},role:"grid"},[t,n]);e.render([i])},_render:function(e){var t,n,i;this.levels=[{field:null,value:0}],t=r("colgroup",null,this._cols()),n=r("tbody",{role:"rowgroup"},this._trs(e)),i=r("table",{style:{minWidth:this.options.listWidth+"px"},tabIndex:0,role:"treegrid"},[t,n]),this.contentTree.render([i]),this.trigger("render")},_ths:function(){var e,t,n,i,a=this.columns,s=[];for(n=0,i=a.length;i>n;n++)t={"data-field":(e=a[n]).field,"data-title":e.title,className:y.styles.header,role:"columnheader"},s.push(r("th",t,[o(e.title)]));return s},_cols:function(){var e,t,n,i,o=this.columns,a=[];for(n=0,i=o.length;i>n;n++)e=(t=o[n].width)&&0!==parseInt(t,10)?{style:{width:"string"==typeof t?t:t+"px"}}:null,a.push(r("col",e,[]));return a},_trs:function(e){var t,n,i,r,o,a=[],s=[],l=y.styles;for(r=0,o=e.length;o>r;r++)t=e[r],i=this._levels({idx:t.parentId,id:t.id,summary:t.summary}),n={"data-uid":t.uid,"data-level":i,role:"row"},t.summary&&(n["aria-expanded"]=t.expanded),r%2!=0&&s.push(l.alt),t.summary&&s.push(l.group),s.length&&(n.className=s.join(" ")),a.push(this._tds({task:t,attr:n,level:i})),s=[];return a},_tds:function(e){var t,n,i,o=[],a=this.columns;for(n=0,i=a.length;i>n;n++)t=a[n],o.push(this._td({task:e.task,column:t,level:e.level}));return r("tr",e.attr,o)},_td:function(e){var t,i,a,s=[],l=this.options.resourcesField,c=y.styles,u=e.task,d=e.column,h=u.get(d.field)||[];if(d.field==l){for(t=[],i=0;h.length>i;i++)t.push(n.format("{0} [{1}]",h[i].get("name"),h[i].get("formatedValue")));t=t.join(", ")}else t=d.format?n.format(d.format,h):h;return"title"===d.field&&((s=function(e){var t,n,i=[],o=e.className;for(t=0,n=e.level;n>t;t++)i.push(r("span",{className:o}));return i}({level:e.level,className:c.iconPlaceHolder})).push(r("span",{className:c.icon+" "+(u.summary?u.expanded?c.iconCollapse:c.iconExpand:c.iconHidden)})),a=n.format("{0}, {1:P0}",t,u.percentComplete)),s.push(r("span",{"aria-label":a},[o(t)])),r("td",{role:"gridcell"},s)},_levels:function(e){var t,n,i,r=this.levels,o=e.summary,a=e.idx,s=e.id;for(n=0,i=r.length;i>n;n++)if((t=r[n]).field==a)return o&&r.push({field:s,value:t.value+1}),t.value},_sortable:function(){var e,t,i,r,o,a=this,s=this.options.resourcesField,l=this.columns,c=this.header.find("th"),u=function(e){a.editable&&a.editable.trigger("validate")&&(e.preventDefault(),e.stopImmediatePropagation())};for(r=0,o=c.length;o>r;r++)(e=l[r]).sortable&&e.field!==s&&((t=(i=c.eq(r)).data("kendoColumnSorter"))&&t.destroy(),i.attr("data-"+n.ns+"field",e.field).kendoColumnSorter({dataSource:this.dataSource}).find(_+y.link).on("click"+m,u));c=null},_selectable:function(){var t=this;this.options.selectable&&this.content.on(v+m,"tr",function(n){var i=e(this);t.editable&&t.editable.trigger("validate"),n.ctrlKey?t.clearSelection():t.select(i)})},select:function(e){var t=this.content.find(e),n=y.styles.selected;return t.length?(t.siblings(_+n).removeClass(n).attr("aria-selected",!1).end().addClass(n).attr("aria-selected",!0),void this.trigger("change")):this.content.find(_+n)},clearSelection:function(){var e=this.select();e.length&&(e.removeClass(y.styles.selected),this.trigger("change"))},_setDataSource:function(e){this.dataSource=e},_editable:function(){var n=this,i=y.styles,r="span."+i.icon+":not("+i.iconHidden+")",o=function(){var e=n.editable;e&&(e.end()?n._closeCell():e.trigger("validate"))},a=function(n){e(n.currentTarget).hasClass(i.editCell)||t()};this.options.editable&&(this._startEditHandler=function(t){var i=t.currentTarget?e(t.currentTarget):t,r=n._columnFromElement(i);n.editable||r.editable&&n._editCell({cell:i,column:r})},n.content.on("focusin"+m,function(){clearTimeout(n.timer),n.timer=null}).on("focusout"+m,function(){n.timer=setTimeout(o,1)}).on("keyup"+m,function(e){var i,r;switch(e.keyCode){case f.ENTER:t(),o();break;case f.ESC:n.editable&&(i=n._editableContainer,r=n._modelFromElement(i),n.trigger("cancel",{model:r,cell:i})||n._closeCell(!0))}}),s?n.touch=n.content.kendoTouch({filter:"td",touchstart:function(e){a(e.touch)},doubletap:function(t){e(t.touch.initialTouch).is(r)||n._startEditHandler(t.touch)}}).data("kendoTouch"):n.content.on("mousedown"+m,"td",function(e){a(e)}).on("dblclick"+m,"td",function(t){e(t.target).is(r)||n._startEditHandler(t)}))},_editCell:function(t){var i,r=this.options.resourcesField,o=y.styles,a=t.cell,s=t.column,l=this._modelFromElement(a),c=this.dataSource._createNewModel(l.toJSON()),u=c.fields[s.field]||c[s.field],d=u.validation,f=n.attr("type"),g=n.attr("bind"),m=n.attr("format"),v={name:s.field,required:!!u.validation&&!0===u.validation.required};return s.field===r?void s.editor(a,c):(this._editableContent=a.children().detach(),this._editableContainer=a,a.data("modelCopy",c),"date"!==u.type&&"date"!==e.type(u)||s.format&&!/H|m|s|F|g|u/.test(s.format)||(v[g]="value:"+s.field,v[f]="date",s.format&&(v[m]=n._extractFormat(s.format)),i=function(t,n){e('<input type="text"/>').attr(v).appendTo(t).kendoDateTimePicker({format:n.format})}),this.editable=a.addClass(o.editCell).kendoEditable({fields:{field:s.field,format:s.format,editor:s.editor||i},model:c,clearContainer:!1}).data("kendoEditable"),d&&d.dateCompare&&h(d.dateCompare)&&d.message&&(e("<span "+n.attr("for")+'="'+s.field+'" class="k-invalid-msg"/>').hide().appendTo(a),a.find("[name="+s.field+"]").attr(n.attr("dateCompare-msg"),d.message)),this.trigger("edit",{model:l,cell:a})&&this._closeCell(!0),void this.editable.bind("validate",function(e){var t=this.element.find(":kendoFocusable:first").focus();p&&t.focus(),e.preventDefault()}))},_closeCell:function(e){var t=y.styles,n=this._editableContainer,i=this._modelFromElement(n),r=this._columnFromElement(n).field,o=n.data("modelCopy"),a={};a[r]=o.get(r),n.empty().removeData("modelCopy").removeClass(t.editCell).append(this._editableContent),this.editable.unbind(),this.editable.destroy(),this.editable=null,this._editableContainer=null,this._editableContent=null,e||("start"===r&&(a.end=new Date(a.start.getTime()+i.duration())),this.trigger("update",{task:i,updateInfo:a}))},_draggable:function(){var t,i=this,r=null,o=!0,a=y.styles,l="tr["+n.attr("level")+" = 0]:last",c={},d=function(){r=null,t=null,o=!0,c={}},h=function(){var i=e(t).height(),r=n.getOffset(t).top;u(t,{beforeLimit:r+.25*i,afterLimit:r+.75*i})},p=function(){return i._reorderDraggable.hint.children(_+a.dragStatus).removeClass(a.dropPositions)};this.options.editable&&(this._reorderDraggable=this.content.kendoDraggable({distance:10,holdToDrag:s,group:"listGroup",filter:"tr[data-uid]",ignore:_+a.input,hint:function(t){return e('<div class="'+a.header+" "+a.dragClue+'"/>').css({width:300,paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).append('<span class="'+a.icon+" "+a.dragStatus+'" /><span class="'+a.dragClueText+'"/>')},cursorOffset:{top:-20,left:0},container:this.content,dragstart:function(e){return i.editable&&i.editable.trigger("validate")?void e.preventDefault():(r=i._modelFromElement(e.currentTarget),void this.hint.children(_+a.dragClueText).text(r.get("title")))},drag:function(e){o&&(function(e){var i,r=e.location,o=a.dropAdd,s="add",l=parseInt(t.attr(n.attr("level")),10);t.beforeLimit>=r?(i=t.prev(),o=a.dropTop,s="insert-before"):r>=t.afterLimit&&(i=t.next(),o=a.dropBottom,s="insert-after"),i&&parseInt(i.attr(n.attr("level")),10)===l&&(o=a.dropMiddle),c.className=o,c.command=s}(e.y),p().addClass(c.className))},dragend:function(){d()},dragcancel:function(){d()}}).data("kendoDraggable"),this._tableDropArea=this.content.kendoDropTargetArea({distance:0,group:"listGroup",filter:"tr[data-uid]",dragenter:function(e){t=e.dropTarget,function(e){for(var t=e;t;){if(r.get("id")===t.get("id")){o=!1;break}t=i.dataSource.taskParent(t)}}(i._modelFromElement(t)),h(),p().toggleClass(a.dropDenied,!o)},dragleave:function(){o=!0,p()},drop:function(){var e=i._modelFromElement(t),n=e.orderId,a={parentId:e.parentId};if(o){switch(c.command){case"add":a.parentId=e.id;break;case"insert-before":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?n-1:n;break;case"insert-after":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?n:n+1}i.trigger("update",{task:r,updateInfo:a})}}}).data("kendoDropTargetArea"),this._contentDropArea=this.element.kendoDropTargetArea({distance:0,group:"listGroup",filter:_+a.gridContent,drop:function(){var e=i._modelFromElement(i.content.find(l)).orderId,t={parentId:null,orderId:null!==r.parentId?e+1:e};i.trigger("update",{task:r,updateInfo:t})}}).data("kendoDropTargetArea"))},_modelFromElement:function(e){var t=e.closest("tr");return this.dataSource.getByUid(t.attr(n.attr("uid")))},_columnFromElement:function(e){var t=e.closest("td"),n=t.parent().children().index(t);return this.columns[n]}});u(!0,l.GanttList,{styles:{wrapper:"k-treelist k-grid k-widget",header:"k-header",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",selected:"k-state-selected",icon:"k-icon",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",link:"k-link",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"}})}(window.kendo.jQuery),function(e){function t(){var t=kendo._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var n,i,r=kendo.ui.Widget,o=kendo.dom.element,a=kendo.dom.text,s=e.isPlainObject,l=e.extend,c=e.proxy,u=kendo.support.browser,d=!1,h=kendo.keys,p=kendo.data.Query,f=".kendoGanttTimeline",g="click",m="mousemove",v="mouseleave",_=".",y=kendo.template("#=kendo.toString(start, 't')#"),b=kendo.template("#=kendo.toString(start, 'ddd M/dd')#"),w=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"),k=kendo.template("#=kendo.toString(start, 'MMM')#"),x=kendo.template("#=kendo.toString(start, 'yyyy')#"),C=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'),T=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>#=messages.start#: #=kendo.toString(start, format)#</div><div>#=messages.end#: #=kendo.toString(end, format)#</div></div></div>'),S=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'),D=kendo.template('<div class="#=styles.taskDetails#"><strong>#=task.title#</strong><div class="#=styles.taskDetailsPercent#">#=kendo.toString(task.percentComplete, "p0")#</div><ul class="#=styles.reset#"><li>#=messages.start#: #=kendo.toString(task.start, "h:mm tt ddd, MMM d")#</li><li>#=messages.end#: #=kendo.toString(task.end, "h:mm tt ddd, MMM d")#</li></ul></div>'),A={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}},M=kendo.ui.GanttView=r.extend({init:function(e,t){r.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this.header=this.element.find(_+M.styles.gridHeader),this.content=this.element.find(_+M.styles.gridContent),this.contentWidth=this.content.width(),this._workDays=function(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}(this.options),this._headerTree=t.headerTree,this._taskTree=t.taskTree,this._dependencyTree=t.dependencyTree,this._taskCoordinates={},this._currentTime()},destroy:function(){r.fn.destroy.call(this),clearTimeout(this._tooltipTimeout),this.headerRow=null,this.header=null,this.content=null,this._dragHint=null,this._resizeHint=null,this._resizeTooltip=null,this._taskTooltip=null,this._percentCompleteResizeTooltip=null,this._headerTree=null,this._taskTree=null,this._dependencyTree=null},options:{showWorkHours:!1,showWorkDays:!1,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100,currentTimeMarker:{updateInterval:1e4}},renderLayout:function(){this._slots=this._createSlots(),this._tableWidth=this._calculateTableWidth(),this.createLayout(this._layout()),this._slotDimensions(),this._adjustHeight(),this.content.find(_+M.styles.dependenciesWrapper).width(this._tableWidth)},_adjustHeight:function(){this.content.height(this.element.height()-this.header.outerHeight())},createLayout:function(e){var t=this._headers(e),n=this._colgroup(),i=this._headerTree,r=o("thead",null,t),a=o("table",{style:{width:this._tableWidth+"px"}},[n,r]);i.render([a]),this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){var e,t,n,i,r=this.headerRow[0].children,o=this._timeSlots();for(n=0,i=r.length;i>n;n++)t=r[n],(e=o[n]).offsetLeft=t.offsetLeft,e.offsetWidth=t.offsetWidth},render:function(e){var t,n=e.length,i=M.styles,r=this._rowsTable(n),o=this._columnsTable(n),a=this._tasksTable(e),s=this.options.currentTimeMarker;this._taskTree.render([r,o,a]),t=this.content.find(_+i.rowsTable),this._contentHeight=t.height(),this._rowHeight=this._contentHeight/t.find("tr").length,this.content.find(_+i.columnsTable).height(this._contentHeight),!1!==s&&void 0!==s.updateInterval&&this._renderCurrentTime()},_rowsTable:function(e){var t,n,i=[],r=M.styles,s=[null,{className:r.alt}];for(n=0;e>n;n++)t=o("tr",s[n%2],[o("td",null,[a(" ")])]),i.push(t);return this._createTable(1,i,{className:r.rowsTable})},_columnsTable:function(){var e,t,n,i,r,s=[],l=M.styles,c=this._timeSlots(),u=c.length,d=0;for(r=0;u>r;r++)i={},d+=n=(t=c[r]).span,1!==n&&(i.colspan=n),t.isNonWorking&&(i.className=l.nonWorking),s.push(o("td",i,[a(" ")]));return e=o("tr",null,s),this._createTable(d,[e],{className:l.columnsTable})},_tasksTable:function(e){var t,n,i,r,a,s,l,c,u=[],h=M.styles,p=this._taskCoordinates={},f=this._calculateMilestoneWidth(),g=Math.round(f.width),m=this.options.resourcesField,v=[h.resource,h.resourceAlt],_=this._calculateResourcesMargin(),y=this._calculateTaskBorderWidth(),b=function(e){var t=i.left,n=t+i.width;r.isMilestone()&&(n=(t-=g/2)+g),p[r.id]={start:t,end:n,rowIndex:e}};for(l=0,c=e.length;c>l;l++)r=e[l],(i=this._taskPosition(r)).borderWidth=y,t=o("tr",null),n=o("td",null,[this._renderTask(e[l],i)]),r[m]&&r[m].length&&(a=d?this._tableWidth-i.left:Math.max(i.width||f.clientWidth,0)+i.left,(s={width:this._tableWidth-(a+_)+"px"})[d?"right":"left"]=a+"px",n.children.push(o("div",{className:h.resourcesWrap,style:s},this._renderResources(r[m],v[l%2])))),t.children.push(n),u.push(t),b(l);return this._createTable(1,u,{className:M.styles.tasksTable})},_createTable:function(e,t,n){var i,r,a,s=[];for(a=0;e>a;a++)s.push(o("col"));return i=o("colgroup",null,s),r=o("tbody",null,t),n.style||(n.style={}),n.style.width=this._tableWidth+"px",o("table",n,[i,r])},_calculateTableWidth:function(){var e,t,n,i=this._timeSlots(),r=0,o=0;for(t=0,n=i.length;n>t;t++)o+=e=i[t].span,e>r&&(r=e);return Math.round(o*this.options.slotSize/r)},_calculateMilestoneWidth:function(){var t,n,i=M.styles.task+" "+M.styles.taskMilestone,r=e("<div class='"+i+"' style='visibility: hidden; position: absolute'>");return this.content.append(r),t={width:(n=r[0].getBoundingClientRect()).right-n.left,clientWidth:r[0].clientWidth},r.remove(),t},_calculateResourcesMargin:function(){var t,n=e("<div class='"+M.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");return this.content.append(n),t=parseInt(n.css(d?"margin-right":"margin-left"),10),n.remove(),t},_calculateTaskBorderWidth:function(){var t,n,i=M.styles.task+" "+M.styles.taskSingle,r=e("<div class='"+i+"' style='visibility: hidden; position: absolute'>");return this.content.append(r),n=kendo.getComputedStyles(r[0],["border-left-width"]),t=parseFloat(n["border-left-width"],10),r.remove(),t},_renderTask:function(e,t){var n,i,r,a=this.options.editable,s=t.left,l=M.styles,c=l.taskWrap,u={};return e.summary?i=this._renderSummary(e,t):e.isMilestone()?(i=this._renderMilestone(e,t),c+=" "+l.taskMilestoneWrap):i=this._renderSingleTask(e,t),n=o("div",{className:c,style:{left:s+"px"}},[i]),a&&(n.children.push(o("div",{className:l.taskDot+" "+l.taskDotStart})),n.children.push(o("div",{className:l.taskDot+" "+l.taskDotEnd}))),e.summary||e.isMilestone()||!a||(r=Math.round(t.width*e.percentComplete),u[d?"right":"left"]=r+"px",n.children.push(o("div",{className:l.taskDragHandle,style:u}))),n},_renderSingleTask:function(e,t){var n=M.styles,i=Math.round(t.width*e.percentComplete),r=o("div",{className:n.taskContent},[o("div",{className:n.taskTemplate},[a(e.title)])]);return this.options.editable&&(r.children.push(o("span",{className:n.taskActions},[o("a",{className:n.link+" "+n.taskDelete,href:"#"},[o("span",{className:n.icon+" "+n.iconDelete})])])),r.children.push(o("span",{className:n.taskResizeHandle+" "+n.taskResizeHandleWest})),r.children.push(o("span",{className:n.taskResizeHandle+" "+n.taskResizeHandleEast}))),o("div",{className:n.task+" "+n.taskSingle,"data-uid":e.uid,style:{width:Math.max(t.width-2*t.borderWidth,0)+"px"}},[o("div",{className:n.taskComplete,style:{width:i+"px"}}),r])},_renderMilestone:function(e){var t=M.styles;return o("div",{className:t.task+" "+t.taskMilestone,"data-uid":e.uid})},_renderSummary:function(e,t){var n=M.styles,i=Math.round(t.width*e.percentComplete);return o("div",{className:n.task+" "+n.taskSummary,"data-uid":e.uid,style:{width:t.width+"px"}},[o("div",{className:n.taskSummaryProgress,style:{width:i+"px"}},[o("div",{className:n.taskSummaryComplete,style:{width:t.width+"px"}})])])},_renderResources:function(e,t){var n,i,r,s=[];for(i=0,r=e.length;r>i;i++)n=e[i],s.push(o("span",{className:t,style:{color:n.get("color")}},[a(n.get("name"))]));return d&&s.reverse(),s},_taskPosition:function(e){var t=Math.round,n=t(this._offset(d?e.end:e.start));return{left:n,width:t(this._offset(d?e.start:e.end))-n}},_offset:function(e){var t,n=this._timeSlots(),i=0;return n.length?(e>(t=n[this._slotIndex("start",e)]).end?i=t.offsetWidth:e>=t.start&&(i=(e-t.start)/(t.end-t.start)*t.offsetWidth),d&&(i=t.offsetWidth+1-i),t.offsetLeft+i):0},_slotIndex:function(e,t,n){var i,r=this._timeSlots(),o=0,a=r.length-1;n&&(r=[].slice.call(r).reverse());do{t>r[i=Math.ceil((a+o)/2)][e]?o=i:(i===a&&i--,a=i)}while(o!==a);return n&&(o=r.length-1-o),o},_timeByPosition:function(t,n,i){var r,o,a,s=this._slotByPosition(t);return n?i?s.end:s.start:(r=t-e(_+M.styles.tasksTable).offset().left,o=s.end-s.start,a=r-s.offsetLeft,d&&(a=s.offsetWidth-a),new Date(s.start.getTime()+o*(a/s.offsetWidth)))},_slotByPosition:function(t){var n=t-e(_+M.styles.tasksTable).offset().left,i=this._slotIndex("offsetLeft",n,d);return this._timeSlots()[i]},_renderDependencies:function(e){var t,n,i=[],r=this._dependencyTree;for(t=0,n=e.length;n>t;t++)i.push.apply(i,this._renderDependency(e[t]));r.render(i)},_renderDependency:function(e){var t,n,i,r=this._taskCoordinates[e.predecessorId],o=this._taskCoordinates[e.successorId];if(!r||!o)return[];for(n=0,i=(t=this["_render"+["FF","FS","SF","SS"][d?3-e.type:e.type]](r,o)).length;i>n;n++)t[n].attr["data-uid"]=e.uid;return t},_renderFF:function(e,t){var n=this._dependencyFF(e,t,!1);return n[n.length-1].children[0]=this._arrow(!0),n},_renderSS:function(e,t){var n=this._dependencyFF(t,e,!0);return n[0].children[0]=this._arrow(!1),n.reverse()},_renderFS:function(e,t){var n=this._dependencyFS(e,t,!1);return n[n.length-1].children[0]=this._arrow(!1),n},_renderSF:function(e,t){var n=this._dependencyFS(t,e,!0);return n[0].children[0]=this._arrow(!0),n.reverse()},_dependencyFF:function(e,t,n){var i,r=this,o=[],a=0,s=0,l=0,c=0,u=n?"start":"end",d=this._rowHeight,h=e.rowIndex*d+Math.floor(d/2)-1,p=t.rowIndex*d+Math.floor(d/2)-1,f=M.styles,g=function(){o.push(r._line(f.line+" "+f.lineHorizontal,{left:a+"px",top:s+"px",width:l+"px"}))},m=function(){o.push(r._line(f.line+" "+f.lineVertical,{left:a+"px",top:s+"px",height:c+"px"}))};return a=e[u],s=h,l=10,(i=t[u]-e[u])>0!==n&&(l=Math.abs(i)+10),n?(a-=l,l-=1,g()):(g(),a+=l-2),s>p?(c=s-p,c+=2,s=p,m()):(c=p-s,c+=2,m(),s+=c-2),l=Math.abs(a-t[u]),n||(a-=l-=1),g(),o},_dependencyFS:function(e,t,n){var i=this,r=[],o=0,a=0,s=0,l=0,c=this._rowHeight,u=Math.floor(c/2),d=t.start-e.end,h=e.rowIndex*c+Math.floor(c/2)-1,p=t.rowIndex*c+Math.floor(c/2)-1,f=M.styles,g=function(){r.push(i._line(f.line+" "+f.lineHorizontal,{left:o+"px",top:a+"px",width:s+"px"}))},m=function(){r.push(i._line(f.line+" "+f.lineVertical,{left:o+"px",top:a+"px",height:l+"px"}))};return o=e.end,a=h,s=10,n&&(o+=1,d>20&&(s=d-8),s-=1),g(),o+=s-2,20>=d&&(l=n?Math.abs(p-h)-u:u,h>p?(a-=l,l+=2,m()):(m(),a+=l),10>(s=e.end-t.start+20)&&(s=10),o-=s-2,g()),h>p?(l=a-p,a=p,l+=2,m()):(l=p-a,m(),a+=l),s=t.start-o,n||(s-=1),g(),r},_line:function(e,t){return o("div",{className:e,style:t})},_arrow:function(e){return o("span",{className:e?M.styles.arrowWest:M.styles.arrowEast})},_colgroup:function(){var e,t,n,i=this._timeSlots(),r=i.length,a=[];for(e=0;r>e;e++)for(t=0,n=i[e].span;n>t;t++)a.push(o("col"));return o("colgroup",null,a)},_createDragHint:function(e){this._dragHint=e.clone().addClass(M.styles.dragHint).css("cursor","move"),e.parent().append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove(),this._dragHint=null},_createResizeHint:function(t){var n,i=M.styles,r=this._taskCoordinates[t.id].rowIndex*this._rowHeight,o=this.options,a=o.messages;this._resizeHint=e(C({styles:i})).css({top:0,height:this._contentHeight}),this.content.append(this._resizeHint),this._resizeTooltip=e(T({styles:i,start:t.start,end:t.end,messages:a.views,format:o.resizeTooltipFormat})).css({top:0,left:0}),this.content.append(this._resizeTooltip),this._resizeTooltipWidth=this._resizeTooltip.outerWidth(),0>(n=r-this._resizeTooltip.outerHeight())&&(n=r+this._rowHeight),this._resizeTooltipTop=n},_updateResizeHint:function(t,n,i){var r=this._offset(d?n:t),o=this._offset(d?t:n),a=o-r,s=i!==d?r:o,l=this._tableWidth-kendo.support.scrollbar(),c=this._resizeTooltipWidth,u=this.options,h=u.messages,p=e(_+M.styles.tasksTable).offset().left-e(_+M.styles.tasksWrapper).offset().left;d&&(r+=p),this._resizeHint.css({left:r,width:a}),this._resizeTooltip&&this._resizeTooltip.remove(),0>(s-=Math.round(c/2))?s=0:s+c>l&&(s=l-c),d&&(s+=p),this._resizeTooltip=e(T({styles:M.styles,start:t,end:n,messages:h.views,format:u.resizeTooltipFormat})).css({top:this._resizeTooltipTop,left:s,"min-width":c}).appendTo(this.content)},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=null,this._resizeTooltip.remove(),this._resizeTooltip=null},_updatePercentCompleteTooltip:function(t,n,i){var r,o,a,s;this._removePercentCompleteTooltip(),r=this._percentCompleteResizeTooltip=e(S({styles:M.styles,text:i})).appendTo(this.element),o=Math.round(r.outerWidth()/2),a=r.find(_+M.styles.callout),s=Math.round(a.outerWidth()/2),r.css({top:t-(r.outerHeight()+s),left:n-o}),a.css("left",o-s)},_removePercentCompleteTooltip:function(){this._percentCompleteResizeTooltip&&this._percentCompleteResizeTooltip.remove(),this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t,n){this._removeDependencyDragHint(),n?this._creteVmlDependencyDragHint(e,t):this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(t,n){var i=M.styles,r=n.x-t.x,o=n.y-t.y,a=Math.sqrt(r*r+o*o),s=Math.atan(o/r);0>r&&(s+=Math.PI),e("<div class='"+i.line+" "+i.lineHorizontal+" "+i.dependencyHint+"'></div>").css({top:t.y,left:t.x,width:a,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+s+"rad)","-ms-transform":"rotate("+s+"rad)","-webkit-transform":"rotate("+s+"rad)"}).appendTo(this.content)},_creteVmlDependencyDragHint:function(t,n){var i=e("<kvml:line class='"+M.styles.dependencyHint+"' style='position:absolute; top: 0px; left: 0px;' strokecolor='black' strokeweight='2px' from='"+t.x+"px,"+t.y+"px' to='"+n.x+"px,"+n.y+"px'></kvml:line>").appendTo(this.content);i[0].outerHTML=i[0].outerHTML},_removeDependencyDragHint:function(){this.content.find(_+M.styles.dependencyHint).remove()},_createTaskTooltip:function(t,n,i){var r,o=M.styles,a=this.options,s=this.content,l=s.offset(),c=s.width(),u=s.scrollLeft(),d=e(n).parents("tr").first(),h=d.offset(),p=a.tooltip&&a.tooltip.template?kendo.template(a.tooltip.template):D,f=i-(l.left-s.scrollLeft()),g=h.top+d.outerHeight()-l.top+s.scrollTop(),m=this._taskTooltip=e('<div style="z-index: 100002;" class="'+o.tooltipWrapper+'" ><div class="'+o.taskContent+'"></div></div>');m.css({left:f,top:g}).appendTo(s).find(_+o.taskContent).append(p({styles:o,task:t,messages:a.messages.views})),m.outerHeight()<h.top-l.top&&m.css("top",h.top-l.top-m.outerHeight()+s.scrollTop()),(r=m.outerWidth())+f-u>c&&(u>(f-=r)&&(f=u+c-(r+17)),m.css("left",f))},_removeTaskTooltip:function(){this._taskTooltip&&this._taskTooltip.remove(),this._taskTooltip=null},_scrollTo:function(e){var t=e.offset().left,n=e.width(),i=t+n,r=e.closest("tr"),o=r.offset().top,a=o+r.height(),s=this.content,l=s.offset(),c=l.top,u=c+s.height(),d=l.left,h=s.width(),p=d+h,f=kendo.support.scrollbar();c>o?s.scrollTop(s.scrollTop()+(o-c)):a>u&&s.scrollTop(s.scrollTop()+(a+f-u)),d>t&&n>h&&p>i||i>p&&h>n?s.scrollLeft(s.scrollLeft()+(i+f-p)):(i>p&&n>h&&t>d||d>t&&h>n)&&s.scrollLeft(s.scrollLeft()+(t-d))},_timeSlots:function(){return this._slots&&this._slots.length?this._slots[this._slots.length-1]:[]},_headers:function(e){var t,n,i,r,s,l,c,u,d=[],h=M.styles;for(s=0,l=e.length;l>s;s++){for(n=[],c=0,u=(t=e[s]).length;u>c;c++)i=t[c],r=a(i.text),n.push(o("th",{colspan:i.span,className:h.header+(i.isNonWorking?" "+h.nonWorking:"")},[r]));d.push(o("tr",null,n))}return d},_hours:function(e,t){var n,i,r,o=[],a=this.options,s=a.workDayStart.getHours(),l=a.workDayEnd.getHours(),c=a.hourSpan;for(e=new Date(e),t=new Date(t);t>e;)i=(r=(n=new Date(e)).getHours())>=s&&l>r,n.setHours(n.getHours()+c),r==n.getHours()&&n.setHours(n.getHours()+2*c),(!a.showWorkHours||i)&&o.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return o},_days:function(e,t){var n,i,r=[];for(e=new Date(e),t=new Date(t);t>e;)n=kendo.date.nextDay(e),i=this._isWorkDay(e),(!this.options.showWorkDays||i)&&r.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return r},_weeks:function(e,t){var n,i,r,o=[],a=this.calendarInfo().firstDay;for(e=new Date(e),t=new Date(t);t>e;)(n=kendo.date.dayOfWeek(kendo.date.addDays(e,1),a,1))>t&&(n=t),(r=(i=this._days(e,n)).length)>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_months:function(e,t){var n,i,r,o=[];for(e=new Date(e),t=new Date(t);t>e;)(n=new Date(e)).setMonth(n.getMonth()+1),(r=(i=this._days(e,n)).length)>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_years:function(e,t){var n,i=[];for(e=new Date(e),t=new Date(t);t>e;)(n=new Date(e)).setFullYear(n.getFullYear()+1),i.push({start:e,end:n,span:12}),e=n;return i},_slotHeaders:function(e,t){var n,i,r,o=[];for(i=0,r=e.length;r>i;i++)n=e[i],o.push({text:t(n),isNonWorking:!!n.isNonWorking,span:n.span});return o},_isWorkDay:function(e){var t,n,i=e.getDay(),r=this._workDays;for(t=0,n=r.length;n>t;t++)if(r[t]===i)return!0;return!1},calendarInfo:function(){return kendo.getCulture().calendars.standard},_renderCurrentTime:function(){var t,n=this._getCurrentTime(),i=this._offset(n),r=e("<div class='k-current-time'></div>"),o=M.styles,a=e(_+o.tasksWrapper),s=e(_+o.tasksTable);this.content&&this._timeSlots().length&&(this.content.find(".k-current-time").remove(),(t=this._timeSlots()[this._slotIndex("start",n)]).start>n||n>t.end||(a.length&&s.length&&(i+=s.offset().left-a.offset().left),r.css({left:i+"px",top:"0px",width:"1px",height:this._contentHeight+"px"}).appendTo(this.content)))},_getCurrentTime:function(){return new Date},_currentTime:function(){var e=this.options.currentTimeMarker;!1!==e&&void 0!==e.updateInterval&&(this._renderCurrentTime(),this._currentTimeUpdateTimer=setInterval(c(this._renderCurrentTime,this),e.updateInterval))}});l(!0,M,{styles:{alt:"k-alt",reset:"k-reset",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",tasksWrapper:"k-gantt-tables",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",dependenciesWrapper:"k-gantt-dependencies",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",taskDetails:"k-task-details",taskDetailsPercent:"k-task-pct",link:"k-link",icon:"k-icon",iconDelete:"k-si-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-line",lineHorizontal:"k-line-h",lineVertical:"k-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-dependency-hint",tooltipWrapper:"k-widget k-tooltip k-popup k-group k-reset",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color"}}),kendo.ui.GanttDayView=M.extend({name:"day",options:{timeHeaderTemplate:y,dayHeaderTemplate:b,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){this.start=kendo.date.getDate(e.start),this.end=kendo.date.getDate(e.end),(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime())&&(this.end=kendo.date.addDays(this.end,1))},_createSlots:function(){var e,t,n,i,r=[],o=this._days(this.start,this.end),a=[];for(n=0,i=o.length;i>n;n++)e=o[n],t=this._hours(e.start,e.end),e.span=t.length,a.push.apply(a,t);return r.push(o),r.push(a),r},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate))),e}}),kendo.ui.GanttWeekView=M.extend({name:"week",options:{dayHeaderTemplate:b,weekHeaderTemplate:w,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){var t=this.calendarInfo().firstDay,n=e.end;t===n.getDay()&&n.setDate(n.getDate()+7),this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,t,-1)),this.end=kendo.date.getDate(kendo.date.dayOfWeek(n,t,1))},_createSlots:function(){var e=[];return e.push(this._weeks(this.start,this.end)),e.push(this._days(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate))),e}}),kendo.ui.GanttMonthView=M.extend({name:"month",options:{weekHeaderTemplate:w,monthHeaderTemplate:k,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){this.start=kendo.date.firstDayOfMonth(e.start),this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1)},_createSlots:function(){var e=[];return e.push(this._months(this.start,this.end)),e.push(this._weeks(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate))),e}}),kendo.ui.GanttYearView=M.extend({name:"year",options:{yearHeaderTemplate:x,monthHeaderTemplate:k,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))),this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12)))},_createSlots:function(){var t=[],n=this._months(this.start,this.end);return e(n).each(function(e,t){t.span=1}),t.push(this._years(this.start,this.end)),t.push(n),t},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate))),e}}),n={wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",line:"k-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"},i=kendo.ui.GanttTimeline=r.extend({init:function(e,t){r.fn.init.call(this,e,t),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),d=kendo.support.isRtl(e),this._wrapper(),this._domTrees(),this._views(),this._selectable(),this._draggable(),this._resizable(),this._percentResizeDraggable(),this._createDependencyDraggable(),this._attachEvents(),this._tooltip()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"}},snap:!0,selectable:!0,editable:!0},destroy:function(){r.fn.destroy.call(this),clearTimeout(this._tooltipTimeout),this._currentTimeUpdateTimer&&clearInterval(this._currentTimeUpdateTimer),this._unbindView(this._selectedView),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this._percentDraggable&&this._percentDraggable.destroy(),this._dependencyDraggable&&this._dependencyDraggable.destroy(),this.touch&&this.touch.destroy(),this._headerTree=null,this._taskTree=null,this._dependencyTree=null,this.wrapper.off(f),kendo.destroy(this.wrapper)},_wrapper:function(){var e=i.styles;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.gridHeader+"'><div class='"+e.gridHeaderWrap+"'></div></div>").append("<div class='"+e.gridContentWrap+"'><div class='"+e.tasksWrapper+"'></div><div class='"+e.dependenciesWrapper+"'></div></div>")},_domTrees:function(){var e=i.styles,t=kendo.dom.Tree,n=this.wrapper;this._headerTree=new t(n.find(_+e.gridHeaderWrap)[0]),this._taskTree=new t(n.find(_+e.tasksWrapper)[0]),this._dependencyTree=new t(n.find(_+e.dependenciesWrapper)[0])},_views:function(){var e,t,n,i,r,o,a,c=this.options.views;for(this.views={},o=0,a=c.length;a>o;o++)e=c[o],(t=s(e))&&!1===e.selectable||(n=t?"string"!=typeof e.type?e.title:e.type:e,(i=A[n])&&(t&&(e.type=i.type),i.title=this.options.messages.views[n]),e=l({title:n},i,t?e:{}),n&&(this.views[n]=e,(!r||e.selected)&&(r=n)));r&&(this._selectedViewName=r)},view:function(e){return e&&(this._selectView(e),this.trigger("navigate",{view:e,action:"changeView"})),this._selectedView},_selectView:function(e){e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._initializeView(e),this._selectedViewName=e)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_initializeView:function(e){var t,n=this.views[e];if(n){if("string"==typeof(t=n.type)&&(t=kendo.getter(n.type)(window)),!t)throw Error("There is no such view");n=new t(this.wrapper,function(e){return delete e.name,delete e.prefix,delete e.views,e}(l(!0,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree},n,this.options)))}return n},_unbindView:function(e){e&&e.destroy()},_range:function(e){var t,n;return e&&e.length?(t=new p(e).sort({field:"start",dir:"asc"}).toArray()[0].start||new Date,n=new p(e).sort({field:"end",dir:"desc"}).toArray()[0].end||new Date,{start:new Date(t),end:new Date(n)}):{start:new Date,end:new Date}},_render:function(e){var t=this.view(),n=this._range(e);this._tasks=e,t.range(n),t.renderLayout(),t.render(e)},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){var t,n,i=this._tasks,r=i.length;for(n=0;r>n;n++)if((t=i[n]).uid===e)return t},_draggable:function(){var e,n,r,o,a=this,s=this.options.snap,l=i.styles,c=function(){a.view()._removeDragHint(),e&&e.css("opacity",1),e=null,n=null,a.dragInProgress=!1};this.options.editable&&(this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+l.task,holdToDrag:kendo.support.mobileOS,ignore:_+l.taskResizeHandle}),this._moveDraggable.bind("dragstart",function(t){var i=a.view();return e=t.currentTarget.parent(),n=a._taskByUid(t.currentTarget.attr("data-uid")),a.trigger("moveStart",{task:n})?void t.preventDefault():(r=n.start,o=i._timeByPosition(t.x.location,s)-r,i._createDragHint(e),e.css("opacity",.5),clearTimeout(a._tooltipTimeout),void(a.dragInProgress=!0))}).bind("drag",kendo.throttle(function(e){var t,i,l;a.dragInProgress&&(t=a.view(),l=i=new Date(t._timeByPosition(e.x.location,s)-o),a.trigger("move",{task:n,start:i})||(r=i,d&&(l=new Date(r.getTime()+n.duration())),t._updateDragHint(l)))},15)).bind("dragend",function(){a.trigger("moveEnd",{task:n,start:r}),c()}).bind("dragcancel",function(){c()}).userEvents.bind("select",function(){t()}))},_resizable:function(){var e,n,r,o,a,s=this,l=this.options.snap,c=i.styles,u=function(){s.view()._removeResizeHint(),e=null,n=null,s.dragInProgress=!1};this.options.editable&&(this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+c.taskResizeHandle,holdToDrag:!1}),this._resizeDraggable.bind("dragstart",function(t){return a=t.currentTarget.hasClass(c.taskResizeHandleWest),d&&(a=!a),e=t.currentTarget.closest(_+c.task),n=s._taskByUid(e.attr("data-uid")),s.trigger("resizeStart",{task:n})?void t.preventDefault():(r=n.start,o=n.end,s.view()._createResizeHint(n),clearTimeout(s._tooltipTimeout),void(s.dragInProgress=!0))}).bind("drag",kendo.throttle(function(e){var t,i;s.dragInProgress&&(i=(t=s.view())._timeByPosition(e.x.location,l,!a),a?r=o>i?i:o:o=i>r?i:r,s.trigger("resize",{task:n,start:r,end:o})||t._updateResizeHint(r,o,a))},15)).bind("dragend",function(){s.trigger("resizeEnd",{task:n,resizeStart:a,start:r,end:o}),u()}).bind("dragcancel",function(){u()}).userEvents.bind("select",function(){t()}))},_percentResizeDraggable:function(){var e,n,r,o,a,s,l,c,u,h,p=this,f=i.styles,g=function(){p.view()._removePercentCompleteTooltip(),n=null,e=null,p.dragInProgress=!1},m=function(e){n.find(_+f.taskComplete).width(e).end().siblings(_+f.taskDragHandle).css(d?"right":"left",e)};this.options.editable&&(this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+f.taskDragHandle,holdToDrag:!1}),this._percentDraggable.bind("dragstart",function(t){return p.trigger("percentResizeStart")?void t.preventDefault():(n=t.currentTarget.siblings(_+f.task),e=p._taskByUid(n.attr("data-uid")),l=e.percentComplete,r=n.offset(),o=this.element.offset(),a=n.find(_+f.taskComplete).width(),s=n.outerWidth(),clearTimeout(p._tooltipTimeout),void(p.dragInProgress=!0))}).bind("drag",kendo.throttle(function(e){if(p.dragInProgress){h=d?-e.x.initialDelta:e.x.initialDelta;var t=Math.max(0,Math.min(s,a+h));l=Math.round(t/s*100),m(t),c=r.top-o.top,u=r.left+t-o.left,d&&(u+=s-2*t),p.view()._updatePercentCompleteTooltip(c,u,l)}},15)).bind("dragend",function(){p.trigger("percentResizeEnd",{task:e,percentComplete:l/100}),g()}).bind("dragcancel",function(){m(a),g()}).userEvents.bind("select",function(){t()}))},_createDependencyDraggable:function(){var n,r,o,a=this,s=e(),l=e(),c=u.msie&&9>u.version,d=i.styles,h=function(){n.css("display","").removeClass(d.hovered),n.parent().removeClass(d.origin),n=null,p(!1),l=e(),s=e(),a.view()._removeDependencyDragHint(),a.dragInProgress=!1},p=function(e){l.hasClass(d.origin)||(l.find(_+d.taskDot).css("display",e?"block":""),s.toggleClass(d.hovered,e))};this.options.editable&&(c&&document.namespaces&&document.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+d.taskDot,holdToDrag:!1}),this._dependencyDraggable.bind("dragstart",function(t){var i,s;return a.trigger("dependencyDragStart")?void t.preventDefault():((n=t.currentTarget.css("display","block").addClass(d.hovered)).parent().addClass(d.origin),i=n.offset(),s=e(_+d.tasksWrapper).offset(),r=Math.round(i.left-s.left+n.outerHeight()/2),o=Math.round(i.top-s.top+n.outerWidth()/2),clearTimeout(a._tooltipTimeout),void(a.dragInProgress=!0))}).bind("drag",kendo.throttle(function(t){var n,i,u,h;a.dragInProgress&&(a.view()._removeDependencyDragHint(),n=e(kendo.elementUnderCursor(t)),i=e(_+d.tasksWrapper).offset(),u=t.x.location-i.left,h=t.y.location-i.top,a.view()._updateDependencyDragHint({x:r,y:o},{x:u,y:h},c),p(!1),s=n.hasClass(d.taskDot)?n:e(),l=n.closest(_+d.taskWrap),p(!0))},15)).bind("dragend",function(){var e,t,i,r,o;s.length&&(e=n.hasClass(d.taskDotStart),t=s.hasClass(d.taskDotStart),i=e?t?3:2:t?1:0,(r=a._taskByUid(n.siblings(_+d.task).attr("data-uid")))!==(o=a._taskByUid(s.siblings(_+d.task).attr("data-uid")))&&a.trigger("dependencyDragEnd",{type:i,predecessor:r,successor:o})),h()}).bind("dragcancel",function(){h()}).userEvents.bind("select",function(){t()}))},_selectable:function(){var t=this,n=i.styles;this.options.selectable&&this.wrapper.on(g+f,_+n.task,function(n){n.stopPropagation(),n.ctrlKey?t.trigger("clear"):t.trigger("select",{uid:e(this).attr("data-uid")})}).on(g+f,_+n.taskWrap,function(t){t.stopPropagation(),e(this).css("z-index","0");var i=e(document.elementFromPoint(t.clientX,t.clientY));i.hasClass(n.line)&&i.click(),e(this).css("z-index","")}).on(g+f,_+n.tasksWrapper,function(){t.selectDependency().length>0?t.clearSelection():t.trigger("clear")}).on(g+f,_+n.line,function(e){e.stopPropagation(),t.selectDependency(this)})},select:function(e){var t=this.wrapper.find(e),n=i.styles;return t.length?(this.clearSelection(),t.addClass(n.selected),void(kendo.support.mobileOS&&t.parent().addClass(n.taskWrapActive))):this.wrapper.find(_+n.task+_+n.selected)},selectDependency:function(t){var n,r=this.wrapper.find(t),o=i.styles;return r.length?(this.clearSelection(),this.trigger("clear"),n=e(r).attr("data-uid"),void this.wrapper.find(_+o.line+"[data-uid='"+n+"']").addClass(o.selected)):this.wrapper.find(_+o.line+_+o.selected)},clearSelection:function(){var e=i.styles;this.wrapper.find(_+e.selected).removeClass(e.selected),kendo.support.mobileOS&&this.wrapper.find(_+e.taskWrapActive).removeClass(e.taskWrapActive)},_attachEvents:function(){var t=this,n=i.styles;this.options.editable&&(this._tabindex(),this.wrapper.on(g+f,_+n.taskDelete,function(i){t.trigger("removeTask",{uid:e(this).closest(_+n.task).attr("data-uid")}),i.stopPropagation(),i.preventDefault()}).on("keydown"+f,function(e){var n;e.keyCode===h.DELETE&&(n=t.selectDependency()).length&&(t.trigger("removeDependency",{uid:n.attr("data-uid")}),t.clearSelection())}),kendo.support.mobileOS?this.touch=this.wrapper.kendoTouch({filter:_+n.task,doubletap:function(n){t.trigger("editTask",{uid:e(n.touch.currentTarget).attr("data-uid")})}}).data("kendoTouch"):this.wrapper.on("dblclick"+f,_+n.task,function(n){t.trigger("editTask",{uid:e(this).attr("data-uid")}),n.stopPropagation(),n.preventDefault()}))},_tooltip:function(){var t,n=this,r=this.options.tooltip,o=i.styles,a=function(e){t=e.clientX};r&&!1===r.visible||(kendo.support.mobileOS?(this.wrapper.on(g+f,_+o.taskDelete,function(e){e.stopPropagation(),n.view()._removeTaskTooltip()}).on(v+f,_+o.task,function(t){0===e(t.relatedTarget).parents(_+o.taskWrap,_+o.task).length&&n.view()._removeTaskTooltip()}),this.touch.bind("tap",function(t){var i=t.touch.target,r=n._taskByUid(e(i).attr("data-uid")),o=t.touch.x.client;n.view()._taskTooltip&&n.view()._removeTaskTooltip(),n.view()._createTaskTooltip(r,i,o)}).bind("doubletap",function(){n.view()._removeTaskTooltip()})):this.wrapper.on("mouseenter"+f,_+o.task,function(){var i=this,r=n._taskByUid(e(this).attr("data-uid"));n.dragInProgress||(n._tooltipTimeout=setTimeout(function(){n.view()._createTaskTooltip(r,i,t)},800),e(this).on(m,a))}).on(v+f,_+o.task,function(){clearTimeout(n._tooltipTimeout),n.view()._removeTaskTooltip(),e(this).off(m,a)}))}}),l(!0,i,{styles:n})}(window.kendo.jQuery),function(e,t){function n(e){return"["+d.attr("uid")+(e?"='"+e+"']":"]")}function i(t,n){var i=[],r=function(t){return e(t).parentsUntil("body").filter(function(e,t){var n=d.getComputedStyles(t,["overflow"]);return"visible"!=n.overflow}).add(window)}(t.parents("["+d.attr("role")+'="gantt"]'));t.attr(E,0),n&&r.each(function(t,n){i[t]=e(n).scrollTop()});try{t[0].setActive()}catch(e){t[0].focus()}n&&r.each(function(t,n){e(n).scrollTop(i[t])})}var r,o,a,s,l,c,u,d=window.kendo,h=d.support.browser,p=d.support.mobileOS,f=d.Observable,g=d.ui.Widget,m=d.data.DataSource,v=d.data.ObservableObject,_=d.data.ObservableArray,y=d.data.Query,b=e.isArray,w=e.inArray,k=d.isFunction,x=e.proxy,C=e.extend,T=e.isPlainObject,S=e.map,D=d.keys,A=".kendoGantt",M="p0",E="tabIndex",I="click",R="width",P="string",L={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"}},F="aria-activedescendant",B="gantt_active_cell",z="action-option-focused",H=".",N='<button class="#=styles.button# #=className#" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span>#=text#</button>',O=d.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'),V=d.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'),U={wrapper:"k-widget k-gantt",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",viewButtonDefault:"k-state-default",viewButton:"k-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}},W={append:{text:"Add Task",action:"add",className:U.toolbar.appendButton,iconClass:U.toolbar.iconPlus},pdf:{text:"Export to PDF",className:U.toolbar.pdfButton,iconClass:U.toolbar.iconPdf}},j=f.extend({init:function(e,t){f.fn.init.call(this),this.element=e,this.options=C(!0,{},this.options,t),this._popup()},options:{direction:"down",navigatable:!1},_current:function(e){var t=u.styles,n=this.list.find(H+t.focused),i=n[e]();i.length&&(n.removeClass(t.focused).removeAttr("id"),i.addClass(t.focused).attr("id",z),this.list.find("ul").removeAttr(F).attr(F,z))},_popup:function(){var t=this,n=u.styles,i="li."+n.item,r=H+n.toolbar.appendButton,o=this.options.messages.actions,a=this.options.navigatable;this.list=e(V({styles:n,actions:[{data:"add",text:o.addChild},{data:"insert-before",text:o.insertBefore},{data:"insert-after",text:o.insertAfter}]})),this.element.append(this.list),this.popup=new d.ui.Popup(this.list,C({anchor:this.element.find(r),open:function(){t._adjustListWidth()},animation:this.options.animation},L[this.options.direction])),this.element.on(I+A,r,function(i){var r=e(this).attr(d.attr("action"));i.preventDefault(),r?t.trigger("command",{type:r}):(t.popup.open(),a&&t.list.find("li:first").addClass(n.focused).attr("id",z).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":z}).focus())}),this.list.find(i).hover(function(){e(this).addClass(n.hovered)},function(){e(this).removeClass(n.hovered)}).end().on(I+A,i,function(){t.trigger("command",{type:e(this).attr(d.attr("action"))}),t.popup.close()}),a&&(this.popup.bind("close",function(){t.list.find(i).removeClass(n.focused).end().find("ul").attr(E,0),t.element.parents("["+d.attr("role")+'="gantt"]').find(H+n.gridContent+" > table:first").focus()}),this.list.find("ul").on("keydown"+A,function(e){switch(e.keyCode){case D.UP:e.preventDefault(),t._current("prev");break;case D.DOWN:e.preventDefault(),t._current("next");break;case D.ENTER:t.list.find(H+n.focused).click();break;case D.ESC:e.preventDefault(),t.popup.close()}}))},_adjustListWidth:function(){var e,t,n=this.list,i=u.styles,r=n[0].style.width,o=this.element.find(H+i.toolbar.appendButton);(n.data(R)||!r)&&(t=(e=window.getComputedStyle?window.getComputedStyle(o[0],null):0)?parseFloat(e.width):o.outerWidth(),e&&(h.mozilla||h.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),r="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:o.css("font-family"),width:r}).data(R,r))},destroy:function(){clearTimeout(this._focusTimeout),this.popup.destroy(),this.element.off(A),this.list.off(A),this.unbind()}}),q=function(e,t){return function(n){var i,r;if(r=(i=(n=b(i)?{data:n}:n)||{}).data,i.data=r,!(i instanceof e)&&i instanceof m)throw Error("Incorrect DataSource type. Only "+t+" instances are supported");return i instanceof e?i:new e(i)}},G=d.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}}),$=m.extend({init:function(e){m.fn.init.call(this,C(!0,{},{schema:{modelBase:G,model:G}},e))},successors:function(e){return this._dependencies("predecessorId",e)},predecessors:function(e){return this._dependencies("successorId",e)},dependencies:function(e){var t=this.predecessors(e),n=this.successors(e);return t.push.apply(t,n),t},_dependencies:function(e,t){var n=this.view(),i={field:e,operator:"eq",value:t};return new y(n).filter(i).toArray()}});$.create=q($,"GanttDependencyDataSource"),r=d.data.Model.define({duration:function(){return this.end-this.start},isMilestone:function(){return 0===this.duration()},_offset:function(e){var t,n,i=["start","end"];for(n=0;i.length>n;n++)t=new Date(this.get(i[n]).getTime()+e),this.set(i[n],t)},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:!0}},orderId:{type:"number",validation:{required:!0}},title:{type:"string",defaultValue:""},start:{type:"date",validation:{required:!0}},end:{type:"date",validation:{required:!0,dateCompare:function(e){var t,n,i,r,o,a;if(e.filter("[name=end], [name=start]").length){for(t=e.attr("name"),n=d.widgetInstance(e,d.ui),i={},r=e;r!==window&&!o;)o=(r=r.parent()).data("kendoEditable");return!(a=o?o.options.model:null)||(i.start=a.start,i.end=a.end,i[t]=n?n.value():d.parseDate(e.value()),i.end>=i.start)}return!0},message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:!0,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:!0}}}),(o=m.extend({init:function(e){m.fn.init.call(this,C(!0,{},{schema:{modelBase:r,model:r}},e))},remove:function(e){var t=e.get("parentId"),n=this.taskAllChildren(e);return this._removeItems(n),e=m.fn.remove.call(this,e),this._childRemoved(t,e.get("orderId")),e},add:function(e){return e?(e=this._toGanttTask(e),this.insert(this.taskSiblings(e).length,e)):t},insert:function(e,n){return n?((n=this._toGanttTask(n)).set("orderId",e),n=m.fn.insert.call(this,e,n),this._reorderSiblings(n,this.taskSiblings(n).length-1),this._resolveSummaryFields(this.taskParent(n)),n):t},taskChildren:function(e){var n,i=this.view(),r={field:"parentId",operator:"eq",value:null},o=this._sort||{field:"orderId",dir:"asc"};if(e){if((n=e.get("id"))===t||null===n||""===n)return[];r.value=n}return new y(i).filter(r).sort(o).toArray()},taskAllChildren:function(e){var t=[],n=this,i=function(e){var r=n.taskChildren(e);t.push.apply(t,r),S(r,i)};return e?i(e):t=this.view(),t},taskSiblings:function(e){if(!e)return null;var t=this.taskParent(e);return this.taskChildren(t)},taskParent:function(e){return e&&null!==e.get("parentId")?this.get(e.parentId):null},taskLevel:function(e){for(var t=0,n=this.taskParent(e);null!==n;)t+=1,n=this.taskParent(n);return t},taskTree:function(e){var t,n,i,r,o=[],a=this.taskChildren(e);for(n=0,i=a.length;i>n;n++)t=a[n],o.push(t),t.get("expanded")&&(r=this.taskTree(t),o.push.apply(o,r));return o},update:function(e,n){var i,r,o=this,a=function(e){var t=e.field,n=e.sender;switch(t){case"start":o._resolveSummaryStart(o.taskParent(n)),function(e,t){var n,i,r=o.taskAllChildren(e);for(n=0,i=r.length;i>n;n++)r[n]._offset(t)}(n,n.get(t).getTime()-i.getTime());break;case"end":o._resolveSummaryEnd(o.taskParent(n));break;case"percentComplete":o._resolveSummaryPercentComplete(o.taskParent(n));break;case"orderId":o._reorderSiblings(n,i)}};for(r in n.parentId!==t&&((i=e.get("parentId"))!==n.parentId&&(e.set("parentId",n.parentId),o._childRemoved(i,e.get("orderId")),e.set("orderId",o.taskSiblings(e).length-1),o._resolveSummaryFields(o.taskParent(e))),delete n.parentId),e.bind("change",a),n)i=e.get(r),e.set(r,n[r]);e.unbind("change",a)},_resolveSummaryFields:function(e){e&&(this._updateSummary(e),this.taskChildren(e).length&&(this._resolveSummaryStart(e),this._resolveSummaryEnd(e),this._resolveSummaryPercentComplete(e)))},_resolveSummaryStart:function(e){var t=this;this._updateSummaryRecursive(e,"start",function(e){var n,i,r,o=t.taskChildren(e),a=o[0].start.getTime();for(i=1,r=o.length;r>i;i++)a>(n=o[i].start.getTime())&&(a=n);return new Date(a)})},_resolveSummaryEnd:function(e){var t=this;this._updateSummaryRecursive(e,"end",function(e){var n,i,r,o=t.taskChildren(e),a=o[0].end.getTime();for(i=1,r=o.length;r>i;i++)(n=o[i].end.getTime())>a&&(a=n);return new Date(a)})},_resolveSummaryPercentComplete:function(e){var t=this;this._updateSummaryRecursive(e,"percentComplete",function(e){var n=t.taskChildren(e);return new y(n).aggregate([{field:"percentComplete",aggregate:"average"}]).percentComplete.average})},_updateSummaryRecursive:function(e,t,n){var i,r;e&&(i=n(e),e.set(t,i),(r=this.taskParent(e))&&this._updateSummaryRecursive(r,t,n))},_childRemoved:function(e,t){var n,i,r=null===e?null:this.get(e),o=this.taskChildren(r);for(n=t,i=o.length;i>n;n++)o[n].set("orderId",n);this._resolveSummaryFields(r)},_reorderSiblings:function(e,t){var n,i=e.get("orderId"),r=i>t,o=r?t:i,a=r?i:t,s=r?o:o+1,l=this.taskSiblings(e);for(a=Math.min(a,l.length-1),n=o;a>=n;n++)l[n]!==e&&(l[n].set("orderId",s),s+=1)},_updateSummary:function(e){if(null!==e){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_toGanttTask:function(e){if(!(e instanceof r)){var t=e;(e=this._createNewModel()).accept(t)}return e}})).create=q(o,"GanttDataSource"),C(!0,d.data,{GanttDataSource:o,GanttTask:r,GanttDependencyDataSource:$,GanttDependency:G}),a={desktop:{dateRange:function(t,n){var i={name:n.field},r=n.model.fields[n.field].validation;r&&T(r)&&r.message&&(i[d.attr("dateCompare-msg")]=r.message),e('<input type="text" required '+d.attr("type")+'="date" '+d.attr("role")+'="datetimepicker" '+d.attr("bind")+'="value:'+n.field+'" '+d.attr("validate")+"='true' />").attr(i).appendTo(t),e("<span "+d.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},resources:function(t,n){e('<a href="#" class="'+n.styles.button+'">'+n.messages.assignButton+"</a>").click(n.click).appendTo(t)}}},s=d.Observable.extend({init:function(e,t){d.Observable.fn.init.call(this),this.element=e,this.options=C(!0,{},this.options,t),this.createButton=this.options.createButton},fields:function(t,n){var i,r=this,o=this.options,a=o.messages.editor,s=o.resources;return o.editable.template?i=e.map(n.fields,function(e,t){return{field:t}}):(i=[{field:"title",title:a.title},{field:"start",title:a.start,editor:t.dateRange},{field:"end",title:a.end,editor:t.dateRange},{field:"percentComplete",title:a.percentComplete,format:M}],n.get(s.field)&&i.push({field:s.field,title:a.resources,messages:a,editor:t.resources,click:function(e){e.preventDefault(),s.editor(r.container.find(H+u.styles.popup.resourcesField),n)},styles:u.styles.popup})),i},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.resources,l=this.options.editable.template,c=C({},d.Template,this.options.templateSettings),h=c.paramName,p=u.styles.popup,f="";if(l)typeof l===P&&(l=window.unescape(l)),f+=d.template(l,c)(e);else for(i=0,r=t.length;r>i;i++)o=t[i],f+='<div class="'+p.editLabel+'"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",o.field===s.field&&(f+='<div class="'+p.resourcesField+'" style="display:none"></div>'),!e.editable||e.editable(o.field)?(n.push(o),f+="<div "+d.attr("container-for")+'="'+o.field+'" class="'+p.editField+'"></div>'):(a="#:",o.field?a+=(o=d.expr(o.field,h))+"==null?'':"+o:a+="''",a+="#",a=d.template(a,c),f+='<div class="'+p.editField+'">'+a(e)+"</div>");return f}}),l=s.extend({destroy:function(){this.close(),this.unbind()},editTask:function(e){this.editable=this._createPopupEditor(e)},close:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};this.editable&&this.container.is(":visible")?this.container.data("kendoWindow").bind("deactivate",t).close():t()},showDialog:function(t){var n,i,r,o,a=t.buttons,s=u.styles.popup,l=d.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',s.form,s.formContainer,s.message,t.text,s.buttonsContainer);for(n=0,i=a.length;i>n;n++)l+=this.createButton(a[n]);l+="</div></div></div>",r=this.element,this.popup&&this.popup.destroy(),(o=this.popup=e(l).appendTo(r).eq(0).on("click",H+s.button,function(t){t.preventDefault(),o.close();var n=e(t.currentTarget).index();a[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),r.focus()}}).getKendoWindow()).center().open()},_createPopupEditor:function(t){var n,i,r=this,o=this.options.messages,s=u.styles,l=s.popup,c=d.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',d.attr("uid"),t.uid,l.form,l.editForm,l.formContainer),h=this.fields(a.desktop,t),p=[];return c+=this._buildEditTemplate(t,h,p),c+='<div class="'+l.buttonsContainer+'">',c+=this.createButton({name:"update",text:o.save,className:u.styles.primary}),c+=this.createButton({name:"cancel",text:o.cancel}),c+=this.createButton({name:"delete",text:o.destroy}),c+="</div></div></div>",i=(n=this.container=e(c).appendTo(this.element).eq(0).kendoWindow(C({modal:!0,resizable:!1,draggable:!0,title:o.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&r.trigger("cancel",{container:n,model:t})&&e.preventDefault()}},{}))).kendoEditable({fields:p,model:t,clearContainer:!1,validateOnBlur:!0,target:r.options.target}).data("kendoEditable"),d.cycleForm(n),this.trigger("edit",{container:n,model:t})?r.trigger("cancel",{container:n,model:t}):(n.data("kendoWindow").center().open(),n.on(I+A,H+s.buttonCancel,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("cancel",{container:n,model:t})}),n.on(I+A,H+s.buttonSave,function(e){var i,o,s,l,c;for(e.preventDefault(),e.stopPropagation(),o={},l=0,c=(i=r.fields(a.desktop,t)).length;c>l;l++)o[s=i[l].field]=t.get(s);r.trigger("save",{container:n,model:t,updateInfo:o})}),n.on(I+A,H+s.buttonDelete,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("remove",{container:n,model:t})})),i}}),c=g.extend({init:function(e,t){g.fn.init.call(this,e,t),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],open:function(){this.window.center().open(),this.grid.resize(!0)},close:function(){this.window.bind("deactivate",x(this.destroy,this)).close()},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,g.fn.destroy.call(this),d.destroy(this.wrapper),this.element=this.wrapper=null},_attachHandlers:function(){var t=u.styles,n=this.grid,i=this._cancelProxy=x(this._cancel,this);this.container.on(I+A,H+t.buttonCancel,this._cancelProxy),this._saveProxy=x(this._save,this),this.container.on(I+A,H+t.buttonSave,this._saveProxy),this.window.bind("close",function(e){e.userTriggered&&i(e)}),n.wrapper.on(I+A,"input[type='checkbox']",function(){var t=e(this),i=e(t).closest("tr"),r=n.dataSource.getByUid(i.attr(d.attr("uid"))),o=e(t).is(":checked")?1:"";r.set("value",o)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(A),this.grid.wrapper.off()},_cancel:function(e){e.preventDefault(),this.close()},_save:function(e){e.preventDefault(),this._updateModel(),this.wrapper.is(H+u.styles.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_initContainer:function(){var t=u.styles.popup,n=d.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',t.form,t.editForm,t.formContainer,t.resourcesFormContainer);n=e(n),this.container=n.find(H+t.resourcesFormContainer),this.window=n.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var t=this.options.messages,n=e('<div id="resources-grid"/>').appendTo(this.container);this.grid=new d.ui.Grid(n,{columns:[{field:"name",title:t.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:t.unitsHeader,template:function(e){var t=e.format,n=null!==e.value?e.value:"";return t?d.toString(n,t):n}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:this.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_createButtons:function(){var e,t,n=this.options.buttons,i='<div class="'+u.styles.popup.buttonsContainer+'">';for(e=0,t=n.length;t>e;e++)i+=this.createButton(n[e]);i+="</div>",this.container.append(i)},_updateModel:function(){var e,t,n,i=[],r=this.grid.dataSource.data();for(t=0,n=r.length;n>t;t++)null!==(e=r[t].get("value"))&&e>0&&i.push(r[t]);this.model[this.resourcesField]=i}}),u=g.extend({init:function(e,t){b(t)&&(t={dataSource:t}),g.fn.init.call(this,e,t),this._wrapper(),this._resources(),this._timeline(),this._toolbar(),this._footer(),this._adjustDimensions(),this._preventRefresh=!0,this.view(this.timeline._selectedViewName),this._preventRefresh=!1,this._dataSource(),this._assignments(),this._dropDowns(),this._list(),this._dependencies(),this._resizable(),this._scrollable(),this._dataBind(),this._attachEvents(),this._createEditor(),d.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd"],options:{name:"Gantt",autoBind:!0,navigatable:!1,selectable:!0,editable:!0,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskConfirmation:"Are you sure you want to delete this task?",deleteDependencyConfirmation:"Are you sure you want to delete this dependency?",deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assignButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:!0,showWorkDays:!0,toolbar:null,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:!0,height:600,listWidth:"30%"},select:function(e){var n=this.list;return e?(n.select(e),t):n.select()},clearSelection:function(){this.list.clearSelection()},destroy:function(){g.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.dependencies&&(this.dependencies.unbind("change",this._dependencyRefreshHandler),this.dependencies.unbind("error",this._dependencyErrorHandler)),this.timeline&&(this.timeline.unbind(),this.timeline.destroy()),this.list&&(this.list.unbind(),this.list.destroy()),this.footerDropDown&&this.footerDropDown.destroy(),this.headerDropDown&&this.headerDropDown.destroy(),this._editor&&this._editor.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.toolbar.off(A),e(window).off("resize"+A,this._resizeHandler),e(this.wrapper).off(A),this.toolbar=null,this.footer=null},_attachEvents:function(){this._resizeHandler=x(this.resize,this,!1),e(window).on("resize"+A,this._resizeHandler)},_wrapper:function(){var e=u.styles,t=[e.icon,e.resizeHandle].join(" "),n=this.options,i=n.height,r=n.width;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>"),this.wrapper.find(H+e.list).width(n.listWidth),i&&this.wrapper.height(i),r&&this.wrapper.width(r)},_toolbar:function(){var t,n,i=this,r=u.styles,o=H+r.toolbar.views+" > li",a=H+r.toolbar.pdfButton,s=r.hovered,l=this.options.toolbar,c=e("<div class='"+r.toolbar.actions+"'>");k(l)||(l=typeof l===P?l:this._actions(l),l=x(d.template(l),this)),n=e(O({ns:d.ns,views:this.timeline.views,styles:r.toolbar})),c.append(l({})),t=e("<div class='"+r.toolbar.headerWrapper+"'>").append(c).append(n),this.wrapper.prepend(t),this.toolbar=t,t.on(I+A,o,function(t){var n,r;t.preventDefault(),n=i.list,r=e(this).attr(d.attr("name")),n.editable&&n.editable.trigger("validate")||i.trigger("navigate",{view:r})||i.view(r)}).on(I+A,a,function(){i.saveAsPDF()}),this.wrapper.find(H+r.toolbar.toolbar+" li").hover(function(){e(this).addClass(s)},function(){e(this).removeClass(s)})},_actions:function(){var e,t,n=this.options,i=n.toolbar,r="";if(!b(i)){if(!n.editable)return r;i=["append"]}for(e=0,t=i.length;t>e;e++)r+=this._createButton(i[e]);return r},_footer:function(){var t,n,i,r,o;this.options.editable&&(t=u.styles.toolbar,n=this.options.messages.actions,i=e(d.template(N)(C(!0,{styles:t},W.append,{text:n.append}))),r=e("<div class='"+t.actions+"'>").append(i),o=e("<div class='"+t.footerWrapper+"'>").append(r),this.wrapper.append(o),this.footer=o)},_createButton:function(e){var t=e.template||N,n=this.options.messages.actions,i=typeof e===P?e:e.name||e.text,r={iconClass:"",action:"",text:i,className:W[i]?W[i].className:"k-gantt-"+(i||"").replace(/\s/g,""),styles:u.styles.toolbar};if(!(i||T(e)&&e.template))throw Error("Custom commands should have name specified");return r=C(!0,r,W[i],{text:n[i]}),T(e)&&(e.className&&w(r.className,e.className.split(" "))<0&&(e.className+=" "+r.className),r=C(!0,r,e)),d.template(t)(r)},_adjustDimensions:function(){var e=this.element,t=u.styles,n=H+t.list,i=H+t.timeline,r=H+t.splitBar,o=this.toolbar.outerHeight(),a=this.footer?this.footer.outerHeight():0,s=e.height(),l=e.width(),c=e.find(r).outerWidth(),d=e.find(n).outerWidth();e.children([n,i,r].join(",")).height(s-(o+a)).end().children(i).width(l-(c+d))},_scrollTo:function(e){var t=this.timeline.view(),i=d.attr("uid"),r="string"==typeof e?e:e.closest("tr"+n()).attr(i),o=t.content.find(n(r));0!==o.length&&t._scrollTo(o)},_dropDowns:function(){var e=this,t=H+u.styles.toolbar.actions,n=this.options.messages.actions,i=this.dataSource,r=this.timeline,o=function(t){var n,o=t.type,a=i._createNewModel(),s=e.dataItem(e.select()),l=i.taskParent(s),c=r.view()._timeSlots()[0],u="add"===o?s:l,d=e.list.editable;d&&d.trigger("validate")||(a.set("title","New task"),u?(a.set("parentId",u.get("id")),a.set("start",u.get("start")),a.set("end",u.get("end"))):(a.set("start",c.start),a.set("end",c.end)),"add"!==o&&(n=s.get("orderId"),n="insert-before"===o?n:n+1),e._createTask(a,n))};this.options.editable&&(this.footerDropDown=new j(this.footer.children(t).eq(0),{messages:{actions:n},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:e.options.navigatable}),this.headerDropDown=new j(this.toolbar.children(t).eq(0),{messages:{actions:n},navigatable:e.options.navigatable}),this.footerDropDown.bind("command",o),this.headerDropDown.bind("command",o))},_list:function(){var e,t,n=this,r=n.options.navigatable,o=u.styles,a=this.wrapper.find(H+o.list),s=a.find("> div"),l=this.wrapper.find(H+o.toolbar.actions+" > button"),c={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,listWidth:a.outerWidth(),resourcesField:this.resources.field},h=c.columns,p=function(){r&&(n._current(n._cachedCurrent),i(n.list.content.find("table"),!0)),delete n._cachedCurrent};for(t=0;h.length>t;t++)(e=h[t]).field===this.resources.field&&"function"!=typeof e.editor&&(e.editor=x(this._createResourceEditor,this));this.list=new d.ui.GanttList(s,c),this.list.bind("render",function(){n._navigatable()},!0).bind("edit",function(e){n._cachedCurrent=e.cell,n.trigger("edit",{task:e.model,container:e.cell})&&e.preventDefault()}).bind("cancel",function(e){n.trigger("cancel",{task:e.model,container:e.cell})&&e.preventDefault(),p()}).bind("update",function(e){n._updateTask(e.task,e.updateInfo),p()}).bind("change",function(){n.trigger("change");var e=n.list.select();e.length?(l.removeAttr("data-action","add"),n.timeline.select("[data-uid='"+e.attr("data-uid")+"']")):(l.attr("data-action","add"),n.timeline.clearSelection())})},_timeline:function(){var e=this,n=u.styles,i=function(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}(C(!0,{resourcesField:this.resources.field},this.options)),r=this.wrapper.find(H+n.timeline+" > div");this.timeline=new d.ui.GanttTimeline(r,i),this.timeline.bind("navigate",function(t){e.toolbar.find(H+n.toolbar.views+" > li").removeClass(n.selected).end().find(H+n.toolbar.viewButton+"-"+t.view.replace(/\./g,"\\.").toLowerCase()).addClass(n.selected),e.refresh()}).bind("moveStart",function(n){var i=e.list.editable;return i&&i.trigger("validate")?(n.preventDefault(),t):(e.trigger("moveStart",{task:n.task})&&n.preventDefault(),t)}).bind("move",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("move",{task:n,start:i,end:r})&&t.preventDefault()}).bind("moveEnd",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("moveEnd",{task:n,start:i,end:r})||e._updateTask(e.dataSource.getByUid(n.uid),{start:i,end:r})}).bind("resizeStart",function(n){var i=e.list.editable;return i&&i.trigger("validate")?(n.preventDefault(),t):(e.trigger("resizeStart",{task:n.task})&&n.preventDefault(),t)}).bind("resize",function(t){e.trigger("resize",{task:t.task,start:t.start,end:t.end})&&t.preventDefault()}).bind("resizeEnd",function(t){var n=t.task,i={};t.resizeStart?i.start=t.start:i.end=t.end,e.trigger("resizeEnd",{task:n,start:t.start,end:t.end})||e._updateTask(e.dataSource.getByUid(n.uid),i)}).bind("percentResizeStart",function(t){var n=e.list.editable;n&&n.trigger("validate")&&t.preventDefault()}).bind("percentResizeEnd",function(t){e._updateTask(e.dataSource.getByUid(t.task.uid),{percentComplete:t.percentComplete})}).bind("dependencyDragStart",function(t){var n=e.list.editable;n&&n.trigger("validate")&&t.preventDefault()}).bind("dependencyDragEnd",function(t){var n=e.dependencies._createNewModel({type:t.type,predecessorId:t.predecessor.id,successorId:t.successor.id});e._createDependency(n)}).bind("select",function(t){var n=e.list.editable;n&&n.trigger("validate"),e.select("[data-uid='"+t.uid+"']")}).bind("editTask",function(t){var n=e.list.editable;n&&n.trigger("validate")||e.editTask(t.uid)}).bind("clear",function(){e.clearSelection()}).bind("removeTask",function(t){var n=e.list.editable;n&&n.trigger("validate")||e.removeTask(e.dataSource.getByUid(t.uid))}).bind("removeDependency",function(t){var n=e.list.editable;n&&n.trigger("validate")||e.removeDependency(e.dependencies.getByUid(t.uid))})},_dataSource:function(){var e=this.options.dataSource;e=b(e)?{data:e}:e,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=x(this.refresh,this),this._progressHandler=x(this._requestStart,this),this._errorHandler=x(this._error,this)),this.dataSource=d.data.GanttDataSource.create(e).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{},t=b(e)?{data:e}:e;this.dependencies&&this._dependencyRefreshHandler?this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler):(this._dependencyRefreshHandler=x(this.refreshDependencies,this),this._dependencyErrorHandler=x(this._error,this)),this.dependencies=d.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources,t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"},C(this.resources,e),this.resources.dataSource=d.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments,t=e.dataSource||{};this.assignments?this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler):this._assignmentsRefreshHandler=x(this.refresh,this),this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"},C(this.assignments,e),this.assignments.dataSource=d.data.DataSource.create(t),this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var e=this;(this._editor=new l(this.wrapper,C({},this.options,{target:this,resources:{field:this.resources.field,editor:x(this._createResourceEditor,this)},createButton:x(this._createPopupButton,this)}))).bind("cancel",function(n){var i=e.dataSource.getByUid(n.model.uid);return e.trigger("cancel",{container:n.container,task:i})?(n.preventDefault(),t):(e.cancelTask(),t)}).bind("edit",function(t){var n=e.dataSource.getByUid(t.model.uid);e.trigger("edit",{container:t.container,task:n})&&t.preventDefault()}).bind("save",function(t){var n=e.dataSource.getByUid(t.model.uid);e.saveTask(n,t.updateInfo)}).bind("remove",function(t){e.removeTask(t.model.uid)})},_createResourceEditor:function(e,t){var n=this,i=t instanceof v?t:t.model,r=i.get("id"),o=this.options.messages,a=n.resources.field;(this._resourceEditor=new c(e,{resourcesField:a,data:this._wrapResourceData(r),model:i,messages:C({},o.editor),buttons:[{name:"update",text:o.save,className:u.styles.primary},{name:"cancel",text:o.cancel}],createButton:x(this._createPopupButton,this),save:function(e){n._updateAssignments(e.model.get("id"),e.model.get(a))}})).open()},_createPopupButton:function(e){var t=e.name||e.text,n={className:u.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!(t||T(e)&&e.template))throw Error("Custom commands should have name specified");return T(e)&&(e.className&&(e.className+=" "+n.className),n=C(!0,n,e)),d.template('<a class="#=className#" #=attr# href="\\#">#=text#</a>')(n)},view:function(e){return this.timeline.view(e)},dataItem:function(e){var t,n;return e?(n=(t=this.list).content.find(e),t._modelFromElement(n)):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.list._setDataSource(this.dataSource),this.options.autoBind&&e.fetch()},setDependenciesDataSource:function(e){this.options.dependencies=e,this._dependencies(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){for(var n,i,r,o,a,s,l,c=this.assignments.dataSource,u=this.assignments.dataTaskIdField,d=this.assignments.dataResourceIdField,h=!1,p=new y(c.view()).filter({field:u,operator:"eq",value:e}).toArray();p.length;){for(n=p[0],o=0,a=t.length;a>o;o++)if(i=t[o],n.get(d)===i.get("id")){r=t[o].get("value"),this._updateAssignment(n,r),t.splice(o,1),h=!0;break}h||this._removeAssignment(n),h=!1,p.shift()}for(s=0,l=t.length;l>s;s++)i=t[s],this._createAssignment(i,e);c.sync()},cancelTask:function(){var e=this._editor;e.container&&e.close()},editTask:function(e){var t,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&((t=this.dataSource._createNewModel(n.toJSON())).uid=n.uid,this.cancelTask(),this._editTask(t))},_editTask:function(e){this._editor.editTask(e)},saveTask:function(e,t){var n=this._editor,i=n.container,r=n.editable;i&&r&&r.end()&&this._updateTask(e,t)},_updateTask:function(e,t){var n=this.resources.field;this.trigger("save",{task:e,values:t})||(this._preventRefresh=!0,this.dataSource.update(e,t),t[n]&&this._updateAssignments(e.get("id"),t[n]),this._syncDataSource())},_updateAssignment:function(e,t){var n=this.assignments.dataValueField;e.set(n,t)},removeTask:function(e){var t=this,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&this._taskConfirm(function(e){e||t._removeTask(n)},n)},_createTask:function(e,n){if(!this.trigger("add",{task:e,dependency:null})){var i=this.dataSource;this._preventRefresh=!0,n===t?i.add(e):i.insert(n,e),this._scrollToUid=e.uid,this._syncDataSource()}},_createDependency:function(e){this.trigger("add",{task:null,dependency:e})||(this._preventDependencyRefresh=!0,this.dependencies.add(e),this._preventDependencyRefresh=!1,this.dependencies.sync())},_createAssignment:function(e,t){var n=this.assignments,i=n.dataSource,r=n.dataTaskIdField,o=n.dataResourceIdField,a=n.dataValueField,s=i._createNewModel();s[r]=t,s[o]=e.get("id"),s[a]=e.get("value"),i.add(s)},removeDependency:function(e){var t=this,n="string"==typeof e?this.dependencies.getByUid(e):e;n&&this._dependencyConfirm(function(e){e||t._removeDependency(n)},n)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=!0;for(var n=0,i=t.length;i>n;n++)this.dependencies.remove(t[n]);this._preventDependencyRefresh=!1,this.dependencies.sync()},_removeTaskAssignments:function(e){var t,n,i=this.assignments.dataSource,r=i.view(),o={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};for(r=new y(r).filter(o).toArray(),this._preventRefresh=!0,t=0,n=r.length;n>t;t++)i.remove(r[t]);this._preventRefresh=!1,i.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);this.trigger("remove",{task:e,dependencies:t})||(this._removeTaskDependencies(e,t),this._removeTaskAssignments(e),this._preventRefresh=!0,this.dataSource.remove(e)&&this._syncDataSource(),this._preventRefresh=!1)},_removeDependency:function(e){this.trigger("remove",{task:null,dependencies:[e]})||this.dependencies.remove(e)&&this.dependencies.sync()},_removeAssignment:function(e){this.assignments.dataSource.remove(e)},_taskConfirm:function(e,t){var n=this.options.messages;this._confirm(e,{model:t,text:n.deleteTaskConfirmation,title:n.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){var n=this.options.messages;this._confirm(e,{model:t,text:n.deleteDependencyConfirmation,title:n.deleteDependencyWindowTitle})},_confirm:function(e,t){var n,i,r=this.options.editable;!0===r||!1!==r.confirmation?(i=[{name:"delete",text:(n=this.options.messages).destroy,className:u.styles.primary,click:function(){e()}},{name:"cancel",text:n.cancel,click:function(){e(!0)}}],this.showDialog(C(!0,{},t,{buttons:i}))):e()},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){var e,t,i,r,o;this._preventRefresh||this.list.editable||(this._progress(!1),e=this.dataSource.taskTree(),t=this._scrollToUid,o=-1,this.current&&(r=this.current.closest("tr").attr(d.attr("uid")),o=this.current.index()),this.trigger("dataBinding")||(0!==this.resources.dataSource.data().length&&this._assignResources(e),this._editor&&this._editor.close(),this.clearSelection(),this.list._render(e),this.timeline._render(e),this.timeline._renderDependencies(this.dependencies.view()),t&&(this._scrollTo(t),this.select(n(t))),(t||r)&&o>=0&&(i=this.list.content.find("tr"+n(t||r)+" > td:eq("+o+")"),this._current(i)),this._scrollToUid=null,this.trigger("dataBound")))},refreshDependencies:function(){this._preventDependencyRefresh||this.trigger("dataBinding")||(this.timeline._renderDependencies(this.dependencies.view()),this.trigger("dataBound"))},_assignResources:function(e){var t,n,i=this.resources,r=this.assignments,o=function(){var e=r.dataSource.view(),t={field:r.dataTaskIdField};return new y(e).group(t).toArray()}(),a=function(e,t){var n,r,a=e.get("id");for(d.setter(i.field)(e,new _([])),n=0,r=o.length;r>n;n++)o[n].value===a&&t(e,o[n].items)},s=function(e,t){var n,o,a,s,l,c,u,h;for(n=0,o=t.length;o>n;n++)a=t[n],s=i.dataSource.get(a.get(r.dataResourceIdField)),l=a.get(r.dataValueField),c=a.get(r.dataResourceIdField),u=s.get(i.dataFormatField)||M,h=d.toString(l,u),e[i.field].push(new v({id:c,name:s.get(i.dataTextField),color:s.get(i.dataColorField),value:l,formatedValue:h}))};for(t=0,n=e.length;n>t;t++)a(e[t],s)},_wrapResourceData:function(e){var t,n,i,r=this,o=[],a=this.resources.dataSource.view(),s=this.assignments.dataSource.view(),l=new y(s).filter({field:r.assignments.dataTaskIdField,operator:"eq",value:e}).toArray(),c=function(e){var t=null;return new y(l).filter({field:r.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(r.assignments.dataValueField)}),t};for(n=0,i=a.length;i>n;n++)t=a[n],o.push({id:t.get("id"),name:t.get(r.resources.dataTextField),format:t.get(r.resources.dataFormatField)||M,value:c(t.id)});return o},_syncDataSource:function(){this._preventRefresh=!1,this._requestStart(),this.dataSource.sync()},_requestStart:function(){this._progress(!0)},_error:function(){this._progress(!1)},_progress:function(e){d.ui.progress(this.element,e)},_resizable:function(){var t,n,i,r=this,o=this.wrapper,a=u.styles,s=H+a.gridContent,l=o.find(H+a.list),c=o.find(H+a.timeline);this._resizeDraggable=o.find(H+a.splitBar).height(l.height()).hover(function(){e(this).addClass(a.splitBarHover)},function(){e(this).removeClass(a.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:H+a.splitBar,start:function(){t=l.width(),n=c.width(),i=c.find(s).scrollLeft()},resize:function(e){var a=e.x.initialDelta;d.support.isRtl(o)&&(a*=-1),0>t+a||0>n-a||(l.width(t+a),c.width(n-a),c.find(s).scrollLeft(i+a),r.timeline.view()._renderCurrentTime())}}).data("kendoResizable")},_scrollable:function(){var t=u.styles,n=H+t.gridContent,i=H+t.gridHeaderWrap,r=this.timeline.element.find(i),o=this.timeline.element.find(n),a=this.list.element.find(i),s=this.list.element.find(n);p&&s.css("overflow-y","auto"),o.on("scroll",function(){r.scrollLeft(this.scrollLeft),s.scrollTop(this.scrollTop)}),s.on("scroll",function(){a.scrollLeft(this.scrollLeft),o.scrollTop(this.scrollTop)}).on("DOMMouseScroll"+A+" mousewheel"+A,function(t){var n=o.scrollTop(),i=d.wheelDeltaY(t);i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+A,!1),o.scrollTop(n+-i))})},_navigatable:function(){var r,o=this,a=this.options.navigatable,s=this.options.editable,l=this.list.header.find("table"),c=this.list.content.find("table"),h=u.styles,p=d.support.isRtl(this.wrapper),f=this.timeline.element.find(H+h.gridContent),g=l.add(c),m=n(),v=!1,_=!0,y=function(e){var t=o.timeline.view()._timeSlots()[0].offsetWidth;f.scrollLeft(f.scrollLeft()+(e?-t:t))},b=function(e){var t=o.current.parent("tr"+n()),r=o.current.index(),a=t[e]();0!==o.select().length&&o.clearSelection(),0!==a.length?(o._current(a.children("td:eq("+r+")")),o._scrollTo(o.current)):o.current.is("td")&&"prev"==e?i(l):o.current.is("th")&&"next"==e&&i(c)},w=function(e){var t=o.current[e]();0!==t.length&&(o._current(t),r=o.current.index())},k=function(e){var t=o.dataItem(o.current);t.summary&&t.expanded!==e&&t.set("expanded",e)},x=function(){var e,t;o.options.editable&&!o.list.editable&&(e=o.select(),t=d.attr("uid"),e.length&&o.removeTask(e.attr(t)))};return e(this.wrapper).on("mousedown"+A,"tr"+m+", div"+m+":not("+H+h.line+")",function(t){var r,l=e(t.currentTarget),c=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");t.ctrlKey||(a&&(r=l.is("tr")?e(t.target).closest("td"):o.list.content.find("tr"+n(l.attr(d.attr("uid")))+" > td:first"),o._current(r)),!a&&!s||c||(o._focusTimeout=setTimeout(function(){i(o.list.content.find("table"),!0)},2)))}),!0!==a?(c.on("keydown"+A,function(e){e.keyCode==D.DELETE&&x()}),t):(g.on("focus"+A,function(){var t=this===c.get(0)?"td":"th",n=(e(this),o.select()),i=o.current||e(n.length?n:this).find(t+":eq("+(r||0)+")");o._current(i)}).on("blur"+A,function(){o._current(),this==l&&e(this).attr(E,-1)}).on("keydown"+A,function(e){var t,n=e.keyCode;if(o.current)switch(t=o.current.is("td"),n){case D.RIGHT:e.preventDefault(),e.altKey?y():e.ctrlKey?k(p?v:_):w(p?"prev":"next");break;case D.LEFT:e.preventDefault(),e.altKey?y(!0):e.ctrlKey?k(p?_:v):w(p?"next":"prev");break;case D.UP:e.preventDefault(),b("prev");break;case D.DOWN:e.preventDefault(),b("next");break;case D.SPACEBAR:e.preventDefault(),t&&o.select(o.current.closest("tr"));break;case D.ENTER:e.preventDefault(),t?o.options.editable&&(o._cachedCurrent=o.current,o.list._startEditHandler(o.current),e.stopPropagation()):o.current.children("a.k-link").click();break;case D.ESC:e.stopPropagation();break;case D.DELETE:t&&x();break;default:n>=49&&57>=n&&o.view(o.timeline._viewByIndex(n-49))}}),t)},_current:function(t){var n,i=u.styles;this.current&&this.current.length&&this.current.removeClass(i.focused).removeAttr("id"),t&&t.length?(this.current=t.addClass(i.focused).attr("id",B),(n=e(d._activeElement())).is("table")&&this.wrapper.find(n).length>0&&n.removeAttr(F).attr(F,B)):this.current=null},_dataBind:function(){var t,n=this;n.options.autoBind&&(this._preventRefresh=!0,this._preventDependencyRefresh=!0,t=e.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()}),e.when.apply(null,t).done(function(){n._preventRefresh=!1,n._preventDependencyRefresh=!1,n.refresh()}))},_resize:function(){this._adjustDimensions(),this.timeline.view()._adjustHeight(),this.timeline.view()._renderCurrentTime(),this.list._adjustHeight()}}),d.PDFMixin&&(d.PDFMixin.extend(u.fn),u.fn._drawPDF=function(){var e="."+U.list,t=this.wrapper.find(e).width(),n=this.wrapper.clone();return n.find(e).css("width",t),this._drawPDFShadow({content:n})}),d.ui.plugin(u),C(!0,u,{styles:U})}(window.kendo.jQuery),function(e,t){function n(e){return function(t){return t[e]}}function i(e){return function(t){return!e(t)}}function r(){return"none"!==this.style.display}function o(n){var i,r=n.find(">tr:not(.k-filter-row)"),o=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},a=e();return r.length>1&&(a=r.find("th").filter(o).filter(function(){return this.rowSpan>1})),a=a.add(r.last().find("th").filter(o)),i=kendo.attr("index"),a.sort(function(n,r){var o,a;return n=e(n),r=e(r),o=n.attr(i),a=r.attr(i),o===t&&(o=e(n).index()),a===t&&(a=e(r).index()),(o=parseInt(o,10))>(a=parseInt(a,10))?1:a>o?-1:0}),a}function a(e){var t,n,i=[],r=e.className;for(t=0,n=e.level;n>t;t++)i.push(g("span",{className:r}));return i}function s(e){var t,n,i,r=0;for(n=0,i=e.length;i>n;n++)(t=e[n].style.width)&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}var l,c,u,d,h=kendo.data,p=e.extend,f=kendo.dom,g=f.element,m=f.text,v=f.html,_=kendo.ui,y=_.DataBoundWidget,b=h.DataSource,w=h.ObservableArray,k=h.Query,x=h.Model,C=e.proxy,T=e.map,S=e.grep,D=e.inArray,A=e.isPlainObject,M=Array.prototype.push,E="string",I="change",R="error",P="progress",L=".",F=".kendoTreeList",B="click",z="edit",H="save",N="expand",O="collapse",V="remove",U="dataBinding",W="dataBound",j="cancel",q="filterMenuInit",G="columnHide",$="columnShow",Y="columnReorder",Q="columnResize",X="columnMenuInit",K="columnLock",Z="columnUnlock",J="parentId",ee={wrapper:"k-treelist k-grid k-widget",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",loading:"k-loading",refresh:"k-i-refresh",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},te={create:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-delete",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-update",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},excel:{imageClass:"k-i-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"}},ne=x.define({id:"id",parentId:J,fields:{id:{type:"number"},parentId:{type:"number",nullable:!0}},init:function(e){x.fn.init.call(this,e),this._loaded=!1,this.parentIdField||(this.parentIdField=J),this.parentId=this.get(this.parentIdField)},accept:function(e){x.fn.accept.call(this,e),this.parentId=this.get(this.parentIdField)},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return x.fn.shouldSerialize.call(this,e)&&"_loaded"!==e&&"_error"!=e&&"_edit"!=e&&!("parentId"!==this.parentIdField&&"parentId"===e)}});ne.parentIdField=J,ne.define=function(e,n){var i,r;return n===t&&(n=e,e=ne),i=n.parentId||J,delete n.parentId,n.parentIdField=i,r=x.define(e,n),i&&(r.parentIdField=i),r},(l=b.extend({init:function(e){b.fn.init.call(this,p(!0,{},{schema:{modelBase:ne,model:ne}},e))},_createNewModel:function(e){var t={},n=e instanceof x;return n&&(t=e),t=b.fn._createNewModel.call(this,t),n||(e.parentId&&(e[t.parentIdField]=e.parentId),t.accept(e)),t},_shouldWrap:function(){return!0},_readData:function(e){var t=this.data();return e=b.fn._readData.call(this,e),this._concat(e,t),e instanceof w?e:t},_concat:function(e,t){var n,i=t.length;for(n=0;e.length>n;n++)t[i++]=e[n];t.length=i},_readAggregates:function(e){var t=p(this._aggregateResult,this.reader.aggregates(e));return""in t&&(t[this._defaultParentId()]=t[""],delete t[""]),t},remove:function(e){var t=this._subtree(this._childrenMap(this.data()),e.id);this._removeItems(t),b.fn.remove.call(this,e)},_filterCallback:function(e){var t,n,i={},r=[],o=e.toArray();for(t=0;o.length>t;t++)for(n=o[t];n&&(i[n.id]||(i[n.id]=!0,r.push(n)),!i[n.parentId]);)i[n.parentId]=!0,(n=this.parentNode(n))&&r.push(n);return new k(r)},_subtree:function(e,t){var n,i,r=e[t]||[],o=this._defaultParentId();for(n=0,i=r.length;i>n;n++)r[n].id!==o&&(r=r.concat(this._subtree(e,r[n].id)));return r},_childrenMap:function(e){var t,n,i,r,o={};for(e=this._observeView(e),t=0;e.length>t;t++)i=(n=e[t]).id,r=n.parentId,o[i]=o[i]||[],o[r]=o[r]||[],o[r].push(n);return o},_calculateAggregates:function(e,t){var n,i,r,o,a,s;for(n={},(a=(t=t||{}).filter)&&(e=k.process(e,{filter:a,filterCallback:C(this._filterCallback,this)}).data),s=this._childrenMap(e),n[this._defaultParentId()]=new k(this._subtree(s,this._defaultParentId())).aggregate(t.aggregate),o=0;e.length>o;o++)i=e[o],r=this._subtree(s,i.id),n[i.id]=new k(r).aggregate(t.aggregate);return n},_queryProcess:function(e,t){var n,i,r,o,a,s,l;for((t=t||{}).filterCallback=C(this._filterCallback,this),n=this._defaultParentId(),i=k.process(e,t),e=(r=this._childrenMap(i.data))[n]||[],a=0;e.length>a;a++)(s=e[a]).id!==n&&(o=!(!(l=r[s.id])||!l.length),s.loaded()||s.loaded(o||!s.hasChildren),(s.loaded()||!0!==s.hasChildren)&&(s.hasChildren=o),o&&(e=e.slice(0,a+1).concat(l,e.slice(a+1))));return i.data=e,i},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(!0),t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},success:function(e,t){return t&&t.id||(this._data=this._observe([])),b.fn.success.call(this,e,t)},load:function(t){var n="_query",i=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates,r=e.Deferred().resolve().promise();if(t.loaded()){if(i)return r}else t.hasChildren&&(n="read");return this[n]({id:t.id}).then(C(this._modelLoaded,this,t.id),C(this._modelError,this,t.id))},contains:function(e,t){for(var n=e.id;t;){if(t.parentId===n)return!0;t=this.parentNode(t)}return!1},_byParentId:function(e,t){var n,i,r=[],o=this.view();if(e===t)return[];for(i=0;o.length>i;i++)(n=o.at(i)).parentId==e&&r.push(n);return r},_defaultParentId:function(){return this.reader.model.fn.defaults[this.reader.model.parentIdField]},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},rootNodes:function(){return this._byParentId(this._defaultParentId())},parentNode:function(e){return this.get(e.parentId)},level:function(e){var t=-1;e instanceof ne||(e=this.get(e));do{e=this.parentNode(e),t++}while(e);return t},filter:function(e){var n=b.fn.filter;return e===t?n.call(this,e):(n.call(this,e),t)}})).create=function(t){return e.isArray(t)?t={data:t}:t instanceof w&&(t={data:t.toJSON()}),t instanceof l?t:new l(t)},c=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),t=this.options=p(!0,{},this.options,t),this.element=e,this.bind(this.events,t),this.model=this.options.model,this.fields=this._fields(this.options.columns),this._initContainer(),this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new _.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:e.clearContainer,model:this.model})},_isEditable:function(e){return e.field&&this.model.editable(e.field)},_fields:function(e){var t,n,i,r=[];for(t=0,n=e.length;n>t;t++)i=e[t],this._isEditable(i)&&r.push({field:i.field,format:i.format,editor:i.editor});return r},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty().end().removeAttr(kendo.attr("role")),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),u=c.extend({init:function(e,t){c.fn.init.call(this,e,t),this._attachHandlers(),kendo.cycleForm(this.wrapper),this.open()},events:[j,H],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t=this.options,n=[];this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>'),t.template?(this._appendTemplate(n),this.fields=[]):this._appendFields(n),this._appendButtons(n),new f.Tree(this.wrapper.children()[0]).render(n),this.wrapper.appendTo(t.appendTo),this.window=new _.Window(this.wrapper,t.window)},_appendTemplate:function(e){var t=this.options.template;typeof t===E&&(t=window.unescape(t)),t=kendo.template(t)(this.model),e.push(v(t))},_appendFields:function(e){var t,n,i,r=this.options.columns;for(t=0,n=r.length;n>t;t++)(i=r[t]).command||(e.push(v('<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>")),e.push(this._isEditable(i)?v("<div "+kendo.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'):g("div",{class:"k-edit-field"},[this.options.fieldRenderer(i,this.model)])))},_appendButtons:function(e){e.push(g("div",{class:"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var e=this._cancelProxy=C(this._cancel,this);this.wrapper.on(B+F,".k-grid-cancel",this._cancelProxy),this._saveProxy=C(this._save,this),this.wrapper.on(B+F,".k-grid-update",this._saveProxy),this.window.bind("close",function(t){t.userTriggered&&e(t)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.wrapper.off(F)},_cancel:function(e){this.trigger(j,e)},_save:function(){this.trigger(H)},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",C(this.destroy,this)).close()},destroy:function(){this.window.destroy(),this.window=null,this._dettachHandlers(),c.fn.destroy.call(this)}}),d=y.extend({init:function(t,n){if(y.fn.init.call(this,t,n),this._dataSource(this.options.dataSource),this._columns(),this._layout(),this._selectable(),this._sortable(),this._resizable(),this._filterable(),this._attachEvents(),this._toolbar(),this._scrollable(),this._reorderable(),this._columnMenu(),this._minScreenSupport(),this._draggable(),this.options.autoBind&&this.dataSource.fetch(),this._hasLockedColumns){var i=this;this.wrapper.addClass("k-grid-lockedcolumns"),this._resizeHandler=function(){i.resize()},e(window).on("resize"+F,this._resizeHandler)}kendo.notify(this)},_draggable:function(){var t=this.options.editable;t&&t.move&&(this._dragging=new kendo.ui.HierarchicalDragAndDrop(this.wrapper,{$angular:this.$angular,autoScroll:!0,filter:"tbody>tr",itemSelector:"tr",allowedContainers:this.wrapper,hintText:function(t){return t.children("td").map(function(){return e(this).text()}).toArray().join("<span class='k-header k-drag-separator' />")},contains:C(function(e,t){var n=this.dataItem(t),i=this.dataItem(e);return i==n||this.dataSource.contains(i,n)},this),itemFromTarget:function(e){var t=e.closest("tr");return{item:t,content:t}},dragstart:C(function(){this.wrapper.addClass("k-treelist-dragging")},this),drop:C(function(){this.wrapper.removeClass("k-treelist-dragging")},this),dragend:C(function(e){var t=this.dataItem(e.destination);this.dataItem(e.source).set("parentId",t?t.id:null)},this),reorderable:!1,dropHintContainer:function(e){return e.children("td:eq(1)")},dropPositionFrom:function(e){return e.prevAll(".k-i-none").length>0?"after":"before"}}))},_scrollable:function(){var t,n,i;this.options.scrollable&&(t=this.thead.closest(".k-grid-header-wrap"),n=e(this.lockedContent).bind("DOMMouseScroll"+F+" mousewheel"+F,C(this._wheelScroll,this)),this.content.bind("scroll"+F,function(){t.scrollLeft(this.scrollLeft),n.scrollTop(this.scrollTop)}),(i=kendo.touchScroller(this.content))&&i.movable&&(this._touchScroller=i,i.movable.bind("change",function(e){t.scrollLeft(-e.sender.x),n&&n.scrollTop(-e.sender.y)})))},_wheelScroll:function(t){if(!t.ctrlKey){var n=kendo.wheelDeltaY(t);n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+F,!1),this.content.scrollTop(this.content.scrollTop()+-n))}},_progress:function(){var e=this.options.messages;this.tbody.find("tr").length||this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({className:ee.icon+" "+ee.loading,messages:e}))},_error:function(e){this.dataSource.rootNodes().length||this._render({error:e})},refresh:function(e){"itemchange"==(e=e||{}).action&&this.editor||this.trigger(U)||(this._cancelEditor(),this._render(),this._adjustHeight(),this.trigger(W))},_angularFooters:function(e){var t,n,i,r=this.dataSource.aggregates(),o=this._footerItems();for(t=0;o.length>t;t++)i=r[(n=o.eq(t)).attr("data-parentId")],this._angularFooter(e,n.find("td").get(),i)},_angularFooter:function(e,t,n){var i=this.columns;this.angular(e,function(){return{elements:t,data:T(i,function(e){return{column:e,aggregate:n&&n[e.field]}})}})},items:function(){return this._hasLockedColumns?this._items(this.tbody).add(this._items(this.lockedTable)):this._items(this.tbody)},_items:function(t){return t.find("tr").filter(function(){return!e(this).hasClass(ee.footerTemplate)})},_footerItems:function(){var t=this.tbody;return this._hasLockedColumns&&(t=t.add(this.lockedTable)),t.find("tr").filter(function(){return e(this).hasClass(ee.footerTemplate)})},dataItems:function(){var e,t,n,i=kendo.ui.DataBoundWidget.fn.dataItems.call(this);if(this._hasLockedColumns){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_showStatus:function(t){var n=this.element.find(".k-status"),i=e(this.content).add(this.lockedContent);n.length||(n=e("<div class='k-status' />").appendTo(this.element)),this._contentTree.render([]),this._hasLockedColumns&&this._lockedContentTree.render([]),i.hide(),n.html(t)},_hideStatus:function(){this.element.find(".k-status").remove(),e(this.content).add(this.lockedContent).show()},_adjustHeight:function(){var e,t=this.element,n=t.find(L+ee.gridContentWrap),i=t.find(L+ee.gridHeader),r=t.find(L+ee.gridToolbar),o=kendo.support.scrollbar();t.height(this.options.height),function(e){var t,n;return!!e[0].style.height||(t=e.height(),e.height("auto"),n=e.height(),e.height(""),t!=n)}(t)&&(e=t.height()-i.outerHeight()-r.outerHeight(),n.height(e),this._hasLockedColumns&&(o=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?o:0,this.lockedContent.height(e-o)))},_resize:function(){this._applyLockedContainersWidth(),this._adjustHeight()},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=C(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e,n,i,r=this.columns,o=!1,a=window.innerWidth>0?window.innerWidth:screen.width;for(e=0;r.length>e;e++)(i=(n=r[e]).minScreenWidth)!==t&&null!==i&&(o=!0,i>a?this.hideColumn(n):this.showColumn(n));return o},destroy:function(){y.fn.destroy.call(this);var t=this.dataSource;t.unbind(I,this._refreshHandler),t.unbind(R,this._errorHandler),t.unbind(P,this._progressHandler),this._resizeHandler&&e(window).off("resize"+F,this._resizeHandler),this._dragging&&(this._dragging.destroy(),this._dragging=null),this.resizable&&(this.resizable.destroy(),this.resizable=null),this.reorderable&&(this.reorderable.destroy(),this.reorderable=null),this._draggableInstance&&this._draggableInstance.element&&(this._draggableInstance.destroy(),this._draggableInstance=null),this.minScreenResizeHandler&&e(window).off("resize",this.minScreenResizeHandler),this._destroyEditor(),this.element.off(F),this._touchScroller&&this._touchScroller.destroy(),this._autoExpandable=null,this._refreshHandler=this._errorHandler=this._progressHandler=null,this.thead=this.content=this.tbody=this.table=this.element=this.lockedHeader=this.lockedContent=null,this._statusTree=this._headerTree=this._contentTree=this._lockedHeaderColsTree=this._lockedContentColsTree=this._lockedHeaderTree=this._lockedContentTree=null},options:{name:"TreeList",columns:[],autoBind:!0,scrollable:!0,selectable:!1,sortable:!1,toolbar:null,height:null,columnMenu:!1,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF"}},excel:{hierarchy:!0},resizable:!1,filterable:!1,editable:!1,reorderable:!1},events:[I,z,H,V,N,O,U,W,j,q,G,$,Y,Q,X,K,Z],_toggle:function(e,n){var i=e.loaded();e._error&&(e.expanded=!1,e._error=t),(i||!e.expanded)&&(t===n&&(n=!e.expanded),e.expanded=n,i||this.dataSource.load(e).always(C(function(){this._render(),this._syncLockedContentHeight()},this)),this._render(),this._syncLockedContentHeight())},expand:function(e){this._toggle(this.dataItem(e),!0)},collapse:function(e){this._toggle(this.dataItem(e),!1)},_toggleChildren:function(t){var n=e(t.currentTarget),i=this.dataItem(n),r=i.expanded?O:N;this.trigger(r,{model:i})||this._toggle(i),t.preventDefault()},_attachEvents:function(){var e=L+ee.iconCollapse+", ."+ee.iconExpand+", ."+ee.refresh,t=L+ee.retry,n=this.dataSource;this.element.on("mousedown"+F,e,C(this._toggleChildren,this)).on(B+F,t,C(n.fetch,n)).on(B+F,".k-button[data-command]",C(this._commandClick,this))},_commandByName:function(t){var n,i,r,o,a=this.columns,s=e.isArray(this.options.toolbar)?this.options.toolbar:[];if(t=t.toLowerCase(),te[t])return te[t];for(n=0;a.length>n;n++)if(r=a[n].command)for(i=0;r.length>i;i++)if((o=r[i].name)&&o.toLowerCase()==t)return r[i];for(n=0;s.length>n;n++)if((o=s[n].name)&&o.toLowerCase()==t)return s[n]},_commandClick:function(n){var i=e(n.currentTarget),r=i.attr("data-command"),o=this._commandByName(r),a=i.parentsUntil(this.wrapper,"tr");a=a.length?a:t,o&&(o.methodName?this[o.methodName](a):o.click&&o.click.call(this,n),n.preventDefault())},_ensureExpandableColumn:function(){var e,t;this._autoExpandable&&delete this._autoExpandable.expandable,e=S(this.columns,i(n("hidden"))),t=S(e,n("expandable")),this.columns.length&&!t.length&&(this._autoExpandable=e[0],e[0].expandable=!0)},_columns:function(){var e,t=this.options.columns||[];this.columns=T(t,function(e){return p({encoded:!0},e="string"==typeof e?{field:e}:e)}),(e=this._lockedColumns()).length>0&&(this._hasLockedColumns=!0,this.columns=e.concat(this._nonLockedColumns())),this._ensureExpandableColumn(),this._columnTemplates(),this._columnAttributes()},_columnTemplates:function(){var e,t,n,i=this.columns;for(e=0,t=i.length;t>e;e++)(n=i[e]).template&&(n.template=kendo.template(n.template)),n.headerTemplate&&(n.headerTemplate=kendo.template(n.headerTemplate)),n.footerTemplate&&(n.footerTemplate=kendo.template(n.footerTemplate))},_columnAttributes:function(){function t(t){var n,i,r,o;if(t&&t.style)for(n=t.style.split(";"),t.style={},i=0;n.length>i;i++)r=n[i].split(":"),(o=e.trim(r[0]))&&(t.style[e.camelCase(o)]=e.trim(r[1]))}var n,i,r=this.columns;for(n=0,i=r.length;i>n;n++)t(r[n].attributes),t(r[n].headerAttributes)},_layout:function(){var e,t,n=this.columns,i=this.element,r="";this.wrapper=i.addClass(ee.wrapper),r="<div class='#= gridHeader #' style=\"padding-right: "+kendo.support.scrollbar()+'px;">',this._hasLockedColumns&&(r+="<div class='k-grid-header-locked'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div>"),r+="<div class='#= gridHeaderWrap #'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div></div>",this._hasLockedColumns&&(r+="<div class='k-grid-content-locked'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>"),r+="<div class='#= gridContentWrap #'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>",this.options.scrollable||(r="<table role='treegrid' tabindex='0'><colgroup></colgroup><thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"),this.options.toolbar&&(r="<div class='#= header # #= gridToolbar #' />"+r),i.append(kendo.template(r)(ee)+"<div class='k-status' />"),this.toolbar=i.find(L+ee.gridToolbar),e=i.find(L+ee.gridHeader).find("thead").addBack().filter("thead"),this.thead=e.last(),(t=i.find(L+ee.gridContentWrap)).length?this.content=t:t=i,this.table=t.find(">table"),this.tbody=this.table.find(">tbody"),this._hasLockedColumns&&(this.lockedHeader=e.first().closest(".k-grid-header-locked"),this.lockedContent=i.find(".k-grid-content-locked"),this.lockedTable=this.lockedContent.children()),this._initVirtualTrees(),this._renderCols(),this._renderHeader(),this.angular("compile",function(){return{elements:e.find("th.k-header").get(),data:T(n,function(e){return{column:e}})}})},_initVirtualTrees:function(){this._headerColsTree=new f.Tree(this.thead.prev()[0]),this._contentColsTree=new f.Tree(this.tbody.prev()[0]),this._headerTree=new f.Tree(this.thead[0]),this._contentTree=new f.Tree(this.tbody[0]),this._statusTree=new f.Tree(this.element.children(".k-status")[0]),this.lockedHeader&&(this._lockedHeaderColsTree=new f.Tree(this.lockedHeader.find("colgroup")[0]),this._lockedContentColsTree=new f.Tree(this.lockedTable.find(">colgroup")[0]),this._lockedHeaderTree=new f.Tree(this.lockedHeader.find("thead")[0]),this._lockedContentTree=new f.Tree(this.lockedTable.find(">tbody")[0]))},_toolbar:function(){var t,n=this.options.toolbar,i=this.toolbar;n&&(e.isArray(n)?(t=this._buildCommands(n),new f.Tree(i[0]).render(t)):i.append(kendo.template(n)({})),this.angular("compile",function(){return{elements:i.get()}}))},_lockedColumns:function(){return S(this.columns,n("locked"))},_nonLockedColumns:function(){return S(this.columns,i(n("locked")))},_flushCache:function(){this.options.$angular&&(this._contentTree.render([]),this._hasLockedColumns&&this._lockedContentTree.render([]))},_render:function(t){var n,i,r;t=t||{},n=this.options.messages,i=this.dataSource.rootNodes(),this.dataSource.aggregates(),r=this.select().map(function(t,n){return e(n).attr("data-uid")}),this._absoluteIndex=0,this._angularItems("cleanup"),this._angularFooters("cleanup"),this._flushCache(),t.error?this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[ee.button,ee.retry].join(" "),messages:n})):i.length?(this._hideStatus(),this._contentTree.render(this._trs({columns:this._nonLockedColumns(),aggregates:t.aggregates,selected:r,data:i,visible:!0,level:0})),this._hasLockedColumns&&(this._absoluteIndex=0,this._lockedContentTree.render(this._trs({columns:this._lockedColumns(),aggregates:t.aggregates,selected:r,data:i,visible:!0,level:0})))):this._showStatus(kendo.htmlEncode(n.noRows)),this._touchScroller&&this._touchScroller.contentResized(),this._angularItems("compile"),this._angularFooters("compile"),this._adjustRowsHeight()},_adjustRowsHeight:function(){var e,t,n,i,r,o,a,s,l,c,u,d,h,p;if(this._hasLockedColumns){for(e=this.table,t=this.lockedTable,i=(n=e[0].rows).length,o=t[0].rows,s=(a=e.add(t)).length,l=[],c=this.lockedHeader.find("tr"),u=this.thead.find("tr"),c.add(u).height("auto").height(Math.max(c.height(),u.height())),r=0;i>r&&o[r];r++)n[r].style.height&&(n[r].style.height=o[r].style.height=""),p=0,(d=n[r].offsetHeight)>(h=o[r].offsetHeight)?p=d:h>d&&(p=h),l.push(p);for(r=0;s>r;r++)a[r].style.display="none";for(r=0;i>r;r++)l[r]&&(n[r].style.height=o[r].style.height=l[r]+1+"px");for(r=0;s>r;r++)a[r].style.display=""}},_ths:function(e){var t,n,i,r,o,a,s,l,c=[];for(s=0,l=e.length;l>s;s++)t=e[s],i=[],r=[ee.header],n=t.headerTemplate?t.headerTemplate({}):t.title||t.field||"",a=t.headerTemplate?v(n):m(n),i.push(t.sortable?g("a",{href:"#",className:ee.link},[a]):a),o={"data-field":t.field,"data-title":t.title,style:!0===t.hidden?{display:"none"}:{},className:r.join(" "),role:"columnheader"},o=p(!0,{},o,t.headerAttributes),c.push(g("th",o,i));return c},_cols:function(e){var t,n,i,r=[];for(i=0;e.length>i;i++)!0!==e[i].hidden&&(n={},(t=e[i].width)&&0!==parseInt(t,10)&&(n.style={width:"string"==typeof t?t:t+"px"}),r.push(g("col",n)));return r},_renderCols:function(){var e=this._nonLockedColumns();this._headerColsTree.render(this._cols(e)),this.options.scrollable&&this._contentColsTree.render(this._cols(e)),this._hasLockedColumns&&(e=this._lockedColumns(),this._lockedHeaderColsTree.render(this._cols(e)),this._lockedContentColsTree.render(this._cols(e)))},_renderHeader:function(){var e=this._nonLockedColumns();this._headerTree.render([g("tr",{role:"row"},this._ths(e))]),this._hasLockedColumns&&(e=this._lockedColumns(),this._lockedHeaderTree.render([g("tr",{role:"row"},this._ths(e))]),this._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){var e,t,n,i,r,o;this._hasLockedColumns&&(e=s(this.lockedHeader.find(">table>colgroup>col")),n=s((t=this.thead.parent()).find(">colgroup>col")),i=this.wrapper[0].clientWidth,r=kendo.support.scrollbar(),e>=i&&(e=i-3*r),this.lockedHeader.add(this.lockedContent).width(e),t.add(this.table).width(n),o=i-e-2,this.content.width(o),t.parent().width(o-r))},_trs:function(t){var n,i,r,o,a,s,l,c,u=[],d=t.level,h=t.data,p=this.dataSource,f=p.aggregates()||{},g=t.columns;for(s=0,l=h.length;l>s;s++)r=[],o=(a=(n=h[s]).loaded()&&p.childNodes(n))&&a.length,i={"data-uid":n.uid,role:"row"},o&&(i["aria-expanded"]=!!n.expanded),t.visible?(this._absoluteIndex%2!=0&&r.push(ee.alt),this._absoluteIndex++):i.style={display:"none"},e.inArray(n.uid,t.selected)>=0&&r.push(ee.selected),o&&r.push(ee.group),n._edit&&r.push("k-grid-edit-row"),i.className=r.join(" "),u.push(this._tds({model:n,attr:i,level:d},g,C(this._td,this))),o&&(u=u.concat(this._trs({columns:g,parentId:n.id,aggregates:f,selected:t.selected,visible:t.visible&&!!n.expanded,data:a,level:d+1})));return this._hasFooterTemplate()&&(c=t.parentId||null,i={className:ee.footerTemplate,"data-parentId":c},t.visible||(i.style={display:"none"}),u.push(this._tds({model:f[c],attr:i,level:d},g,this._footerTd))),u},_footerTd:function(t){var n=[],i=t.column,r=t.column.footerTemplate||e.noop,o=t.model[i.field]||{},s={role:"gridcell",style:!0===i.hidden?{display:"none"}:{}};return i.expandable&&(n=n.concat(a({level:t.level+1,className:ee.iconPlaceHolder}))),i.attributes&&p(s,i.attributes),n.push(v(r(o)||"")),g("td",s,n)},_hasFooterTemplate:function(){return!!S(this.columns,function(e){return e.footerTemplate}).length},_tds:function(e,t,n){var i,r,o,a=[];for(r=0,o=t.length;o>r;r++)i=t[r],a.push(n({model:e.model,column:i,level:e.level}));return g("tr",e.attr,a)},_td:function(e){var t,n=[],i=e.model,r=e.column,o={role:"gridcell",style:!0===r.hidden?{display:"none"}:{}};return i._edit&&r.field&&i.editable(r.field)?o[kendo.attr("container-for")]=r.field:(r.expandable&&(n=a({level:e.level,className:ee.iconPlaceHolder}),(t=[ee.icon]).push(i.hasChildren?i.expanded?ee.iconCollapse:ee.iconExpand:ee.iconHidden),i._error?t.push(ee.refresh):!i.loaded()&&i.expanded&&t.push(ee.loading),n.push(g("span",{className:t.join(" ")})),o.style["white-space"]="nowrap"),r.attributes&&p(!0,o,r.attributes),r.command?n=this._buildCommands(i._edit?["update","canceledit"]:r.command):n.push(this._cellContent(r,i))),g("td",o,n)},_cellContent:function(e,n){var i;return e.template?i=e.template(n):e.field&&null!==(i=n.get(e.field))&&e.format&&(i=kendo.format(e.format,i)),(null===i||t===i)&&(i=""),e.template||!e.encoded?v(i):m(i)},_buildCommands:function(e){var t,n=[];for(t=0;e.length>t;t++)n.push(this._button(e[t]));return n},_button:function(e){var t=(e.name||e).toLowerCase(),n=this.options.messages.commands[t],i=[];return(e=p({},te[t],{text:n},e)).imageClass&&i.push(g("span",{className:["k-icon",e.imageClass].join(" ")})),g("button",{"data-command":t,className:["k-button k-button-icontext",e.className].join(" ")},i.concat([m(e.text||e.name)]))},_positionResizeHandle:function(n){var i,r,o=e(n.currentTarget),a=this.resizeHandle,s=o.position(),l=s.left,c=o.outerWidth(),u=o.closest("div"),d=n.clientX+e(window).scrollLeft(),h=this.options.columnResizeHandleWidth||3;return l+=u.scrollLeft(),a||(a=this.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner" /></div>')),d>(i=o.offset().left+c)-h&&i+h>d?(u.append(a),a.show().css({top:s.top,left:l+c-h-1,height:o.outerHeight(),width:3*h}).data("th",o),r=this,a.off("dblclick"+F).on("dblclick"+F,function(){var t=o.index();e.contains(r.thead[0],o[0])&&(t+=S(r.columns,function(e){return e.locked&&!e.hidden}).length),r.autoFitColumn(t)}),t):(a.hide(),t)},autoFitColumn:function(t){var n,i,a,s,l,c,u,d,h,p,f,g,m,v,_,y,b,w=this,k=w.options,x=w.columns,C=kendo.support.browser,T=w.lockedHeader?o(w.lockedHeader.find(">table>thead")).filter(r).length:0;if((t="number"==typeof t?x[t]:A(t)?S(x,function(e){return e===t})[0]:S(x,function(e){return e.field===t})[0])&&!t.hidden){for(n=D(t,x),i=(a=(s=t.locked)?w.lockedHeader.children("table"):w.thead.parent()).find("[data-index='"+n+"']"),c=s?w.lockedTable:w.table,u=w.footer||e(),w.footer&&w.lockedContent&&(u=w.footer.children(s?".k-grid-footer-locked":".k-grid-footer-wrap")),d=u.find("table").first(),w.lockedHeader&&T>=n&&!s&&(n-=T),h=0;x.length>h&&x[h]!==t;h++)x[h].hidden&&n--;if(l=k.scrollable?a.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")").add(c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")")).add(d.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")")):c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")"),p=a.add(c).add(d),f=i.outerWidth(),l.width(""),p.css("table-layout","fixed"),l.width("auto"),p.addClass("k-autofitting"),p.css("table-layout",""),Math.max(a.width(),c.width(),d.width()),g=Math.ceil(Math.max(i.outerWidth(),c.find("tr").eq(0).children("td:visible").eq(n).outerWidth(),d.find("tr").eq(0).children("td:visible").eq(n).outerWidth())),l.width(g),t.width=g,k.scrollable){for(m=a.find("col"),_=0,y=0,b=m.length;b>y;y+=1){if(!(v=m[y].style.width)||-1!=v.indexOf("%")){_=0;break}_+=parseInt(v,10)}_&&p.each(function(){this.style.width=_+"px"})}C.msie&&8==C.version&&(p.css("display","inline-table"),setTimeout(function(){p.css("display","table")},1)),p.removeClass("k-autofitting"),w.trigger(Q,{column:t,oldWidth:f,newWidth:g}),w._applyLockedContainersWidth(),w._syncLockedContentHeight(),w._syncLockedHeaderHeight()}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?kendo.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this._touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),function(e,t){var n,i,r,o;e=e[0],t=t[0],e.rows.length!==t.rows.length&&((n=e.offsetHeight)>(i=t.offsetHeight)?(r=t.rows[t.rows.length-1],o=n-i):(r=e.rows[e.rows.length-1],o=i-n),r.style.height=r.offsetHeight+o+"px")}(e,t))},_resizable:function(){if(this.options.resizable){this.resizable&&this.resizable.destroy();var t=this;e(this.lockedHeader).find("thead").add(this.thead).on("mousemove"+F,"th",e.proxy(this._positionResizeHandle,this)),this.resizable=new kendo.ui.Resizable(this.wrapper,{handle:".k-resize-handle",start:function(n){var i,r,o=e(n.currentTarget).data("th"),a="col:eq("+e.inArray(o[0],o.parent().children().filter(":visible"))+")";t.wrapper.addClass("k-grid-column-resizing"),t.lockedHeader&&e.contains(t.lockedHeader[0],o[0])?(i=t.lockedHeader,r=t.lockedTable):(i=t.thead.parent(),r=t.table),this.col=r.children("colgroup").find(a).add(i.find(a)),this.th=o,this.startLocation=n.x.location,this.columnWidth=o.outerWidth(),this.table=this.col.closest("table"),this.totalWidth=this.table.width()},resize:function(e){var t=e.x.location-this.startLocation;11>this.columnWidth+t&&(t=11-this.columnWidth),this.table.width(this.totalWidth+t),this.col.width(this.columnWidth+t)},resizeend:function(){var e,n,i;t.wrapper.removeClass("k-grid-column-resizing"),e=this.th.attr("data-field"),n=S(t.columns,function(t){return t.field==e}),i=Math.floor(this.th.outerWidth()),n[0].width=i,t._resize(),t._adjustRowsHeight(),t.trigger(Q,{column:n,oldWidth:this.columnWidth,newWidth:i}),this.table=this.col=this.th=null}})}},_sortable:function(){var t,n,i,r,o,a=this.columns,s=e(this.lockedHeader).add(this.thead).find("th"),l=kendo.attr("field"),c=this.options.sortable;if(c)for(r=0,o=s.length;o>r;r++)!1!==(t=a[r]).sortable&&!t.command&&t.field&&((n=(i=s.eq(r)).data("kendoColumnSorter"))&&n.destroy(),i.attr(l,t.field).kendoColumnSorter(p({},c,t.sortable,{dataSource:this.dataSource})))},_filterable:function(){var t,n,i,r,o,a,s=e(this.lockedHeader).add(this.thead).find("th"),l=this.options.filterable;if(l&&!this.options.columnMenu)for(a=C(function(e){this.trigger(q,{field:e.field,container:e.container})},this),t=0,n=s.length;n>t;t++)i=this.columns[t],(o=(r=s.eq(t)).data("kendoFilterMenu"))&&o.destroy(),i.command||!1===i.filterable||r.kendoFilterMenu(p(!0,{},l,i.filterable,{dataSource:this.dataSource,init:a}))},_change:function(){this.trigger(I)},_selectable:function(){var e,n,i=this.options.selectable,r=this.table;i&&(i=kendo.ui.Selectable.parseOptions(i),this._hasLockedColumns&&(r=r.add(this.lockedTable),n=i.multiple&&i.cell),e=">tbody>tr:not(.k-footer-template)",i.cell&&(e+=">td"),this.selectable=new kendo.ui.Selectable(r,{filter:e,aria:!0,multiple:i.multiple,change:C(this._change,this),useAllItems:n,continuousItems:C(this._continuousItems,this,e,i.cell),relatedTarget:!i.cell&&this._hasLockedColumns?C(this._selectableTarget,this):t}))},_continuousItems:function(t,n){var i,r,o,a,s,l;if(this.lockedContent){for(i=e(t,this.lockedTable),r=e(t,this.table),o=n?this._lockedColumns().length:1,a=n?this.columns.length-o:1,s=[],l=0;i.length>l;l+=o)M.apply(s,i.slice(l,l+o)),M.apply(s,r.splice(0,a));return s}},_selectableTarget:function(t){var n,i,r,o=e();for(i=0,r=t.length;r>i;i++)n=this._relatedRow(t[i]),D(n[0],t)<0&&(o=o.add(n));return o},_relatedRow:function(t){var n,i,r=this.lockedTable;return t=e(t),r?(i=(n=t.closest(this.table.add(this.lockedTable))).find(">tbody>tr").index(t),(n=n[0]===this.table[0]?r:this.table).find(">tbody>tr").eq(i)):t},select:function(n){var i=this.selectable;return i?(t!==n&&(i.options.multiple||(i.clear(),n=n.first()),this._hasLockedColumns&&(n=n.add(e.map(n,C(this._relatedRow,this))))),i.value(n)):e()},clearSelection:function(){this.select().length&&(this.selectable.clear(),this.trigger(I))},_dataSource:function(e){var t=this.dataSource;t&&(t.unbind(I,this._refreshHandler),t.unbind(R,this._errorHandler),t.unbind(P,this._progressHandler)),this._refreshHandler=C(this.refresh,this),this._errorHandler=C(this._error,this),this._progressHandler=C(this._progress,this),(t=this.dataSource=l.create(e)).bind(I,this._refreshHandler),t.bind(R,this._errorHandler),t.bind(P,this._progressHandler)},setDataSource:function(e){this._dataSource(e),this._sortable(),this._filterable(),this._contentTree.render([]),this.options.autoBind&&this.dataSource.fetch()},dataItem:function(t){var n=e(t).closest("tr");return this.dataSource.getByUid(n.attr(kendo.attr("uid")))},editRow:function(e){var t;typeof e===E&&(e=this.tbody.find(e)),(t=this.dataItem(e))&&("popup"!=this._editMode()&&(t._edit=!0),this._cancelEditor(),this._render(),this._createEditor(t),this.trigger(z,{container:this.editor.wrapper,model:t}))},_cancelEdit:function(e){e=p(e,{container:this.editor.wrapper,model:this.editor.model}),this.trigger(j,e)||this.cancelRow()},cancelRow:function(){this._cancelEditor(),this._render()},saveRow:function(){var e,t=this.editor;t&&(e={model:t.model,container:t.wrapper},t.end()&&!this.trigger(H,e)&&this.dataSource.sync())},addRow:function(e){var n=this.editor,i=0,r={};if(!n||n.end())return e?(e instanceof ne||(e=this.dataItem(e)),r[e.parentIdField]=e.id,i=this.dataSource.indexOf(e)+1,e.set("expanded",!0),this.dataSource.load(e).then(C(this._insertAt,this,r,i)),t):(this._insertAt(r,i),t)},_insertAt:function(e,t){e=this.dataSource.insert(t,e);var n=this.tbody.find("["+kendo.attr("uid")+"="+e.uid+"]");this.editRow(n)},removeRow:function(e){var t=this.dataItem(e),n={model:t,row:e};t&&!this.trigger(V,n)&&(this.dataSource.remove(t),this.dataSource.sync())},_cancelEditor:function(){var e,t=this.editor;t&&(e=t.model,this._destroyEditor(),this.dataSource.cancelChanges(e),e._edit=!1)},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_createEditor:function(e){var t,n,i=this.tbody.find("["+kendo.attr("uid")+"="+e.uid+"]");i=i.add(this._relatedRow(i)),t=this._editMode(),n={columns:this.columns,model:e,target:this,clearContainer:!1,template:this.options.editable.template},"inline"==t?this.editor=new c(i,n):(p(n,{window:this.options.editable.window,commandRenderer:C(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:this._cellContent,save:C(this.saveRow,this),cancel:C(this._cancelEdit,this),appendTo:this.wrapper}),this.editor=new u(i,n))},_editMode:function(){var e="inline",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e.toLowerCase()},hideColumn:function(e){this._toggleColumnVisibility(e,!0)},showColumn:function(e){this._toggleColumnVisibility(e,!1)},_toggleColumnVisibility:function(e,t){(e=this._findColumn(e))&&e.hidden!==t&&(e.hidden=t,this._ensureExpandableColumn(),this._renderCols(),this._renderHeader(),this._render(),this._adjustTablesWidth(),this.trigger(t?G:$,{column:e}),t||e.width||this.table.add(this.thead.closest("table")).width(""))},_findColumn:function(e){return e="number"==typeof e?this.columns[e]:A(e)?S(this.columns,function(t){return t===e})[0]:S(this.columns,function(t){return t.field===e})[0]},_adjustTablesWidth:function(){var e,t,n,i=this.thead.prev().children(),r=0;for(e=0,t=i.length;t>e;e++){if(!(n=i[e].style.width)||-1!=n.indexOf("%")){r=0;break}r+=parseInt(n,10)}r&&this.table.add(this.thead.closest("table")).width(r)},_reorderable:function(){var t,n;this.options.reorderable&&(t=(!0===this.options.scrollable?".k-grid-header:first ":"table:first>.k-grid-header ")+"th.k-header",n=this,this._draggableInstance=new _.Draggable(this.wrapper,{group:kendo.guid(),filter:t,hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(kendo.attr("title"))||t.attr(kendo.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}),this.reorderable=new _.Reorderable(this.wrapper,{draggable:this._draggableInstance,dragOverContainers:C(this._allowDragOverContainers,this),inSameContainer:function(t){return e(t.source).parent()[0]===e(t.target).parent()[0]},change:function(e){var t=e.newIndex,i=e.oldIndex,r="before"===e.position,o=n.columns[i];n.trigger(Y,{newIndex:t,oldIndex:i,column:o}),n.reorderColumn(t,o,r)}}))},_allowDragOverContainers:function(e){return!1!==this.columns[e].lockable},reorderColumn:function(n,i,r){var o,a,s,l=this.columns,c=D(i,l),u=!!l[n].locked,d=this._nonLockedColumns().length;c!==n&&(!u||i.locked||1!=d)&&(u||!i.locked||l.length-d!=1)&&(r===t&&(r=c>n),o=(o=!!i.locked)!=u,i.locked=u,l.splice(r?n:n+1,0,i),l.splice(n>c?c:c+1,1),this._renderCols(),(a=e(this.lockedHeader).add(this.thead).find("th")).eq(c)[r?"insertBefore":"insertAfter"](a.eq(n)),s=this._headerTree.children[0].children,this._hasLockedColumns&&(s=this._lockedHeaderTree.children[0].children.concat(s)),s.splice(r?n:n+1,0,s[c]),s.splice(n>c?c:c+1,1),this._hasLockedColumns&&(this._lockedHeaderTree.children[0].children=s.splice(0,this._lockedColumns().length),this._headerTree.children[0].children=s),this._applyLockedContainersWidth(),this.refresh(),o&&(u?this.trigger(K,{column:i}):this.trigger(Z,{column:i})))},lockColumn:function(e){var t,n=this.columns;(e="number"==typeof e?n[e]:S(n,function(t){return t.field===e})[0])&&!e.hidden&&(t=this._lockedColumns().length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;(e="number"==typeof e?n[e]:S(n,function(t){return t.field===e})[0])&&!e.hidden&&(t=this._lockedColumns().length,this.reorderColumn(t,e,!0))},_columnMenu:function(){var t,n,i,r,o,a,s=e(this.lockedHeader).add(this.thead).find("th"),l=this.columns,c=this.options,u=c.columnMenu,d=C(this._columnMenuInit,this),h=this._lockedColumns().length;if(u)for("boolean"==typeof u&&(u={}),a=0;s.length>a;a++)(t=l[a]).field&&((n=s.eq(a).data("kendoColumnMenu"))&&n.destroy(),r=!1,!1!==t.sortable&&!1!==u.sortable&&!1!==c.sortable&&(r=p({},c.sortable,{compare:(t.sortable||{}).compare})),o=!1,c.filterable&&!1!==t.filterable&&!1!==u.filterable&&(o=p({pane:this.pane},t.filterable,c.filterable)),i={dataSource:this.dataSource,values:t.values,columns:u.columns,sortable:r,filterable:o,messages:u.messages,owner:this,closeCallback:e.noop,init:d,pane:this.pane,lockedColumns:!1!==t.lockable&&h>0},c.$angular&&(i.$angular=c.$angular),s.eq(a).kendoColumnMenu(i))},_columnMenuInit:function(e){this.trigger(X,{field:e.field,container:e.container})}}),kendo.ExcelMixin&&kendo.ExcelMixin.extend(d.prototype),kendo.PDFMixin&&kendo.PDFMixin.extend(d.prototype),p(!0,kendo.data,{TreeListDataSource:l,TreeListModel:ne}),p(!0,kendo.ui,{TreeList:d}),_.plugin(d)}(window.kendo.jQuery),function(e){function t(e){return{name:e.uniqueName,type:e.type}}function n(t){var n=e(t).closest(".k-pivot-setting");return n.length?n.data("kendoPivotSettingTarget"):null}function i(e,t,n){return{hierarchyUniqueName:e,uniqueName:t,caption:t,measure:t,name:t,type:n,kpi:!0}}function r(e){var t=e.name;return[i(t,e.value,"value"),i(t,e.goal,"goal"),i(t,e.status,"status"),i(t,e.trend,"trend")]}var o=window.kendo,a=o.ui,s=a.Widget,l=".kendoPivotConfigurator",c=o.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>'),u=s.extend({init:function(e,t){s.fn.init.call(this,e,t),this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container"),this._dataSource(),this._layout(),this.refresh(),o.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:!1,sortable:!1,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler).unbind("error",t._errorHandler).unbind("progress",t._progressHandler):(t._errorHandler=e.proxy(t._error,t),t._refreshHandler=e.proxy(t.refresh,t),t._progressHandler=e.proxy(t._requestStart,t)),t.dataSource=o.data.PivotDataSource.create(t.options.dataSource),t.dataSource.bind("change",t._refreshHandler).bind("error",t._errorHandler).bind("progress",t._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measures&&this.measures.setDataSource(e),this.rows&&this.rows.setDataSource(e),this.columns&&this.columns.setDataSource(e),this.refresh()},_treeViewDataSource:function(){var t=this;return o.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return!("hierarchyUniqueName"in e||"aggregator"in e)}}},transport:{read:function(n){var i,o;e.isEmptyObject(n.data)?t.dataSource.schemaDimensions().done(function(e){t.dataSource.cubeBuilder||function(e){for(var t,n=0,i=e.length;i>n;n++)if(2==e[n].type){t=!0;break}t&&e.splice(n+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}(e),n.success(e)}).fail(n.error):("[KPIs]"===(i=t.treeView.dataSource.get(n.data.uniqueName)).uniqueName?(o=!0,t.dataSource.schemaKPIs().done(function(e){n.success(function(e){for(var t=0,n=e.length;n>t;t++)e[t].uniqueName=e[t].name,e[t].type="kpi";return e}(e))}).fail(n.error)):"kpi"==i.type&&(o=!0,n.success(r(i))),o||(2==i.type?t.dataSource.schemaMeasures():i.dimensionUniqueName?t.dataSource.schemaLevels(n.data.uniqueName):t.dataSource.schemaHierarchies(n.data.uniqueName)).done(n.success).fail(n.error))}}})},_progress:function(e){o.ui.progress(this.element,e)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_layout:function(){this.form=e('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element),this._fields(),this._targets()},_fields:function(){var i=e('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form);this.treeView=e("<div/>").appendTo(i).kendoTreeView({template:'# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-dimension"></span># } ##: item.caption || item.name #',dataTextField:"caption",dragAndDrop:!0,autoBind:!1,dataSource:this._treeViewDataSource(),dragstart:function(e){var t=this.dataItem(e.sourceNode);(t.hasChildren||t.aggregator||t.measure)&&2!=t.type&&"[KPIs]"!==t.uniqueName||e.preventDefault()},drag:function(e){var t="k-denied",i=n(e.dropTarget);i&&i.validate(this.dataItem(e.sourceNode))&&(t="k-add"),e.setStatusClass(t)},drop:function(e){var i,o,a,s,l,c;if(e.preventDefault(),i=n(e.dropTarget),o=this.dataItem(e.sourceNode),i&&i.validate(o)){if(c=o.defaultHierarchy||o.uniqueName,"kpi"===o.type)for(s=(l=r(o)).length,c=[],a=0;s>a;a++)c.push(t(l[a]));else o.kpi&&(c=[t(o)]);i.add(c)}}}).data("kendoTreeView")},_createTarget:function(t,n){var i='<li class="k-item k-header" data-'+o.ns+'name="${data.name}">${data.name}',r=n.sortable,a="";return r&&(a+="#if (data.sortIcon) {#",a+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',a+="#}#"),(n.filterable||r)&&(a+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),i+='<span class="k-field-actions">'+(a+='<span class="k-icon k-si-close k-setting-delete"></span>')+"</span></li>",new o.ui.PivotSettingTarget(t,e.extend({dataSource:this.dataSource,hint:function(t){var n=e('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');return n.find(".k-list").append(t.clone()),n},template:i,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},n))},_targets:function(){var t=e('<div class="k-state-default"/>').appendTo(this.form),n=e(c({name:this.options.messages.columnsLabel,icon:"k-i-vbars"})).appendTo(t),i=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(n.last()),r=e(c({name:this.options.messages.rowsLabel,icon:"k-i-hbars"})).appendTo(t),o=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(r.last()),a=e(c({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(t),s=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(a.last()),l=this.options;this.columns=this._createTarget(i,{filterable:l.filterable,sortable:l.sortable,connectWith:o,messages:{empty:l.messages.columns,fieldMenu:l.messages.fieldMenu}}),this.rows=this._createTarget(o,{filterable:l.filterable,setting:"rows",connectWith:i,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}}),this.measures=this._createTarget(s,{setting:"measures",messages:{empty:l.messages.measures}}),i.add(o).add(s).on("mouseenter.kendoPivotConfigurator mouseleave.kendoPivotConfigurator",".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_resize:function(){var e,t,n=this.element,i=this.options.height;i&&(n.height(i),n.is(":visible")&&(t=n.children(".k-columns").children("div.k-state-default"),i=n.innerHeight(),e=(n.outerHeight()-i)/2,i=i-(t.outerHeight(!0)-t.height())-e,t.height(i)))},refresh:function(){var e=this.dataSource;(e.cubeBuilder||this._cube!==e.cube()||this._catalog!==e.catalog())&&this.treeView.dataSource.fetch(),this._catalog=this.dataSource.catalog(),this._cube=this.dataSource.cube(),this._resize(),this._progress(!1)},destroy:function(){s.fn.destroy.call(this),this.dataSource.unbind("change",this._refreshHandler),this.form.find(".k-list").off(l),this.rows.destroy(),this.columns.destroy(),this.measures.destroy(),this.treeView.destroy(),this.element=null,this._refreshHandler=null}});a.plugin(u)}(window.kendo.jQuery),function(e,t,n){"use strict";function i(e,i,r,o){i[r]=t.copy(e.$eval(o)),i[r]===n&&o.match(/^\w*$/)&&k.warn(r+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+o+"'?")}function r(r,l,p,f,g,m){function v(){var n,m,v,_,y,b,D,A,M,E,I,R,P;return p.kRebind&&(n=e(e(l)[0].cloneNode(!0))),m=f.replace(/^kendo/,""),v=t.extend({},p.defaultOptions,r.$eval(p.kOptions||p.options)),(_=e(l)[f])?(y=_.widget.prototype.options,b=_.widget.prototype.events,e.each(p,function(e,t){var n,o,a,s;"source"!==e&&"kDataSource"!==e&&"kScopeField"!==e&&(n="data"+e.charAt(0).toUpperCase()+e.slice(1),0===e.indexOf("on")&&(o=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()}),b.indexOf(o)>-1&&(v[o]=t)),y.hasOwnProperty(n)?i(r,v,n,t):y.hasOwnProperty(e)&&!S[e]?i(r,v,e,t):T[e]||(a=e.match(/^k(On)?([A-Z].*)/))&&(s=a[2].charAt(0).toLowerCase()+a[2].slice(1),a[1]&&"kOnLabel"!=e?v[s]=t:("kOnLabel"==e&&(s="onLabel"),i(r,v,s,t))))}),(D=p.kDataSource||p.source)&&(v.dataSource=C(r,l,m,D)),v.$angular=[r],l.is("select")&&function(t){if(t.length>0){var n=e(t[0]);!/\S/.test(n.text())&&/^\?/.test(n.val())&&n.remove()}}(l[0].options),s(A=_.call(l,x=v).data(f),r,p,f,g),r.$emit("kendoWidgetCreated",A),M=d(r,A),p.kRebind&&h(A,r,l,n,p.kRebind,M,p),p.kNgDisabled&&(E=p.kNgDisabled,(I=r.$eval(E))&&A.enable(!I),o(A,r,0,E)),p.kNgReadonly&&(R=p.kNgReadonly,(P=r.$eval(R))&&A.readonly(P),a(A,r,0,R)),p.kNgModel&&u(A,r,p.kNgModel),w&&c(A,r,l,w,k),A&&function(t,n){function i(){a.disconnect()}function r(){a.observe(e(n)[0],{attributes:!0})}var o,a;window.MutationObserver&&t.wrapper&&(o=[].slice.call(e(n)[0].classList),a=new MutationObserver(function(n){i(),t&&(n.forEach(function(n){var i,r=e(t.wrapper)[0];switch(n.attributeName){case"class":(i=[].slice.call(n.target.classList)).forEach(function(e){o.indexOf(e)<0&&(r.classList.add(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.add(e))}),o.forEach(function(e){i.indexOf(e)<0&&(r.classList.remove(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.remove(e))}),o=i;break;case"disabled":"function"==typeof t.enable&&t.enable(!e(n.target).attr("disabled"));break;case"readonly":"function"==typeof t.readonly&&t.readonly(!!e(n.target).attr("readonly"))}}),r())}),r(),t.first("destroy",i))}(A,l),A):(window.console.error("Could not find: "+f),null)}var _,y,w,k,D,A;if(!(l instanceof jQuery))throw Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.");return _=p.kNgDelay,y=r.$eval(_),w=(m=m||[])[0],k=m[1],_&&!y?(D=r.$root||r,A=function(){var e=r.$watch(_,function(t,n){t!==n&&(e(),l.removeAttr(p.$attr.kNgDelay),_=null,b(v))})},/^\$(digest|apply)$/.test(D.$$phase)?A():r.$apply(A),n):v()}function o(e,t,i,r){return kendo.ui.PanelBar&&e instanceof kendo.ui.PanelBar||kendo.ui.Menu&&e instanceof kendo.ui.Menu?(k.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+e.options.name),n):(t.$watch(r,function(t,n){t!=n&&e.enable(!t)}),n)}function a(e,t,i,r){return"function"!=typeof e.readonly?(k.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+e.options.name),n):(t.$watch(r,function(t,n){t!=n&&e.readonly(t)}),n)}function s(e,t,n,i,r){if(n[r]){var o=y(n[r]).assign;if(!o)throw Error(r+" attribute used but expression in it is not assignable: "+n[i]);o(t,e)}}function l(e){return D.test(e[0].tagName)}function c(e,t,i,r,o){var a,s,c,u;e.value&&(a=l(i)?function(){return/checkbox|radio/i.test((e=i).attr("type"))?e.prop("checked"):e.val();var e}:function(){return e.value()},r.$render=function(){var t=r.$viewValue;t===n&&(t=r.$modelValue),t===n&&(t=null),setTimeout(function(){e&&e.value(t)},0)},s=!1,l(i)&&i.on("change",function(){s=!0}),c=function(e){return function(){var n;s||(s=!1,e&&o&&(n=o.$pristine),r.$setViewValue(a()),e&&(r.$setPristine(),n&&o.$setPristine()),g(t))}},e.first("change",c(!1)),kendo.ui.AutoComplete&&e instanceof kendo.ui.AutoComplete||e.first("dataBound",c(!0)),u=a(),isNaN(r.$viewValue)||u==r.$viewValue||(r.$isEmpty(r.$viewValue)?null!=u&&""!==u&&u!=r.$viewValue&&r.$setViewValue(u):e.value(r.$viewValue)),r.$setPristine())}function u(t,i,r){var o,a,s,l,c,u;return"function"!=typeof t.value?(k.warn("k-ng-model specified on a widget that does not have the value() method: "+t.options.name),n):(o=e(t.element).parents("form"),a=i[o.attr("name")],s=y(r),l=s.assign,c=!1,t.$angular_setLogicValue(s(i)),u=function(e,i){e===n&&(e=null),c||e!==i&&t.$angular_setLogicValue(e)},kendo.ui.MultiSelect&&t instanceof kendo.ui.MultiSelect?i.$watchCollection(r,u):i.$watch(r,u),t.first("change",function(){c=!0,a&&a.$pristine&&a.$setDirty(),i.$apply(function(){l(i,t.$angular_getLogicValue())}),c=!1}),n)}function d(e,t){var n=e.$on("$destroy",function(){n(),t&&(t.element&&(t=f(t.element))&&t.destroy(),t=null)});return n}function h(t,n,i,r,o,a,s){var l=n.$watch(o,function(o,c){var u,d,h,p;o!==c&&(l(),(u=R[t.options.name])&&u.forEach(function(t){var i=n.$eval(s["k"+t]);i&&r.append(e(i).attr(kendo.toHyphens("k"+t),""))}),d=e(t.wrapper)[0],h=e(t.element)[0],p=i.injector().get("$compile"),t._destroy(),a&&a(),t=null,d&&h&&(d.parentNode.replaceChild(h,d),e(i).replaceWith(r)),p(r)(n))},!0);g(n)}function p(e,n){function i(e,t){v.directive(e,["directiveFactory",function(n){return n.create(t,e)}])}var r,o,a,s,l=n?"Mobile":"";l+=e.fn.options.name,r=l,o="kendo"+l.charAt(0)+l.substr(1).toLowerCase(),a=(l="kendo"+l).replace(/([A-Z])/g,"-$1"),-1==M.indexOf(l.replace("kendo",""))&&(s=l===o?[l]:[l,o],t.forEach(s,function(e){v.directive(e,function(){return{restrict:"E",replace:!0,template:function(e,t){var n=A[r]||"div",i=t.kScopeField;return"<"+n+" "+a+(i?'="'+i+'"':"")+">"+e.html()+"</"+n+">"}}})})),E.indexOf(l.replace("kendo",""))>-1||(i(l,l),o!=l&&i(o,l))}function f(t){return t=e(t),kendo.widgetInstance(t,kendo.ui)||kendo.widgetInstance(t,kendo.mobile.ui)||kendo.widgetInstance(t,kendo.dataviz.ui)}function g(e,t){var n=e.$root||e,i=/^\$(digest|apply)$/.test(n.$$phase);t?i?t():n.$apply(t):i||n.$digest()}function m(n,i,r){var o,a,s;if(e.isArray(n))return t.forEach(n,function(e){m(e,i,r)});if("string"==typeof n){for(o=n.split("."),a=kendo;a&&o.length>0;)a=a[o.shift()];if(!a)return I.push([n,i,r]),!1;n=a.prototype}return s=n[i],n[i]=function(){var e=this,t=arguments;return r.apply({self:e,next:function(){return s.apply(e,arguments.length>0?arguments:t)}},t)},!0}var v,_,y,b,w,k,x,C,T,S,D,A,M,E,I,R;t&&(v=t.module("kendo.directives",[]),_=t.injector(["ng"]),y=_.get("$parse"),b=_.get("$timeout"),k=_.get("$log"),C=function(){var e={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},t=function(e,t){return"$PLAIN"==t?e:kendo.data[t].create(e)};return function(n,i,r,o){var a=e[r]||"DataSource",s=t(n.$eval(o),a);return n.$watch(o,function(e,n){var r,o;e!==n&&(r=t(e,a),(o=f(i))&&"function"==typeof o.setDataSource&&o.setDataSource(r))}),s}}(),T={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},S={name:!0,title:!0,style:!0},D=/^(input|select|textarea)$/i,v.factory("directiveFactory",["$compile",function(t){var n,i=!1;return w=t,{create:function(t,o){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(e,t){var n=this;n.template=function(e,n){t[e]=kendo.stringify(n)},e.$on("$destroy",function(){n.template=null,n=null})}],link:function(a,s,l,c){var u=e(s),d=t.replace(/([A-Z])/g,"-$1");u.attr(d,u.attr("data-"+d)),u[0].removeAttribute("data-"+d),r(a,s,l,t,o,c)&&(n&&clearTimeout(n),n=setTimeout(function(){a.$emit("kendoRendered"),i||(i=!0,e("form").each(function(){var t=e(this).controller("form");t&&t.$setPristine()}))}))}}}}}]),A={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},M=["MobileView","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],E=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"],t.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(e){E.push(e),e="kendo"+e,v.directive(e,function(){return{restrict:"A",link:function(t,n,i){r(t,n,i,e,e)}}})}),function(){function e(e){return function(n){t.forEach(n,function(t){t.fn&&t.fn.options&&t.fn.options.name&&/^[A-Z]/.test(t.fn.options.name)&&p(t,e)})}}t.forEach([kendo.ui,kendo.dataviz&&kendo.dataviz.ui],e(!1)),t.forEach([kendo.mobile&&kendo.mobile.ui],e(!0))}(),I=[],m(kendo.ui,"plugin",function(t,n,i){this.next(),I=e.grep(I,function(e){return!m.apply(null,e)}),p(t,"Mobile"==i)}),m(["ui.Widget","mobile.ui.Widget"],"angular",function(i,r){var o,a=this.self;return"init"==i?(!r&&x&&(r=x),x=null,r&&r.$angular&&(a.$angular_scope=r.$angular[0],a.$angular_init(a.element,r)),n):((o=a.$angular_scope)&&function(e){var t=b;try{b=function(e){return e()},e()}finally{b=t}}(function(){var s,l,c=r(),u=c.elements,d=c.data;if(u.length>0)switch(i){case"cleanup":t.forEach(u,function(t){var n=e(t).data("$$kendoScope");n&&n!==o&&n.$$kendoScope&&function(t,n){t.$destroy(),n&&e(n).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}(n,t)});break;case"compile":s=a.element.injector(),l=s?s.get("$compile"):w,t.forEach(u,function(t,i){var r,a;c.scopeFrom?r=c.scopeFrom:(a=d&&d[i])!==n?(r=e.extend(o.$new(),a)).$$kendoScope=!0:r=o,e(t).data("$$kendoScope",r),l(t)(r)}),g(o)}}),n)}),m("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),m("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)}),m("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem(),t=this.self.options.dataValueField;return e?this.self.options.valuePrimitive?t?e[t]:e:e.toJSON():null}),m("ui.Select","$angular_setLogicValue",function(e){var t=this.self,i=t.options,r=i.dataValueField,o=i.text||"";e===n&&(e=""),r&&!i.valuePrimitive&&e&&(o=e[i.dataTextField]||"",e=e[r||i.dataTextField]),!1!==t.options.autoBind||t.listView.isBound()?t.value(e):!o&&e&&i.valuePrimitive?t.value(e):t._preselect(e,o)}),m("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems().slice(0),n=this.self.options.dataValueField;return n&&this.self.options.valuePrimitive&&(t=e.map(t,function(e){return e[n]})),t}),m("ui.MultiSelect","$angular_setLogicValue",function(t){var n,i,r,o;null==t&&(t=[]),i=(n=this.self).options,o=t,(r=i.dataValueField)&&!i.valuePrimitive&&(t=e.map(t,function(e){return e[r]})),!1!==i.autoBind||i.valuePrimitive||n.listView.isBound()?n.value(t):n._preselect(o,t)}),m("ui.AutoComplete","$angular_getLogicValue",function(){var e,t,n,i,r,o=this.self.options,a=this.self.value().split(o.separator),s=o.valuePrimitive,l=this.self.dataSource.data(),c=[];for(e=0,t=l.length;t>e;e++)for(n=l[e],i=o.dataTextField?n[o.dataTextField]:n,r=0;a.length>r;r++)if(i===a[r]){c.push(s?i:n.toJSON());break}return c}),m("ui.AutoComplete","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,i=n.options.dataTextField;i&&!n.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]})),n.value(t)}),m("ui.Widget","$angular_init",function(t,n){var i,r,o,a,s=this.self;if(n&&!e.isArray(n))for(i=s.$angular_scope,r=s.events.length;--r>=0;)(a=n[o=s.events[r]])&&"string"==typeof a&&(n[o]=s.$angular_makeEventHandler(o,i,a))}),m("ui.Widget","$angular_makeEventHandler",function(e,t,n){return n=y(n),function(e){g(t,function(){n(t,{kendoEvent:e})})}}),m(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,n,i){return"change"!=e?this.next():(i=y(i),function(e){var r,o,a,s,l,c,u,d,h,p=e.sender,f=p.options,m={kendoEvent:e};for(t.isString(f.selectable)&&(r=-1!==f.selectable.indexOf("cell"),o=-1!==f.selectable.indexOf("multiple")),a=m.selected=this.select(),s=m.data=[],l=m.columns=[],u=0;a.length>u;u++)d=r?a[u].parentNode:a[u],h=p.dataItem(d),r?(t.element.inArray(h,s)<0&&s.push(h),c=t.element(a[u]).index(),t.element.inArray(c,l)<0&&l.push(c)):s.push(h);o||(m.dataItem=m.data=s[0],m.selected=a[0]),g(n,function(){i(n,m)})})}),m("ui.Grid","$angular_init",function(i,r){if(this.next(),r.columns){var o=e.extend({},kendo.Template,r.templateSettings);t.forEach(r.columns,function(e){!e.field||e.template||e.format||e.values||e.encoded!==n&&!e.encoded||(e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,o.paramName)+"#</span>")})}}),m("mobile.ui.ButtonGroup","value",function(e){var t=this.self;return null!=e&&(t.select(t.element.children("li.km-button").eq(e)),t.trigger("change"),t.trigger("select",{index:t.selectedIndex})),t.selectedIndex}),m("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),v.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(e,t,n){r(e,t,n,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=r(e,t,n,"kendoMobileView","kendoMobileView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=r(e,t,n,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=r(e,t,n,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=r(e,t,n,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,n){n._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,r(e,t,n,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,n){r(e,t,n,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(t,n,i){n.find("a[k-action]").each(function(){e(this).attr("data-"+kendo.ns+"action",e(this).attr("k-action"))}),r(t,n,i,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,r(e,t,n,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}}),t.forEach(["align","icon","rel","transition","actionsheetContext"],function(e){var t="k"+e.slice(0,1).toUpperCase()+e.slice(1);v.directive(t,function(){return{restrict:"A",priority:2,link:function(n,i,r){i.attr(kendo.attr(kendo.toHyphens(e)),n.$eval(r[t]))}}})}),R={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]},function(){var e={};t.forEach(R,function(n,i){t.forEach(n,function(t){e[t]||(e[t]=[]),e[t].push("?^^kendo"+i)})}),t.forEach(e,function(e,t){var n="k"+t,i=kendo.toHyphens(n);v.directive(n,function(){return{restrict:"A",require:e,terminal:!0,compile:function(t,r){if(""===r[n]){t.removeAttr(i);var o=t[0].outerHTML;return function(r,a,s,l){for(var c;!c&&l.length;)c=l.shift();c?(c.template(n,o),t.remove()):k.warn(i+" without a matching parent widget found. It can be one of the following: "+e.join(", "))}}}}})})}())}(window.kendo.jQuery,window.angular),function(e,t){function n(e,t){var n={top:0,right:0,bottom:0,left:0};return t=t||0,"number"==typeof e?n[Ce]=n[xe]=n[oe]=n[ge]=e:(n[Ce]=e[Ce]||t,n[xe]=e[xe]||t,n[oe]=e[oe]||t,n[ge]=e[ge]||t),n}function i(e,t){var n=e.tickX,i=e.tickY,r=e.position,o=new $.Path({stroke:{width:t.width,color:t.color}});return e.vertical?o.moveTo(n,r).lineTo(n+t.size,r):o.moveTo(r,i).lineTo(r,i+t.size),_(o),o}function r(e,t){var n=e.lineStart,i=e.lineEnd,r=e.position,o=new $.Path({stroke:{width:t.width,color:t.color,dashType:t.dashType}});return e.vertical?o.moveTo(n,r).lineTo(i,r):o.moveTo(r,n).lineTo(r,i),_(o),o}function o(e,t){var n,i,r=d(t-e,de-1);if(0===r){if(0===t)return.1;r=te.abs(t)}return d((n=te.pow(10,te.floor(te.log(r)/te.log(10))))*(1.904762>(i=d(r/n,de))?.2:4.761904>i?.5:9.523809>i?1:2),de)}function a(e,t,n,i,r){var o=r*he;return new Me(n+(e-n)*te.cos(o)+(t-i)*te.sin(o),i-(e-n)*te.sin(o)+(t-i)*te.cos(o))}function s(t,n){if(t.x1==n.x1&&t.y1==n.y1&&t.x2==n.x2&&t.y2==n.y2)return n;var i=te.min(t.x1,n.x1),r=te.max(t.x1,n.x1),o=te.min(t.x2,n.x2),a=te.max(t.x2,n.x2),s=te.min(t.y1,n.y1),l=te.max(t.y1,n.y1),c=te.min(t.y2,n.y2),u=te.max(t.y2,n.y2),d=[];return d[0]=b(r,s,o,l),d[1]=b(i,l,r,c),d[2]=b(o,l,a,c),d[3]=b(r,c,o,u),t.x1==i&&t.y1==s||n.x1==i&&n.y1==s?(d[4]=b(i,s,r,l),d[5]=b(o,c,a,u)):(d[4]=b(o,s,a,l),d[5]=b(i,c,r,u)),e.grep(d,function(e){return e.height()>0&&e.width()>0})[0]}function l(e,t){return-1!=Z(e,t)}function c(e,t){return d(te.ceil(e/t)*t,ue)}function u(e,t){return d(te.floor(e/t)*t,ue)}function d(e,t){var n=te.pow(10,t||0);return te.round(e*n)/n}function h(e,t){return te.log(e)/te.log(t)}function p(e,t,n){var i=d(te.abs(e%t),ue);return 0===i||i>t*(1-n)}function f(e,t){return e-t}function g(e,t){return e.match(pe)?N.format.apply(this,arguments):N.toString(t,e)}function m(e,t){return 0>-e.x*t.y+e.y*t.x}function v(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=v._element;return t.innerHTML=e,t.textContent||t.innerText}function _(e){if(!N.support.vml)for(var t=0;e.segments.length>t;t++)e.segments[t].anchor().round(0).translate(.5,.5);return e}function y(e){var t=e.origin,n=e.bottomRight();return new b(t.x,t.y,n.x,n.y)}var b,w,k,x,C,T,S,D,A,M,E,I,R,P,L,F,B,z,H,N=window.kendo,O=N.util,V=O.append,U=O.defined,W=O.last,j=O.valueOrDefault,q=N.dataviz,G=q.geometry,$=q.drawing,Y=$.util.measureText,Q=N.Class,X=N.template,K=e.noop,Z=e.inArray,J=e.isPlainObject,ee=e.trim,te=Math,ne=N.deepExtend,ie="axisLabelClick",re="#000",oe="bottom",ae="center",se=3,le="circle",ce="12px sans-serif",ue=6,de=10,he=te.PI/180,pe=/\{\d+:?/,fe="height",ge="left",me=Number.MAX_VALUE,ve=-Number.MAX_VALUE,_e="none",ye="noteClick",be="noteHover",we="outside",ke="radial",xe="right",Ce="top",Te="width",Se="#fff",De="x",Ae="y",Me=function(e,n){var i=this;return i instanceof Me?(i.x=e||0,i.y=n||0,t):new Me(e,n)};Me.fn=Me.prototype={clone:function(){return new Me(this.x,this.y)},equals:function(e){return e&&e.x===this.x&&e.y===this.y},rotate:function(e,t){var n=this,i=t*he,r=te.cos(i),o=te.sin(i),a=e.x,s=e.y,l=n.x,c=n.y;return n.x=d(a+(l-a)*r+(c-s)*o,se),n.y=d(s+(c-s)*r-(l-a)*o,se),n},multiply:function(e){var t=this;return t.x*=e,t.y*=e,t},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return te.sqrt(t*t+n*n)}},Me.onCircle=function(e,t,n){return t*=he,new Me(e.x-n*te.cos(t),e.y-n*te.sin(t))},(b=function(e,n,i,r){var o=this;return o instanceof b?(o.x1=e||0,o.x2=i||0,o.y1=n||0,o.y2=r||0,t):new b(e,n,i,r)}).fn=b.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(e,t){var n=this;return n.x1+=e,n.x2+=e,n.y1+=t,n.y2+=t,n},move:function(e,t){var n=this,i=n.height(),r=n.width();return U(e)&&(n.x1=e,n.x2=n.x1+r),U(t)&&(n.y1=t,n.y2=n.y1+i),n},wrap:function(e){var t=this;return t.x1=te.min(t.x1,e.x1),t.y1=te.min(t.y1,e.y1),t.x2=te.max(t.x2,e.x2),t.y2=te.max(t.y2,e.y2),t},wrapPoint:function(e){return this.wrap(new b(e.x,e.y,e.x,e.y)),this},snapTo:function(e,t){var n=this;return t!=De&&t||(n.x1=e.x1,n.x2=e.x2),t!=Ae&&t||(n.y1=e.y1,n.y2=e.y2),n},alignTo:function(e,t){var n,i,r=this,o=r.height(),a=r.width(),s=t==Ce||t==oe?Ae:De,l=s==Ae?o:a;return t===ae?(n=e.center(),i=r.center(),r.x1+=n.x-i.x,r.y1+=n.y-i.y):r[s+1]=t===Ce||t===ge?e[s+1]-l:e[s+2],r.x2=r.x1+a,r.y2=r.y1+o,r},shrink:function(e,t){var n=this;return n.x2-=e,n.y2-=t,n},expand:function(e,t){return this.shrink(-e,-t),this},pad:function(e){var t=this,i=n(e);return t.x1-=i.left,t.x2+=i.right,t.y1-=i.top,t.y2+=i.bottom,t},unpad:function(e){var t=n(e);return t.left=-t.left,t.top=-t.top,t.right=-t.right,t.bottom=-t.bottom,this.pad(t)},clone:function(){var e=this;return new b(e.x1,e.y1,e.x2,e.y2)},center:function(){var e=this;return new Me(e.x1+e.width()/2,e.y1+e.height()/2)},containsPoint:function(e){var t=this;return e.x>=t.x1&&t.x2>=e.x&&e.y>=t.y1&&t.y2>=e.y},points:function(){var e=this;return[new Me(e.x1,e.y1),new Me(e.x2,e.y1),new Me(e.x2,e.y2),new Me(e.x1,e.y2)]},getHash:function(){var e=this;return[e.x1,e.y1,e.x2,e.y2].join(",")},overlaps:function(e){return!(this.y1>e.y2||e.y1>this.y2||this.x1>e.x2||e.x1>this.x2)},rotate:function(e){var t=this,n=t.width(),i=t.height(),r=t.center(),o=r.x,s=r.y,l=a(0,0,o,s,e),c=a(n,0,o,s,e),u=a(n,i,o,s,e),d=a(0,i,o,s,e);return n=te.max(l.x,c.x,u.x,d.x)-te.min(l.x,c.x,u.x,d.x),i=te.max(l.y,c.y,u.y,d.y)-te.min(l.y,c.y,u.y,d.y),t.x2=t.x1+n,t.y2=t.y1+i,t},toRect:function(){return new G.Rect([this.x1,this.y1],[this.width(),this.height()])},hasSize:function(){return 0!==this.width()&&0!==this.height()},align:function(e,t,n){var i=this,r=t+1,o=t+2,a=t===De?Te:fe,s=i[a]();l(n,[ge,Ce])?(i[r]=e[r],i[o]=i[r]+s):l(n,[xe,oe])?(i[o]=e[o],i[r]=i[o]-s):n==ae&&(i[r]=e[r]+(e[a]()-s)/2,i[o]=i[r]+s)}},w=Q.extend({init:function(e,t,n,i,r){var o=this;o.c=e,o.ir=t,o.r=n,o.startAngle=i,o.angle=r},clone:function(){var e=this;return new w(e.c,e.ir,e.r,e.startAngle,e.angle)},middle:function(){return this.startAngle+this.angle/2},radius:function(e,t){var n=this;return t?n.ir=e:n.r=e,n},point:function(e,t){var n=this,i=e*he,r=te.cos(i),o=te.sin(i),a=t?n.ir:n.r,s=d(n.c.x-r*a,se),l=d(n.c.y-o*a,se);return new Me(s,l)},adjacentBox:function(e,t,n){var i=this.clone().expand(e),r=i.middle(),o=i.point(r),a=t/2,s=n/2,l=o.x-a,c=o.y-s,u=te.sin(r*he),d=te.cos(r*he);return te.abs(u)<.9&&(l+=a*-d/te.abs(d)),te.abs(d)<.9&&(c+=s*-u/te.abs(u)),new b(l,c,l+t,c+n)},containsPoint:function(e){var t=this,n=t.c,i=t.ir,r=t.r,o=t.startAngle,a=t.startAngle+t.angle,s=e.x-n.x,l=e.y-n.y,c=new Me(s,l),u=t.point(o),h=new Me(u.x-n.x,u.y-n.y),p=t.point(a),f=new Me(p.x-n.x,p.y-n.y),g=d(s*s+l*l,se);return(h.equals(c)||m(h,c))&&!m(f,c)&&g>=i*i&&r*r>=g},getBBox:function(){var e,t,n,i=this,r=new b(me,me,ve,ve),o=d(i.startAngle%360),a=d((o+i.angle)%360),s=i.ir,l=[0,90,180,270,o,a].sort(f),c=Z(o,l),u=Z(a,l);for(e=o==a?l:u>c?l.slice(c,u+1):[].concat(l.slice(0,u+1),l.slice(c,l.length)),t=0;e.length>t;t++)n=i.point(e[t]),r.wrapPoint(n),r.wrapPoint(n,s);return s||r.wrapPoint(i.c),r},expand:function(e){return this.r+=e,this}}),k=w.extend({init:function(e,t,n,i){w.fn.init.call(this,e,0,t,n,i)},expand:function(e){return w.fn.expand.call(this,e)},clone:function(){var e=this;return new k(e.c,e.r,e.startAngle,e.angle)},radius:function(e){return w.fn.radius.call(this,e)},point:function(e){return w.fn.point.call(this,e)}}),(x=function(){}).fn=x.prototype={createRing:function(e,t){var n,i=e.startAngle+180,r=e.angle+i,o=new G.Point(e.c.x,e.c.y),a=te.max(e.r,0),s=te.max(e.ir,0),l=new G.Arc(o,{startAngle:i,endAngle:r,radiusX:a,radiusY:a}),c=$.Path.fromArc(l,t).close();return s?(l.radiusX=l.radiusY=s,n=l.pointAt(r),c.lineTo(n.x,n.y),c.arc(r,i,s,s,!0)):c.lineTo(o.x,o.y),c}},x.current=new x,T=(C=Q.extend({init:function(e){var t=this;t.children=[],t.options=ne({},t.options,e)},reflow:function(e){var t,n,i,r=this.children;for(n=0;r.length>n;n++)(i=r[n]).reflow(e),t=t?t.wrap(i.box):i.box.clone();this.box=t||e},destroy:function(){var e,t=this.children;for(this.getRoot(),this.animation&&this.animation.destroy(),e=0;t.length>e;e++)t[e].destroy()},getRoot:function(){var e=this.parent;return e?e.getRoot():null},translateChildren:function(e,t){var n,i=this.children,r=i.length;for(n=0;r>n;n++)i[n].box.translate(e,t)},append:function(){V(this.children,arguments);for(var e=0;arguments.length>e;e++)arguments[e].parent=this},renderVisual:function(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},addVisual:function(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},renderChildren:function(){var e,t=this.children;for(e=0;t.length>e;e++)t[e].renderVisual()},createVisual:function(){this.visual=new q.drawing.Group({zIndex:this.options.zIndex,visible:j(this.options.visible,!0)})},createAnimation:function(){this.visual&&(this.animation=$.Animation.create(this.visual,this.options.animation))},appendVisual:function(e){e.chartElement||(e.chartElement=this),e.options.noclip?this.clipRoot().visual.append(e):U(e.options.zIndex)?this.stackRoot().stackVisual(e):this.visual?this.visual.append(e):this.parent.appendVisual(e)},clipRoot:function(){return this.parent?this.parent.clipRoot():this},stackRoot:function(){return this.parent?this.parent.stackRoot():this},stackVisual:function(e){var t,n,i=e.options.zIndex||0,r=this.visual.children;for(t=0;r.length>t&&(n=r[t],!(j(n.options.zIndex,0)>i));t++);this.visual.insertAt(e,t)},traverse:function(e){var t,n,i=this.children;for(t=0;i.length>t;t++)e(n=i[t]),n.traverse&&n.traverse(e)},closest:function(e){for(var n=this,i=!1;n&&!i;)(i=e(n))||(n=n.parent);return i?n:t},renderComplete:e.noop,hasHighlight:function(){var e=(this.options||{}).highlight;return!(!this.createHighlight||e&&!1===e.visible)},toggleHighlight:function(e){var t,n=this,i=n._highlight,r=((n.options||{}).highlight||{}).visual;if(!i){if(t={fill:{color:Se,opacity:.2},stroke:{color:Se,width:1,opacity:.2}},r){if(!(i=n._highlight=r(ne(n.highlightVisualArgs(),{createVisual:function(){return n.createHighlight(t)},series:n.series,dataItem:n.dataItem,category:n.category,value:n.value,percentage:n.percentage,runningTotal:n.runningTotal,total:n.total}))))return}else i=n._highlight=n.createHighlight(t);i.options.zIndex=n.options.zIndex,n.appendVisual(i)}i.visible(e)},createGradientOverlay:function(e,t,n){var i=new $.Path(ne({stroke:{color:_e},fill:this.createGradient(n),closed:e.options.closed},t));return i.segments.elements(e.segments.elements()),i},createGradient:function(e){return this.parent?this.parent.createGradient(e):t}})).extend({init:function(e){this.gradients={},C.fn.init.call(this,e)},options:{width:600,height:400,background:Se,border:{color:re,width:0},margin:n(5),zIndex:-2},reflow:function(){var e,t=this,n=t.options,i=t.children,r=new b(0,0,n.width,n.height);for(t.box=r.unpad(n.margin),e=0;i.length>e;e++)i[e].reflow(r),r=s(r,i[e].box)||b()},createVisual:function(){this.visual=new $.Group,this.createBackground()},createBackground:function(){var e=this.options,t=e.border||{},n=this.box.clone().pad(e.margin).unpad(t.width),i=$.Path.fromRect(n.toRect(),{stroke:{color:t.width?t.color:"",width:t.width,dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},zIndex:-10});this.visual.append(i)},getRoot:function(){return this},createGradient:function(e){var t,n,i=this.gradients,r=O.objectKey(e),o=q.Gradients[e.gradient];return i[r]?t=i[r]:(n=ne({},o,e),"linear"==o.type?t=new $.LinearGradient(n):(e.innerRadius&&(n.stops=function(e){var t,n,i=e.stops,r=e.innerRadius/e.radius*100,o=i.length,a=[];for(t=0;o>t;t++)(n=ne({},i[t])).offset=(n.offset*(100-r)+r)/100,a.push(n);return a}(n)),(t=new $.RadialGradient(n)).supportVML=!1!==o.supportVML),i[r]=t),t}}),S=C.extend({options:{align:ge,vAlign:Ce,margin:{},padding:{},border:{color:re,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0},reflow:function(e){function t(){s.align(e,De,l.align),s.align(e,Ae,l.vAlign),s.paddingBox=i.clone().unpad(p).unpad(g)}var i,r,o,a,s=this,l=s.options,c=l.width,u=l.height,d=c&&u,h=l.shrinkToFit,p=n(l.margin),f=n(l.padding),g=l.border.width,m=s.children;for(r=e.clone(),d&&(r.x2=r.x1+c,r.y2=r.y1+u),h&&r.unpad(p).unpad(g).unpad(f),C.fn.reflow.call(s,r),i=d?s.box=b(0,0,c,u):s.box,h&&d?(t(),r=s.contentBox=s.paddingBox.clone().unpad(f)):(r=s.contentBox=i.clone(),i.pad(f).pad(g).pad(p),t()),s.translateChildren(i.x1-r.x1+p.left+g+f.left,i.y1-r.y1+p.top+g+f.top),o=0;m.length>o;o++)(a=m[o]).reflow(a.box)},align:function(e,t,n){this.box.align(e,t,n)},hasBox:function(){var e=this.options;return e.border.width||e.background},createVisual:function(){C.fn.createVisual.call(this),this.options.visible&&this.hasBox()&&this.visual.append($.Path.fromRect(this.paddingBox.toRect(),this.visualStyle()))},visualStyle:function(){var e=this.options,t=e.border||{};return{stroke:{width:t.width,color:t.color,opacity:j(t.opacity,e.opacity),dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},cursor:e.cursor}}}),D=C.extend({init:function(e,t){var n=this;C.fn.init.call(n,t),n.content=e,n.reflow(b())},options:{font:ce,color:re,align:ge,vAlign:""},reflow:function(e){var t,n=this,i=n.options;t=i.size=Y(n.content,{font:i.font}),n.baseline=t.baseline,n.box=b(e.x1,e.y1,e.x1+t.width,e.y1+t.height)},createVisual:function(){var e=this.options;this.visual=new $.Text(this.content,this.box.toRect().topLeft(),{font:e.font,fill:{color:e.color,opacity:e.opacity},cursor:e.cursor})}}),A=C.extend({init:function(e){C.fn.init.call(this,e),this._initDirection()},_initDirection:function(){var e=this.options;e.vertical?(this.groupAxis=De,this.elementAxis=Ae,this.groupSizeField=Te,this.elementSizeField=fe,this.groupSpacing=e.spacing,this.elementSpacing=e.vSpacing):(this.groupAxis=Ae,this.elementAxis=De,this.groupSizeField=fe,this.elementSizeField=Te,this.groupSpacing=e.vSpacing,this.elementSpacing=e.spacing)},options:{vertical:!0,wrap:!0,vSpacing:0,spacing:0},reflow:function(e){this.box=e.clone(),this.reflowChildren()},reflowChildren:function(){var e,t,n,i,r,o,a,s,l,c,u=this,d=u.box,h=u.elementAxis,p=u.groupAxis,f=u.elementSizeField,g=u.groupSizeField,m=u.groupOptions(),v=m.groups,_=v.length,y=d[p+1]+u.alignStart(m.groupsSize,d[g]()),w=y;if(_){for(a=0;_>a;a++){for(r=(i=(n=v[a]).groupElements).length,e=d[h+1],o=0;r>o;o++)s=i[o],c=u.elementSize(s),t=w+u.alignStart(c[g],n.groupSize),(l=b())[p+1]=t,l[p+2]=t+c[g],l[h+1]=e,l[h+2]=e+c[f],s.reflow(l),e+=c[f]+u.elementSpacing;w+=n.groupSize+u.groupSpacing}d[p+1]=y,d[p+2]=y+m.groupsSize,d[h+2]=d[h+1]+m.maxGroupElementsSize}},alignStart:function(e,t){var n=0,i=this.options.align;return i==xe||i==oe?n=t-e:i==ae&&(n=(t-e)/2),n},groupOptions:function(){var e,t,n=this,i=n.box,r=n.children,o=r.length,a=this.elementSizeField,s=this.groupSizeField,l=this.elementSpacing,c=this.groupSpacing,u=d(i[a]()),h=0,p=0,f=0,g=0,m=[],v=[],_=0;for(h=0;o>h;h++)(t=r[h]).box||t.reflow(i),e=this.elementSize(t),n.options.wrap&&d(f+l+e[a])>u&&(m.push({groupElements:v,groupSize:p,groupElementsSize:f}),_=te.max(_,f),g+=c+p,p=0,f=0,v=[]),p=te.max(p,e[s]),f>0&&(f+=l),f+=e[a],v.push(t);return m.push({groupElements:v,groupSize:p,groupElementsSize:f}),_=te.max(_,f),{groups:m,groupsSize:g+=p,maxGroupElementsSize:_}},elementSize:function(e){return{width:e.box.width(),height:e.box.height()}},createVisual:K}),M=S.extend({ROWS_SPLIT_REGEX:/\n|\\n/m,init:function(e,t){var n=this;n.content=e,S.fn.init.call(n,t),n._initContainer(),n.reflow(b())},_initContainer:function(){var e,t,n=this,i=n.options,r=(n.content+"").split(n.ROWS_SPLIT_REGEX),o=new A({vertical:!0,align:i.align,wrap:!1}),a=ne({},i,{opacity:1,animation:null});for(n.hasBox(),n.container=o,n.append(o),t=0;r.length>t;t++)e=new D(ee(r[t]),a),o.append(e)},reflow:function(e){var t,i,r,o=this.options,a=o.visual;this.container.options.align=o.align,a&&!this._boxReflow?(e.hasSize()||(this._boxReflow=!0,this.reflow(e),this._boxReflow=!1,e=this.box),this.visual=a(this.visualContext(e)),t=e,this.visual&&(t=y(this.visual.clippedBBox()||new G.Rect),this.visual.options.zIndex=o.zIndex,this.visual.options.noclip=o.noclip),this.box=this.contentBox=this.paddingBox=t):(S.fn.reflow.call(this,e),o.rotation&&(i=n(o.margin),r=this.box.unpad(i),this.targetBox=e,this.normalBox=r.clone(),(r=this.rotate()).translate(i.left-i.right,i.top-i.bottom),this.rotatedBox=r.clone(),r.pad(i)))},createVisual:function(){var e,t=this.options;t.visible&&(this.visual=new q.drawing.Group({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()&&(e=$.Path.fromRect(this.paddingBox.toRect(),this.visualStyle()),this.visual.append(e)))},renderVisual:function(){this.options.visual?(this.addVisual(),this.createAnimation()):S.fn.renderVisual.call(this)},visualOptions:function(){var e=this.options;return{background:e.background,border:e.border,color:e.color,font:e.font,margin:e.margin,padding:e.padding,visible:e.visible}},visualContext:function(e){var t=this;return{text:t.content,rect:e.toRect(),options:t.visualOptions(),createVisual:function(){return t._boxReflow=!0,t.reflow(e),t._boxReflow=!1,t.getDefaultVisual()}}},getDefaultVisual:function(){this.createVisual(),this.renderChildren();var e=this.visual;return delete this.visual,e},rotate:function(){var e=this.options;return this.box.rotate(e.rotation),this.align(this.targetBox,De,e.align),this.align(this.targetBox,Ae,e.vAlign),this.box},rotationTransform:function(){var e,t,n,i,r=this.options.rotation;return r?(t=(e=this.normalBox.center()).x,n=e.y,i=this.rotatedBox.center(),G.transform().translate(i.x-t,i.y-n).rotate(r,[t,n])):null}}),(E=C.extend({init:function(e){var t=this;C.fn.init.call(t,e),e=t.options,t.append(new M(e.text,ne({},e,{vAlign:e.position})))},options:{color:re,position:Ce,align:ae,margin:n(5),padding:n(5)},reflow:function(e){C.fn.reflow.call(this,e),this.box.snapTo(e,De)}})).buildTitle=function(e,t,n){var i;return"string"==typeof e&&(e={text:e}),(e=ne({visible:!0},n,e))&&e.visible&&e.text&&(i=new E(e),t.append(i)),i},I=M.extend({init:function(e,t,n,i,r){var o=this;o.text=t,o.value=e,o.index=n,o.dataItem=i,M.fn.init.call(o,t,r)},visualContext:function(e){var t=M.fn.visualContext.call(this,e);return t.value=this.value,t.dataItem=this.dataItem,t.format=this.options.format,t.culture=this.options.culture,t},click:function(t,n){var i=this;t.trigger(ie,{element:e(n.target),value:i.value,text:i.text,index:i.index,dataItem:i.dataItem,axis:i.parent.options})},rotate:function(){var e,t;return this.options.alignRotation!=ae?(e=this.normalBox.toRect(),t=this.rotationTransform(),this.box=y(e.bbox(t.matrix()))):M.fn.rotate.call(this),this.box},rotationTransform:function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,f,g,m,v,_,y=this.options,b=y.rotation;return b?y.alignRotation==ae?M.fn.rotationTransform.call(this):(e=G.transform().rotate(b).matrix(),t=this.normalBox.toRect(),n=this.targetBox.toRect(),r=(i=y.rotationOrigin||Ce)==Ce||i==oe?De:Ae,o=i==Ce||i==oe?Ae:De,a=i==Ce||i==ge?n.origin:n.bottomRight(),s=t.topLeft().transformCopy(e),l=t.topRight().transformCopy(e),c=t.bottomRight().transformCopy(e),u=t.bottomLeft().transformCopy(e),h=G.Rect.fromPoints(s,l,c,u),(p={})[o]=n.origin[o]-h.origin[o],f=te.abs(s[o]+p[o]-a[o]),g=te.abs(l[o]+p[o]-a[o]),d(f,ue)===d(g,ue)?(m=s,v=l):f>g?(m=l,v=c):(m=s,v=u),_=m[r]+(v[r]-m[r])/2,p[r]=n.center()[r]-_,G.transform().translate(p.x,p.y).rotate(b)):null}}),R=C.extend({init:function(e){var t=this;C.fn.init.call(t,e),t.options.visible||(t.options=ne({},t.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),t.options.minorTicks=ne({},{color:t.options.line.color,width:t.options.line.width,visible:t.options.minorTickType!=_e},t.options.minorTicks,{size:t.options.minorTickSize,align:t.options.minorTickType}),t.options.majorTicks=ne({},{color:t.options.line.color,width:t.options.line.width,visible:t.options.majorTickType!=_e},t.options.majorTicks,{size:t.options.majorTickSize,align:t.options.majorTickType}),this.options._deferLabels||t.createLabels(),t.createTitle(),t.createNotes()},options:{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:re,visible:!0},title:{visible:!0,position:ae},majorTicks:{align:we,size:4,skip:0,step:1},minorTicks:{align:we,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:we,minorTickType:_e,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:re,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1},createLabels:function(){var t,n,i,r,o=this,a=o.options,s=a.vertical?xe:ae,l=ne({},a.labels,{align:s,zIndex:a.zIndex}),c=te.max(1,l.step);if(o.children=e.grep(o.children,function(e){return!(e instanceof I)}),o.labels=[],l.visible)for(t=o.labelsCount(),n=l.rotation,J(n)&&(l.alignRotation=n.align,l.rotation=n.angle),"auto"==l.rotation&&(l.rotation=0,a.autoRotateLabels=!0),r=l.skip;t>r;r+=c)(i=o.createAxisLabel(r,l))&&(o.append(i),o.labels.push(i))},lineBox:function(){var e=this.options,t=this.box,n=e.vertical,i=e.labels.mirror,r=i?t.x1:t.x2,o=i?t.y2:t.y1,a=e.line.width||0;return n?b(r,t.y1,r,t.y2-a):b(t.x1,o,t.x2-a,o)},createTitle:function(){var e,t=this,n=t.options,i=ne({rotation:n.vertical?-90:0,text:"",zIndex:1,visualSize:!0},n.title);i.visible&&i.text&&(e=new M(i.text,i),t.append(e),t.title=e)},createNotes:function(){var e,t,n,i=this,r=i.options,o=r.notes,a=o.data||[];for(i.notes=[],e=0;a.length>e;e++)(t=ne({},o,a[e])).value=i.parseNoteValue(t.value),(n=new P(t.value,t.label.text,null,null,null,t)).options.visible&&(U(n.options.position)?r.vertical&&!l(n.options.position,[ge,xe])?n.options.position=r.reverse?ge:xe:r.vertical||l(n.options.position,[Ce,oe])||(n.options.position=r.reverse?oe:Ce):n.options.position=r.vertical?r.reverse?ge:xe:r.reverse?oe:Ce,i.append(n),i.notes.push(n))},parseNoteValue:function(e){return e},renderVisual:function(){C.fn.renderVisual.call(this),this.createPlotBands()},createVisual:function(){C.fn.createVisual.call(this),this.createBackground(),this.createLine()},gridLinesVisual:function(){var e=this._gridLines;return e||(e=this._gridLines=new $.Group({zIndex:-2}),this.appendVisual(this._gridLines)),e},createTicks:function(e){function t(t,n,r){var s,c=t.length;if(n.visible)for(s=n.skip;c>s;s+=n.step)U(r)&&s%r==0||(l.tickX=a?o.x2:o.x2-n.size,l.tickY=a?o.y1-n.size:o.y1,l.position=t[s],e.append(i(l,n)))}var n=this,r=n.options,o=n.lineBox(),a=r.labels.mirror,s=r.majorTicks.visible?r.majorUnit:0,l={vertical:r.vertical};t(n.getMajorTickPositions(),r.majorTicks),t(n.getMinorTickPositions(),r.minorTicks,s/r.minorUnit)},createLine:function(){var e,t,n=this.options,i=n.line,r=this.lineBox();i.width>0&&i.visible&&((e=new $.Path({stroke:{width:i.width,color:i.color,dashType:i.dashType}})).moveTo(r.x1,r.y1).lineTo(r.x2,r.y2),n._alignLines&&_(e),(t=this._lineGroup=new $.Group).append(e),this.visual.append(t),this.createTicks(t))},getActualTickSize:function(){var e=this.options,t=0;return e.majorTicks.visible&&e.minorTicks.visible?t=te.max(e.majorTicks.size,e.minorTicks.size):e.majorTicks.visible?t=e.majorTicks.size:e.minorTicks.visible&&(t=e.minorTicks.size),t},createBackground:function(){var e=this,t=e.options.background,n=e.box;t&&(e._backgroundPath=$.Path.fromRect(n.toRect(),{fill:{color:t},stroke:null}),this.visual.append(e._backgroundPath))},createPlotBands:function(){var t,n,i,r,o=this,a=o.options,s=a.plotBands||[],l=a.vertical,c=o.plotArea;0!==s.length&&(i=this._plotbandGroup=new $.Group({zIndex:-1}),r=e.grep(o.pane.axes,function(e){return e.options.vertical!==o.options.vertical})[0],this.range(),e.each(s,function(e,a){var s,u;j(a.from,ve),j(a.to,me),l?(t=(r||c.axisX).lineBox(),n=o.getSlot(a.from,a.to,!0)):(t=o.getSlot(a.from,a.to,!0),n=(r||c.axisY).lineBox()),0!==t.width()&&0!==n.height()&&(s=new G.Rect([t.x1,n.y1],[t.width(),n.height()]),u=$.Path.fromRect(s,{fill:{color:a.color,opacity:a.opacity},stroke:null}),i.append(u))}),o.appendVisual(i))},createGridLines:function(e){function t(e,t,i){var o,s=e.length;if(t.visible)for(o=t.skip;s>o;o+=t.step)l(n=d(e[o]),f)||o%i==0||a&&h===n||(p.position=n,g.append(r(p,t)),f.push(n))}var n,i=this,o=i.options,a=e.options.line.visible,s=o.majorGridLines.visible?o.majorUnit:0,c=o.vertical,u=e.lineBox(),h=u[c?"y1":"x1"],p={lineStart:u[c?"x1":"y1"],lineEnd:u[c?"x2":"y2"],vertical:c},f=[],g=this.gridLinesVisual();return t(i.getMajorTickPositions(),o.majorGridLines),t(i.getMinorTickPositions(),o.minorGridLines,s/o.minorUnit),g.children},reflow:function(e){var t,n,i=this,r=i.options,o=r.vertical,a=i.labels,s=a.length,l=i.title,c=o?Te:fe,u=l?l.box[c]():0,d=i.getActualTickSize()+r.margin+u,h=0,p=((this.getRoot()||{}).box||e)[c]();for(n=0;s>n;n++)p>=(t=a[n].box[c]())+d&&(h=te.max(h,t));i.box=o?b(e.x1,e.y1,e.x1+h+d,e.y2):b(e.x1,e.y1,e.x2,e.y1+h+d),i.arrangeTitle(),i.arrangeLabels(),i.arrangeNotes()},arrangeLabels:function(){var e,t,n,i,r,o,a,s,l,c,u=this,d=u.options,h=u.labels,p=!d.justified,f=d.vertical,g=u.lineBox(),m=d.labels.mirror,v=u.getMajorTickPositions(),_=u.getActualTickSize()+d.margin;for(n=0;h.length>n;n++)r=(i=h[n]).index,o=f?i.box.height():i.box.width(),a=v[r]-o/2,f?(p&&(a=(s=v[r])+((l=v[r+1])-s)/2-o/2),c=g.x2,m?(c+=_,i.options.rotationOrigin=ge):(c-=_+i.box.width(),i.options.rotationOrigin=xe),e=i.box.move(c,a)):(p?(s=v[r],l=v[r+1]):(s=a,l=a+o),t=g.y1,m?(t-=_+i.box.height(),i.options.rotationOrigin=oe):(t+=_,i.options.rotationOrigin=Ce),e=b(s,t,l,t+i.box.height())),i.reflow(e)},autoRotateLabels:function(){var e,t,n,i,r,o;if(this.options.autoRotateLabels&&!this.options.vertical){for(e=this.getMajorTickPositions(),t=this.labels,o=0;t.length>o;o++)if(r=e[o+1]-e[o],(n=t[o].box).width()>r){if(n.height()>r){i=-90;break}i=-45}if(i){for(o=0;t.length>o;o++)t[o].options.rotation=i,t[o].reflow(b());return!0}}},arrangeTitle:function(){var e=this,t=e.options,n=t.labels.mirror,i=t.vertical,r=e.title;r&&(i?(r.options.align=n?xe:ge,r.options.vAlign=r.options.position):(r.options.align=r.options.position,r.options.vAlign=n?Ce:oe),r.reflow(e.box))},arrangeNotes:function(){var e,t,n,i,r=this;for(e=0;r.notes.length>e;e++)i=(t=r.notes[e]).options.value,U(i)?(r.shouldRenderNote(i)?t.show():t.hide(),n=r.getSlot(i)):t.hide(),t.reflow(n||r.lineBox())},alignTo:function(e){var t=this,n=e.lineBox(),i=t.options.vertical,r=i?Ae:De;t.box.snapTo(n,r),i?t.box.shrink(0,t.lineBox().height()-n.height()):t.box.shrink(t.lineBox().width()-n.width(),0),t.box[r+1]-=t.lineBox()[r+1]-n[r+1],t.box[r+2]-=t.lineBox()[r+2]-n[r+2]},axisLabelText:function(e,t,n){var i=e;return n.template?i=X(n.template)({value:e,dataItem:t,format:n.format,culture:n.culture}):n.format&&(i=n.format.match(pe)?N.format(n.format,e):N.toString(e,n.format,n.culture)),i},slot:function(e,n){var i=this.getSlot(e,n);return i?i.toRect():t},contentBox:function(){var e=this.box.clone();return this.labels.length&&e.wrap(this.labels[0].box).wrap(W(this.labels).box),e}}),P=S.extend({init:function(e,t,n,i,r,o){var a=this;S.fn.init.call(a,o),a.value=e,a.text=t,a.dataItem=n,a.category=i,a.series=r,a.render()},options:{icon:{visible:!0,type:le},label:{position:"inside",visible:!0,align:ae,vAlign:ae},line:{visible:!0},visible:!0,position:Ce,zIndex:2},hide:function(){this.options.visible=!1},show:function(){this.options.visible=!0},render:function(){var e,t,n,i=this,r=i.options,o=r.label,a=i.text,s=r.icon,l=s.size,c=b();r.visible&&(U(o)&&o.visible&&(o.template?a=X(o.template)({dataItem:i.dataItem,category:i.category,value:i.value,text:a,series:i.series}):o.format&&(a=g(o.format,a)),i.label=new M(a,ne({},o)),"inside"!==o.position||U(l)||(s.type===le?l=te.max(i.label.box.width(),i.label.box.height()):(t=i.label.box.width(),n=i.label.box.height()),c.wrap(i.label.box))),s.width=t||l||7,s.height=n||l||7,e=new L(ne({},s)),i.marker=e,i.append(e),i.label&&i.append(i.label),e.reflow(b()),i.wrapperBox=c.wrap(e.box))},reflow:function(e){var t,n,i,r=this,o=r.options,a=e.center(),s=r.wrapperBox,c=o.line.length,u=o.position,d=r.label,h=r.marker;o.visible&&(l(u,[ge,xe])?u===ge?(i=s.alignTo(e,u).translate(-c,e.center().y-s.center().y),o.line.visible&&(t=[e.x1,a.y],r.linePoints=[t,[i.x2,a.y]],n=i.clone().wrapPoint(t))):(i=s.alignTo(e,u).translate(c,e.center().y-s.center().y),o.line.visible&&(t=[e.x2,a.y],r.linePoints=[t,[i.x1,a.y]],n=i.clone().wrapPoint(t))):u===oe?(i=s.alignTo(e,u).translate(e.center().x-s.center().x,c),o.line.visible&&(t=[a.x,e.y2],r.linePoints=[t,[a.x,i.y1]],n=i.clone().wrapPoint(t))):(i=s.alignTo(e,u).translate(e.center().x-s.center().x,-c),o.line.visible&&(t=[a.x,e.y1],r.linePoints=[t,[a.x,i.y2]],n=i.clone().wrapPoint(t))),h&&h.reflow(i),d&&(d.reflow(i),h&&(o.label.position===we&&d.box.alignTo(h.box,u),d.reflow(d.box))),r.contentBox=i,r.targetBox=e,r.box=n||i)},createVisual:function(){S.fn.createVisual.call(this),this.options.visible&&this.createLine()},renderVisual:function(){var e=this,t=e.options,n=t.visual;t.visible&&n?(e.targetPoint,e.visual=n({dataItem:e.dataItem,category:e.category,value:e.value,text:e.text,series:e.series,rect:e.targetBox.toRect(),options:{background:t.background,border:t.background,icon:t.icon,label:t.label,line:t.line,position:t.position,visible:t.visible},createVisual:function(){e.createVisual(),e.renderChildren();var t=e.visual;return delete e.visual,t}}),e.addVisual()):S.fn.renderVisual.call(e)},createLine:function(){var e,t=this.options.line;this.linePoints&&(_(e=$.Path.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}})),this.visual.append(e))},click:function(e,t){var n=this.eventArgs(t);e.trigger(ye,n)||t.preventDefault()},hover:function(e,t){var n=this.eventArgs(t);e.trigger(be,n)||t.preventDefault()},leave:function(e){e._unsetActivePoint()},eventArgs:function(t){var n=this,i=n.options;return{element:e(t.target),text:U(i.label)?i.label.text:"",dataItem:n.dataItem,series:n.series,value:n.value,category:n.category}}}),L=S.extend({init:function(e,t){this.pointData=t,S.fn.init.call(this,e)},options:{type:le,align:ae,vAlign:ae},getElement:function(){var e,t,n=this,i=n.options,r=i.type,o=i.rotation,a=n.paddingBox,s=a.center(),l=a.width()/2;if(i.visible&&n.hasBox())return t=n.visualStyle(),r===le?e=new $.Circle(new G.Circle([d(a.x1+l,se),d(a.y1+a.height()/2,se)],l),t):"triangle"===r?e=$.Path.fromPoints([[a.x1+l,a.y1],[a.x1,a.y2],[a.x2,a.y2]],t).close():"cross"===r?((e=new $.MultiPath(t)).moveTo(a.x1,a.y1).lineTo(a.x2,a.y2),e.moveTo(a.x1,a.y2).lineTo(a.x2,a.y1)):e=$.Path.fromRect(a.toRect(),t),o&&e.transform(G.transform().rotate(-o,[s.x,s.y])),e.options.zIndex=this.options.zIndex,e},createElement:function(){var e=this,t=e.options.visual,n=e.pointData||{};return t?t({value:n.value,dataItem:n.dataItem,series:n.series,category:n.category,rect:e.paddingBox.toRect(),options:e.visualOptions(),createVisual:function(){return e.getElement()}}):e.getElement()},visualOptions:function(){var e=this.options;return{background:e.background,border:e.border,margin:e.margin,padding:e.padding,type:e.type,size:e.width,visible:e.visible}},createVisual:function(){this.visual=this.createElement()}}),F=R.extend({init:function(e,t,n){var i=this.initDefaults(e,t,n);R.fn.init.call(this,i)},startValue:function(){return 0},options:{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:re},labels:{format:"#.####################"},zIndex:1},initDefaults:function(e,t,n){var i,r=n.narrowRange,a=this.autoAxisMin(e,t,r),s=this.autoAxisMax(e,t,r),l=o(a,s),d={majorUnit:l};return!1!==n.roundToMajorUnit&&(0>a&&p(a,l,1/3)&&(a-=l),s>0&&p(s,l,1/3)&&(s+=l)),d.min=u(a,l),d.max=c(s,l),n&&((i=U(n.min)||U(n.max))&&n.min===n.max&&(n.min>0?n.min=0:n.max=1),n.majorUnit?(d.min=u(d.min,n.majorUnit),d.max=c(d.max,n.majorUnit)):i&&(n=ne(d,n),d.majorUnit=o(n.min,n.max))),d.minorUnit=(n.majorUnit||d.majorUnit)/5,ne(d,n)},range:function(){var e=this.options;return{min:e.min,max:e.max}},autoAxisMax:function(e,t,n){var i,r;if(!e&&!t)return 1;if(0>=e&&0>=t){if(t=e==t?0:t,r=te.abs((t-e)/t),!1===n||!n&&r>.2)return 0;i=te.min(0,t-(e-t)/2)}else e=e==t?0:e,i=t;return i},autoAxisMin:function(e,t,n){var i;if(!e&&!t)return 0;if(e>=0&&t>=0){if(e=e==t?0:e,!1===n||!n&&(t-e)/t>.2)return 0;i=te.max(0,e-(t-e)/2)}else t=e==t?0:t,i=e;return i},getDivisions:function(e){if(0===e)return 1;var t=this.options,n=t.max-t.min;return te.floor(d(n/e,se))+1},getTickPositions:function(e,t){var n,i=this,r=i.options,o=r.vertical,a=r.reverse,s=i.lineBox(),l=e*((o?s.height():s.width())/(r.max-r.min)),c=0,u=i.getDivisions(e),h=(o?-1:1)*(a?-1:1),p=s[(o?Ae:De)+(1===h?1:2)],f=[];for(t&&(c=t/e),n=0;u>n;n++)n%c!=0&&f.push(d(p,se)),p+=l*h;return f},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(e,t,n){var i,r,o=this.options,a=o.reverse,s=o.vertical,l=s?Ae:De,c=this.lineBox(),u=c[l+(a?2:1)],d=s?c.height():c.width(),h=(a?-1:1)*(d/(o.max-o.min)),p=new b(c.x1,c.y1,c.x1,c.y1);return U(e)||(e=t||0),U(t)||(t=e||0),n&&(e=te.max(te.min(e,o.max),o.min),t=te.max(te.min(t,o.max),o.min)),s?(i=o.max-te.max(e,t),r=o.max-te.min(e,t)):(i=te.min(e,t)-o.min,r=te.max(e,t)-o.min),p[l+1]=te.max(te.min(u+h*(a?r:i),1e5),-1e5),p[l+2]=te.max(te.min(u+h*(a?i:r),1e5),-1e5),p},getValue:function(e){var t=this.options,n=t.reverse,i=t.vertical,r=1*t.max,o=1*t.min,a=i?Ae:De,s=this.lineBox(),l=s[a+(n?2:1)],c=i?s.height():s.width(),u=(n?-1:1)*(e[a]-l),h=u*((r-o)/c);return 0>u||u>c?null:d(i?r-h:o+h,ue)},translateRange:function(e){var t=this.options,n=this.lineBox(),i=t.vertical,r=t.reverse,o=d(e/((i?n.height():n.width())/(t.max-t.min)),ue);return!i&&!r||i&&r||(o=-o),{min:t.min+o,max:t.max+o}},scaleRange:function(e){var t=this.options,n=-e*t.majorUnit;return{min:t.min-n,max:t.max+n}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var n=this.options,i=d(n.min+e*n.majorUnit,ue),r=this.axisLabelText(i,null,t);return new I(i,r,e,null,t)},shouldRenderNote:function(e){var t=this.range();return e>=t.min&&t.max>=e}}),B=R.extend({init:function(e,t,n){this.options=this._initOptions(e,t,n),R.fn.init.call(this,n)},startValue:function(){return this.options.min},options:{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:re},zIndex:1},getSlot:function(e,n,i){var r,o,a=this,s=a.options,l=s.reverse,c=s.vertical,u=c?Ae:De,d=a.lineBox(),p=d[u+(l?2:1)],f=c?d.height():d.width(),g=l?-1:1,m=s.majorUnit,v=a.logMin,_=a.logMax,y=g*(f/(_-v)),w=new b(d.x1,d.y1,d.x1,d.y1);return U(e)||(e=n||1),U(n)||(n=e||1),0>=e||0>=n?t:(i&&(e=te.max(te.min(e,s.max),s.min),n=te.max(te.min(n,s.max),s.min)),e=h(e,m),n=h(n,m),c?(r=_-te.max(e,n),o=_-te.min(e,n)):(r=te.min(e,n)-v,o=te.max(e,n)-v),w[u+1]=p+y*(l?o:r),w[u+2]=p+y*(l?r:o),w)},getValue:function(e){var t,n=this,i=n.options,r=i.reverse,o=i.vertical,a=n.lineBox(),s=i.majorUnit,l=n.logMin,c=n.logMax,u=o===r?1:-1,h=1===u?1:2,p=o?a.height():a.width(),f=(c-l)/p,g=o?Ae:De,m=a[g+h],v=u*(e[g]-m);return 0>v||v>p?null:(t=l+v*f,d(te.pow(s,t),ue))},range:function(){var e=this.options;return{min:e.min,max:e.max}},scaleRange:function(e){var t=this,n=t.options.majorUnit,i=-e;return{min:te.pow(n,t.logMin-i),max:te.pow(n,t.logMax+i)}},translateRange:function(e){var t=this,n=t.options,i=n.majorUnit,r=t.lineBox(),o=n.vertical,a=n.reverse,s=d(e/((o?r.height():r.width())/(t.logMax-t.logMin)),ue);return!o&&!a||o&&a||(s=-s),{min:te.pow(i,t.logMin+s),max:te.pow(i,t.logMax+s)}},labelsCount:function(){var e=te.floor(this.logMax);return te.floor(e-this.logMin)+1},getMajorTickPositions:function(){var e=[];return this.traverseMajorTicksPositions(function(t){e.push(t)},{step:1,skip:0}),e},createTicks:function(e){function t(t,n){c.tickX=a?o.x2:o.x2-n.size,c.tickY=a?o.y1-n.size:o.y1,c.position=t,e.append(i(c,n))}var n=this,r=n.options,o=n.lineBox(),a=r.labels.mirror,s=r.majorTicks,l=r.minorTicks,c={vertical:r.vertical};return s.visible&&n.traverseMajorTicksPositions(t,s),l.visible&&n.traverseMinorTicksPositions(t,l),[]},createGridLines:function(e){function t(e,t){l(e,d)||(u.position=e,h.append(r(u,t)),d.push(e))}var n=this,i=n.options,o=i.majorGridLines,a=i.minorGridLines,s=i.vertical,c=e.lineBox(),u={lineStart:c[s?"x1":"y1"],lineEnd:c[s?"x2":"y2"],vertical:s},d=[],h=this.gridLinesVisual();return o.visible&&n.traverseMajorTicksPositions(t,o),a.visible&&n.traverseMinorTicksPositions(t,a),h.children},traverseMajorTicksPositions:function(e,t){var n,i=this,r=i._lineOptions(),o=r.lineStart,a=r.step,s=i.logMin,l=i.logMax;for(n=te.ceil(s)+t.skip;l>=n;n+=t.step)e(d(o+a*(n-s),ue),t)},traverseMinorTicksPositions:function(e,t){var n,i,r,o,a=this,s=a.options,l=a._lineOptions(),c=l.lineStart,u=l.step,p=s.majorUnit,f=a.logMin,g=a.logMax,m=te.floor(f),v=s.max,_=s.min,y=s.minorUnit;for(n=m;g>n;n++)for(r=a._minorIntervalOptions(n),o=t.skip;y>o&&!((i=r.value+o*r.minorStep)>v);o+=t.step)i>=_&&e(d(c+u*(h(i,p)-f),ue),t)},createAxisLabel:function(e,t){var n=this,i=n.options,r=te.ceil(n.logMin+e),o=Math.pow(i.majorUnit,r),a=n.axisLabelText(o,null,t);return new I(o,a,e,null,t)},shouldRenderNote:function(e){var t=this.range();return e>=t.min&&t.max>=e},_throwNegativeValuesError:function(){throw Error("Non positive values cannot be used for a logarithmic axis")},_initOptions:function(e,t,n){var i,r=this,o=ne({},r.options,{min:e,max:t},n),a=o.min,s=o.max,l=o.majorUnit;return 0>=o.axisCrossingValue&&r._throwNegativeValuesError(),U(n.max)?0>=n.max&&r._throwNegativeValuesError():(i=d(h(s,l),ue)%1,s=0>=s?l:0!==i&&(.3>i||i>.9)?te.pow(l,h(s,l)+.2):te.pow(l,te.ceil(h(s,l)))),U(n.min)?0>=n.min&&r._throwNegativeValuesError():0>=a?a=1>=s?te.pow(l,-2):1:n.narrowRange||(a=te.pow(l,te.floor(h(a,l)))),r.logMin=d(h(a,l),ue),r.logMax=d(h(s,l),ue),o.max=s,o.min=a,o.minorUnit=n.minorUnit||d(l-1,ue),o},_minorIntervalOptions:function(e){var t=this.options.majorUnit,n=te.pow(t,e);return{value:n,minorStep:(te.pow(t,e+1)-n)/this.options.minorUnit}},_lineOptions:function(){var e=this,t=e.options,n=t.reverse,i=t.vertical,r=i?Ae:De,o=e.lineBox(),a=i===n?1:-1,s=1===a?1:2;return{step:a*((i?o.height():o.width())/(e.logMax-e.logMin)),lineStart:o[r+s],lineBox:o}}}),q.Gradients={glass:{type:"linear",rotation:0,stops:[{offset:0,color:Se,opacity:0},{offset:.25,color:Se,opacity:.3},{offset:1,color:Se,opacity:0}]},sharpBevel:{type:ke,stops:[{offset:0,color:Se,opacity:.55},{offset:.65,color:Se,opacity:0},{offset:.95,color:Se,opacity:.25}]},roundedBevel:{type:ke,stops:[{offset:.33,color:Se,opacity:.06},{offset:.83,color:Se,opacity:.2},{offset:.95,color:Se,opacity:0}]},roundedGlass:{type:ke,supportVML:!1,stops:[{offset:0,color:Se,opacity:0},{offset:.5,color:Se,opacity:.3},{offset:.99,color:Se,opacity:0}]},sharpGlass:{type:ke,supportVML:!1,stops:[{offset:0,color:Se,opacity:.2},{offset:.15,color:Se,opacity:.15},{offset:.17,color:Se,opacity:.35},{offset:.85,color:Se,opacity:.05},{offset:.87,color:Se,opacity:.15},{offset:.99,color:Se,opacity:0}]}},z={extend:function(e,t){if(!e.exportVisual)throw Error("Mixin target has no exportVisual method defined.");e.exportSVG=this.exportSVG,e.exportImage=this.exportImage,e.exportPDF=this.exportPDF,t||(e.svg=this.svg,e.imageDataURL=this.imageDataURL)},exportSVG:function(e){return $.exportSVG(this.exportVisual(),e)},exportImage:function(e){return $.exportImage(this.exportVisual(),e)},exportPDF:function(e){return $.exportPDF(this.exportVisual(),e)},svg:function(){if($.svg.Surface)return $.svg._exportGroup(this.exportVisual());throw Error("SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface")},imageDataURL:function(){var t,n,i;if(!N.support.canvas)return null;if($.canvas.Surface)return t=e("<div />").css({display:"none",width:this.element.width(),height:this.element.height()}).appendTo(document.body),(n=new $.canvas.Surface(t)).draw(this.exportVisual()),i=n._rootElement.toDataURL(),n.destroy(),t.remove(),i;throw Error("Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface")}},(H=function(e){this.closed=e}).prototype=H.fn={WEIGHT:.333,EXTREMUM_ALLOWED_DEVIATION:.01,process:function(e){var t,n,i,r,o,a,s,l,c,u,d=this,h=d.closed,p=e.slice(0),f=p.length,g=[];if(f>2&&(d.removeDuplicates(0,p),f=p.length),2>f||2==f&&p[0].equals(p[1]))return g;for(t=p[0],n=p[1],i=p[2],g.push(new $.Segment(t));t.equals(p[f-1]);)h=!0,p.pop(),f--;if(2==f)return s=d.tangent(t,n,De,Ae),W(g).controlOut(d.firstControlPoint(s,t,n,De,Ae)),g.push(new $.Segment(n,d.secondControlPoint(s,t,n,De,Ae))),g;for(h?(t=p[f-1],n=p[0],i=p[1],o=(r=d.controlPoints(t,n,i))[1],a=r[0]):(s=d.tangent(t,n,De,Ae),o=d.firstControlPoint(s,t,n,De,Ae)),l=o,c=0;f-3>=c;c++)d.removeDuplicates(c,p),(f=p.length)>=c+3&&(t=p[c],n=p[c+1],i=p[c+2],r=d.controlPoints(t,n,i),W(g).controlOut(l),l=r[1],u=r[0],g.push(new $.Segment(n,u)));return h?(t=p[f-2],n=p[f-1],i=p[0],r=d.controlPoints(t,n,i),W(g).controlOut(l),g.push(new $.Segment(n,r[0])),W(g).controlOut(r[1]),g.push(new $.Segment(i,a))):(s=d.tangent(n,i,De,Ae),W(g).controlOut(l),g.push(new $.Segment(i,d.secondControlPoint(s,n,i,De,Ae)))),g},removeDuplicates:function(e,t){for(;t[e].equals(t[e+1])||t[e+1].equals(t[e+2]);)t.splice(e+1,1)},invertAxis:function(e,t,n){var i,r,o=!1;return e.x===t.x?o=!0:t.x===n.x?(n.y>t.y&&t.y>=e.y||t.y>n.y&&e.y>=t.y)&&(o=!0):(i=this.lineFunction(e,t),r=this.calculateFunction(i,n.x),t.y>=e.y&&r>=n.y||e.y>=t.y&&n.y>=r||(o=!0)),o},isLine:function(e,t,n){var i=this.lineFunction(e,t),r=this.calculateFunction(i,n.x);return e.x==t.x&&t.x==n.x||d(r,1)===d(n.y,1)},lineFunction:function(e,t){var n=(t.y-e.y)/(t.x-e.x);return[e.y-n*e.x,n]},controlPoints:function(e,t,n){var i,r,o,a,s,l=this,c=De,u=Ae,d=!1,h=!1,p=l.EXTREMUM_ALLOWED_DEVIATION;return l.isLine(e,t,n)?i=l.tangent(e,t,De,Ae):(r={x:l.isMonotonicByField(e,t,n,De),y:l.isMonotonicByField(e,t,n,Ae)}).x&&r.y?(i=l.tangent(e,n,De,Ae),d=!0):(l.invertAxis(e,t,n)&&(c=Ae,u=De),r[c]?i=0:(i=p*(e[u]>n[u]&&t[u]>=e[u]||n[u]>e[u]&&e[u]>=t[u]?l.sign((n[u]-e[u])*(t[c]-e[c])):-l.sign((n[c]-e[c])*(t[u]-e[u]))),h=!0)),a=l.secondControlPoint(i,e,t,c,u),h&&(s=c,c=u,u=s),o=l.firstControlPoint(i,t,n,c,u),d&&(l.restrictControlPoint(e,t,a,i),l.restrictControlPoint(t,n,o,i)),[a,o]},sign:function(e){return 0>=e?-1:1},restrictControlPoint:function(e,t,n,i){t.y>e.y?n.y>t.y?(n.x=e.x+(t.y-e.y)/i,n.y=t.y):e.y>n.y&&(n.x=t.x-(t.y-e.y)/i,n.y=e.y):t.y>n.y?(n.x=e.x-(e.y-t.y)/i,n.y=t.y):n.y>e.y&&(n.x=t.x+(e.y-t.y)/i,n.y=e.y)},tangent:function(e,t,n,i){var r=t[n]-e[n],o=t[i]-e[i];return 0===r?0:o/r},isMonotonicByField:function(e,t,n,i){return n[i]>t[i]&&t[i]>e[i]||t[i]>n[i]&&e[i]>t[i]},firstControlPoint:function(e,t,n,i,r){var o=t[i],a=(n[i]-o)*this.WEIGHT;return this.point(o+a,t[r]+a*e,i,r)},secondControlPoint:function(e,t,n,i,r){var o=t[i],a=n[i],s=(a-o)*this.WEIGHT;return this.point(a-s,n[r]-s*e,i,r)},point:function(e,t,n,i){var r=new G.Point;return r[n]=e,r[i]=t,r},calculateFunction:function(e,t){var n,i=0,r=e.length;for(n=0;r>n;n++)i+=Math.pow(t,n)*e[n];return i}},v._element=document.createElement("span"),ne(N.dataviz,{AXIS_LABEL_CLICK:ie,COORD_PRECISION:se,DEFAULT_PRECISION:ue,DEFAULT_WIDTH:600,DEFAULT_HEIGHT:400,DEFAULT_FONT:ce,INITIAL_ANIMATION_DURATION:600,NOTE_CLICK:ye,NOTE_HOVER:be,CLIP:"clip",Axis:R,AxisLabel:I,Box2D:b,BoxElement:S,ChartElement:C,CurveProcessor:H,ExportMixin:z,FloatElement:A,LogarithmicAxis:B,Note:P,NumericAxis:F,Point2D:Me,Ring:w,RootElement:T,Sector:k,ShapeBuilder:x,ShapeElement:L,Text:D,TextBox:M,Title:E,alignPathToPixel:_,autoFormat:g,autoMajorUnit:o,boxDiff:s,dateComparer:function(e,t){return e&&t?e.getTime()-t.getTime():-1},decodeEntities:v,getSpacing:n,inArray:l,interpolateValue:function(e,t,n){return d(e+(t-e)*n,se)},mwDelta:function(e){var t=e.originalEvent,n=0;return t.wheelDelta&&(n=(n=-t.wheelDelta/120)>0?te.ceil(n):te.floor(n)),t.detail&&(n=d(t.detail/3)),n},rectToBox:y,rotatePoint:a,round:d,ceil:c,floor:u})}(window.kendo.jQuery),function(e){function t(t,n){return e.map(t,function(e,t){return[[e,n[t]]]})}var n=window.kendo,i=n.dataviz.ui,r=n.deepExtend,o=1.5,a=.4,s="#000",l="Arial,Helvetica,sans-serif",c="12px "+l,u="16px "+l,d="#fff",h={title:{font:u},legend:{labels:{font:c}},seriesDefaults:{visible:!0,labels:{font:"11px Arial,Helvetica,sans-serif"},donut:{margin:1},line:{width:2},vericalLine:{width:2},scatterLine:{width:1},area:{opacity:.4,markers:{visible:!1,size:6},highlight:{markers:{border:{color:"#fff",opacity:1,width:1}}},line:{opacity:1,width:0}},verticalArea:{opacity:.4,markers:{visible:!1,size:6},line:{opacity:1,width:0}},radarLine:{width:2,markers:{visible:!1}},radarArea:{opacity:.5,markers:{visible:!1,size:6},line:{opacity:1,width:0}},candlestick:{line:{width:1,color:s},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:d,highlight:{line:{width:2},border:{width:2,opacity:1}}},ohlc:{line:{width:1},gap:1,spacing:.3,highlight:{line:{width:3,opacity:1}}},bubble:{opacity:.6,border:{width:0},labels:{background:"transparent"}},bar:{gap:o,spacing:a},column:{gap:o,spacing:a},rangeColumn:{gap:o,spacing:a},rangeBar:{gap:o,spacing:a},waterfall:{gap:.5,spacing:a,line:{width:1,color:s}},horizontalWaterfall:{gap:.5,spacing:a,line:{width:1,color:s}},bullet:{gap:o,spacing:a,target:{color:"#ff0000"}},verticalBullet:{gap:o,spacing:a,target:{color:"#ff0000"}},boxPlot:{outliersField:"",meanField:"",whiskers:{width:1,color:s},mean:{width:1,color:s},median:{width:1,color:s},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:d,highlight:{whiskers:{width:2},border:{width:2,opacity:1}}},funnel:{labels:{color:"",background:""}},notes:{icon:{border:{width:1}},label:{padding:3,font:c},line:{length:10,width:1},visible:!0}},categoryAxis:{majorGridLines:{visible:!0}},axisDefaults:{labels:{font:c},title:{font:u,margin:5},crosshair:{tooltip:{font:c}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:c},line:{length:10,width:1},visible:!0}},tooltip:{font:c},navigator:{pane:{height:90,margin:{top:10}}}},p={scale:{labels:{font:c}}},f={shapeDefaults:{hover:{opacity:.2},stroke:{width:0}},editable:{resize:{handles:{width:7,height:7}}},selectable:{stroke:{width:1,dashType:"dot"}},connectionDefaults:{stroke:{width:2},selection:{handles:{width:8,height:8}},editable:{tools:["edit","delete"]}}},g=i.themes,m=i.registerTheme=function(e,t){var n,i={};i.chart=r({},h,t.chart),i.gauge=r({},p,t.gauge),i.diagram=r({},f,t.diagram),i.treeMap=r({},t.treeMap),(n=i.chart.seriesDefaults).verticalLine=r({},n.line),n.verticalArea=r({},n.area),n.polarArea=r({},n.radarArea),n.polarLine=r({},n.radarLine),g[e]=i};m("black",{chart:{title:{color:d},legend:{labels:{color:d},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:d},errorBars:{color:d},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:d},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},candlestick:{downColor:"#555",line:{color:d},border:{_brightness:1.5,opacity:1},highlight:{border:{color:d,opacity:.2}}},ohlc:{line:{color:d}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:d},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:d},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:d},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:d},minorTicks:{color:d},majorTicks:{color:d},line:{color:d}}},diagram:{shapeDefaults:{fill:{color:"#0066cc"},connectorDefaults:{fill:{color:d},stroke:{color:"#384049"},hover:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}},content:{color:d}},editable:{resize:{handles:{fill:{color:"#3d3d3d"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:d}}}},rotate:{thumb:{stroke:{color:d},fill:{color:d}}}},selectable:{stroke:{color:d}},connectionDefaults:{stroke:{color:d},content:{color:d},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0081da","#314b5c"],["#3aafff","#3c5464"],["#99c900","#4f5931"],["#ffeb3d","#64603d"],["#b20753","#543241"],["#ff4195","#643e4f"]]}}),m("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:s,background:d,opacity:.5},errorBars:{color:"#293135"},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},waterfall:{line:{color:"#9aabb2"}},horizontalWaterfall:{line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}},diagram:{shapeDefaults:{fill:{color:"#7ec6e3"},connectorDefaults:{fill:{color:"#003f59"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#003f59"}}},content:{color:"#293135"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#003f59"},hover:{fill:{color:"#003f59"},stroke:{color:"#003f59"}}}},rotate:{thumb:{stroke:{color:"#003f59"},fill:{color:"#003f59"}}}},selectable:{stroke:{color:"#003f59"}},connectionDefaults:{stroke:{color:"#003f59"},content:{color:"#293135"},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0069a5","#bad7e7"],["#0098ee","#b9e0f5"],["#7bd2f6","#ceeaf6"],["#ffb800","#e6e3c4"],["#ff8517","#e4d8c8"],["#e34a00","#ddccc2"]]}}),m("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:.5},waterfall:{line:{color:"#ffffff"}},horizontalWaterfall:{line:{color:"#ffffff"}},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}},diagram:{shapeDefaults:{fill:{color:"#a7018f"},connectorDefaults:{fill:{color:d},stroke:{color:"#2c232b"},hover:{fill:{color:"#2c232b"},stroke:{color:d}}},content:{color:d}},editable:{resize:{handles:{fill:{color:"#2c232b"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:d}}}},rotate:{thumb:{stroke:{color:d},fill:{color:d}}}},selectable:{stroke:{color:d}},connectionDefaults:{stroke:{color:d},content:{color:d},selection:{handles:{fill:{color:"#2c232b"},stroke:{color:d}}}}},treeMap:{colors:[["#a7008f","#451c3f"],["#ffb800","#564122"],["#3aafff","#2f3f55"],["#99c900","#424422"],["#b20753","#471d33"],["#ff4195","#562940"]]}}),m("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:s,background:d,opacity:.5},errorBars:{color:"#232323"},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}},diagram:{shapeDefaults:{fill:{color:"#e15613"},connectorDefaults:{fill:{color:"#282828"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#282828"}}},content:{color:"#2e2e2e"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#282828"},hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}}},rotate:{thumb:{stroke:{color:"#282828"},fill:{color:"#282828"}}}},selectable:{stroke:{color:"#a7018f"}},connectionDefaults:{stroke:{color:"#282828"},content:{color:"#2e2e2e"},selection:{handles:{fill:{color:d},stroke:{color:"#282828"}}}}},treeMap:{colors:[["#ff6800","#edcfba"],["#a0a700","#dadcba"],["#ff8d00","#edd7ba"],["#678900","#cfd6ba"],["#ffb53c","#eddfc6"],["#396000","#c6ceba"]]}}),m("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:.5},errorBars:{color:"#4e5968"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},waterfall:{line:{color:"#a6b1c0"}},horizontalWaterfall:{line:{color:"#a6b1c0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}},diagram:{shapeDefaults:{fill:{color:"#1c82c2"},connectorDefaults:{fill:{color:"#515967"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#282828"}}},content:{color:"#515967"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#515967"},hover:{fill:{color:"#515967"},stroke:{color:"#515967"}}}},rotate:{thumb:{stroke:{color:"#515967"},fill:{color:"#515967"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#515967"},content:{color:"#515967"},selection:{handles:{fill:{color:d},stroke:{color:"#515967"}}}}},treeMap:{colors:[["#007bc3","#c2dbea"],["#76b800","#dae7c3"],["#ffae00","#f5e5c3"],["#ef4c00","#f2d2c3"],["#a419b7","#e3c7e8"],["#430b62","#d0c5d7"]]}}),m("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:s},errorBars:{color:"#777777"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},waterfall:{line:{color:"#c7c7c7"}},horizontalWaterfall:{line:{color:"#c7c7c7"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}},diagram:{shapeDefaults:{fill:{color:"#8ebc00"},connectorDefaults:{fill:{color:s},stroke:{color:d},hover:{fill:{color:d},stroke:{color:s}}},content:{color:"#777"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:"#787878"},fill:{color:"#787878"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#787878"},content:{color:"#777"},selection:{handles:{fill:{color:d},stroke:{color:"#787878"}}}}},treeMap:{colors:[["#8ebc00","#e8f2cc"],["#309b46","#d6ebda"],["#25a0da","#d3ecf8"],["#ff6900","#ffe1cc"],["#e61e26","#fad2d4"],["#d8e404","#f7facd"],["#16aba9","#d0eeee"],["#7e51a1","#e5dcec"],["#313131","#d6d6d6"],["#ed1691","#fbd0e9"]]}}),m("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},waterfall:{line:{color:"#cecece"}},horizontalWaterfall:{line:{color:"#cecece"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}},diagram:{shapeDefaults:{fill:{color:"#00aba9"},connectorDefaults:{fill:{color:d},stroke:{color:"#0e0e0e"},hover:{fill:{color:"#0e0e0e"},stroke:{color:d}}},content:{color:d}},editable:{resize:{handles:{fill:{color:"#0e0e0e"},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:d},fill:{color:d}}}},selectable:{stroke:{color:"#787878"}},connectionDefaults:{stroke:{color:d},content:{color:d},selection:{handles:{fill:{color:"#0e0e0e"},stroke:{color:d}}}}},treeMap:{colors:[["#00aba9","#0b2d2d"],["#309b46","#152a19"],["#8ebc00","#28310b"],["#ff6900","#3e200b"],["#e61e26","#391113"],["#d8e404","#36390c"],["#25a0da","#132b37"],["#7e51a1","#241b2b"],["#313131","#151515"],["#ed1691","#3b1028"]]}}),m("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:d,opacity:.2}}},waterfall:{line:{color:"#8c909e"}},horizontalWaterfall:{line:{color:"#8c909e"}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:d},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}},diagram:{shapeDefaults:{fill:{color:"#f3ae03"},connectorDefaults:{fill:{color:d},stroke:{color:"#414550"},hover:{fill:{color:"#414550"},stroke:{color:d}}},content:{color:d}},editable:{resize:{handles:{fill:{color:"#414550"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:d}}}},rotate:{thumb:{stroke:{color:d},fill:{color:d}}}},selectable:{stroke:{color:d}},connectionDefaults:{stroke:{color:d},content:{color:d},selection:{handles:{fill:{color:"#414550"},stroke:{color:d}}}}},treeMap:{colors:[["#ffca08","#4e4b2b"],["#ff710f","#4e392d"],["#ed2e24","#4b2c31"],["#ff9f03","#4e422a"],["#e13c02","#482e2a"],["#a00201","#3b232a"]]}}),m("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},errorBars:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:.2}}},waterfall:{line:{color:"#9e9e9e"}},horizontalWaterfall:{line:{color:"#9e9e9e"}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}},diagram:{shapeDefaults:{fill:{color:"#d1d1d1"},connectorDefaults:{fill:{color:"#686868"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#686868"}}},content:{color:"#686868"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#686868"},hover:{fill:{color:"#686868"},stroke:{color:"#686868"}}}},rotate:{thumb:{stroke:{color:"#686868"},fill:{color:"#686868"}}}},selectable:{stroke:{color:"#686868"}},connectionDefaults:{stroke:{color:"#686868"},content:{color:"#686868"},selection:{handles:{fill:{color:d},stroke:{color:"#686868"}}}}},treeMap:{colors:[["#527aa3","#d0d8e1"],["#6f91b3","#d6dde4"],["#8ca7c2","#dce1e7"],["#a8bdd1","#e2e6ea"],["#c5d3e0","#e7eaed"],["#e2e9f0","#edeff0"]]}}),m("bootstrap",{chart:{title:{color:"#333333"},legend:{labels:{color:"#333333"},inactiveItems:{labels:{color:"#999999"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#333333"},overlay:{gradient:"none"},errorBars:{color:"#343434"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#333333"},line:{color:"#000000"}},pie:{overlay:{gradient:"none"}},donut:{overlay:{gradient:"none"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.8},candlestick:{downColor:"#d0d0d0",line:{color:"#333333"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:.2}}},waterfall:{line:{color:"#cccccc"}},horizontalWaterfall:{line:{color:"#cccccc"}},ohlc:{line:{color:"#333333"}}},chartArea:{background:"#ffffff"},seriesColors:["#428bca","#5bc0de","#5cb85c","#f2b661","#e67d4a","#da3b36"],axisDefaults:{line:{color:"#cccccc"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},labels:{color:"#333333"},majorGridLines:{color:"#cccccc"},minorGridLines:{color:"#ebebeb"},title:{color:"#333333"},crosshair:{color:"#000000"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}}}},gauge:{pointer:{color:"#428bca"},scale:{rangePlaceholderColor:"#cccccc",labels:{color:"#333333"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},line:{color:"#cccccc"}}},diagram:{shapeDefaults:{fill:{color:"#428bca"},connectorDefaults:{fill:{color:"#333333"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#333333"}}},content:{color:"#333333"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#333333"},hover:{fill:{color:"#333333"},stroke:{color:"#333333"}}}},rotate:{thumb:{stroke:{color:"#333333"},fill:{color:"#333333"}}}},selectable:{stroke:{color:"#333333"}},connectionDefaults:{stroke:{color:"#c4c4c4"},content:{color:"#333333"},selection:{handles:{fill:{color:d},stroke:{color:"#333333"}},stroke:{color:"#333333"}}}},treeMap:{colors:[["#428bca","#d1e0ec"],["#5bc0de","#d6eaf0"],["#5cb85c","#d6e9d6"],["#5cb85c","#f4e8d7"],["#e67d4a","#f2ddd3"],["#da3b36","#f0d0cf"]]}}),m("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},errorBars:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#cdcdcd"}},horizontalWaterfall:{line:{color:"#cdcdcd"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}},diagram:{shapeDefaults:{fill:{color:"#10c4b2"},connectorDefaults:{fill:{color:"#363940"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#363940"}}},content:{color:"#4c5356"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#363940"},hover:{fill:{color:"#363940"},stroke:{color:"#363940"}}}},rotate:{thumb:{stroke:{color:"#363940"},fill:{color:"#363940"}}}},selectable:{stroke:{color:"#363940"}},connectionDefaults:{stroke:{color:"#cdcdcd"},content:{color:"#4c5356"},selection:{handles:{fill:{color:d},stroke:{color:"#363940"}},stroke:{color:"#363940"}}}},treeMap:{colors:[["#10c4b2","#cff3f0"],["#ff7663","#ffe4e0"],["#ffb74f","#fff1dc"],["#a2df53","#ecf9dd"],["#1c9ec4","#d2ecf3"],["#ff63a5","#ffe0ed"],["#1cc47b","#d2f3e5"]]}}),m("material",{chart:{title:{color:"#444444"},legend:{labels:{color:"#444444"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#444444"},errorBars:{color:"#444444"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#e5e5e5"}},horizontalWaterfall:{line:{color:"#e5e5e5"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#e5e5e5"},labels:{color:"#444444"},minorGridLines:{color:"#e5e5e5"},majorGridLines:{color:"#e5e5e5"},title:{color:"#444444"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#e5e5e5",labels:{color:"#444444"},minorTicks:{color:"#444444"},majorTicks:{color:"#444444"},line:{color:"#444444"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#7f7f7f"}}},content:{color:"#444444"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#444444"},hover:{fill:{color:"#444444"},stroke:{color:"#444444"}}}},rotate:{thumb:{stroke:{color:"#444444"},fill:{color:"#444444"}}}},selectable:{stroke:{color:"#444444"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#444444"},selection:{handles:{fill:{color:d},stroke:{color:"#444444"}},stroke:{color:"#444444"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}}),m("materialblack",{chart:{title:{color:"#fff"},legend:{labels:{color:"#fff"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#fff"},errorBars:{color:"#fff"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#fff"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#4d4d4d"}},horizontalWaterfall:{line:{color:"#4d4d4d"}},overlay:{gradient:"none"},border:{_brightness:1}},chartArea:{background:"#1c1c1c"},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#4d4d4d"},labels:{color:"#fff"},minorGridLines:{color:"#4d4d4d"},majorGridLines:{color:"#4d4d4d"},title:{color:"#fff"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#4d4d4d"}},label:{color:"#fff"},line:{color:"#4d4d4d"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#4d4d4d",labels:{color:"#fff"},minorTicks:{color:"#fff"},majorTicks:{color:"#fff"},line:{color:"#fff"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#7f7f7f"}}},content:{color:"#fff"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#fff"},hover:{fill:{color:"#fff"},stroke:{color:"#fff"}}}},rotate:{thumb:{stroke:{color:"#fff"},fill:{color:"#fff"}}}},selectable:{stroke:{color:"#fff"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#fff"},selection:{handles:{fill:{color:d},stroke:{color:"#fff"}},stroke:{color:"#fff"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}}),function(){function e(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:o}}}var n="#333333",i="#7f7f7f",r="#bdbdbd",o="#c8c8c8",a=["#008fd3","#99d101","#f39b02","#f05662","#c03c53","#acacac"],s=a[0],l=d;m("fiori",{chart:{title:{color:n},legend:{labels:{color:n},inactiveItems:{labels:{color:i},markers:{color:i}}},seriesDefaults:{labels:{color:n},errorBars:{color:n},notes:e(),candlestick:{downColor:o,line:{color:r}},area:{opacity:.8},waterfall:{line:{color:o}},horizontalWaterfall:{line:{color:o}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:a,axisDefaults:{line:{color:o},labels:{color:n},minorGridLines:{color:"#dddddd"},majorGridLines:{color:o},title:{color:n},crosshair:{color:i},notes:e()}},gauge:{pointer:{color:s},scale:{rangePlaceholderColor:o,labels:{color:n},minorTicks:{color:n},majorTicks:{color:n},line:{color:n}}},diagram:{shapeDefaults:{fill:{color:s},connectorDefaults:{fill:{color:n},stroke:{color:l},hover:{fill:{color:l},stroke:{color:n}}},content:{color:n}},editable:{resize:{handles:{fill:{color:l},stroke:{color:r},hover:{fill:{color:r},stroke:{color:r}}}},rotate:{thumb:{stroke:{color:r},fill:{color:r}}}},selectable:{stroke:{color:r}},connectionDefaults:{stroke:{color:r},content:{color:r},selection:{handles:{fill:{color:l},stroke:{color:r}},stroke:{color:r}}}},treeMap:{colors:t(a,["#cbe8f5","#eaf5cb","#fceacc","#fbdcdf","#f2d7dc","#eeeeee"])}})}(),function(){function e(){return{icon:{background:"#00b0ff",border:{color:"#00b0ff"}},label:{color:"#ffffff"},line:{color:o}}}var n="#4e4e4e",i="#7f7f7f",r="#bdbdbd",o="#c8c8c8",a=["#0072c6","#5db2ff","#008a17","#82ba00","#ff8f32","#ac193d"],s=a[0],l=d;m("office365",{chart:{title:{color:n},legend:{labels:{color:n},inactiveItems:{labels:{color:i},markers:{color:i}}},seriesDefaults:{labels:{color:n},errorBars:{color:n},notes:e(),candlestick:{downColor:o,line:{color:r}},area:{opacity:.8},waterfall:{line:{color:o}},horizontalWaterfall:{line:{color:o}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:a,axisDefaults:{line:{color:o},labels:{color:n},minorGridLines:{color:"#e5e5e5"},majorGridLines:{color:o},title:{color:n},crosshair:{color:i},notes:e()}},gauge:{pointer:{color:s},scale:{rangePlaceholderColor:o,labels:{color:n},minorTicks:{color:n},majorTicks:{color:n},line:{color:n}}},diagram:{shapeDefaults:{fill:{color:s},connectorDefaults:{fill:{color:n},stroke:{color:l},hover:{fill:{color:l},stroke:{color:n}}},content:{color:n}},editable:{resize:{handles:{fill:{color:l},stroke:{color:r},hover:{fill:{color:r},stroke:{color:r}}}},rotate:{thumb:{stroke:{color:r},fill:{color:r}}}},selectable:{stroke:{color:r}},connectionDefaults:{stroke:{color:r},content:{color:r},selection:{handles:{fill:{color:l},stroke:{color:r}},stroke:{color:r}}}},treeMap:{colors:t(a,["#cbe2f3","#deeffe","#cbe7d0","#e5f0cb","#fee8d5","#eed0d7"])}})}(),function(){function e(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:o}}}var n="#32364c",i="#7f7f7f",r="#bdbdbd",o="#dfe0e1",a=["#ff4350","#ff9ea5","#00acc1","#80deea","#ffbf46","#ffd78c"],s=a[0],l=d;m("nova",{chart:{title:{color:n},legend:{labels:{color:n},inactiveItems:{labels:{color:i},markers:{color:i}}},seriesDefaults:{labels:{color:n},errorBars:{color:n},notes:e(),candlestick:{downColor:o,line:{color:r}},area:{opacity:.8},waterfall:{line:{color:o}},horizontalWaterfall:{line:{color:o}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:a,axisDefaults:{line:{color:o},labels:{color:n},minorGridLines:{color:"#dfe0e1"},majorGridLines:{color:o},title:{color:n},crosshair:{color:n},notes:e()}},gauge:{pointer:{color:s},scale:{rangePlaceholderColor:o,labels:{color:n},minorTicks:{color:n},majorTicks:{color:n},line:{color:n}}},diagram:{shapeDefaults:{fill:{color:s},connectorDefaults:{fill:{color:n},stroke:{color:l},hover:{fill:{color:l},stroke:{color:n}}},content:{color:n}},editable:{resize:{handles:{fill:{color:l},stroke:{color:r},hover:{fill:{color:r},stroke:{color:r}}}},rotate:{thumb:{stroke:{color:r},fill:{color:r}}}},selectable:{stroke:{color:r}},connectionDefaults:{stroke:{color:r},content:{color:r},selection:{handles:{fill:{color:l},stroke:{color:r}},stroke:{color:r}}}},treeMap:{colors:t(a,["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"])}})}()}(window.kendo.jQuery),function(e,t){function n(){this._defaults={}}function i(e,t,n,i){var r,o,a=(i.x-n.x)*(e.y-n.y)-(i.y-n.y)*(e.x-n.x),s=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y);return 0!==s&&(o=a/s,r=new Wt(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y))),r}function r(e){delete e.bar,delete e.column,delete e.rangeColumn,delete e.line,delete e.verticalLine,delete e.pie,delete e.donut,delete e.area,delete e.verticalArea,delete e.scatter,delete e.scatterLine,delete e.bubble,delete e.candlestick,delete e.ohlc,delete e.boxPlot,delete e.bullet,delete e.verticalBullet,delete e.polarArea,delete e.polarLine,delete e.radarArea,delete e.radarLine,delete e.waterfall}function o(e){var t,n,i,r,o=e.series,a=e.seriesColors||[];for(t=0;o.length>t;t++)n=o[t],i=a[t%a.length],n.color=n.color||i,(r=n._defaults)&&(r.color=r.color||i)}function a(t,n){var i=(n||{}).axisDefaults||{};ft([An,Ji,ar,sr],function(){var n=this+"Axis",r=[].concat(t[n]),o=t.axisDefaults||{};r=e.map(r,function(e){var t=(e||{}).color,r=Dt({},i,i[n],o,o[n],{line:{color:t},labels:{color:t},title:{color:t}},e);return delete r[n],r}),t[n]=r.length>1?r:r[0]})}function s(e){var t,n=e.length,i=0;for(t=0;n>t;t++)i=_t.max(i,e[t].data.length);return i}function l(e){return e*e}function c(e,t){return null===t?t:At(e,!0)(t)}function u(e,t){if(null===t)return t;var n="_date_"+e,i=t[n];return i||(i=d(At(e,!0)(t)),t[n]=i),i}function d(e){var t,n;if(e instanceof Date)t=e;else if(typeof e===Wi)t=kt.parseDate(e)||new Date(e);else if(e)if(gt(e))for(t=[],n=0;e.length>n;n++)t.push(d(e[n]));else t=new Date(e);return t}function h(e){return gt(e)?vt(e,h):e?d(e).getTime():t}function p(e,t,n,i){var r,o=e;return e&&(r=(e=d(e)).getHours(),n===lr?(o=new Date(e.getFullYear()+t,0,1),kt.date.adjustDST(o,0)):n===mi?(o=new Date(e.getFullYear(),e.getMonth()+t,1),kt.date.adjustDST(o,r)):n===rr?(o=p(f(e,i),7*t,On),kt.date.adjustDST(o,r)):n===On?(o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t),kt.date.adjustDST(o,r)):n===ii?(o=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+t),t>0&&x(e,o)&&(o=p(e,t+1,n,i))):n===gi?(o=new Date(e.getTime()+t*qi)).getSeconds()>0&&o.setSeconds(0):n===Li&&(o=new Date(e.getTime()+t*ji)),o.getMilliseconds()>0&&o.setMilliseconds(0)),o}function f(e,t){var n=e.getDay(),i=0;if(!isNaN(n))for(t=t||0;n!==t;)0===n?n=6:n--,i++;return _(e,-i*$i)}function g(e,t,n){return p(e=d(e),0,t,n)}function m(e,t,n){return(e=d(e))&&g(e,t,n).getTime()===e.getTime()?e:p(e,1,t,n)}function v(e,t){return e.getTime()-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qi}function _(e,t){var n=e.getTimezoneOffset(),i=new Date(e.getTime()+t),r=i.getTimezoneOffset()-n;return new Date(i.getTime()+r*qi)}function y(e,t,n){return n===lr?t.getFullYear()-e.getFullYear():n===mi?12*y(e,t,lr)+t.getMonth()-e.getMonth():_t.floor(n===On?v(t,e)/$i:(t-e)/Ki[n])}function b(e){return 1===e.length?e[0]:e}function w(e){var t,n,i,r=e.length;if(r>0)for(n=0;r>n;n++)i=e[n].contentBox(),t?t.wrap(i):t=i.clone();return t||Lt()}function k(e,t){return e&&t?e.toLowerCase()===t.toLowerCase():e===t}function x(e,t){return e&&t?h(e)===h(t):e===t}function C(e,t){null!==t&&e.push(t)}function T(e,t){for(var n,i,r=0,o=t.length-1;o>=r;)if(e>(i=t[n=_t.floor((r+o)/2)]))r=n+1;else{if(!(i>e)){for(;x(t[n-1],e);)n--;return n}o=n-1}return e>=t[n]?n:n-1}function S(e){return"number"==typeof e&&!isNaN(e)}function D(e){var t,n=e.length,i=0;for(t=0;n>t;t++)S(e[t])&&i++;return i}function A(e){return D(e)===e.length}function M(e,t,n,i){var r,o,a,s=!1;if((n=n||{}).excluded=n.excluded||[],a=n.defaults=n.defaults||{},!((n.depth=n.depth||0)>hi)){for(r in e)!en(r,n.excluded)&&e.hasOwnProperty(r)&&(o=e[r],Mt(o)?(s=!0,i||(e[r]=fn(o(t),a[r]))):typeof o===Ci&&(n.defaults=a[r],n.depth++,s=M(o,t,n,i)||s,n.depth--));return s}}function E(e,n){var i,r,o,a=[],s=e.groupNameTemplate,l=n.length;if(0===l)return(o=Dt({},e)).visibleInLegend=!1,[o];for(sn(s)?(kt.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"),s&&(i=Et(s))):0===(i=Et(e.name||""))._slotCount&&(i=Et(sn(e.name)?"#= group.value #: #= series.name #":"#= group.value #")),r=0;l>r;r++)o=Dt({},e),Mt(o.color)||(o.color=t),o._groupIx=r,a.push(o),i&&(o.name=i({series:o,group:n[r]}));return a}function I(e,t){var n,i,r=[];for(t=[].concat(t),n=0;e.length>n;n++)i=e[n],en(i.type,t)&&r.push(i);return r}function R(t,n){if(t instanceof Date){for(var i=0,r=n.length;r>i;i++)if(x(n[i],t))return i;return-1}return e.inArray(t,n)}function P(e,t){t=t||Zt;for(var n=1,i=e.length;i>n;n++)if(t(e[n],e[n-1])<0){e.sort(t);break}return e}function L(e,t){var n,i=P(e,t),r=i.length,o=r>0?[i[0]]:[];for(t=t||Zt,n=1;r>n;n++)0!==t(i[n],ln(o))&&o.push(i[n]);return o}function F(e,t){var n=e.type,i=t instanceof Date;return!n&&i||k(n,Nn)}function B(e){var t,n,i,r,o=[],a=e.length;for(t=0;a>t;t++)for(r=(n=e[t]).length,i=0;r>i;i++)o[i]=o[i]||[],o[i].push(n[i]);return o}function z(e,t){if(e.indexOf(".")>-1)for(var n,i=e.split("."),r="";i.length>1;)r+=i.shift(),n=kt.getter(r)(t)||{},kt.setter(r)(t,n),r+="."}function H(e){var t,n,i,r=e.data,o=0;for(t=0;r.length>t;t++)typeof(i=(n=G.current.bindPoint(e,t)).valueFields.value)===Wi&&(i=parseFloat(i)),S(i)&&!1!==n.fields.visible&&(o+=_t.abs(i));return o}function N(e){var t=e.overlay;return t&&t.gradient&&"none"!=t.gradient}function O(){return this}function V(e){for(var t=0;e.length>t;t++)if(sn(e[t].zIndex))return!0}function U(){this._defaultPrevented=!0}function W(e,t){if(e)for(var n=0;e.length>n;n++)if(e[n].category===t)return[e[n]]}function j(e){return sn(e)&&null!==e}var q,G,$,Y,Q,X,K,Z,J,ee,te,ne,ie,re,oe,ae,se,le,ce,ue,de,he,pe,fe,ge,me,ve,_e,ye,be,we,ke,xe,Ce,Te,Se,De,Ae,Me,Ee,Ie,Re,Pe,Le,Fe,Be,ze,He,Ne,Oe,Ve,Ue,We,je,qe,Ge,$e,Ye,Qe,Xe,Ke,Ze,Je,et,tt,nt,it,rt,ot,at,st,lt,ct,ut,dt,ht,pt,ft=e.each,gt=e.isArray,mt=e.isPlainObject,vt=e.map,_t=Math,yt=e.noop,bt=e.extend,wt=e.proxy,kt=window.kendo,xt=kt.Class,Ct=kt.Observable,Tt=kt.data.DataSource,St=kt.ui.Widget,Dt=kt.deepExtend,At=kt.getter,Mt=kt.isFunction,Et=kt.template,It=kt.dataviz,Rt=It.Axis,Pt=It.AxisLabel,Lt=It.Box2D,Ft=It.BoxElement,Bt=It.ChartElement,zt=kt.drawing.Color,Ht=It.CurveProcessor,Nt=It.FloatElement,Ot=It.Note,Vt=It.LogarithmicAxis,Ut=It.NumericAxis,Wt=It.Point2D,jt=It.RootElement,qt=It.Ring,Gt=It.ShapeElement,$t=It.ShapeBuilder,Yt=It.TextBox,Qt=It.Title,Xt=It.alignPathToPixel,Kt=It.autoFormat,Zt=It.dateComparer,Jt=It.getSpacing,en=It.inArray,tn=It.interpolateValue,nn=It.mwDelta,rn=It.round,on=kt.util,an=on.append,sn=on.defined,ln=on.last,cn=on.limitValue,un=on.sparseArrayLimits,dn=on.sparseArrayMin,hn=on.sparseArrayMax,pn=on.renderTemplate,fn=on.valueOrDefault,gn=It.geometry,mn=It.drawing,vn=".kendoChart",_n="area",yn="fit",bn=It.AXIS_LABEL_CLICK,wn="bar",kn="#000",xn="bottom",Cn="boxPlot",Tn="bubble",Sn="bullet",Dn="candlestick",An="category",Mn="center",En="change",In="circle",Rn=It.CLIP,Pn="color",Ln="column",Fn=It.COORD_PRECISION,Bn="k-",zn="custom",Hn="dataBound",Nn="date",On="days",Vn=It.DEFAULT_FONT,Un=It.DEFAULT_HEIGHT,Wn=It.DEFAULT_PRECISION,jn=It.DEFAULT_WIDTH,qn="donut",Gn="drag",$n="dragEnd",Yn="dragStart",Qn="errorLow",Xn="errorHigh",Kn="fadeIn",Zn="first",Jn="funnel",ei="glass",ti="horizontal",ni="horizontalWaterfall",ii="hours",ri=It.INITIAL_ANIMATION_DURATION,oi="insideEnd",ai="interpolate",si="left",li="legendItemClick",ci="legendItemHover",ui="line",di="max",hi=5,pi=Number.MAX_VALUE,fi=-Number.MAX_VALUE,gi="minutes",mi="months",vi="mouseleave"+vn,_i="mousemove.tracking",yi="mousemove"+vn,bi="DOMMouseScroll"+vn+" mousewheel"+vn,wi=It.NOTE_CLICK,ki=It.NOTE_HOVER,xi="noteText",Ci="object",Ti="ohlc",Si="outsideEnd",Di="pie",Ai="plotAreaClick",Mi="rangeBar",Ei="rangeColumn",Ii="right",Ri="scatter",Pi="scatterLine",Li="seconds",Fi="selectStart",Bi="select",zi="selectEnd",Hi="seriesClick",Ni="seriesHover",Oi=.001,Vi="step",Ui="smooth",Wi="string",ji=1e3,qi=60*ji,Gi=60*qi,$i=24*Gi,Yi=7*$i,Qi=31*$i,Xi=365*$i,Ki={years:Xi,months:Qi,weeks:Yi,days:$i,hours:Gi,minutes:qi,seconds:ji},Zi="top",Ji="value",er="verticalArea",tr="verticalBullet",nr="verticalLine",ir="waterfall",rr="weeks",or="#fff",ar="x",sr="y",lr="years",cr="zero",ur="zoomStart",dr="zoomEnd",hr=[Li,gi,ii,On,rr,mi,lr],pr=[wn,Ln,Ti,Dn,Cn,Sn,Ei,Mi,ir,ni],fr={seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},gr=St.extend({init:function(e,n){var i,r,o=this;kt.destroy(e),St.fn.init.call(o,e),o.element.addClass(Bn+this.options.name.toLowerCase()).css("position","relative"),n&&(r=n.dataSource,n.dataSource=t),i=Dt({},o.options,n),o._originalOptions=Dt({},i),o._initTheme(i),o._initSurface(),o.bind(o.events,o.options),o.wrapper=o.element,n&&(n.dataSource=r),o._initDataSource(n),kt.notify(o,It.ui)},_initTheme:function(n){var i,r=this,a=It.ui.themes||{},s=n.theme,l=a[s]||a[s.toLowerCase()],c=s&&l?l.chart:{},u=[],d=n.series||[];for(i=0;d.length>i;i++)u.push(e.extend({},d[i]));n.series=u,function(e){var t;ft([An,Ji,ar,sr],function(){e[t=this+"Axes"]&&(e[this+"Axis"]=e[t],delete e[t])})}(n),r._applyDefaults(n,c),null===n.seriesColors&&(n.seriesColors=t),r.options=Dt({},c,n),o(r.options)},_initDataSource:function(e){var t=this,n=(e||{}).dataSource;t._dataChangeHandler=wt(t._onDataChanged,t),t.dataSource=Tt.create(n).bind(En,t._dataChangeHandler),t._bindCategories(),n&&(t._hasDataSource=!0),t._redraw(),t._attachEvents(),n&&t.options.autoBind&&t.dataSource.fetch()},setDataSource:function(e){var t=this;t.dataSource.unbind(En,t._dataChangeHandler),t.dataSource=e=Tt.create(e),t._hasDataSource=!0,t._hasData=!1,e.bind(En,t._dataChangeHandler),t.options.autoBind&&e.fetch()},events:[Hn,Hi,Ni,bn,li,ci,Ai,Yn,Gn,$n,ur,"zoom",dr,Fi,Bi,zi,wi,ki,"render"],items:function(){return e()},options:{name:"Chart",renderAs:"",theme:"default",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},autoBind:!0,seriesDefaults:{type:Ln,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}]},refresh:function(){var e=this;e._applyDefaults(e.options),o(e.options),e._bindSeries(),e._bindCategories(),e.trigger(Hn),e._redraw()},getSize:function(){return kt.dimensions(this.element)},_resize:function(){var e=this.options.transitions;this.options.transitions=!1,this._redraw(),this.options.transitions=e},redraw:function(e){var t,n,i=this;i._applyDefaults(i.options),o(i.options),e?(t=(n=i._model._plotArea).findPane(e),n.redraw(t)):i._redraw()},getAxis:function(e){var t,n=this._plotArea.axes;for(t=0;n.length>t;t++)if(n[t].options.name===e)return new pt(n[t])},toggleHighlight:function(e,t){var n,i,r,o,a=this._plotArea,s=this._highlight,l=(a.srcSeries||a.series||[])[0];if(mt(t)?(n=t.series,i=t.category):n=i=t,r=l.type===qn?W(a.pointsBySeriesName(n),i):l.type===Di||l.type===Jn?W((a.charts[0]||{}).points,i):a.pointsBySeriesName(n))for(o=0;r.length>o;o++)s.togglePointHighlight(r[o],e)},_initSurface:function(){var e=this.surface,t=this._surfaceWrap(),n=this.options.chartArea;n.width&&t.css("width",n.width),n.height&&t.css("height",n.height),e&&e.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(e&&e.destroy(),this.surface=mn.Surface.create(t,{type:this.options.renderAs}))},_surfaceWrap:function(){return this.element},_redraw:function(){var e=this,t=e._getModel();e._destroyView(),e._model=t,e._plotArea=t._plotArea,t.renderVisual(),!1!==this.options.transitions&&t.traverse(function(e){e.animation&&e.animation.setup()}),e._initSurface(),e.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse(function(e){e.animation&&e.animation.play()}),e._tooltip=e._createTooltip(),e._highlight=new rt(void 0),e._setupSelection(),e._hasDataSource&&!e._hasData&&e.options.autoBind||e.trigger("render")},exportVisual:function(){return this.surface.exportVisual()},_sharedTooltip:function(){var e=this.options;return this._plotArea instanceof Ke&&e.tooltip.shared},_createTooltip:function(){var e,t=this,n=t.options,i=t.element;return(e=t._sharedTooltip()?new st(i,t._plotArea,n.tooltip):new at(i,n.tooltip)).bind("leave",wt(t._tooltipleave,t)),e},_tooltipleave:function(){var e=this._plotArea,t=this._highlight;e.hideCrosshairs(),t.hide()},_applyDefaults:function(e,t){a(e,t),function(e,t){var n,i,o,a=e.series,s=a.length,l=e.seriesDefaults,c=Dt({},e.seriesDefaults),u=t?Dt({},t.seriesDefaults):{},d=Dt({},u);for(r(c),r(d),n=0;s>n;n++)i=a[n].type||e.seriesDefaults.type,o=Dt({data:[]},d,u[i],{tooltip:e.tooltip},c,l[i]),a[n]._defaults=o,a[n]=Dt({},o,a[n])}(e,t)},_getModel:function(){var e,t=this,n=t.options,i=new jt(t._modelOptions());return i.chart=t,Qt.buildTitle(n.title,i),e=i._plotArea=t._createPlotArea(),n.legend.visible&&i.append(new X(e.options.legend)),i.append(e),i.reflow(),i},_modelOptions:function(){var e=this,t=e.options,n=e.element,i=_t.floor(n.height()),r=_t.floor(n.width());return e._size=null,Dt({width:r||jn,height:i||Un,transitions:t.transitions},t.chartArea)},_createPlotArea:function(e){var t=this.options;return q.current.create(e?[]:t.series,t)},_setupSelection:function(){var e,t,n,i,r,o,a=this,s=a._plotArea.axes,l=a._selections=[];for(a._selectStartHandler||(a._selectStartHandler=wt(a._selectStart,a),a._selectHandler=wt(a._select,a),a._selectEndHandler=wt(a._selectEnd,a)),t=0;s.length>t;t++)o=(n=s[t]).options,n instanceof K&&o.select&&!o.vertical&&(i=0,r=o.categories.length-1,n instanceof Z&&(i=o.categories[i],r=o.categories[r]),o.justified||(n instanceof Z?r=p(r,1,o.baseUnit,o.weekStartDay):r++),(e=new dt(a,n,Dt({min:i,max:r},o.select))).bind(Fi,a._selectStartHandler),e.bind(Bi,a._selectHandler),e.bind(zi,a._selectEndHandler),l.push(e))},_selectStart:function(e){return this.trigger(Fi,e)},_select:function(e){return this.trigger(Bi,e)},_selectEnd:function(e){return this.trigger(zi,e)},_attachEvents:function(){var e=this,t=e.element;t.on("contextmenu.kendoChart",wt(e._click,e)),t.on("mouseover.kendoChart",wt(e._mouseover,e)),t.on("mouseout.kendoChart",wt(e._mouseout,e)),t.on(bi,wt(e._mousewheel,e)),t.on(vi,wt(e._mouseleave,e)),e._mousemove=kt.throttle(wt(e._mousemove,e),20),e._shouldAttachMouseMove()&&t.on(yi,e._mousemove),kt.UserEvents&&(e._userEvents=new kt.UserEvents(t,{global:!0,filter:":not(.k-selector)",multiTouch:!1,tap:wt(e._tap,e),start:wt(e._start,e),move:wt(e._move,e),end:wt(e._end,e)}))},_mouseout:function(e){var t=this._getChartElement(e);t&&t.leave&&t.leave(this,e)},_start:function(e){var t=this._events;sn(t[Yn]||t[Gn]||t[$n])&&this._startNavigation(e,Yn)},_move:function(e){var t,n,i,r,o,a=this._navState,s={};if(a){for(e.preventDefault(),t=a.axes,n=0;t.length>n;n++)(i=t[n]).options.name&&0!=(o=(r=i.options.vertical?e.y:e.x).startLocation-r.location)&&(s[i.options.name]=i.translateRange(o));a.axisRanges=s,this.trigger(Gn,{axisRanges:s,originalEvent:e})}},_end:function(e){this._endNavigation(e,$n)},_mousewheel:function(e){var t,n,i,r,o,a=this,s=e.originalEvent,l=nn(e),c=a._navState,u={};if(c||a._startNavigation(s,ur)||(c=a._navState),c){for(t=c.totalDelta||l,c.totalDelta=t+l,n=a._navState.axes,i=0;n.length>i;i++)(o=(r=n[i]).options.name)&&(u[o]=r.scaleRange(-t));a.trigger("zoom",{delta:l,axisRanges:u,originalEvent:e}),a._mwTimeout&&clearTimeout(a._mwTimeout),a._mwTimeout=setTimeout(function(){a._endNavigation(e,dr)},150)}},_startNavigation:function(e,t){var n,i=this,r=i._eventCoordinates(e),o=i._model._plotArea,a=o.findPointPane(r),s=o.axes.slice(0),l=!1;if(a){for(n=0;s.length>n;n++)if(s[n].box.containsPoint(r)){l=!0;break}!l&&o.backgroundBox().containsPoint(r)&&(i.trigger(t,{axisRanges:function(e){var t,n,i,r={};for(t=0;e.length>t;t++)(i=(n=e[t]).options.name)&&(r[i]=n.range());return r}(s),originalEvent:e})?i._userEvents.cancel():(i._suppressHover=!0,i._unsetActivePoint(),i._navState={pane:a,axes:s}))}},_endNavigation:function(e,t){var n=this;n._navState&&(n.trigger(t,{axisRanges:n._navState.axisRanges,originalEvent:e}),n._suppressHover=!1,n._navState=null)},_getChartElement:function(e,n){var i,r=this.surface.eventTarget(e);if(r){for(;r&&!i;)i=r.chartElement,r=r.parent;return i?(i.aliasFor&&(i=i.aliasFor(e,this._eventCoordinates(e))),n&&(i=i.closest(n)),i):t}},_eventCoordinates:function(e){var t=sn((e.x||{}).client),n=t?e.x.client:e.clientX,i=t?e.y.client:e.clientY;return this._toModelCoordinates(n,i)},_toModelCoordinates:function(t,n){var i=this.element,r=i.offset(),o=parseInt(i.css("paddingLeft"),10),a=parseInt(i.css("paddingTop"),10),s=e(window);return new Wt(t-r.left-o+s.scrollLeft(),n-r.top-a+s.scrollTop())},_tap:function(e){var t=this,n=t._getChartElement(e);t._activePoint===n?t._click(e):(t._startHover(e)||t._unsetActivePoint(),t._click(e))},_click:function(e){for(var t=this._getChartElement(e);t;)t.click&&t.click(this,e),t=t.parent},_startHover:function(e){var n,i=this,r=i._getChartElement(e),o=i._tooltip,a=i._highlight,s=i.options.tooltip;if(!i._suppressHover&&a&&!a.isHighlighted(r)&&!i._sharedTooltip())return(n=i._getChartElement(e,function(e){return e.hover}))&&!n.hover(i,e)?(i._activePoint=n,(s=Dt({},s,n.options.tooltip)).visible&&o.show(n),a.show(n),n.tooltipTracking):t},_mouseover:function(t){var n=this;n._startHover(t)&&e(document).on(_i,wt(n._mouseMoveTracking,n))},_mouseMoveTracking:function(t){var n,i=this,r=i.options,o=i._tooltip,a=i._highlight,s=i._eventCoordinates(t),l=i._activePoint;i._plotArea.box.containsPoint(s)?l&&l.tooltipTracking&&l.series&&l.parent.getNearestPoint&&(n=l.parent.getNearestPoint(s.x,s.y,l.seriesIx))&&n!=l&&(n.hover(i,t),i._activePoint=n,Dt({},r.tooltip,l.options.tooltip).visible&&o.show(n),a.show(n)):(e(document).off(_i),i._unsetActivePoint())},_mousemove:function(e){var t=this._eventCoordinates(e);this._trackCrosshairs(t),this._sharedTooltip()&&this._trackSharedTooltip(t,e)},_trackCrosshairs:function(e){var t,n,i=this._plotArea.crosshairs;for(t=0;i.length>t;t++)(n=i[t]).box.containsPoint(e)?n.showAt(e):n.hide()},_trackSharedTooltip:function(t,n){var i,r,o,a,s=this,l=s.options,c=s._plotArea,u=c.categoryAxis,d=s._tooltip,h=l.tooltip,p=s._highlight;c.box.containsPoint(t)&&(i=u.pointCategoryIndex(t))!==s._tooltipCategoryIx&&(r=c.pointsByCategoryIndex(i),(a=(o=e.map(r,function(e){return e.eventArgs(n)}))[0]||{}).categoryPoints=o,r.length>0&&!this.trigger(Ni,a)?(h.visible&&d.showAt(r,t),p.show(r)):d.hide(),s._tooltipCategoryIx=i)},_mouseleave:function(t){var n=this,i=n._plotArea,r=n._tooltip,o=n._highlight,a=t.relatedTarget;a&&e(a).closest(r.element).length||(n._mousemove.cancel(),i.hideCrosshairs(),o.hide(),setTimeout(wt(r.hide,r),100),n._tooltipCategoryIx=null)},_unsetActivePoint:function(){var e=this,t=e._tooltip,n=e._highlight;e._activePoint=null,t&&t.hide(),n&&n.hide()},_onDataChanged:function(){var e,t,n=this,i=n.options,r=n._sourceSeries||i.series,a=r.length,s=n.dataSource.view(),l=(n.dataSource.group()||[]).length>0,c=[];for(e=0;a>e;e++)t=r[e],n._isBindable(t)&&l?an(c,E(t,s)):c.push(t||[]);n._sourceSeries=r,i.series=c,o(n.options),n._bindSeries(),n._bindCategories(),n._hasData=!0,n._deferRedraw()},_deferRedraw:function(){var e=this;kt.support.vml?(e._clearRedrawTimeout(),e._redrawTimeout=setTimeout(function(){e.surface&&(e.trigger(Hn),e._redraw())},0)):(e.trigger(Hn),e._redraw())},_clearRedrawTimeout:function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},_bindSeries:function(){var e,t,n,i,r=this,o=r.dataSource.view(),a=r.options.series,s=a.length;for(e=0;s>e;e++)t=a[e],r._isBindable(t)&&(n=t._groupIx,i=sn(n)?(o[n]||{}).items:o,!1!==t.autoBind&&(t.data=i))},_bindCategories:function(){var e,t,n=this,i=n.dataSource.view()||[],r=(n.dataSource.group()||[]).length>0,o=i,a=n.options,s=[].concat(a.categoryAxis);for(r&&i.length&&(o=i[0].items),e=0;s.length>e;e++)!1!==(t=s[e]).autoBind&&n._bindCategoryAxis(t,o,e)},_bindCategoryAxis:function(e,t,n){var i,r,o,a=(t||[]).length;if(e.field)for(e.categories=[],i=0;a>i;i++)o=t[i],r=c(e.field,o),0===i?(e.categories=[r],e.dataItems=[o]):(e.categories.push(r),e.dataItems.push(o));else this._bindCategoryAxisFromSeries(e,n)},_bindCategoryAxisFromSeries:function(e,t){var n,i,r,o,a,s,l,d,h,p,f,g=[],m=this.options.series,v=m.length,_={};for(i=0;v>i;i++)if(o=(r=m[i]).categoryAxis===e.name||!r.categoryAxis&&0===t,l=(a=r.data).length,r.categoryField&&o&&l>0)for(p=(f=F(e,c(r.categoryField,a[0])))?u:c,s=0;l>s;s++)d=a[s],h=p(r.categoryField,d),(f||!_[h])&&(g.push([h,d]),f||(_[h]=!0));g.length>0&&(f&&(g=L(g,function(e,t){return Zt(e[0],t[0])})),n=B(g),e.categories=n[0],e.dataItems=n[1])},_isBindable:function(e){var t,n,i=G.current.valueFields(e),r=!0;for(n=0;i.length>n;n++)if((t=i[n])===Ji?t="field":t+="Field",!sn(e[t])){r=!1;break}return r},_legendItemClick:function(e,t){var n,i,r,o=this,a=o._plotArea,s=(a.srcSeries||a.series)[e],l=(o._sourceSeries||[])[e]||s;en(s.type,[Di,qn,Jn])?(r=l.data[t],i=!!sn(r.visible)&&!r.visible,r.visible=i):(i=!l.visible,l.visible=i,s.visible=i),o.options.transitions&&(o.options.transitions=!1,n=!0),o.redraw(),n&&(o.options.transitions=!0)},_legendItemHover:function(e,t){var n,i,r=this._plotArea,o=this._highlight,a=(r.srcSeries||r.series)[e];n=en(a.type,[Di,qn,Jn])?t:e,i=r.pointsBySeriesIndex(n),o.show(i)},_shouldAttachMouseMove:function(){var e=this;return e._plotArea.crosshairs.length||e._tooltip&&e._sharedTooltip()},setOptions:function(n){var i=this,r=n.dataSource;n.dataSource=t,i._originalOptions=Dt(i._originalOptions,n),i.options=Dt({},i._originalOptions),i._sourceSeries=null,e(document).off(yi),St.fn._setEvents.call(i,n),i._initTheme(i.options),r&&i.setDataSource(r),i._hasDataSource?i._onDataChanged():(i._bindCategories(),i.redraw()),i._shouldAttachMouseMove()&&i.element.on(yi,i._mousemove)},destroy:function(){var t=this,n=t.dataSource;t.element.off(vn),n.unbind(En,t._dataChangeHandler),e(document).off(_i),t._userEvents&&t._userEvents.destroy(),t._destroyView(),t.surface.destroy(),t.surface=null,t._clearRedrawTimeout(),St.fn.destroy.call(t)},_destroyView:function(){var e=this,t=e._model,n=e._selections;if(t&&(t.destroy(),e._model=null),n)for(;n.length>0;)n.shift().destroy();e._unsetActivePoint(),e._tooltip&&e._tooltip.destroy(),e._highlight&&e._highlight.destroy()}});It.ExportMixin.extend(gr.fn),kt.PDFMixin&&kt.PDFMixin.extend(gr.fn),(q=xt.extend({init:function(){this._registry=[]},register:function(e,t){this._registry.push({type:e,seriesTypes:t})},create:function(e,t){var n,i,r,o=this._registry,a=o[0];for(n=0;o.length>n;n++)if((r=I(e,(i=o[n]).seriesTypes)).length>0){a=i;break}return new a.type(r,t)}})).current=new q,(G=xt.extend({init:function(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}},register:function(e,n,i){var r,o,a=this;for(n=n||[Ji],r=0;e.length>r;r++)o=e[r],a._valueFields[o]=n,a._otherFields[o]=i,a._nullValue[o]=a._makeValue(n,null),a._undefinedValue[o]=a._makeValue(n,t)},canonicalFields:function(e){return this.valueFields(e).concat(this.otherFields(e))},valueFields:function(e){return this._valueFields[e.type]||[Ji]},otherFields:function(e){return this._otherFields[e.type]||[Ji]},bindPoint:function(e,t){var n,i,r,o,a,s=this,l=e.data[t],c={valueFields:{value:l}},u=s.valueFields(e),d=s._otherFields[e.type];return null===l?a=s._nullValue[e.type]:sn(l)?gt(l)?(i=l.slice(u.length),a=s._bindFromArray(l,u),n=s._bindFromArray(i,d)):typeof l===Ci&&(r=s.sourceFields(e,u),o=s.sourceFields(e,d),a=s._bindFromObject(l,u,r),n=s._bindFromObject(l,d,o)):a=s._undefinedValue[e.type],sn(a)&&(1===u.length?c.valueFields.value=a[u[0]]:c.valueFields=a),c.fields=n||{},c},_makeValue:function(e,t){var n,i={},r=e.length;for(n=0;r>n;n++)i[e[n]]=t;return i},_bindFromArray:function(e,t){var n,i,r={};if(t)for(i=_t.min(t.length,e.length),n=0;i>n;n++)r[t[n]]=e[n];return r},_bindFromObject:function(e,t,n){var i,r,o,a,s={};if(t)for(r=t.length,n=n||t,i=0;r>i;i++)o=t[i],a=n[i],s[o]=c(a,e);return s},sourceFields:function(e,t){var n,i,r,o,a;if(t)for(i=t.length,o=[],n=0;i>n;n++)a=(r=t[n])===Ji?"field":r+"Field",o.push(e[a]||r);return o}})).current=new G,$=Bt.extend({init:function(e,t){var n=this;Bt.fn.init.call(n,t),this.textBox=new Yt(e,n.options),n.append(this.textBox)},options:{position:Si,margin:Jt(3),padding:Jt(4),color:kn,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:Kn,delay:ri},zIndex:2},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(e){var t=this.options,n=t.vertical,i=t.aboveAxis,r=this.children[0],o=r.box,a=r.options.padding;r.options.align=n?Mn:si,r.options.vAlign=n?Zi:Mn,t.position==oi?n?(r.options.vAlign=Zi,!i&&o.height()<e.height()&&(r.options.vAlign=xn)):r.options.align=i?Ii:si:t.position==Mn?(r.options.vAlign=Mn,r.options.align=Mn):"insideBase"==t.position?n?r.options.vAlign=i?xn:Zi:r.options.align=i?si:Ii:t.position==Si&&(n?e=i?new Lt(e.x1,e.y1-o.height(),e.x2,e.y1):new Lt(e.x1,e.y2,e.x2,e.y2+o.height()):(r.options.align=Mn,e=i?new Lt(e.x2,e.y1,e.x2+o.width(),e.y2):new Lt(e.x1-o.width(),e.y1,e.x1,e.y2))),t.rotation||(n?a.left=a.right=(e.width()-r.contentBox.width())/2:a.top=a.bottom=(e.height()-r.contentBox.height())/2),r.reflow(e)},alignToClipBox:function(e){var t,n=this,i=n.options.vertical?sr:ar,r=i+"1",o=i+"2",a=n.children[0],s=n.parent.box;(e[r]>s[r]||s[o]>e[o])&&((t=a.paddingBox.clone())[r]=_t.max(s[r],e[r]),t[o]=_t.min(s[o],e[o]),this.reflow(t))}}),Y=Ft.extend({init:function(e){var t=this;Ft.fn.init.call(t,e),t.createContainer(),t.createMarker(),t.createLabel()},createContainer:function(){var e=this;e.container=new Nt({vertical:!1,wrap:!1,align:Mn}),e.append(e.container)},createMarker:function(){this.container.append(new Gt(this.markerOptions()))},markerOptions:function(){var e=this.options,t=e.markerColor;return Dt({},e.markers,{background:t,border:{color:t}})},createLabel:function(){var e=this.options,t=Dt({},e.labels);this.container.append(new Yt(e.text,t))},renderComplete:function(){var e,t;Bt.fn.renderComplete.call(this),e=this.options.cursor||{},t=this._itemOverlay=mn.Path.fromRect(this.container.box.toRect(),{fill:{color:or,opacity:0},stroke:null,cursor:e.style||e}),this.appendVisual(t)},click:function(e,t){var n=this.eventArgs(t);e.trigger(li,n)||(t.preventDefault(),e._legendItemClick(n.seriesIndex,n.pointIndex))},hover:function(e,t){var n=this.eventArgs(t);return e.trigger(ci,n)||(t.preventDefault(),e._legendItemHover(n.seriesIndex,n.pointIndex)),!0},leave:function(e){e._unsetActivePoint()},eventArgs:function(t){var n=this.options;return{element:e(t.target),text:n.text,series:n.series,seriesIndex:n.series.index,pointIndex:n.pointIndex}},renderVisual:function(){var e=this,t=e.options,n=t.visual;n?(e.visual=n({active:t.active,series:t.series,options:{markers:e.markerOptions(),labels:t.labels},createVisual:function(){e.createVisual(),e.renderChildren(),e.renderComplete();var t=e.visual;return delete e.visual,t}}),this.addVisual()):Bt.fn.renderVisual.call(e)}}),Q=Bt.extend({render:function(){var e,t,n=this.children,i=this.options,r=i.vertical;for(this.visual=new mn.Layout(null,{spacing:r?0:i.spacing,lineSpacing:r?i.spacing:0,orientation:r?"vertical":"horizontal"}),t=0;n.length>t;t++)(e=n[t]).reflow(new Lt),e.renderVisual()},reflow:function(e){this.visual.rect(e.toRect()),this.visual.reflow();var t=this.visual.clippedBBox();this.box=t?It.rectToBox(t):new Lt},renderVisual:function(){this.addVisual()},createVisual:yt}),X=Bt.extend({init:function(e){var t=this;Bt.fn.init.call(t,e),en(t.options.position,[Zi,Ii,xn,si,zn])||(t.options.position=Ii),t.createContainer(),t.createItems()},options:{position:Ii,items:[],labels:{margin:{left:6}},offsetX:0,offsetY:0,margin:Jt(5),padding:Jt(5),border:{color:kn,width:0},item:{cursor:"pointer"},spacing:6,background:"",zIndex:1,markers:{border:{width:1},width:7,height:7,type:"rect",align:si,vAlign:Mn}},createContainer:function(){var e=this,t=e.options,n=t.align,i=t.position,r=i,o=Mn;i==zn?r=si:en(i,[Zi,xn])?(r="start"==n?si:"end"==n?Ii:Mn,o=i):n&&("start"==n?o=Zi:"end"==n&&(o=xn)),e.container=new Ft({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:o,align:r,zIndex:t.zIndex,shrinkToFit:!0}),e.append(e.container)},createItems:function(){var e,t,n,i=this,r=i.options,o=r.items,a=o.length,s=i.isVertical();for(e=new Q({vertical:s,spacing:r.spacing}),r.reverse&&(o=o.slice(0).reverse()),t=0;a>t;t++)n=o[t],e.append(new Y(Dt({},{markers:r.markers,labels:r.labels},r.item,n)));e.render(),i.container.append(e)},isVertical:function(){var e=this.options,t=e.orientation,n=e.position;return n==zn&&t!=ti||(sn(t)?t!=ti:en(n,[si,Ii]))},hasItems:function(){return this.container.children[0].children.length>0},reflow:function(e){var n=this,i=n.options;return e=e.clone(),n.hasItems()?(i.position===zn?(n.containerCustomReflow(e),n.box=e):n.containerReflow(e),t):(n.box=e,t)},containerReflow:function(e){var t,n=this,i=n.options,r=i.position,o=r==Zi||r==xn?ar:sr,a=e.clone(),s=n.container,l=i.width,c=i.height,u=n.isVertical(),d=e.clone();(r==si||r==Ii)&&(a.y1=d.y1=0),u&&c?(a.y2=a.y1+c,a.align(d,sr,s.options.vAlign)):!u&&l&&(a.x2=a.x1+l,a.align(d,ar,s.options.align)),s.reflow(a),t=(a=s.box).clone(),(i.offsetX||i.offsetY)&&(a.translate(i.offsetX,i.offsetY),n.container.reflow(a)),t[o+1]=e[o+1],t[o+2]=e[o+2],n.box=t},containerCustomReflow:function(e){var t=this,n=t.options,i=n.offsetX,r=n.offsetY,o=t.container,a=n.width,s=n.height,l=t.isVertical(),c=e.clone();l&&s?c.y2=c.y1+s:!l&&a&&(c.x2=c.x1+a),o.reflow(c),c=o.box,o.reflow(Lt(i,r,i+c.width(),r+c.height()))},renderVisual:function(){this.hasItems()&&Bt.fn.renderVisual.call(this)}}),K=Rt.extend({init:function(e){var t=this;Rt.fn.init.call(t,e),(e=t.options).categories=e.categories.slice(0),t._ticks={}},options:{type:An,categories:[],vertical:!1,majorGridLines:{visible:!1,width:1,color:kn},labels:{zIndex:1},justified:!1},range:function(){return{min:0,max:this.options.categories.length}},getTickPositions:function(e){var t,n=this.options,i=n.vertical,r=n.justified,o=this.lineBox(),a=(i?o.height():o.width())/(e-(r?1:0)),s=i?sr:ar,l=o[s+1],c=[];for(t=0;e>t;t++)c.push(rn(l,Fn)),l+=a;return r||c.push(o[s+2]),n.reverse?c.reverse():c},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getTicks:function(){var e,t=this,n=t._ticks,i=t.options,r=i.categories.length,o=i.reverse,a=i.justified;return e=t.lineBox().getHash()+r+o+a,n._hash!==e&&(n._hash=e,n.majorTicks=t.getTickPositions(r),n.minorTicks=t.getTickPositions(2*r)),n},getSlot:function(e,t){var n,i,r=this,o=r.options,a=r.getTicks().majorTicks,s=o.reverse,l=o.justified,c=o.vertical?sr:ar,u=r.lineBox(),d=u[c+(s?2:1)],h=u[c+(s?1:2)],p=u.clone(),f=_t.max(1,a.length-(l?0:1)),g=!sn(t);return e=fn(e,0),t=fn(t,e),e=cn(e,0,f),t=cn(t-1,e,f),t=_t.max(e,t),n=0===e?d:a[e]||h,i=l?n:a[t],(t-e>0||e===t)&&(i=a[t+1]||h),g&&l&&(e===f?n=i:i=n),p[c+1]=s?i:n,p[c+2]=s?n:i,p},pointCategoryIndex:function(e){var t,n,i,r,o=this,a=o.options,s=a.reverse,l=a.vertical,c=l?sr:ar,u=o.lineBox(),d=u[c+1],h=u[c+2],p=e[c],f=o.getMajorTickPositions(),g=pi;if(d>p||p>h)return null;for(i=0;f.length>i;i++)if(t=f[i],n=f[i+1],sn(n)||(n=s?d:h),s&&(t=n,n=f[i]),a.justified){if(p===n){r=_t.max(0,l?f.length-i-1:i+1);break}_t.abs(p-t)<g&&(g=p-t,r=i)}else if(p>=t&&n>=p){r=i;break}return r},getCategory:function(e){var t=this.pointCategoryIndex(e);return null===t?null:this.options.categories[t]},categoryIndex:function(e){return R(e,this.options.categories)},translateRange:function(e){var t=this.options,n=this.lineBox(),i=t.vertical?n.height():n.width(),r=t.categories.length,o=rn(e/(i/r),Wn);return{min:o,max:r+o}},scaleRange:function(e){var t=this.options.categories.length,n=e*t;return{min:-n,max:t+n}},labelsCount:function(){return this.options.categories.length},createAxisLabel:function(e,t){var n=this.options,i=n.dataItems?n.dataItems[e]:null,r=fn(n.categories[e],""),o=this.axisLabelText(r,i,t);return new Pt(r,o,e,i,t)},shouldRenderNote:function(e){var t=this.options.categories;return t.length&&t.length>e&&e>=0}}),Z=K.extend({init:function(e){var t,n=this;(e=Dt({roundToBaseUnit:!0},e=e||{},{categories:d(e.categories),min:d(e.min),max:d(e.max)})).categories&&e.categories.length>0?((t=(e.baseUnit||"").toLowerCase())!==yn&&!en(t,hr)&&(e.baseUnit=n.defaultBaseUnit(e)),(t===yn||"auto"===e.baseUnitStep)&&n.autoBaseUnit(e),n.groupCategories(e)):e.baseUnit=e.baseUnit||On,K.fn.init.call(n,e)},options:{type:Nn,labels:{dateFormats:fr},autoBaseUnitSteps:{seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10},shouldRenderNote:function(e){var t=this.range(),n=this.options.categories||[];return Zt(e,t.min)>=0&&Zt(e,t.max)<=0&&n.length},parseNoteValue:function(e){return d(e)},translateRange:function(e){var t,n,i=this,r=i.options,o=r.baseUnit,a=r.weekStartDay,s=i.lineBox(),l=r.vertical?s.height():s.width(),c=i.range(),u=l/(c.max-c.min),d=rn(e/u,Wn);return c.min&&c.max&&(t=_(r.min||c.min,d),n=_(r.max||c.max,d),c={min:p(t,0,o,a),max:p(n,0,o,a)}),c},scaleRange:function(e){var t,n=_t.abs(e),i=this.range(),r=i.min,o=i.max;if(i.min&&i.max){for(;n--;)i=v(r,o),t=_t.round(.1*i),0>e?(r=_(r,t),o=_(o,-t)):(r=_(r,-t),o=_(o,t));i={min:r,max:o}}return i},defaultBaseUnit:function(e){var t,n,i,r,o,a=e.categories,s=sn(a)?a.length:0,l=pi;for(t=0;s>t;t++)(n=a[t])&&r&&(i=v(n,r))>0&&(o=(l=_t.min(l,i))>=Xi?lr:l>=Qi-3*$i?mi:l>=Yi?rr:l>=$i?On:l>=Gi?ii:l>=qi?gi:Li),r=n;return o||On},_categoryRange:function(e){var t=e._range;return t||(t=e._range=un(e)),t},range:function(e){var t,n,i,r,o,a,s,l;return t=(e=e||this.options).categories,n=e.baseUnit===yn?hr[0]:e.baseUnit,i=e.baseUnitStep||1,r=h(e.min),o=h(e.max),s=h((a=this._categoryRange(t)).min),l=h(a.max),e.roundToBaseUnit?{min:p(r||s,0,n,e.weekStartDay),max:p(o||l,i,n,e.weekStartDay)}:{min:d(r||s),max:d(o||this._srcMaxDate||l)}},autoBaseUnit:function(e){for(var t,n,i,r=this,o=r.range(Dt({},e,{baseUnitStep:1})),a=e.baseUnit===yn,s=0,l=a?hr[s++]:e.baseUnit,c=o.max-o.min,u=c/Ki[l],d=u,h=e.maxDateGroups||r.options.maxDateGroups,p=Dt({},r.options.autoBaseUnitSteps,e.autoBaseUnitSteps);!n||u>h;)if(i=(t=t||p[l].slice(0)).shift())u=d/(n=i);else{if(l===ln(hr)){n=_t.ceil(d/h);break}if(!a){u>h&&(n=_t.ceil(d/h));break}l=hr[s++]||ln(hr),d=c/Ki[l],t=null}e.baseUnitStep=n,e.baseUnit=l},_timeScale:function(){var e,t=this,n=t.range(),i=t.options,r=t.lineBox(),o=i.vertical?r.height():r.width();return e=i.justified&&!1!==i._collapse?d(h(this._categoryRange(i.categories).max))-n.min:n.max-n.min,o/e},getTickPositions:function(e){var t,n,i,r,o,a,s,l,c,u,d,h,p,f=this,g=f.options,m=g.categories,v=[];if(g.roundToBaseUnit||0===m.length)v=K.fn.getTickPositions.call(f,e);else{for(t=g.vertical,n=g.reverse,i=f.lineBox(),r=m[0].getTime(),o=fn(g._collapse,g.justified),a=m.length-(o?1:0),s=f._timeScale(),c=1==(l=(t?-1:1)*(n?-1:1))?2:1,u=i[(t?sr:ar)+(1===l?1:2)],d=i[(t?sr:ar)+c],h=u,p=0;a>p;p++)h=u+(m[p]-r)*s*l,v.push(rn(h,Fn));ln(v)!==d&&v.push(d)}return v},groupCategories:function(e){var t,n,i=e.categories,r=d(hn(i)),o=e.baseUnit,a=e.baseUnitStep||1,s=this.range(e),l=s.max,c=[];for(t=s.min;l>t&&(c.push(t),!((n=p(t,a,o,e.weekStartDay))>r)||e.max);t=n);e.roundToBaseUnit||x(ln(c),l)||(n>l&&!1!==e._collapse?this._srcMaxDate=l:c.push(l)),e.srcCategories=i,e.categories=c},createAxisLabel:function(e,n){var i,r=this.options,o=r.dataItems?r.dataItems[e]:null,a=r.categories[e],s=r.baseUnit,l=!0,c=n.dateFormats[s];return r.justified?l=x(g(a,s,r.weekStartDay),a):r.roundToBaseUnit||(l=!x(this.range().max,a)),l&&(n.format=n.format||c,i=this.axisLabelText(a,o,n))?new Pt(a,i,e,o,n):t},categoryIndex:function(e,t){var n,i=this.options,r=i.categories;return e=d(e),t=t||this.range(),n=i.roundToBaseUnit&&x(t.max,e),e&&(e>t.max||n)?r.length:!e||t.min>e?-1:T(e,r)},getSlot:function(e,t){var n=this;return typeof e===Ci&&(e=n.categoryIndex(e)),typeof t===Ci&&(t=n.categoryIndex(t)),K.fn.getSlot.call(n,e,t)}}),J=Rt.extend({init:function(e,t,n){Dt(n=n||{},{min:d(n.min),max:d(n.max),axisCrossingValue:d(n.axisCrossingValues||n.axisCrossingValue)}),n=this.applyDefaults(d(e),d(t),n),Rt.fn.init.call(this,n)},options:{type:Nn,majorGridLines:{visible:!0,width:1,color:kn},labels:{dateFormats:fr}},applyDefaults:function(e,n,i){var r=i.min||e,o=i.max||n,a=i.baseUnit||this.timeUnits(o-r),s=Ki[a],l=g(h(r)-1,a)||d(o),c=m(h(o)+1,a),u=(i.majorUnit?i.majorUnit:t)||It.ceil(It.autoMajorUnit(l.getTime(),c.getTime()),s)/s,f=y(l,c,a),v=It.ceil(f,u)-f,_=_t.floor(v/2),b=v-_;return i.baseUnit||delete i.baseUnit,i.baseUnit=i.baseUnit||a,i.min=i.min||p(l,-_,a),i.max=i.max||p(c,b,a),i.minorUnit=i.minorUnit||u/5,i.majorUnit=u,i},range:function(){var e=this.options;return{min:e.min,max:e.max}},getDivisions:function(e){var t=this.options;return _t.floor(y(t.min,t.max,t.baseUnit)/e+1)},getTickPositions:function(e){var t,n,i=this.options,r=i.vertical,o=i.reverse,a=this.lineBox(),s=(r?-1:1)*(o?-1:1),l=a[(r?sr:ar)+(1===s?1:2)],c=this.getDivisions(e),u=i.max-i.min,d=(r?a.height():a.width())/u,h=[l];for(t=1;c>t;t++)n=l+(p(i.min,t*i.majorUnit,i.baseUnit)-i.min)*d*s,h.push(rn(n,Fn));return h},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(e,t,n){return Ut.fn.getSlot.call(this,d(e),d(t),n)},getValue:function(e){var t=Ut.fn.getValue.call(this,e);return null!==t?d(t):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var n,i,r=this.options,o=e*r.majorUnit,a=r.min;return o>0&&(a=p(a,o,r.baseUnit)),n=t.dateFormats[r.baseUnit],t.format=t.format||n,i=this.axisLabelText(a,null,t),new Pt(a,i,e,null,t)},timeUnits:function(e){var t=ii;return e>=Xi?t=lr:e>=Qi?t=mi:e>=Yi?t=rr:e>=$i&&(t=On),t},translateRange:function(e){var t=this,n=t.options,i=n.baseUnit,r=n.weekStartDay,o=t.lineBox(),a=n.vertical?o.height():o.width(),s=t.range(),l=a/(s.max-s.min),c=rn(e/l,Wn),u=_(n.min,c),d=_(n.max,c);return{min:p(u,0,i,r),max:p(d,0,i,r)}},scaleRange:function(e){for(var t,n,i=this.options,r=_t.abs(e),o=i.min,a=i.max;r--;)t=v(o,a),n=_t.round(.1*t),0>e?(o=_(o,n),a=_(a,-n)):(o=_(o,-n),a=_(a,n));return{min:o,max:a}},shouldRenderNote:function(e){var t=this.range();return Zt(e,t.min)>=0&&Zt(e,t.max)<=0}}),ee=Bt.extend({options:{vertical:!1,gap:0,spacing:0},reflow:function(e){var t,n,i=this.options,r=i.vertical,o=r?sr:ar,a=this.children,s=i.gap,l=i.spacing,c=a.length,u=c+s+l*(c-1),d=(r?e.height():e.width())/u,h=e[o+1]+d*(s/2);for(n=0;c>n;n++)(t=(a[n].box||e).clone())[o+1]=h,t[o+2]=h+d,a[n].reflow(t),c-1>n&&(h+=d*l),h+=d}}),te=Bt.extend({options:{vertical:!0},reflow:function(e){var t,n,i,r=this.options.vertical?ar:sr,o=this.children,a=this.box=new Lt,s=o.length;for(t=0;s>t;t++)!1!==(n=o[t]).visible&&((i=n.box.clone()).snapTo(e,r),0===t&&(a=this.box=i.clone()),n.reflow(i),a.wrap(i))}}),ne={click:function(e,t){return e.trigger(Hi,this.eventArgs(t))},hover:function(e,t){return e.trigger(Ni,this.eventArgs(t))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:e((t||{}).target),originalEvent:t,point:this}}},ie={createNote:function(){var e=this,t=e.options.notes,n=e.noteText||t.label.text;!1!==t.visible&&sn(n)&&null!==n&&(e.note=new Ot(e.value,n,e.dataItem,e.category,e.series,e.options.notes),e.append(e.note))}},re=Bt.extend({init:function(e,t){var n=this;Bt.fn.init.call(n),n.options=t,n.color=t.color||or,n.aboveAxis=fn(n.options.aboveAxis,!0),n.value=e},defaults:{border:{width:1},vertical:!0,overlay:{gradient:ei},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}}},render:function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},createLabel:function(){var e,t=this.options,n=t.labels;n.visible&&(e=n.template?Et(n.template)({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total,series:this.series}):this.formatValue(n.format),this.label=new $(e,Dt({vertical:t.vertical},t.labels)),this.append(this.label))},formatValue:function(e){return this.owner.formatPointValue(this,e)},reflow:function(e){var t,n,i;if(this.render(),(t=this).options,n=t.label,t.box=e,n&&(n.options.aboveAxis=t.aboveAxis,n.reflow(e)),t.note&&t.note.reflow(e),t.errorBars)for(i=0;t.errorBars.length>i;i++)t.errorBars[i].reflow(e)},createVisual:function(){var e,t=this,n=t.box,i=t.options,r=i.visual;!1!==t.visible&&(Bt.fn.createVisual.call(t),r?(e=this.rectVisual=r({category:t.category,dataItem:t.dataItem,value:t.value,series:t.series,percentage:t.percentage,runningTotal:t.runningTotal,total:t.total,rect:n.toRect(),createVisual:function(){var e=new mn.Group;return t.createRect(e),e},options:i}))&&t.visual.append(e):n.width()>0&&n.height()>0&&t.createRect(t.visual))},createRect:function(e){var n=this.options,i=n.border,r=sn(i.opacity)?i.opacity:n.opacity,o=this.rectVisual=mn.Path.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:n.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:r,dashType:i.dashType}}),a=this.box.width(),s=this.box.height();(n.vertical?a:s)>6&&(Xt(o),(1>a||1>s)&&(o.options.stroke.lineJoin="round")),e.append(o),N(n)&&e.append(this.createGradientOverlay(o,{baseColor:this.color},Dt({end:n.vertical?t:[0,1]},n.overlay)))},createHighlight:function(e){var t=mn.Path.fromRect(this.box.toRect(),e);return Xt(t)},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},getBorderColor:function(){var e=this.options,t=this.color,n=e.border,i=n.color,r=n._brightness||.8;return sn(i)||(i=new zt(t).brightness(r).toHex()),i},tooltipAnchor:function(e,t){var n,i,r,o,a=this,s=a.options,l=a.box,c=s.vertical,u=a.aboveAxis,d=a.owner.pane.clipBox()||l;return c?(n=l.x2+5,i=u?_t.max(l.y1,d.y1):_t.min(l.y2,d.y2)-t):(r=_t.max(l.x1,d.x1),o=_t.min(l.x2,d.x2),s.isStacked?(n=u?o-e:r,i=l.y1-t-5):(n=u?o+5:r-e-5,i=l.y1)),new Wt(n,i)}}),Dt(re.fn,ne),Dt(re.fn,ie),oe=mn.Animation.extend({options:{duration:ri},setup:function(){var e,t,n=this.element,i=this.options;n.bbox()?(this.origin=i.origin,e=i.vertical?sr:ar,(t=this.fromScale=new gn.Point(1,1))[e]=Oi,n.transform(gn.transform().scale(t.x,t.y))):this.abort()},step:function(e){var t=tn(this.fromScale.x,1,e),n=tn(this.fromScale.y,1,e);this.element.transform(gn.transform().scale(t,n,this.origin))},abort:function(){mn.Animation.fn.abort.call(this),this.element.transform(null)}}),mn.AnimationFactory.current.register(wn,oe),ae=mn.Animation.extend({options:{duration:200,easing:"linear"},setup:function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},step:function(e){this.element.opacity(e*this.fadeTo)}}),mn.AnimationFactory.current.register(Kn,ae),(se=function(e,t,n){this.initGlobalRanges(e,t,n)}).prototype=se.fn={percentRegex:/percent(?:\w*)\((\d+)\)/,standardDeviationRegex:RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),initGlobalRanges:function(e,t,n){var i,r,o,a,s,l=this,c=t.data,u=l.standardDeviationRegex.exec(e);u?(l.valueGetter=l.createValueGetter(t,n),i=l.getAverage(c),r=l.getStandardDeviation(c,i,!1),o=u[1]?parseFloat(u[1]):1,a={low:i.value-r*o,high:i.value+r*o},l.globalRange=function(){return a}):e.indexOf&&e.indexOf("stderr")>=0&&(l.valueGetter=l.createValueGetter(t,n),s=l.getStandardError(c,l.getAverage(c)),l.globalRange=function(e){return{low:e-s,high:e+s}})},createValueGetter:function(e,t){var n,i,r,o=e.data,a=G.current,s=a.valueFields(e),l=sn(o[0])?o[0]:{};return gt(l)?(n=t?R(t,s):0,r=At("["+n+"]")):S(l)?r=At():typeof l===Ci&&(i=a.sourceFields(e,s),r=At(i[R(t,s)])),r},getErrorRange:function(e,t){var n,i,r,o,a=this;if(sn(t)){if(a.globalRange)return a.globalRange(e);if(gt(t))n=e-t[0],i=e+t[1];else if(S(r=parseFloat(t)))n=e-r,i=e+r;else{if(!(r=a.percentRegex.exec(t)))throw Error("Invalid ErrorBar value: "+t);o=e*(parseFloat(r[1])/100),n=e-_t.abs(o),i=e+_t.abs(o)}return{low:n,high:i}}},getStandardError:function(e,t){return this.getStandardDeviation(e,t,!0)/_t.sqrt(t.count)},getStandardDeviation:function(e,t,n){var i,r,o=0,a=e.length,s=n?t.count-1:t.count;for(r=0;a>r;r++)S(i=this.valueGetter(e[r]))&&(o+=_t.pow(i-t.value,2));return _t.sqrt(o/s)},getAverage:function(e){var t,n,i=0,r=0,o=e.length;for(n=0;o>n;n++)S(t=this.valueGetter(e[n]))&&(i+=t,r++);return{value:i/r,count:r}}},le=Bt.extend({init:function(e,t){var n=this;Bt.fn.init.call(n,t),n.plotArea=e,n.categoryAxis=e.seriesCategoryAxis(t.series[0]),n.valueAxisRanges={},n.points=[],n.categoryPoints=[],n.seriesPoints=[],n.seriesOptions=[],n._evalSeries=[],n.render()},options:{series:[],invertAxes:!1,isStacked:!1,clip:!0},render:function(){var e=this;e.traverseDataPoints(wt(e.addValue,e))},pointOptions:function(e,t){var n,i=this.seriesOptions[t];return i||(n=this.pointType().fn.defaults,this.seriesOptions[t]=i=Dt({},n,{vertical:!this.options.invertAxes},e)),i},plotValue:function(e){var t,n,i,r,o,a,s,l;if(!e)return 0;if(this.options.isStacked100&&S(e.value)){for(t=e.categoryIx,n=this.categoryPoints[t],i=0,r=[],o=0;n.length>o;o++)if(a=n[o]){if(s=e.series.stack,l=a.series.stack,s&&l&&s.group!==l.group)continue;S(a.value)&&(i+=_t.abs(a.value),r.push(_t.abs(a.value)))}if(i>0)return e.value/i}return e.value},plotRange:function(e,t){var n,i,r,o,a,s,l,c,u,d,h,p,f=e.categoryIx,g=this.categoryPoints[f];if(this.options.isStacked){for(t=t||0,i=(n=this.plotValue(e))>=0,r=t,o=!1,a=0;g.length>a&&e!==(s=g[a]);a++){if(l=e.series.stack,c=s.series.stack,l&&c){if(typeof l===Wi&&l!==c)continue;if(l.group&&l.group!==c.group)continue}((u=this.plotValue(s))>=0&&i||0>u&&!i)&&(r+=u,n+=u,o=!0,this.options.isStacked100&&(n=_t.min(n,1)))}return o&&(r-=t),[r,n]}return d=e.series,h=this.seriesValueAxis(d),[p=this.categoryAxisCrossingValue(h),e.value||p]},stackLimits:function(e,t){var n,i,r,o,a,s=pi,l=fi;for(n=0;this.categoryPoints.length>n;n++)for(i=this.categoryPoints[n],r=0;i.length>r;r++)(o=i[r])&&(o.series.stack===t||o.series.axis===e)&&(a=this.plotRange(o,0)[1],sn(a)&&isFinite(a)&&(l=_t.max(l,a),s=_t.min(s,a)));return{min:s,max:l}},updateStackRange:function(){var e,t,n,i,r,o,a=this,s=a.options.series,l={};if(a.options.isStacked)for(t=0;s.length>t;t++)(e=l[r=(i=(n=s[t]).axis)+n.stack])||(e=a.stackLimits(i,n.stack),(o=a.errorTotals)&&(o.negative.length&&(e.min=_t.min(e.min,dn(o.negative))),o.positive.length&&(e.max=_t.max(e.max,hn(o.positive)))),e.min!==pi||e.max!==fi?l[r]=e:e=null),e&&(a.valueAxisRanges[i]=e)},addErrorBar:function(e,t,n){var i,r=this,o=e.value,a=e.series,s=e.seriesIx,l=e.options.errorBars,c=t.fields[Qn],u=t.fields[Xn];S(c)&&S(u)?i={low:c,high:u}:l&&sn(l.value)&&(r.seriesErrorRanges=r.seriesErrorRanges||[],r.seriesErrorRanges[s]=r.seriesErrorRanges[s]||new se(l.value,a,Ji),i=r.seriesErrorRanges[s].getErrorRange(o,l.value)),i&&(e.low=i.low,e.high=i.high,r.addPointErrorBar(e,n))},addPointErrorBar:function(e,t){var n,i,r,o=this,a=e.series,s=e.low,l=e.high,c=!o.options.invertAxes,u=e.options.errorBars;o.options.isStacked?(s=(i=o.stackedErrorRange(e,t)).low,l=i.high):(r={categoryIx:t,series:a},o.updateRange({value:s},r),o.updateRange({value:l},r)),n=new me(s,l,c,o,a,u),e.errorBars=[n],e.append(n)},stackedErrorRange:function(e,t){var n=this,i=n.plotRange(e,0)[1]-e.value,r=e.low+i,o=e.high+i;return n.errorTotals=n.errorTotals||{positive:[],negative:[]},0>r&&(n.errorTotals.negative[t]=_t.min(n.errorTotals.negative[t]||0,r)),o>0&&(n.errorTotals.positive[t]=_t.max(n.errorTotals.positive[t]||0,o)),{low:r,high:o}},addValue:function(t,n){var i,r,o=this,a=n.categoryIx,s=n.series,l=n.seriesIx,c=o.categoryPoints[a];c||(o.categoryPoints[a]=c=[]),(i=o.seriesPoints[l])||(o.seriesPoints[l]=i=[]),(r=o.createPoint(t,n))&&(e.extend(r,n),r.owner=o,r.dataItem=s.data[a],r.noteText=t.fields.noteText,o.addErrorBar(r,t,a)),o.points.push(r),i.push(r),c.push(r),o.updateRange(t.valueFields,n)},evalPointOptions:function(e,t,n,i,r,o){var a={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip","template","visual","toggle"]},s=this._evalSeries[o];return sn(s)||(this._evalSeries[o]=s=M(e,{},a,!0)),s&&M(e=Dt({},e),{value:t,category:n,index:i,series:r,dataItem:r.data[i]},a),e},updateRange:function(e,t){var n=t.series.axis,i=e.value,r=this.valueAxisRanges[n];isFinite(i)&&null!==i&&((r=this.valueAxisRanges[n]=r||{min:pi,max:fi}).min=_t.min(r.min,i),r.max=_t.max(r.max,i))},seriesValueAxis:function(e){var t=this.plotArea,n=e.axis,i=n?t.namedValueAxes[n]:t.valueAxis;if(!i)throw Error("Unable to locate value axis with name "+n);return i},reflow:function(e){var t,n,i=this,r=0,o=i.categorySlots=[],a=i.points,s=i.categoryAxis;i.traverseDataPoints(function(e,l){var c,u,d,h,p=l.categoryIx,f=l.series;i.pointValue(e),t=i.seriesValueAxis(f),n=a[r++],(c=o[p])||(o[p]=c=i.categorySlot(s,p,t)),n&&(u=i.plotRange(n,t.startValue()),(d=t.getSlot(u[0],u[1],!i.options.clip))?(h=i.pointSlot(c,d),n.aboveAxis=i.aboveAxis(n,t),i.options.isStacked100&&(n.percentage=i.plotValue(n)),i.reflowPoint(n,h)):n.visible=!1)}),i.reflowCategories(o),i.box=e},aboveAxis:function(e,t){var n=this.categoryAxisCrossingValue(t),i=e.value;return t.options.reverse?n>i:i>=n},categoryAxisCrossingValue:function(e){var t=this.categoryAxis,n=e.options;return[].concat(n.axisCrossingValues||n.axisCrossingValue)[t.axisIndex||0]||0},reflowPoint:function(e,t){e.reflow(t)},reflowCategories:function(){},pointSlot:function(e,t){var n=this.options.invertAxes,i=n?t:e,r=n?e:t;return new Lt(i.x1,r.y1,i.x2,r.y2)},categorySlot:function(e,t){return e.getSlot(t)},traverseDataPoints:function(e){var t,n,i,r,o=this.options.series,a=this.categoryAxis.options.categories||[],l=s(o),c=o.length;for(t=0;l>t;t++)for(n=0;c>n;n++)r=o[n],i=a[t],e(this._bindPoint(r,n,t),{category:i,categoryIx:t,series:r,seriesIx:n})},_bindPoint:function(e,t,n){var i,r;return this._bindCache||(this._bindCache=[]),(i=this._bindCache[t])||(i=this._bindCache[t]=[]),(r=i[n])||(r=i[n]=G.current.bindPoint(e,n)),r},formatPointValue:function(e,t){return null===e.value?"":Kt(t,e.value)},pointValue:function(e){return e.valueFields.value}}),ce=le.extend({options:{animation:{type:wn}},render:function(){le.fn.render.apply(this),this.updateStackRange()},pointType:function(){return re},clusterType:function(){return ee},stackType:function(){return te},stackLimits:function(e,t){return le.fn.stackLimits.call(this,e,t)},createPoint:function(e,t){var n,i,r,o=this,a=t.categoryIx,s=t.category,l=t.series,c=t.seriesIx,u=o.pointValue(e),d=o.options,h=o.children,p=o.options.isStacked,f=o.pointType(),g=o.clusterType(),m=this.pointOptions(l,c),v=m.labels;return p&&v.position==Si&&(v.position=oi),m.isStacked=p,r=e.fields.color||l.color,0>u&&m.negativeColor&&(r=m.negativeColor),m=o.evalPointOptions(m,u,s,a,l,c),kt.isFunction(l.color)&&(r=m.color),(n=new f(u,m)).color=r,(i=h[a])||(i=new g({vertical:d.invertAxes,gap:d.gap,spacing:d.spacing}),o.append(i)),p?o.getStackWrap(l,i).append(n):i.append(n),n},getStackWrap:function(e,t){var n,i,r=e.stack,o=r&&r.group||r,a=t.children;if(typeof o===Wi){for(i=0;a.length>i;i++)if(a[i]._stackGroup===o){n=a[i];break}}else n=a[0];return n||((n=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=o,t.append(n)),n},categorySlot:function(e,t,n){var i,r,o=this.options,a=e.getSlot(t),s=n.startValue();return o.isStacked&&(r=n.getSlot(s,s,!0),a[(i=o.invertAxes?ar:sr)+1]=a[i+2]=r[i+1]),a},reflowCategories:function(e){var t,n=this.children,i=n.length;for(t=0;i>t;t++)n[t].reflow(e[t])},createAnimation:function(){this._setAnimationOptions(),Bt.fn.createAnimation.call(this),V(this.options.series)&&this._setChildrenAnimation()},_setChildrenAnimation:function(){var e,t,n,i=this.points;for(n=0;i.length>n;n++)(t=(e=i[n]).visual)&&sn(t.options.zIndex)&&(e.options.animation=this.options.animation,e.createAnimation())},_setAnimationOptions:function(){var e,t,n=this.options,i=n.animation||{};e=this.options.isStacked?(t=this.seriesValueAxis(n.series[0])).getSlot(t.startValue()):this.categoryAxis.getSlot(0),i.origin=new gn.Point(e.x1,e.y1),i.vertical=!n.invertAxes}}),ue=re.extend({defaults:{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}},createLabel:function(){var e=this.options.labels,t=Dt({},e,e.from),n=Dt({},e,e.to);t.visible&&(this.labelFrom=this._createLabel(t),this.append(this.labelFrom)),n.visible&&(this.labelTo=this._createLabel(n),this.append(this.labelTo))},_createLabel:function(e){var t;return t=e.template?Et(e.template)({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total,series:this.series}):this.formatValue(e.format),new $(t,Dt({vertical:this.options.vertical},e))},reflow:function(e){this.render();var t=this,n=t.labelFrom,i=t.labelTo;t.box=e,n&&(n.options.aboveAxis=t.value.from>t.value.to,n.reflow(e)),i&&(i.options.aboveAxis=t.value.to>t.value.from,i.reflow(e)),t.note&&t.note.reflow(e)}}),de=ce.extend({pointType:function(){return ue},pointValue:function(e){return e.valueFields},formatPointValue:function(e,t){return null===e.value.from&&null===e.value.to?"":Kt(t,e.value.from,e.value.to)},plotLimits:le.fn.plotLimits,plotRange:function(e){return e?[e.value.from,e.value.to]:0},updateRange:function(e,t){var n=t.series.axis,i=e.from,r=e.to,o=this.valueAxisRanges[n];null!==e&&S(i)&&S(r)&&((o=this.valueAxisRanges[n]=o||{min:pi,max:fi}).min=_t.min(o.min,i),o.max=_t.max(o.max,i),o.min=_t.min(o.min,r),o.max=_t.max(o.max,r))},aboveAxis:function(e){var t=e.value;return t.to>t.from}}),he=le.extend({init:function(e,t){this.wrapData(t),le.fn.init.call(this,e,t)},options:{animation:{type:wn}},wrapData:function(e){var t,n,i,r=e.series;for(t=0;r.length>t;t++)(n=(i=r[t]).data)&&!gt(n[0])&&typeof n[0]!=Ci&&(i.data=[n])},reflowCategories:function(e){var t,n=this.children,i=n.length;for(t=0;i>t;t++)n[t].reflow(e[t])},plotRange:function(e){var t=e.series,n=this.seriesValueAxis(t),i=this.categoryAxisCrossingValue(n);return[i,e.value.current||i]},createPoint:function(e,t){var n,i,r=this,o=t.categoryIx,a=t.category,s=t.series,l=t.seriesIx,c=e.valueFields,u=r.options,d=r.children,h=Dt({vertical:!u.invertAxes,overlay:s.overlay,categoryIx:o,invertAxes:u.invertAxes},s),p=e.fields.color||s.color;return h=r.evalPointOptions(h,c,a,o,s,l),kt.isFunction(s.color)&&(p=h.color),(n=new pe(c,h)).color=p,(i=d[o])||(i=new ee({vertical:u.invertAxes,gap:u.gap,spacing:u.spacing}),r.append(i)),i.append(n),n},updateRange:function(e,t){var n=t.series.axis,i=e.current,r=e.target,o=this.valueAxisRanges[n];sn(i)&&!isNaN(i)&&sn(r&&!isNaN(r))&&((o=this.valueAxisRanges[n]=o||{min:pi,max:fi}).min=_t.min.apply(_t,[o.min,i,r]),o.max=_t.max.apply(_t,[o.max,i,r]))},formatPointValue:function(e,t){return Kt(t,e.value.current,e.value.target)},pointValue:function(e){return e.valueFields.current},aboveAxis:function(e){return e.value.current>0},createAnimation:function(){var e,t,n=this.points;for(this._setAnimationOptions(),t=0;n.length>t;t++)(e=n[t]).options.animation=this.options.animation,e.createAnimation()},_setAnimationOptions:ce.fn._setAnimationOptions}),pe=Bt.extend({init:function(e,t){var n=this;Bt.fn.init.call(n,t),n.aboveAxis=n.options.aboveAxis,n.color=t.color||or,n.value=e},options:{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}</br>Target: {1}"}},render:function(){var e=this,t=e.options;e._rendered||(e._rendered=!0,sn(e.value.target)&&(e.target=new fe({type:t.target.shape,background:t.target.color||e.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:Zi,align:Ii}),e.append(e.target)),e.createNote())},reflow:function(e){this.render();var t,n=this,i=n.options,r=n.owner,o=n.target,a=i.invertAxes,s=r.seriesValueAxis(n.options),l=r.categorySlot(r.categoryAxis,i.categoryIx,s),c=s.getSlot(n.value.target),u=a?c:l,d=a?l:c;o&&(t=new Lt(u.x1,d.y1,u.x2,d.y2),o.options.height=a?t.height():i.target.line.width,o.options.width=a?i.target.line.width:t.width(),o.reflow(t)),n.note&&n.note.reflow(e),n.box=e},createVisual:function(){var e,t;Bt.fn.createVisual.call(this),e=this.options,t=mn.Path.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null}),e.border.width>0&&t.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:fn(e.border.opacity,e.opacity)}),this.bodyVisual=t,Xt(t),this.visual.append(t)},createAnimation:function(){this.bodyVisual&&(this.animation=mn.Animation.create(this.bodyVisual,this.options.animation))},tooltipAnchor:function(e,t){var n,i,r,o,a=this,s=a.options,l=a.box,c=s.vertical,u=a.aboveAxis,d=a.owner.pane.clipBox()||l;return c?(n=l.x2+5,i=u?_t.max(l.y1,d.y1):_t.min(l.y2,d.y2)-t):(r=_t.max(l.x1,d.x1),o=_t.min(l.x2,d.x2),s.isStacked?(n=u?o-e:r,i=l.y1-t-5):(n=u?o+5:r-e-5,i=l.y1)),new Wt(n,i)},createHighlight:function(e){return mn.Path.fromRect(this.box.toRect(),e)},highlightVisual:function(){return this.bodyVisual},highlightVisualArgs:function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},formatValue:function(e){return this.owner.formatPointValue(this,e)}}),Dt(pe.fn,ne),Dt(pe.fn,ie),fe=Gt.extend(),Dt(fe.fn,ne),ge=Bt.extend({init:function(e,t,n,i,r,o){var a=this;a.low=e,a.high=t,a.isVertical=n,a.chart=i,a.series=r,Bt.fn.init.call(a,o)},options:{animation:{type:Kn,delay:ri},endCaps:!0,line:{width:1},zIndex:1},getAxis:function(){},reflow:function(e){var t,n=this,i=n.options.endCaps,r=n.isVertical,o=n.getAxis().getSlot(n.low,n.high),a=e.center(),s=n.getCapsWidth(e,r),l=r?a.x:a.y,c=l-s,u=l+s;r?(t=[Wt(a.x,o.y1),Wt(a.x,o.y2)],i&&t.push(Wt(c,o.y1),Wt(u,o.y1),Wt(c,o.y2),Wt(u,o.y2)),n.box=Lt(c,o.y1,u,o.y2)):(t=[Wt(o.x1,a.y),Wt(o.x2,a.y)],i&&t.push(Wt(o.x1,c),Wt(o.x1,u),Wt(o.x2,c),Wt(o.x2,u)),n.box=Lt(o.x1,c,o.x2,u)),n.linePoints=t},getCapsWidth:function(e,t){var n=t?e.width():e.height();return _t.min(_t.floor(n/2),4)||4},createVisual:function(){var e=this,t=e.options,n=t.visual;n?e.visual=n({low:e.low,high:e.high,rect:e.box.toRect(),options:{endCaps:t.endCaps,color:t.color,line:t.line},createVisual:function(){e.createDefaultVisual();var t=e.visual;return delete e.visual,t}}):e.createDefaultVisual()},createDefaultVisual:function(){var e,t,n=this.options,i={stroke:{color:n.color,width:n.line.width,dashType:n.line.dashType}},r=this.linePoints;for(Bt.fn.createVisual.call(this),e=0;r.length>e;e+=2)t=new mn.Path(i).moveTo(r[e].x,r[e].y).lineTo(r[e+1].x,r[e+1].y),this.visual.append(t)}}),me=ge.extend({getAxis:function(){var e=this.chart,t=this.series;return e.seriesValueAxis(t)}}),ve=ge.extend({getAxis:function(){var e=this,t=e.chart,n=e.series,i=t.seriesAxes(n);return e.isVertical?i.y:i.x}}),_e=Bt.extend({init:function(e,t){var n=this;Bt.fn.init.call(n),n.value=e,n.options=t,n.aboveAxis=fn(n.options.aboveAxis,!0),n.tooltipTracking=!0},defaults:{vertical:!0,markers:{visible:!0,background:or,size:8,type:In,border:{width:2},opacity:1},labels:{visible:!1,position:"above",margin:Jt(3),padding:Jt(4),animation:{type:Kn,delay:ri}},notes:{label:{}},highlight:{markers:{border:{}}}},render:function(){var e=this,t=e.options,n=t.markers,i=t.labels,r=e.value;e._rendered||(e._rendered=!0,n.visible&&n.size&&(e.marker=e.createMarker(),e.append(e.marker)),i.visible&&(i.template?r=Et(i.template)({dataItem:e.dataItem,category:e.category,value:e.value,percentage:e.percentage,series:e.series}):i.format&&(r=e.formatValue(i.format)),e.label=new Yt(r,Dt({align:Mn,vAlign:Mn,margin:{left:5,right:5},zIndex:fn(i.zIndex,this.series.zIndex)},i)),e.append(e.label)),e.createNote(),e.errorBar&&e.append(e.errorBar))},markerBorder:function(){var e=this.options.markers,t=e.background,n=Dt({color:this.color},e.border);return sn(n.color)||(n.color=new zt(t).brightness(.8).toHex()),n},createVisual:yt,createMarker:function(){var e=this.options.markers;return new Gt({type:e.type,width:e.size,height:e.size,rotation:e.rotation,background:e.background,border:this.markerBorder(),opacity:e.opacity,zIndex:fn(e.zIndex,this.series.zIndex),animation:e.animation,visual:e.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},markerBox:function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},reflow:function(e){var t,n,i,r,o=this,a=o.options.vertical,s=o.aboveAxis;if(o.render(),o.box=e,t=e.clone(),a?s?t.y1-=t.height():t.y2+=t.height():s?t.x1+=t.width():t.x2-=t.width(),o._childBox=t,o.marker&&o.marker.reflow(t),o.reflowLabel(t),o.errorBars)for(i=0;o.errorBars.length>i;i++)o.errorBars[i].reflow(t);o.note&&(r=o.markerBox(),o.marker||(n=r.center(),r=Lt(n.x,n.y,n.x,n.y)),o.note.reflow(r))},reflowLabel:function(e){var t=this,n=t.options,i=t.label,r=n.labels.position;i&&(r="below"===(r="above"===r?Zi:r)?xn:r,i.reflow(e),i.box.alignTo(t.markerBox(),r),i.reflow(i.box))},createHighlight:function(){var e=this.options.highlight.markers,t=this.markerBorder().color,n=this.options.markers,i=new Gt({type:n.type,width:n.size,height:n.size,rotation:n.rotation,background:e.color||t,border:{color:e.border.color,width:e.border.width,opacity:fn(e.border.opacity,1)},opacity:fn(e.opacity,1)});return i.reflow(this._childBox),i.getElement()},highlightVisual:function(){return(this.marker||{}).visual},highlightVisualArgs:function(){var e,t,n,i,r,o=this.marker;return o?(t=o.paddingBox.toRect(),e=o.visual):(i=(n=this.options.markers.size)/2,r=this.box.center(),t=new gn.Rect([r.x-i,r.y-i],[n,n])),{options:this.options,rect:t,visual:e}},tooltipAnchor:function(e,n){var i=this,r=i.markerBox(),o=i.aboveAxis,a=r.x2+5,s=o?r.y1-n:r.y2,l=i.owner.pane.clipBox();return!l||l.overlaps(r)?Wt(a,s):t},formatValue:function(e){return this.owner.formatPointValue(this,e)}}),Dt(_e.fn,ne),Dt(_e.fn,ie),ye=_e.extend({init:function(e,t){_e.fn.init.call(this,e,t),this.category=e.category},defaults:{labels:{position:Mn},highlight:{opacity:1,border:{width:1,opacity:1}}},createHighlight:function(){var e=this.options.highlight,t=e.border,n=this.options.markers,i=this.box.center(),r=n.size/2-t.width/2;return new mn.Circle(new gn.Circle([i.x,i.y],r),{stroke:{color:t.color||new zt(n.background).brightness(.8).toHex(),width:t.width,opacity:t.opacity},fill:{color:n.background,opacity:e.opacity}})}}),be=Bt.extend({init:function(e,t,n){var i=this;Bt.fn.init.call(i),i.linePoints=e,i.series=t,i.seriesIx=n},options:{closed:!1},points:function(e){var t,n,i=this.linePoints.concat(e||[]),r=[];for(t=0,n=i.length;n>t;t++)!1!==i[t].visible&&r.push(i[t]._childBox.toRect().center());return r},createVisual:function(){var e,t=this.options,n=this.series,i=n._defaults,r=n.color;Mt(r)&&i&&(r=i.color),e=mn.Path.fromPoints(this.points(),{stroke:{color:r,width:n.width,opacity:n.opacity,dashType:n.dashType},zIndex:n.zIndex}),t.closed&&e.close(),this.visual=e},aliasFor:function(e,t){var n=this.seriesIx;return this.parent.getNearestPoint(t.x,t.y,n)}}),we={renderSegments:function(){var e,t,n,i,r,o,a,s,l=this,c=l.options.series,u=l.seriesPoints,d=u.length;for(this._segments=[],t=0;d>t;t++){for(e=c[t],a=(n=l.sortPoints(u[t])).length,i=[],o=0;a>o;o++)(r=n[o])?i.push(r):l.seriesMissingValues(e)!==ai&&(i.length>1&&(s=l.createSegment(i,e,t,s),this._addSegment(s)),i=[]);i.length>1&&(s=l.createSegment(i,e,t,s),this._addSegment(s))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(e){this._segments.push(e),e.parent=this},sortPoints:function(e){return e},seriesMissingValues:function(e){var t=e.missingValues;return!t&&this.options.isStacked?cr:t||ai},getNearestPoint:function(e,t,n){var i,r,o,a,s=new Wt(e,t),l=this.seriesPoints[n],c=pi;for(r=0;l.length>r;r++)(o=l[r])&&sn(o.value)&&null!==o.value&&!1!==o.visible&&c>(a=o.box.center().distanceTo(s))&&(i=o,c=a);return i}},ke={createAnimation:function(){var e,t,n=this.getRoot();n&&!1!==(n.options||{}).transitions&&(e=n.box,t=mn.Path.fromRect(e.toRect()),this.visual.clip(t),this.animation=new Ce(t,{box:e}),V(this.options.series)&&this._setChildrenAnimation(t))},_setChildrenAnimation:function(e){var t,n,i=this.animationPoints();for(n=0;i.length>n;n++)(t=i[n].visual)&&sn(t.options.zIndex)&&t.clip(e)}},xe=le.extend({render:function(){var e=this;le.fn.render.apply(e),e.updateStackRange(),e.renderSegments()},pointType:function(){return _e},createPoint:function(e,t){var n,i,r,o=this,a=t.categoryIx,s=t.category,l=t.series,c=t.seriesIx,u=e.valueFields.value,d=o.seriesMissingValues(l);if(!sn(u)||null===u){if(d!==cr)return null;u=0}return i=this.pointOptions(l,c),i=o.evalPointOptions(i,u,s,a,l,c),r=e.fields.color||l.color,kt.isFunction(l.color)&&(r=i.color),(n=new _e(u,i)).color=r,o.append(n),n},plotRange:function(e){var t,n,i,r,o=this.plotValue(e);if(this.options.isStacked)for(t=e.categoryIx,n=this.categoryPoints[t],i=0;n.length>i&&e!==(r=n[i]);i++)o+=this.plotValue(r);return[o,o]},createSegment:function(e,t,n){var i=t.style;return new(i===Vi?Te:i===Ui?Se:be)(e,t,n)},animationPoints:function(){var e,t,n,i=this.seriesOptions,r=[];for(n=0;i.length>n;n++)if(i[n].markers.visible)for(e=this.seriesPoints[n],t=0;e.length>t;t++)r.push(e[t].marker);return r.concat(this._segments)}}),Dt(xe.fn,we,ke),Ce=mn.Animation.extend({options:{duration:ri},setup:function(){this._setEnd(this.options.box.x1)},step:function(e){var t=this.options.box;this._setEnd(tn(t.x1,t.x2,e))},_setEnd:function(e){var t=this.element,n=t.segments,i=n[1].anchor(),r=n[2].anchor();t.suspend(),i.setX(e),t.resume(),r.setX(e)}}),mn.AnimationFactory.current.register(Rn,Ce),Te=be.extend({points:function(e){var t,n=this;return t=n.calculateStepPoints(n.linePoints),e&&e.length&&(t=t.concat(n.calculateStepPoints(e).reverse())),t},calculateStepPoints:function(e){var t,n,i,r,o,a=this,s=a.parent,l=s.plotArea.seriesCategoryAxis(a.series),c=s.seriesMissingValues(a.series)===ai,u=e.length,d=l.options.reverse,h=l.options.vertical,p=d?2:1,f=d?1:2,g=[];for(i=1;u>i;i++)t=e[i-1],n=e[i],r=t.markerBox().center(),o=n.markerBox().center(),l.options.justified?(g.push(new gn.Point(r.x,r.y)),g.push(h?new gn.Point(r.x,o.y):new gn.Point(o.x,r.y)),g.push(new gn.Point(o.x,o.y))):h?(g.push(new gn.Point(r.x,t.box[sr+p])),g.push(new gn.Point(r.x,t.box[sr+f])),c&&g.push(new gn.Point(r.x,n.box[sr+p])),g.push(new gn.Point(o.x,n.box[sr+p])),g.push(new gn.Point(o.x,n.box[sr+f]))):(g.push(new gn.Point(t.box[ar+p],r.y)),g.push(new gn.Point(t.box[ar+f],r.y)),c&&g.push(new gn.Point(n.box[ar+p],r.y)),g.push(new gn.Point(n.box[ar+p],o.y)),g.push(new gn.Point(n.box[ar+f],o.y)));return g||[]}}),Se=be.extend({createVisual:function(){var e,t,n=this.series,i=n._defaults,r=n.color;Mt(r)&&i&&(r=i.color),e=new Ht(this.options.closed).process(this.points()),(t=new mn.Path({stroke:{color:r,width:n.width,opacity:n.opacity,dashType:n.dashType},zIndex:n.zIndex})).segments.push.apply(t.segments,e),this.visual=t}}),De={points:function(){var e,t,n=this,i=n.parent,r=i.plotArea,o=i.options.invertAxes,a=i.seriesValueAxis(n.series).lineBox(),s=r.seriesCategoryAxis(n.series).lineBox(),l=o?s.x1:s.y1,c=n.stackPoints,u=n._linePoints(c),d=o?ar:sr;return l=cn(l,a[d+1],a[d+2]),!n.stackPoints&&u.length>1&&(e=u[0],t=ln(u),o?(u.unshift(new gn.Point(l,e.y)),u.push(new gn.Point(l,t.y))):(u.unshift(new gn.Point(e.x,l)),u.push(new gn.Point(t.x,l)))),u},createVisual:function(){var e=this.series,t=e._defaults,n=e.color;Mt(n)&&t&&(n=t.color),this.visual=new mn.Group({zIndex:e.zIndex}),this.createArea(n),this.createLine(n)},createLine:function(e){var t,n=this.series,i=Dt({color:e,opacity:n.opacity},n.line);!1!==i.visible&&i.width>0&&(t=mn.Path.fromPoints(this._linePoints(),{stroke:{color:i.color,width:i.width,opacity:i.opacity,dashType:i.dashType,lineCap:"butt"}}),this.visual.append(t))},createArea:function(e){var t=this.series,n=mn.Path.fromPoints(this.points(),{fill:{color:e,opacity:t.opacity},stroke:null});this.visual.append(n)}},Ae=be.extend({init:function(e,t,n,i){this.stackPoints=t,be.fn.init.call(this,e,n,i)},_linePoints:be.fn.points}),Dt(Ae.fn,De),Me=xe.extend({createSegment:function(e,t,n,i){var r,o=this.options.isStacked,a=(t.line||{}).style;return o&&n>0&&i&&(r="gap"!=this.seriesMissingValues(t)?i.linePoints:this._gapStackPoints(e,n,a),a!==Vi&&(r=r.slice(0).reverse())),a===Ui?new Ee(e,i,o,t,n):new(a===Vi?Ie:Ae)(e,r,t,n)},reflow:function(e){var t,n,i,r;if(xe.fn.reflow.call(this,e),t=this._stackPoints)for(r=0;t.length>r;r++)n=t[r],i=this.categoryAxis.getSlot(n.categoryIx),n.reflow(i)},_gapStackPoints:function(e,t,n){var i,r,o,a,s=this.seriesPoints,l=e[0].categoryIx,c=l+e.length,u=[];for(this._stackPoints=this._stackPoints||[],a=l;c>a;a++){i=t;do{r=s[--i][a]}while(i>0&&!r);r?(n!==Vi&&a>l&&!s[i][a-1]&&u.push(this._previousSegmentPoint(a,a-1,i)),u.push(r),n!==Vi&&c>a+1&&!s[i][a+1]&&u.push(this._previousSegmentPoint(a,a+1,i))):(o=this._createGapStackPoint(a),this._stackPoints.push(o),u.push(o))}return u},_previousSegmentPoint:function(e,t,n){for(var i,r=this.seriesPoints;n>0&&!i;)i=r[--n][t];return i?i=r[n][e]:(i=this._createGapStackPoint(e),this._stackPoints.push(i)),i},_createGapStackPoint:function(e){var t=this.pointOptions({},0),n=new _e(0,t);return n.categoryIx=e,n.series={},n},seriesMissingValues:function(e){return e.missingValues||cr}}),Ee=Ae.extend({init:function(e,t,n,i,r){var o=this;o.prevSegment=t,o.isStacked=n,be.fn.init.call(o,e,i,r)},strokeSegments:function(){var e,t,n=this._strokeSegments;return n||(e=new Ht(this.options.closed),t=be.fn.points.call(this),n=this._strokeSegments=e.process(t)),n},createVisual:function(){var e=this.series,t=e._defaults,n=e.color;Mt(n)&&t&&(n=t.color),this.visual=new mn.Group({zIndex:e.zIndex}),this.createFill({fill:{color:n,opacity:e.opacity},stroke:null}),this.createStroke({stroke:Dt({color:n,opacity:e.opacity,lineCap:"butt"},e.line)})},createFill:function(t){var n,i,r,o,a,s=this.strokeSegments(),l=s.slice(0),c=this.prevSegment;this.isStacked&&c&&(n=c.strokeSegments(),i=ln(n).anchor(),l.push(new mn.Segment(i,i,ln(s).anchor())),r=e.map(n,function(e){return new mn.Segment(e.anchor(),e.controlOut(),e.controlIn())}).reverse(),an(l,r),o=l[0].anchor(),l.push(new mn.Segment(o,o,ln(r).anchor()))),(a=new mn.Path(t)).segments.push.apply(a.segments,l),this.closeFill(a),this.visual.append(a)},closeFill:function(e){var t=this,n=t.parent,i=t.prevSegment,r=n.plotArea,o=n.options.invertAxes,a=n.seriesValueAxis(t.series).lineBox(),s=r.seriesCategoryAxis(t.series).lineBox(),l=o?s.x1:s.y1,c=o?ar:sr,u=t.strokeSegments(),d=u[0].anchor(),h=ln(u).anchor();l=cn(l,a[c+1],a[c+2]),n.options.isStacked&&i||!(u.length>1)||(o?e.lineTo(l,h.y).lineTo(l,d.y):e.lineTo(h.x,l).lineTo(d.x,l))},createStroke:function(e){if(e.stroke.width>0){var t=new mn.Path(e);t.segments.push.apply(t.segments,this.strokeSegments()),this.visual.append(t)}}}),Ie=Te.extend({init:function(e,t,n,i){this.stackPoints=t,Te.fn.init.call(this,e,n,i)},_linePoints:Te.fn.points}),Dt(Ie.fn,De),Re=Bt.extend({init:function(e,t){var n=this;Bt.fn.init.call(n,t),n.plotArea=e,n.xAxisRanges={},n.yAxisRanges={},n.points=[],n.seriesPoints=[],n.seriesOptions=[],n._evalSeries=[],n.render()},options:{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0},render:function(){var e=this;e.traverseDataPoints(wt(e.addValue,e))},addErrorBar:function(e,t,n){var i,r=this,o=e.value[t],a=t+"Value",s=t+"ErrorLow",l=t+"ErrorHigh",c=n.seriesIx,u=n.series,d=e.options.errorBars,h=n[s],p=n[l];S(o)&&(S(h)&&S(p)&&(i={low:h,high:p}),d&&sn(d[a])&&(r.seriesErrorRanges=r.seriesErrorRanges||{x:[],y:[]},r.seriesErrorRanges[t][c]=r.seriesErrorRanges[t][c]||new se(d[a],u,t),i=r.seriesErrorRanges[t][c].getErrorRange(o,d[a])),i&&r.addPointErrorBar(i,e,t))},addPointErrorBar:function(e,t,n){var i,r=this,o=e.low,a=e.high,s=t.series,l=n===sr,c=t.options.errorBars,u={};t[n+"Low"]=o,t[n+"High"]=a,t.errorBars=t.errorBars||[],i=new ve(o,a,l,r,s,c),t.errorBars.push(i),t.append(i),u[n]=o,r.updateRange(u,s),u[n]=a,r.updateRange(u,s)},addValue:function(e,t){var n,i=this,r=e.x,o=e.y,a=t.seriesIx,s=this.options.series[a],l=this.seriesMissingValues(s),c=i.seriesPoints[a];j(r)&&j(o)||(e=this.createMissingValue(e,l)),e&&((n=i.createPoint(e,t))&&(bt(n,t),i.addErrorBar(n,ar,t),i.addErrorBar(n,sr,t)),i.updateRange(e,t.series)),i.points.push(n),c.push(n)},seriesMissingValues:function(e){return e.missingValues},createMissingValue:yt,updateRange:function(e,t){var n=this,i=e.x,r=e.y,o=t.xAxis,a=t.yAxis,s=n.xAxisRanges[o],l=n.yAxisRanges[a];j(i)&&(s=n.xAxisRanges[o]=s||{min:pi,max:fi},typeof i===Wi&&(i=d(i)),s.min=_t.min(s.min,i),s.max=_t.max(s.max,i)),j(r)&&(l=n.yAxisRanges[a]=l||{min:pi,max:fi},typeof r===Wi&&(r=d(r)),l.min=_t.min(l.min,r),l.max=_t.max(l.max,r))},evalPointOptions:function(e,t,n){var i=n.series,r=n.seriesIx,o={defaults:i._defaults,excluded:["data","tooltip","tempate","visual","toggle"]},a=this._evalSeries[r];return sn(a)||(this._evalSeries[r]=a=M(e,{},o,!0)),a&&M(e=Dt({},e),{value:t,series:i,dataItem:n.dataItem},o),e},pointType:function(){return _e},pointOptions:function(e,t){var n,i=this.seriesOptions[t];return i||(n=this.pointType().fn.defaults,this.seriesOptions[t]=i=Dt({},n,{markers:{opacity:e.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},e)),i},createPoint:function(e,t){var n,i=t.series,r=this.pointOptions(i,t.seriesIx),o=t.color||i.color;return r=this.evalPointOptions(r,e,t),kt.isFunction(i.color)&&(o=r.color),(n=new _e(e,r)).color=o,this.append(n),n},seriesAxes:function(e){var t=this.plotArea,n=e.xAxis,i=n?t.namedXAxes[n]:t.axisX,r=e.yAxis,o=r?t.namedYAxes[r]:t.axisY;if(!i)throw Error("Unable to locate X axis with name "+n);if(!o)throw Error("Unable to locate Y axis with name "+r);return{x:i,y:o}},reflow:function(e){var t,n,i=this,r=i.points,o=0,a=!i.options.clip;i.traverseDataPoints(function(e,s){t=r[o++];var l,c=(n=i.seriesAxes(s.series)).x.getSlot(e.x,e.x,a),u=n.y.getSlot(e.y,e.y,a);t&&(c&&u?(l=i.pointSlot(c,u),t.reflow(l)):t.visible=!1)}),i.box=e},pointSlot:function(e,t){return new Lt(e.x1,t.y1,e.x2,t.y2)},traverseDataPoints:function(e){var t,n,i,r,o,a,s=this,l=s.options.series,c=s.seriesPoints;for(n=0;l.length>n;n++)for(i=l[n],c[n]||(c[n]=[]),t=0;i.data.length>t;t++)o=(r=this._bindPoint(i,n,t)).valueFields,a=r.fields,e(o,Dt({pointIx:t,series:i,seriesIx:n,dataItem:i.data[t],owner:s},a))},_bindPoint:le.fn._bindPoint,formatPointValue:function(e,t){var n=e.value;return Kt(t,n.x,n.y)},animationPoints:function(){var e,t=this.points,n=[];for(e=0;t.length>e;e++)t[e].marker&&n.push(t[e].marker);return n}}),Dt(Re.fn,ke),Pe=Re.extend({render:function(){Re.fn.render.call(this),this.renderSegments()},createSegment:function(e,t,n){return new(t.style===Ui?Se:be)(e,t,n)},animationPoints:function(){return Re.fn.animationPoints.call(this).concat(this._segments)},createMissingValue:function(e,t){if(t===cr){var n={x:e.x,y:e.y};return j(n.x)||(n.x=0),j(n.y)||(n.y=0),n}}}),Dt(Pe.fn,we),Le=Re.extend({init:function(e,t){this._maxSize=fi,Re.fn.init.call(this,e,t)},options:{tooltip:{format:"{3}"},labels:{format:"{3}"}},addValue:function(e,t){null!==e.size&&(e.size>0||0>e.size&&t.series.negativeValues.visible)?(this._maxSize=_t.max(this._maxSize,_t.abs(e.size)),Re.fn.addValue.call(this,e,t)):(this.points.push(null),this.seriesPoints[t.seriesIx].push(null))},reflow:function(e){this.updateBubblesSize(e),Re.fn.reflow.call(this,e)},pointType:function(){return ye},createPoint:function(e,t){var n,i,r=t.series,o=r.data.length,a=t.pointIx*(ri/o),s={delay:a,duration:ri-a,type:Tn},l=t.color||r.color;return 0>e.size&&r.negativeValues.visible&&(l=fn(r.negativeValues.color,l)),i=Dt({labels:{animation:{delay:a,duration:ri-a}}},this.pointOptions(r,t.seriesIx),{markers:{type:In,border:r.border,opacity:r.opacity,animation:s}}),i=this.evalPointOptions(i,e,t),kt.isFunction(r.color)&&(l=i.color),i.markers.background=l,(n=new ye(e,i)).color=l,this.append(n),n},updateBubblesSize:function(e){var t,n,i,r,o,a,s,l,c,u,d,h,p=this,f=p.options.series,g=_t.min(e.width(),e.height());for(t=0;f.length>t;t++)for(i=f[t],r=p.seriesPoints[t],o=(i.minSize||_t.max(.02*g,10))/2,a=(i.maxSize||.2*g)/2,s=_t.PI*o*o,l=(_t.PI*a*a-s)/p._maxSize,n=0;r.length>n;n++)(c=r[n])&&(u=_t.abs(c.value.size)*l,d=_t.sqrt((s+u)/_t.PI),h=fn(c.options.zIndex,0)+(1-d/a),Dt(c.options,{zIndex:h,markers:{size:2*d,zIndex:h},labels:{zIndex:h+1}}))},formatPointValue:function(e,t){var n=e.value;return Kt(t,n.x,n.y,n.size,e.category)},createAnimation:yt,createVisual:yt}),Fe=Bt.extend({init:function(e,t){Bt.fn.init.call(this,t),this.value=e},options:{border:{_brightness:.8},line:{width:2},overlay:{gradient:ei},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{4:d}</th><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}},reflow:function(e){var t,n,i,r=this,o=r.options,a=r.owner,s=r.value,l=a.seriesValueAxis(o),c=[];n=l.getSlot(s.open,s.close),i=l.getSlot(s.low,s.high),n.x1=i.x1=e.x1,n.x2=i.x2=e.x2,r.realBody=n,t=i.center().x,c.push([[t,i.y1],[t,n.y1]]),c.push([[t,n.y2],[t,i.y2]]),r.lines=c,r.box=i.clone().wrap(n),r._rendered||(r._rendered=!0,r.createNote()),r.reflowNote()},reflowNote:function(){var e=this;e.note&&e.note.reflow(e.box)},createVisual:function(){Bt.fn.createVisual.call(this),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},mainVisual:function(e){var t=new mn.Group;return this.createBody(t,e),this.createLines(t,e),t},createBody:function(e,t){var n=mn.Path.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:t.opacity},stroke:null});t.border.width>0&&n.options.set("stroke",{color:this.getBorderColor(),width:t.border.width,dashType:t.border.dashType,opacity:fn(t.border.opacity,t.opacity)}),Xt(n),e.append(n),N(t)&&e.append(this.createGradientOverlay(n,{baseColor:this.color},Dt({},t.overlay)))},createLines:function(e,t){this.drawLines(e,t,this.lines,t.line)},drawLines:function(e,t,n,i){var r,o,a;if(n)for(r={stroke:{color:i.color||this.color,opacity:fn(i.opacity,t.opacity),width:i.width,dashType:i.dashType,lineCap:"butt"}},o=0;n.length>o;o++)a=mn.Path.fromPoints(n[o],r),Xt(a),e.append(a)},getBorderColor:function(){var e=this.options.border,t=e.color;return sn(t)||(t=new zt(this.color).brightness(e._brightness).toHex()),t},createOverlay:function(){var e=mn.Path.fromRect(this.box.toRect(),{fill:{color:or,opacity:0},stroke:null});this.visual.append(e)},createHighlight:function(){var e,t=this.options.highlight,n=this.color;return this.color=t.color||this.color,e=this.mainVisual(Dt({},this.options,{line:{color:this.getBorderColor()}},t)),this.color=n,e},highlightVisual:function(){return this._mainVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},tooltipAnchor:function(){var e=this.box,t=this.owner.pane.clipBox()||e;return new Wt(e.x2+5,_t.max(e.y1,t.y1)+5)},formatValue:function(e){return this.owner.formatPointValue(this,e)}}),Dt(Fe.fn,ne),Dt(Fe.fn,ie),Be=le.extend({options:{},reflowCategories:function(e){var t,n=this.children,i=n.length;for(t=0;i>t;t++)n[t].reflow(e[t])},addValue:function(e,t){var n,i,r=this,o=t.categoryIx,a=t.category,s=t.series,l=t.seriesIx,c=r.options,u=e.valueFields,d=r.children,h=A(r.splitValue(u)),p=r.categoryPoints[o],f=s.data[o];p||(r.categoryPoints[o]=p=[]),h&&(n=r.createPoint(e,t)),(i=d[o])||(i=new ee({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing}),r.append(i)),n&&(r.updateRange(u,t),i.append(n),n.categoryIx=o,n.category=a,n.series=s,n.seriesIx=l,n.owner=r,n.dataItem=f,n.noteText=e.fields.noteText),r.points.push(n),p.push(n)},pointType:function(){return Fe},createPoint:function(e,t){var n,i=t.categoryIx,r=t.category,o=t.series,a=t.seriesIx,s=e.valueFields,l=Dt({},o),c=this.pointType(),u=e.fields.color||o.color;return l=this.evalPointOptions(l,s,r,i,o,a),o.type==Dn&&s.open>s.close&&(u=e.fields.downColor||o.downColor||o.color),kt.isFunction(o.color)&&(u=l.color),(n=new c(s,l)).color=u,n},splitValue:function(e){return[e.low,e.open,e.close,e.high]},updateRange:function(e,t){var n=this,i=t.series.axis,r=n.valueAxisRanges[i],o=n.splitValue(e);r=n.valueAxisRanges[i]=r||{min:pi,max:fi},r=n.valueAxisRanges[i]={min:_t.min.apply(_t,o.concat([r.min])),max:_t.max.apply(_t,o.concat([r.max]))}},formatPointValue:function(e,t){var n=e.value;return Kt(t,n.open,n.high,n.low,n.close,e.category)},animationPoints:function(){return this.points}}),Dt(Be.fn,ke),ze=Fe.extend({reflow:function(e){var t,n,i,r,o=this,a=o.options,s=o.owner,l=o.value,c=s.seriesValueAxis(a),u=[],d=[],h=[];r=c.getSlot(l.low,l.high),n=c.getSlot(l.open,l.open),i=c.getSlot(l.close,l.close),n.x1=i.x1=r.x1=e.x1,n.x2=i.x2=r.x2=e.x2,t=r.center().x,u.push([n.x1,n.y1]),u.push([t,n.y1]),d.push([t,i.y1]),d.push([i.x2,i.y1]),h.push([t,r.y1]),h.push([t,r.y2]),o.lines=[u,d,h],o.box=r.clone().wrap(n.clone().wrap(i)),o.reflowNote()},createBody:e.noop}),He=Be.extend({pointType:function(){return ze}}),Ne=Be.extend({addValue:function(e,t){var n,i,r=this,o=t.categoryIx,a=t.category,s=t.series,l=t.seriesIx,c=r.options,u=r.children,d=e.valueFields,h=A(r.splitValue(d)),p=r.categoryPoints[o],f=s.data[o];p||(r.categoryPoints[o]=p=[]),h&&(n=r.createPoint(e,t)),(i=u[o])||(i=new ee({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing}),r.append(i)),n&&(r.updateRange(d,t),i.append(n),n.categoryIx=o,n.category=a,n.series=s,n.seriesIx=l,n.owner=r,n.dataItem=f),r.points.push(n),p.push(n)},pointType:function(){return Oe},splitValue:function(e){return[e.lower,e.q1,e.median,e.q3,e.upper]},updateRange:function(e,t){var n=this,i=t.series.axis,r=n.valueAxisRanges[i],o=n.splitValue(e).concat(n.filterOutliers(e.outliers));sn(e.mean)&&(o=o.concat(e.mean)),r=n.valueAxisRanges[i]=r||{min:pi,max:fi},r=n.valueAxisRanges[i]={min:_t.min.apply(_t,o.concat([r.min])),max:_t.max.apply(_t,o.concat([r.max]))}},formatPointValue:function(e,t){var n=e.value;return Kt(t,n.lower,n.q1,n.median,n.q3,n.upper,n.mean,e.category)},filterOutliers:function(e){var t,n,i=(e||[]).length,r=[];for(t=0;i>t;t++)n=e[t],sn(n)&&C(r,n);return r}}),Oe=Fe.extend({init:function(e,t){var n=this;Bt.fn.init.call(n,t),n.value=e,n.createNote()},options:{border:{_brightness:.8},line:{width:2},mean:{width:2,dashType:"dash"},overlay:{gradient:ei},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{6:d}</th><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:"cross",background:or,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:In,background:or,border:{width:2,opacity:1},opacity:0}},reflow:function(e){var t,n,i,r,o,a=this,s=a.options,l=a.owner,c=a.value,u=l.seriesValueAxis(s);i=u.getSlot(c.q1,c.q3),a.boxSlot=i,n=u.getSlot(c.lower,c.upper),r=u.getSlot(c.median),i.x1=n.x1=e.x1,i.x2=n.x2=e.x2,a.realBody=i,c.mean&&(o=u.getSlot(c.mean),a.meanPoints=[[[e.x1,o.y1],[e.x2,o.y1]]]),t=n.center().x,a.whiskerPoints=[[[t-5,n.y1],[t+5,n.y1],[t,n.y1],[t,i.y1]],[[t-5,n.y2],[t+5,n.y2],[t,n.y2],[t,i.y2]]],a.medianPoints=[[[e.x1,r.y1],[e.x2,r.y1]]],a.box=n.clone().wrap(i),a.reflowNote()},renderOutliers:function(e){var t,n,i,r,o=this,a=e.markers||{},s=o.value,l=s.outliers||[],c=(o.owner.seriesValueAxis(e),3*_t.abs(s.q3-s.q1)),u=[];for(r=0;l.length>r;r++)i=l[r],a=s.q3+c>i&&i>s.q1-c?e.outliers:e.extremes,t=Dt({},a.border),sn(t.color)||(t.color=sn(o.color)?o.color:new zt(a.background).brightness(.8).toHex()),(n=new Gt({type:a.type,width:a.size,height:a.size,rotation:a.rotation,background:a.background,border:t,opacity:a.opacity})).value=i,u.push(n);return this.reflowOutliers(u),u},reflowOutliers:function(e){var t,n,i,r=this.owner.seriesValueAxis(this.options),o=this.box.center().x;for(t=0;e.length>t;t++)n=e[t].value,i=r.getSlot(n).move(o),this.box=this.box.wrap(i),e[t].reflow(i)},mainVisual:function(e){var t,n,i=Fe.fn.mainVisual.call(this,e),r=this.renderOutliers(e);for(t=0;r.length>t;t++)(n=r[t].getElement())&&i.append(n);return i},createLines:function(e,t){this.drawLines(e,t,this.whiskerPoints,t.line),this.drawLines(e,t,this.medianPoints,t.median),this.drawLines(e,t,this.meanPoints,t.mean)},getBorderColor:function(){return this.color?this.color:Fe.getBorderColor.call(this)}}),Dt(Oe.fn,ne),Ve=Bt.extend({init:function(e,t,n){var i=this;i.value=e,i.sector=t,Bt.fn.init.call(i,n)},options:{color:or,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:Vn,margin:Jt(.5),align:In,zIndex:1,position:Si},animation:{type:Di},highlight:{visible:!0,border:{width:1}},visible:!0},render:function(){var e=this,t=e.options.labels,n=e.value;e._rendered||!1===e.visible||(e._rendered=!0,t.template?n=Et(t.template)({dataItem:e.dataItem,category:e.category,value:e.value,series:e.series,percentage:e.percentage}):t.format&&(n=Kt(t.format,n)),t.visible&&n&&(e.label=new Yt(n,Dt({},t,{align:Mn,vAlign:"",animation:{type:Kn,delay:e.animationDelay}})),e.append(e.label)))},reflow:function(e){var t=this;t.render(),t.box=e,t.reflowLabel()},reflowLabel:function(){var e,t,n,i,r=this,o=r.sector.clone(),a=r.options,s=r.label,l=a.labels,c=l.distance,u=o.middle();s&&(i=s.box.height(),n=s.box.width(),l.position==Mn?(o.r=_t.abs((o.r-i)/2)+i,e=o.point(u),s.reflow(Lt(e.x,e.y-i/2,e.x,e.y))):l.position==oi?(o.r=o.r-i/2,e=o.point(u),s.reflow(Lt(e.x,e.y-i/2,e.x,e.y))):((e=o.clone().expand(c).point(u)).x>=o.c.x?(t=e.x+n,s.orientation=Ii):(t=e.x-n,s.orientation=si),s.reflow(Lt(t,e.y-i,e.x,e.y))))},createVisual:function(){var e,t=this,n=t.sector,i=t.options,r=i.border||{},o=r.width>0?{stroke:{color:r.color,width:r.width,opacity:r.opacity,dashType:r.dashType}}:{},a=i.color,s={color:a,opacity:i.opacity};Bt.fn.createVisual.call(this),t.value&&(e=t.createSegment(n,Dt({fill:s,stroke:{opacity:i.opacity},zIndex:i.zIndex},o)),this.visual.append(e),N(i)&&this.visual.append(this.createGradientOverlay(e,{baseColor:a,fallbackFill:s},Dt({center:[n.c.x,n.c.y],innerRadius:n.ir,radius:n.r,userSpace:!0},i.overlay))))},createSegment:function(e,t){return t.singleSegment?new mn.Circle(new gn.Circle(new gn.Point(e.c.x,e.c.y),e.r),t):$t.current.createRing(e,t)},createAnimation:function(){var e=this.options,t=this.sector.c;Dt(e,{animation:{center:[t.x,t.y],delay:this.animationDelay}}),Bt.fn.createAnimation.call(this)},createHighlight:function(e){var t=this,n=t.options.highlight||{},i=n.border||{};return t.createSegment(t.sector,Dt({},e,{fill:{color:n.color,opacity:n.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var e=this.sector;return{options:this.options,radius:e.r,innerRadius:e.ir,center:new gn.Point(e.c.x,e.c.y),startAngle:e.startAngle,endAngle:e.angle+e.startAngle,visual:this.visual}},tooltipAnchor:function(e,t){var n=this.sector.adjacentBox(5,e,t);return new Wt(n.x1,n.y1)},formatValue:function(e){return this.owner.formatPointValue(this,e)}}),Dt(Ve.fn,ne),Ue={createLegendItem:function(e,t,n){var i,r,o,a,s,l=this.options.legend||{},c=l.labels||{},u=l.inactiveItems||{},d=u.labels||{};n&&!1!==n.visibleInLegend&&(s=!1!==n.visible,i=n.category||"",(r=s?c.template:d.template||c.template)&&(i=Et(r)({text:i,series:n.series,dataItem:n.dataItem,percentage:n.percentage,value:e})),s?(a={},o=t.color):(a={color:d.color,font:d.font},o=(u.markers||{}).color),i&&this.legendItems.push({pointIndex:n.index,text:i,series:n.series,markerColor:o,labels:a}))}},We=Bt.extend({init:function(e,t){var n=this;Bt.fn.init.call(n,t),n.plotArea=e,n.points=[],n.legendItems=[],n.render()},options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4},inactiveItems:{markers:{},labels:{}}},render:function(){var e=this;e.traverseDataPoints(wt(e.addValue,e))},traverseDataPoints:function(e){var t,n,i,r,o,a,s,l,c,u,d,h,p,f=this,g=f.options,m=f.plotArea.options.seriesColors||[],v=m.length,_=g.series,y=_.length,b=0;for(r=0;y>r;r++){for(a=(t=_[r]).data,s=360/(d=H(t)),h=sn(t.startAngle)?t.startAngle:g.startAngle,r!=y-1&&t.labels.position==Si&&(t.labels.position=Mn),p=0;a.length>p;p++)l=(n=G.current.bindPoint(t,p)).valueFields.value,c=_t.abs(l),i=n.fields,o=c*s,u=1!=a.length&&!!i.explode,Mt(t.color)||(t.color=i.color||m[p%v]),e(l,new qt(null,0,0,h,o),{owner:f,category:i.category||"",index:b,series:t,seriesIx:r,dataItem:a[p],percentage:0!==d?c/d:0,explode:u,visibleInLegend:i.visibleInLegend,visible:i.visible,zIndex:y-r,animationDelay:f.animationDelay(p,r,y)}),!1!==n.fields.visible&&(h+=o),b++;b=0}},evalSegmentOptions:function(e,t,n){var i=n.series;M(e,{value:t,series:i,dataItem:n.dataItem,category:n.category,percentage:n.percentage},{defaults:i._defaults,excluded:["data","template","visual","toggle"]})},addValue:function(e,t,n){var i,r=this,o=Dt({},n.series,{index:n.index});r.evalSegmentOptions(o,e,n),r.createLegendItem(e,o,n),!1!==n.visible&&(i=new Ve(e,t,o),bt(i,n),r.append(i),r.points.push(i))},reflow:function(e){var t,n,i,r,o,a,s,l,c=this,u=c.options,d=e.clone(),h=_t.min(d.width(),d.height()),p=h/2,f=h-.85*h,g=fn(u.padding,f),m=Lt(d.x1,d.y1,d.x1+h,d.y1+h),v=m.center(),_=c.seriesConfigs||[],y=d.center(),b=c.points,w=b.length,k=u.series.length,x=[],C=[];for(g=g>p-5?p-5:g,m.translate(y.x-v.x,y.y-v.y),l=Wt((a=p-g)+m.x1+g,a+m.y1+g),s=0;w>s;s++)(o=(r=b[s]).sector).r=a,o.c=l,n=r.seriesIx,_.length&&(t=_[n],o.ir=t.ir,o.r=t.r),n==k-1&&r.explode&&(o.c=o.clone().radius(.15*o.r).point(o.middle())),r.reflow(m),(i=r.label)&&i.options.position===Si&&n==k-1&&(i.orientation===Ii?C.push(i):x.push(i));x.length>0&&(x.sort(c.labelComparator(!0)),c.leftLabelsReflow(x)),C.length>0&&(C.sort(c.labelComparator(!1)),c.rightLabelsReflow(C)),c.box=m},leftLabelsReflow:function(e){var t=this.distanceBetweenLabels(e);this.distributeLabels(t,e)},rightLabelsReflow:function(e){var t=this.distanceBetweenLabels(e);this.distributeLabels(t,e)},distanceBetweenLabels:function(e){var t,n,i,r=this.points,o=r[r.length-1],a=o.sector,s=e[0].box,l=e.length-1,c=a.r+o.options.labels.distance,u=[];for(n=rn(s.y1-(a.c.y-c-s.height()-s.height()/2)),u.push(n),i=0;l>i;i++)s=e[i].box,t=e[i+1].box,n=rn(t.y1-s.y2),u.push(n);return n=rn(a.c.y+c-e[l].box.y2-e[l].box.height()/2),u.push(n),u},distributeLabels:function(e,t){var n,i,r,o,a=this,s=e.length;for(o=0;s>o;o++)for(i=r=o,n=-e[o];n>0&&(i>=0||s>r);)n=a._takeDistance(e,o,--i,n),n=a._takeDistance(e,o,++r,n);a.reflowLabels(e,t)},_takeDistance:function(e,t,n,i){if(e[n]>0){var r=_t.min(e[n],i);i-=r,e[n]-=r,e[t]+=r}return i},reflowLabels:function(e,t){var n,i,r,o,a=this.points,s=a[a.length-1],l=s.sector,c=t.length,u=s.options.labels,d=u.distance,h=l.c.y-(l.r+d)-t[0].box.height();for(e[0]+=2,o=0;c>o;o++)n=t[o],h+=e[o],r=n.box,i=this.hAlignLabel(r.x2,l.clone().expand(d),h,h+r.height(),n.orientation==Ii),n.orientation==Ii?(u.align!==In&&(i=l.r+l.c.x+d),n.reflow(Lt(i+r.width(),h,i,h))):(u.align!==In&&(i=l.c.x-l.r-d),n.reflow(Lt(i-r.width(),h,i,h))),h+=r.height()},createVisual:function(){var e,t,n,r,o,a,s,l,c,u,d,h,p,f=this,g=f.options.connectors,m=f.points,v=m.length;for(Bt.fn.createVisual.call(this),this._connectorLines=[],a=0;v>a;a++)n=(t=(r=m[a]).sector).middle(),o=r.label,r.seriesIx,o&&(e=new mn.Path({stroke:{color:g.color,width:g.width},animation:{type:Kn,delay:r.animationDelay}}),o.options.position===Si&&0!==r.value&&(s=o.box,l=t.c,c=t.point(n),u=Wt(s.x1,s.center().y),c=t.clone().expand(g.padding).point(n),e.moveTo(c.x,c.y),o.orientation==Ii?(p=i(l,c,u,h=Wt(s.x1-g.padding,s.center().y)),u=Wt(h.x-4,h.y),(p=p||u).x=_t.min(p.x,u.x),f.pointInCircle(p,t.c,t.r+4)||t.c.x>p.x?(d=t.c.x+t.r+4,r.options.labels.align!==Ln?u.x>d?e.lineTo(d,c.y):e.lineTo(c.x+8,c.y):e.lineTo(d,c.y),e.lineTo(u.x,h.y)):(p.y=h.y,e.lineTo(p.x,p.y))):(p=i(l,c,u,h=Wt(s.x2+g.padding,s.center().y)),u=Wt(h.x+4,h.y),(p=p||u).x=_t.max(p.x,u.x),f.pointInCircle(p,t.c,t.r+4)||p.x>t.c.x?(d=t.c.x-t.r-4,r.options.labels.align!==Ln?d>u.x?e.lineTo(d,c.y):e.lineTo(c.x-8,c.y):e.lineTo(d,c.y),e.lineTo(u.x,h.y)):(p.y=h.y,e.lineTo(p.x,p.y))),e.lineTo(h.x,h.y),this._connectorLines.push(e),this.visual.append(e)))},labelComparator:function(e){return e=e?-1:1,function(t,n){return((t=(t.parent.sector.middle()+270)%360)-(n=(n.parent.sector.middle()+270)%360))*e}},hAlignLabel:function(e,t,n,i,r){var o=t.c.x,a=t.c.y,s=t.r,l=_t.min(_t.abs(a-n),_t.abs(a-i));return l>s?e:o+_t.sqrt(s*s-l*l)*(r?1:-1)},pointInCircle:function(e,t,n){return l(t.x-e.x)+l(t.y-e.y)<l(n)},formatPointValue:function(e,t){return Kt(t,e.value)},animationDelay:function(e){return 70*e}}),Dt(We.fn,Ue),je=Ve.extend({options:{overlay:{gradient:"roundedGlass"},labels:{position:Mn},animation:{type:Di}},reflowLabel:function(){var e,t,n=this,i=n.sector.clone(),r=n.options,o=n.label,a=r.labels,s=i.middle();o&&(t=o.box.height(),a.position==Mn?(i.r-=(i.r-i.ir)/2,e=i.point(s),o.reflow(new Lt(e.x,e.y-t/2,e.x,e.y))):Ve.fn.reflowLabel.call(n))},createSegment:function(e,t){return $t.current.createRing(e,t)}}),Dt(je.fn,ne),qe=We.extend({options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4}},addValue:function(e,t,n){var i,r=this,o=Dt({},n.series,{index:n.index});r.evalSegmentOptions(o,e,n),r.createLegendItem(e,o,n),e&&!1!==n.visible&&(i=new je(e,t,o),bt(i,n),r.append(i),r.points.push(i))},reflow:function(e){var t,n,i,r,o,a=this,s=a.options,l=e.clone(),c=_t.min(l.width(),l.height()),u=c/2,d=c-.85*c,h=fn(s.padding,d),p=s.series,f=p.length,g=0,m=0,v=0;for(a.seriesConfigs=[],i=u-(h=h>u-5?u-5:h),r=0;f>r;r++)t=p[r],0===r&&sn(t.holeSize)&&(n=t.holeSize,i-=t.holeSize),sn(t.size)?i-=t.size:g++,sn(t.margin)&&r!=f-1&&(i-=t.margin);for(sn(n)||(i-=n=(u-h)/(f+.75)*.75),v=n,r=0;f>r;r++)t=p[r],o=(v+=m)+fn(t.size,i/g),a.seriesConfigs.push({ir:v,r:o}),m=t.margin||0,v=o;We.fn.reflow.call(a,e)},animationDelay:function(e,t,n){return 50*e+ri*(t+1)/(n+1)}}),Ge=ce.extend({render:function(){ce.fn.render.call(this),this.createSegments()},traverseDataPoints:function(e){var t,n,i,r,o,a,l,c,u,d,h=this.options.series,p=this.categoryAxis.options.categories||[],f=s(h),g=!this.options.invertAxes;for(t=0;h.length>t;t++)for(n=h[t],i=0,r=0,o=0;f>o;o++)l=(a=G.current.bindPoint(n,o)).valueFields.value,u=i,(c=a.fields.summary)?"total"===c.toLowerCase()?(a.valueFields.value=i,u=0,d=i):(a.valueFields.value=r,d=u-r,r=0):S(l)&&(r+=l,d=i+=l),e(a,{category:p[o],categoryIx:o,series:n,seriesIx:t,total:i,runningTotal:r,from:u,to:d,isVertical:g})},updateRange:function(e,t){ce.fn.updateRange.call(this,{value:t.to},t)},aboveAxis:function(e){return e.value>=0},plotRange:function(e){return[e.from,e.to]},createSegments:function(){var e,t,n,i,r,o,a,s=this.options.series,l=this.seriesPoints,c=this.segments=[];for(e=0;s.length>e;e++)if(t=s[e],n=l[e])for(r=0;n.length>r;r++)(o=n[r])&&i&&(a=new $e(i,o,t),c.push(a),this.append(a)),i=o}}),$e=Bt.extend({init:function(e,t,n){var i=this;Bt.fn.init.call(i),i.from=e,i.to=t,i.series=n},options:{animation:{type:Kn,delay:ri}},linePoints:function(){var e,t,n=[],i=this.from,r=i.box,o=this.to.box;return i.isVertical?(e=i.aboveAxis?r.y1:r.y2,n.push([r.x1,e],[o.x2,e])):(t=i.aboveAxis?r.x2:r.x1,n.push([t,r.y1],[t,o.y2])),n},createVisual:function(){var e,t;Bt.fn.createVisual.call(this),this.options,e=this.series.line||{},t=mn.Path.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}}),Xt(t),this.visual.append(t)}}),Ye=Ft.extend({init:function(e){var t=this;Ft.fn.init.call(t,e),e=t.options,t.id=kt.guid(),t.createTitle(),t.content=new Bt,t.chartContainer=new Qe({},t),t.append(t.content),t.axes=[],t.charts=[]},options:{zIndex:-1,shrinkToFit:!0,title:{align:si},visible:!0},createTitle:function(){var e=this,t=e.options.title;typeof t===Ci&&(t=Dt({},t,{align:t.position,position:Zi})),e.title=Qt.buildTitle(t,e,Ye.fn.options.title)},appendAxis:function(e){var t=this;t.content.append(e),t.axes.push(e),e.pane=t},appendChart:function(e){var t=this;t.chartContainer.parent!==t.content&&t.content.append(t.chartContainer),t.charts.push(e),t.chartContainer.append(e),e.pane=t},empty:function(){var e,t=this,n=t.parent;if(n){for(e=0;t.axes.length>e;e++)n.removeAxis(t.axes[e]);for(e=0;t.charts.length>e;e++)n.removeChart(t.charts[e])}t.axes=[],t.charts=[],t.content.destroy(),t.content.children=[],t.chartContainer.children=[]},reflow:function(e){var t,n=this;ln(n.children)===n.content&&(t=n.children.pop()),Ft.fn.reflow.call(n,e),t&&n.children.push(t),n.title&&(n.contentBox.y1+=n.title.box.height())},visualStyle:function(){var e=Ft.fn.visualStyle.call(this);return e.zIndex=-10,e},renderComplete:function(){this.options.visible&&this.createGridLines()},stackRoot:O,clipRoot:O,createGridLines:function(){var e,t,n,i,r,o,a=this.axes,s=a.concat(this.parent.axes),l=[],c=[];for(t=0;a.length>t;t++)for(e=(r=(i=a[t]).options.vertical)?l:c,n=0;s.length>n;n++)0===e.length&&r!==(o=s[n]).options.vertical&&an(e,i.createGridLines(o))},refresh:function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=e.proxy(this.createGradient,this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete()},clipBox:function(){return this.chartContainer.clipBox}}),Qe=Bt.extend({init:function(e,t){Bt.fn.init.call(this,e),this.pane=t},shouldClip:function(){var e,t=this.children,n=t.length;for(e=0;n>e;e++)if(!0===t[e].options.clip)return!0;return!1},_clipBox:function(){var e,t,n,i,r=this.pane,o=r.axes,a=o.length,s=r.box.clone();for(t=0;a>t;t++)e=(i=o[t]).options.vertical?sr:ar,n=i.lineBox(),s[e+1]=n[e+1],s[e+2]=n[e+2];return s},createVisual:function(){var e,t;this.visual=new mn.Group({zIndex:0}),this.shouldClip()&&(e=(this.clipBox=this._clipBox()).toRect(),t=mn.Path.fromRect(e),this.visual.clip(t),this.unclipLabels())},stackRoot:O,unclipLabels:function(){var e,t,n,i,r,o=this.children,a=this.clipBox;for(n=0;o.length>n;n++)for(r=(e=o[n].points||{}).length,i=0;r>i;i++)(t=e[i])&&t.label&&t.label.options.visible&&t.box.overlaps(a)&&(t.label.alignToClipBox&&t.label.alignToClipBox(a),t.label.options.noclip=!0)},destroy:function(){Bt.fn.destroy.call(this),delete this.parent}}),Xe=Bt.extend({init:function(e,t){var n=this;Bt.fn.init.call(n,t),n.series=e,n.initSeries(),n.charts=[],n.options.legend.items=[],n.axes=[],n.crosshairs=[],n.createPanes(),n.render(),n.createCrosshairs()},options:{series:[],plotArea:{margin:{}},background:"",border:{color:kn,width:0},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}},initSeries:function(){var e,t=this.series;for(e=0;t.length>e;e++)t[e].index=e},createPanes:function(){var e,t,n=this,i=[],r=n.options.panes||[],o=_t.max(r.length,1);for(e=0;o>e;e++)(t=new Ye(r[e])).paneIndex=e,i.push(t),n.append(t);n.panes=i},createCrosshairs:function(e){var t,n,i,r,o;for(e=e||this.panes,t=0;e.length>t;t++)for(i=e[t],n=0;i.axes.length>n;n++)(r=i.axes[n]).options.crosshair&&r.options.crosshair.visible&&(o=new lt(r,r.options.crosshair),this.crosshairs.push(o),i.content.append(o))},removeCrosshairs:function(e){var t,n,i=this.crosshairs,r=e.axes;for(t=i.length-1;t>=0;t--)for(n=0;r.length>n;n++)if(i[t].axis===r[n]){i.splice(t,1);break}},hideCrosshairs:function(){var e,t=this.crosshairs;for(e=0;t.length>e;e++)t[e].hide()},findPane:function(e){var t,n,i=this.panes;for(t=0;i.length>t;t++)if(i[t].options.name===e){n=i[t];break}return n||i[0]},findPointPane:function(e){var t,n,i=this.panes;for(t=0;i.length>t;t++)if(i[t].box.containsPoint(e)){n=i[t];break}return n},appendAxis:function(e){var t=this;t.findPane(e.options.pane).appendAxis(e),t.axes.push(e),e.plotArea=t},removeAxis:function(e){var t,n,i=this,r=[];for(t=0;i.axes.length>t;t++)e!==(n=i.axes[t])?r.push(n):n.destroy();i.axes=r},appendChart:function(e,t){this.charts.push(e),t?t.appendChart(e):this.append(e)},removeChart:function(e){var t,n,i=this,r=[];for(t=0;i.charts.length>t;t++)(n=i.charts[t])!==e?r.push(n):n.destroy();i.charts=r},addToLegend:function(e){var t,n,i,r,o,a,s,l,c,u=e.length,d=[],h=this.options.legend,p=h.labels||{},f=h.inactiveItems||{},g=f.labels||{};for(t=0;u>t;t++)l=!1!==(n=e[t]).visible,!1!==n.visibleInLegend&&(i=n.name||"",(c=l?p.template:g.template||p.template)&&(i=Et(c)({text:i,series:n})),r=n.color,s=n._defaults,Mt(r)&&s&&(r=s.color),l?(o={},a=r):(o={color:g.color,font:g.font},a=f.markers.color),i&&d.push({text:i,labels:o,markerColor:a,series:n,active:l}));an(h.items,d)},groupAxes:function(e){var t,n,i,r,o=[],a=[];for(i=0;e.length>i;i++)for(t=e[i].axes,r=0;t.length>r;r++)(n=t[r]).options.vertical?a.push(n):o.push(n);return{x:o,y:a,any:o.concat(a)}},groupSeriesByPane:function(){var e,t,n,i=this.series,r={};for(e=0;i.length>e;e++)n=i[e],r[t=this.seriesPaneName(n)]?r[t].push(n):r[t]=[n];return r},filterVisibleSeries:function(e){var t,n,i=[];for(t=0;e.length>t;t++)!1!==(n=e[t]).visible&&i.push(n);return i},reflow:function(e){var t=this,n=t.options.plotArea,i=t.panes,r=Jt(n.margin);t.box=e.clone().unpad(r),t.reflowPanes(),t.reflowAxes(i),t.reflowCharts(i)},redraw:function(e){var t,n=this;for(e=[].concat(e),this.initSeries(),t=0;e.length>t;t++)n.removeCrosshairs(e[t]),e[t].empty();for(n.render(e),n.reflowAxes(n.panes),n.reflowCharts(e),n.createCrosshairs(e),t=0;e.length>t;t++)e[t].refresh()},axisCrossingValues:function(e,t){var n,i=e.options,r=[].concat(i.axisCrossingValues||i.axisCrossingValue),o=t.length-r.length,a=r[0]||0;for(n=0;o>n;n++)r.push(a);return r},alignAxisTo:function(e,t,n,i){var r=e.getSlot(n,n,!0),o=e.options.reverse?2:1,a=t.getSlot(i,i,!0),s=t.options.reverse?2:1,l=e.box.translate(a[ar+s]-r[ar+o],a[sr+s]-r[sr+o]);e.pane!==t.pane&&l.translate(0,e.pane.box.y1-t.pane.box.y1),e.reflow(l)},alignAxes:function(e,t){var n,i,r,o=this,a=e[0],s=t[0],l=o.axisCrossingValues(a,t),c=o.axisCrossingValues(s,e),u={},d={},h={},p={};for(r=0;t.length>r;r++)n=(i=t[r]).pane.id,o.alignAxisTo(i,a,c[r],l[r]),i.options._overlap||(rn(i.lineBox().x1)===rn(a.lineBox().x1)&&(u[n]&&i.reflow(i.box.alignTo(u[n].box,si).translate(-i.options.margin,0)),u[n]=i),rn(i.lineBox().x2)===rn(a.lineBox().x2)&&(i._mirrored||(i.options.labels.mirror=!i.options.labels.mirror,i._mirrored=!0),o.alignAxisTo(i,a,c[r],l[r]),d[n]&&i.reflow(i.box.alignTo(d[n].box,Ii).translate(i.options.margin,0)),d[n]=i),0!==r&&s.pane===i.pane&&(i.alignTo(s),i.reflow(i.box)));for(r=0;e.length>r;r++)n=(i=e[r]).pane.id,o.alignAxisTo(i,s,l[r],c[r]),i.options._overlap||(rn(i.lineBox().y1)===rn(s.lineBox().y1)&&(i._mirrored||(i.options.labels.mirror=!i.options.labels.mirror,i._mirrored=!0),o.alignAxisTo(i,s,l[r],c[r]),h[n]&&i.reflow(i.box.alignTo(h[n].box,Zi).translate(0,-i.options.margin)),h[n]=i),rn(i.lineBox().y2,Fn)===rn(s.lineBox().y2,Fn)&&(p[n]&&i.reflow(i.box.alignTo(p[n].box,xn).translate(0,i.options.margin)),p[n]=i),0!==r&&(i.alignTo(a),i.reflow(i.box)))},shrinkAxisWidth:function(e){var t,n,i,r=this.groupAxes(e).any,o=w(r),a=0;for(t=0;e.length>t;t++)(n=e[t]).axes.length>0&&(a=_t.max(a,o.width()-n.contentBox.width()));if(0!==a)for(t=0;r.length>t;t++)(i=r[t]).options.vertical||i.reflow(i.box.shrink(a,0))},shrinkAxisHeight:function(e){var t,n,i,r,o,a,s;for(t=0;e.length>t;t++)if(i=(n=e[t]).axes,0!==(r=_t.max(0,w(i).height()-n.contentBox.height()))){for(o=0;i.length>o;o++)(a=i[o]).options.vertical&&a.reflow(a.box.shrink(0,r));s=!0}return s},fitAxes:function(e){var t,n,i,r,o,a,s,l,c=this.groupAxes(e).any,u=0;for(s=0;e.length>s;s++)if(t=(o=e[s]).axes,n=o.contentBox,t.length>0)for(i=w(t),u=_t.max(u,n.x1-i.x1),r=_t.max(n.y1-i.y1,n.y2-i.y2),l=0;t.length>l;l++)(a=t[l]).reflow(a.box.translate(0,r));for(s=0;c.length>s;s++)(a=c[s]).reflow(a.box.translate(u,0))},reflowAxes:function(e){var t,n=this,i=n.groupAxes(e);for(t=0;e.length>t;t++)n.reflowPaneAxes(e[t]);i.x.length>0&&i.y.length>0&&(n.alignAxes(i.x,i.y),n.shrinkAxisWidth(e),n.autoRotateAxisLabels(i),n.alignAxes(i.x,i.y),n.shrinkAxisWidth(e)&&n.alignAxes(i.x,i.y),n.shrinkAxisHeight(e),n.alignAxes(i.x,i.y),n.shrinkAxisHeight(e)&&n.alignAxes(i.x,i.y),n.fitAxes(e))},autoRotateAxisLabels:function(e){var t,n,i=this.axes,r=this.panes;for(t=0;i.length>t;t++)i[t].autoRotateLabels()&&(n=!0);if(n){for(t=0;r.length>t;t++)this.reflowPaneAxes(r[t]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(r))}},reflowPaneAxes:function(e){var t,n=e.axes,i=n.length;if(i>0)for(t=0;i>t;t++)n[t].reflow(e.contentBox)},reflowCharts:function(e){var t,n,i=this.charts,r=i.length,o=this.box;for(n=0;r>n;n++)(!(t=i[n].pane)||en(t,e))&&i[n].reflow(o)},reflowPanes:function(){var e,t,n,i,r,o=this.box,a=this.panes,s=a.length,l=o.height(),c=0,u=o.y1;for(e=0;s>e;e++)i=(t=a[e]).options.height,t.options.width=o.width(),t.options.height?(i.indexOf&&i.indexOf("%")&&(r=parseInt(i,10)/100,t.options.height=r*o.height()),t.reflow(o.clone()),l-=t.options.height):c++;for(e=0;s>e;e++)(t=a[e]).options.height||(t.options.height=l/c);for(e=0;s>e;e++)t=a[e],n=o.clone().move(o.x1,u),t.reflow(n),u+=t.options.height},backgroundBox:function(){var e,t,n,i,r,o,a=this.axes,s=a.length;for(n=0;s>n;n++)for(r=a[n],i=0;s>i;i++)o=a[i],r.options.vertical!==o.options.vertical&&(e=r.lineBox().clone().wrap(o.lineBox()),t=t?t.wrap(e):e);return t||this.box},createVisual:function(){var e,t,n,i,r,o;Bt.fn.createVisual.call(this),e=this.backgroundBox(),n=(t=this.options.plotArea).border||{},i=t.background,r=t.opacity,on.isTransparent(i)&&(i=or,r=0),o=this._bgVisual=mn.Path.fromRect(e.toRect(),{fill:{color:i,opacity:r},stroke:{color:n.width?n.color:"",width:n.width,dashType:n.dashType},zIndex:-1}),this.appendVisual(o)},pointsByCategoryIndex:function(e){var t,n,i,r,o=this.charts,a=[];if(null!==e)for(t=0;o.length>t;t++)if("_navigator"!==o[t].pane.options.name&&(i=o[t].categoryPoints[e])&&i.length)for(n=0;i.length>n;n++)(r=i[n])&&sn(r.value)&&null!==r.value&&a.push(r);return a},pointsBySeriesIndex:function(e){var t,n,i,r,o=this.charts,a=[];for(i=0;o.length>i;i++)for(t=o[i].points,r=0;t.length>r;r++)(n=t[r])&&n.options.index===e&&a.push(n);return a},pointsBySeriesName:function(e){var t,n,i,r,o=this.charts,a=[];for(i=0;o.length>i;i++)for(t=o[i].points,r=0;t.length>r;r++)(n=t[r])&&n.series.name===e&&a.push(n);return a},paneByPoint:function(e){var t,n,i=this.panes;for(n=0;i.length>n;n++)if((t=i[n]).box.containsPoint(e))return t}}),Ke=Xe.extend({init:function(e,t){var n,i,r=this;if(r.namedCategoryAxes={},r.namedValueAxes={},r.valueAxisRangeTracker=new Ze,e.length>0)for(r.invertAxes=en(e[0].type,[wn,Sn,nr,er,Mi,ni]),n=0;e.length>n;n++)if((i=e[n].stack)&&"100%"===i.type){r.stack100=!0;break}Xe.fn.init.call(r,e,t)},options:{categoryAxis:{categories:[]},valueAxis:{}},render:function(e){var t=this;e=e||t.panes,t.createCategoryAxes(e),t.aggregateCategories(e),t.createCategoryAxesLabels(e),t.createCharts(e),t.createValueAxes(e)},removeAxis:function(e){var t=this,n=e.options.name;Xe.fn.removeAxis.call(t,e),e instanceof K?delete t.namedCategoryAxes[n]:(t.valueAxisRangeTracker.reset(n),delete t.namedValueAxes[n]),e===t.categoryAxis&&delete t.categoryAxis,e===t.valueAxis&&delete t.valueAxis},createCharts:function(e){var t,n,i,r,o,a,s=this.groupSeriesByPane();for(t=0;e.length>t;t++)if(i=s[(n=e[t]).options.name||"default"]||[],this.addToLegend(i),r=this.filterVisibleSeries(i))for(o=this.groupSeriesByCategoryAxis(r),a=0;o.length>a;a++)this.createChartGroup(o[a],n)},createChartGroup:function(e,t){this.createAreaChart(I(e,[_n,er]),t),this.createBarChart(I(e,[Ln,wn]),t),this.createRangeBarChart(I(e,[Ei,Mi]),t),this.createBulletChart(I(e,[Sn,tr]),t),this.createCandlestickChart(I(e,Dn),t),this.createBoxPlotChart(I(e,Cn),t),this.createOHLCChart(I(e,Ti),t),this.createWaterfallChart(I(e,[ir,ni]),t),this.createLineChart(I(e,[ui,nr]),t)},aggregateCategories:function(e){var t,n,i,r,o=this,a=o.srcSeries||o.series,s=[];for(t=0;a.length>t;t++)n=a[t],i=o.seriesCategoryAxis(n),r=o.findPane(i.options.pane),(k(i.options.type,Nn)||n.categoryField)&&en(r,e)&&(n=o.aggregateSeries(n,i)),s.push(n);o.srcSeries=a,o.series=s},aggregateSeries:function(e,t){var i,r,o,a,s,l=t.options,d=k(t.options.type,Nn),h=l.categories,p=l.srcCategories||h,f=e.data,g=[],m=t.range(),v=Dt({},e),_=Dt({},e),y=c;for(v.data=a=[],d&&(y=u),i=0;f.length>i;i++)r=e.categoryField?y(e.categoryField,f[i]):p[i],(o=t.categoryIndex(r,m))>-1&&(g[o]=g[o]||[],g[o].push(i));for(s=new ht(_,G.current,n.current),i=0;h.length>i;i++)a[i]=s.aggregatePoints(g[i],h[i]);return t.options.dataItems=a,v},appendChart:function(e,t){for(var n=this,i=e.options.series,r=n.seriesCategoryAxis(i[0]).options.categories,o=_t.max(0,s(i)-r.length);o--;)r.push("");n.valueAxisRangeTracker.update(e.valueAxisRanges),Xe.fn.appendChart.call(n,e,t)},seriesPaneName:function(t){var n=this.options,i=t.axis,r=[].concat(n.valueAxis),o=e.grep(r,function(e){return e.name===i})[0],a=((n.panes||[{}])[0]||{}).name||"default";return(o||{}).pane||a},seriesCategoryAxis:function(e){var t=e.categoryAxis,n=t?this.namedCategoryAxes[t]:this.categoryAxis;if(!n)throw Error("Unable to locate category axis with name "+t);return n},stackableChartOptions:function(e,t){var n,i=e.stack,r=i&&"100%"===i.type;return sn(t.options.clip)?n=t.options.clip:r&&(n=!1),{isStacked:i,isStacked100:r,clip:n}},groupSeriesByCategoryAxis:function(n){function i(t,i){return e.grep(n,function(e){return 0===i&&!e.categoryAxis||e.categoryAxis==t})}var r,o,a={},s=e.map(n,function(e){var n=e.categoryAxis||"$$default$$";return a.hasOwnProperty(n)?t:(a[n]=!0,n)}),l=[];for(r=0;s.length>r;r++)0!==(o=i(s[r],r)).length&&l.push(o);return l},createBarChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new ce(n,bt({series:e,invertAxes:n.invertAxes,gap:i.gap,spacing:i.spacing},n.stackableChartOptions(i,t)));n.appendChart(r,t)}},createRangeBarChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new de(n,{series:e,invertAxes:n.invertAxes,gap:i.gap,spacing:i.spacing});n.appendChart(r,t)}},createBulletChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new he(n,{series:e,invertAxes:n.invertAxes,gap:i.gap,spacing:i.spacing,clip:t.options.clip});n.appendChart(r,t)}},createLineChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new xe(n,bt({invertAxes:n.invertAxes,series:e},n.stackableChartOptions(i,t)));n.appendChart(r,t)}},createAreaChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new Me(n,bt({invertAxes:n.invertAxes,series:e},n.stackableChartOptions(i,t)));n.appendChart(r,t)}},createOHLCChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new He(n,{invertAxes:n.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});n.appendChart(r,t)}},createCandlestickChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new Be(n,{invertAxes:n.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});n.appendChart(r,t)}},createBoxPlotChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new Ne(n,{invertAxes:n.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});n.appendChart(r,t)}},createWaterfallChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new Ge(n,{series:e,invertAxes:n.invertAxes,gap:i.gap,spacing:i.spacing});n.appendChart(r,t)}},axisRequiresRounding:function(e,t){var n,i,r,o,a=this,s=I(a.series,pr);for(n=0;a.series.length>n;n++)((r=a.series[n]).type===ui||r.type===_n)&&(o=r.line)&&o.style===Vi&&s.push(r);for(n=0;s.length>n;n++)if((i=s[n].categoryAxis||"")===e||!i&&0===t)return!0},createCategoryAxesLabels:function(){var e,t=this.axes;for(e=0;t.length>e;e++)t[e]instanceof K&&t[e].createLabels()},createCategoryAxes:function(e){var t,n,i,r,o,a,s,l=this,c=l.invertAxes,u=[].concat(l.options.categoryAxis),d=[];for(t=0;u.length>t;t++)if(n=u[t],i=l.findPane(n.pane),en(i,e)){if(o=n.name,r=n.categories||[],n.type,n=Dt({vertical:c,axisCrossingValue:c?pi:0,_deferLabels:!0},n),sn(n.justified)||(n.justified=l.isJustified()),l.axisRequiresRounding(o,t)&&(n.justified=!1,n.roundToBaseUnit=!0),a=F(n,r[0])?new Z(n):new K(n),o){if(l.namedCategoryAxes[o])throw Error("Category axis with name "+o+" is already defined");l.namedCategoryAxes[o]=a}a.axisIndex=t,d.push(a),l.appendAxis(a)}s=l.categoryAxis||d[0],l.categoryAxis=s,c?l.axisY=s:l.axisX=s},isJustified:function(){var e,t,n=this.series;for(e=0;n.length>e;e++)if(t=n[e],!en(t.type,[_n,er]))return!1;return!0},createValueAxes:function(e){var t,n,i,r,o,a,s,l,c=this,u=c.valueAxisRangeTracker,d=u.query(),h=[].concat(c.options.valueAxis),p=c.invertAxes,f={vertical:!p},g=[];for(c.stack100&&(f.roundToMajorUnit=!1,f.labels={format:"P0"}),l=0;h.length>l;l++)if(t=h[l],n=c.findPane(t.pane),en(n,e)){if(s=t.name,a=k(t.type,"log")?{min:.1,max:1}:{min:0,max:1},o=u.query(s)||d||a,0===l&&o&&d&&(o.min=_t.min(o.min,d.min),o.max=_t.max(o.max,d.max)),i=new(k(t.type,"log")?Vt:Ut)(o.min,o.max,Dt({},f,t)),s){if(c.namedValueAxes[s])throw Error("Value axis with name "+s+" is already defined");c.namedValueAxes[s]=i}i.axisIndex=l,g.push(i),c.appendAxis(i)}r=c.valueAxis||g[0],c.valueAxis=r,p?c.axisX=r:c.axisY=r},click:function(t,n){var i,r,o,a=t._eventCoordinates(n),s=new Wt(a.x,a.y),l=this.pointPane(s),c=[],u=[];if(l){for(i=l.axes,r=0;i.length>r;r++)(o=i[r]).getValue?C(u,o.getValue(s)):C(c,o.getCategory(s));0===c.length&&C(c,this.categoryAxis.getCategory(s)),c.length>0&&u.length>0&&t.trigger(Ai,{element:e(n.target),originalEvent:n,category:b(c),value:b(u)})}},pointPane:function(e){var t,n,i=this.panes;for(n=0;i.length>n;n++)if((t=i[n]).contentBox.containsPoint(e))return t}}),Ze=xt.extend({init:function(){this.axisRanges={}},update:function(e){var t,n,i,r=this.axisRanges;for(i in e)t=r[i],n=e[i],r[i]=t=t||{min:pi,max:fi},t.min=_t.min(t.min,n.min),t.max=_t.max(t.max,n.max)},reset:function(e){this.axisRanges[e]=t},query:function(e){return this.axisRanges[e]}}),Je=Xe.extend({init:function(e,t){var n=this;n.namedXAxes={},n.namedYAxes={},n.xAxisRangeTracker=new Ze,n.yAxisRangeTracker=new Ze,Xe.fn.init.call(n,e,t)},options:{xAxis:{},yAxis:{}},render:function(e){var t,n,i,r,o=this,a=o.groupSeriesByPane();for(e=e||o.panes,t=0;e.length>t;t++)i=a[(n=e[t]).options.name||"default"]||[],o.addToLegend(i),(r=o.filterVisibleSeries(i))&&(o.createScatterChart(I(r,Ri),n),o.createScatterLineChart(I(r,Pi),n),o.createBubbleChart(I(r,Tn),n));o.createAxes(e)},appendChart:function(e,t){var n=this;n.xAxisRangeTracker.update(e.xAxisRanges),n.yAxisRangeTracker.update(e.yAxisRanges),Xe.fn.appendChart.call(n,e,t)},removeAxis:function(e){var t=this,n=e.options.name;Xe.fn.removeAxis.call(t,e),e.options.vertical?(t.yAxisRangeTracker.reset(n),delete t.namedYAxes[n]):(t.xAxisRangeTracker.reset(n),delete t.namedXAxes[n]),e===t.axisX&&delete t.axisX,e===t.axisY&&delete t.axisY},seriesPaneName:function(t){var n=this.options,i=t.xAxis,r=[].concat(n.xAxis),o=e.grep(r,function(e){return e.name===i})[0],a=t.yAxis,s=[].concat(n.yAxis),l=e.grep(s,function(e){return e.name===a})[0],c=(n.panes||[{}])[0].name||"default";return(o||{}).pane||(l||{}).pane||c},createScatterChart:function(e,t){e.length>0&&this.appendChart(new Re(this,{series:e,clip:t.options.clip}),t)},createScatterLineChart:function(e,t){e.length>0&&this.appendChart(new Pe(this,{series:e,clip:t.options.clip}),t)},createBubbleChart:function(e,t){e.length>0&&this.appendChart(new Le(this,{series:e,clip:t.options.clip}),t)},createXYAxis:function(e,t,n){var i,r,o,a,s,l,c,u=this,d=e.name,h=t?u.namedYAxes:u.namedXAxes,p=t?u.yAxisRangeTracker:u.xAxisRangeTracker,f=Dt({},e,{vertical:t}),g=k(f.type,"log"),m=p.query(),v=g?{min:.1,max:1}:{min:0,max:1},_=p.query(d)||m||v,y=u.series,b=[f.min,f.max];for(r=0;y.length>r;r++)if((a=(o=y[r])[t?"yAxis":"xAxis"])==f.name||0===n&&!a){s=G.current.bindPoint(o,0).valueFields,b.push(s[t?"y":"x"]);break}for(0===n&&m&&(_.min=_t.min(_.min,m.min),_.max=_t.max(_.max,m.max)),c=0;b.length>c;c++)if(b[c]instanceof Date){l=!0;break}if(i=new(k(f.type,Nn)||!f.type&&l?J:g?Vt:Ut)(_.min,_.max,f),d){if(h[d])throw Error((t?"Y":"X")+" axis with name "+d+" is already defined");h[d]=i}return u.appendAxis(i),i},createAxes:function(e){var t,n=this,i=n.options,r=[].concat(i.xAxis),o=[],a=[].concat(i.yAxis),s=[];ft(r,function(i){t=n.findPane(this.pane),en(t,e)&&o.push(n.createXYAxis(this,!1,i))}),ft(a,function(i){t=n.findPane(this.pane),en(t,e)&&s.push(n.createXYAxis(this,!0,i))}),n.axisX=n.axisX||o[0],n.axisY=n.axisY||s[0]},click:function(t,n){var i,r,o,a,s=t._eventCoordinates(n),l=new Wt(s.x,s.y),c=this.axes,u=c.length,d=[],h=[];for(i=0;u>i;i++)a=(r=c[i]).options.vertical?h:d,null!==(o=r.getValue(l))&&a.push(o);d.length>0&&h.length>0&&t.trigger(Ai,{element:e(n.target),originalEvent:n,x:b(d),y:b(h)})}}),tt=(et=Xe.extend({render:function(){var e=this.series;this.createPieChart(e)},createPieChart:function(e){var t=this,n=e[0],i=new We(t,{series:e,padding:n.padding,startAngle:n.startAngle,connectors:n.connectors,legend:t.options.legend});t.appendChart(i)},appendChart:function(e,t){Xe.fn.appendChart.call(this,e,t),an(this.options.legend.items,e.legendItems)}})).extend({render:function(){var e=this.series;this.createDonutChart(e)},createDonutChart:function(e){var t=this,n=e[0],i=new qe(t,{series:e,padding:n.padding,connectors:n.connectors,legend:t.options.legend});t.appendChart(i)}}),nt=mn.Animation.extend({options:{easing:"easeOutElastic",duration:ri},setup:function(){this.element.transform(gn.transform().scale(Oi,Oi,this.options.center))},step:function(e){this.element.transform(gn.transform().scale(e,e,this.options.center))}}),mn.AnimationFactory.current.register(Di,nt),it=mn.Animation.extend({options:{easing:"easeOutElastic"},setup:function(){var e=this.center=this.element.bbox().center();this.element.transform(gn.transform().scale(Oi,Oi,e))},step:function(e){this.element.transform(gn.transform().scale(e,e,this.center))}}),mn.AnimationFactory.current.register(Tn,it),rt=xt.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(e){var t,n;for(e=[].concat(e),this.hide(),t=0;e.length>t;t++)(n=e[t])&&n.toggleHighlight&&n.hasHighlight()&&(this.togglePointHighlight(n,!0),this._points.push(n))},togglePointHighlight:function(e,t){var n,i=(e.options.highlight||{}).toggle;i?(i(n={category:e.category,series:e.series,dataItem:e.dataItem,value:e.value,preventDefault:U,visual:e.highlightVisual(),show:t}),n._defaultPrevented||e.toggleHighlight(t)):e.toggleHighlight(t)},hide:function(){for(var e=this._points;e.length;)this.togglePointHighlight(e.pop(),!1)},isHighlighted:function(e){var t,n=this._points;for(t=0;n.length>t;t++)if(e==n[t])return!0;return!1}}),ot=Ct.extend({init:function(t,n){var i,r,o=this;Ct.fn.init.call(o),o.options=Dt({},o.options,n),o.chartElement=t,o.template=ot.template,o.template||(o.template=ot.template=pn("<div class='k-tooltip k-chart-tooltip' style='display:none; position: absolute; font: #= d.font #;border: #= d.border.width #px solid;opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'></div>")),i=Jt(o.options.padding||{},"auto"),o.element=e(o.template(o.options)).css({"padding-top":i.top,"padding-right":i.right,"padding-bottom":i.bottom,"padding-left":i.left}),o.move=wt(o.move,o),o._mouseleave=wt(o._mouseleave,o),r=kt.format("[{0}='content'],[{0}='scroller']",kt.attr("role")),o._mobileScroller=t.closest(r).data("kendoMobileScroller")},destroy:function(){this._clearShowTimeout(),this.element&&(this.element.off(vi).remove(),this.element=null)},options:{border:{width:1},opacity:1,animation:{duration:150}},move:function(){var e,t=this,n=t.options,i=t.element;t.anchor&&t.element&&(e=t._offset(),t.visible||i.css({top:e.top,left:e.left}),t.visible=!0,t._ensureElement(document.body),i.stop(!0,!0).show().animate({left:e.left,top:e.top},n.animation.duration))},_clearShowTimeout:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)},_padding:function(){if(!this._chartPadding){var e=this.chartElement;this._chartPadding={top:parseInt(e.css("paddingTop"),10),left:parseInt(e.css("paddingLeft"),10)}}return this._chartPadding},_offset:function(){var t,n,i=this,r=i._measure(),o=i.anchor,a=i._padding(),s=i.chartElement.offset(),l=rn(o.y+a.top+s.top),c=rn(o.x+a.left+s.left),u=kt.support.zoomLevel(),d=e(window),h=window.pageYOffset||document.documentElement.scrollTop||0,p=window.pageXOffset||document.documentElement.scrollLeft||0,f=(this._mobileScroller||{}).movable;return f&&1!==f.scale?(t=gn.transform().scale(f.scale,f.scale,[f.x,f.y]),c=(n=new gn.Point(c,l).transform(t)).x,l=n.y):(l+=i._fit(l-h,r.height,d.outerHeight()/u),c+=i._fit(c-p,r.width,d.outerWidth()/u)),{top:l,left:c}},setStyle:function(e,t){var n,i,r=e.background,o=e.border.color;t&&(n=t.color||t.options.color,r=fn(r,n),o=fn(o,n)),sn(e.color)||(i=new zt(r).percBrightness(),this.element.toggleClass("k-chart-tooltip-inverse",i>180)),this.element.css({backgroundColor:r,borderColor:o,font:e.font,color:e.color,opacity:e.opacity,borderWidth:e.border.width})},show:function(){this._clearShowTimeout(),this.showTimeout=setTimeout(this.move,100)},hide:function(){var e=this;clearTimeout(e.showTimeout),e._hideElement(),e.visible&&(e.point=null,e.visible=!1,e.index=null)},_measure:function(){return this._ensureElement(),{width:this.element.outerWidth(),height:this.element.outerHeight()}},_ensureElement:function(){this.element&&this.element.appendTo(document.body).on(vi,this._mouseleave)},_mouseleave:function(t){var n=t.relatedTarget,i=this.chartElement[0];n&&n!==i&&!e.contains(i,n)&&(this.trigger("leave"),this.hide())},_hideElement:function(){var e=this,t=this.element;t&&t.fadeOut({always:function(){e.visible||t.off(vi).remove()}})},_pointContent:function(e){var t,n=Dt({},this.options,e.options.tooltip);return sn(e.value)&&(t=""+e.value),n.template?t=Et(n.template)({value:e.value,category:e.category,series:e.series,dataItem:e.dataItem,percentage:e.percentage,runningTotal:e.runningTotal,total:e.total,low:e.low,high:e.high,xLow:e.xLow,xHigh:e.xHigh,yLow:e.yLow,yHigh:e.yHigh}):n.format&&(t=e.formatValue(n.format)),t},_pointAnchor:function(e){var t=this._measure();return e.tooltipAnchor(t.width,t.height)},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i}}),at=ot.extend({show:function(e){var t=this,n=Dt({},t.options,e.options.tooltip);e&&e.tooltipAnchor&&t.element&&(t.element.html(t._pointContent(e)),t.anchor=t._pointAnchor(e),t.anchor?(t.setStyle(n,e),ot.fn.show.call(t,e)):t.hide())}}),st=ot.extend({init:function(e,t,n){ot.fn.init.call(this,e,n),this.plotArea=t},options:{sharedTemplate:"<table><th colspan='2'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr># if(point.series.name) { # <td> #= point.series.name #:</td># } #<td>#= content(point) #</td></tr># } #</table>",categoryFormat:"{0:d}"},showAt:function(t,n){var i,r=this,o=r.options,a=r.plotArea.categoryAxis,s=a.pointCategoryIndex(n),l=a.getCategory(n),c=a.getSlot(s);(t=e.grep(t,function(e){var t=e.series.tooltip;return!(t&&!1===t.visible)})).length>0&&(i=r._content(t,l),r.element.html(i),r.anchor=r._slotAnchor(n,c),r.setStyle(o,t[0]),ot.fn.show.call(r))},_slotAnchor:function(e,t){var n=this.plotArea.categoryAxis,i=this._measure(),r=e.y-i.height/2;return n.options.vertical?Wt(e.x,r):Wt(t.center().x,r)},_content:function(e,t){var n=this;return kt.template(n.options.sharedTemplate)({points:e,category:t,categoryText:Kt(n.options.categoryFormat,t),content:n._pointContent})}}),lt=Bt.extend({init:function(e,t){Bt.fn.init.call(this,t),this.axis=e,this.stickyMode=e instanceof K},options:{color:kn,width:1,zIndex:-1,tooltip:{visible:!1}},showAt:function(e){var t;this.point=e,this.moveLine(),this.line.visible(!0),(t=this.options.tooltip).visible&&(this.tooltip||(this.tooltip=new ct(this,Dt({},t,{stickyMode:this.stickyMode}))),this.tooltip.showAt(e))},hide:function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},moveLine:function(){var e,t,n,i=this,r=i.axis,o=r.options.vertical,a=i.getBox(),s=i.point,l=o?sr:ar;t=new gn.Point(a.x1,a.y1),n=o?new gn.Point(a.x2,a.y1):new gn.Point(a.x1,a.y2),s&&(i.stickyMode?(e=r.getSlot(r.pointCategoryIndex(s)),t[l]=n[l]=e.center()[l]):t[l]=n[l]=s[l]),i.box=a,this.line.moveTo(t).lineTo(n)},getBox:function(){var e,t,n,i=this.axis,r=i.pane.axes,o=r.length,a=i.options.vertical,s=i.lineBox().clone(),l=a?ar:sr;for(n=0;o>n;n++)(t=r[n]).options.vertical!=a&&(e?e.wrap(t.lineBox()):e=t.lineBox().clone());return s[l+1]=e[l+1],s[l+2]=e[l+2],s},createVisual:function(){Bt.fn.createVisual.call(this);var e=this.options;this.line=new mn.Path({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},destroy:function(){var e=this;e.tooltip&&e.tooltip.destroy(),Bt.fn.destroy.call(e)}}),ct=ot.extend({init:function(e,t){var n=this,i=e.axis.getRoot().chart.element;n.crosshair=e,ot.fn.init.call(n,i,Dt({},n.options,{background:e.axis.plotArea.options.seriesColors[0]},t)),n.setStyle(n.options)},options:{padding:10},showAt:function(e){var t=this;t.element&&(t.point=e,t.element.html(t.content(e)),t.anchor=t.getAnchor(),t.move())},move:function(){var e=this,t=e.element,n=e._offset();e._ensureElement(),t.css({top:n.top,left:n.left}).show()},content:function(e){var t,n,i=this.options,r=this.crosshair.axis,o=r.options;return n=t=r[i.stickyMode?"getCategory":"getValue"](e),i.template?t=Et(i.template)({value:n}):i.format?t=Kt(i.format,n):o.type===Nn&&(t=Kt(o.labels.dateFormats[o.baseUnit],n)),t},getAnchor:function(){var e=this.options,t=e.position,n=this.crosshair,i=!n.axis.options.vertical,r=n.line.bbox(),o=this._measure(),a=o.width/2,s=o.height/2,l=e.padding;return i?t===xn?r.bottomLeft().translate(-a,l):r.topLeft().translate(-a,-o.height-l):t===si?r.topLeft().translate(-o.width-l,-s):r.topRight().translate(l,-s)},hide:function(){this.element.hide(),this.point=null},destroy:function(){ot.fn.destroy.call(this),this.point=null}}),ut={min:function(e){var t,n,i=pi,r=e.length;for(t=0;r>t;t++)S(n=e[t])&&(i=_t.min(i,n));return i===pi?e[0]:i},max:function(e){var t,n,i=fi,r=e.length;for(t=0;r>t;t++)S(n=e[t])&&(i=_t.max(i,n));return i===fi?e[0]:i},sum:function(e){var t,n,i=e.length,r=0;for(t=0;i>t;t++)S(n=e[t])&&(r+=n);return r},sumOrNull:function(e){var t=null;return D(e)&&(t=ut.sum(e)),t},count:function(e){var t,n,i=e.length,r=0;for(t=0;i>t;t++)null!==(n=e[t])&&sn(n)&&r++;return r},avg:function(e){var t=e[0],n=D(e);return n>0&&(t=ut.sum(e)/n),t},first:function(e){var t,n,i=e.length;for(t=0;i>t;t++)if(null!==(n=e[t])&&sn(n))return n;return e[0]}},n.prototype={register:function(e,t){for(var n=0;e.length>n;n++)this._defaults[e[n]]=t},query:function(e){return this._defaults[e]}},n.current=new n,dt=Ct.extend({init:function(t,n,i){var r,o,a=this,s=t.element,l=n.lineBox(),c=a.getValueAxis(n),u=c.lineBox(),h=".k-";Ct.fn.init.call(a),a.options=Dt({},a.options,i),i=a.options,a.chart=t,a.chartElement=s,a.categoryAxis=n,a._dateAxis=a.categoryAxis instanceof Z,a.valueAxis=c,a._dateAxis&&Dt(i,{min:d(i.min),max:d(i.max),from:d(i.from),to:d(i.to)}),a.template=dt.template,a.template||(a.template=dt.template=pn("<div class='k-selector' style='width: #= d.width #px; height: #= d.height #px; top: #= d.offset.top #px; left: #= d.offset.left #px;'><div class='k-mask'></div><div class='k-mask'></div><div class='k-selection'><div class='k-selection-bg'></div><div class='k-handle k-leftHandle'><div></div></div><div class='k-handle k-rightHandle'><div></div></div></div></div>")),o={left:parseInt(s.css("paddingLeft"),10),right:parseInt(s.css("paddingTop"),10)},a.options=Dt({},{width:l.width(),height:u.height(),padding:o,offset:{left:u.x2+o.left,top:u.y1+o.right},from:i.min,to:i.max},i),a.options.visible&&(a.wrapper=r=e(a.template(a.options)).appendTo(s),a.selection=r.find(h+"selection"),a.leftMask=r.find(h+"mask").first(),a.rightMask=r.find(h+"mask").last(),a.leftHandle=r.find(h+"leftHandle"),a.rightHandle=r.find(h+"rightHandle"),a.options.selection={border:{left:parseFloat(a.selection.css("border-left-width"),10),right:parseFloat(a.selection.css("border-right-width"),10)}},a.leftHandle.css("top",(a.selection.height()-a.leftHandle.height())/2),a.rightHandle.css("top",(a.selection.height()-a.rightHandle.height())/2),a.set(a._index(i.from),a._index(i.to)),a.bind(a.events,a.options),a.wrapper[0].style.cssText=a.wrapper[0].style.cssText,a.wrapper.on(bi,wt(a._mousewheel,a)),kt.UserEvents?a.userEvents=new kt.UserEvents(a.wrapper,{global:!0,stopPropagation:!0,multiTouch:!0,start:wt(a._start,a),move:wt(a._move,a),end:wt(a._end,a),tap:wt(a._tap,a),gesturestart:wt(a._gesturechange,a),gesturechange:wt(a._gesturechange,a)}):a.leftHandle.add(a.rightHandle).removeClass("k-handle"))},events:[Fi,Bi,zi],options:{visible:!0,mousewheel:{zoom:"both"},min:fi,max:pi},destroy:function(){var e=this,t=e.userEvents;t&&t.destroy(),clearTimeout(e._mwTimeout),e._state=null,e.wrapper.remove()},_rangeEventArgs:function(e){var t=this;return{axis:t.categoryAxis.options,from:t._value(e.from),to:t._value(e.to)}},_start:function(t){var n,i=this,r=i.options,o=e(t.event.target);!i._state&&o&&(i.chart._unsetActivePoint(),i._state={moveTarget:o.parents(".k-handle").add(o).first(),startLocation:t.x?t.x.location:0,range:{from:i._index(r.from),to:i._index(r.to)}},n=i._rangeEventArgs({from:i._index(r.from),to:i._index(r.to)}),i.trigger(Fi,n)&&(i.userEvents.cancel(),i._state=null))},_move:function(e){if(this._state){var t=this,n=t._state,i=t.options,r=t.categoryAxis.options.categories,o=t._index(i.from),a=t._index(i.to),s=t._index(i.min),l=t._index(i.max),c=n.startLocation-e.x.location,u=n.range,d={from:u.from,to:u.to},h=u.to-u.from,p=n.moveTarget,f=t.wrapper.width()/(r.length-1),g=_t.round(c/f);p&&(e.preventDefault(),p.is(".k-selection, .k-selection-bg")?(u.from=_t.min(_t.max(s,o-g),l-h),u.to=_t.min(u.from+h,l)):p.is(".k-leftHandle")?(u.from=_t.min(_t.max(s,o-g),l-1),u.to=_t.max(u.from+1,u.to)):p.is(".k-rightHandle")&&(u.to=_t.min(_t.max(s+1,a-g),l),u.from=_t.min(u.to-1,u.from)),(u.from!==d.from||u.to!==d.to)&&(t.move(u.from,u.to),t.trigger(Bi,t._rangeEventArgs(u))))}},_end:function(){var e=this,t=e._state.range;delete e._state,e.set(t.from,t.to),e.trigger(zi,e._rangeEventArgs(t))},_gesturechange:function(e){if(this._state){var t=this,n=t.chart,i=t._state,r=t.options,o=t.categoryAxis,a=i.range,s=n._toModelCoordinates(e.touches[0].x.location).x,l=n._toModelCoordinates(e.touches[1].x.location).x,c=_t.min(s,l),u=_t.max(s,l);e.preventDefault(),i.moveTarget=null,a.from=o.pointCategoryIndex(new It.Point2D(c))||r.min,a.to=o.pointCategoryIndex(new It.Point2D(u))||r.max,t.move(a.from,a.to)}},_tap:function(e){var t=this,n=t.options,i=t.chart._eventCoordinates(e),r=t.categoryAxis,o=r.pointCategoryIndex(new It.Point2D(i.x,r.box.y1)),a=t._index(n.from),s=t._index(n.to),l=t._index(n.min),c=t._index(n.max),u=s-a,d=a+u/2,h=_t.round(d-o),p={},f=3===e.event.which;t._state||f||(e.preventDefault(),t.chart._unsetActivePoint(),r.options.justified||h--,p.from=_t.min(_t.max(l,a-h),c-u),p.to=_t.min(p.from+u,c),t._start(e),t._state&&(t._state.range=p,t.trigger(Bi,t._rangeEventArgs(p)),t._end()))},_mousewheel:function(e){var t,n=this,i=n.options,r=nn(e);n._start({event:{target:n.selection}}),n._state&&(t=n._state.range,e.preventDefault(),e.stopPropagation(),_t.abs(r)>1&&(r*=3),i.mousewheel.reverse&&(r*=-1),n.expand(r)&&n.trigger(Bi,{axis:n.categoryAxis.options,delta:r,originalEvent:e,from:n._value(t.from),to:n._value(t.to)}),n._mwTimeout&&clearTimeout(n._mwTimeout),n._mwTimeout=setTimeout(function(){n._end()},150))},_index:function(e){var t=this.categoryAxis,n=t.options.categories,i=e;return e instanceof Date&&(i=T(e,n),!t.options.justified&&e>ln(n)&&(i+=1)),i},_value:function(e){var t=this.categoryAxis.options.categories,n=e;return this._dateAxis&&(n=e>t.length-1?this.options.max:t[e]),n},_slot:function(e){return this.categoryAxis.getSlot(this._index(e))},move:function(e,t){var n,i,r,o,a=this,s=a.options,l=s.offset,c=s.padding,u=s.selection.border;r=a._slot(e),n=rn(r.x1-l.left+c.left),a.leftMask.width(n),a.selection.css("left",n),r=a._slot(t),i=rn(s.width-(r.x1-l.left+c.left)),a.rightMask.width(i),(o=s.width-i)!=s.width&&(o+=u.right),a.rightMask.css("left",o),a.selection.width(_t.max(s.width-(n+i)-u.right,0))},set:function(e,t){var n=this,i=n.options,r=n._index(i.min),o=n._index(i.max);e=cn(n._index(e),r,o),t=cn(n._index(t),e+1,o),i.visible&&n.move(e,t),i.from=n._value(e),i.to=n._value(t)},expand:function(e){var n=this,i=n.options,r=n._index(i.min),o=n._index(i.max),a=i.mousewheel.zoom,s=n._index(i.from),l=n._index(i.to),c={from:s,to:l},u=Dt({},c);return n._state&&(c=n._state.range),a!==Ii&&(c.from=cn(cn(s-e,0,l-1),r,o)),a!==si&&(c.to=cn(cn(l+e,c.from+1,o),r,o)),c.from!==u.from||c.to!==u.to?(n.set(c.from,c.to),!0):t},getValueAxis:function(e){var t,n,i=e.pane.axes,r=i.length;for(t=0;r>t;t++)if((n=i[t]).options.vertical!==e.options.vertical)return n}}),(ht=function(e,t,n){var i,r,o,a=this,s=t.canonicalFields(e),l=t.valueFields(e),c=t.sourceFields(e,s),u=a._seriesFields=[],d=n.query(e.type),h=e.aggregate||d;for(a._series=e,a._binder=t,i=0;s.length>i;i++){if(r=s[i],typeof h===Ci)o=h[r];else{if(0!==i&&!en(r,l))break;o=h}o&&u.push({canonicalName:r,name:c[i],transform:Mt(o)?o:ut[o]})}}).prototype={aggregatePoints:function(e,t){var n,i,r,o,a,s=this,l=s._bindPoints(e||[]),c=s._series,u=s._seriesFields,d=l.dataItems[0],h={};for(!d||S(d)||gt(d)||((a=function(){}).prototype=d,h=new a),n=0;u.length>n;n++){if(i=u[n],r=s._bindField(l.values,i.canonicalName),null!==(o=i.transform(r,c,l.dataItems,t))&&typeof o===Ci&&!sn(o.length)){h=o;break}sn(o)&&(z(i.name,h),kt.setter(i.name)(h,o))}return h},_bindPoints:function(e){var t,n,i=this._binder,r=this._series,o=[],a=[];for(t=0;e.length>t;t++)n=e[t],o.push(i.bindPoint(r,n)),a.push(r.data[n]);return{values:o,dataItems:a}},_bindField:function(e,t){var n,i,r,o,a=[],s=e.length;for(n=0;s>n;n++)o=(i=e[n]).valueFields,r=sn(o[t])?o[t]:i.fields[t],a.push(r);return a}},pt=xt.extend({init:function(e){this._axis=e},slot:function(e,t){return this._axis.slot(e,t)},range:function(){return this._axis.range()}}),bt(e.easing,{easeOutElastic:function(e,t,n,i){var r=1.70158,o=0,a=i;return 0===e?n:1===e?n+i:(o||(o=.5),a<_t.abs(i)?(a=i,r=o/4):r=o/(2*_t.PI)*_t.asin(i/a),a*_t.pow(2,-10*e)*_t.sin(1.1*(1*e-r)*_t.PI/o)+i+n)}}),It.ui.plugin(gr),q.current.register(Ke,[wn,Ln,ui,nr,_n,er,Dn,Ti,Sn,tr,Cn,Ei,Mi,ir,ni]),q.current.register(Je,[Ri,Pi,Tn]),q.current.register(et,[Di]),q.current.register(tt,[qn]),G.current.register([wn,Ln,ui,nr,_n,er],[Ji],[An,Pn,xi,Qn,Xn]),G.current.register([Ei,Mi],["from","to"],[An,Pn,xi]),G.current.register([ir,ni],[Ji],[An,Pn,xi,"summary"]),n.current.register([wn,Ln,ui,nr,_n,er,ir,ni],{value:di,color:Zn,noteText:Zn,errorLow:"min",errorHigh:di}),n.current.register([Ei,Mi],{from:"min",to:di,color:Zn,noteText:Zn}),G.current.register([Ri,Pi,Tn],[ar,sr],[Pn,xi,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),G.current.register([Tn],[ar,sr,"size"],[Pn,An,xi]),G.current.register([Dn,Ti],["open","high","low","close"],[An,Pn,"downColor",xi]),n.current.register([Dn,Ti],{open:di,high:di,low:"min",close:di,color:Zn,downColor:Zn,noteText:Zn}),G.current.register([Cn],["lower","q1","median","q3","upper","mean","outliers"],[An,Pn,xi]),n.current.register([Cn],{lower:di,q1:di,median:di,q3:di,upper:di,mean:di,outliers:Zn,color:Zn,noteText:Zn}),G.current.register([Sn,tr],["current","target"],[An,Pn,"visibleInLegend",xi]),n.current.register([Sn,tr],{current:di,target:di,color:Zn,noteText:Zn}),G.current.register([Di,qn],[Ji],[An,Pn,"explode","visibleInLegend","visible"]),Dt(It,{EQUALLY_SPACED_SERIES:pr,Aggregates:ut,AreaChart:Me,AreaSegment:Ae,AxisGroupRangeTracker:Ze,Bar:re,BarChart:ce,BarLabel:$,BubbleChart:Le,Bullet:pe,BulletChart:he,CandlestickChart:Be,Candlestick:Fe,CategoricalChart:le,CategoricalErrorBar:me,CategoricalPlotArea:Ke,CategoryAxis:K,ChartAxis:pt,ChartContainer:Qe,ClipAnimation:Ce,ClusterLayout:ee,Crosshair:lt,CrosshairTooltip:ct,DateCategoryAxis:Z,DateValueAxis:J,DefaultAggregates:n,DonutChart:qe,DonutPlotArea:tt,DonutSegment:je,ErrorBarBase:ge,ErrorRangeCalculator:se,Highlight:rt,SharedTooltip:st,Legend:X,LegendItem:Y,LegendLayout:Q,LineChart:xe,LinePoint:_e,LineSegment:be,Pane:Ye,PieAnimation:nt,PieChart:We,PieChartMixin:Ue,PiePlotArea:et,PieSegment:Ve,PlotAreaBase:Xe,PlotAreaFactory:q,PointEventsMixin:ne,RangeBar:ue,RangeBarChart:de,ScatterChart:Re,ScatterErrorBar:ve,ScatterLineChart:Pe,Selection:dt,SeriesAggregator:ht,SeriesBinder:G,ShapeElement:Gt,SplineSegment:Se,SplineAreaSegment:Ee,StackWrap:te,Tooltip:at,OHLCChart:He,OHLCPoint:ze,WaterfallChart:Ge,WaterfallSegment:$e,XYPlotArea:Je,addDuration:p,areNumbers:A,axisGroupBox:w,categoriesCount:s,ceilDate:m,countNumbers:D,duration:y,ensureTree:z,indexOf:R,isNumber:S,floorDate:g,filterSeriesByType:I,hasValue:j,lteDateIndex:T,evalOptions:M,seriesTotal:H,singleItemOrArray:b,sortDates:P,startOfWeek:f,transpose:B,toDate:d,toTime:h,uniqueDates:L})}(window.kendo.jQuery),function(e,t){function n(e,t){return e.value.x-t.value.x}function i(e,t){return 180-C.abs(C.abs(e-t)-180)}var r,o,a,s,l,c,u,d,h,p,f,g,m,v,_,y,b,w,k,x,C=Math,T=window.kendo,S=T.deepExtend,D=T.util,A=D.append,M=T.drawing,E=T.geometry,I=T.dataviz,R=I.AreaSegment,P=I.Axis,L=I.AxisGroupRangeTracker,F=I.BarChart,B=I.Box2D,z=I.CategoryAxis,H=I.CategoricalChart,N=I.CategoricalPlotArea,O=I.ChartElement,V=I.CurveProcessor,U=I.DonutSegment,W=I.LineChart,j=I.LineSegment,q=I.LogarithmicAxis,G=I.NumericAxis,$=I.PlotAreaBase,Y=I.PlotAreaFactory,Q=I.Point2D,X=I.Ring,K=I.ScatterChart,Z=I.ScatterLineChart,J=I.SeriesBinder,ee=I.ShapeBuilder,te=I.SplineSegment,ne=I.SplineAreaSegment,ie=I.getSpacing,re=I.filterSeriesByType,oe=D.limitValue,ae=I.round,se="arc",le=I.COORD_PRECISION,ce=C.PI/180,ue="plotAreaClick",de="polarArea",he="polarLine",pe="polarScatter",fe="radarArea",ge="radarColumn",me="radarLine",ve="smooth",_e="zero",ye=[de,he,pe],be=[fe,ge,me],we={createGridLines:function(e){var t,n,i=this,r=i.options,o=C.abs(i.box.center().y-e.lineBox().y1),a=!1,s=[];return r.majorGridLines.visible&&(t=i.majorGridLineAngles(e),a=!0,s=i.renderMajorGridLines(t,o,r.majorGridLines)),r.minorGridLines.visible&&(n=i.minorGridLineAngles(e,a),A(s,i.renderMinorGridLines(n,o,r.minorGridLines,e,a))),s},renderMajorGridLines:function(e,t,n){return this.renderGridLines(e,t,n)},renderMinorGridLines:function(e,t,n,i,r){var o=this.radiusCallback&&this.radiusCallback(t,i,r);return this.renderGridLines(e,t,n,o)},renderGridLines:function(e,t,n,i){var r,o,a={stroke:{width:n.width,color:n.color,dashType:n.dashType}},s=this.box.center(),l=new E.Circle([s.x,s.y],t),c=this.gridLinesVisual();for(r=0;e.length>r;r++)o=new M.Path(a),i&&(l.radius=i(e[r])),o.moveTo(l.center).lineTo(l.pointAt(e[r])),c.append(o);return c.children},gridLineAngles:function(n,i,r,o,a){var s=this,l=s.intervals(i,r,o,a),c=n.options,u=c.visible&&!1!==(c.line||{}).visible;return e.map(l,function(e){var n=s.intervalAngle(e);return u&&90===n?t:n})}},ke=z.extend({options:{startAngle:90,labels:{margin:ie(10)},majorGridLines:{visible:!0},justified:!0},range:function(){return{min:0,max:this.options.categories.length}},reflow:function(e){this.box=e,this.reflowLabels()},lineBox:function(){return this.box},reflowLabels:function(){var e,t,n=this,i=n.options.labels,r=i.skip||0,o=i.step||1,a=new B,s=n.labels;for(t=0;s.length>t;t++)s[t].reflow(a),e=s[t].box,s[t].reflow(n.getSlot(r+t*o).adjacentBox(0,e.width(),e.height()))},intervals:function(e,t,n,i){var r,o=this.options,a=0,s=o.categories.length/e||1,l=360/s,c=[];for(t=t||0,n=n||1,r=t;s>r;r+=n)a=o.reverse?360-r*l:r*l,a=ae(a,le)%360,i&&I.inArray(a,i)||c.push(a);return c},majorIntervals:function(){return this.intervals(1)},minorIntervals:function(){return this.intervals(.5)},intervalAngle:function(e){return(360+e+this.options.startAngle)%360},majorAngles:function(){return e.map(this.majorIntervals(),e.proxy(this.intervalAngle,this))},createLine:function(){return[]},majorGridLineAngles:function(e){var t=this.options.majorGridLines;return this.gridLineAngles(e,1,t.skip,t.step)},minorGridLineAngles:function(e,t){var n=this.options,i=n.minorGridLines,r=n.majorGridLines,o=t?this.intervals(1,r.skip,r.step):null;return this.gridLineAngles(e,.5,i.skip,i.step,o)},radiusCallback:function(e,n,i){var r,o,a;return n.options.type!==se?(r=360/(2*this.options.categories.length),o=C.cos(r*ce)*e,a=this.majorAngles(),function(t){return!i&&I.inArray(t,a)?e:o}):t},createPlotBands:function(){var e,t,n,i,r,o,a,s=this,l=s.options.plotBands||[],c=this._plotbandGroup=new M.Group({zIndex:-1});for(e=0;l.length>e;e++)t=l[e],n=s.plotBandSlot(t),i=s.getSlot(t.from),r=t.from-C.floor(t.from),n.startAngle+=r*i.angle,o=C.ceil(t.to)-t.to,n.angle-=(o+r)*i.angle,a=ee.current.createRing(n,{fill:{color:t.color,opacity:t.opacity},stroke:{opacity:t.opacity}}),c.append(a);s.appendVisual(c)},plotBandSlot:function(e){return this.getSlot(e.from,e.to-1)},getSlot:function(e,t){var n,i,r=this,o=r.options,a=o.justified,s=r.box,l=r.majorAngles(),c=l.length,u=360/c;return o.reverse&&!a&&(e=(e+1)%c),n=l[e=oe(C.floor(e),0,c-1)],a&&0>(n-=u/2)&&(n+=360),i=u*((t=oe(C.ceil(t||e),e,c-1))-e+1),new X(s.center(),0,s.height()/2,n,i)},slot:function(e,t){var n=this.getSlot(e,t),i=n.startAngle+180,r=i+n.angle;return new E.Arc([n.c.x,n.c.y],{startAngle:i,endAngle:r,radiusX:n.r,radiusY:n.r})},pointCategoryIndex:function(e){var t,n=null,i=this.options.categories.length;for(t=0;i>t;t++)if(this.getSlot(t).containsPoint(e)){n=t;break}return n}});S(ke.fn,we),r={options:{majorGridLines:{visible:!0}},createPlotBands:function(){var e,t,n,i,r,o,a=this,s=a.options,l=s.plotBands||[],c=s.majorGridLines.type,u=a.plotArea.polarAxis,d=u.majorAngles(),h=u.box.center(),p=this._plotbandGroup=new M.Group({zIndex:-1});for(e=0;l.length>e;e++)n={fill:{color:(t=l[e]).color,opacity:t.opacity},stroke:{opacity:t.opacity}},i=a.getSlot(t.from,t.to,!0),r=new X(h,h.y-i.y2,h.y-i.y1,0,360),o=c===se?ee.current.createRing(r,n):M.Path.fromPoints(a.plotBandPoints(r,d),n).close(),p.append(o);a.appendVisual(p)},plotBandPoints:function(e,t){var n,i=[],r=[],o=[e.c.x,e.c.y],a=new E.Circle(o,e.ir),s=new E.Circle(o,e.r);for(n=0;t.length>n;n++)i.push(a.pointAt(t[n])),r.push(s.pointAt(t[n]));return i.reverse(),i.push(i[0]),r.push(r[0]),r.concat(i)},createGridLines:function(e){var t,n=this,i=n.options,r=n.radarMajorGridLinePositions(),o=e.majorAngles(),a=e.box.center(),s=[];return i.majorGridLines.visible&&(s=n.renderGridLines(a,r,o,i.majorGridLines)),i.minorGridLines.visible&&(t=n.radarMinorGridLinePositions(),A(s,n.renderGridLines(a,t,o,i.minorGridLines))),s},renderGridLines:function(e,t,n,i){var r,o,a,s,l,c={stroke:{width:i.width,color:i.color,dashType:i.dashType}},u=this.gridLinesVisual();for(o=0;t.length>o;o++)if((r=e.y-t[o])>0)if(s=new E.Circle([e.x,e.y],r),i.type===se)u.append(new M.Circle(s,c));else{for(l=new M.Path(c),a=0;n.length>a;a++)l.lineTo(s.pointAt(n[a]));l.close(),u.append(l)}return u.children},getValue:function(e){var t,n,r,o,a,s,l=this,c=l.options,u=l.lineBox(),d=l.plotArea.polarAxis,h=d.majorAngles(),p=d.box.center(),f=e.distanceTo(p),g=f;return c.majorGridLines.type!==se&&h.length>1&&(t=e.x-p.x,n=e.y-p.y,r=(C.atan2(n,t)/ce+540)%360,h.sort(function(e,t){return i(e,r)-i(t,r)}),o=i(h[0],h[1])/2,s=180-i(r,h[0])-(a=90-o),g=f*(C.sin(s*ce)/C.sin(a*ce))),l.axisType().fn.getValue.call(l,new Q(u.x1,u.y2-g))}},o=G.extend({radarMajorGridLinePositions:function(){return this.getTickPositions(this.options.majorUnit)},radarMinorGridLinePositions:function(){var e=this.options,t=0;return e.majorGridLines.visible&&(t=e.majorUnit),this.getTickPositions(e.minorUnit,t)},axisType:function(){return G}}),S(o.fn,r),a=q.extend({radarMajorGridLinePositions:function(){var e=[];return this.traverseMajorTicksPositions(function(t){e.push(t)},this.options.majorGridLines),e},radarMinorGridLinePositions:function(){var e=[];return this.traverseMinorTicksPositions(function(t){e.push(t)},this.options.minorGridLines),e},axisType:function(){return q}}),S(a.fn,r),s=P.extend({init:function(e){var t=this;P.fn.init.call(t,e),(e=t.options).minorUnit=e.minorUnit||t.options.majorUnit/2},options:{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:ie(10)},majorGridLines:{color:"#000",visible:!0,width:1},minorGridLines:{color:"#aaa"}},getDivisions:function(e){return G.fn.getDivisions.call(this,e)-1},reflow:function(e){this.box=e,this.reflowLabels()},reflowLabels:function(){var e,t,n=this,i=n.options,r=i.labels,o=r.skip||0,a=r.step||1,s=new B,l=n.intervals(i.majorUnit,o,a),c=n.labels;for(t=0;c.length>t;t++)c[t].reflow(s),e=c[t].box,c[t].reflow(n.getSlot(l[t]).adjacentBox(0,e.width(),e.height()))},lineBox:function(){return this.box},intervals:function(e,t,n,i){var r,o,a=this.options,s=this.getDivisions(e),l=a.min,c=[];for(t=t||0,n=n||1,o=t;s>o;o+=n)r=(360+l+o*e)%360,i&&I.inArray(r,i)||c.push(r);return c},majorIntervals:function(){return this.intervals(this.options.majorUnit)},minorIntervals:function(){return this.intervals(this.options.minorUnit)},intervalAngle:function(e){return(540-e-this.options.startAngle)%360},majorAngles:ke.fn.majorAngles,createLine:function(){return[]},majorGridLineAngles:function(e){var t=this.options.majorGridLines;return this.gridLineAngles(e,this.options.majorUnit,t.skip,t.step)},minorGridLineAngles:function(e,t){var n=this.options,i=n.minorGridLines,r=n.majorGridLines,o=t?this.intervals(n.majorUnit,r.skip,r.step):null;return this.gridLineAngles(e,this.options.minorUnit,i.skip,i.step,o)},createPlotBands:ke.fn.createPlotBands,plotBandSlot:function(e){return this.getSlot(e.from,e.to)},getSlot:function(e,t){var n,i=this.options,r=i.startAngle,o=this.box;return e=oe(e,i.min,i.max),t=oe(t||e,e,i.max),i.reverse&&(e*=-1,t*=-1),(e=(540-e-r)%360)>(t=(540-t-r)%360)&&(n=e,e=t,t=n),new X(o.center(),0,o.height()/2,e,t-e)},slot:function(e,t){var n,i,r,o,a=this.options,s=360-a.startAngle,l=this.getSlot(e,t);return I.util.defined(t)||(t=e),r=C.min(e,t),o=C.max(e,t),a.reverse?(n=r,i=o):(n=360-o,i=360-r),n=(n+s)%360,i=(i+s)%360,new E.Arc([l.c.x,l.c.y],{startAngle:n,endAngle:i,radiusX:l.r,radiusY:l.r})},getValue:function(e){var t=this.options,n=this.box.center(),i=e.x-n.x,r=e.y-n.y,o=C.round(C.atan2(r,i)/ce),a=t.startAngle;return t.reverse||(o*=-1,a*=-1),(o+a+360)%360},range:G.fn.range,labelsCount:G.fn.labelsCount,createAxisLabel:G.fn.createAxisLabel}),S(s.fn,we),l=O.extend({options:{gap:1,spacing:0},reflow:function(e){var t,n,i=this.options,r=this.children,o=i.gap,a=i.spacing,s=r.length,l=s+o+a*(s-1),c=e.angle/l,u=e.startAngle+c*(o/2);for(n=0;s>n;n++)(t=e.clone()).startAngle=u,t.angle=c,r[n].sector&&(t.r=r[n].sector.r),r[n].reflow(t),r[n].sector=t,u+=c+c*a}}),c=O.extend({reflow:function(e){var t,n,i=this,r=i.options.isReversed,o=i.children,a=o.length,s=r?a-1:0,l=r?-1:1;for(i.box=new B,n=s;n>=0&&a>n;n+=l)(t=o[n].sector).startAngle=e.startAngle,t.angle=e.angle}}),u=U.extend({init:function(e,t){U.fn.init.call(this,e,null,t)},options:{overlay:{gradient:null},labels:{distance:10}}}),d=F.extend({pointType:function(){return u},clusterType:function(){return l},stackType:function(){return c},categorySlot:function(e,t){return e.getSlot(t)},pointSlot:function(e,t){var n=e.clone(),i=e.c.y;return n.r=i-t.y1,n.ir=i-t.y2,n},reflow:H.fn.reflow,reflowPoint:function(e,t){e.sector=t,e.reflow()},options:{clip:!1,animation:{type:"pie"}},createAnimation:function(){this.options.animation.center=this.box.toRect().center(),F.fn.createAnimation.call(this)}}),h=W.extend({options:{clip:!1},pointSlot:function(e,t){var n=e.c.y-t.y1,i=Q.onCircle(e.c,e.middle(),n);return new B(i.x,i.y,i.x,i.y)},createSegment:function(e,t,n){var i;return i=new(t.style==ve?te:j)(e,t,n),e.length===t.data.length&&(i.options.closed=!0),i}}),p=R.extend({points:function(){return j.fn.points.call(this,this.stackPoints)}}),f=ne.extend({closeFill:e.noop}),g=h.extend({createSegment:function(e,t,n,i){var r,o,a=this.options.isStacked;return(t.line||{}).style===ve?(o=new f(e,i,a,t,n)).options.closed=!0:(a&&n>0&&i&&(r=i.linePoints.slice(0).reverse()),e.push(e[0]),o=new p(e,r,t,n)),o},seriesMissingValues:function(e){return e.missingValues||_e}}),m=K.extend({pointSlot:function(e,t){var n=e.c.y-t.y1,i=Q.onCircle(e.c,e.startAngle,n);return new B(i.x,i.y,i.x,i.y)},options:{clip:!1}}),v=Z.extend({pointSlot:m.fn.pointSlot,options:{clip:!1}}),_=R.extend({points:function(){var e=this,t=e.parent.plotArea.polarAxis.box.center(),n=e.stackPoints,i=j.fn.points.call(e,n);return i.unshift([t.x,t.y]),i.push([t.x,t.y]),i}}),y=ne.extend({closeFill:function(e){var t=this._polarAxisCenter();e.lineTo(t.x,t.y)},_polarAxisCenter:function(){return this.parent.plotArea.polarAxis.box.center()},strokeSegments:function(){var e,t,n,i=this._strokeSegments;return i||(e=this._polarAxisCenter(),t=new V(!1),(n=j.fn.points.call(this)).push(e),(i=this._strokeSegments=t.process(n)).pop()),i}}),b=v.extend({createSegment:function(e,t,n){return(t.line||{}).style==ve?new y(e,null,!1,t,n):new _(e,[],t,n)},createMissingValue:function(e,t){var n;return I.hasValue(e.x)&&"interpolate"!=t&&(n={x:e.x,y:e.y},t==_e&&(n.y=0)),n},seriesMissingValues:function(e){return e.missingValues||_e},_hasMissingValuesGap:function(){var e,t=this.options.series;for(e=0;t.length>e;e++)if("gap"===this.seriesMissingValues(t[e]))return!0},sortPoints:function(e){var t,i,r;if(e.sort(n),this._hasMissingValuesGap())for(r=0;e.length>r;r++)(i=e[r])&&(t=i.value,I.hasValue(t.y)||"gap"!==this.seriesMissingValues(i.series)||delete e[r]);return e}}),k=(w=$.extend({init:function(e,t){this.valueAxisRangeTracker=new L,$.fn.init.call(this,e,t)},render:function(){var e=this;e.addToLegend(e.series),e.createPolarAxis(),e.createCharts(),e.createValueAxis()},alignAxes:function(){var e=this.valueAxis,t=e.range(),n=e.options.reverse?t.max:t.min,i=e.getSlot(n),r=this.polarAxis.getSlot(0).c,o=e.box.translate(r.x-i.x1,r.y-i.y1);e.reflow(o)},createValueAxis:function(){var e,t,n,i,r=this,s=r.valueAxisRangeTracker,l=s.query(),c=r.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});"log"===c.type?(n=a,i={min:.1,max:1}):(n=o,i={min:0,max:1}),(e=s.query(name)||l||i)&&l&&(e.min=C.min(e.min,l.min),e.max=C.max(e.max,l.max)),t=new n(e.min,e.max,c),r.valueAxis=t,r.appendAxis(t)},reflowAxes:function(){var e,t=this,n=t.options.plotArea,i=t.valueAxis,r=t.polarAxis,o=t.box,a=.15*C.min(o.width(),o.height()),s=ie(n.padding||{},a),l=o.clone().unpad(s),c=l.clone().shrink(0,l.height()/2);r.reflow(l),i.reflow(c),e=i.lineBox().height()-i.box.height(),i.reflow(i.box.unpad({top:e})),t.axisBox=l,t.alignAxes(l)},backgroundBox:function(){return this.box}})).extend({options:{categoryAxis:{categories:[]},valueAxis:{}},createPolarAxis:function(){var e,t=this;e=new ke(t.options.categoryAxis),t.polarAxis=e,t.categoryAxis=e,t.appendAxis(e)},valueAxisOptions:function(e){var t=this;return t._hasBarCharts&&S(e,{majorGridLines:{type:se},minorGridLines:{type:se}}),t._isStacked100&&S(e,{roundToMajorUnit:!1,labels:{format:"P0"}}),S(e,t.options.valueAxis)},appendChart:N.fn.appendChart,createCharts:function(){var e=this,t=e.filterVisibleSeries(e.series),n=e.panes[0];e.createAreaChart(re(t,[fe]),n),e.createLineChart(re(t,[me]),n),e.createBarChart(re(t,[ge]),n)},chartOptions:function(e){var t,n,i={series:e},r=e[0];return r&&(t=this.filterVisibleSeries(e),n=r.stack,i.isStacked=n&&t.length>1,i.isStacked100=n&&"100%"===n.type&&t.length>1,i.isStacked100&&(this._isStacked100=!0)),i},createAreaChart:function(e,t){if(0!==e.length){var n=new g(this,this.chartOptions(e));this.appendChart(n,t)}},createLineChart:function(e,t){if(0!==e.length){var n=new h(this,this.chartOptions(e));this.appendChart(n,t)}},createBarChart:function(e,t){var n,i,r;0!==e.length&&(n=e[0],(i=this.chartOptions(e)).gap=n.gap,i.spacing=n.spacing,r=new d(this,i),this.appendChart(r,t),this._hasBarCharts=!0)},seriesCategoryAxis:function(){return this.categoryAxis},click:function(t,n){var i,r,o=t._eventCoordinates(n),a=new Q(o.x,o.y);i=this.categoryAxis.getCategory(a),r=this.valueAxis.getValue(a),null!==i&&null!==r&&t.trigger(ue,{element:e(n.target),category:i,value:r})},createCrosshairs:e.noop}),x=w.extend({options:{xAxis:{},yAxis:{}},createPolarAxis:function(){var e,t=this;e=new s(t.options.xAxis),t.polarAxis=e,t.axisX=e,t.appendAxis(e)},valueAxisOptions:function(e){return S(e,{majorGridLines:{type:se},minorGridLines:{type:se}},this.options.yAxis)},createValueAxis:function(){var e=this;w.fn.createValueAxis.call(e),e.axisY=e.valueAxis},appendChart:function(e,t){this.valueAxisRangeTracker.update(e.yAxisRanges),$.fn.appendChart.call(this,e,t)},createCharts:function(){var e=this,t=e.filterVisibleSeries(e.series),n=e.panes[0];e.createLineChart(re(t,[he]),n),e.createScatterChart(re(t,[pe]),n),e.createAreaChart(re(t,[de]),n)},createLineChart:function(e,t){if(0!==e.length){var n=new v(this,{series:e});this.appendChart(n,t)}},createScatterChart:function(e,t){if(0!==e.length){var n=new m(this,{series:e});this.appendChart(n,t)}},createAreaChart:function(e,t){if(0!==e.length){var n=new b(this,{series:e});this.appendChart(n,t)}},click:function(t,n){var i,r,o=t._eventCoordinates(n),a=new Q(o.x,o.y);i=this.axisX.getValue(a),r=this.axisY.getValue(a),null!==i&&null!==r&&t.trigger(ue,{element:e(n.target),x:i,y:r})},createCrosshairs:e.noop}),Y.current.register(x,ye),Y.current.register(k,be),J.current.register(ye,["x","y"],["color"]),J.current.register(be,["value"],["color"]),I.DefaultAggregates.current.register(be,{value:"max",color:"first"}),S(I,{PolarAreaChart:b,PolarAxis:s,PolarLineChart:v,PolarPlotArea:x,RadarAreaChart:g,RadarBarChart:d,RadarCategoryAxis:ke,RadarClusterLayout:l,RadarLineChart:h,RadarNumericAxis:o,RadarPlotArea:k,SplinePolarAreaSegment:y,SplineRadarAreaSegment:f,RadarStackLayout:c})}(window.kendo.jQuery),function(e,t){var n,i=window.kendo,r=i.deepExtend,o=e.extend,a=i.isFunction,s=i.template,l=i.util,c=l.append,u=i.drawing,d=i.geometry,h=i.dataviz,p=i.drawing.Color,f=h.ChartElement,g=h.PieChartMixin,m=h.PlotAreaBase,v=h.PlotAreaFactory,_=h.Point2D,y=h.Box2D,b=h.SeriesBinder,w=h.TextBox,k=h.autoFormat,x=h.evalOptions,C=l.limitValue,T=h.seriesTotal,S="funnel",D="white",A=m.extend({render:function(){var e=this.series;this.createFunnelChart(e)},createFunnelChart:function(e){var t=this,n=e[0],i=new M(t,{series:e,legend:t.options.legend,neckRatio:n.neckRatio,dynamicHeight:n.dynamicHeight,dynamicSlope:n.dynamicSlope,segmentSpacing:n.segmentSpacing,highlight:n.highlight});t.appendChart(i)},appendChart:function(e,t){m.fn.appendChart.call(this,e,t),c(this.options.legend.items,e.legendItems)}}),M=f.extend({init:function(e,t){var n=this;f.fn.init.call(n,t),n.plotArea=e,n.points=[],n.labels=[],n.legendItems=[],n.render()},options:{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:"center",position:"center"}},formatPointValue:function(e,t){return k(t,e.value)},render:function(){var e,n,i,o,s,l,c,u=this,d=u.options,h=u.plotArea.options.seriesColors||[],p=h.length,f=d.series[0],g=f.data;if(g)for(i=T(f),s=0;g.length>s;s++)null!==(o=(e=b.current.bindPoint(f,s)).valueFields.value)&&o!==t&&(n=e.fields,a(f.color)||(f.color=n.color||h[s%p]),n=r({index:s,owner:u,series:f,category:n.category,dataItem:g[s],percentage:Math.abs(o)/i,visibleInLegend:n.visibleInLegend,visible:n.visible},n),l=u.createSegment(o,n),c=u.createLabel(o,n),l&&c&&l.append(c))},evalSegmentOptions:function(e,t,n){var i=n.series;x(e,{value:t,series:i,dataItem:n.dataItem,index:n.index},{defaults:i._defaults,excluded:["data","toggle","visual"]})},createSegment:function(e,i){var a,s=this,l=r({},i.series);return s.evalSegmentOptions(l,e,i),s.createLegendItem(e,l,i),!1!==i.visible?(a=new n(e,l,i),o(a,i),s.append(a),s.points.push(a),a):t},createLabel:function(e,n){var i,o,a=this,l=n.series,c=n.dataItem,u=r({},a.options.labels,l.labels),d=e;return u.visible?(u.template?d=s(u.template)({dataItem:c,value:e,percentage:n.percentage,category:n.category,series:l}):u.format&&(d=k(u.format,d)),u.color||"center"!==u.align||(o=new p(l.color).percBrightness(),u.color=o>180?"black":D),a.evalSegmentOptions(u,e,n),i=new w(d,r({vAlign:u.position},u)),a.labels.push(i),i):t},labelPadding:function(){var e,t,n,i=this.labels,r={left:0,right:0};for(n=0;i.length>n;n++)"center"!==(e=i[n].options.align)&&(t=i[n].box.width(),"left"===e?r.left=Math.max(r.left,t):r.right=Math.max(r.right,t));return r},reflow:function(t){var n,i,r,o,a,s,l,c,u,h,p,f=this,g=f.options,m=f.points,v=m.length,_=1>=g.neckRatio,y=t.clone().unpad(f.labelPadding()),b=y.width(),w=0,k=_?0:(b-b/g.neckRatio)/2,x=g.segmentSpacing,T=g.dynamicSlope,S=y.height()-x*(v-1),D=_?g.neckRatio*b:b;if(v){if(T)for(l=m[0],c=l,e.each(m,function(e,t){t.percentage>c.percentage&&(c=t)}),k=(b-(r=l.percentage/c.percentage*b))/2,n=0;v>n;n++)a=m[n].percentage,h=(u=m[n+1])?u.percentage:a,o=m[n].points=[],i=g.dynamicHeight?S*a:S/v,s=C(s=(b-r*(h/a))/2,0,b),o.push(new d.Point(y.x1+k,y.y1+w)),o.push(new d.Point(y.x1+b-k,y.y1+w)),o.push(new d.Point(y.x1+b-s,y.y1+i+w)),o.push(new d.Point(y.x1+s,y.y1+i+w)),k=s,w+=i+x,r=C(r*=h/a,0,b);else for(p=((_?b:b-2*k)-D)/2,n=0;v>n;n++)o=m[n].points=[],a=m[n].percentage,s=g.dynamicHeight?p*a:p/v,i=g.dynamicHeight?S*a:S/v,o.push(new d.Point(y.x1+k,y.y1+w)),o.push(new d.Point(y.x1+b-k,y.y1+w)),o.push(new d.Point(y.x1+b-k-s,y.y1+i+w)),o.push(new d.Point(y.x1+k+s,y.y1+i+w)),k+=s,w+=i+x;for(n=0;v>n;n++)m[n].reflow(t)}}});r(M.fn,g),n=f.extend({init:function(e,t,n){var i=this;f.fn.init.call(i,t),i.value=e,i.options.index=n.index},options:{color:D,border:{width:1}},reflow:function(e){var t=this,n=t.points,i=t.children[0];t.box=new y(n[0].x,n[0].y,n[1].x,n[2].y),i&&i.reflow(new y(e.x1,n[0].y,e.x2,n[2].y))},createVisual:function(){var e,t,n;f.fn.createVisual.call(this),t=(e=this.options).border,n=u.Path.fromPoints(this.points,{fill:{color:e.color,opacity:e.opacity},stroke:{color:t.color,opacity:t.opacity,width:t.width}}).close(),this.visual.append(n)},createHighlight:function(e){return u.Path.fromPoints(this.points,e)},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var e=u.Path.fromPoints(this.points).close();return{options:this.options,path:e}},highlightOverlay:function(e,t){var n,i,r=this.options.highlight||{};if(!1!==r.visible)return n=r.border||{},i=o({},t,{fill:r.color,stroke:n.color,strokeOpacity:n.opacity,strokeWidth:n.width,fillOpacity:r.opacity}),e.createPolyline(this.points,!0,i)},tooltipAnchor:function(e){var t=this.box;return new _(t.center().x-e/2,t.y1)},formatValue:function(e){return this.owner.formatPointValue(this,e)}}),r(n.fn,h.PointEventsMixin),v.current.register(A,[S]),b.current.register([S],["value"],["category","color","visibleInLegend","visible"]),r(h,{FunnelChart:M,FunnelSegment:n})}(window.kendo.jQuery),function(e,t){function n(e,t){var n=e.box,i=e.children[0].box,o=t.border||{},a=t.background||"",s=new A,l=M.fromRect(new E([n.x1,n.y1],[n.width(),n.height()]),{stroke:{}}),c=new I(e.text,new D(i.x1,i.y1),{font:t.font,fill:{color:t.color}}),u=r(c.bbox().clone(),t.padding),d=M.fromRect(u,{stroke:{color:o.width?o.color:"",width:o.width,dashType:o.dashType,lineJoin:"round",lineCap:"round"},fill:{color:a}});return s.append(l),s.append(d),s.append(c),s}function i(e,t,n){var i=b(e.from)?e.from:z,r=b(e.to)?e.to:B;return e.from=l.max(l.min(r,i),t),e.to=l.min(l.max(r,i),n),e}function r(e,t){var n=e.getOrigin(),i=e.getSize(),r=x(t);return e.setOrigin([n.x-r.left,n.y-r.top]),e.setSize([i.width+(r.left+r.right),i.height+(r.top+r.bottom)]),e}function o(e,t){var n=x(t);return n.left=-n.left,n.top=-n.top,n.right=-n.right,n.bottom=-n.bottom,r(e,n)}var a,s,l=Math,c=window.kendo,u=c.util,d=c.ui.Widget,h=c.deepExtend,p=c.dataviz,f=p.autoMajorUnit,g=p.ChartElement,m=p.NumericAxis,v=p.Axis,_=p.Box2D,y=c.Class,b=u.defined,w=u.isNumber,k=p.interpolateValue,x=p.getSpacing,C=p.round,T=p.geometry,S=p.drawing,D=T.Point,A=S.Group,M=S.Path,E=T.Rect,I=S.Text,R="arrowPointer",P="barPointer",L="#000",F=p.COORD_PRECISION,B=Number.MAX_VALUE,z=-Number.MAX_VALUE,H=.5,N=l.PI/180,O=180,V="inside",U="linear",W="needle",j="outside",q="radialPointer",G=y.extend({init:function(e,t){var n=this,i=e.options;g.fn.init.call(n,t),(t=n.options).fill=t.color,n.scale=e,t.value=b(t.value)?l.min(l.max(t.value,i.min),i.max):i.min},options:{color:L},value:function(e){var n=this,i=n.options,r=i.value,o=n.scale.options;return 0===arguments.length?r:(i._oldValue=i._oldValue!==t?i.value:o.min,i.value=l.min(l.max(e,o.min),o.max),n.elements&&n.repaint(),t)}}),$=G.extend({options:{shape:W,cap:{size:.05},arrow:{width:16,height:14},animation:{type:q,duration:150}},setRadius:function(e){var t=this;e&&(t.elements.clear(),t.render(t.parent,t.center,e))},setAngle:function(e){this.elements.transform(T.transform().rotate(e,this.center))},repaint:function(){var e=this,t=e.scale,n=e.options,i=t.slotAngle(n._oldValue),r=t.slotAngle(n.value);!1===n.animation.transitions?e.setAngle(r):new ne(e.elements,h(n.animation,{oldAngle:i,newAngle:r})).play()},render:function(){var e=this,t=e.scale,n=t.arc.center,i=e.options,r=(t.slotAngle(t.options.min),new A);return!1!==i.animation&&h(i.animation,{startAngle:0,center:n,reverse:t.options.reverse}),i.shape===W?r.append(e._renderNeedle(),e._renderCap()):r.append(e._renderArrow()),e.elements=r,e.setAngle(N),r},reflow:function(e){var t=this,n=t.center=e.center,i=t.radius=e.getRadiusX(),r=t.capSize=Math.round(i*t.options.cap.size);t.bbox=E.fromPoints(new D(n.x-r,n.y-r),new D(n.x+r,n.y+r))},_renderNeedle:function(){var e=this,t=e.options,n=e.scale.options.minorTicks.size,i=e.center,r=t.color,o=new M({fill:{color:r},stroke:{color:r,width:H}});return o.moveTo(i.x+e.radius-n,i.y).lineTo(i.x,i.y-e.capSize/2).lineTo(i.x,i.y+e.capSize/2).close(),o},_renderCap:function(){var e=this,t=e.options,n=t.cap.color||t.color,i=new T.Circle(e.center,e.capSize);return new S.Circle(i,{fill:{color:n},stroke:{color:n}})}}),Y=m.extend({init:function(e){var t=this;t.options=h({},t.options,e),t.options.majorUnit=t.options.majorUnit||f(t.options.min,t.options.max),t.options.minorUnit=t.options.minorUnit||t.options.majorUnit/10,v.fn.init.call(t,t.options)},options:{min:0,max:100,majorTicks:{size:15,align:V,color:L,width:H,visible:!0},minorTicks:{size:10,align:V,color:L,width:H,visible:!0},startAngle:-30,endAngle:210,labels:{position:V,padding:2}},render:function(e,t){var n=this,i=n.renderArc(e,t);n.bbox=i.bbox(),n.labelElements=n.renderLabels(),n.ticks=n.renderTicks(),n.ranges=n.renderRanges()},reflow:function(e){var n=this,i=e.center(),r=l.min(e.height(),e.width())/2;return n.bbox===t?n.render(i,r):(n.bbox=n.arc.bbox(),n.radius(n.arc.getRadiusX()),n.repositionRanges(),n.renderLabels(),t)},slotAngle:function(e){var t=this.options,n=t.startAngle,i=t.reverse,r=t.endAngle-n,o=t.min,a=t.max;return(i?t.endAngle-(e-o)/(a-o)*r:(e-o)/(a-o)*r+n)+O},renderLabels:function(){var e,i,r,o,a,s,c,u,d,h,f,g,m,v,_=this,y=_.options,b=y.majorTicks.size,w=_.arc.clone(),k=w.getRadiusX(),x=_.tickAngles(w,y.majorUnit),C=_.labels,S=C.length,M=y.labels,I=M.padding,R=.05*k,P=y.rangeSize=y.rangeSize||.1*k,L=y.ranges||[],F=new A;for(_.options.rangeDistance!==t?R=_.options.rangeDistance:_.options.rangeDistance=R,M.position===V&&(k-=b,L.length&&_.labelElements===t&&(k-=P+R),w.setRadiusX(k).setRadiusY(k)),c=0;S>c;c++)e=(a=C[c]).box.width()/2,i=a.box.height()/2,r=((o=x[c])-O)*N,h=M.position===V,u=(s=w.pointAt(o)).x+l.cos(r)*(e+I)*(h?1:-1),d=s.y+l.sin(r)*(i+I)*(h?1:-1),a.reflow(new p.Box2D(u-e,d-i,u+e,d+i)),g=new D(a.box.x1,a.box.y1),_.labelElements===t?(f=n(a,y.labels),F.append(f)):(m=(f=_.labelElements.children[c]).bbox().origin,(v=f.transform()||T.transform()).translate(g.x-m.x,g.y-m.y),f.transform(v)),_.bbox=E.union(_.bbox,f.bbox());return F},repositionRanges:function(){var e,t,n,i=this,r=i.ranges.children,o=i.options.rangeSize,a=i.options.rangeDistance;if(r.length>0){for(e=i.getRangeRadius(),i.options.labels.position===V&&(e+=o+a),t=e+o/2,n=0;r.length>n;n++)r[n]._geometry.setRadiusX(t).setRadiusY(t);i.bbox=E.union(i.bbox,i.ranges.bbox())}},renderRanges:function(){var e,t,n,i,r,o,a=this,s=a.arc,l=new A,c=a.rangeSegments(),u=c.length,d=a.options.reverse,h=(a.radius(),a.options.rangeSize),p=a.options.rangeDistance;if(u)for(i=a.getRangeRadius(),a.radius(a.radius()-h-p),o=0;u>o;o++)n=c[o],e=a.slotAngle(n[d?"to":"from"]),(t=a.slotAngle(n[d?"from":"to"]))-e!=0&&(r=new T.Arc(s.center,{radiusX:i+h/2,radiusY:i+h/2,startAngle:e,endAngle:t}),l.append(new S.Arc(r,{stroke:{width:h,color:n.color,opacity:n.opacity}})));return l},rangeSegments:function(){function e(e,t,n,i){return{from:e,to:t,color:n,opacity:i}}var t,n,r,o,a,s=this.options,l=s.ranges||[],c=l.length,u=s.rangePlaceholderColor,d=[],h=s.min,p=s.max;if(c)for(d.push(e(h,p,u)),o=0;c>o;o++)for(t=i(l[o],h,p),n=d.length,a=0;n>a;a++)if(r=d[a],t.from>=r.from&&r.to>=t.from){d.push(e(t.from,t.to,t.color,t.opacity)),t.to>=r.from&&r.to>=t.to&&d.push(e(t.to,r.to,u,t.opacity)),r.to=t.from;break}return d},getRangeRadius:function(){var e=this.options,t=e.majorTicks.size,n=e.rangeSize,i=e.rangeDistance,r=this.arc;return e.labels.position===j?r.getRadiusX()-t-i-n:r.getRadiusX()-n},renderArc:function(e,t){var n=this.options;return this.arc=new T.Arc(e,{radiusX:t,radiusY:t,startAngle:n.startAngle+O,endAngle:n.endAngle+O})},renderTicks:function(){function e(e,t,n,i){var r,o,a,s=new A,l=e.center,c=e.getRadiusX();if(i.visible)for(r=0;t.length>r;r++)o=e.pointAt(t[r]),a=new D(l.x+c-i.size,l.y).rotate(t[r],l),s.append(new M({stroke:{color:i.color,width:i.width}}).moveTo(o).lineTo(a));return s}var t=this,n=t.arc,i=t.options,r=i.labels.position,o=new A,a=i.majorTicks.size,s=i.minorTicks.size,l=n.clone(),c=l.getRadiusX();return t.majorTickAngles=t.tickAngles(n,i.majorUnit),t.majorTicks=e(l,t.majorTickAngles,i.majorUnit,i.majorTicks),o.append(t.majorTicks),t._tickDifference=a-s,r===j&&l.setRadiusX(c-a+s).setRadiusY(c-a+s),t.minorTickAngles=t.normalizeTickAngles(t.tickAngles(n,i.minorUnit)),t.minorTicks=e(l,t.minorTickAngles,i.minorUnit,i.minorTicks,i.majorUnit),o.append(t.minorTicks),o},normalizeTickAngles:function(e){var t,n=this.options,i=n.majorUnit/n.minorUnit;for(t=e.length-1;t>=0;t--)t%i==0&&e.splice(t,1);return e},tickAngles:function(e,t){var n,i=this.options,r=i.reverse,o=i.max-i.min,a=e.endAngle-e.startAngle,s=e.startAngle,l=o/t,c=a/l,u=[];for(r&&(s+=a,c=-c),n=0;l>n;n++)u.push(C(s,F)),s+=c;return C(s)<=e.endAngle&&u.push(s),u},radius:function(e){var n=this;return e?(n.arc.setRadiusX(e).setRadiusY(e),n.repositionTicks(n.majorTicks.children,n.majorTickAngles),n.repositionTicks(n.minorTicks.children,n.minorTickAngles,!0),t):n.arc.getRadiusX()},repositionTicks:function(e,t,n){var i,r,o,a,s,l=this,c=n&&l._tickDifference||0,u=l.arc,d=u.getRadiusX();for(n&&l.options.labels.position===j&&0!==c&&(u=l.arc.clone()).setRadiusX(d-c).setRadiusY(d-c),i=0;e.length>i;i++)r=u.pointAt(t[i]),o=e[i].segments,a=r.x-o[0].anchor().x,s=r.y-o[0].anchor().y,e[i].transform((new T.Transformation).translate(a,s))}}),Q=d.extend({init:function(t,n){var i,r,o,a,s,l=this,u=p.ui.themes||{};if(c.destroy(t),e(t).empty(),d.fn.init.call(l,t),l.wrapper=l.element,l._originalOptions=h({},n),a=u[o=(i=h({},l.options,n)).theme]||u[o.toLowerCase()],r=o&&a?a.gauge:{},l.options=h({},r,i),e.isArray(i.pointer))for(s=0;i.pointer.length>s;s++)l.options.pointer[s]=h({},r.pointer,i.pointer[s]);l.element.addClass("k-gauge"),l.surface=l._createSurface(),l.redraw()},options:{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}},destroy:function(){this.surface.destroy(),d.fn.destroy.call(this)},value:function(e){var n=this.pointers[0];return 0===arguments.length?n.value():(n.value(e),this._setValueOptions(e),t)},_draw:function(){var e=this.surface;e.clear(),e.draw(this._visuals)},exportVisual:function(){return this._visuals},allValues:function(t){var n,i=this.pointers,r=[];if(0===arguments.length){for(n=0;i.length>n;n++)r.push(i[n].value());return r}if(e.isArray(t))for(n=0;t.length>n;n++)w(t[n])&&i[n].value(t[n]);this._setValueOptions(t)},_setValueOptions:function(e){var t,n=[].concat(this.options.pointer);for(e=[].concat(e),t=0;e.length>t;t++)n[t].value=e[t]},_resize:function(){var e,t=this,n=t.options.transitions;for(t.options.transitions=!1,e=0;t.pointers.length>e;e++)t.pointers[e].options.animation.transitions=!1;for(t.redraw(),t.options.transitions=n,e=0;t.pointers.length>e;e++)t.pointers[e].options.animation.transitions=n},redraw:function(){var e,t=this,n=h(t._getSize(),t.options.gaugeArea),i=new E([0,0],[n.width,n.height]);t.surface.clear(),t.gaugeArea=t._createGaugeArea(),t.surface.element.css({width:n.width,height:n.height}),t._createModel(),e=o(i.bbox(),t._gaugeAreaMargin),t.reflow(e)},_createGaugeArea:function(){var e=this,t=e.options.gaugeArea,n=e.surface.size(),i=(e._gaugeAreaMargin=t.margin||5,t.border||{}),r=new E([0,0],[n.width,n.height]);return i.width>0&&(r=o(r,i.width)),M.fromRect(r,{stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})},_createSurface:function(){var t,n=this,i=n.options,r=n._getSize();return r=i.gaugeArea?h(r,i.gaugeArea):r,t=e("<div></div>").appendTo(n.element).css({width:r.width,height:r.height}),new S.Surface.create(t,{type:i.renderAs})},getSize:function(){return this._getSize()},_getSize:function(){var e=this.element,t=e.width(),n=e.height();return t||(t=200),n||(n=200),{width:t,height:n}}}),X=Q.extend({init:function(e,t){Q.fn.init.call(this,e,t),c.notify(this,p.ui)},options:{name:"RadialGauge",transitions:!0,gaugeArea:{background:""}},reflow:function(e){var t,n=this,i=n.pointers;for(n.scale.reflow(e),n._initialPlotArea=n.scale.bbox,t=0;i.length>t;t++)i[t].reflow(n.scale.arc),n._initialPlotArea=E.union(n._initialPlotArea,i[t].bbox);n.fitScale(e),n.alignScale(e),n._buildVisual(n.gaugeArea,i,n.scale),n._draw()},_buildVisual:function(e,t,n){var i,r,o=new A;for(o.append(e),o.append(n.ticks),o.append(n.ranges),r=0;t.length>r;r++)(i=t[r]).render(),o.append(i.elements),i.value(i.options.value);o.append(n.labelElements),this._visuals=o},fitScale:function(e){for(var t,n,i,r,o,a=this,s=a.scale.arc,c=a._initialPlotArea,u=l.abs(a.getDiff(c,e)),d=C(u,F),h=C(-u,F),p=0,f=0;!(!(f++<100)||(p=o===i?p+1:0,p>5)||d!=r&&(t=a.getPlotBox(d,e,s),t>=0&&2>=t)||h!=r&&(i=a.getPlotBox(h,e,s),i>=0&&2>=i)||(r=t>0&&i>0?2*d:0>t&&0>i?2*h:C((d+h)/2||1,F),n=a.getPlotBox(r,e,s),n>=0&&2>=n));)o=i,n>0?(h=r,i=n):(d=r,t=n)},getPlotBox:function(e,t,n){var i,r=this,o=r.scale,a=r.pointers,s=n.getRadiusX();for((n=n.clone()).setRadiusX(s+e).setRadiusY(s+e),o.arc=n,o.reflow(t),r.plotBbox=o.bbox,i=0;a.length>i;i++)a[i].reflow(n),r.plotBbox=E.union(r.plotBbox,a[i].bbox);return r.getDiff(r.plotBbox,t)},getDiff:function(e,t){return l.min(t.width()-e.width(),t.height()-e.height())},alignScale:function(e){var t,n=this,i=n.plotBbox.center(),r=e.center(),o=i.x-r.x,a=i.y-r.y,s=n.scale,l=n.pointers;for(s.arc.center.x-=o,s.arc.center.y-=a,s.reflow(e),t=0;l.length>t;t++)l[t].reflow(s.arc),n.plotBbox=E.union(s.bbox,l[t].bbox)},_createModel:function(){var t,n,i=this,r=i.options,o=r.pointer,a=i.scale=new Y(r.scale);for(i.pointers=[],o=e.isArray(o)?o:[o],n=0;o.length>n;n++)t=new $(a,h({},o[n],{animation:{transitions:r.transitions}})),i.pointers.push(t)}}),K=Q.extend({init:function(e,t){Q.fn.init.call(this,e,t),c.notify(this,p.ui)},options:{name:"LinearGauge",transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}},reflow:function(e){var t,n=this,i=n.pointers,r=e.origin.x,o=e.origin.y,a=new p.Box2D(r,r,r+e.width(),o+e.height());for(n.scale.reflow(a),t=0;i.length>t;t++)i[t].reflow();n.bbox=n._getBox(a),n._alignElements(),n._shrinkElements(),n._buildVisual(),n._draw()},_buildVisual:function(){var e,t,n=this,i=new A,r=n.scale.render(),o=n.pointers;for(i.append(n.gaugeArea),i.append(r),t=0;o.length>t;t++)e=o[t],i.append(e.render()),e.value(e.options.value);n._visuals=i},_createModel:function(){var t,n,i,r=this,o=r.options,a=o.pointer,s=r.scale=new Z(o.scale);for(r.pointers=[],a=e.isArray(a)?a:[a],i=0;a.length>i;i++)t="arrow"===(n=h({},a[i],{animation:{transitions:o.transitions}})).shape?new ee(s,n):new te(s,n),r.pointers.push(t)},_getSize:function(){var e=this.element,t=e.width(),n=e.height(),i=this.options.scale.vertical;return t||(t=i?60:200),n||(n=i?200:60),{width:t,height:n}},_getBox:function(e){var t,n,i=this.scale,r=this.pointers,o=e.center(),a=r[0].box.clone().wrap(i.box);for(n=0;r.length>n;n++)a.wrap(r[n].box.clone());return i.options.vertical?(t=a.width()/2,a=new _(o.x-t,e.y1,o.x+t,e.y2)):(t=a.height()/2,a=new _(e.x1,o.y-t,e.x2,o.y+t)),a},_alignElements:function(){var e,t,n=this,i=n.scale,r=n.pointers,o=i.box,a=r[0].box.clone().wrap(i.box),s=n.bbox;for(t=0;r.length>t;t++)a.wrap(r[t].box.clone());for(i.options.vertical?(e=s.center().x-a.center().x,i.reflow(new _(o.x1+e,s.y1,o.x2+e,s.y2))):(e=s.center().y-a.center().y,i.reflow(new _(s.x1,o.y1+e,s.x2,o.y2+e))),t=0;r.length>t;t++)r[t].reflow(n.bbox)},_shrinkElements:function(){var e,t=this,n=t.scale,i=t.pointers,r=n.box.clone(),o=n.options.vertical?"y":"x",a=i[0].box;for(e=0;i.length>e;e++)a.wrap(i[e].box.clone());for(r[o+1]+=l.max(r[o+1]-a[o+1],0),r[o+2]-=l.max(a[o+2]-r[o+2],0),n.reflow(r),e=0;i.length>e;e++)i[e].reflow(t.bbox)}}),Z=m.extend({init:function(e){var t=this;t.options=h({},t.options,e),t.options=h({},t.options,{labels:{mirror:t.options.mirror}}),t.options.majorUnit=t.options.majorUnit||f(t.options.min,t.options.max),v.fn.init.call(t,t.options),t.options.minorUnit=t.options.minorUnit||t.options.majorUnit/10},options:{min:0,max:50,majorTicks:{size:15,align:V,color:L,width:H,visible:!0},minorTicks:{size:10,align:V,color:L,width:H,visible:!0},line:{width:H},labels:{position:V,padding:2},mirror:!1,_alignLines:!1},render:function(){var e=this,t=e.elements=new A,n=e.renderLabels(),i=e.renderLine(),r=e.renderTicks(),o=e.renderRanges();return t.append(i,n,r,o),t},renderRanges:function(){var e,t,n,r,o,a=this,s=a.options,l=s.min,c=s.max,u=s.ranges||[],d=s.vertical,h=s.labels.mirror,p=new A,f=u.length,g=s.rangeSize||s.minorTicks.size/2;if(f)for(o=0;f>o;o++)e=i(u[o],l,c),t=a.getSlot(e.from,e.to),n=d?a.lineBox():t,r=d?t:a.lineBox(),d?n.x1-=g*(h?-1:1):r.y2+=g*(h?-1:1),p.append(M.fromRect(new E([n.x1,r.y1],[n.x2-n.x1,r.y2-r.y1]),{fill:{color:e.color,opacity:e.opacity},stroke:{}}));return p},renderLabels:function(){var e,t=this.options,i=this.labels,r=new A;for(e=0;i.length>e;e++)r.append(n(i[e],t.labels));return r},renderLine:function(){var e,t=this.options.line,n=this.lineBox(),i=new A;return t.width>0&&t.visible&&((e=new M({stroke:{color:t.color,dashType:t.dashType,width:t.width}})).moveTo(n.x1,n.y1).lineTo(n.x2,n.y2),i.append(e)),i},renderTicks:function(){function e(e,i){var a,l=e.length;if(i.visible)for(a=i.skip;l>a;a+=i.step)a%i.skipUnit!=0&&(s.tickX=o?r.x2:r.x2-i.size,s.tickY=o?r.y1-i.size:r.y1,s.position=e[a],n.append(t.renderAxisTick(s,i)))}var t=this,n=new A,i=t.options,r=t.lineBox(),o=i.labels.mirror,a=i.majorTicks.visible?i.majorUnit:0,s={_alignLines:i._alignLines,vertical:i.vertical};return e(t.getMajorTickPositions(),i.majorTicks),e(t.getMinorTickPositions(),h({},{skipUnit:a/i.minorUnit},i.minorTicks)),n},renderAxisTick:function(e,t){var n,i,r=e.tickX,o=e.tickY,a=e.position;return e.vertical?(n=new D(r,a),i=new D(r+t.size,a)):(n=new D(a,o),i=new D(a,o+t.size)),new M({stroke:{color:t.color,width:t.width}}).moveTo(n).lineTo(i)}}),J=G.extend({init:function(e,t){var n=this;G.fn.init.call(n,e,t),n.options=h({track:{visible:b(t.track)}},n.options)},options:{shape:P,track:{border:{width:1}},color:L,border:{width:1},opacity:1,margin:x(3),animation:{type:P},visible:!0},reflow:function(){var e,t,n,i=this,r=i.options,o=i.scale,a=o.lineBox(),s=r.track.size||r.size,l=r.size/2,c=o.options.mirror,u=x(r.margin),d=o.options.vertical,h=d?u[c?"left":"right"]:u[c?"bottom":"top"];h=c?-h:h,d?(n=new _(a.x1+h,a.y1,a.x1+h,a.y2),c?n.x1-=s:n.x2+=s,r.shape!==P&&(e=t=new _(a.x2+h,a.y1-l,a.x2+h,a.y2+l))):(n=new _(a.x1,a.y1-h,a.x2,a.y1-h),c?n.y2+=s:n.y1-=s,r.shape!==P&&(e=t=new _(a.x1-l,a.y1-h,a.x2+l,a.y1-h))),i.trackBox=n,i.pointerRangeBox=t,i.box=e||n.clone().pad(r.border.width)},getElementOptions:function(){var e=this.options;return new A,{fill:{color:e.color,opacity:e.opacity},stroke:b(e.border)?{color:e.border.width?e.border.color||e.color:"",width:e.border.width,dashType:e.border.dashType,opacity:e.opacity}:null}},_margin:function(){var e=this.options,t=this.scale,n=t.options.mirror,i=x(e.margin);return t.options.vertical?i[n?"left":"right"]:i[n?"bottom":"top"]}}),ee=J.extend({init:function(e,n){J.fn.init.call(this,e,n),this.options.size===t&&(this.options.size=.6*this.scale.options.majorTicks.size)},pointerShape:function(){var e=this.options,t=this.scale,n=e.size,i=t.options.vertical,r=n/2,o=t.options.mirror?-1:1;t.options.reverse;return i?[new D(0,0-r),new D(0-o*n,0),new D(0,0+r)]:[new D(0-r,0),new D(0,0+o*n),new D(0+r,0)]},repaint:function(){var e=this,t=e.scale,n=e.options,i=new a(e.elements,h(n.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:e._margin(n.margin),from:t.getSlot(n._oldValue),to:t.getSlot(n.value)}));!1===n.animation.transitions&&(i.options.duration=0),i.setup(),i.play()},render:function(){var e,t=this,n=t.options,i=new A,r=t.scale,o=t.getElementOptions(),a=t.pointerShape(n.value);return n.animation.type=R,i=new M({stroke:o.stroke,fill:o.fill}).moveTo(a[0]).lineTo(a[1]).lineTo(a[2]).close(),e=r.getSlot(n.value),i.transform(T.transform().translate(e.x1,e.y1)),t.elements=i,i}}),te=J.extend({init:function(e,n){J.fn.init.call(this,e,n),this.options.size===t&&(this.options.size=.3*this.scale.options.majorTicks.size)},pointerShape:function(e){var t,n,i,r=this,o=r.options,a=r.scale,s=a.options.vertical,l=a.options.mirror==s?-1:1,c=o.size*l,u=a.getSlot(a.options.min),d=a.getSlot(e),h=s?"y":"x",p=s?"x":"y",f=r._margin()*l,g=new D;return g[h]=u[h+"1"],g[p]=u[p+"1"],(t=new D)[h]=d[h+"1"],t[p]=d[p+"1"],s?(g.translate(f,0),t.translate(f,0)):(g.translate(0,f),t.translate(0,f)),n=t.clone(),i=g.clone(),s?(n.translate(c,0),i.translate(c,0)):(n.translate(0,c),i.translate(0,c)),[g,t,n,i]},repaint:function(){var e,t=this,n=t.scale,i=t.options,r=t.pointerShape(i.value),o=t.elements.children[0],a=t.pointerShape(i._oldValue);o.moveTo(r[0]).lineTo(r[1]).lineTo(r[2]).lineTo(r[3]).close(),e=new s(o,h(i.animation,{reverse:n.options.reverse,vertical:n.options.vertical,oldPoints:[a[1],a[2]],newPoints:[r[1],r[2]]})),!1===i.animation.transitions&&(e.options.duration=0),e.setup(),e.play()},render:function(){var e=new A,t=this.getElementOptions(),n=new M({stroke:t.stroke,fill:t.fill});return e.append(n),this.elements=e,e}}),ne=S.Animation.extend({init:function(e,t){S.Animation.fn.init.call(this,e,t),(t=this.options).duration=l.max(l.abs(t.newAngle-t.oldAngle)/t.duration*1e3,1)},options:{easing:U,duration:150},step:function(e){var t=this.options,n=k(t.oldAngle,t.newAngle,e);this.element.transform(T.transform().rotate(n,t.center))}});S.AnimationFactory.current.register(q,ne),a=S.Animation.extend({options:{easing:U,duration:250},setup:function(){var e,t,n=this.options,i=(this.element.bbox().width(),n.margin),r=n.from,o=n.to,a=n.vertical?"x1":"y1";n.mirror==n.vertical?(r[a]-=i,o[a]-=i):(r[a]+=i,o[a]+=i),e=this.fromScale=new D(r.x1,r.y1),t=this.toScale=new D(o.x1,o.y1),0!==n.duration&&(n.duration=l.max(e.distanceTo(t)/n.duration*1e3,1))},step:function(e){var t=k(this.fromScale.x,this.toScale.x,e),n=k(this.fromScale.y,this.toScale.y,e);this.element.transform(T.transform().translate(t,n))}}),S.AnimationFactory.current.register(R,a),s=S.Animation.extend({options:{easing:U,speed:250},setup:function(){var e=this.options,t=e.newPoints,n=e.oldPoints,i=this.axis=e.vertical?"y":"x",r=this.to=t[0][i],o=this.from=n[0][i];0!==e.duration&&(e.duration=l.max(l.abs(r-o)/e.speed*1e3,1)),this._set(o)},step:function(e){var t=k(this.from,this.to,e);this._set(t)},_set:function(e){var t="set"+this.axis.toUpperCase(),n=this.options.newPoints;n[0][t](e),n[1][t](e)}}),S.AnimationFactory.current.register(P,s),p.ui.plugin(X),p.ui.plugin(K),p.ExportMixin.extend(Q.fn),h(p,{Gauge:Q,RadialPointer:$,LinearPointer:J,ArrowLinearPointer:ee,BarLinearPointer:te,LinearScale:Z,RadialScale:Y,LinearGauge:K,RadialGauge:X})}(window.kendo.jQuery),function(e,t){function n(e,t,n){return e.substring(t,t+n)}var i,r,o,a,s,l,c=window.kendo,u=c.ui.Widget,d=e.extend,h=c.deepExtend,p=e.inArray,f=e.isPlainObject,g=c.drawing,m=c.geometry,v=c.util.defined,_=c.dataviz,y=_.Box2D,b=_.TextBox,w=/^\d+$/,k=/^[a-z0-9]+$/i,x=c.Class.extend({init:function(e){this.setOptions(e)},setOptions:function(e){var t=this;t.options=d({},t.options,e),t.quietZoneLength=t.options.addQuietZone?2*t.options.quietZoneLength:0},encode:function(e,t,n){var i=this;return v(e)&&(e+=""),i.initValue(e,t,n),i.options.addQuietZone&&i.addQuietZone(),i.addData(),i.options.addQuietZone&&i.addQuietZone(),{baseUnit:i.baseUnit,pattern:i.pattern}},options:{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0},initValue:function(){},addQuietZone:function(){this.pattern.push(this.options.quietZoneLength||10)},addData:function(){},invalidCharacterError:function(e){throw Error(c.format("Character '{0}' is not valid for symbology {1}",e,this.name))}}),C={},T=x.extend({minBaseUnitLength:.7,addData:function(){var e,t=this,n=t.value;for(t.addStart(),e=0;n.length>e;e++)t.addCharacter(n.charAt(e));t.options.addCheckSum&&t.pushCheckSum(),t.addStop(),t.prepareValues()},addCharacter:function(e){var t=this,n=t.characterMap[e];n||t.invalidCharacterError(e),t.addBase(n)},addBase:function(){}}),S={addCharacter:function(e){var t=this;t.characterMap[e]?t.addBase(t.characterMap[e]):e.charCodeAt(0)>127?t.invalidCharacterError(e):t.addExtended(e.charCodeAt(0))},addExtended:function(e){var n,i,r,o=this;for(i=0;o.extendedMappings.length>i;i++)if(n=o.extendedMappings[i].call(o,e)){for(r=0;n.length>r;r++)o.addBase(n[r]);return o.dataLength+=n.length-1,t}},extendedMappings:[function(e){if(e>=97&&122>=e){var t=this;return[t.characterMap[t.shiftCharacters[0]],t.characterMap[String.fromCharCode(e-32)]]}},function(e){if(e>=33&&58>=e){var t=this;return[t.characterMap[t.shiftCharacters[1]],t.characterMap[String.fromCharCode(e+32)]]}},function(e){if(e>=1&&26>=e){var t=this;return[t.characterMap[t.shiftCharacters[2]],t.characterMap[String.fromCharCode(e+64)]]}},function(e){var t,n,i,r=this;if(r.specialAsciiCodes[e])for(t=[],i=0;r.specialAsciiCodes[e].length>i;i++)t.push(r.characterMap[r.shiftCharacters[3]]),t.push(r.characterMap[r.specialAsciiCodes[e][i]]);else n=6*Math.floor(e/32)+(e-27)%32+64,t=[r.characterMap[r.shiftCharacters[3]],r.characterMap[String.fromCharCode(n)]];return t}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};C.code39=T.extend({name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",initValue:function(e,t,n){var i=this;i.width=t,i.height=n,i.value=e,i.dataLength=e.length,i.pattern=[],i.patternString=""},prepareValues:function(){var e,t,n=this,i=n.minBaseUnitLength,r=n.maxRatio,o=n.minRatio,a=Math.max(.15*n.width,24);if(a>n.height)throw Error("Insufficient Height. The minimum height for value: "+n.value+" is: "+a);for(;(e=n.getBaseUnit(r))<i&&r>o;)r=parseFloat((r-.1).toFixed(1));if(i>e)throw t=Math.ceil(n.getBaseWidth(o)*i),Error("Insufficient width. The minimum width for value: "+n.value+" is: "+t);n.ratio=r,n.baseUnit=e,n.patternString=n.patternString.substring(0,n.patternString.length-1),n.pattern=n.pattern.concat(n.patternString.replace(/ratio/g,r).split(n.splitCharacter))},getBaseUnit:function(e){return this.width/this.getBaseWidth(e)},getBaseWidth:function(e){var t=this,n=3*(e+2);return t.quietZoneLength+n*(t.dataLength+2)+t.gapWidth*(t.dataLength+1)},addStart:function(){var e=this;e.addPattern(e.characterMap.START.pattern),e.addCharacterGap()},addBase:function(e){this.addPattern(e.pattern),this.addCharacterGap()},addStop:function(){this.addPattern(this.characterMap.START.pattern)},addPattern:function(e){for(var t=0;e.length>t;t++)this.patternString+=this.patternMappings[e.charAt(t)]},addCharacterGap:function(){var e=this;e.patternString+=e.gapWidth+e.splitCharacter},patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}},options:{addCheckSum:!1}}),C.code39extended=C.code39.extend(h({},S,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})),C.code93=T.extend({name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,initValue:function(e,t,n){var i=this;i.value=e,i.width=t,i.height=n,i.pattern=[],i.values=[],i.dataLength=e.length},prepareValues:function(){var e=this;if(Math.max(.15*e.width,24)>e.height)throw Error("Insufficient Height");if(e.setBaseUnit(),e.minBaseUnitLength>e.baseUnit)throw Error("Insufficient Width")},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(9*(e.dataLength+2+2)+e.quietZoneLength+1)},addStart:function(){var e=this.characterMap.START.pattern;this.addPattern(e)},addStop:function(){var e=this;e.addStart(),e.pattern.push(e.characterMap.TERMINATION_BAR)},addBase:function(e){this.addPattern(e.pattern),this.values.push(e.value)},pushCheckSum:function(){var e,t,n=this,i=n._getCheckValues();for(n.checksum=i.join(""),t=0;i.length>t;t++)e=n.characterMap[n._findCharacterByValue(i[t])],n.addPattern(e.pattern)},_getCheckValues:function(){var e,t,n=this,i=n.values,r=i.length,o=0;for(t=r-1;t>=0;t--)o+=n.weightedValue(i[t],r-t,n.cCheckSumTotal);for(e=o%n.checkSumMod,o=n.weightedValue(e,1,n.kCheckSumTotal),t=r-1;t>=0;t--)o+=n.weightedValue(i[t],r-t+1,n.kCheckSumTotal);return[e,o%n.checkSumMod]},_findCharacterByValue:function(e){for(var t in this.characterMap)if(this.characterMap[t].value===e)return t},weightedValue:function(e,t,n){return(t%n||n)*e},addPattern:function(e){var t,n;for(n=0;e.length>n;n++)t=parseInt(e.charAt(n),10),this.pattern.push(t)},characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}}),C.code93extended=C.code93.extend(h({},S,{name:"Code 93 extended",pushCheckSum:function(){var e,t,n=this,i=n._getCheckValues();for(n.checksum=i.join(""),t=0;i.length>t;t++)e=i[t],n.shiftValuesAsciiCodes[e]?n.addExtended(n.shiftValuesAsciiCodes[e]):n.addPattern(n.characterMap[n._findCharacterByValue(e)].pattern)}})),r=(i=c.Class.extend({init:function(e){this.encoding=e},addStart:function(){},is:function(){},move:function(){},pushState:function(){}})).extend({FNC4:"FNC4",init:function(e,t){var n=this;n.encoding=e,n.states=t,n._initMoves(t)},addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var n=e.charCodeAt(t);return this.isCode(n)},move:function(e){for(var t=this,n=0;!t._moves[n].call(t,e)&&t._moves.length>n;)n++},pushState:function(e){var t,n,i=this,r=i.states,o=e.value,a=o.length;for(p("C",r)>=0&&(n=o.substr(e.index).match(/\d{4,}/g))&&(a=o.indexOf(n[0],e.index));(t=e.value.charCodeAt(e.index))>=0&&i.isCode(t)&&a>e.index;)i.encoding.addPattern(i.getValue(t)),e.index++},_initMoves:function(e){var t=this;t._moves=[],p(t.FNC4,e)>=0&&t._moves.push(t._moveFNC),p(t.shiftKey,e)>=0&&t._moves.push(t._shiftState),t._moves.push(t._moveState)},_moveFNC:function(e){return e.fnc?(e.fnc=!1,e.previousState==this.key):t},_shiftState:function(e){var n=this;return e.previousState==n.shiftKey&&(e.index+1>=e.value.length||n.encoding[n.shiftKey].is(e.value,e.index+1))?(n.encoding.addPattern(n.SHIFT),e.shifted=!0,!0):t},_moveState:function(){return this.encoding.addPattern(this.MOVE),!0},SHIFT:98}),(o={}).A=r.extend({key:"A",shiftKey:"B",isCode:function(e){return e>=0&&96>e},getValue:function(e){return 32>e?e+64:e-32},MOVE:101,START:103}),o.B=r.extend({key:"B",shiftKey:"A",isCode:function(e){return e>=32&&128>e},getValue:function(e){return e-32},MOVE:100,START:104}),o.C=i.extend({key:"C",addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var i=n(e,t,4);return(e.length>=t+4||2==e.length)&&w.test(i)},move:function(){this.encoding.addPattern(this.MOVE)},pushState:function(e){for(var t;(t=n(e.value,e.index,2))&&w.test(t)&&2==t.length;)this.encoding.addPattern(parseInt(t,10)),e.index+=2},getValue:function(e){return e},MOVE:99,START:105}),o.FNC4=i.extend({key:"FNC4",dependentStates:["A","B"],init:function(e,t){this.encoding=e,this._initSubStates(t)},addStart:function(e){var t=e.value.charCodeAt(0)-128,n=this._getSubState(t);this.encoding[n].addStart()},is:function(e,t){var n=e.charCodeAt(t);return this.isCode(n)},isCode:function(e){return e>=128&&256>e},pushState:function(e){var t,n=this,i=n._initSubState(e),r=n.encoding,o=i.value.length;if(e.index+=o,3>o)for(;o>i.index;i.index++)t=i.value.charCodeAt(i.index),i.state=n._getSubState(t),i.previousState!=i.state&&(i.previousState=i.state,r[i.state].move(i)),r.addPattern(r[i.state].MOVE),r.addPattern(r[i.state].getValue(t));else i.state!=i.previousState&&r[i.state].move(i),n._pushStart(i),r.pushData(i,n.subStates),e.value.length>e.index&&n._pushStart(i);e.fnc=!0,e.state=i.state},_pushStart:function(e){var t=this;t.encoding.addPattern(t.encoding[e.state].MOVE),t.encoding.addPattern(t.encoding[e.state].MOVE)},_initSubState:function(e){var t=this,n={value:t._getAll(e.value,e.index),index:0};return n.state=t._getSubState(n.value.charCodeAt(0)),n.previousState=e.previousState==t.key?n.state:e.previousState,n},_initSubStates:function(e){var t,n=this;for(n.subStates=[],t=0;e.length>t;t++)p(e[t],n.dependentStates)>=0&&n.subStates.push(e[t])},_getSubState:function(e){var t,n=this;for(t=0;n.subStates.length>t;t++)if(n.encoding[n.subStates[t]].isCode(e))return n.subStates[t]},_getAll:function(e,t){for(var n,i="";(n=e.charCodeAt(t++))&&this.isCode(n);)i+=String.fromCharCode(n-128);return i}}),o.FNC1=i.extend({key:"FNC1",startState:"C",dependentStates:["C","B"],startAI:"(",endAI:")",init:function(e,t){this.encoding=e,this.states=t},addStart:function(){this.encoding[this.startState].addStart()},is:function(){return p(this.key,this.states)>=0},pushState:function(e){var t,n,i,r=this,o=r.encoding,a=e.value.replace(/\s/g,""),s=RegExp("["+r.startAI+r.endAI+"]","g"),l=e.index,c={state:r.startState};for(o.addPattern(r.START);;){if(c.index=0,(t=(i=a.charAt(l)===r.startAI?2:0)>0?r.getBySeparator(a,l):r.getByLength(a,l)).ai.length)n=l+i+t.id.length+t.ai.length;else if(0>(n=a.indexOf(r.startAI,l+1))){if(a.length>l+t.ai.max+t.id.length+i)throw Error("Separators are required after variable length identifiers");n=a.length}if(c.value=a.substring(l,n).replace(s,""),r.validate(t,c.value),o.pushData(c,r.dependentStates),n>=a.length)break;l=n,c.state!=r.startState&&(o[r.startState].move(c),c.state=r.startState),t.ai.length||o.addPattern(r.START)}e.index=e.value.length},validate:function(e,t){var n=t.substr(e.id.length),i=e.ai;if(!i.type&&!w.test(n))throw Error("Application identifier "+e.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"==i.type&&!k.test(n))throw Error("Application identifier "+e.id+" is alphanumeric only but contains non alphanumeric character(s).");if(i.length&&i.length!==n.length)throw Error("Application identifier "+e.id+" must be "+i.length+" characters long.");if(i.min&&i.min>n.length)throw Error("Application identifier "+e.id+" must be at least "+i.min+" characters long.");if(i.max&&n.length>i.max)throw Error("Application identifier "+e.id+" must be at most "+i.max+" characters long.")},getByLength:function(e,t){var i,r,o,a=this;for(o=2;4>=o;o++)if(i=n(e,t,o),r=a.getAI(i)||a.getAI(i.substring(0,i.length-1)))return{id:i,ai:r};a.unsupportedAIError(i)},unsupportedAIError:function(e){throw Error(c.format("'{0}' is not a supported Application Identifier"),e)},getBySeparator:function(e,t){var n=this,i=e.indexOf(n.startAI,t),r=e.indexOf(n.endAI,i),o=e.substring(i+1,r),a=n.getAI(o)||n.getAI(o.substr(o.length-1));return a||n.unsupportedAIError(o),{ai:a,id:o}},getAI:function(e){var t,n,i,r=this.applicationIdentifiers,o=r.multiKey;if(r[e])return r[e];for(t=0;o.length>t;t++){if(o[t].ids&&p(e,o[t].ids)>=0)return o[t].type;if(o[t].ranges)for(n=o[t].ranges,i=0;n.length>i;i++)if(e>=n[i][0]&&n[i][1]>=e)return o[t].type}},applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102}),a=x.extend({init:function(e){x.fn.init.call(this,e),this._initStates()},_initStates:function(){var e,t=this;for(e=0;t.states.length>e;e++)t[t.states[e]]=new o[t.states[e]](t,t.states)},initValue:function(e,t,n){var i=this;i.pattern=[],i.value=e,i.width=t,i.height=n,i.checkSum=0,i.totalUnits=0,i.index=0,i.position=1},addData:function(){var e=this,t={value:e.value,index:0,state:""};0!==e.value.length&&(t.state=t.previousState=e.getNextState(t,e.states),e.addStart(t),e.pushData(t,e.states),e.addCheckSum(),e.addStop(),e.setBaseUnit())},pushData:function(e,t){for(var n,i=this;i[e.state].pushState(e),!(e.index>=e.value.length);)e.shifted?(n=e.state,e.state=e.previousState,e.previousState=n,e.shifted=!1):(e.previousState=e.state,e.state=i.getNextState(e,t),i[e.state].move(e))},addStart:function(e){this[e.state].addStart(e),this.position=1},addCheckSum:function(){var e=this;e.checksum=e.checkSum%103,e.addPattern(e.checksum)},addStop:function(){this.addPattern(this.STOP)},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addPattern:function(e){var t,n,i=this,r=""+i.characterMap[e];for(n=0;r.length>n;n++)t=parseInt(r.charAt(n),10),i.pattern.push(t),i.totalUnits+=t;i.checkSum+=e*i.position++},getNextState:function(e,t){for(var n=0;t.length>n;n++)if(this[t[n]].is(e.value,e.index))return t[n];this.invalidCharacterError(e.value.charAt(e.index))},characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106}),C.code128a=a.extend({name:"Code 128 A",states:["A"]}),C.code128b=a.extend({name:"Code 128 B",states:["B"]}),C.code128c=a.extend({name:"Code 128 C",states:["C"]}),C.code128=a.extend({name:"Code 128",states:["C","B","A","FNC4"]}),C["gs1-128"]=a.extend({name:"Code GS1-128",states:["FNC1","C","B"]}),s=x.extend({initValue:function(e,t){var n=this;n.pattern=[],n.value=e,n.checkSumLength=0,n.width=t},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(12*(e.value.length+e.checkSumLength)+e.quietZoneLength+7)},addData:function(){var e,t=this,n=t.value;for(t.addPattern(t.START),e=0;n.length>e;e++)t.addCharacter(n.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.STOP),t.setBaseUnit()},addCharacter:function(e){var t=this,n=t.characterMap[e];n||t.invalidCharacterError(e),t.addPattern(n)},addPattern:function(e){for(var t=0;e.length>t;t++)this.pattern.push(parseInt(e.charAt(t),10))},addCheckSum:function(){var e,t=this,n=t.checkSums[t.checkSumType].call(t.checkSums,t.value);for(t.checksum=n.join(""),e=0;n.length>e;e++)t.checkSumLength++,t.addPattern(t.characterMap[n[e]])},checkSums:{Modulo10:function(e){var t,n,i,r=[0,""],o=e.length%2;for(t=0;e.length>t;t++)r[(t+o)%2]+=parseInt(e.charAt(t),10);for(i=r[0],n=""+2*r[1],t=0;n.length>t;t++)i+=parseInt(n.charAt(t),10);return[(10-i%10)%10]},Modulo11:function(e){var t,n,i=0,r=e.length;for(n=0;r>n;n++)i+=(((r-n)%6||6)+1)*e.charAt(n);return 10!=(t=(11-i%11)%11)?[t]:[1,0]},Modulo11Modulo10:function(e){var t,n=this.Modulo11(e);return t=e+n[0],n.concat(this.Modulo10(t))},Modulo10Modulo10:function(e){var t,n=this.Modulo10(e);return t=e+n[0],n.concat(this.Modulo10(t))}},characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:""}),C.msimod10=s.extend({name:"MSI Modulo10",checkSumType:"Modulo10"}),C.msimod11=s.extend({name:"MSI Modulo11",checkSumType:"Modulo11"}),C.msimod1110=s.extend({name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"}),C.msimod1010=s.extend({name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"}),C.code11=x.extend({name:"Code 11",cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221",initValue:function(e,t){var n=this;n.pattern=[],n.value=e,n.width=t,n.totalUnits=0},addData:function(){var e,t=this,n=t.value;for(t.addPattern(t.START),e=0;n.length>e;e++)t.addCharacter(n.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.STOP),t.setBaseUnit()},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addCheckSum:function(){var e,t=this,n=t.value,i=n.length,r=t.getWeightedSum(n,i,t.cCheckSumTotal)%t.checkSumMod;t.checksum=r+"",t.addPattern(t.characterMap[r]),++i>=t.kCheckSumMinLength&&(e=(r+t.getWeightedSum(n,i,t.kCheckSumTotal))%t.checkSumMod,t.checksum+=e,t.addPattern(t.characterMap[e]))},getWeightedSum:function(e,t,n){var i,r=0;for(i=0;e.length>i;i++)r+=this.weightedValue(this.getValue(e.charAt(i)),t,i,n);return r},weightedValue:function(e,t,n,i){return((t-n)%i||i)*e},getValue:function(e){var t=this;return isNaN(e)?(e!==t.DASH&&t.invalidCharacterError(e),t.DASH_VALUE):parseInt(e,10)},addCharacter:function(e){var t=this,n=t.getValue(e),i=t.characterMap[n];t.addPattern(i)},addPattern:function(e){var t,n;for(n=0;e.length>n;n++)t=parseInt(e.charAt(n),10),this.pattern.push(t),this.totalUnits+=t},characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],options:{addCheckSum:!0}}),C.postnet=x.extend({name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",initValue:function(e,t,n){var i=this;i.height=n,i.width=t,i.baseHeight=n/2,i.value=e.replace(RegExp(i.DIGIT_SEPARATOR,"g"),""),i.pattern=[],i.validate(i.value),i.checkSum=0,i.setBaseUnit()},addData:function(){var e,t=this,n=t.value;for(t.addPattern(t.START),e=0;n.length>e;e++)t.addCharacter(n.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.START),t.pattern.pop()},addCharacter:function(e){var t=this,n=t.characterMap[e];t.checkSum+=parseInt(e,10),t.addPattern(n)},addCheckSum:function(){var e=this;e.checksum=(10-e.checkSum%10)%10,e.addCharacter(e.checksum)},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(10*(e.value.length+1)+3+e.quietZoneLength)},validate:function(e){var t=this;if(w.test(e)||t.invalidCharacterError(e.match(/[^0-9]/)[0]),p(e.length,t.VALID_CODE_LENGTHS)<0)throw Error("Invalid value length. Valid lengths for the Postnet symbology are "+t.VALID_CODE_LENGTHS.join(","))},addPattern:function(e){var t,n,i=this;for(n=0;e.length>n;n++)t=i.height-i.baseHeight*e.charAt(n),i.pattern.push({width:1,y1:t,y2:i.height}),i.pattern.push(1)},characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]}),C.ean13=x.extend({initValue:function(e,t,n){if(12!=(e+="").length||/\D/.test(e))throw Error('The value of the "EAN13" encoding should be 12 symbols');var i=this;i.pattern=[],i.options.height=n,i.baseUnit=t/(95+i.quietZoneLength),i.value=e,i.checksum=i.calculateChecksum(),i.leftKey=e[0],i.leftPart=e.substr(1,6),i.rightPart=e.substr(7)+i.checksum},addData:function(){var e=this;e.addPieces(e.characterMap.start),e.addSide(e.leftPart,e.leftKey),e.addPieces(e.characterMap.middle),e.addSide(e.rightPart),e.addPieces(e.characterMap.start)},addSide:function(e,t){var n,i=this;for(n=0;e.length>n;n++)t&&parseInt(i.keyTable[t].charAt(n),10)?i.addPieces(Array.prototype.slice.call(i.characterMap.digits[e.charAt(n)]).reverse(),!0):i.addPieces(i.characterMap.digits[e.charAt(n)],!0)},addPieces:function(e,t){var n;for(n=0;e.length>n;n++)this.pattern.push(t?{y1:0,y2:.95*this.options.height,width:e[n]}:e[n])},calculateChecksum:function(){var e,t=0,n=0,i=this.value.split("").reverse().join("");for(e=0;i.length>e;e++)e%2?n+=parseInt(i.charAt(e),10):t+=parseInt(i.charAt(e),10);return(10-(3*t+n)%10)%10},keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}}),C.ean8=C.ean13.extend({initValue:function(e,t,n){var i=this;if(7!=e.length||/\D/.test(e))throw Error("Invalid value provided");i.value=e,i.options.height=n,i.checksum=i.calculateChecksum(i.value),i.leftPart=i.value.substr(0,4),i.rightPart=i.value.substr(4)+i.checksum,i.pattern=[],i.baseUnit=t/(67+i.quietZoneLength)}}),l=u.extend({init:function(t,n){var i=this;u.fn.init.call(i,t,n),i.element=e(t),i.wrapper=i.element,i.element.addClass("k-barcode").css("display","block"),i.surfaceWrap=e("<div />").css("position","relative").appendTo(this.element),i.surface=g.Surface.create(i.surfaceWrap,{type:i.options.renderAs}),i.setOptions(n)},setOptions:function(e){var t=this;if(t.type=(e.type||t.options.type).toLowerCase(),"upca"==t.type&&(t.type="ean13",e.value="0"+e.value),"upce"==t.type&&(t.type="ean8",e.value="0"+e.value),!C[t.type])throw Error("Encoding "+t.type+"is not supported.");t.encoding=new C[t.type],t.options=d(!0,t.options,e),v(e.value)&&t.redraw()},redraw:function(){var e=this._getSize();this.surfaceWrap.css({width:e.width,height:e.height}),this.surface.clear(),this.createVisual(),this.surface.draw(this.visual)},getSize:function(){return c.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},_render:function(){var e,t,n=this,i=n.options,r=i.value,o=i.text,a=_.getSpacing(o.margin),s=n._getSize(),l=i.border||{},c=n.encoding,u=y(0,0,s.width,s.height).unpad(l.width).unpad(i.padding),d=u.height(),h=new g.Group;return n.contentBox=u,h.append(n._getBackground(s)),o.visible&&(d-=g.util.measureText(r,{font:o.font}).height+a.top+a.bottom),e=c.encode(r,u.width(),d),o.visible&&(t=r,i.checksum&&v(c.checksum)&&(t+=" "+c.checksum),h.append(n._getText(t))),n.barHeight=d,this._bandsGroup=this._getBands(e.pattern,e.baseUnit),h.append(this._bandsGroup),h},exportVisual:function(){return this._render()},_getSize:function(){var e=this,t=e.element,n=new m.Size(300,100);return t.width()>0&&(n.width=t.width()),t.height()>0&&(n.height=t.height()),e.options.width&&(n.width=e.options.width),e.options.height&&(n.height=e.options.height),n},value:function(e){var n=this;return v(e)?(n.options.value=e+"",n.redraw(),t):n.options.value},_getBands:function(e,t){var n,i,r,o,a,s=this,l=s.contentBox,c=l.x1,u=new g.Group;for(r=0;e.length>r;r++)n=(i=f(e[r])?e[r]:{width:e[r],y1:0,y2:s.barHeight}).width*t,r%2&&(o=m.Rect.fromPoints(new m.Point(c,i.y1+l.y1),new m.Point(c+n,i.y2+l.y1)),a=g.Path.fromRect(o,{fill:{color:s.options.color},stroke:null}),u.append(a)),c+=n;return u},_getBackground:function(e){var t=this.options,n=t.border||{},i=y(0,0,e.width,e.height).unpad(n.width/2);return g.Path.fromRect(i.toRect(),{fill:{color:t.background},stroke:{color:n.width?n.color:"",width:n.width,dashType:n.dashType}})},_getText:function(e){var t=this,n=t.options.text,i=t._textbox=new b(e,{font:n.font,color:n.color,align:"center",vAlign:"bottom",margin:n.margin});return i.reflow(t.contentBox),i.renderVisual(),i.visual},options:{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}}}),_.ExportMixin.extend(l.fn),_.ui.plugin(l),c.deepExtend(_,{encodings:C,Encoding:x})}(window.kendo.jQuery),function(e,t){function n(e){return parseInt(e,2)}function i(e,t){var n=(+e).toString(2);return t>n.length&&(n=Array(t-n.length+1).join(0)+n),n}function r(e,t){for(var n=[],i=0;e.length>i;)n.push(e.substring(i,i+t)),i+=t;return n}function o(e,t,n,i){for(var r=0;e.length>r;r++)e[r][n][i]=t}function a(e,t,n,i){for(var r=0;de.length>r;r++)e[r][n][i]=de[r](n,i)?1^t:parseInt(t,10)}function s(e,n){var i=[],r=e.length-1;do{i[r]=ne[(e[r]+n)%255],r--}while(e[r]!==t);return i}function l(e,t){return parseInt(e.charAt(t),10)}function c(e,t,n,i,r){t[e][i]=(t[e][i]<<1^r)%128,t[e][i]==ue&&(n[e]+=40)}function u(e,t,n,i,r,o){n[e][o]==i?r[e][o]++:(n[e][o]=i,r[e][o]>=5&&(t[e]+=3+r[e][o]-5),r[e][o]=1)}function d(e,t){var n=Math.floor(e/t*100),i=n%5,r=Math.abs(n-i-50),o=Math.abs(n+5-i-50);return 10*Math.min(r/5,o/5)}var h,p,f,g,m,v,_,y,b,w,k,x,C,T,S,D,A,M,E,I,R,P,L,F,B,z,H,N,O,V,U,W,j,q,G=window.kendo,$=e.extend,Y=G.drawing,Q=G.dataviz,X=G.ui.Widget,K=Q.Box2D,Z="numeric",J="alphanumeric",ee="byte",te={1:0},ne={0:1},ie=[[1,0],[1,25,0]],re={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},oe=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],ae=[1,0,1,1,1],se=[1,0,1],le={L:"01",M:"00",Q:"11",H:"10"},ce=["11101100","00010001"],ue=93,de=[function(e,t){return(e+t)%2==0},function(e){return e%2==0},function(e,t){return t%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return((e+t)%2+e*t%3)%2==0}],he=/^\d+/,pe="A-Z0-9 $%*+./:-",fe=RegExp("^[A-Z $%*+./:-]+"),ge=RegExp("^["+pe+"]+"),me=RegExp("^[^"+pe+"]+"),ve=Math.round,_e=G.Class.extend({getVersionIndex:function(e){return 10>e?0:e>26?2:1},getBitsCharacterCount:function(e){return this.bitsInCharacterCount[this.getVersionIndex(e||40)]},getModeCountString:function(e,t){return this.modeIndicator+i(e,this.getBitsCharacterCount(t))},encode:function(){},getStringBitsLength:function(){},getValue:function(){},modeIndicator:"",bitsInCharacterCount:[]}),ye={};for(p in ye[Z]=_e.extend({bitsInCharacterCount:[10,12,14],modeIndicator:"0001",getValue:function(e){return parseInt(e,10)},encode:function(e,t){var n,o=r(e,3),a=this.getModeCountString(e.length,t);for(n=0;o.length-1>n;n++)a+=i(o[n],10);return a+i(o[n],1+3*o[n].length)},getStringBitsLength:function(e,t){var n=e%3;return 4+this.getBitsCharacterCount(t)+10*Math.floor(e/3)+3*n+(0===n?0:1)}}),ye[J]=_e.extend({characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010",getValue:function(e){return this.characters[e]},encode:function(e,t){var n,o=this,a=r(e,2),s=o.getModeCountString(e.length,t);for(n=0;a.length-1>n;n++)s+=i(45*o.getValue(a[n].charAt(0))+o.getValue(a[n].charAt(1)),11);return s+i(2==a[n].length?45*o.getValue(a[n].charAt(0))+o.getValue(a[n].charAt(1)):o.getValue(a[n].charAt(0)),1+5*a[n].length)},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+11*Math.floor(e/2)+e%2*6}}),ye[ee]=_e.extend({bitsInCharacterCount:[8,16,16],modeIndicator:"0100",getValue:function(e){var t=e.charCodeAt(0);if(127>=t||t>=160&&255>=t)return t;throw Error("Unsupported character: "+e)},encode:function(e,t){var n,r=this.getModeCountString(e.length,t);for(n=0;e.length>n;n++)r+=i(this.getValue(e.charAt(n)),8);return r},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+8*e}}),h={},ye)h[p]=new ye[p];f=function(e){var n=this,i=e.length-1,r=e.length-1,o=r,a=-1,s=0;n.move=function(){i+=a*s,r=o-(s^=1)},n.getNextCell=function(){for(;e[i][r]!==t;)n.move(),(0>i||i>=e.length)&&(a=-a,r=o-=8!=o?2:3,i=0>a?e.length-1:0);return{row:i,column:r}},n.getNextRemainderCell=function(){return n.move(),e[i][r]===t?{row:i,column:r}:t}},g=function(e,t){var n,i,r,o,s,l,c=new f(e[0]);for(o=0;t.length>o;o++)for(n=t[o],i=0;n.length>0;){for(s=0;n.length>s;s++)for(l=0;8>l;l++)r=c.getNextCell(),a(e,n[s][i].charAt(l),r.row,r.column);for(i++;n[0]&&i==n[0].length;)n.splice(0,1)}for(;r=c.getNextRemainderCell();)a(e,0,r.row,r.column)},m=function(e,t){for(var n=8*t,i=0,r=0;n>e.length&&"0000".length>i;)e+="0000".charAt(i++);for(e.length%8!=0&&(e+=Array(9-e.length%8).join("0"));n>e.length;)e+=ce[r],r^=1;return e},v=function(e,t){var n,i=[];for(n=e.length-2;n>=0;n--)i[n]=e[n]^t[n];return i},_=function(e,n){var i,r,o=[];for(i=0;e.length>i;i++)for(r=0;n.length>r;r++)o[i+r]=o[i+r]===t?(e[i]+(n[r]>=0?n[r]:0))%255:te[ne[o[i+r]]^ne[(e[i]+n[r])%255]];return o},function(){var e,t;for(t=1;255>t;t++)(e=2*ne[t-1])>255&&(e^=285),ne[t]=e,te[e]=t;e=2*ne[t-1]^285,ne[t]=e,ne[-1]=0}(),function(){var e,t,n;for(e=2;68>=e;e++)t=ie[e-1],n=[e,0],ie[e]=_(t,n)}(),y=function(e,t){var n,r,o=ie[t-1],a=Array(t).concat(e),l=Array(a.length-o.length).concat(o),c=e.length,u=[];for(r=0;c>r;r++)n=s(l,te[a[a.length-1]]),l.splice(0,1),a=v(n,a);for(r=a.length-1;r>=0;r--)u[t-1-r]=i(a[r],8);return u},b=function(e,t){var i,r,o,a,s,l,c,u,d=0,h=[],p=[],f=t.groups;for(l=0;f.length>l;l++)for(o=f[l][0],c=0;o>c;c++){for(r=f[l][1],i=[],a=[],u=1;r>=u;u++)s=e.substring(d,d+8),i.push(s),a[r-u]=n(s),d+=8;h.push(i),p.push(y(a,t.errorCodewordsPerBlock))}return[h,p]},w=function(e,t,n,i,r){var o,a,s=he.exec(e),l=s?s[0]:"",c=fe.exec(e),u=c?c[0]:"",d=ge.exec(e),h=d?d[0]:"";return l&&(l.length>=t||e.length==l.length||l.length>=n&&!ge.test(e.charAt(l.length)))?(o=Z,a=l):h&&(e.length==h.length||h.length>=i||r==J)?(o=J,a=l||u):(o=ee,a=h?h+me.exec(e.substring(h.length))[0]:me.exec(e)[0]),{mode:o,modeString:a}},k=function(e){var t,n,i=[],r=0;for(i.push(w(e,8,5,8,t)),t=i[0].mode,e=e.substr(i[0].modeString.length);e.length>0;)(n=w(e,17,9,16,t)).mode!=t?(t=n.mode,i.push(n),r++):i[r].modeString+=n.modeString,e=e.substr(n.modeString.length);return i},x=function(e){var t,n=0;for(t=0;e.length>t;t++)n+=h[e[t].mode].getStringBitsLength(e[t].modeString.length);return Math.ceil(n/8)},C=function(e,t){var n=0,i=oe.length-1,r=Math.floor(oe.length/2);do{oe[r][t].totalDataCodewords>e?i=r:n=r,r=n+Math.floor((i-n)/2)}while(i-n>1);return oe[n][t].totalDataCodewords>=e?r+1:i+1},T=function(e,t){var n,i="";for(n=0;e.length>n;n++)i+=h[e[n].mode].encode(e[n].modeString,t);return i},S=function(e){var t,i,r="";if(0===n(e))return"101010000010010";for(t=D(n(e),"10100110111",15),i=0;t.length>i;i++)r+=t.charAt(i)^"101010000010010".charAt(i);return r},D=function(e,t,r){var o=n(t),a=t.length-1,s=e<<a,l=i(e,r-a),c=A(s,o);return l+i(c,a)},A=function(e,t){var n=t.toString(2).length,i=e.toString(2).length;do{i=(e^=t<<i-n).toString(2).length}while(i>=n);return e},M=function(e){var t,n,i=[],r=17+4*e;for(t=0;de.length>t;t++)for(i[t]=Array(r),n=0;r>n;n++)i[t][n]=Array(r);return i},E=function(e,t){var n,i,r=e[0],a=0,s=t.length;for(n=0,i=8;8>=n;n++)6!==n&&o(e,l(t,s-1-a++),n,i);for(n=8,i=7;i>=0;i--)6!==i&&o(e,l(t,s-1-a++),n,i);for(a=0,i=r.length-1,n=8;i>=r.length-8;i--)o(e,l(t,s-1-a++),n,i);for(o(e,1,r.length-8,8),n=r.length-7,i=8;r.length>n;n++)o(e,l(t,s-1-a++),n,i)},I=function(e){return D(e,"1111100100101",18)},R=function(e,t){var n,i,r,a,s=e[0].length,c=s-11,u=s-11;for(a=0;t.length>a;a++)n=Math.floor(a/3),i=a%3,o(e,r=l(t,t.length-a-1),0+n,c+i),o(e,r,u+i,0+n)},P=function(e,t,n,i){var r,a,s,l=t.length+2,c=t.length+1;for(a=0;t.length>a;a++)for(s=a;l-a>s;s++)o(e,r=t[a],n+s,i+a),o(e,r,n+a,i+s),o(e,r,n+c-s,i+c-a),o(e,r,n+c-a,i+c-s)},L=function(e,t,n,i){var r=n,a=i,s=e[0];do{o(e,0,r,i),o(e,0,n,a),r+=t[0],a+=t[1]}while(r>=0&&s.length>r)},F=function(e){var t=e[0].length;P(e,ae,0,0),L(e,[-1,-1],7,7),P(e,ae,t-7,0),L(e,[1,-1],t-8,7),P(e,ae,0,t-7),L(e,[-1,1],7,t-8)},B=function(e,n){var i,r,o,a,s,l,c,u,d;if(!(2>n)){for(r=(i=e[0]).length,o=Math.floor(n/7),a=[6],c=0,(s=re[n])?l=(r-13-s)/o:s=l=(r-13)/(o+1),a.push(a[c++]+s);r>a[c]+l;)a.push(a[c++]+l);for(u=0;a.length>u;u++)for(d=0;a.length>d;d++)i[a[u]][a[d]]===t&&P(e,se,a[u]-2,a[d]-2)}},z=function(e){var t,n=1,i=e[0].length;for(t=8;i-8>t;t++)o(e,n,6,t),o(e,n,t,6),n^=1},H=function(e){var t,n,i,r,o,a,s,l=[],h=[],p=[],f=[],g=[],m=e[0].length;for(n=0;e.length>n;n++)l[n]=0,p[n]=0,g[n]=[0,0],f[n]=[0,0],h[n]=[];for(n=0;m>n;n++)for(i=0;m>i;i++)for(r=0;e.length>r;r++)t=e[r],p[r]+=parseInt(t[n][i],10),h[r][0]===t[n][i]&&m>n+1&&i-1>=0&&t[n+1][i]==h[r][0]&&t[n+1][i-1]==h[r][0]&&(l[r]+=3),c(r,f,l,0,t[n][i]),c(r,f,l,1,t[i][n]),u(r,l,h,t[n][i],g,0),u(r,l,h,t[i][n],g,1);for(o=m*m,s=Number.MAX_VALUE,n=0;l.length>n;n++)l[n]+=d(p[n],o),s>l[n]&&(s=l[n],a=n);return a},N=function(e,t){this.dataString=e,this.version=t},O=function(){this.getEncodingResult=function(e,t){var n=k(e),i=x(n),r=C(i,t),o=T(n,r);return new N(o,r)}},(V=function(){this.mode=h[this.encodingMode]}).fn=V.prototype={encodingMode:ee,utfBOM:"111011111011101110111111",initialModeCountStringLength:20,getEncodingResult:function(e,t){var n=this,i=n.encode(e),r=n.getDataCodewordsCount(i),o=C(r,t),a=n.mode.getModeCountString(i.length/8,o)+i;return new N(a,o)},getDataCodewordsCount:function(e){var t=e.length;return Math.ceil((this.initialModeCountStringLength+t)/8)},encode:function(e){var t,n=this.utfBOM;for(t=0;e.length>t;t++)n+=this.encodeCharacter(e.charCodeAt(t));return n},encodeCharacter:function(e){var t,n,r=this.getBytesCount(e),o=r-1,a="";if(1==r)a=i(e,8);else{for(t=8-r,n=0;o>n;n++)a=i(e>>6*n&63|128,8)+a;a=(e>>6*o|255>>t<<t).toString(2)+a}return a},getBytesCount:function(e){var t,n=this.ranges;for(t=0;n.length>t;t++)if(n[t]>e)return t+1},ranges:[128,2048,65536,2097152,67108864]},U=function(e){return e&&e.toLowerCase().indexOf("utf_8")>=0?new V:new O},W=function(e,t,n){var r,o,a,s=new U(n).getEncodingResult(e,t),l=s.version,c=oe[l-1][t],u=m(s.dataString,c.totalDataCodewords),d=b(u,c),h=M(l);return F(h),B(h,l),z(h),l>=7&&R(h,i(0,18)),E(h,i(0,15)),g(h,d),o=h[r=H(h)],l>=7&&R([o],I(l)),a=le[t]+i(r,3),E([o],S(a)),o},j={DEFAULT_SIZE:200,QUIET_ZONE_LENGTH:4,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1},q=X.extend({init:function(t,n){var i=this;X.fn.init.call(i,t,n),i.element=e(t),i.wrapper=i.element,i.element.addClass("k-qrcode"),i.surfaceWrap=e("<div />").css("position","relative").appendTo(this.element),i.surface=Y.Surface.create(i.surfaceWrap,{type:i.options.renderAs}),i.setOptions(n)},redraw:function(){var e=this._getSize();this.surfaceWrap.css({width:e,height:e}),this.surface.clear(),this.createVisual(),this.surface.draw(this.visual)},getSize:function(){return G.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},exportVisual:function(){return this._render()},_render:function(){var e,t,n,i,r,o,a=this,s=a._value,l=a.options.border||{},c=a.options.padding||0,u=l.width||0;return l.width=u,o=new Y.Group,s&&(n=W(s,a.options.errorCorrection,a.options.encoding),r=(i=a._getSize())-2*(u+c),e=a._calculateBaseUnit(r,n.length),t=u+c+(r-n.length*e)/2,o.append(a._renderBackground(i,l)),o.append(a._renderMatrix(n,e,t))),o},_getSize:function(){var e,t,n,i=this;return i.options.size?e=parseInt(i.options.size,10):(t=i.element,e=(n=Math.min(t.width(),t.height()))>0?n:j.DEFAULT_SIZE),e},_calculateBaseUnit:function(e,t){var n=Math.floor(e/t);if(j.MIN_BASE_UNIT_SIZE>n)throw Error("Insufficient size.");return n*t>=e&&n-1>=j.MIN_BASE_UNIT_SIZE&&n--,n},_renderMatrix:function(e,t,n){var i,r,o,a,s,l,c,u,d=new Y.MultiPath({fill:{color:this.options.color},stroke:null});for(i=0;e.length>i;i++)for(r=n+i*t,o=0;e.length>o;){for(;0===e[i][o]&&e.length>o;)o++;if(e.length>o){for(a=o;1==e[i][o];)o++;s=ve(n+a*t),l=ve(r),c=ve(n+o*t),u=ve(r+t),d.moveTo(s,l).lineTo(s,u).lineTo(c,u).lineTo(c,l).close()}}return d},_renderBackground:function(e,t){var n=K(0,0,e,e).unpad(t.width/2);return Y.Path.fromRect(n.toRect(),{fill:{color:this.options.background},stroke:{color:t.color,width:t.width}})},setOptions:function(e){var n=this;e=e||{},n.options=$(n.options,e),e.value!==t&&(n._value=n.options.value+""),n.redraw()},value:function(e){var n=this;return e===t?n._value:(n._value=e+"",n.redraw(),t)},options:{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:j.DEFAULT_ERROR_CORRECTION_LEVEL,background:j.DEFAULT_BACKGROUND,color:j.DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0}}}),Q.ExportMixin.extend(q.fn),Q.ui.plugin(q),G.deepExtend(Q,{QRCode:q,QRCodeDefaults:j,QRCodeFunctions:{FreeCellVisitor:f,fillData:g,padDataString:m,generateErrorCodewords:y,xorPolynomials:v,getBlocks:b,multiplyPolynomials:_,chooseMode:w,getModes:k,getDataCodewordsCount:x,getVersion:C,getDataString:T,encodeFormatInformation:S,encodeBCH:D,dividePolynomials:A,initMatrices:M,addFormatInformation:E,encodeVersionInformation:I,addVersionInformation:R,addCentricPattern:P,addFinderSeparator:L,addFinderPatterns:F,addAlignmentPatterns:B,addTimingFunctions:z,scoreMaskMatrixes:H,encodeData:W,UTF8Encoder:V},QRCodeFields:{modes:h,powersOfTwo:te,powersOfTwoResult:ne,generatorPolynomials:ie}})}(window.kendo.jQuery),function(e,t){function n(){}function i(e){return n.prototype=e,new n}var r,o=window.kendo,a=o.Class,s=o.Observable,l=o.deepExtend,c=Math,u=e.proxy,d=o.util,h=d.last,p=d.renderTemplate,f=o.dataviz,g=d.defined,m=f.filterSeriesByType,v=o.template,_=f.ui.Chart,y=f.Selection,b=f.addDuration,w=d.limitValue,k=f.lteDateIndex,x=f.toDate,C=f.toTime,T="change",S="_navigator",D=S,A=f.EQUALLY_SPACED_SERIES,M=_.extend({init:function(t,n){e(t).addClass("k-chart"),_.fn.init.call(this,t,n)},_applyDefaults:function(e,t){var n=this,i=n.element.width()||f.DEFAULT_WIDTH,r={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:c.floor(i/28)}}};t&&(t=l({},t,r)),n._navigator||E.setup(e,t),_.fn._applyDefaults.call(n,e,t)},_initDataSource:function(e){var t,n,i=e||{},r=i.dataSource,o=r&&r.serverFiltering,a=[].concat(i.categoryAxis)[0],s=(i.navigator||{}).select,c=s&&s.from&&s.to;o&&c&&(t=[].concat(r.filter||[]),n=new f.DateCategoryAxis(l({baseUnit:"fit"},a,{categories:[s.from,s.to]})),r.filter=E.buildFilter(n.range().min,s.to).concat(t)),_.fn._initDataSource.call(this,e)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_resize:function(){var e=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=e},_redraw:function(){var e=this._navigator;!this._dirty()&&e&&e.dataSource?e.redrawSlaves():this._fullRedraw()},_dirty:function(){var t=this.options,n=[].concat(t.series,t.navigator.series),i=e.grep(n,function(e){return e&&e.visible}).length,r=this._seriesCount!==i;return this._seriesCount=i,r},_fullRedraw:function(){var e=this,t=e._navigator;t||(t=e._navigator=new E(e)),t._setRange(),_.fn._redraw.call(e),t._initSelection()},_onDataChanged:function(){_.fn._onDataChanged.call(this),this._dataBound=!0},_bindCategoryAxis:function(e,t,n){var i,r=this.options.categoryAxis,o=r.length;if(_.fn._bindCategoryAxis.apply(this,arguments),e.name===D)for(;o>n;)(i=r[n++]).pane==S&&(i.categories=e.categories)},_trackSharedTooltip:function(e){var t=this,n=t._plotArea.paneByPoint(e);n&&n.options.name===S?t._unsetActivePoint():_.fn._trackSharedTooltip.call(t,e)},destroy:function(){this._navigator.destroy(),_.fn.destroy.call(this)}}),E=s.extend({init:function(e){var t=this;t.chart=e,t.options=l({},t.options,e.options.navigator),t._initDataSource(),g(t.options.hint.visible)||(t.options.hint.visible=t.options.visible),e.bind("drag",u(t._drag,t)),e.bind("dragEnd",u(t._dragEnd,t)),e.bind("zoom",u(t._zoom,t)),e.bind("zoomEnd",u(t._zoomEnd,t))},options:{},_initDataSource:function(){var e=this,t=e.options,n=t.autoBind,i=t.dataSource;g(n)||(n=e.chart.options.autoBind),e._dataChangedHandler=u(e._onDataChanged,e),i&&(e.dataSource=o.data.DataSource.create(i).bind(T,e._dataChangedHandler),n&&e.dataSource.fetch())},_onDataChanged:function(){var e,t,n,i,r,o=this,a=o.chart,s=a.options.series,l=s.length,c=a.options.categoryAxis,u=c.length,d=o.dataSource.view();for(e=0;l>e;e++)(n=s[e]).axis==D&&a._isBindable(n)&&(n.data=d);for(t=0;u>t;t++)(i=c[t]).pane==S&&(i.name==D?(a._bindCategoryAxis(i,d,t),r=i.categories):i.categories=r);a._model&&(o.redraw(),o.filterAxes(),(!a.options.dataSource||a.options.dataSource&&a._dataBound)&&o.redrawSlaves())},destroy:function(){var e=this,t=e.dataSource;t&&t.unbind(T,e._dataChangeHandler),e.selection&&e.selection.destroy()},redraw:function(){this._redrawSelf(),this._initSelection()},_initSelection:function(){var t=this,n=t.chart,o=t.options,a=t.mainAxis(),s=i(a),l=a.range(),c=l.min,u=l.max,d=a.options.categories,h=t.options.select,p=t.selection,f=x(h.from),g=x(h.to);0!==d.length&&(p&&(p.destroy(),p.wrapper.remove()),s.box=a.box,p=t.selection=new y(n,s,{min:c,max:u,from:f,to:g,selectStart:e.proxy(t._selectStart,t),select:e.proxy(t._select,t),selectEnd:e.proxy(t._selectEnd,t),mousewheel:{zoom:"left"}}),o.hint.visible&&(t.hint=new r(n.element,{min:c,max:u,template:o.hint.template,format:o.hint.format})))},_setRange:function(){var e,t=this.chart._createPlotArea(!0).namedCategoryAxes[D],n=t.options,i=t.range(),r=i.min,o=b(i.max,n.baseUnitStep,n.baseUnit),a=this.options.select||{},s=x(a.from)||r;r>s&&(s=r),(e=x(a.to)||o)>o&&(e=o),this.options.select={from:s,to:e},this.filterAxes()},_redrawSelf:function(e){var t=this.chart._plotArea;t&&t.redraw(h(t.panes),e)},redrawSlaves:function(){var e=this.chart,t=e._plotArea,n=t.panes.slice(0,-1);t.srcSeries=e.options.series,t.redraw(n)},_drag:function(e){var t,n,i,r=this,o=r.chart,a=o._eventCoordinates(e.originalEvent),s=r.mainAxis(),l=s.range(),c=s.pane.box.containsPoint(a),u=o._plotArea.categoryAxis,d=e.axisRanges[u.options.name],h=r.options.select,p=r.selection;d&&!c&&p&&(t=h.from&&h.to?C(h.to)-C(h.from):C(p.options.to)-C(p.options.from),n=x(w(C(d.min),l.min,C(l.max)-t)),i=x(w(C(n)+t,C(l.min)+t,l.max)),r.options.select={from:n,to:i},r._liveDrag()&&(r.filterAxes(),r.redrawSlaves()),p.set(n,i),r.showHint(n,i))},_dragEnd:function(){var e=this;e.filterAxes(),e.filterDataSource(),e.redrawSlaves(),e.hint&&e.hint.hide()},_liveDrag:function(){var e=o.support,t=e.touch,n=e.browser,i=n.mozilla,r=n.msie&&9>n.version;return!t&&!i&&!r},readSelection:function(){var e=this.selection.options,t=this.options.select;t.from=e.from,t.to=e.to},filterAxes:function(){var e,t,n=this.options.select||{},i=this.chart.options.categoryAxis,r=n.from,o=n.to;for(e=0;i.length>e;e++)(t=i[e]).pane!==S&&(t.min=x(r),t.max=x(o))},filterDataSource:function(){var e,t=this,n=t.options.select||{},i=t.chart,r=i.dataSource,o=r&&r.options.serverFiltering;t.dataSource&&o&&(e=new f.DateCategoryAxis(l({baseUnit:"fit"},i.options.categoryAxis[0],{categories:[n.from,n.to]})).options,r.filter(E.buildFilter(b(e.min,-e.baseUnitStep,e.baseUnit),b(e.max,e.baseUnitStep,e.baseUnit))))},_zoom:function(e){var t,n,i=this,r=i.chart,a=e.delta,s=r._plotArea.categoryAxis,l=i.options.select,u=i.selection,d=i.mainAxis().options.categories;u&&(t=k(u.options.from,d),n=k(u.options.to,d),e.originalEvent.preventDefault(),c.abs(a)>1&&(a*=3),n-t>1?(u.expand(a),i.readSelection()):(s.options.min=l.from,l.from=s.scaleRange(-e.delta).min),o.support.touch||(i.filterAxes(),i.redrawSlaves()),u.set(l.from,l.to),i.showHint(i.options.select.from,i.options.select.to))},_zoomEnd:function(e){this._dragEnd(e)},showHint:function(e,t){var n=this,i=n.chart._plotArea;n.hint&&n.hint.show(e,t,i.backgroundBox())},_selectStart:function(e){var t=this.chart;t._selectStart.call(t,e)},_select:function(e){var t=this.chart;this.showHint(e.from,e.to),t._select.call(t,e)},_selectEnd:function(e){var t=this,n=t.chart;t.hint&&t.hint.hide(),t.readSelection(),t.filterAxes(),t.filterDataSource(),t.redrawSlaves(),n._selectEnd.call(n,e)},mainAxis:function(){var e=this.chart._plotArea;return e?e.namedCategoryAxes[D]:void 0}});E.setup=function(e,t){e=e||{};var n=l({},(t=t||{}).navigator,e.navigator),i=e.panes=[].concat(e.panes),r=l({},n.pane,{name:S});n.visible||(r.visible=!1,r.height=.1),i.push(r),E.attachAxes(e,n),E.attachSeries(e,n,t)},E.attachAxes=function(e,t){var n=t.series||[],i=e.categoryAxis=[].concat(e.categoryAxis),r=e.valueAxis=[].concat(e.valueAxis),o=0===m(n,A).length,a=l({type:"date",pane:S,roundToBaseUnit:!o,justified:o,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:!t.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]},_overlap:!1}),s=t.categoryAxis;i.push(l({},a,{maxDateGroups:200},s,{name:D,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),l({},a,s,{name:D+"_labels",maxDateGroups:20,baseUnitStep:"auto",plotBands:[],autoBaseUnitSteps:{minutes:[]}}),l({},a,s,{name:D+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],labels:{visible:!1,mirror:!0}})),r.push(l({name:D,pane:S,majorGridLines:{visible:!1},visible:!1},t.valueAxis))},E.attachSeries=function(e,t,n){var i,r=e.series=e.series||[],o=[].concat(t.series||[]),a=n.seriesColors,s=t.seriesDefaults;for(i=0;o.length>i;i++)r.push(l({color:a[i%a.length],categoryField:t.dateField,visibleInLegend:!1,tooltip:{visible:!1}},s,o[i],{axis:D,categoryAxis:D,autoBind:!t.dataSource}))},E.buildFilter=function(e,t){return[{field:"Date",operator:"gte",value:x(e)},{field:"Date",operator:"lt",value:x(t)}]},r=a.extend({init:function(t,n){var i=this;i.options=l({},i.options,n),i.container=t,i.chartPadding={top:parseInt(t.css("paddingTop"),10),left:parseInt(t.css("paddingLeft"),10)},i.template=i.template,i.template||(i.template=i.template=p("<div class='k-navigator-hint' style='display: none; position: absolute; top: 1px; left: 1px;'><div class='k-tooltip k-chart-tooltip'>&nbsp;</div><div class='k-scroll' /></div>")),i.element=e(i.template()).appendTo(t)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(e,t,n){var i=this,r=x(C(e)+C(t-e)/2),a=i.options,s=o.format(i.options.format,e,t),l=i.element.find(".k-tooltip"),c=i.element.find(".k-scroll"),u=.4*n.width(),d=n.center().x-u,h=(n.center().x-d)/(a.max-a.min),p=r-a.min;i._hideTimeout&&clearTimeout(i._hideTimeout),i._visible||(i.element.stop(!1,!0).css("visibility","hidden").show(),i._visible=!0),a.template&&(s=v(a.template)({from:e,to:t})),l.html(s).css({left:n.center().x-l.outerWidth()/2,top:n.y1}),c.css({width:u,left:d+p*h,top:n.y1+parseInt(l.css("margin-top"),10)+parseInt(l.css("border-top-width"),10)+l.height()/2}),i.element.css("visibility","visible")},hide:function(){var e=this;e._hideTimeout&&clearTimeout(e._hideTimeout),e._hideTimeout=setTimeout(function(){e._visible=!1,e.element.fadeOut("slow")},e.options.hideDelay)}}),f.ui.plugin(M),l(f,{Navigator:E})}(window.kendo.jQuery),function(e){function t(e){return"number"==typeof e?[e]:e}var n=window.kendo,i=n.dataviz,r=i.ui.Chart,o=n.data.ObservableArray,a=i.SharedTooltip,s=n.deepExtend,l=e.isArray,c=e.proxy,u=i.inArray,d=Math,h="bullet",p=["bar",h],f=r.extend({init:function(n,i){var a=this,c=a.stage=e("<span />"),h=i||{};n=e(n).addClass("k-sparkline").empty().append(c),a._initialWidth=d.floor(n.width()),h=t(h),(l(h)||h instanceof o)&&(h={seriesDefaults:{data:h}}),h.series||(h.series=[{data:t(h.data)}]),s(h,{seriesDefaults:{type:h.type}}),(u(h.series[0].type,p)||u(h.seriesDefaults.type,p))&&(h=s({},{categoryAxis:{crosshair:{visible:!1}}},h)),r.fn.init.call(a,n,h)},options:{name:"Sparkline",chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]},_modelOptions:function(){var t,n,i=this,r=i.options,o=i._initialWidth,a=i.stage;return i.stage.children().hide(),n=e("<span>&nbsp;</span>"),i.stage.append(n),t=s({width:o||i._autoWidth(),height:a.height(),transitions:r.transitions},r.chartArea,{inline:!0,align:!1}),a.css({width:t.width,height:t.height}),n.remove(),i.stage.children().show(),i.surface.resize(),t},_createTooltip:function(){var e,t=this,n=t.options,i=t.element;return(e=t._sharedTooltip()?new g(i,t._plotArea,n.tooltip):r.fn._createTooltip.call(t)).bind("leave",c(t._tooltipleave,t)),e},_surfaceWrap:function(){return this.stage},_autoWidth:function(){var e,t,n,r=this,o=r.options,a=i.getSpacing(o.chartArea.margin),s=o.series,l=r.dataSource.total(),c=0;for(t=0;s.length>t;t++){if("bar"===(n=s[t]).type)return 150;if(n.type===h)return 150;if("pie"===n.type)return r.stage.height();n.data&&(c=d.max(c,n.data.length))}return(e=d.max(l,c)*o.pointWidth)>0&&(e+=a.left+a.right),e}}),g=a.extend({options:{animation:{duration:0}},_anchor:function(e,t){var n=a.fn._anchor.call(this,e,t),i=this._measure();return n.y=-i.height-this.options.offset,n},_hideElement:function(){this.element&&this.element.hide().remove()}});i.ui.plugin(f),s(i,{SparklineSharedTooltip:g})}(window.kendo.jQuery),function(e,t){var n,i=Math,r=i.abs,o=i.atan,a=i.atan2,s=i.cos,l=i.max,c=i.min,u=i.sin,d=i.tan,h=window.kendo,p=h.Class,f=h.dataviz,g=h.deepExtend,m=h.util,v=m.defined,_=m.deg,y=m.rad,b=m.round,w=m.sqr,k=m.valueOrDefault,x=p.extend({init:function(e,t){1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=t)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(e){return e&&e.lat===this.lat&&e.lng===this.lng},clone:function(){return new x(this.lat,this.lng)},round:function(e){return this.lng=b(this.lng,e),this.lat=b(this.lat,e),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(e,t){return this.greatCircleTo(e,t).distance},destination:function(e,t,n){var r,o,l,c,d;return t=y(t),n=n||f.map.datums.WGS84,r=y(this.lat),o=y(this.lng),l=e/h.dataviz.map.datums.WGS84.a,c=i.asin(u(r)*s(l)+s(r)*u(l)*s(t)),d=o+a(u(t)*u(l)*s(r),s(l)-u(r)*u(c)),new x(_(c),_(d))},greatCircleTo:function(e,t){var n,l,c,h,p,g,m,v,k,C,T,S,D,A,M,E,I,R,P,L,F,B,z,H,N,O,V,U,W;if(e=x.create(e),t=t||f.map.datums.WGS84,!e||this.clone().round(8).equals(e.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(n=t.a,l=t.b,c=t.f,h=y(e.lng-this.lng),p=o((1-c)*d(y(this.lat))),g=u(p),m=s(p),v=o((1-c)*d(y(e.lat))),k=u(v),C=s(v),T=h,D=this.DISTANCE_ITERATIONS,A=!1;!A&&D-- >0;)M=u(T),E=s(T),I=i.sqrt(w(C*M)+w(m*k-g*C*E)),F=a(I,P=g*k+m*C*E),L=0,0!=(R=1-w(B=m*C*M/I))&&(L=P-2*g*k/R),S=T,T=h+(1-(z=c/16*R*(4+c*(4-3*R))))*c*B*(F+z*I*(L+z*P*(2*w(L)-1))),A=r(T-S)<=this.DISTANCE_CONVERGENCE;return N=1+(H=R*(w(n)-w(l))/w(l))/16384*(4096+H*(H*(320-175*H)-768)),V=(O=H/1024*(256+H*(H*(74-47*H)-128)))*I*(L+O/4*(P*(2*w(L)-1)-O/6*L*(4*w(I)-3)*(4*w(L)-3))),U=a(C*M,m*k-g*C*E),W=a(m*M,-g*C+m*k*E),{distance:b(l*N*(F-V),this.DISTANCE_PRECISION),azimuthFrom:_(U),azimuthTo:_(W)}}});x.fn.toString=function(){return h.format(this.FORMAT,this.lat,this.lng)},x.fromLngLat=function(e){return new x(e[1],e[0])},x.fromLatLng=function(e){return new x(e[0],e[1])},x.create=function(e,n){return v(e)?e instanceof x?e.clone():1===arguments.length&&2===e.length?x.fromLatLng(e):new x(e,n):t},(n=p.extend({init:function(e,t){e=x.create(e),t=x.create(t),e.lng+180>t.lng+180&&t.lat+90>e.lat+90?(this.se=e,this.nw=t):(this.se=t,this.nw=e)},contains:function(e){var t=this.nw,n=this.se,i=k(e.lng,e[1]),r=k(e.lat,e[0]);return e&&i+180>=t.lng+180&&n.lng+180>=i+180&&r+90>=n.lat+90&&t.lat+90>=r+90},center:function(){var e=this.nw,t=this.se,n=e.lng+(t.lng-e.lng)/2,i=e.lat+(t.lat-e.lat)/2;return new x(i,n)},containsAny:function(e){var t,n=!1;for(t=0;e.length>t;t++)n=n||this.contains(e[t]);return n},include:function(e){var t=this.nw,n=this.se,i=k(e.lng,e[1]),r=k(e.lat,e[0]);t.lng=c(t.lng,i),t.lat=l(t.lat,r),n.lng=l(n.lng,i),n.lat=c(n.lat,r)},includeAll:function(e){for(var t=0;e.length>t;t++)this.include(e[t])},edges:function(){var e=this.nw,t=this.se;return{nw:this.nw,ne:new x(e.lat,t.lng),se:this.se,sw:new x(t.lat,e.lng)}},toArray:function(){var e=this.nw,t=this.se;return[e,new x(e.lat,t.lng),t,new x(t.lat,e.lng)]},overlaps:function(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}})).World=new n([90,-180],[-90,180]),n.create=function(e,i){return e instanceof n?e:e&&i?new n(e,i):e&&4===e.length&&!i?new n([e[0],e[1]],[e[2],e[3]]):t},g(f,{map:{Extent:n,Location:x}})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.ui.Widget,n=e.template,i=e.util.valueOrDefault,r=e.util.defined,o=t.extend({init:function(e,n){t.fn.init.call(this,e,n),this._initOptions(n),this.items=[],this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(e,t){this._extent=e,this._zoom=t,this._render()},add:function(e){r(e)&&("string"==typeof e&&(e={text:e}),this.items.push(e),this._render())},remove:function(e){var t,n,i=[];for(t=0;this.items.length>t;t++)(n=this.items[t]).text!==e&&i.push(n);this.items=i,this._render()},clear:function(){this.items=[],this.element.empty()},_render:function(){var e,t,i,r=[],o=n(this.options.itemTemplate);for(e=0;this.items.length>e;e++)t=this.items[e],""!==(i=this._itemText(t))&&r.push(o({text:i}));r.length>0?this.element.empty().append(r.join(this.options.separator)).show():this.element.hide()},_itemText:function(e){var t="",n=this._inZoomLevel(e.minZoom,e.maxZoom),i=this._inArea(e.extent);return n&&i&&(t+=e.text),t},_inZoomLevel:function(e,t){return e=i(e,-Number.MAX_VALUE),t=i(t,Number.MAX_VALUE),this._zoom>e&&t>this._zoom},_inArea:function(e){var t=!0;return e&&(t=e.contains(this._extent)),t}});e.dataviz.ui.plugin(o)}(window.kendo.jQuery),function(e){function t(e){return n.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/></button>',e)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=t("n")+t("e")+t("s")+t("w"),s=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-header k-shadow k-navigator").append(a).on("click.kendoNavigator",".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(e,t){var n=this.options.panStep;this.trigger("pan",{x:e*n,y:t*n})},_click:function(t){var n=0,i=0,r=e(t.currentTarget);r.is(".k-navigator-n")?i=1:r.is(".k-navigator-s")?i=-1:r.is(".k-navigator-e")?n=1:r.is(".k-navigator-w")&&(n=-1),this._pan(n,i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.UP:this._pan(0,1),e.preventDefault();break;case r.DOWN:this._pan(0,-1),e.preventDefault();break;case r.RIGHT:this._pan(1,0),e.preventDefault();break;case r.LEFT:this._pan(-1,0),e.preventDefault()}}});n.dataviz.ui.plugin(s)}(window.kendo.jQuery),function(e){function t(e,t){return n.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}</button>',e,t)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=t("in","+")+t("out","-"),s=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(a).on("click.kendoZoomControl",".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(e){var t=this.options.zoomStep;this.trigger("change",{delta:e*t})},_click:function(t){var n=1;e(t.currentTarget).is(".k-zoom-out")&&(n=-1),this._change(n),t.preventDefault()},_keydown:function(e){switch(e.which){case r.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case r.NUMPAD_MINUS:case 189:case 173:this._change(-1)}}});n.dataviz.ui.plugin(s)}(window.kendo.jQuery),function(){var e=Math,t=e.atan,n=e.exp,i=e.pow,r=e.sin,o=e.log,a=e.tan,s=window.kendo,l=s.Class,c=s.dataviz,u=s.deepExtend,d=s.geometry,h=d.Point,p=c.map.Location,f=s.util,g=f.rad,m=f.deg,v=f.limitValue,_=e.PI,y=_/2,b=_/4,w=_/180,k={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},x=l.extend({init:function(e){this._initOptions(e)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:k},forward:function(e,t){var n=this,i=n.options,r=i.datum.a,o=i.centralMeridian,a=v(e.lat,-n.MAX_LAT,n.MAX_LAT),s=t?v(e.lng,-n.MAX_LNG,n.MAX_LNG):e.lng,l=g(s-o)*r,c=n._projectLat(a);return new h(l,c)},_projectLat:function(e){var t=this.options.datum,n=t.e,s=t.a,l=g(e),c=a(b+l/2),u=n*r(l),d=i((1-u)/(1+u),n/2);return s*o(c*d)},inverse:function(e,t){var n=this,i=n.options,r=i.datum.a,o=i.centralMeridian,a=e.x/(w*r)+o,s=v(n._inverseY(e.y),-n.MAX_LAT,n.MAX_LAT);return t&&(a=v(a,-n.MAX_LNG,n.MAX_LNG)),new p(s,a)},_inverseY:function(o){var a,s,l,c,u=this,d=u.options.datum,h=d.a,p=d.e,f=p/2,g=n(-o/h),v=y-2*t(g);for(a=0;u.INVERSE_ITERATIONS>=a&&(s=p*r(v),l=i((1-s)/(1+s),f),v+=c=y-2*t(g*l)-v,!(e.abs(c)<=u.INVERSE_CONVERGENCE));a++);return m(v)}}),C=x.extend({MAX_LAT:85.0511287798,_projectLat:function(e){var t=this.options.datum.a,n=g(e),i=a(b+n/2);return t*o(i)},_inverseY:function(e){var i=this.options.datum.a,r=n(-e/i);return m(y-2*t(r))}}),T=l.extend({forward:function(e){return new h(e.lng,e.lat)},inverse:function(e){return new p(e.y,e.x)}}),S=l.extend({init:function(){var e=this._proj=new C,t=this.c=2*_*e.options.datum.a;this._tm=d.transform().translate(.5,.5).scale(1/t,-1/t),this._itm=d.transform().scale(t,-t).translate(-.5,-.5)},toPoint:function(e,t,n){return this._proj.forward(e,n).transform(this._tm).scale(t||1)},toLocation:function(e,t,n){return e=e.clone().scale(1/(t||1)).transform(this._itm),this._proj.inverse(e,n)}});u(c,{map:{crs:{EPSG3395:l.extend({init:function(){this._proj=new x},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}}),EPSG3857:S,EPSG4326:l.extend({init:function(){this._proj=new T},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}})},datums:{WGS84:k},projections:{Equirectangular:T,Mercator:x,SphericalMercator:C}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.dataviz,o=n.deepExtend,a=r.map.Extent,s=n.util.defined;o(r,{map:{layers:{Layer:i.extend({init:function(n,i){this._initOptions(i),this.map=n,this.element=e("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(n.scrollElement),this._beforeReset=t(this._beforeReset,this),this._reset=t(this._reset,this),this._resize=t(this._resize,this),this._panEnd=t(this._panEnd,this),this._activate(),this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset(),this._activate(),this._applyExtent(!0)},hide:function(){this._deactivate(),this._setVisibility(!1)},reset:function(){this._beforeReset(),this._reset()},_reset:function(){this._applyExtent()},_beforeReset:e.noop,_resize:e.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var e=this.options,t=this.map.zoom(),n=!s(e.minZoom)||t>=e.minZoom,i=!s(e.maxZoom)||e.maxZoom>=t,r=a.create(e.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(n&&i&&o)},_setVisibility:function(e){this.element.css("display",e?"":"none")},_activate:function(){var e=this.map;e.bind("beforeReset",this._beforeReset),e.bind("reset",this._reset),e.bind("resize",this._resize),e.bind("panEnd",this._panEnd)},_deactivate:function(){var e=this.map;e.unbind("beforeReset",this._beforeReset),e.unbind("reset",this._reset),e.unbind("resize",this._resize),e.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var e=this.map.attribution;e&&e.add(this.options.attribution)}})}}})}(window.kendo.jQuery),function(e){var t=window.kendo.jQuery.proxy,n=window.kendo,i=n.Class,r=n.data.DataSource,o=n.dataviz,a=n.deepExtend,s=n.util.last,l=n.util.defined,c=n.geometry,u=n.drawing,d=u.Group,h=o.map,p=h.Location,f=h.layers.Layer,g=f.extend({init:function(e,t){f.fn.init.call(this,e,t),this.surface=u.Surface.create(this.element,{width:e.scrollElement.width(),height:e.scrollElement.height()}),this._initRoot(),this.movable=new n.ui.Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this._initDataSource()},options:{autoBind:!0},destroy:function(){f.fn.destroy.call(this),this.surface.destroy(),this.dataSource.unbind("change",this._dataChange)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_reset:function(){f.fn._reset.call(this),this._translateSurface(),this._data&&this._load(this._data)},_initRoot:function(){this._root=new d,this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear(),this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=t(this._dataChange,this),this.dataSource=r.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._data=e.sender.view(),this._load(this._data)},_load:function(e){var t,n,i;for(this._clearMarkers(),this._loader||(this._loader=new m(this.map,this.options.style,this)),t=new d,n=0;e.length>n;n++)(i=this._loader.parse(e[n]))&&t.append(i);this._root.clear(),this._root.append(t)},shapeCreated:function(e){var t,n=!1;return e instanceof u.Circle&&(n=l(this._createMarker(e))),n||(t={layer:this,shape:e},n=this.map.trigger("shapeCreated",t)),n},_createMarker:function(e){var t=this.map.markers.bind({location:e.location},e.dataItem);return t&&this._markers.push(t),t},_clearMarkers:function(){for(var e=0;this._markers.length>e;e++)this.map.markers.remove(this._markers[e]);this._markers=[]},_panEnd:function(e){f.fn._panEnd.call(this,e),this._translateSurface()},_translateSurface:function(){var e=this.map,t=e.locationToView(e.extent().nw);this.surface.translate&&(this.surface.translate(t),this.movable.moveTo({x:t.x,y:t.y}))},_handler:function(e){var t=this;return function(n){if(n.element){var i={layer:t,shape:n.element,originalEvent:n.originalEvent};t.map.trigger(e,i)}}}}),m=i.extend({init:function(e,t,n){this.observer=n,this.locator=e,this.style=t},parse:function(e){var t=new d;return"Feature"===e.type?this._loadGeometryTo(t,e.geometry,e):this._loadGeometryTo(t,e,e),2>t.children.length&&(t=t.children[0]),t},_shapeCreated:function(e){var t=!1;return this.observer&&this.observer.shapeCreated&&(t=this.observer.shapeCreated(e)),t},_loadGeometryTo:function(e,t,n){var i,r,o=t.coordinates;switch(t.type){case"LineString":r=this._loadPolygon(e,[o],n),this._setLineFill(r);break;case"MultiLineString":for(i=0;o.length>i;i++)r=this._loadPolygon(e,[o[i]],n),this._setLineFill(r);break;case"Polygon":this._loadPolygon(e,o,n);break;case"MultiPolygon":for(i=0;o.length>i;i++)this._loadPolygon(e,o[i],n);break;case"Point":this._loadPoint(e,o,n);break;case"MultiPoint":for(i=0;o.length>i;i++)this._loadPoint(e,o[i],n)}},_setLineFill:function(e){var t=e.segments;(4>t.length||!t[0].anchor().equals(s(t).anchor()))&&(e.options.fill=null)},_loadShape:function(e,t){return this._shapeCreated(t)||e.append(t),t},_loadPolygon:function(e,t,n){var i=this._buildPolygon(t);return i.dataItem=n,this._loadShape(e,i)},_buildPolygon:function(e){var t,n,i,r=new(e.length>1?u.MultiPath:u.Path)(this.style);for(t=0;e.length>t;t++)for(n=0;e[t].length>n;n++)i=this.locator.locationToView(p.fromLngLat(e[t][n])),0===n?r.moveTo(i.x,i.y):r.lineTo(i.x,i.y);return r},_loadPoint:function(e,t,n){var i=p.fromLngLat(t),r=this.locator.locationToView(i),o=new c.Circle(r,10),a=new u.Circle(o,this.style);return a.dataItem=n,a.location=i,this._loadShape(e,a)}});a(n.data,{schemas:{geojson:{type:"json",data:function(e){return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e}}},transports:{geojson:{read:{dataType:"json"}}}}),a(o,{map:{layers:{shape:g,ShapeLayer:g},GeoJSONLoader:m}})}(),function(e){var t=window.kendo,n=t.getter,i=t.dataviz,r=t.deepExtend,o=t.util.defined,a=t.geometry,s=t.drawing,l=i.map,c=l.Location,u=l.layers.ShapeLayer.extend({options:{autoBind:!0,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(e){var t,i,r,a,s,l,u,d,h,p,f;if(this.surface.clear(),0!==e.length)for(t=this.options,i=n(t.valueField),(e=e.slice(0)).sort(function(e,t){return i(t)-i(e)}),i(e[0]),r=this._scaleType(),s=0;e.length>s;s++)l=e[s],u=n(t.locationField)(l),d=n(t.valueField)(l),o(u)&&o(d)&&(a||(a=new r([0,d],[t.minSize,t.maxSize])),u=c.create(u),h=this.map.locationToView(u),p=a.map(d),(f=this._createSymbol({center:h,size:p,style:t.style,dataItem:l,location:u})).dataItem=l,f.location=u,f.value=d,this._drawSymbol(f))},_scaleType:function(){var e=this.options.scale;return t.isFunction(e)?e:i.map.scales[e]},_createSymbol:function(e){var n=this.options.symbol;return t.isFunction(n)||(n=i.map.symbols[n]),n(e)},_drawSymbol:function(e){var t={layer:this,shape:e};this.map.trigger("shapeCreated",t)||this.surface.draw(e)}}),d=t.Class.extend({init:function(e,t){var n,i;this._domain=e,this._range=t,n=Math.sqrt(e[1])-Math.sqrt(e[0]),i=t[1]-t[0],this._ratio=i/n},map:function(e){var t=(Math.sqrt(e)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}});r(i,{map:{layers:{bubble:u,BubbleLayer:u},scales:{sqrt:d},symbols:{circle:function(e){var t=new a.Circle(e.center,e.size/2);return new s.Circle(t,e.style)},square:function(e){var t=new s.Path(e.style),n=e.size/2,i=e.center;return t.moveTo(i.x-n,i.y-n).lineTo(i.x+n,i.y-n).lineTo(i.x+n,i.y+n).lineTo(i.x-n,i.y+n).close(),t}}}})}(window.kendo.jQuery),function(e){var t=Math,n=e.proxy,i=window.kendo,r=i.Class,o=i.template,a=i.dataviz,s=i.deepExtend,l=i.geometry.Point,c=a.map.layers.Layer,u=i.util,d=u.objectKey,h=u.round,p=u.renderSize,f=u.limitValue,g=c.extend({init:function(e,t){c.fn.init.call(this,e,t),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var n=this._viewType();this._view=new n(this.element,this.options)},destroy:function(){c.fn.destroy.call(this),this._view.destroy(),this._view=null},_reset:function(){c.fn._reset.call(this),this._updateView(),this._view.reset()},_viewType:function(){return m},_activate:function(){c.fn._activate.call(this),i.support.mobileOS||(this._pan||(this._pan=i.throttle(n(this._render,this),100)),this.map.bind("pan",this._pan))},_deactivate:function(){c.fn._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var e=this._view,t=this.map,n=t.extent(),i={nw:t.locationToLayer(n.nw).round(),se:t.locationToLayer(n.se).round()};e.center(t.locationToLayer(t.center())),e.extent(i),e.zoom(t.zoom())},_resize:function(){this._render()},_panEnd:function(e){c.fn._panEnd.call(this,e),this._render()},_render:function(){this._updateView(),this._view.render()}}),m=r.extend({init:function(e,t){this.element=e,this._initOptions(t),this.pool=new _},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(e){this._center=e},extent:function(e){this._extent=e},zoom:function(e){this._zoom=e},pointToTileIndex:function(e){return new l(t.floor(e.x/this.options.tileSize),t.floor(e.y/this.options.tileSize))},tileCount:function(){var e=this.size(),n=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,r=this.indexToPoint(n).translate(-i.x,-i.y);return{x:t.ceil((t.abs(r.x)+e.width)/this.options.tileSize),y:t.ceil((t.abs(r.y)+e.height)/this.options.tileSize)}},size:function(){var e=this._extent.nw,t=this._extent.se.clone().translate(-e.x,-e.y);return{width:t.x,height:t.y}},indexToPoint:function(e){var t=e.x,n=e.y;return new l(t*this.options.tileSize,n*this.options.tileSize)},subdomainText:function(){var e=this.options.subdomains;return e[this.subdomainIndex++%e.length]},destroy:function(){this.element.empty(),this.pool.empty()},reset:function(){this.pool.reset(),this.subdomainIndex=0,this.basePoint=this._extent.nw,this.render()},render:function(){var e,t,n,i=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(t=0;i.x>t;t++)for(n=0;i.y>n;n++)(e=this.createTile({x:r.x+t,y:r.y+n})).visible||e.show()},createTile:function(e){var t=this.tileOptions(e),n=this.pool.get(this._center,t);return 0===n.element.parent().length&&this.element.append(n.element),n},tileOptions:function(e){var t=this.wrapIndex(e),n=this.indexToPoint(e),i=this.basePoint;return{index:t,currentIndex:e,point:n,offset:function(e){return new l(h(e.x),h(e.y))}(n.clone().translate(-i.x,-i.y)),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(e){var n=t.pow(2,this._zoom);return{x:this.wrapValue(e.x,n),y:f(e.y,0,n-1)}},wrapValue:function(e,n){var i=t.abs(e)%n;return e>=0?i:n-(0===i?n:i)}}),v=r.extend({init:function(e,t){this.id=e,this.visible=!0,this._initOptions(t),this.createElement(),this.show()},options:{urlTemplate:"",errorUrlTemplate:""},createElement:function(){this.element=e("<img style='position: absolute; display: block;' />").error(n(function(e){this.errorUrl()?e.target.setAttribute("src",this.errorUrl()):e.target.removeAttribute("src")},this))},show:function(){var e,t=this.element[0];t.style.top=p(this.options.offset.y),t.style.left=p(this.options.offset.x),(e=this.url())&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0},hide:function(){this.element[0].style.visibility="hidden",this.visible=!1},url:function(){return o(this.options.urlTemplate)(this.urlOptions())},errorUrl:function(){return o(this.options.errorUrlTemplate)(this.urlOptions())},urlOptions:function(){var e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),_=r.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(e,t){return this._items.length>=this.options.maxSize&&this._remove(e),this._create(t)},empty:function(){var e,t=this._items;for(e=0;t.length>e;e++)t[e].destroy();this._items=[]},reset:function(){var e,t=this._items;for(e=0;t.length>e;e++)t[e].hide()},_create:function(e){var t,n,i=this._items,r=u.hashKey(d(e)+d(e.currentIndex));for(n=0;i.length>n;n++)i[n].id===r&&(t=i[n]);return t?t.show():(t=new v(r,e),this._items.push(t)),t},_remove:function(e){var t,n,i=this._items,r=-1,o=-1;for(t=0;i.length>t;t++)(n=i[t].options.point.distanceTo(e))>r&&(o=t,r=n);-1!==o&&(i[o].destroy(),i.splice(o,1))}});s(a,{map:{layers:{tile:g,TileLayer:g,ImageTile:v,TilePool:_,TileView:m}}})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.dataviz,r=n.deepExtend,o=n.util.defined,a=i.map.Extent,s=i.map.Location,l=i.map.layers.TileLayer,c=i.map.layers.TileView,u=l.extend({init:function(t,n){l.fn.init.call(this,t,n),this._onMetadata=e.proxy(this._onMetadata,this),this._fetchMetadata()},options:{baseUrl:"//dev.virtualearth.net/REST/v1/Imagery/Metadata/",imagerySet:"road"},_fetchMetadata:function(){var t=this.options;if(!t.key)throw Error("Bing tile layer: API key is required");e.ajax({url:t.baseUrl+t.imagerySet,data:{output:"json",include:"ImageryProviders",key:t.key,uriScheme:this._scheme(window.location.protocol)},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(e){return"https"===e.replace(":","")?"https":"http"},_onMetadata:function(e){var t,n;e&&e.resourceSets.length&&(t=this.resource=e.resourceSets[0].resources[0],r(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains}),n=this.options,o(n.minZoom)||(n.minZoom=t.zoomMin),o(n.maxZoom)||(n.maxZoom=t.zoomMax),this._addAttribution(),"none"!==this.element.css("display")&&this.reset())},_viewType:function(){return d},_addAttribution:function(){var e,t,n,i,r,o=this.map.attribution;if(o&&(e=this.resource.imageryProviders))for(t=0;e.length>t;t++)for(n=e[t],i=0;n.coverageAreas.length>i;i++)r=n.coverageAreas[i],o.add({text:n.attribution,minZoom:r.zoomMin,maxZoom:r.zoomMax,extent:new a(new s(r.bbox[2],r.bbox[1]),new s(r.bbox[0],r.bbox[3]))})},imagerySet:function(e){return e?(this.options.imagerySet=e,this.map.attribution.clear(),this._fetchMetadata(),void this._reset()):this.options.imagerySet}}),d=c.extend({options:{culture:"en-US"},tileOptions:function(e){var t=c.fn.tileOptions.call(this,e);return t.culture=this.options.culture,t.quadkey=this.tileQuadKey(this.wrapIndex(e)),t},tileQuadKey:function(e){var t,n,i,r="";for(i=this._zoom;i>0;i--)t=0,n=1<<i-1,0!=(e.x&n)&&t++,0!=(e.y&n)&&(t+=2),r+=t;return r}});r(i,{map:{layers:{bing:u,BingLayer:u,BingView:d}}})}(window.kendo.jQuery),function(e,t){var n=document,i=Math,r=e.inArray,o=e.proxy,a=window.kendo,s=a.Class,l=a.data.DataSource,c=a.ui.Tooltip,u=a.dataviz,d=a.deepExtend,h=u.map,p=h.Location,f=h.layers.Layer,g=f.extend({init:function(e,t){f.fn.init.call(this,e,t),this._markerClick=o(this._markerClick,this),this.element.on("click",".k-marker",this._markerClick),this.items=[],this._initDataSource()},destroy:function(){f.fn.destroy.call(this),this.element.off("click",".k-marker",this._markerClick),this.dataSource.unbind("change",this._dataChange),this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(!e.isArray(t))return this._addOne(t);for(var n=0;t.length>n;n++)this._addOne(t[n])},remove:function(e){e.destroy();var t=r(e,this.items);t>-1&&this.items.splice(t,1)},clear:function(){for(var e=0;this.items.length>e;e++)this.items[e].destroy();this.items=[]},update:function(e){var t,n=e.location();n&&(e.showAt(this.map.locationToView(n)),t={marker:e,layer:this},this.map.trigger("markerActivate",t))},_reset:function(){var e,t;for(f.fn._reset.call(this),e=this.items,t=0;e.length>t;t++)this.update(e[t])},bind:function(e,t){var n,i=h.Marker.create(e,this.options);return i.dataItem=t,n={marker:i,layer:this},this.map.trigger("markerCreated",n)?void 0:(this.add(i),i)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_addOne:function(e){var t=m.create(e,this.options);return t.addTo(this),t},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=o(this._dataChange,this),this.dataSource=l.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._load(e.sender.view())},_load:function(e){var t,n,i,r;for(this._data=e,this.clear(),t=a.getter(this.options.locationField),n=a.getter(this.options.titleField),i=0;e.length>i;i++)r=e[i],this.bind({location:t(r),title:n(r)},r)},_markerClick:function(t){var n={marker:e(t.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",n)}}),m=s.extend({init:function(e){this.options=e||{}},addTo:function(e){this.layer=e.markers||e,this.layer.items.push(this),this.layer.update(this)},location:function(e){return e?(this.options.location=p.create(e).toArray(),this.layer&&this.layer.update(this),this):p.create(this.options.location)},showAt:function(e){this.render(),this.element.css({left:i.round(e.x),top:i.round(e.y)}),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null,this.hide()},render:function(){var t,i;this.element||(t=this.options,i=this.layer,this.element=e(n.createElement("span")).addClass("k-marker k-marker-"+a.toHyphens(t.shape||"pin")).attr("title",t.title).attr(t.attributes||{}).data("kendoMarker",this).css("zIndex",t.zIndex),i&&i.element.append(this.element),this.renderTooltip())},renderTooltip:function(){var e,t,n=this,i=n.options.title,r=n.options.tooltip||{};r&&c&&((e=r.template)&&(t=a.template(e),r.content=function(e){return e.location=n.location(),e.marker=n,t(e)}),(i||r.content||r.contentUrl)&&(this.tooltip=new c(this.element,r),this.tooltip.marker=this))}});m.create=function(e,t){return e instanceof m?e:new m(d({},t,e))},d(u,{map:{layers:{marker:g,MarkerLayer:g},Marker:m}})}(window.kendo.jQuery),function(e){var t=document,n=Math,i=n.min,r=n.pow,o=e.proxy,a=window.kendo,s=a.ui.Widget,l=a.deepExtend,c=a.dataviz,u=c.ui,d=a.geometry,h=d.Point,p=c.map,f=p.Extent,g=p.Location,m=p.crs.EPSG3857,v=a.util,_=v.defined,y=v.limitValue,b=v.renderPos,w=v.valueOrDefault,k=s.extend({init:function(e,n){a.destroy(e),s.fn.init.call(this,e),this._initOptions(n),this.bind(this.events,n),this.crs=new m,this.element.addClass("k-"+this.options.name.toLowerCase()).css("position","relative").empty().append(t.createElement("div")),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheel=o(this._mousewheel,this),this.element.bind("click",o(this._click,this)),this.element.bind("DOMMouseScroll mousewheel",this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerActivate","markerClick","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),this.markers.destroy();for(var e=0;this.layers.length>e;e++)this.layers[e].destroy();s.fn.destroy.call(this)},zoom:function(e){var t=this.options;return _(e)?(e=y(e,t.minZoom,t.maxZoom),t.zoom!==e&&(t.zoom=e,this._reset()),this):t.zoom},center:function(e){return e?(this.options.center=g.create(e).toArray(),this._reset(),this):g.create(this.options.center)},extent:function(e){return e?(this._setExtent(e),this):this._getExtent()},setOptions:function(e){s.fn.setOptions.call(this,e),this._reset()},locationToLayer:function(e,t){var n=!this.options.wraparound;return e=g.create(e),this.crs.toPoint(e,this._layerSize(t),n)},layerToLocation:function(e,t){var n=!this.options.wraparound;return e=h.create(e),this.crs.toLocation(e,this._layerSize(t),n)},locationToView:function(e){var t;return e=g.create(e),t=this.locationToLayer(this._viewOrigin),this.locationToLayer(e).translateWith(t.scale(-1))},viewToLocation:function(e,t){var n=this.locationToLayer(this._getOrigin(),t);return e=(e=h.create(e)).clone().translateWith(n),this.layerToLocation(e,t)},eventOffset:function(e){var t=this.element.offset(),n=e.originalEvent||e,i=w(n.pageX,n.clientX)-t.left,r=w(n.pageY,n.clientY)-t.top;return new d.Point(i,r)},eventToView:function(e){var t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(e){return this.locationToLayer(this.eventToLocation(e))},eventToLocation:function(e){var t=this.eventOffset(e);return this.viewToLocation(t)},viewSize:function(){var e=this.element,t=this._layerSize(),n=e.width();return this.options.wraparound||(n=i(t,n)),{width:n,height:i(t,e.height())}},exportVisual:function(){return this._reset(),!1},_setOrigin:function(e,t){var n,i=this.viewSize();return e=this._origin=g.create(e),(n=this.locationToLayer(e,t)).x+=i.width/2,n.y+=i.height/2,this.options.center=this.layerToLocation(n,t).toArray(),this},_getOrigin:function(e){var t,n=this.viewSize();return(e||!this._origin)&&((t=this.locationToLayer(this.center())).x-=n.width/2,t.y-=n.height/2,this._origin=this.layerToLocation(t)),this._origin},_setExtent:function(e){var t,i,r,o,a,s,l;for(e=f.create(e),this.center(e.center()),t=this.element.width(),i=this.element.height(),r=this.options.maxZoom;r>=this.options.minZoom&&(o=this.locationToLayer(e.nw,r),a=this.locationToLayer(e.se,r),s=n.abs(a.x-o.x),l=n.abs(a.y-o.y),!(t>=s&&i>=l));r--);this.zoom(r)},_getExtent:function(){var e,t=this._getOrigin(),n=this.locationToLayer(t),i=this.viewSize();return n.x+=i.width,n.y+=i.height,e=this.layerToLocation(n),new f(t,e)},_zoomAround:function(e,t){this._setOrigin(this.layerToLocation(e,t),t),this.zoom(t)},_initControls:function(){var e=this.options.controls;u.Attribution&&e.attribution&&this._createAttribution(e.attribution),a.support.mobileOS||(u.Navigator&&e.navigator&&this._createNavigator(e.navigator),u.ZoomControl&&e.zoom&&this._createZoomControl(e.zoom))},_createControlElement:function(t,n){var i=t.position||n,r="."+b(i).replace(" ","."),o=e(".k-map-controls"+r,this.element);return 0===o.length&&(o=e("<div>").addClass("k-map-controls "+b(i)).appendTo(this.element)),e("<div>").appendTo(o)},_createAttribution:function(e){var t=this._createControlElement(e,"bottomRight");this.attribution=new u.Attribution(t,e)},_createNavigator:function(e){var t=this._createControlElement(e,"topLeft"),n=this.navigator=new u.Navigator(t,e);this._navigatorPan=o(this._navigatorPan,this),n.bind("pan",this._navigatorPan),this._navigatorCenter=o(this._navigatorCenter,this),n.bind("center",this._navigatorCenter)},_navigatorPan:function(e){var t=this,n=t.scroller,i=n.scrollLeft+e.x,r=n.scrollTop-e.y,o=this._virtualSize,a=this.element.height(),s=this.element.width();i=y(i,o.x.min,o.x.max-s),r=y(r,o.y.min,o.y.max-a),t.scroller.one("scroll",function(e){t._scrollEnd(e)}),t.scroller.scrollTo(-i,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(e){var t=this._createControlElement(e,"topLeft"),n=this.zoomControl=new u.ZoomControl(t,e);this._zoomControlChange=o(this._zoomControlChange,this),n.bind("change",this._zoomControlChange)},_zoomControlChange:function(e){this.trigger("zoomStart",{originalEvent:e})||(this.zoom(this.zoom()+e.delta),this.trigger("zoomEnd",{originalEvent:e}))},_initScroller:function(){var e=a.support.mobileOS?.93:.9,t=!1!==this.options.zoomable,n=this.scroller=new a.mobile.ui.Scroller(this.element.children(0),{friction:e,velocityMultiplier:5,zoom:t,mousewheelScrolling:!1});n.bind("scroll",o(this._scroll,this)),n.bind("scrollEnd",o(this._scrollEnd,this)),n.userEvents.bind("gesturestart",o(this._scaleStart,this)),n.userEvents.bind("gestureend",o(this._scale,this)),this.scrollElement=n.scrollElement},_initLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[];for(e=0;o.length>e;e++)n=(t=o[e]).type||"shape",i=this.options.layerDefaults[n],r=c.map.layers[n],a.push(new r(this,l({},i,t)))},_initMarkers:function(){this.markers=new p.layers.MarkerLayer(this,this.options.markerDefaults),this.markers.add(this.options.markers)},_scroll:function(e){var t=this.locationToLayer(this._viewOrigin).round(),n=e.sender.movable,i=new d.Point(n.x,n.y).scale(-1).scale(1/n.scale);t.x+=i.x,t.y+=i.y,this._scrollOffset=i,this._setOrigin(this.layerToLocation(t)),this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(e){this._scrollOffset&&this._panComplete()&&(this._scrollOffset=null,this._panEndTS=new Date,this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()}))},_panComplete:function(){return new Date-(this._panEndTS||0)>50},_scaleStart:function(e){if(this.trigger("zoomStart",{originalEvent:e})){var t=e.touches[1];t&&t.cancel()}},_scale:function(e){var t=this.scroller.movable.scale,n=this._scaleToZoom(t),i=new d.Point(e.center.x,e.center.y),r=this.viewToLocation(i,n),o=this.locationToLayer(r,n).translate(-i.x,-i.y);this._zoomAround(o,n),this.trigger("zoomEnd",{originalEvent:e})},_scaleToZoom:function(e){var t=this._layerSize()*e/this.options.minSize,i=n.log(t)/n.log(2);return n.round(i)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},_resetScroller:function(){var e,t,n,i,o=this.scroller,a=o.dimensions.x,s=o.dimensions.y,l=this._layerSize(),c=20*l,u=this.extent().nw,d=this.locationToLayer(u).round();o.movable.round=!0,o.reset(),o.userEvents.cancel(),e=this.options.maxZoom-this.zoom(),o.dimensions.maxScale=r(2,e),t={min:-d.x,max:l-d.x},n={min:-d.y,max:l-d.y},this.options.wraparound&&(t.min=-c,t.max=c),!1===this.options.pannable&&(i=this.viewSize(),t.min=n.min=0,t.max=i.width,n.max=i.height),a.makeVirtual(),s.makeVirtual(),a.virtualSize(t.min,t.max),s.virtualSize(n.min,n.max),this._virtualSize={x:t,y:n}},_renderLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[];for(this.scrollWrap.empty(),e=0;o.length>e;e++)n=(t=o[e]).type||"shape",i=this.options.layerDefaults[n],r=c.map.layers[n],a.push(new r(this,l({},i,t)))},_layerSize:function(e){return e=w(e,this.options.zoom),this.options.minSize*r(2,e)},_click:function(e){if(this._panComplete()){var t=this.eventOffset(e);this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})}},_mousewheel:function(e){var t,n,i,r,o,a,s;e.preventDefault(),t=c.mwDelta(e)>0?-1:1,n=this.options,i=this.zoom(),r=y(i+t,n.minZoom,n.maxZoom),!1!==n.zoomable&&r!==i&&(this.trigger("zoomStart",{originalEvent:e})||(o=this.eventOffset(e),a=this.viewToLocation(o),s=this.locationToLayer(a,r).translate(-o.x,-o.y),this._zoomAround(s,r),this.trigger("zoomEnd",{originalEvent:e})))}});c.ui.plugin(k)}(window.kendo.jQuery),function(e,t){var n,i,r=window.kendo,o=r.dataviz.diagram={},a=r.deepExtend,s=e.isArray,l={};a(l,{isNearZero:function(e){return Math.abs(e)<1e-6},isDefined:function(e){return t!==e},isUndefined:function(e){return t===e||null===e},isObject:function(e){return e===Object(e)},has:function(e,t){return Object.hasOwnProperty.call(e,t)},isString:function(e){return"[object String]"==Object.prototype.toString.call(e)},isBoolean:function(e){return"[object Boolean]"==Object.prototype.toString.call(e)},isType:function(e,t){return Object.prototype.toString.call(e)=="[object "+t+"]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isEmpty:function(e){if(null===e)return!0;if(s(e)||l.isString(e))return 0===e.length;for(var t in e)if(l.has(e,t))return!1;return!0},simpleExtend:function(e,t){if(l.isObject(t))for(var n in t)e[n]=t[n]},initArray:function(e,t){var n,i=[];for(n=0;e>n;++n)i[n]=t;return i},serializePoints:function(e){var t,n,i=[];for(t=0;e.length>t;t++)n=e[t],i.push(n.x+";"+n.y);return i.join(";")},deserializePoints:function(e){var t,n=e.split(";"),i=[];if(n.length%2!=0)throw"Not an array of points.";for(t=0;n.length>t;t+=2)i.push(new o.Point(parseInt(n[t],10),parseInt(n[t+1],10)));return i},randomInteger:function(e,t){return parseInt(Math.floor(Math.random()*t)+e,10)},DFT:function(e,t){var n,i;if(t(e),e.childNodes)for(n=0;e.childNodes.length>n;n++)i=e.childNodes[n],this.DFT(i,t)},getMatrixAngle:function(e){return null===e||0===e.d?0:180*Math.atan2(e.b,e.d)/Math.PI},getMatrixScaling:function(e){return[Math.sqrt(e.a*e.a+e.c*e.c),Math.sqrt(e.b*e.b+e.d*e.d)]}}),l.sign=function(e){return e?0>e?-1:1:0},l.findAngle=function(e,t){return 180*function(e,t){if(e==t)return 0;var n=t.x-e.x,i=e.y-t.y,r=Math.atan(n/i);return i>=0?0>n?r+2*Math.PI:r:r+Math.PI}(e,t)/Math.PI},l.forEach=function(e,t,n){for(var i=0;e.length>i;i++)t.call(n,e[i],i,e)},l.any=function(e,t){for(var n=0;e.length>n;++n)if(t(e[n]))return e[n];return null},l.remove=function(e,t){for(var n;-1!==(n=l.indexOf(e,t));)e.splice(n,1);return e},l.contains=function(e,t){return-1!==l.indexOf(e,t)},l.indexOf=function(t,n){return e.inArray(n,t)},l.fold=function(e,t,n,i){var r,o,a=arguments.length>2;for(r=0;e.length>r;r++)o=e[r],a?n=t.call(i,n,o,r,e):(n=o,a=!0);if(!a)throw"Reduce of empty array with no initial value";return n},l.find=function(e,t,n){var i;return l.any(e,function(e,r,o){return!!t.call(n,e,r,o)&&(i=e,!0)}),i},l.first=function(e,t,n){return 0===e.length?null:l.isUndefined(t)?e[0]:l.find(e,t,n)},l.insert=function(e,t,n){return e.splice(n,0,t),e},l.all=function(e,t,n){var i,r,o=!0;for(r=0;e.length>r&&(i=e[r],o=o&&t.call(n,i,r,e));r++);return o},l.clear=function(e){e.splice(0,e.length)},l.bisort=function(e,t,n){if(l.isUndefined(e))throw"First array is not specified.";if(l.isUndefined(t))throw"Second array is not specified.";if(e.length!=t.length)throw"The two arrays should have equal length";var i,r=[];for(i=0;e.length>i;i++)r.push({x:e[i],y:t[i]});for(r.sort(l.isUndefined(n)?function(e,t){return e.x-t.x}:function(e,t){return n(e.x,t.x)}),l.clear(e),l.clear(t),i=0;r.length>i;i++)e.push(r[i].x),t.push(r[i].y)},l.addRange=function(e,t){e.push.apply(e,t)},n={easeInOut:function(e){return-Math.cos(e*Math.PI)/2+.5}},i=r.Class.extend({init:function(){this.adapters=[],this.target=0,this.tick=0,this.interval=20,this.duration=800,this.lastTime=null,this.handlers=[];var e=this;this.transition=n.easeInOut,this.timerDelegate=function(){e.onTimerEvent()}},addAdapter:function(e){this.adapters.push(e)},onComplete:function(e){this.handlers.push(e)},removeHandler:function(t){this.handlers=e.grep(this.handlers,function(e){return e!==t})},trigger:function(){var e=this;this.handlers&&l.forEach(this.handlers,function(t){return t.call(null!==e.caller?e.caller:e)})},onStep:function(){},seekTo:function(e){this.seekFromTo(this.tick,e)},seekFromTo:function(e,t){this.target=Math.max(0,Math.min(1,t)),this.tick=Math.max(0,Math.min(1,e)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.interval))},stop:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,this.trigger())},play:function(e){0!==this.adapters.length&&(null!==e&&(this.caller=e),this.initState(),this.seekFromTo(0,1))},reverse:function(){this.seekFromTo(1,0)},initState:function(){if(0!==this.adapters.length)for(var e=0;this.adapters.length>e;e++)this.adapters[e].initState()},propagate:function(){var e,t=this.transition(this.tick);for(e=0;this.adapters.length>e;e++)this.adapters[e].update(t)},onTimerEvent:function(){var e,t=(new Date).getTime(),n=t-this.lastTime;this.lastTime=t,e=n/this.duration*(this.target>this.tick?1:-1),Math.abs(e)>=Math.abs(this.tick-this.target)?this.tick=this.target:this.tick+=e;try{this.propagate()}finally{this.onStep.call(this),this.target==this.tick&&this.stop()}}}),r.deepExtend(o,{init:function(e){r.init(e,o.ui)},Utils:l,Range:function(e,n,i){var r,o,a,s;if(t===e||t===n)return[];if(i&&l.sign(n-e)!=l.sign(i))throw"The sign of the increment should allow to reach the stop-value.";if(i=i||1,e=e||0,((n=n||e)-e)/i==1/0)throw"Infinite range defined.";if(r=[],o=-1,i*=s=function(e){for(var t=1;e*t%1;)t*=10;return t}(Math.abs(i)),(e*=s)>(n*=s)&&i>0&&(i=-i),0>i)for(;(a=e+i*++o)>=n;)r.push(a/s);else for(;(a=e+i*++o)<=n;)r.push(a/s);return r},Ticker:i})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i,r){var o,a,s=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(!function(e){return Math.abs(e)<E}(s)&&(o=((e.y-n.y)*(i.x-n.x)-(e.x-n.x)*(i.y-n.y))/s,a=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/s,!r||!(0>o||o>1||0>a||a>1)))return new S(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y))}function i(e){var t,n,i;for(T.isUndefined(e)&&(e=10),t="",n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=e;i>0;--i)t+=n.charAt(Math.round(Math.random()*(n.length-1)));return t}var r,o,a,s,l,c,u,d,h,p,f,g,m,v,_,y,b=window.kendo,w=b.dataviz.diagram,k=b.Class,x=b.deepExtend,C=b.dataviz,T=w.Utils,S=C.Point2D,D=b.isFunction,A=T.contains,M=e.map,E=1e-6;x(S.fn,{plus:function(e){return new S(this.x+e.x,this.y+e.y)},minus:function(e){return new S(this.x-e.x,this.y-e.y)},offset:function(e){return new S(this.x-e,this.y-e)},times:function(e){return new S(this.x*e,this.y*e)},normalize:function(){return 0===this.length()?new S:this.times(1/this.length())},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},toString:function(){return"("+this.x+","+this.y+")"},lengthSquared:function(){return this.x*this.x+this.y*this.y},middleOf:function(e,t){return new S(t.x-e.x,t.y-e.y).times(.5).plus(e)},toPolar:function(e){var t,n,i,r=1;if(e&&(r=180/Math.PI),t=Math.atan2(Math.abs(this.y),Math.abs(this.x)),n=Math.PI/2,i=this.length(),0===this.x){if(0===this.y)return new c(0,0);if(this.y>0)return new c(i,r*n);if(0>this.y)return new c(i,3*r*n)}else if(this.x>0){if(0===this.y)return new c(i,0);if(this.y>0)return new c(i,r*t);if(0>this.y)return new c(i,r*(4*n-t))}else{if(0===this.y)return new c(i,2*n);if(this.y>0)return new c(i,r*(2*n-t));if(0>this.y)return new c(i,r*(2*n+t))}},isOnLine:function(e,t){var n,i,r,a,s;return e.x>t.x&&(n=t,t=e,e=n),i=new o(e.x,e.y).inflate(3,3),r=new o(t.x,t.y).inflate(3,3),!!i.union(r).contains(this)&&(e.x===t.x||e.y===t.y||(t.y>e.y?(a=i.x+(r.x-i.x)*(this.y-(i.y+i.height))/(r.y+r.height-(i.y+i.height)),s=i.x+i.width+(r.x+r.width-(i.x+i.width))*(this.y-i.y)/(r.y-i.y)):(a=i.x+(r.x-i.x)*(this.y-i.y)/(r.y-i.y),s=i.x+i.width+(r.x+r.width-(i.x+i.width))*(this.y-(i.y+i.height))/(r.y+r.height-(i.y+i.height))),this.x>a&&s>this.x))}}),x(S,{parse:function(e){var n=e.slice(1,e.length-1).split(","),i=parseInt(n[0],10),r=parseInt(n[1],10);return isNaN(i)||isNaN(r)?t:new S(i,r)}}),r=k.extend({init:function(e,t,n){this.point=e,this.left=t,this.right=n}}),o=k.extend({init:function(e,t,n,i){this.x=e||0,this.y=t||0,this.width=n||0,this.height=i||0},contains:function(e){return e.x>=this.x&&this.x+this.width>=e.x&&e.y>=this.y&&this.y+this.height>=e.y},inflate:function(e,n){return n===t&&(n=e),this.x-=e,this.y-=n,this.width+=2*e+1,this.height+=2*n+1,this},offset:function(e,t){var n=e,i=t;return e instanceof S&&(n=e.x,i=e.y),this.x+=n,this.y+=i,this},union:function(e){var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);return new o(t,n,i-t,r-n)},center:function(){return new S(this.x+this.width/2,this.y+this.height/2)},top:function(){return new S(this.x+this.width/2,this.y)},right:function(){return new S(this.x+this.width,this.y+this.height/2)},bottom:function(){return new S(this.x+this.width/2,this.y+this.height)},left:function(){return new S(this.x,this.y+this.height/2)},topLeft:function(){return new S(this.x,this.y)},topRight:function(){return new S(this.x+this.width,this.y)},bottomLeft:function(){return new S(this.x,this.y+this.height)},bottomRight:function(){return new S(this.x+this.width,this.y+this.height)},clone:function(){return new o(this.x,this.y,this.width,this.height)},isEmpty:function(){return!this.width&&!this.height},equals:function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},rotatedBounds:function(e){var t=this.clone(),n=this.rotatedPoints(e),i=n[0],r=n[1],o=n[2],a=n[3];return t.x=Math.min(o.x,i.x,r.x,a.x),t.y=Math.min(o.y,i.y,r.y,a.y),t.width=Math.max(o.x,i.x,r.x,a.x)-t.x,t.height=Math.max(o.y,i.y,r.y,a.y)-t.y,t},rotatedPoints:function(e){var t=this,n=t.center(),i=t.bottomRight().rotate(n,360-e);return[t.topLeft().rotate(n,360-e),t.topRight().rotate(n,360-e),i,t.bottomLeft().rotate(n,360-e)]},toString:function(e){return e=e||" ",this.x+e+this.y+e+this.width+e+this.height},scale:function(e,t,n,i,r){var o,a,s,l=this.topLeft(),c=this.center();l.rotate(c,360-r).rotate(i,r),o=n.minus(l),a=new S(o.x*e,o.y*t),s=o.minus(a),(l=l.plus(s)).rotate(i,360-r).rotate(c,r),this.x=l.x,this.y=l.y,this.width*=e,this.height*=t},zoom:function(e){return this.x*=e,this.y*=e,this.width*=e,this.height*=e,this}}),(a=k.extend({init:function(e,t){this.width=e,this.height=t}})).prototype.Empty=new a(0,0),o.toRect=function(e){return e instanceof o||(e=new o(e.x,e.y,e.width,e.height)),e},o.empty=function(){return new o(0,0,0,0)},o.fromPoints=function(e,t){if(isNaN(e.x)||isNaN(e.y)||isNaN(t.x)||isNaN(t.y))throw"Some values are NaN.";return new o(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.abs(e.x-t.x),Math.abs(e.y-t.y))},s={lines:function(e,t,i,r){return n(e,t,i,r)},segments:function(e,t,i,r){return n(e,t,i,r,!0)},rectWithLine:function(e,t,n){return s.segments(t,n,e.topLeft(),e.topRight())||s.segments(t,n,e.topRight(),e.bottomRight())||s.segments(t,n,e.bottomLeft(),e.bottomRight())||s.segments(t,n,e.topLeft(),e.bottomLeft())},rects:function(e,t,n){var i,r,o=t.topLeft(),a=t.topRight(),l=t.bottomLeft(),c=t.bottomRight(),u=t.center();return n&&(o=o.rotate(u,n),a=a.rotate(u,n),l=l.rotate(u,n),c=c.rotate(u,n)),(i=e.contains(o)||e.contains(a)||e.contains(l)||e.contains(c)||s.rectWithLine(e,o,a)||s.rectWithLine(e,o,l)||s.rectWithLine(e,a,c)||s.rectWithLine(e,l,c))||(o=e.topLeft(),a=e.topRight(),l=e.bottomLeft(),c=e.bottomRight(),n&&(r=360-n,o=o.rotate(u,r),a=a.rotate(u,r),l=l.rotate(u,r),c=c.rotate(u,r)),i=t.contains(o)||t.contains(a)||t.contains(l)||t.contains(c)),i}},l=k.extend({init:function(e){this.container=o.toRect(e)},align:function(e,t){var n,i=t.toLowerCase().split(" ");for(n=0;i.length>n;n++)e=this._singleAlign(e,i[n]);return e},_singleAlign:function(e,t){return D(this[t])?this[t](e):e},left:function(e){return this._align(e,this._left)},center:function(e){return this._align(e,this._center)},right:function(e){return this._align(e,this._right)},stretch:function(e){return this._align(e,this._stretch)},top:function(e){return this._align(e,this._top)},middle:function(e){return this._align(e,this._middle)},bottom:function(e){return this._align(e,this._bottom)},_left:function(e,t){t.x=e.x},_center:function(e,t){t.x=(e.width-t.width)/2||0},_right:function(e,t){t.x=e.width-t.width},_top:function(e,t){t.y=e.y},_middle:function(e,t){t.y=(e.height-t.height)/2||0},_bottom:function(e,t){t.y=e.height-t.height},_stretch:function(e,t){t.x=0,t.y=0,t.height=e.height,t.width=e.width},_align:function(e,t){return e=o.toRect(e),t(this.container,e),e}}),c=k.extend({init:function(e,t){this.r=e,this.angle=t}}),x(u=k.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},plus:function(e){this.a+=e.a,this.b+=e.b,this.c+=e.c,this.d+=e.d,this.e+=e.e,this.f+=e.f},minus:function(e){this.a-=e.a,this.b-=e.b,this.c-=e.c,this.d-=e.d,this.e-=e.e,this.f-=e.f},times:function(e){return new u(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},apply:function(e){return new S(this.a*e.x+this.c*e.y+this.e,this.b*e.x+this.d*e.y+this.f)},applyRect:function(e){return o.fromPoints(this.apply(e.topLeft()),this.apply(e.bottomRight()))},toString:function(){return"matrix("+this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f+")"}}),{fromSVGMatrix:function(e){var t=new u;return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t},fromMatrixVector:function(e){var t=new u;return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t},fromList:function(e){if(6!==e.length)throw"The given list should consist of six elements.";var t=new u;return t.a=e[0],t.b=e[1],t.c=e[2],t.d=e[3],t.e=e[4],t.f=e[5],t},translation:function(e,t){var n=new u;return n.a=1,n.b=0,n.c=0,n.d=1,n.e=e,n.f=t,n},unit:function(){return new u(1,0,0,1,0,0)},rotation:function(e,t,n){var i=new u;return i.a=Math.cos(e*Math.PI/180),i.b=Math.sin(e*Math.PI/180),i.c=-i.b,i.d=i.a,i.e=t-t*i.a+n*i.b||0,i.f=n-n*i.a-t*i.b||0,i},scaling:function(e,t){var n=new u;return n.a=e,n.b=0,n.c=0,n.d=t,n.e=0,n.f=0,n},parse:function(e){var t,n;if(e){if("matrix"===(e=e.trim()).slice(0,6).toLowerCase()){if(6===(t=(n=e.slice(7,e.length-1).trim()).split(",")).length)return u.fromList(M(t,function(e){return parseFloat(e)}));if(6===(t=n.split(" ")).length)return u.fromList(M(t,function(e){return parseFloat(e)}))}if("("===e.slice(0,1)&&")"===e.slice(e.length-1)&&(e=e.substr(1,e.length-1)),e.indexOf(",")>0&&6===(t=e.split(",")).length)return u.fromList(M(t,function(e){return parseFloat(e)}));if(e.indexOf(" ")>0&&6===(t=e.split(" ")).length)return u.fromList(M(t,function(e){return parseFloat(e)}))}return t}}),d=k.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},fromMatrix:function(e){var t=new d;return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t}}),h={_distanceToLineSquared:function(e,t,n){function i(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}if(t===n)return i(e,t);var r=n.x-t.x,o=n.y-t.y,a=(e.x-t.x)*r+(e.y-t.y)*o;return 0>a?i(t,e):0>(a=(n.x-e.x)*r+(n.y-e.y)*o)?i(n,e):(a=(n.x-e.x)*o-(n.y-e.y)*r)*a/(r*r+o*o)},distanceToLine:function(e,t,n){return Math.sqrt(this._distanceToLineSquared(e,t,n))},distanceToPolyline:function(e,t){var n,i,r,o,a=Number.MAX_VALUE;if(T.isUndefined(t)||0===t.length)return Number.MAX_VALUE;for(n=0;t.length-1>n;n++)i=t[n],r=t[n+1],a>(o=this._distanceToLineSquared(e,i,r))&&(a=o);return Math.sqrt(a)}},p=b.Class.extend({init:function(){this._buckets=[],this.length=0},add:function(e,t){var n=this._createGetBucket(e);return T.isDefined(t)&&(n.value=t),n},get:function(e){return this._bucketExists(e)?this._createGetBucket(e):null},set:function(e,t){this.add(e,t)},containsKey:function(e){return this._bucketExists(e)},remove:function(e){if(this._bucketExists(e)){var t=this._hash(e);return delete this._buckets[t],this.length--,e}},forEach:function(e){var t,n,i,r,o=this._hashes();for(t=0,n=o.length;n>t;t++)i=o[t],r=this._buckets[i],T.isUndefined(r)||e(r)},clone:function(){var e,t,n,i,r=new p,o=this._hashes();for(e=0,t=o.length;t>e;e++)n=o[e],i=this._buckets[n],T.isUndefined(i)||r.add(i.key,i.value);return r},_hashes:function(){var e,t=[];for(e in this._buckets)this._buckets.hasOwnProperty(e)&&t.push(e);return t},_bucketExists:function(e){var t=this._hash(e);return T.isDefined(this._buckets[t])},_createGetBucket:function(e){var t=this._hash(e),n=this._buckets[t];return T.isUndefined(n)&&(n={key:e},this._buckets[t]=n,this.length++),n},_hash:function(e){if(T.isNumber(e))return e;if(T.isString(e))return this._hashString(e);if(T.isObject(e))return this._objectHashId(e);throw"Unsupported key type."},_hashString:function(e){var t,n=0;if(0===e.length)return n;for(t=0;e.length>t;t++)n=32*n-n+e.charCodeAt(t);return n},_objectHashId:function(e){var t=e._hashId;return T.isUndefined(t)&&(t=i(),e._hashId=t),t}}),f=b.Observable.extend({init:function(t){var n;if(b.Observable.fn.init.call(this),this._hashTable=new p,this.length=0,T.isDefined(t))if(e.isArray(t))for(n=0;t.length>n;n++)this.add(t[n]);else t.forEach(function(e,t){this.add(e,t)},this)},add:function(e,t){var n=this._hashTable.get(e);n||(n=this._hashTable.add(e),this.length++,this.trigger("changed")),n.value=t},set:function(e,t){this.add(e,t)},get:function(e){var t=this._hashTable.get(e);if(t)return t.value;throw Error("Cannot find key "+e)},containsKey:function(e){return this._hashTable.containsKey(e)},remove:function(e){return this.containsKey(e)?(this.trigger("changed"),this.length--,this._hashTable.remove(e)):t},forEach:function(e,t){this._hashTable.forEach(function(n){e.call(t,n.key,n.value)})},forEachValue:function(e,t){this._hashTable.forEach(function(n){e.call(t,n.value)})},forEachKey:function(e,t){this._hashTable.forEach(function(n){e.call(t,n.key)})},keys:function(){var e=[];return this.forEachKey(function(t){e.push(t)}),e}}),g=b.Class.extend({init:function(){this._tail=null,this._head=null,this.length=0},enqueue:function(e){var t={value:e,next:null};this._head?(this._tail.next=t,this._tail=this._tail.next):(this._head=t,this._tail=this._head),this.length++},dequeue:function(){if(1>this.length)throw Error("The queue is empty.");var e=this._head.value;return this._head=this._head.next,this.length--,e},contains:function(e){for(var t=this._head;t;){if(t.value===e)return!0;t=t.next}return!1}}),m=b.Observable.extend({init:function(e){b.Observable.fn.init.call(this),this._hashTable=new p,this.length=0,T.isDefined(e)&&(e instanceof p?e.forEach(function(e){this.add(e)}):e instanceof f&&e.forEach(function(e,t){this.add({key:e,value:t})},this))},contains:function(e){return this._hashTable.containsKey(e)},add:function(e){this._hashTable.get(e)||(this._hashTable.add(e,e),this.length++,this.trigger("changed"))},get:function(e){return this.contains(e)?this._hashTable.get(e).value:null},hash:function(e){return this._hashTable._hash(e)},remove:function(e){this.contains(e)&&(this._hashTable.remove(e),this.length--,this.trigger("changed"))},forEach:function(e,t){this._hashTable.forEach(function(t){e(t.value)},t)},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}}),v=b.Class.extend({init:function(e,t){if(this.links=[],this.outgoing=[],this.incoming=[],this.weight=1,this.id=T.isDefined(e)?e:i(),T.isDefined(t)){this.associatedShape=t;var n=t.bounds();this.width=n.width,this.height=n.height,this.x=n.x,this.y=n.y}else this.associatedShape=null;this.data=null,this.type="Node",this.shortForm="Node '"+this.id+"'",this.isVirtual=!1},isIsolated:function(){return T.isEmpty(this.links)},bounds:function(e){return T.isDefined(e)?(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,t):new w.Rect(this.x,this.y,this.width,this.height)},isLinkedTo:function(e){var t=this;return T.any(t.links,function(n){return n.getComplement(t)===e})},getChildren:function(){var e,t,n,i;if(0===this.outgoing.length)return[];for(e=[],t=0,n=this.outgoing.length;n>t;t++)i=this.outgoing[t],e.push(i.getComplement(this));return e},getParents:function(){var e,t,n,i;if(0===this.incoming.length)return[];for(e=[],t=0,n=this.incoming.length;n>t;t++)i=this.incoming[t],e.push(i.getComplement(this));return e},clone:function(){var e=new v;return T.isDefined(this.weight)&&(e.weight=this.weight),T.isDefined(this.balance)&&(e.balance=this.balance),T.isDefined(this.owner)&&(e.owner=this.owner),e.associatedShape=this.associatedShape,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},adjacentTo:function(e){return null!==this.isLinkedTo(e)},removeLink:function(e){e.source===this&&(T.remove(this.links,e),T.remove(this.outgoing,e),e.source=null),e.target===this&&(T.remove(this.links,e),T.remove(this.incoming,e),e.target=null)},hasLinkTo:function(e){return T.any(this.outgoing,function(t){return t.target===e})},degree:function(){return this.links.length},incidentWith:function(e){return A(this.links,e)},getLinksWith:function(e){return T.all(this.links,function(t){return t.getComplement(this)===e},this)},getNeighbors:function(){var e=[];return T.forEach(this.incoming,function(t){e.push(t.getComplement(this))},this),T.forEach(this.outgoing,function(t){e.push(t.getComplement(this))},this),e}}),_=b.Class.extend({init:function(e,t,n,r){if(T.isUndefined(e))throw"The source of the new link is not set.";if(T.isUndefined(t))throw"The target of the new link is not set.";var o,a;o=T.isString(e)?new v(e):e,a=T.isString(t)?new v(t):t,this.source=o,this.target=a,this.source.links.push(this),this.target.links.push(this),this.source.outgoing.push(this),this.target.incoming.push(this),this.id=T.isDefined(n)?n:i(),this.associatedConnection=T.isDefined(r)?r:null,this.type="Link",this.shortForm="Link '"+this.source.id+"->"+this.target.id+"'"},getComplement:function(e){if(this.source!==e&&this.target!==e)throw"The given node is not incident with this link.";return this.source===e?this.target:this.source},getCommonNode:function(e){return this.source===e.source||this.source===e.target?this.source:this.target===e.source||this.target===e.target?this.target:null},isBridging:function(e,t){return this.source===e&&this.target===t||this.source===t&&this.target===e},getNodes:function(){return[this.source,this.target]},incidentWith:function(e){return this.source===e||this.target===e},adjacentTo:function(e){return A(this.source.links,e)||A(this.target.links,e)},changeSource:function(e){T.remove(this.source.links,this),T.remove(this.source.outgoing,this),e.links.push(this),e.outgoing.push(this),this.source=e},changeTarget:function(e){T.remove(this.target.links,this),T.remove(this.target.incoming,this),e.links.push(this),e.incoming.push(this),this.target=e},changesNodes:function(e,t){this.source===e?this.changeSource(t):this.target===e&&this.changeTarget(t)},reverse:function(){var e=this.source,t=this.target;return this.source=t,T.remove(e.outgoing,this),this.source.outgoing.push(this),this.target=e,T.remove(t.incoming,this),this.target.incoming.push(this),this},directTo:function(e){if(this.source!==e&&this.target!==e)throw"The given node is not incident with this link.";this.target!==e&&this.reverse()},createReverseEdge:function(){var e=this.clone();return e.reverse(),e.reversed=!0,e},clone:function(){return new _(this.source,this.target)}}),(y=b.Class.extend({init:function(e){this.links=[],this.nodes=[],this.diagram=null,this._root=null,T.isDefined(e)?T.isString(e)?this.id=e:(this.diagram=e,this.id=e.id):this.id=i(),this.bounds=new o,this._hasCachedRelationships=!1,this.type="Graph"},cacheRelationships:function(e){var t,n,i;if(T.isUndefined(e)&&(e=!1),!this._hasCachedRelationships||e){for(t=0,n=this.nodes.length;n>t;t++)(i=this.nodes[t]).children=this.getChildren(i),i.parents=this.getParents(i);this._hasCachedRelationships=!0}},assignLevels:function(e,t,n){var i,r,o,a;if(!e)throw"Start node not specified.";for(T.isUndefined(t)&&(t=0),this.cacheRelationships(),T.isUndefined(n)&&(n=new f,T.forEach(this.nodes,function(e){n.add(e,!1)})),n.set(e,!0),e.level=t,r=0,o=(i=e.children).length;o>r;r++)(a=i[r])&&!n.get(a)&&this.assignLevels(a,t+1,n)},root:function(e){if(T.isUndefined(e)){if(this._root)return this._root;var t=T.first(this.nodes,function(e){return 0===e.incoming.length});return t||T.first(this.nodes)}this._root=e},getConnectedComponents:function(){var e,t,n,i;for(this.componentIndex=0,this.setItemIndices(),e=T.initArray(this.nodes.length,-1),t=0;this.nodes.length>t;t++)-1===e[t]&&(this._collectConnectedNodes(e,t),this.componentIndex++);for(n=[],i=0;this.componentIndex>i;++i)n[i]=new y;for(i=0;e.length>i;++i)n[e[i]].addNodeAndOutgoings(this.nodes[i]);return n.sort(function(e,t){return t.nodes.length-e.nodes.length}),n},_collectConnectedNodes:function(e,t){e[t]=this.componentIndex;var n=this.nodes[t];T.forEach(n.links,function(t){var i=t.getComplement(n).index;-1===e[i]&&this._collectConnectedNodes(e,i)},this)},calcBounds:function(){var e,t,n,i;if(this.isEmpty())return this.bounds=new o;for(e=null,t=0,n=this.nodes.length;n>t;t++)i=this.nodes[t],e=e?e.union(i.bounds()):i.bounds();return this.bounds=e},getSpanningTree:function(e){var t,n,i,r,o,a,s,l,c,u,d,h=new y,p=new f;for(h.root=e.clone(),h.root.level=0,h.root.id=e.id,p.add(e,h.root),e.level=0,i=[],r=[],h.nodes.push(h.root),i.push(e),r.push(e),o=1;r.length>0;)for(a=r.pop(),s=0;a.links.length>s;s++)l=a.links[s].getComplement(a),A(i,l)||(l.level=a.level+1,l.level+1>o&&(o=l.level+1),A(r,l)||r.push(l),A(i,l)||i.push(l),p.containsKey(a)?t=p.get(a):((t=a.clone()).level=a.level,t.id=a.id,p.add(a,t)),p.containsKey(l)?n=p.get(l):((n=l.clone()).level=l.level,n.id=l.id,p.add(l,n)),c=new _(t,n),h.addLink(c));for(u=[],d=0;o>d;d++)u.push([]);return T.forEach(h.nodes,function(e){u[e.level].push(e)}),h.treeLevels=u,h.cacheRelationships(),h},takeRandomNode:function(t,n){if(T.isUndefined(t)&&(t=[]),T.isUndefined(n)&&(n=4),0===this.nodes.length)return null;if(1===this.nodes.length)return A(t,this.nodes[0])?null:this.nodes[0];var i=e.grep(this.nodes,function(e){return!A(t,e)&&e.degree()<=n});return T.isEmpty(i)?null:i[T.randomInteger(0,i.length)]},isEmpty:function(){return T.isEmpty(this.nodes)},isHealthy:function(){return T.all(this.links,function(e){return A(this.nodes,e.source)&&A(this.nodes,e.target)},this)},getParents:function(e){if(!this.hasNode(e))throw"The given node is not part of this graph.";return e.getParents()},getChildren:function(e){if(!this.hasNode(e))throw"The given node is not part of this graph.";return e.getChildren()},addLink:function(e,n,i){var r,o,a;if(T.isUndefined(e))throw"The source of the link is not defined.";if(T.isUndefined(n)){if(T.isDefined(e.type)&&"Link"===e.type)return this.addExistingLink(e),t;throw"The target of the link is not defined."}return r=this.getNode(e),T.isUndefined(r)&&(r=this.addNode(e)),o=this.getNode(n),T.isUndefined(o)&&(o=this.addNode(n)),a=new _(r,o),T.isDefined(i)&&(a.owner=i),this.links.push(a),a},removeAllLinks:function(){for(;this.links.length>0;){var e=this.links[0];this.removeLink(e)}},addExistingLink:function(e){var t,n;this.hasLink(e)||(this.links.push(e),this.hasNode(e.source.id)?(t=this.getNode(e.source.id),e.changeSource(t)):this.addNode(e.source),this.hasNode(e.target.id)?(n=this.getNode(e.target.id),e.changeTarget(n)):this.addNode(e.target))},hasLink:function(e){if(T.isString(e))return T.any(this.links,function(t){return t.id===e});if("Link"===e.type)return A(this.links,e);throw"The given object is neither an identifier nor a Link."},getNode:function(e){if(T.isUndefined(e))throw"No identifier or Node specified.";return T.isString(e)?T.find(this.nodes,function(t){return t.id==e}):this.hasNode(e)?e:null},hasNode:function(e){if(T.isString(e))return T.any(this.nodes,function(t){return t.id===e});if(T.isObject(e))return T.any(this.nodes,function(t){return t===e});throw"The identifier should be a Node or the Id (string) of a node."},removeNode:function(e){var t,n,i,r,o=e;if(T.isString(e)&&(o=this.getNode(e)),!T.isDefined(o))throw"The identifier should be a Node or the Id (string) of a node.";for(t=o.links,o.links=[],n=0,i=t.length;i>n;n++)r=t[n],this.removeLink(r);T.remove(this.nodes,o)},areConnected:function(e,t){return T.any(this.links,function(n){return n.source==e&&n.target==t||n.source==t&&n.target==e})},removeLink:function(e){T.remove(this.links,e),T.remove(e.source.outgoing,e),T.remove(e.source.links,e),T.remove(e.target.incoming,e),T.remove(e.target.links,e)},addNode:function(e,t,n){var i=null;if(!T.isDefined(e))throw"No Node or identifier for a new Node is given.";if(T.isString(e)){if(this.hasNode(e))return this.getNode(e);i=new v(e)}else{if(this.hasNode(e))return this.getNode(e);i=e}return T.isDefined(t)&&i.bounds(t),T.isDefined(n)&&(i.owner=n),this.nodes.push(i),i},addNodeAndOutgoings:function(e){A(this.nodes,e)||this.nodes.push(e);var t=e.outgoing;e.outgoing=[],T.forEach(t,function(e){this.addExistingLink(e)},this)},setItemIndices:function(){var e;for(e=0;this.nodes.length>e;++e)this.nodes[e].index=e;for(e=0;this.links.length>e;++e)this.links[e].index=e},clone:function(e){var t,n=new y,i=T.isDefined(e)&&!0===e;return i&&(n.nodeMap=new f,n.linkMap=new f),t=new f,T.forEach(this.nodes,function(e){var r=e.clone();t.set(e,r),n.nodes.push(r),i&&n.nodeMap.set(r,e)}),T.forEach(this.links,function(e){if(t.containsKey(e.source)&&t.containsKey(e.target)){var r=n.addLink(t.get(e.source),t.get(e.target));i&&n.linkMap.set(r,e)}}),n},linearize:function(e){return y.Utils.linearize(this,e)},depthFirstTraversal:function(e,t){var n,i;if(T.isUndefined(e))throw"You need to supply a starting node.";if(T.isUndefined(t))throw"You need to supply an action.";if(!this.hasNode(e))throw"The given start-node is not part of this graph";n=this.getNode(e),i=[],this._dftIterator(n,t,i)},_dftIterator:function(e,t,n){var i,r,o,a;for(t(e),n.push(e),r=0,o=(i=e.getChildren()).length;o>r;r++)a=i[r],A(n,a)||this._dftIterator(a,t,n)},breadthFirstTraversal:function(e,t){var n,i,r,o,a,s,l,c;if(T.isUndefined(e))throw"You need to supply a starting node.";if(T.isUndefined(t))throw"You need to supply an action.";if(!this.hasNode(e))throw"The given start-node is not part of this graph";for(n=this.getNode(e),r=[],(i=new g).enqueue(n);i.length>0;)for(t(o=i.dequeue()),r.push(o),s=0,l=(a=o.getChildren()).length;l>s;s++)c=a[s],A(r,c)||A(i,c)||i.enqueue(c)},_stronglyConnectedComponents:function(e,t,n,i,r,o,a){var s,l,c,u,d;for(n.add(t,a),i.add(t,a),a++,o.push(t),c=0,u=(s=t.getChildren()).length;u>c;c++)l=s[c],n.containsKey(l)?A(o,l)&&i.add(t,Math.min(i.get(t),n.get(l))):(this._stronglyConnectedComponents(e,l,n,i,r,o,a),i.add(t,Math.min(i.get(t),i.get(l))));if(i.get(t)===n.get(t)){d=[];do{l=o.pop(),d.push(l)}while(l!==t);(!e||d.length>1)&&r.push(d)}},findCycles:function(e){var t,n,i,r,o,a,s;for(T.isUndefined(e)&&(e=!0),t=new f,n=new f,i=[],r=[],o=0,a=this.nodes.length;a>o;o++)s=this.nodes[o],t.containsKey(s)||this._stronglyConnectedComponents(e,s,t,n,i,r,0);return i},isAcyclic:function(){return T.isEmpty(this.findCycles())},isSubGraph:function(e){var t=e.linearize(),n=this.linearize();return T.all(t,function(e){return A(n,e)})},makeAcyclic:function(){var e,t,n,i,r,o,a,s,l,c,u,d,h,p,g,m,v,_,y,b,w,k,x,C,S,D,A,M,E,I;if(this.isEmpty()||1>=this.nodes.length||1>=this.links.length)return[];if(2==this.nodes.length){if(e=[],this.links.length>1)for(t=this.links[0].source,n=0,i=this.links.length;i>n;n++)(r=this.links[n]).source!=t&&(o=r.reverse(),e.push(o));return e}for(a=this.clone(!0),s=this.nodes.length,l=new f,c=function(e){return 0===e.outgoing.length?2-s:0===e.incoming.length?s-2:e.outgoing.length-e.incoming.length},u=function(e,t){var n=c(e);t.containsKey(n)||t.set(n,[]),t.get(n).push(e)},T.forEach(a.nodes,function(e){u(e,l)}),d=[],h=[];a.nodes.length>0;){if(l.containsKey(2-s))for(v=l.get(2-s);v.length>0;){for(g=v.pop(),_=0;g.links.length>_;_++)p=(y=g.links[_]).getComplement(g),m=c(p),T.remove(l.get(m),p),p.removeLink(y),u(p,l);T.remove(a.nodes,g),h.unshift(g)}if(l.containsKey(s-2))for(b=l.get(s-2);b.length>0;){for(p=b.pop(),w=0;p.links.length>w;w++)g=(k=p.links[w]).getComplement(p),m=c(g),T.remove(l.get(m),g),g.removeLink(k),u(g,l);d.push(p),T.remove(a.nodes,p)}if(a.nodes.length>0)for(x=s-3;x>2-s;x--)if(l.containsKey(x)&&l.get(x).length>0){for(C=l.get(x).pop(),S=0;C.links.length>S;S++)A=(D=C.links[S]).getComplement(C),m=c(A),T.remove(l.get(m),A),A.removeLink(D),u(A,l);d.push(C),T.remove(a.nodes,C);break}}for(d=d.concat(h),M=new f,E=0;this.nodes.length>E;E++)M.set(a.nodeMap.get(d[E]),E);return I=[],T.forEach(this.links,function(e){M.get(e.source)>M.get(e.target)&&(e.reverse(),I.push(e))}),I}})).Predefined={EightGraph:function(){return y.Utils.parse(["1->2","2->3","3->4","4->1","3->5","5->6","6->7","7->3"])},Mindmap:function(){return y.Utils.parse(["0->1","0->2","0->3","0->4","0->5","1->6","1->7","7->8","2->9","9->10","9->11","3->12","12->13","13->14","4->15","4->16","15->17","15->18","18->19","18->20","14->21","14->22","5->23","23->24","23->25","6->26"])},ThreeGraph:function(){return y.Utils.parse(["1->2","2->3","3->1"])},BinaryTree:function(e){return T.isUndefined(e)&&(e=5),y.Utils.createBalancedTree(e,2)},Linear:function(e){return T.isUndefined(e)&&(e=10),y.Utils.createBalancedTree(e,1)},Tree:function(e,t){return y.Utils.createBalancedTree(e,t)},Forest:function(e,t,n){return y.Utils.createBalancedForest(e,t,n)},Workflow:function(){return y.Utils.parse(["0->1","1->2","2->3","1->4","4->3","3->5","5->6","6->3","6->7","5->4"])},Grid:function(e,t){var n,i,r,o,a,s=new w.Graph;if(0>=e&&0>=t)return s;for(n=0;e+1>n;n++)for(i=null,r=0;t+1>r;r++)o=new v(n+"."+r),s.addNode(o),i&&s.addLink(i,o),n>0&&(a=s.getNode(n-1+"."+r),s.addLink(a,o)),i=o;return s}},y.Utils={parse:function(e){var t,n,i,r,o,a=new w.Graph,s=e.slice();for(n=0,i=s.length;i>n;n++){if(r=s[n],T.isString(r)){if(r.indexOf("->")<0)throw"The link should be specified as 'a->b'.";if(2!=(o=r.split("->")).length)throw"The link should be specified as 'a->b'.";t=new _(o[0],o[1]),a.addLink(t)}if(T.isObject(r)){if(!t)throw"Specification found before Link definition.";b.deepExtend(t,r)}}return a},linearize:function(e,t){var n,i,r,o;if(T.isUndefined(e))throw"Expected an instance of a Graph object in slot one.";for(T.isUndefined(t)&&(t=!1),n=[],i=0,r=e.links.length;r>i;i++)o=e.links[i],n.push(o.source.id+"->"+o.target.id),t&&n.push({id:o.id});return n},_addShape:function(e,t,n,r){return T.isUndefined(t)&&(t=new w.Point(0,0)),T.isUndefined(n)&&(n=i()),r=b.deepExtend({width:20,height:20,id:n,radius:10,fill:"#778899",data:"circle",undoable:!1,x:t.x,y:t.y},r),e.addShape(r)},_addConnection:function(e,t,n,i){return e.connect(t,n,i)},createDiagramFromGraph:function(e,t,n,i){var r,a,s,l,c,u,d,h,p,f,g,m,v,_,y;if(T.isUndefined(e))throw"The diagram surface is undefined.";if(T.isUndefined(t))throw"No graph specification defined.";for(T.isUndefined(n)&&(n=!0),T.isUndefined(i)&&(i=!1),r=e.element.clientWidth||200,a=e.element.clientHeight||200,s=[],u=0,d=t.nodes.length;d>u;u++)h=(l=t.nodes[u]).position,T.isUndefined(h)&&(h=T.isDefined(l.x)&&T.isDefined(l.y)?new S(l.x,l.y):new S(T.randomInteger(10,r-20),T.randomInteger(10,a-20))),p={},"0"===l.id||i&&b.deepExtend(p,{width:150*Math.random()+20,height:80*Math.random()+50,data:"rectangle",fill:{color:"#778899"}}),f=(c=this._addShape(e,h,l.id,p)).bounds(),T.isDefined(f)&&(l.x=f.x,l.y=f.y,l.width=f.width,l.height=f.height),s[l.id]=c;for(g=0;t.links.length>g;g++)v=s[(m=t.links[g]).source.id],T.isUndefined(v)||(_=s[m.target.id],T.isUndefined(_)||this._addConnection(e,v,_,{id:m.id}));if(n)for(new e.SpringLayout(e).layoutGraph(t,{limitToView:!1}),y=0;t.nodes.length>y;y++)(c=s[(l=t.nodes[y]).id]).bounds(new o(l.x,l.y,l.width,l.height))},createBalancedTree:function(e,t){var n,i,r,o,a,s,l,c,u,d;if(T.isUndefined(e)&&(e=3),T.isUndefined(t)&&(t=3),n=new w.Graph,i=-1,r=[],0>=e||0>=t)return n;for(a=new v(""+ ++i),n.addNode(a),n.root=a,r.push(a),s=0;e>s;s++){for(o=[],l=0;r.length>l;l++)for(c=r[l],u=0;t>u;u++)d=new v(""+ ++i),n.addLink(c,d),o.push(d);r=o}return n},createBalancedForest:function(e,t,n){var i,r,o,a,s,l,c,u,d,h,p;if(T.isUndefined(e)&&(e=3),T.isUndefined(t)&&(t=3),T.isUndefined(n)&&(n=5),i=new w.Graph,r=-1,o=[],0>=e||0>=t||0>=n)return i;for(s=0;n>s;s++)for(l=new v(""+ ++r),i.addNode(l),o=[l],c=0;e>c;c++){for(a=[],u=0;o.length>u;u++)for(d=o[u],h=0;t>h;h++)p=new v(""+ ++r),i.addLink(d,p),a.push(p);o=a}return i},createRandomConnectedGraph:function(e,t,n){var i,r,o,a,s,l,c,u,d,h;if(T.isUndefined(e)&&(e=40),T.isUndefined(t)&&(t=4),T.isUndefined(n)&&(n=!1),i=new w.Graph,r=-1,0>=e)return i;if(o=new v(""+ ++r),i.addNode(o),1===e)return i;if(e>1){for(a=1;e>a&&(s=i.takeRandomNode([],t));a++)l=i.addNode(""+a),i.addLink(s,l);if(!n&&e>1)for(c=T.randomInteger(1,e),u=0;c>u;u++)d=i.takeRandomNode([],t),h=i.takeRandomNode([],t),d&&h&&!i.areConnected(d,h)&&i.addLink(d,h);return i}},randomDiagram:function(e,t,n,i,r){var o=b.dataviz.diagram.Graph.Utils.createRandomConnectedGraph(t,n,i);y.Utils.createDiagramFromGraph(e,o,!1,r)}},b.deepExtend(w,{init:function(e){b.init(e,w.ui)},Point:S,Intersect:s,Geometry:h,Rect:o,Size:a,RectAlign:l,Matrix:u,MatrixVector:d,normalVariable:function(e,t){var n,i,r;do{r=(n=2*Math.random()-1)*n+(i=2*Math.random()-1)*i}while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)},randomId:i,Dictionary:f,HashTable:p,Queue:g,Set:m,Node:v,Link:_,Graph:y,PathDefiner:r})}(window.kendo.jQuery),function(e,t){function n(e){return{x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}function i(e){if(e){var t=e;return B(t)&&(t={color:t}),t.color&&(t.color=r(t.color)),t}}function r(e){return e!=U?new N.Color(e).toHex():e}function o(e,t){var n,i,r,o=this.options,a=!1;for(r=0;t.length>r;r++)n=e[i=t[r]],F(n)&&o[i]!==n&&(o[i]=n,a=!0);return a}function a(e,t){return new N.Segment(new H.Point(e,t))}var s,l,c,u,d,h,p,f,g,m,v,_,y,b,w,k,x,C,T,S,D=window.kendo,A=D.dataviz.diagram,M=D.Class,E=D.deepExtend,I=A.Point,R=A.Rect,P=A.Matrix,L=A.Utils,F=L.isNumber,B=L.isString,z=A.MatrixVector,H=D.geometry,N=D.drawing,O=D.util.defined,V=e.inArray,U="transparent",W={none:"none",arrowStart:"ArrowStart",filledCircle:"FilledCircle",arrowEnd:"ArrowEnd"},j="start",q="end",G="width",$="height";A.Markers=W,s=M.extend({init:function(e,t){this.x=e,this.y=t},toMatrix:function(){return P.scaling(this.x,this.y)},toString:function(){return D.format("scale({0},{1})",this.x,this.y)},invert:function(){return new s(1/this.x,1/this.y)}}),l=M.extend({init:function(e,t){this.x=e,this.y=t},toMatrixVector:function(){return new z(0,0,0,0,this.x,this.y)},toMatrix:function(){return P.translation(this.x,this.y)},toString:function(){return D.format("translate({0},{1})",this.x,this.y)},plus:function(e){this.x+=e.x,this.y+=e.y},times:function(e){this.x*=e,this.y*=e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){0!==this.Length&&this.times(1/this.length())},invert:function(){return new l(-this.x,-this.y)}}),(c=M.extend({init:function(e,t,n){this.x=t||0,this.y=n||0,this.angle=e},toString:function(){return this.x&&this.y?D.format("rotate({0},{1},{2})",this.angle,this.x,this.y):D.format("rotate({0})",this.angle)},toMatrix:function(){return P.rotation(this.angle,this.x,this.y)},center:function(){return new I(this.x,this.y)},invert:function(){return new c(360-this.angle,this.x,this.y)}})).create=function(e){return new c(e.angle,e.x,e.y)},c.parse=function(e){var t=e.slice(1,e.length-1).split(","),n=t[0],i=t[1],r=t[2];return new c(n,i,r)},u=M.extend({init:function(e,n,i,r,o,a){this.translate=new l(e,n),i!==t&&r!==t&&(this.scale=new s(i,r)),o!==t&&(this.rotate=a?new c(o,a.x,a.y):new c(o))},toString:function(){var e=function(e){return e?""+e:""};return e(this.translate)+e(this.rotate)+e(this.scale)},render:function(e){e._transform=this,e._renderTransform()},toMatrix:function(){var e=P.unit();return this.translate&&(e=e.times(this.translate.toMatrix())),this.rotate&&(e=e.times(this.rotate.toMatrix())),this.scale&&(e=e.times(this.scale.toMatrix())),e},invert:function(){var e,n,i=this.rotate?this.rotate.invert():t,r=i?i.toMatrix():P.unit(),o=this.scale?this.scale.invert():t,a=o?o.toMatrix():P.unit(),s=new I(-this.translate.x,-this.translate.y);return s=r.times(a).apply(s),e=new l(s.x,s.y),(n=new u).translate=e,n.rotate=i,n.scale=o,n}}),d={_setScale:function(){var e=this.options,t=this._originWidth,n=this._originHeight,i=e.width/t,r=e.height/n;F(i)||(i=1),F(r)||(r=1),this._transform.scale=new s(i,r)},_setTranslate:function(){var e=this.options,t=e.x||0,n=e.y||0;this._transform.translate=new l(t,n)},_initSize:function(){var e=this.options,t=!1;!1!==e.autoSize&&(O(e.width)||O(e.height))&&(this._measure(!0),this._setScale(),t=!0),(O(e.x)||O(e.y))&&(this._setTranslate(),t=!0),t&&this._renderTransform()},_updateSize:function(e){var t=!1;return!1!==this.options.autoSize&&this._diffNumericOptions(e,[G,$])&&(t=!0,this._measure(!0),this._setScale()),this._diffNumericOptions(e,["x","y"])&&(t=!0,this._setTranslate()),t&&this._renderTransform(),t}},h=M.extend({init:function(e){var t=this;t.options=E({},t.options,e),t.id=t.options.id,t._originSize=R.empty(),t._transform=new u},visible:function(e){return this.drawingContainer().visible(e)},redraw:function(e){e&&e.id&&(this.id=e.id)},position:function(e,n){var i=this.options;return O(e)?(O(n)?(i.x=e,i.y=n):e instanceof I&&(i.x=e.x,i.y=e.y),this._transform.translate=new l(i.x,i.y),this._renderTransform(),t):new I(i.x,i.y)},rotate:function(e,t){return O(e)&&(this._transform.rotate=new c(e,t.x,t.y),this._renderTransform()),this._transform.rotate||new c(0)},drawingContainer:function(){return this.drawingElement},_renderTransform:function(){var e=this._transform.toMatrix();this.drawingContainer().transform(new H.Matrix(e.a,e.b,e.c,e.d,e.e,e.f))},_hover:function(){},_diffNumericOptions:o,_measure:function(e){var t,n,i;return!this._measured||e?(i=(n=this._boundingBox()||new H.Rect).topLeft(),t=new R(i.x,i.y,n.width(),n.height()),this._originSize=t,this._originWidth=t.width,this._originHeight=t.height,this._measured=!0):t=this._originSize,t},_boundingBox:function(){return this.drawingElement.rawBBox()}}),f=(p=h.extend({init:function(e){h.fn.init.call(this,e),(e=this.options).fill=i(e.fill),e.stroke=i(e.stroke)},options:{stroke:{color:"gray",width:1},fill:{color:U}},fill:function(e,t){this._fill({color:r(e),opacity:t})},stroke:function(e,t,n){this._stroke({color:r(e),width:t,opacity:n})},redraw:function(e){var t,n;e&&(t=e.stroke,n=e.fill,t&&this._stroke(i(t)),n&&this._fill(i(n)),h.fn.redraw.call(this,e))},_hover:function(e){var t,n=this.drawingElement,r=this.options,o=r.hover;o&&o.fill&&(t=e?i(o.fill):r.fill,n.fill(t.color,t.opacity))},_stroke:function(e){var t,n=this.options;E(n,{stroke:e}),t=null,(e=n.stroke).width>0&&(t={color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}),this.drawingElement.options.set("stroke",t)},_fill:function(e){var t,n,i,r=this.options;E(r,{fill:e||{}}),(t=r.fill).gradient?(i="radial"===(n=t.gradient).type?N.RadialGradient:N.LinearGradient,this.drawingElement.fill(new i(n))):this.drawingElement.fill(t.color,t.opacity)}})).extend({init:function(e){this._textColor(e),p.fn.init.call(this,e),this._font(),this._initText(),this._initSize()},options:{fontSize:15,fontFamily:"sans-serif",stroke:{width:0},fill:{color:"black"},autoSize:!0},_initText:function(){var e=this.options;this.drawingElement=new N.Text(O(e.text)?e.text:"",new H.Point,{font:e.font}),this._fill(),this._stroke()},_textColor:function(e){e&&e.color&&E(e,{fill:{color:e.color}})},_font:function(){var e=this.options;e.fontFamily&&O(e.fontSize)?e.font=e.fontSize+"px "+e.fontFamily:delete e.font},content:function(e){return this.drawingElement.content(e)},redraw:function(e){var t,n;e&&(t=!1,n=this.options,this._textColor(e),p.fn.redraw.call(this,e),(e.fontFamily||O(e.fontSize))&&(E(n,{fontFamily:e.fontFamily,fontSize:e.fontSize}),this._font(),this.drawingElement.options.set("font",n.font),t=!0),e.text&&(this.content(e.text),t=!0),!this._updateSize(e)&&t&&this._initSize())}}),E(f.fn,d),g=p.extend({init:function(e){p.fn.init.call(this,e),this._initPath(),this._setPosition()},_setPosition:function(){var e=this.options,t=e.x,n=e.y;(O(t)||O(n))&&this.position(t||0,n||0)},redraw:function(e){e&&(p.fn.redraw.call(this,e),this._diffNumericOptions(e,[G,$])&&this._drawPath(),this._diffNumericOptions(e,["x","y"])&&this._setPosition())},_initPath:function(){var e=this.options;this.drawingElement=new N.Path({stroke:e.stroke,closed:!0}),this._fill(),this._drawPath()},_drawPath:function(){var e=this.drawingElement,t=n(this.options),i=t.width,r=t.height;e.segments.elements([a(0,0),a(i,0),a(i,r),a(0,r)])}}),m=p.extend({init:function(e){p.fn.init.call(this,e);var t=this.options.anchor;this.anchor=new H.Point(t.x,t.y),this.createElement()},options:{stroke:{color:U,width:0},fill:{color:"black"}},_transformToPath:function(e,t){var n=t.transform();return e&&n&&(e=e.transformCopy(n)),e},redraw:function(e){e&&(e.position&&(this.options.position=e.position),p.fn.redraw.call(this,e))}}),v=m.extend({options:{radius:4,anchor:{x:0,y:0}},createElement:function(){var e=this.options;this.drawingElement=new N.Circle(new H.Circle(this.anchor,e.radius),{fill:e.fill,stroke:e.stroke})},positionMarker:function(e){var t,n,i=this.options.position,r=e.segments;(t=i==j?r[0]:r[r.length-1])&&(n=this._transformToPath(t.anchor(),e),this.drawingElement.transform(H.transform().translate(n.x,n.y)))}}),_=m.extend({options:{path:"M 0 0 L 10 5 L 0 10 L 3 5 z",anchor:{x:10,y:5}},createElement:function(){var e=this.options;this.drawingElement=N.Path.parse(e.path,{fill:e.fill,stroke:e.stroke})},positionMarker:function(e){var t,n,i=this._linePoints(e),r=i.start,o=i.end,a=H.transform();r&&a.rotate(function(e,t){var n=t.x-e.x,i=t.y-e.y;return D.util.deg(Math.atan2(i,n))}(r,o),o),o&&(t=this.anchor,n=o.clone().translate(-t.x,-t.y),a.translate(n.x,n.y)),this.drawingElement.transform(a)},_linePoints:function(e){var n,i,r,o,a,s=this.options,l=e.segments;return s.position==j?(r=l[0])&&(i=r.anchor(),n=r.controlOut(),o=l[1],!n&&o&&(n=o.anchor())):(r=l[l.length-1])&&(i=r.anchor(),n=r.controlIn(),a=l[l.length-2],!n&&a&&(n=a.anchor())),i?{start:this._transformToPath(n,e),end:this._transformToPath(i,e)}:t}}),y={_getPath:function(e){var n=this.drawingElement;return n instanceof N.MultiPath&&(n=e==j?n.paths[0]:n.paths[n.paths.length-1]),n&&n.segments.length?n:t},_normalizeMarkerOptions:function(e){var t=e.startCap,n=e.endCap;B(t)&&(e.startCap={type:t}),B(n)&&(e.endCap={type:n})},_removeMarker:function(e){var t=this._markers[e];t&&(this.drawingContainer().remove(t.drawingElement),delete this._markers[e])},_createMarkers:function(){var e=this.options;this._normalizeMarkerOptions(e),this._markers={},this._markers[j]=this._createMarker(e.startCap,j),this._markers[q]=this._createMarker(e.endCap,q)},_createMarker:function(e,n){var i,r,o=(e||{}).type,a=this._getPath(n);return a?(o==W.filledCircle?i=v:o==W.arrowStart||o==W.arrowEnd?i=_:this._removeMarker(n),i?((r=new i(E({},e,{position:n}))).positionMarker(a),this.drawingContainer().append(r.drawingElement),r):t):(this._removeMarker(n),t)},_positionMarker:function(e){var t,n=this._markers[e];n&&((t=this._getPath(e))?n.positionMarker(t):this._removeMarker(e))},_capMap:{start:"startCap",end:"endCap"},_redrawMarker:function(e,t,n){var i,r,o,a,s;return this._normalizeMarkerOptions(n),o=((i=this.options)[r=this._capMap[t]]||{}).type,s=!1,(a=n[r])?(i[r]=E({},i[r],a),a.type&&o!=a.type?(this._removeMarker(t),this._markers[t]=this._createMarker(i[r],t),s=!0):this._markers[t]&&this._markers[t].redraw(a)):e&&!this._markers[t]&&i[r]&&(this._markers[t]=this._createMarker(i[r],t),s=!0),s},_redrawMarkers:function(e,t){!this._redrawMarker(e,j,t)&&e&&this._positionMarker(j),!this._redrawMarker(e,q,t)&&e&&this._positionMarker(q)}},b=p.extend({init:function(e){p.fn.init.call(this,e),this.container=new N.Group,this._createElements(),this._initSize()},options:{autoSize:!0},drawingContainer:function(){return this.container},data:function(e){var n=this.options;return e?(n.data!=e&&(n.data=e,this._setData(e),this._initSize(),this._redrawMarkers(!0,{})),t):n.data},redraw:function(e){var t,n;e&&(p.fn.redraw.call(this,e),t=this.options,n=e.data,O(n)&&t.data!=n?(t.data=n,this._setData(n),this._updateSize(e)||this._initSize(),this._redrawMarkers(!0,e)):(this._updateSize(e),this._redrawMarkers(!1,e)))},_createElements:function(){var e=this.options;this.drawingElement=N.Path.parse(e.data||"",{stroke:e.stroke}),this._fill(),this.container.append(this.drawingElement),this._createMarkers()},_setData:function(e){var t=this.drawingElement,n=N.Path.parse(e||""),i=n.paths.slice(0);n.paths.elements([]),t.paths.elements(i)}}),E(b.fn,d),E(b.fn,y),w=p.extend({init:function(e){p.fn.init.call(this,e),this.container=new N.Group,this._initPath(),this._createMarkers()},drawingContainer:function(){return this.container},redraw:function(e){var t,n;e&&(t=(e=e||{}).from,n=e.to,t&&(this.options.from=t),n&&(this.options.to=n),t||n?(this._drawPath(),this._redrawMarkers(!0,e)):this._redrawMarkers(!1,e),p.fn.redraw.call(this,e))},_initPath:function(){var e=this.options,t=this.drawingElement=new N.Path({stroke:e.stroke});this._fill(),this._drawPath(),this.container.append(t)},_drawPath:function(){var e=this.options,t=this.drawingElement,n=e.from||new I,i=e.to||new I;t.segments.elements([a(n.x,n.y),a(i.x,i.y)])}}),E(w.fn,y),k=p.extend({init:function(e){p.fn.init.call(this,e),this.container=new N.Group,this._initPath(),this._createMarkers()},drawingContainer:function(){return this.container},points:function(e){var n=this.options;return e?(n.points=e,this._updatePath(),t):n.points},redraw:function(e){if(e){var t=e.points;p.fn.redraw.call(this,e),t&&this._pointsDiffer(t)?(this.points(t),this._redrawMarkers(!0,e)):this._redrawMarkers(!1,e)}},_initPath:function(){var e=this.options;this.drawingElement=new N.Path({stroke:e.stroke}),this._fill(),this.container.append(this.drawingElement),e.points&&this._updatePath()},_pointsDiffer:function(e){var t,n=this.options.points,i=n.length!==e.length;if(!i)for(t=0;e.length>t;t++)if(n[t].x!==e[t].x||n[t].y!==e[t].y){i=!0;break}return i},_updatePath:function(){var e,t,n=this.drawingElement,i=this.options.points,r=[];for(t=0;i.length>t;t++)e=i[t],r.push(a(e.x,e.y));n.segments.elements(r)},options:{points:[]}}),E(k.fn,y),x=h.extend({init:function(e){h.fn.init.call(this,e),this._initImage()},redraw:function(e){e&&(e.source&&this.drawingElement.src(e.source),this._diffNumericOptions(e,[G,$,"x","y"])&&this.drawingElement.rect(this._rect()),h.fn.redraw.call(this,e))},_initImage:function(){var e=this.options,t=this._rect();this.drawingElement=new N.Image(e.source,t,{})},_rect:function(){var e=n(this.options),t=new H.Point(e.x,e.y),i=new H.Size(e.width,e.height);return new H.Rect(t,i)}}),C=h.extend({init:function(e){this.children=[],h.fn.init.call(this,e),this.drawingElement=new N.Group,this._initSize()},options:{autoSize:!1},append:function(e){this.drawingElement.append(e.drawingContainer()),this.children.push(e),this._childrenChange=!0},remove:function(e){this._remove(e)&&(this._childrenChange=!0)},_remove:function(e){var n=V(e,this.children);return n>=0?(this.drawingElement.removeAt(n),this.children.splice(n,1),!0):t},clear:function(){this.drawingElement.clear(),this.children=[],this._childrenChange=!0},toFront:function(e){var t,n;for(n=0;e.length>n;n++)t=e[n],this._remove(t)&&this.append(t)},toBack:function(e){this._reorderChildren(e,0)},toIndex:function(e,t){this._reorderChildren(e,t)},_reorderChildren:function(e,t){var n,i,r,o,a,s=this.drawingElement,l=s.children.slice(0),c=this.children,u=F(t);for(n=0;e.length>n;n++)o=(a=e[n]).drawingContainer(),(i=V(a,c))>=0&&(l.splice(i,1),c.splice(i,1),r=u?t:t[n],l.splice(r,0,o),c.splice(r,0,a));s.clear(),s.append.apply(s,l)},redraw:function(e){e&&(this._childrenChange?(this._childrenChange=!1,this._updateSize(e)||this._initSize()):this._updateSize(e),h.fn.redraw.call(this,e))},_boundingBox:function(){var e,t,n,i,r=this.children;for(i=0;r.length>i;i++)(t=r[i]).visible()&&!1!==t._includeInBBox&&(n=t.drawingContainer().clippedBBox(null))&&(e=e?R.union(e,n):n);return e}}),E(C.fn,d),T=p.extend({init:function(e){p.fn.init.call(this,e),this._initCircle(),this._initSize()},redraw:function(e){if(e){var t=this.options;e.center&&(E(t,{center:e.center}),this._center.move(t.center.x,t.center.y)),this._diffNumericOptions(e,["radius"])&&this._circle.setRadius(t.radius),this._updateSize(e),p.fn.redraw.call(this,e)}},_initCircle:function(){var e,t=this.options,n=t.width,i=t.height,r=t.radius;O(r)||(O(n)||(n=i),O(i)||(i=n),t.radius=r=Math.min(n,i)/2),e=t.center||{x:r,y:r},this._center=new H.Point(e.x,e.y),this._circle=new H.Circle(this._center,r),this.drawingElement=new N.Circle(this._circle,{stroke:t.stroke}),this._fill()}}),E(T.fn,d),S=M.extend({init:function(e,t){t=t||{},this.element=e,this.surface=N.Surface.create(e,t),D.isFunction(this.surface.translate)&&(this.translate=this._translate),this.drawingElement=new N.Group,this._viewBox=new R(0,0,t.width,t.height),this.size(this._viewBox)},bounds:function(){var e=this.drawingElement.clippedBBox();return new R(0,0,e.width(),e.height())},size:function(e){var t=this._viewBox;return O(e)&&(t.width=e.width,t.height=e.height,this.surface.setSize(e)),{width:t.width,height:t.height}},_translate:function(e,t){var n=this._viewBox;return O(e)&&O(t)&&(n.x=e,n.y=t,this.surface.translate({x:e,y:t})),{x:n.x,y:n.y}},draw:function(){this.surface.draw(this.drawingElement)},append:function(e){return this.drawingElement.append(e.drawingContainer()),this},remove:function(e){this.drawingElement.remove(e.drawingContainer())},insertBefore:function(){},clear:function(){this.drawingElement.clear()},destroy:function(t){this.surface.destroy(),t&&e(this.element).remove()}}),D.deepExtend(A,{init:function(e){D.init(e,A.ui)},diffNumericOptions:o,Element:h,Scale:s,Translation:l,Rotation:c,Circle:T,Group:C,Rectangle:g,Canvas:S,Path:b,Line:w,MarkerBase:m,ArrowMarker:_,CircleMarker:v,Polyline:k,CompositeTransform:u,TextBlock:f,Image:x,VisualBase:p})}(window.kendo.jQuery),function(e,t){function n(e,t){e.isSelected?t.ctrlKey&&e.select(!1):e.diagram.select(e,{addToSelection:t.ctrlKey})}function i(e,t){var n=!1!==e;return e.key&&"none"!=e.key&&(n=t[e.key+"Key"]),n}function r(e,t){return t.charCodeAt(0)==e||t.toUpperCase().charCodeAt(0)==e}function o(e){var t=e.options.editable;return t&&!1!==t.drag}var a,s,l,c,u,d,h,p,f,g,m,v,_,y,b,w,k,x,C,T,S,D,A,M,E,I,R,P,L,F,B,z,H=window.kendo,N=H.dataviz.diagram,O=H.Class,V=N.Group,U=N.Rect,W=N.Rectangle,j=N.Utils,q=j.isUndefined,G=N.Point,$=N.Circle,Y=N.Ticker,Q=H.deepExtend,X=H.ui.Movable,K=H.support.browser,Z=H.util.defined,J=e.inArray,ee=e.proxy,te={arrow:"default",grip:"pointer",cross:"pointer",add:"pointer",move:"move",select:"pointer",south:"s-resize",east:"e-resize",west:"w-resize",north:"n-resize",rowresize:"row-resize",colresize:"col-resize"},ne=10,ie="Left",re="dragStart",oe="drag",ae="dragEnd",se="itemBoundsChange",le="transparent",ce="rotated";N.Cursors=te,a=H.Class.extend({init:function(e){this.layoutState=e,this.diagram=e.diagram},initState:function(){this.froms=[],this.tos=[],this.subjects=[],this.layoutState.nodeMap.forEach(function(e,t){var n=this.diagram.getShapeById(e);n&&(this.subjects.push(n),this.froms.push(n.bounds().topLeft()),this.tos.push(t.topLeft()))},this)},update:function(e){if(!(0>=this.subjects.length))for(var t=0;this.subjects.length>t;t++)this.subjects[t].position(new G(this.froms[t].x+(this.tos[t].x-this.froms[t].x)*e,this.froms[t].y+(this.tos[t].y-this.froms[t].y)*e))}}),s=O.extend({init:function(e,t,n){this.animate=!q(n)&&n,this._initialState=e,this._finalState=t,this.title="Diagram layout"},undo:function(){this.setState(this._initialState)},redo:function(){this.setState(this._finalState)},setState:function(e){var t,n=e.diagram;this.animate?(e.linkMap.forEach(function(e,t){var i=n.getShapeById(e);i.visible(!1),i&&i.points(t)}),(t=new Y).addAdapter(new a(e)),t.onComplete(function(){e.linkMap.forEach(function(e){n.getShapeById(e).visible(!0)})}),t.play()):(e.nodeMap.forEach(function(e,t){var i=n.getShapeById(e);i&&i.position(t.topLeft())}),e.linkMap.forEach(function(e,t){var i=n.getShapeById(e);i&&i.points(t)}))}}),l=O.extend({init:function(e){this.units=[],this.title="Composite unit",e!==t&&this.units.push(e)},add:function(e){this.units.push(e)},undo:function(){for(var e=0;this.units.length>e;e++)this.units[e].undo()},redo:function(){for(var e=0;this.units.length>e;e++)this.units[e].redo()}}),c=O.extend({init:function(e,t,n){this.item=e,this._redoSource=t,this._redoTarget=n,Z(t)&&(this._undoSource=e.source()),Z(n)&&(this._undoTarget=e.target()),this.title="Connection Editing"},undo:function(){this._undoSource!==t&&this.item._updateConnector(this._undoSource,"source"),this._undoTarget!==t&&this.item._updateConnector(this._undoTarget,"target"),this.item.updateModel()},redo:function(){this._redoSource!==t&&this.item._updateConnector(this._redoSource,"source"),this._redoTarget!==t&&this.item._updateConnector(this._redoTarget,"target"),this.item.updateModel()}}),u=O.extend({init:function(e,t,n){this.item=e,this._undoSource=t,this._undoTarget=n,this._redoSource=e.source(),this._redoTarget=e.target(),this.title="Connection Editing"},undo:function(){this.item._updateConnector(this._undoSource,"source"),this.item._updateConnector(this._undoTarget,"target"),this.item.updateModel()},redo:function(){this.item._updateConnector(this._redoSource,"source"),this.item._updateConnector(this._redoTarget,"target"),this.item.updateModel()}}),d=O.extend({init:function(e){this.connection=e,this.diagram=e.diagram,this.targetConnector=e.targetConnector,this.title="Delete connection"},undo:function(){this.diagram._addConnection(this.connection,!1)},redo:function(){this.diagram.remove(this.connection,!1)}}),h=O.extend({init:function(e){this.shape=e,this.diagram=e.diagram,this.title="Deletion"},undo:function(){this.diagram._addShape(this.shape,!1),this.shape.select(!1)},redo:function(){this.shape.select(!1),this.diagram.remove(this.shape,!1)}}),p=O.extend({init:function(e,t,n){var i,r;for(this.shapes=e,this.undoStates=t,this.title="Transformation",this.redoStates=[],this.adorner=n,i=0;this.shapes.length>i;i++)r=this.shapes[i],this.redoStates.push(r.bounds())},undo:function(){var e,t;for(e=0;this.shapes.length>e;e++)(t=this.shapes[e]).bounds(this.undoStates[e]),t.hasOwnProperty("layout")&&t.layout(t,this.redoStates[e],this.undoStates[e]),t.updateModel();this.adorner&&(this.adorner.refreshBounds(),this.adorner.refresh())},redo:function(){var e,t;for(e=0;this.shapes.length>e;e++)(t=this.shapes[e]).bounds(this.redoStates[e]),t.hasOwnProperty("layout")&&t.layout(t,this.undoStates[e],this.redoStates[e]),t.updateModel();this.adorner&&(this.adorner.refreshBounds(),this.adorner.refresh())}}),f=O.extend({init:function(e,t){this.connection=e,this.diagram=t,this.title="New connection"},undo:function(){this.diagram.remove(this.connection,!1)},redo:function(){this.diagram._addConnection(this.connection,!1)}}),g=O.extend({init:function(e,t){this.shape=e,this.diagram=t,this.title="New shape"},undo:function(){this.diagram.deselect(),this.diagram.remove(this.shape,!1)},redo:function(){this.diagram._addShape(this.shape,!1)}}),m=O.extend({init:function(e,t,n){this.initial=e,this.finalPos=t,this.diagram=n,this.title="Pan Unit"},undo:function(){this.diagram.pan(this.initial)},redo:function(){this.diagram.pan(this.finalPos)}}),v=O.extend({init:function(e,t,n){var i,r;for(this.shapes=t,this.undoRotates=n,this.title="Rotation",this.redoRotates=[],this.redoAngle=e._angle,this.adorner=e,this.center=e._innerBounds.center(),i=0;this.shapes.length>i;i++)r=this.shapes[i],this.redoRotates.push(r.rotate().angle)},undo:function(){var e,t;for(e=0;this.shapes.length>e;e++)(t=this.shapes[e]).rotate(this.undoRotates[e],this.center,!1),t.hasOwnProperty("layout")&&t.layout(t),t.updateModel();this.adorner&&(this.adorner._initialize(),this.adorner.refresh())},redo:function(){var e,t;for(e=0;this.shapes.length>e;e++)(t=this.shapes[e]).rotate(this.redoRotates[e],this.center,!1),t.hasOwnProperty("layout")&&t.layout(t),t.updateModel();this.adorner&&(this.adorner._initialize(),this.adorner.refresh())}}),_=O.extend({init:function(e,t,n){this.diagram=e,this.indices=n,this.items=t,this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toFront(this.items,!1)}}),y=O.extend({init:function(e,t,n){this.diagram=e,this.indices=n,this.items=t,this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toBack(this.items,!1)}}),b=H.Observable.extend({init:function(e){H.Observable.fn.init.call(this,e),this.bind(this.events,e),this.stack=[],this.index=0,this.capacity=100},events:["undone","redone"],begin:function(){this.composite=new l},cancel:function(){this.composite=t},commit:function(e){this.composite.units.length>0&&this._restart(this.composite,e),this.composite=t},addCompositeItem:function(e){this.composite?this.composite.add(e):this.add(e)},add:function(e,t){this._restart(e,t)},pop:function(){this.index>0&&(this.stack.pop(),this.index--)},count:function(){return this.stack.length},undo:function(){this.index>0&&(this.index--,this.stack[this.index].undo(),this.trigger("undone"))},redo:function(){this.stack.length>0&&this.stack.length>this.index&&(this.stack[this.index].redo(),this.index++,this.trigger("redone"))},_restart:function(e,t){this.stack.splice(this.index,this.stack.length-this.index),this.stack.push(e),!1!==t?this.redo():this.index++,this.stack.length>this.capacity&&(this.stack.splice(0,this.stack.length-this.capacity),this.index=this.capacity)},clear:function(){this.stack=[],this.index=0}}),w=O.extend({init:function(e){this.toolService=e},start:function(){},move:function(){},end:function(){},tryActivate:function(){return!1},getCursor:function(){return te.arrow}}),k=w.extend({init:function(t){var n,i,r,o,a=this,s=H.support.mobileOS?.93:.9;w.fn.init.call(a,t),i=(n=a.toolService.diagram).canvas,r=n.scroller=a.scroller=e(n.scrollable).kendoMobileScroller({friction:s,velocityMultiplier:5,mousewheelScrolling:!1,zoom:!1,scroll:ee(a._move,a)}).data("kendoMobileScroller"),i.translate&&(a.movableCanvas=new X(i.element)),(o=function(e,t,n){e.makeVirtual(),e.virtualSize(t||-2e4,n||2e4)})(r.dimensions.x),o(r.dimensions.y),r.disable()},tryActivate:function(e,t){var n=this.toolService,i=n.diagram.options.pannable,r=t.ctrlKey;return Z(i.key)&&(r=i.key&&"none"!=i.key?t[i.key+"Key"]&&!(t.ctrlKey&&Z(n.hoveredItem)):function(e){return!1===e.ctrlKey&&!1===e.altKey&&!1===e.shiftKey}(t)),!1!==i&&r&&!Z(n.hoveredAdorner)&&!Z(n._hoveredConnector)},start:function(){this.scroller.enable()},move:function(){},_move:function(e){var t=this.toolService.diagram,n=t.canvas,i=new G(e.scrollLeft,e.scrollTop);n.translate?(t._storePan(i.times(-1)),this.movableCanvas.moveTo(i),n.translate(i.x,i.y)):i=i.plus(t._pan.times(-1)),t.trigger("pan",{pan:i})},end:function(){this.scroller.disable()},getCursor:function(){return te.move}}),x=O.extend({init:function(e){this.toolService=e},tryActivate:function(){return!0},start:function(e,t){var r=this.toolService,o=r.diagram,a=r.hoveredItem,s=o.options.selectable;a&&(i(s,t)&&n(a,t),a.adorner&&(this.adorner=a.adorner,this.handle=this.adorner._hitTest(e))),this.handle||(this.handle=o._resizingAdorner._hitTest(e),this.handle&&(this.adorner=o._resizingAdorner)),this.adorner&&(this.adorner.isDragHandle(this.handle)&&o.trigger(re,{shapes:this.adorner.shapes,connections:[]})?(r.startPoint=e,r.end(e)):this.adorner.start(e))},move:function(e){this.adorner&&(this.adorner.move(this.handle,e),this.adorner.isDragHandle(this.handle)&&this.toolService.diagram.trigger(oe,{shapes:this.adorner.shapes,connections:[]}))},end:function(e,n){var i,r=this.toolService.diagram,o=this.toolService,a=this.adorner;a&&(a.isDragHandle(this.handle)&&r.trigger(ae,{shapes:a.shapes,connections:[]})?a.cancel():(i=a.stop())&&r.undoRedoService.add(i,!1)),o.hoveredItem&&this.toolService.triggerClick({item:o.hoveredItem,point:e,meta:n}),this.adorner=t,this.handle=t},getCursor:function(e){return this.toolService.hoveredItem?this.toolService.hoveredItem._getCursor(e):te.arrow}}),C=O.extend({init:function(e){this.toolService=e},tryActivate:function(e,t){var n=this.toolService;return i(n.diagram.options.selectable,t)&&!Z(n.hoveredItem)&&!Z(n.hoveredAdorner)},start:function(e){var t=this.toolService.diagram;t.deselect(),t.selector.start(e)},move:function(e){this.toolService.diagram.selector.move(e)},end:function(e,t){var n=this.toolService.diagram,i=this.toolService.hoveredItem,r=n.selector.bounds();i&&i.isSelected||t.ctrlKey||n.deselect(),r.isEmpty()||n.selectArea(r),n.selector.end()},getCursor:function(){return te.arrow}}),T=O.extend({init:function(e){this.toolService=e,this.type="ConnectionTool"},tryActivate:function(){return this.toolService._hoveredConnector},start:function(e,t){var i=this.toolService.diagram,r=this.toolService._hoveredConnector,a=i._createConnection({},r._c,e);o(a)&&!i.trigger(re,{shapes:[],connections:[a]})&&i._addConnection(a)?(this.toolService._connectionManipulation(a,r._c.shape,!0),this.toolService._removeHover(),n(this.toolService.activeConnection,t)):(a.source(null),this.toolService.end(e))},move:function(e){var t=this.toolService,n=t.activeConnection;return n.target(e),t.diagram.trigger(oe,{shapes:[],connections:[n]}),!0},end:function(e){var t,n=this.toolService,i=n.diagram,r=n.activeConnection,o=n.hoveredItem,a=n._hoveredConnector;r&&(t=a&&a._c!=r.sourceConnector?a._c:o&&o instanceof N.Shape?o.getConnector("Auto")||o.getConnector(e):e,r.target(t),i.trigger(ae,{shapes:[],connections:[r]})?(i.remove(r,!1),i.undoRedoService.pop()):(r.updateModel(),i._syncConnectionChanges()),n._connectionManipulation())},getCursor:function(){return te.arrow}}),S=O.extend({init:function(e){this.toolService=e,this.type="ConnectionTool"},tryActivate:function(e,t){var n=this.toolService,r=n.diagram.options.selectable,o=n.hoveredItem,a=i(r,t)&&o&&o.path&&!(o.isSelected&&t.ctrlKey);return a&&(this._c=o),a},start:function(e,t){var i,r=this._c;n(r,t),i=r.adorner,o(r)&&i&&!this.toolService.diagram.trigger(re,{shapes:[],connections:[r]})?(this.handle=i._hitTest(e),i.start(e)):(this.toolService.startPoint=e,this.toolService.end(e))},move:function(e){var n=this._c.adorner;return o(this._c)&&n?(n.move(this.handle,e),this.toolService.diagram.trigger(oe,{shapes:[],connections:[this._c]}),!0):t},end:function(e,t){var n,i=this._c,r=i.adorner,a=this.toolService,s=a.diagram;r&&(a.triggerClick({item:i,point:e,meta:t}),o(i)&&(n=r.stop(e),s.trigger(ae,{shapes:[],connections:[i]})?n.undo():(s.undoRedoService.add(n,!1),i.updateModel(),s._syncConnectionChanges())))},getCursor:function(){return te.move}}),D=O.extend({init:function(e){this.diagram=e,this.tools=[new k(this),new S(this),new T(this),new C(this),new x(this)],this.activeTool=t},start:function(e,t){return t=Q({},t),this.activeTool&&this.activeTool.end(e,t),this._updateHoveredItem(e),this._activateTool(e,t),this.activeTool.start(e,t),this._updateCursor(e),this.diagram.focus(),this.startPoint=e,!0},move:function(e,t){t=Q({},t);var n=!0;return this.activeTool&&(n=this.activeTool.move(e,t)),n&&this._updateHoveredItem(e),this._updateCursor(e),!0},end:function(e,n){return n=Q({},n),this.activeTool&&this.activeTool.end(e,n),this.activeTool=t,this._updateCursor(e),!0},keyDown:function(e,t){var n,i=this.diagram;if(!(t=Q({ctrlKey:!1,metaKey:!1,altKey:!1},t)).ctrlKey&&!t.metaKey||t.altKey){if(46===e||8===e)return(n=this.diagram._triggerRemove(i.select())).length&&(this.diagram.remove(n,!0),this.diagram._syncChanges(),this.diagram._destroyToolBar()),!0;if(27===e)return this._discardNewConnection(),i.deselect(),i._destroyToolBar(),!0}else{if(r(e,"a"))return i.selectAll(),i._destroyToolBar(),!0;if(r(e,"z"))return i.undo(),i._destroyToolBar(),!0;if(r(e,"y"))return i.redo(),i._destroyToolBar(),!0;r(e,"c")?(i.copy(),i._destroyToolBar()):r(e,"x")?(i.cut(),i._destroyToolBar()):r(e,"v")?(i.paste(),i._destroyToolBar()):r(e,"l")?(i.layout(),i._destroyToolBar()):r(e,"d")&&(i._destroyToolBar(),i.copy(),i.paste())}},wheel:function(e,t){var n=this.diagram,i=t.delta,r=n.zoom(),o=n.options,a=o.zoomRate,s={point:e,meta:t,zoom:r};if(!n.trigger("zoomStart",s))return 0>i?r+=a:r-=a,r=H.dataviz.round(Math.max(o.zoomMin,Math.min(o.zoomMax,r)),2),s.zoom=r,n.zoom(r,s),n.trigger("zoomEnd",s),!0},setTool:function(e,t){e.toolService=this,this.tools[t]=e},triggerClick:function(e){this.startPoint.equals(e.point)&&this.diagram.trigger("click",e)},_discardNewConnection:function(){this.newConnection&&(this.diagram.remove(this.newConnection),this.newConnection=t)},_activateTool:function(e,t){var n,i;for(n=0;this.tools.length>n;n++)if((i=this.tools[n]).tryActivate(e,t)){this.activeTool=i;break}},_updateCursor:function(e){var t=this.diagram.element,n=this.activeTool?this.activeTool.getCursor(e):this.hoveredAdorner?this.hoveredAdorner._getCursor(e):this.hoveredItem?this.hoveredItem._getCursor(e):te.arrow;t.css({cursor:n}),K.msie&&7==K.version&&(t[0].style.cssText=t[0].style.cssText)},_connectionManipulation:function(e,n,i){this.activeConnection=e,this.disabledShape=n,this.newConnection=i?this.activeConnection:t},_updateHoveredItem:function(e){var n=this._hitTest(e),i=this.diagram;n==this.hoveredItem||this.disabledShape&&n==this.disabledShape||(this.hoveredItem&&(i.trigger("mouseLeave",{item:this.hoveredItem}),this.hoveredItem._hover(!1)),n&&n.options.enable?(i.trigger("mouseEnter",{item:n}),this.hoveredItem=n,this.hoveredItem._hover(!0)):this.hoveredItem=t)},_removeHover:function(){this.hoveredItem&&(this.hoveredItem._hover(!1),this.hoveredItem=t)},_hitTest:function(e){var n,i,r,o,a=this.diagram;if(this._hoveredConnector&&(this._hoveredConnector._hover(!1),this._hoveredConnector=t),a._connectorsAdorner._visible&&(n=a._connectorsAdorner._hitTest(e)))return n;if(n=this.diagram._resizingAdorner._hitTest(e)){if(this.hoveredAdorner=a._resizingAdorner,0!==n.x||0!==n.y)return;n=t}else this.hoveredAdorner=t;if(!this.activeTool||"ConnectionTool"!==this.activeTool.type){for(o=[],r=0;a._selectedItems.length>r;r++)(i=a._selectedItems[r])instanceof N.Connection&&o.push(i);n=this._hitTestItems(o,e)}return n||this._hitTestElements(e)},_hitTestElements:function(e){var t,n,i=this.diagram,r=this._hitTestItems(i.shapes,e),o=this._hitTestItems(i.connections,e);return this.activeTool&&"ConnectionTool"==this.activeTool.type||!r||!o||function(e,t){var n,i,r,o;for(o=0;e.connectors.length>o;o++)if(i=(n=e.connectors[o]).position(),(r=new U(i.x,i.y)).inflate(ne,ne),r.contains(t))return n}(r,e)||(n=i.mainLayer,t=J(r.visual,n.children)>J(o.visual,n.children)?r:o),t||r||o},_hitTestItems:function(e,t){var n,i;for(n=e.length-1;n>=0;n--)if(i=e[n]._hitTest(t))return i}}),A=H.Class.extend({init:function(){}}),E=(M=A.extend({init:function(e){A.fn.init.call(this),this.connection=e},hitTest:function(e){return!!this.getBounds().inflate(ne).contains(e)&&N.Geometry.distanceToPolyline(e,this.connection.allPoints())<ne},getBounds:function(){var e,t=this.connection.allPoints(),n=t[0],i=t[t.length-1],r=Math.max(n.x,i.x),o=Math.min(n.x,i.x),a=Math.min(n.y,i.y),s=Math.max(n.y,i.y);for(e=1;t.length-1>e;++e)r=Math.max(r,t[e].x),o=Math.min(o,t[e].x),a=Math.min(a,t[e].y),s=Math.max(s,t[e].y);return new U(o,a,r-o,s-a)}})).extend({init:function(e){M.fn.init.call(this),this.connection=e},route:function(){}}),I=M.extend({SAME_SIDE_DISTANCE_RATIO:5,init:function(e){M.fn.init.call(this),this.connection=e},routePoints:function(e,t,n,i){return n&&i?this._connectorPoints(e,t,n,i):this._floatingPoints(e,t,n)},route:function(){var e=this.connection._resolvedSourceConnector,t=this.connection._resolvedTargetConnector,n=this.connection.sourcePoint(),i=this.connection.targetPoint(),r=this.routePoints(n,i,e,t);this.connection.points(r)},_connectorSides:[{name:"Top",axis:"y",boundsPoint:"topLeft",secondarySign:1},{name:"Left",axis:"x",boundsPoint:"topLeft",secondarySign:1},{name:"Bottom",axis:"y",boundsPoint:"bottomRight",secondarySign:-1},{name:"Right",axis:"x",boundsPoint:"bottomRight",secondarySign:-1}],_connectorSide:function(e,t){var n,i,r,o,a,s=e.position(),l=e.shape.bounds(ce),c={topLeft:l.topLeft(),bottomRight:l.bottomRight()},u=this._connectorSides,d=H.util.MAX_NUM;for(a=0;u.length>a;a++)r=(o=u[a]).axis,d>(n=Math.round(Math.abs(s[r]-c[o.boundsPoint][r])))?(d=n,i=o):n===d&&(s[r]-t[r])*o.secondarySign>(s[i.axis]-t[i.axis])*i.secondarySign&&(i=o);return i.name},_sameSideDistance:function(e){var t=e.shape.bounds(ce);return Math.min(t.width,t.height)/this.SAME_SIDE_DISTANCE_RATIO},_connectorPoints:function(e,t,n,i){var r,o,a=this._connectorSide(n,t),s=this._connectorSide(i,e),l=t.x-e.x,c=t.y-e.y,u=this._sameSideDistance(n),d=[];return"Top"===a||"Bottom"==a?"Top"==s||"Bottom"==s?a==s?(o="Top"==a?Math.min(e.y,t.y)-u:Math.max(e.y,t.y)+u,d=[new G(e.x,o),new G(t.x,o)]):d=[new G(e.x,e.y+c/2),new G(t.x,e.y+c/2)]:d=[new G(e.x,t.y)]:s==ie||"Right"==s?a==s?(r=a==ie?Math.min(e.x,t.x)-u:Math.max(e.x,t.x)+u,d=[new G(r,e.y),new G(r,t.y)]):d=[new G(e.x+l/2,e.y),new G(e.x+l/2,e.y+c)]:d=[new G(t.x,e.y)],d},_floatingPoints:function(e,t,n){var i,r,o,a=n?this._connectorSide(n,t):null,s=this._startHorizontal(e,t,a),l=[e,e,t,t],c=t.x-e.x,u=t.y-e.y,d=l.length;for(o=1;d-1>o;++o)s?o%2!=0?(i=c/(d/2),r=0):(i=0,r=u/((d-1)/2)):o%2!=0?(i=0,r=u/(d/2)):(i=c/((d-1)/2),r=0),l[o]=new G(l[o-1].x+i,l[o-1].y+r);return o--,l[d-2]=s&&o%2!=0||!s&&o%2==0?new G(l[d-1].x,l[d-2].y):new G(l[d-2].x,l[d-1].y),[l[1],l[2]]},_startHorizontal:function(e,t,n){return null!==n&&("Right"===n||n===ie)||Math.abs(e.x-t.x)>Math.abs(e.y-t.y)}}),P=(R=O.extend({init:function(e,t){var n=this;n.diagram=e,n.options=Q({},n.options,t),n.visual=new V,n.diagram._adorners.push(n)},refresh:function(){}})).extend({init:function(e,t){var n,i,r,o=this;o.connection=e,n=o.connection.diagram,o._ts=n.toolService,R.fn.init.call(o,n,t),i=o.connection.sourcePoint(),r=o.connection.targetPoint(),o.spVisual=new $(Q(o.options.handles,{center:i})),o.epVisual=new $(Q(o.options.handles,{center:r})),o.visual.append(o.spVisual),o.visual.append(o.epVisual)},options:{handles:{}},_getCursor:function(){return te.move},start:function(e){switch(this.handle=this._hitTest(e),this.startPoint=e,this._initialSource=this.connection.source(),this._initialTarget=this.connection.target(),this.handle){case-1:this.connection.targetConnector&&this._ts._connectionManipulation(this.connection,this.connection.targetConnector.shape);break;case 1:this.connection.sourceConnector&&this._ts._connectionManipulation(this.connection,this.connection.sourceConnector.shape)}},move:function(e,t){switch(e){case-1:this.connection.source(t);break;case 1:this.connection.target(t);break;default:var n=t.minus(this.startPoint);this.startPoint=t,this.connection.sourceConnector||this.connection.source(this.connection.sourcePoint().plus(n)),this.connection.targetConnector||this.connection.target(this.connection.targetPoint().plus(n))}return this.refresh(),!0},stop:function(e){var n,i=this.diagram.toolService,r=i.hoveredItem;return n=i._hoveredConnector?i._hoveredConnector._c:r&&r instanceof N.Shape?r.getConnector("Auto")||r.getConnector(e):e,-1===this.handle?this.connection.source(n):1===this.handle&&this.connection.target(n),this.handle=t,this._ts._connectionManipulation(),new u(this.connection,this._initialSource,this._initialTarget)},_hitTest:function(e){var t=this.connection.sourcePoint(),n=this.connection.targetPoint(),i=this.options.handles.width/2,r=this.options.handles.height/2,o=new U(t.x,t.y).inflate(i,r),a=new U(n.x,n.y).inflate(i,r);return o.contains(e)?-1:a.contains(e)?1:0},refresh:function(){this.spVisual.redraw({center:this.diagram.modelToLayer(this.connection.sourcePoint())}),this.epVisual.redraw({center:this.diagram.modelToLayer(this.connection.targetPoint())})}}),L=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),n._refreshHandler=function(e){e.item==n.shape&&n.refresh()}},show:function(e){var t,n,i,r=this;for(r._visible=!0,r.shape=e,r.diagram.bind(se,r._refreshHandler),t=e.connectors.length,r.connectors=[],r.visual.clear(),n=0;t>n;n++)i=new z(e.connectors[n]),r.connectors.push(i),r.visual.append(i.visual);r.visual.visible(!0),r.refresh()},destroy:function(){var e=this;e.diagram.unbind(se,e._refreshHandler),e.shape=t,e._visible=t,e.visual.visible(!1)},_hitTest:function(e){var t,n;for(n=0;this.connectors.length>n;n++)if((t=this.connectors[n])._hitTest(e)){t._hover(!0),this.diagram.toolService._hoveredConnector=t;break}},refresh:function(){if(this.shape){var t=this.shape.bounds();t=this.diagram.modelToLayer(t),this.visual.position(t.topLeft()),e.each(this.connectors,function(){this.refresh()})}}}),F=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),n._manipulating=!1,n.map=[],n.shapes=[],n._initSelection(),n._createHandles(),n.redraw(),n.diagram.bind("select",function(e){n._initialize(e.selected)}),n._refreshHandler=function(){n._internalChange||(n.refreshBounds(),n.refresh())},n._rotatedHandler=function(){1==n.shapes.length&&(n._angle=n.shapes[0].rotate().angle),n._refreshHandler()},n.diagram.bind(se,n._refreshHandler).bind("itemRotate",n._rotatedHandler),n.refreshBounds(),n.refresh()},options:{editable:{},selectable:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:le}},offset:10},_initSelection:function(){var e=this,t=e.diagram.options.selectable,n=Q({},e.options.selectable,t);e.rect=new W(n),e.visual.append(e.rect)},_createHandles:function(){var e,t,n,i,r=this.options.editable;if(r&&r.resize)for(e=r.resize.handles,i=-1;1>=i;i++)for(n=-1;1>=n;n++)(0!==i||0!==n)&&((t=new W(e)).drawingElement._hover=ee(this._hover,this),this.map.push({x:i,y:n,visual:t}),this.visual.append(t))},bounds:function(e){return e?(this._innerBounds=e.clone(),this._bounds=this.diagram.modelToLayer(e).inflate(this.options.offset,this.options.offset),t):this._bounds},_hitTest:function(e){var n,i,r,o,a=this.diagram.modelToLayer(e),s=this.options.editable,l=this.map.length;if(this._angle&&(a=a.clone().rotate(this._bounds.center(),this._angle)),s&&s.rotate&&this._rotationThumbBounds&&this._rotationThumbBounds.contains(a))return new G(-1,-2);if(s&&s.resize)for(n=0;l>n;n++)if(o=this.map[n],i=new G(o.x,o.y),(r=this._getHandleBounds(i)).offset(this._bounds.x,this._bounds.y),r.contains(a))return i;return this._bounds.contains(a)?new G(0,0):t},_getHandleBounds:function(e){var n,i,r,o,a=this.options.editable;return a&&a.resize?(i=(n=a.resize.handles||{}).width,r=n.height,o=new U(0,0,i,r),0>e.x?o.x=-i/2:0===e.x?o.x=Math.floor(this._bounds.width/2)-i/2:e.x>0&&(o.x=this._bounds.width+1-i/2),0>e.y?o.y=-r/2:0===e.y?o.y=Math.floor(this._bounds.height/2)-r/2:e.y>0&&(o.y=this._bounds.height+1-r/2),o):t},_getCursor:function(e){var t,n=this._hitTest(e);if(n&&n.x>=-1&&1>=n.x&&n.y>=-1&&1>=n.y&&this.options.editable&&this.options.editable.resize){if((t=this._angle)&&(t=360-t,n.rotate(new G(0,0),t),n=new G(Math.round(n.x),Math.round(n.y))),-1==n.x&&-1==n.y)return"nw-resize";if(1==n.x&&1==n.y)return"se-resize";if(-1==n.x&&1==n.y)return"sw-resize";if(1==n.x&&-1==n.y)return"ne-resize";if(0===n.x&&-1==n.y)return"n-resize";if(0===n.x&&1==n.y)return"s-resize";if(1==n.x&&0===n.y)return"e-resize";if(-1==n.x&&0===n.y)return"w-resize"}return this._manipulating?te.move:te.select},_initialize:function(){var e,t,n=this,i=n.diagram.select();for(n.shapes=[],e=0;i.length>e;e++)(t=i[e])instanceof N.Shape&&(n.shapes.push(t),t._rotationOffset=new G);n._angle=1==n.shapes.length?n.shapes[0].rotate().angle:0,n._startAngle=n._angle,n._rotates(),n._positions(),n.refreshBounds(),n.refresh(),n.redraw()},_rotates:function(){var e,t,n=this;for(n.initialRotates=[],e=0;n.shapes.length>e;e++)t=n.shapes[e],n.initialRotates.push(t.rotate().angle)},_positions:function(){var e,t,n=this;for(n.initialStates=[],e=0;n.shapes.length>e;e++)t=n.shapes[e],n.initialStates.push(t.bounds())},_hover:function(e,t){var n,i,r,o,a=this.options.editable;a&&a.resize&&(i=(n=a.resize.handles).hover,r=n.stroke,o=n.fill,e&&j.isDefined(i.stroke)&&(r=Q({},r,i.stroke)),e&&j.isDefined(i.fill)&&(o=i.fill),t.stroke(r.color,r.width,r.opacity),t.fill(o.color,o.opacity))},start:function(e){var t,n;for(this._sp=e,this._cp=e,this._lp=e,this._manipulating=!0,this._internalChange=!0,this.shapeStates=[],t=0;this.shapes.length>t;t++)n=this.shapes[t],this.shapeStates.push(n.bounds())},redraw:function(){var e,t=this,n=t.options.editable,i=n.resize,r=n.rotate,o=!(!n||!i),a=!(!n||!r);for(e=0;this.map.length>e;e++)this.map[e].visual.visible(o);t.rotationThumb&&t.rotationThumb.visible(a)},angle:function(e){return Z(e)&&(this._angle=e),this._angle},rotate:function(){var e,t,n=this._innerBounds.center(),i=this.angle();for(this._internalChange=!0,e=0;this.shapes.length>e;e++)t=this.shapes[e],i=(i+this.initialRotates[e]-this._startAngle)%360,t.rotate(i,n);this.refresh()},move:function(e,n){var i,r,a,s,l,c,u,d,h,p,f,g,m,v,_=new G,y=new G,b=0;if(-2===e.y&&-1===e.x){for(s=this._innerBounds.center(),this._angle=this._truncateAngle(j.findAngle(s,n)),c=0;this.shapes.length>c;c++)l=this.shapes[c],u=(this._angle+this.initialRotates[c]-this._startAngle)%360,l.rotate(u,s),l.hasOwnProperty("layout")&&l.layout(l),this._rotating=!0;this.refresh()}else{if(this.shouldSnap()){if(0===(g=this._truncateDistance(n.minus(this._lp))).x&&0===g.y)return this._cp=n,t;i=g,this._lp=new G(this._lp.x+g.x,this._lp.y+g.y)}else i=n.minus(this._cp);for(this.isDragHandle(e)?(y=_=i,r=!0):(this._angle&&i.rotate(new G(0,0),this._angle),-1==e.x?_.x=i.x:1==e.x&&(y.x=i.x),-1==e.y?_.y=i.y:1==e.y&&(y.y=i.y)),r||(h=function(e,t){var n;return-1==e.x&&-1==e.y?n=t.bottomRight():1==e.x&&1==e.y?n=t.topLeft():-1==e.x&&1==e.y?n=t.topRight():1==e.x&&-1==e.y?n=t.bottomLeft():0===e.x&&-1==e.y?n=t.bottom():0===e.x&&1==e.y?n=t.top():1==e.x&&0===e.y?n=t.left():-1==e.x&&0===e.y&&(n=t.right()),n}(e,this._innerBounds),p=(this._innerBounds.width+i.x*e.x)/this._innerBounds.width,f=(this._innerBounds.height+i.y*e.y)/this._innerBounds.height),c=0;this.shapes.length>c;c++){if(a=(l=this.shapes[c]).bounds(),r){if(!o(l))continue;d=this._displaceBounds(a,_,y,r)}else(d=a.clone()).scale(p,f,h,this._innerBounds.center(),l.rotate().angle),(m=d.center()).rotate(a.center(),-this._angle),d=new U(m.x-d.width/2,m.y-d.height/2,d.width,d.height);d.width>=l.options.minWidth&&d.height>=l.options.minHeight&&(v=a,l.bounds(d),l.hasOwnProperty("layout")&&l.layout(l,v,d),(v.width!==d.width||v.height!==d.height)&&l.rotate(l.rotate().angle),b+=1)}b&&(b==c?(d=this._displaceBounds(this._innerBounds,_,y,r),this.bounds(d)):this.refreshBounds(),this.refresh()),this._positions()}this._cp=n},isDragHandle:function(e){return 0===e.x&&0===e.y},cancel:function(){var e,n=this.shapes,i=this.shapeStates;for(e=0;n.length>e;e++)n[e].bounds(i[e]);this.refreshBounds(),this.refresh(),this._manipulating=t,this._internalChange=t,this._rotating=t},_truncatePositionToGuides:function(e){return this.diagram.ruler?this.diagram.ruler.truncatePositionToGuides(e):e},_truncateSizeToGuides:function(e){return this.diagram.ruler?this.diagram.ruler.truncateSizeToGuides(e):e},_truncateAngle:function(e){var t=this.snapOptions(),n=Math.max(t.angle||10,5);return t?Math.floor(e%360/n)*n:e%360},_truncateDistance:function(e){var t,n;return e instanceof N.Point?new N.Point(this._truncateDistance(e.x),this._truncateDistance(e.y)):(t=this.snapOptions()||{},n=Math.max(t.size||10,5),t?Math.floor(e/n)*n:e)},snapOptions:function(){return((this.diagram.options.editable||{}).drag||{}).snap||{}},shouldSnap:function(){var e=this.diagram.options.editable,t=(e||{}).drag,n=(t||{}).snap;return!1!==e&&!1!==t&&!1!==n},_displaceBounds:function(e,t,n,i){var r,o=e.topLeft().plus(t),a=e.bottomRight().plus(n),s=U.fromPoints(o,a);return i||((r=s.center()).rotate(e.center(),-this._angle),s=new U(r.x-s.width/2,r.y-s.height/2,s.width,s.height)),s},stop:function(){var e,n,i,r;if(this._cp!=this._sp)if(this._rotating)e=new v(this,this.shapes,this.initialRotates),this._rotating=!1;else if(this._diffStates()){if(this.diagram.ruler)for(n=0;this.shapes.length>n;n++)r=(i=this.shapes[n]).bounds(),r=this._truncateSizeToGuides(this._truncatePositionToGuides(r)),i.bounds(r),this.refreshBounds(),this.refresh();for(n=0;this.shapes.length>n;n++)(i=this.shapes[n]).updateModel();e=new p(this.shapes,this.shapeStates,this),this.diagram._syncShapeChanges()}return this._manipulating=t,this._internalChange=t,this._rotating=t,e},_diffStates:function(){var e,t=this.shapes,n=this.shapeStates;for(e=0;t.length>e;e++)if(!t[e].bounds().equals(n[e]))return!0;return!1},refreshBounds:function(){var e=1==this.shapes.length?this.shapes[0].bounds().clone():this.diagram.boundingBox(this.shapes,!0);this.bounds(e)},refresh:function(){var t,n,i,r,o=this;this.shapes.length>0?(n=this.bounds(),this.visual.visible(!0),this.visual.position(n.topLeft()),e.each(this.map,function(){t=o._getHandleBounds(new G(this.x,this.y)),this.visual.position(t.topLeft())}),this.visual.position(n.topLeft()),i=new G(n.width/2,n.height/2),this.visual.rotate(this._angle,i),this.rect.redraw({width:n.width,height:n.height}),this.rotationThumb&&(r=this.options.editable.rotate.thumb,this._rotationThumbBounds=new U(n.center().x,n.y+r.y,0,0).inflate(r.width),this.rotationThumb.redraw({x:n.width/2-r.width/2}))):this.visual.visible(!1)}}),B=O.extend({init:function(e){var t=e.options.selectable;this.options=Q({},this.options,t),this.visual=new W(this.options),this.diagram=e},options:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:le}},start:function(e){this._sp=this._ep=e,this.refresh(),this.diagram._adorn(this,!0)},end:function(){this._sp=this._ep=t,this.diagram._adorn(this,!1)},bounds:function(e){return e&&(this._bounds=e),this._bounds},move:function(e){this._ep=e,this.refresh()},refresh:function(){if(this._sp){var e=U.fromPoints(this.diagram.modelToLayer(this._sp),this.diagram.modelToLayer(this._ep));this.bounds(U.fromPoints(this._sp,this._ep)),this.visual.position(e.topLeft()),this.visual.redraw({height:e.height+1,width:e.width+1})}}}),z=O.extend({init:function(e){this.options=Q({},e.options),this._c=e,this.visual=new $(this.options),this.refresh()},_hover:function(e){var t=this.options,n=t.hover,i=t.stroke,r=t.fill;e&&j.isDefined(n.stroke)&&(i=Q({},i,n.stroke)),e&&j.isDefined(n.fill)&&(r=n.fill),this.visual.redraw({stroke:i,fill:r})},refresh:function(){var e=this._c.shape.diagram.modelToView(this._c.position()),t=e.minus(this._c.shape.bounds("transformed").topLeft()),n=new U(e.x,e.y,0,0);n.inflate(this.options.width/2,this.options.height/2),this._visualBounds=n,this.visual.redraw({center:new G(t.x,t.y)})},_hitTest:function(e){var t=this._c.shape.diagram.modelToView(e);return this._visualBounds.contains(t)}}),Q(N,{CompositeUnit:l,TransformUnit:p,PanUndoUnit:m,AddShapeUnit:g,AddConnectionUnit:f,DeleteShapeUnit:h,DeleteConnectionUnit:d,ConnectionEditAdorner:P,ConnectionTool:T,ConnectorVisual:z,UndoRedoService:b,ResizingAdorner:F,Selector:B,ToolService:D,ConnectorsAdorner:L,LayoutUndoUnit:s,ConnectionEditUnit:c,ToFrontUnit:_,ToBackUnit:y,ConnectionRouterBase:A,PolylineRouter:E,CascadingRouter:I,SelectionTool:C,ScrollerTool:k,PointerTool:x,ConnectionEditTool:S,RotateUnit:v})}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.dataviz.diagram,i=n.Graph,r=n.Node,o=n.Link,a=t.deepExtend,s=n.Size,l=n.Rect,c=n.Dictionary,u=n.Set,d=n.Graph,h=n.Utils,p=n.Point,f=1e-6,g=Math.PI/180,m=h.contains,v=e.grep,_=t.Class.extend({defaultOptions:{type:"Tree",subtype:"Down",roots:null,animate:!1,limitToView:!1,friction:.9,nodeDistance:50,iterations:300,horizontalSeparation:90,verticalSeparation:50,underneathVerticalTopOffset:15,underneathHorizontalOffset:15,underneathVerticalSeparation:15,grid:{width:1500,offsetX:50,offsetY:50,componentSpacingX:20,componentSpacingY:20},layerSeparation:50,layeredIterations:2,startRadialAngle:0,endRadialAngle:360,radialSeparation:150,radialFirstLevelSeparation:200,keepComponentsInOneRadialLayout:!1,ignoreContainers:!0,layoutContainerChildren:!1,ignoreInvisible:!0,animateTransitions:!1},init:function(){},gridLayoutComponents:function(e){var t,n,i,r,o,a,s,l,c,u,d,f,g,m;if(!e)throw"No components supplied.";for(h.forEach(e,function(e){e.calcBounds()}),e.sort(function(e,t){return t.bounds.width-e.bounds.width}),t=this.options.grid.width,n=this.options.grid.componentSpacingX,i=this.options.grid.componentSpacingY,r=0,a=o=this.options.grid.offsetX,s=this.options.grid.offsetY,c=[],u=[];e.length>0;){for(a>=t&&(a=o,s+=r+i,r=0),d=e.pop(),this.moveToOffset(d,new p(a,s)),l=0;d.nodes.length>l;l++)u.push(d.nodes[l]);for(l=0;d.links.length>l;l++)c.push(d.links[l]);(0>=(g=(f=d.bounds).height)||isNaN(g))&&(g=0),(0>=(m=f.width)||isNaN(m))&&(m=0),g>=r&&(r=g),a+=m+n}return{nodes:u,links:c}},moveToOffset:function(e,t){var n,i,r,o,a,s,c,u,d=e.bounds,h=t.x-d.x,f=t.y-d.y;for(n=0;e.nodes.length>n;n++)0===(o=(r=e.nodes[n]).bounds()).width&&0===o.height&&0===o.x&&0===o.y&&(o=new l(0,0,0,0)),o.x+=h,o.y+=f,r.bounds(o);for(n=0;e.links.length>n;n++)if((a=e.links[n]).points){for(s=[],c=a.points,i=0;c.length>i;i++)(u=c[i]).x+=h,u.y+=f,s.push(u);a.points=s}return this.currentHorizontalOffset+=d.width+this.options.grid.offsetX,new p(h,f)},transferOptions:function(e){this.options=t.deepExtend({},this.defaultOptions),h.isUndefined(e)||(this.options=t.deepExtend(this.options,e||{}))}}),y=t.Class.extend({init:function(e){this.nodeMap=new c,this.shapeMap=new c,this.nodes=[],this.edges=[],this.edgeMap=new c,this.finalNodes=[],this.finalLinks=[],this.ignoredConnections=[],this.ignoredShapes=[],this.hyperMap=new c,this.hyperTree=new i,this.finalGraph=null,this.diagram=e},convert:function(e){if(h.isUndefined(this.diagram))throw"No diagram to convert.";return this.options=t.deepExtend({ignoreInvisible:!0,ignoreContainers:!0,layoutContainerChildren:!1},e||{}),this.clear(),this._renormalizeShapes(),this._renormalizeConnections(),this.finalNodes=new c(this.nodes),this.finalLinks=new c(this.edges),this.finalGraph=new i,this.finalNodes.forEach(function(e){this.finalGraph.addNode(e)},this),this.finalLinks.forEach(function(e){this.finalGraph.addExistingLink(e)},this),this.finalGraph},mapConnection:function(e){return this.edgeMap.first(function(t){return m(this.edgeMap.get(t),e)})},mapShape:function(e){var t,n,i,r=this.nodeMap.keys();for(t=0,n=r.length;n>t;t++)if(i=r[t],m(this.nodeMap.get(i),e))return i},getEdge:function(e,t){return h.first(e.links,function(n){return n.getComplement(e)===t})},clear:function(){this.finalGraph=null,this.hyperTree=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new d:null,this.hyperMap=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new c:null,this.nodeMap=new c,this.shapeMap=new c,this.nodes=[],this.edges=[],this.edgeMap=new c,this.ignoredConnections=[],this.ignoredShapes=[],this.finalNodes=[],this.finalLinks=[]},listToRoot:function(e){var t=[],n=e.container;if(!n)return t;for(t.push(n);n.parentContainer;)n=n.parentContainer,t.push(n);return t.reverse(),t},firstNonIgnorableContainer:function(e){return e.isContainer&&!this._isIgnorableItem(e)?e:e.parentContainer?this.firstNonIgnorableContainer(e.parentContainer):null},isContainerConnection:function(e,t){return!(!e.isContainer||!this.isDescendantOf(e,t))||t.isContainer&&this.isDescendantOf(t,e)},isDescendantOf:function(e,t){var n,i,r,o;if(!e.isContainer)throw"Expecting a container.";if(e===t)return!1;if(m(e.children,t))return!0;for(n=[],i=0,r=e.children.length;r>i;i++)(o=e.children[i]).isContainer&&this.isDescendantOf(o,t)&&n.push(o);return n.length>0},isIgnorableItem:function(e){return this.options.ignoreInvisible?!(e.isCollapsed&&this._isVisible(e)||!e.isCollapsed&&this._isVisible(e)):e.isCollapsed&&!this._isTop(e)},isShapeMapped:function(e){return e.isCollapsed&&!this._isVisible(e)&&!this._isTop(e)},leastCommonAncestor:function(e,t){var n,i,r,o,a,s;if(!e)throw"Parameter should not be null.";if(!t)throw"Parameter should not be null.";if(!this.hyperTree)throw"No hypertree available.";if(n=this.listToRoot(e),i=this.listToRoot(t),r=null,h.isEmpty(n)||h.isEmpty(i))return this.hyperTree.root.data;for(o=n[0],a=i[0],s=0;o===a&&(r=n[s],!(++s>=n.length||s>=i.length));)o=n[s],a=i[s];return r?v(this.hyperTree.nodes,function(e){return e.data.container===r}):this.hyperTree.root.data},_isTop:function(e){return!e.parentContainer},_isVisible:function(e){return!!e.visible()&&(e.parentContainer?this._isVisible(e.parentContainer):e.visible())},_isCollapsed:function(e){return!(!e.isContainer||!e.isCollapsed)||e.parentContainer&&this._isCollapsed(e.parentContainer)},_renormalizeShapes:function(){var e,t,n,i;if(!this.options.ignoreContainers)throw"Containers are not supported yet, but stay tuned.";for(e=0,t=this.diagram.shapes.length;t>e;e++)n=this.diagram.shapes[e],this.options.ignoreInvisible&&!this._isVisible(n)||n.isContainer?this.ignoredShapes.push(n):((i=new r(n.id,n)).isVirtual=!1,this.nodeMap.add(i,[n]),this.nodes.push(i))},_renormalizeConnections:function(){var e,t,n,i,r,a,s,l;if(0!==this.diagram.connections.length)for(e=0,t=this.diagram.connections.length;t>e;e++)if(n=this.diagram.connections[e],this.isIgnorableItem(n))this.ignoredConnections.push(n);else if(i=n.sourceConnector?n.sourceConnector.shape:null,r=n.targetConnector?n.targetConnector.shape:null,i&&r)if(!m(this.ignoredShapes,i)||this.shapeMap.containsKey(i))if(!m(this.ignoredShapes,r)||this.shapeMap.containsKey(r))if(this.shapeMap.containsKey(i)&&(i=this.shapeMap[i]),this.shapeMap.containsKey(r)&&(r=this.shapeMap[r]),(a=this.mapShape(i))===(s=this.mapShape(r))||this.areConnectedAlready(a,s))this.ignoredConnections.push(n);else{if(null===a||null===s)throw"A shape was not mapped to a node.";if(!this.options.ignoreContainers)throw"Containers are not supported yet, but stay tuned.";a.isVirtual||s.isVirtual?this.ignoredConnections.push(n):(l=new o(a,s,n.id,n),this.edgeMap.add(l,[n]),this.edges.push(l))}else this.ignoredConnections.push(n);else this.ignoredConnections.push(n);else this.ignoredConnections.push(n)},areConnectedAlready:function(e,t){return h.any(this.edges,function(n){return n.source===e&&n.target===t||n.source===t&&n.target===e})}}),b=_.extend({init:function(e){if(_.fn.init.call(this),h.isUndefined(e))throw"Diagram is not specified.";this.diagram=e},layout:function(e){var t,i,r,o,a;if(this.transferOptions(e),!(t=new y(this.diagram).convert(e)).isEmpty()&&(i=t.getConnectedComponents(),!h.isEmpty(i))){for(r=0;i.length>r;r++)o=i[r],this.layoutGraph(o,e);return a=this.gridLayoutComponents(i),new n.LayoutState(this.diagram,a)}},layoutGraph:function(e,t){var n,i,r;for(h.isDefined(t)&&this.transferOptions(t),this.graph=e,n=9*this.options.nodeDistance,this.temperature=n,i=this._expectedBounds(),this.width=i.width,this.height=i.height,r=0;this.options.iterations>r;r++)this.refineStage=r>=5*this.options.iterations/6,this.tick(),this.temperature=this.refineStage?n/30:n*(1-r/(2*this.options.iterations))},tick:function(){var e,t,n;for(e=0;this.graph.nodes.length>e;e++)this._repulsion(this.graph.nodes[e]);for(e=0;this.graph.links.length>e;e++)this._attraction(this.graph.links[e]);for(e=0;this.graph.nodes.length>e;e++){if(t=this.graph.nodes[e],0===(n=Math.sqrt(t.dx*t.dx+t.dy*t.dy)))return;t.x+=Math.min(n,this.temperature)*t.dx/n,t.y+=Math.min(n,this.temperature)*t.dy/n,this.options.limitToView&&(t.x=Math.min(this.width,Math.max(t.width/2,t.x)),t.y=Math.min(this.height,Math.max(t.height/2,t.y)))}},_shake:function(e){var t=Math.random()*this.options.nodeDistance/4,n=2*Math.random()*Math.PI;e.x+=t*Math.cos(n),e.y-=t*Math.sin(n)},_InverseSquareForce:function(e,t,n){var i,r,o,a,s,l,c;return this.refineStage?(r=t.x-n.x,o=t.y-n.y,a=t.width/2,s=t.height/2,l=n.width/2,c=n.height/2,i=Math.pow(r,2)/Math.pow(a+l+this.options.nodeDistance,2)+Math.pow(o,2)/Math.pow(s+c+this.options.nodeDistance,2)):i=Math.pow(e,2)/Math.pow(this.options.nodeDistance,2),4*i/3},_SquareForce:function(e,t,n){return 1/this._InverseSquareForce(e,t,n)},_repulsion:function(e){e.dx=0,e.dy=0,h.forEach(this.graph.nodes,function(t){var n,i,r,o;if(t!==e){for(;e.x===t.x&&e.y===t.y;)this._shake(t);n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i),o=2*this._SquareForce(r,e,t),e.dx+=n/r*o,e.dy+=i/r*o}},this)},_attraction:function(e){var t,n,i,r,o,a,s=e.target,l=e.source;if(l!==s){for(;l.x===s.x&&l.y===s.y;)this._shake(s);t=l.x-s.x,n=l.y-s.y,o=t/(i=Math.sqrt(t*t+n*n))*(r=5*this._InverseSquareForce(i,l,s)),a=n/i*r,s.dx+=o,s.dy+=a,l.dx-=o,l.dy-=a}},_expectedBounds:function(){var e,t,n=this.graph.nodes.length;return 0===n?e:{width:(t=(e=h.fold(this.graph.nodes,function(e,t){var n=t.width*t.height;return n>0?e+=Math.sqrt(n):0},0,this))/n*Math.ceil(Math.sqrt(n)))*Math.sqrt(1.5)*4,height:t/Math.sqrt(1.5)*4}}}),w=t.Class.extend({init:function(e){this.center=null,this.options=e},layout:function(e,t){if(this.graph=e,this.graph.nodes&&0!==this.graph.nodes.length){if(!m(this.graph.nodes,t))throw"The given root is not in the graph.";this.center=t,this.graph.cacheRelationships(),this.layoutSwitch()}},layoutLeft:function(e){var t,n,i,r,o,a,l,c;for(this.setChildrenDirection(this.center,"Left",!1),this.setChildrenLayout(this.center,"Default",!1),t=0,n=0,r=0;e.length>r;r++)(o=e[r]).TreeDirection="Left",a=this.measure(o,s.Empty),n=Math.max(n,a.Width),t+=a.height+this.options.verticalSeparation;for(t-=this.options.verticalSeparation,l=this.center.x-this.options.horizontalSeparation,i=this.center.y+(this.center.height-t)/2,r=0;e.length>r;r++)o=e[r],c=new p(l-o.Size.width,i),this.arrange(o,c),i+=o.Size.height+this.options.verticalSeparation},layoutRight:function(e){var t,n,i,r,o,a,l,c;for(this.setChildrenDirection(this.center,"Right",!1),this.setChildrenLayout(this.center,"Default",!1),t=0,n=0,r=0;e.length>r;r++)(o=e[r]).TreeDirection="Right",a=this.measure(o,s.Empty),n=Math.max(n,a.Width),t+=a.height+this.options.verticalSeparation;for(t-=this.options.verticalSeparation,l=this.center.x+this.options.horizontalSeparation+this.center.width,i=this.center.y+(this.center.height-t)/2,r=0;e.length>r;r++)o=e[r],c=new p(l,i),this.arrange(o,c),i+=o.Size.height+this.options.verticalSeparation},layoutUp:function(e){var t,n,i,r,o,a;for(this.setChildrenDirection(this.center,"Up",!1),this.setChildrenLayout(this.center,"Default",!1),t=0,r=0;e.length>r;r++)(i=e[r]).TreeDirection="Up",t+=this.measure(i,s.Empty).width+this.options.horizontalSeparation;for(t-=this.options.horizontalSeparation,o=this.center.x+this.center.width/2-t/2,r=0;e.length>r;r++)i=e[r],n=this.center.y-this.options.verticalSeparation-i.Size.height,a=new p(o,n),this.arrange(i,a),o+=i.Size.width+this.options.horizontalSeparation},layoutDown:function(e){var t,n,i,r,o,a;for(this.setChildrenDirection(this.center,"Down",!1),this.setChildrenLayout(this.center,"Default",!1),i=0,n=0;e.length>n;n++)(t=e[n]).treeDirection="Down",i+=this.measure(t,s.Empty).width+this.options.horizontalSeparation;for(i-=this.options.horizontalSeparation,o=this.center.x+this.center.width/2-i/2,r=this.center.y+this.options.verticalSeparation+this.center.height,n=0;e.length>n;n++)t=e[n],a=new p(o,r),this.arrange(t,a),o+=t.Size.width+this.options.horizontalSeparation},layoutRadialTree:function(){var e,t;if(this.setChildrenDirection(this.center,"Radial",!1),this.setChildrenLayout(this.center,"Default",!1),this.previousRoot=null,(e=this.options.startRadialAngle*g)>=(t=this.options.endRadialAngle*g))throw"Final angle should not be less than the start angle.";this.maxDepth=0,this.origin=new p(this.center.x,this.center.y),this.calculateAngularWidth(this.center,0),this.maxDepth>0&&this.radialLayout(this.center,this.options.radialFirstLevelSeparation,e,t),this.center.Angle=t-e},tipOverTree:function(e,t){var n,i,r,o,a,l;for(h.isUndefined(t)&&(t=0),this.setChildrenDirection(this.center,"Down",!1),this.setChildrenLayout(this.center,"Default",!1),this.setChildrenLayout(this.center,"Underneath",!1,t),n=0,o=0;e.length>o;o++)(r=e[o]).TreeDirection="Down",n+=this.measure(r,s.Empty).width+this.options.horizontalSeparation;for(n-=this.options.horizontalSeparation,n-=e[e.length-1].width,n+=e[e.length-1].associatedShape.bounds().width,a=this.center.x+this.center.width/2-n/2,i=this.center.y+this.options.verticalSeparation+this.center.height,o=0;e.length>o;o++)r=e[o],l=new p(a,i),this.arrange(r,l),a+=r.Size.width+this.options.horizontalSeparation},calculateAngularWidth:function(e,t){var n,i,r,o,a;if(t>this.maxDepth&&(this.maxDepth=t),n=0,i=0===t?0:Math.sqrt(2e6)/t,e.children.length>0){for(r=0,o=e.children.length;o>r;r++)a=e.children[r],n+=this.calculateAngularWidth(a,t+1);n=Math.max(i,n)}else n=i;return e.sectorAngle=n,n},sortChildren:function(e){var t,n,i,r,o,a,s,l,c,u,d,f=0;if(e.parents.length>1)throw"Node is not part of a tree.";if((n=e.parents[0])&&(i=new p(n.x,n.y),r=new p(e.x,e.y),f=this.normalizeAngle(Math.atan2(i.y-r.y,i.x-r.x))),0===(o=e.children.length))return null;for(a=[],s=[],t=0;o>t;++t)l=e.children[t],c=new p(l.x,l.y),s[t]=t,a[t]=this.normalizeAngle(-f+Math.atan2(c.y-c.y,c.x-c.x));for(h.bisort(a,s),u=[],d=e.children,t=0;o>t;++t)u.push(d[s[t]]);return u},normalizeAngle:function(e){for(;e>2*Math.PI;)e-=2*Math.PI;for(;0>e;)e+=2*Math.PI;return e},radialLayout:function(e,t,n,i){var r,o,a,s,l,c=i-n,u=c/2,d=e.sectorAngle,h=0,p=this.sortChildren(e);for(r=0,o=p.length;o>r;r++)l=(s=a=p[r]).sectorAngle/d,a.children.length>0&&this.radialLayout(a,t+this.options.radialSeparation,n+h*c,n+(h+l)*c),this.setPolarLocation(a,t,n+h*c+l*u),s.angle=l*c,h+=l},setPolarLocation:function(e,t,n){e.x=this.origin.x+t*Math.cos(n),e.y=this.origin.y+t*Math.sin(n),e.BoundingRectangle=new l(e.x,e.y,e.width,e.height)},setChildrenDirection:function(e,t,n){var i=e.treeDirection;this.graph.depthFirstTraversal(e,function(e){e.treeDirection=t}),n||(e.treeDirection=i)},setChildrenLayout:function(e,t,n,i){h.isUndefined(i)&&(i=0);var r=e.childrenLayout;i>0?(this.graph.assignLevels(e),this.graph.depthFirstTraversal(e,function(e){e.level>=i+1&&(e.childrenLayout=t)})):(this.graph.depthFirstTraversal(e,function(e){e.childrenLayout=t}),n||(e.childrenLayout=r))},measure:function(e,t){var n,i,r,o,a,l,c,u=0,d=0,p=new s(0,0);if(!e)throw"";if(r=(i=e.associatedShape.bounds()).width,o=i.height,1!==e.parents.length)throw"Node not in a spanning tree.";if(a=e.parents[0],"Undefined"===e.treeDirection&&(e.treeDirection=a.treeDirection),h.isEmpty(e.children))p=new s(Math.abs(r)<f?50:r,Math.abs(o)<f?25:o);else if(1===e.children.length){switch(e.treeDirection){case"Radial":n=this.measure(e.children[0],t),u=r+this.options.radialSeparation*Math.cos(e.AngleToParent)+n.width,d=o+Math.abs(this.options.radialSeparation*Math.sin(e.AngleToParent))+n.height;break;case"Left":case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":u=r+(n=this.measure(e.children[0],t)).width+this.options.underneathHorizontalOffset,d=o+this.options.underneathVerticalTopOffset+n.height;break;case"Default":n=this.measure(e.children[0],t),u=r+this.options.horizontalSeparation+n.width,d=Math.max(o,n.height);break;default:throw"Unhandled TreeDirection in the Radial layout measuring."}break;case"Up":case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":n=this.measure(e.children[0],t),u=Math.max(r,n.width+this.options.underneathHorizontalOffset),d=o+this.options.underneathVerticalTopOffset+n.height;break;case"Default":n=this.measure(e.children[0],t),d=o+this.options.verticalSeparation+n.height,u=Math.max(r,n.width);break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}p=new s(u,d)}else{switch(e.treeDirection){case"Left":case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(u=r,d=o+this.options.underneathVerticalTopOffset,l=0;e.children.length>l;l++)c=e.children[l],n=this.measure(c,t),u=Math.max(u,n.width+this.options.underneathHorizontalOffset),d+=n.height+this.options.underneathVerticalSeparation;d-=this.options.underneathVerticalSeparation;break;case"Default":for(u=r,d=0,l=0;e.children.length>l;l++)c=e.children[l],n=this.measure(c,t),u=Math.max(u,r+this.options.horizontalSeparation+n.width),d+=n.height+this.options.verticalSeparation;d-=this.options.verticalSeparation;break;default:throw"Unhandled TreeDirection in the Right layout measuring."}break;case"Up":case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(u=r,d=o+this.options.underneathVerticalTopOffset,l=0;e.children.length>l;l++)c=e.children[l],n=this.measure(c,t),u=Math.max(u,n.width+this.options.underneathHorizontalOffset),d+=n.height+this.options.underneathVerticalSeparation;d-=this.options.underneathVerticalSeparation;break;case"Default":for(u=0,d=0,l=0;e.children.length>l;l++)c=e.children[l],u+=(n=this.measure(c,t)).width+this.options.horizontalSeparation,d=Math.max(d,n.height+this.options.verticalSeparation+o);u-=this.options.horizontalSeparation;break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}p=new s(u,d)}return e.SectorAngle=Math.sqrt(u*u/4+d*d/4),e.Size=p,p},arrange:function(e,t){var n,i,r,o,a,s,c,u=e.associatedShape.bounds(),d=u.width,g=u.height;if(h.isEmpty(e.children))e.x=t.x,e.y=t.y,e.BoundingRectangle=new l(t.x,t.y,d,g);else switch(e.treeDirection){case"Left":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(c=t,e.x=c.x,e.y=c.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),s=t.y+g+this.options.underneathVerticalTopOffset,n=0;r.children.length>n;n++)r=r.children[n],a=c.x-r.associatedShape.width-this.options.underneathHorizontalOffset,i=new p(a,s),this.arrange(r,i),s+=r.Size.height+this.options.underneathVerticalSeparation;break;case"Default":for(c=new p(t.x+e.Size.width-d,t.y+(e.Size.height-g)/2),e.x=c.x,e.y=c.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),a=c.x-this.options.horizontalSeparation,s=t.y,n=0;e.children.length>n;n++)r=e.children[n],i=new p(a-r.Size.width,s),this.arrange(r,i),s+=r.Size.height+this.options.verticalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(c=t,e.x=c.x,e.y=c.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),a=t.x+d+this.options.underneathHorizontalOffset,s=t.y+g+this.options.underneathVerticalTopOffset,n=0;e.children.length>n;n++)r=e.children[n],i=new p(a,s),this.arrange(r,i),s+=r.Size.height+this.options.underneathVerticalSeparation;break;case"Default":for(c=new p(t.x,t.y+(e.Size.height-g)/2),e.x=c.x,e.y=c.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),a=t.x+d+this.options.horizontalSeparation,s=t.y,n=0;e.children.length>n;n++)r=e.children[n],i=new p(a,s),this.arrange(r,i),s+=r.Size.height+this.options.verticalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"Up":if(c=new p(t.x+(e.Size.width-d)/2,t.y+e.Size.height-g),e.x=c.x,e.y=c.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),Math.abs(c.x-t.x)<f){for(o=0,n=0;e.children.length>n;n++)o+=e.children[n].Size.width+this.options.horizontalSeparation;o-=this.options.horizontalSeparation,a=t.x+(d-o)/2}else a=t.x;for(n=0;e.children.length>n;n++)r=e.children[n],s=c.y-this.options.verticalSeparation-r.Size.height,i=new p(a,s),this.arrange(r,i),a+=r.Size.width+this.options.horizontalSeparation;break;case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(c=t,e.x=c.x,e.y=c.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),a=t.x+this.options.underneathHorizontalOffset,s=t.y+g+this.options.underneathVerticalTopOffset,n=0;e.children.length>n;n++)r=e.children[n],i=new p(a,s),this.arrange(r,i),s+=r.Size.height+this.options.underneathVerticalSeparation;break;case"Default":if(c=new p(t.x+(e.Size.width-d)/2,t.y),e.x=c.x,e.y=c.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),Math.abs(c.x-t.x)<f){for(o=0,n=0;e.children.length>n;n++)o+=e.children[n].Size.width+this.options.horizontalSeparation;o-=this.options.horizontalSeparation,a=t.x+(d-o)/2}else a=t.x;for(n=0;e.children.length>n;n++)r=e.children[n],s=c.y+this.options.verticalSeparation+g,i=new p(a,s),this.arrange(r,i),a+=r.Size.width+this.options.horizontalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"None":break;default:throw"Unsupported TreeDirection"}},layoutSwitch:function(){var e,t,n,i,r,o;if(this.center&&!h.isEmpty(this.center.children))switch(e=this.options.subtype,h.isUndefined(e)&&(e="Down"),o=this.center.children,e.toLowerCase()){case"radial":case"radialtree":this.layoutRadialTree();break;case"mindmaphorizontal":case"mindmap":t=this.center.children,1===this.center.children.length?this.layoutRight(t):(r=o.length/2,n=v(this.center.children,function(e){return h.indexOf(o,e)<r}),i=v(this.center.children,function(e){return h.indexOf(o,e)>=r}),this.layoutLeft(n),this.layoutRight(i));break;case"mindmapvertical":t=this.center.children,1===this.center.children.length?this.layoutDown(t):(r=o.length/2,n=v(this.center.children,function(e){return h.indexOf(o,e)<r}),i=v(this.center.children,function(e){return h.indexOf(o,e)>=r}),this.layoutUp(n),this.layoutDown(i));break;case"right":this.layoutRight(this.center.children);break;case"left":this.layoutLeft(this.center.children);break;case"up":case"bottom":this.layoutUp(this.center.children);break;case"down":case"top":this.layoutDown(this.center.children);break;case"tipover":case"tipovertree":if(0>this.options.tipOverTreeStartLevel)throw"The tip-over level should be a positive integer.";this.tipOverTree(this.center.children,this.options.tipOverTreeStartLevel)}}}),k=_.extend({init:function(e){if(_.fn.init.call(this),h.isUndefined(e))throw"No diagram specified.";this.diagram=e},layout:function(e){var t,i;return this.transferOptions(e),t=new y(this.diagram),this.graph=t.convert(),i=this.layoutComponents(),new n.LayoutState(this.diagram,i)},layoutComponents:function(){var e,t,n,i,r,o,a,s;if(!this.graph.isEmpty()&&(e=this.graph.getConnectedComponents(),!h.isEmpty(e))){for(t=new w(this.options),n=[],i=0;e.length>i;i++){if(r=e[i],!(o=this.getTree(r)))throw"Failed to find a spanning tree for the component.";a=o.root,s=o.tree,t.layout(s,a),n.push(s)}return this.gridLayoutComponents(n)}},getTree:function(e){var t,n,i,r,o=null;if(this.options.roots&&this.options.roots.length>0)for(t=0,n=e.nodes.length;n>t;t++)for(i=e.nodes[t],r=0;this.options.roots.length>r;r++)if(this.options.roots[r]===i.associatedShape){o=i;break}if(!o&&!(o=e.root()))throw"Unable to find a root for the tree.";return this.getTreeForRoot(e,o)},getTreeForRoot:function(e,t){var n=e.getSpanningTree(t);return h.isUndefined(n)||n.isEmpty()?null:{tree:n,root:n.root}}}),x=_.extend({init:function(e){if(_.fn.init.call(this),h.isUndefined(e))throw"Diagram is not specified.";this.diagram=e},layout:function(e){var t,i,r,o,a;if(this.transferOptions(e),!(t=new y(this.diagram).convert(e)).isEmpty()&&(i=t.getConnectedComponents(),!h.isEmpty(i))){for(r=0;i.length>r;r++)o=i[r],this.layoutGraph(o,e);return a=this.gridLayoutComponents(i),new n.LayoutState(this.diagram,a)}},_initRuntimeProperties:function(){var e,t;for(e=0;this.graph.nodes.length>e;e++)(t=this.graph.nodes[e]).layer=-1,t.downstreamLinkCount=0,t.upstreamLinkCount=0,t.isVirtual=!1,t.uBaryCenter=0,t.dBaryCenter=0,t.upstreamPriority=0,t.downstreamPriority=0,t.gridPosition=0},_prepare:function(e){var t,n,i,r,o,a,s,l,u,d,p,f,g=[];for(n=0;e.links.length>n;n++)e.links[n].depthOfDumminess=0;for(r=new c,h.forEach(e.nodes,function(e){0===e.incoming.length&&(r.set(e,0),g.push(e))});g.length>0;)for(o=g.shift(),t=0;o.outgoing.length>t;t++)a=(i=o.outgoing[t]).target,r.containsKey(a)?r.set(a,Math.max(r.get(o)+1,r.get(a))):r.set(a,r.get(o)+1),m(g,a)||g.push(a);for(s=0,r.forEachValue(function(e){s=Math.max(s,e)}),l=[],h.addRange(l,r.keys()),l.sort(function(e,t){var n=r.get(e),i=r.get(t);return h.sign(i-n)}),u=0;l.length>u;++u)if(d=l[u],p=Number.MAX_VALUE,0!==d.outgoing.length){for(n=0;d.outgoing.length>n;++n)i=d.outgoing[n],p=Math.min(p,r.get(i.target));p>1&&r.set(d,p-1)}for(this.layers=[],t=0;s+1>t;t++)this.layers.push([]);for(r.forEach(function(e,t){e.layer=t,this.layers[t].push(e)},this),n=0;this.layers.length>n;n++)for(f=this.layers[n],t=0;f.length>t;t++)f[t].gridPosition=t},layoutGraph:function(e,t){if(h.isUndefined(e))throw"No graph given or graph analysis of the diagram failed.";h.isDefined(t)&&this.transferOptions(t),this.graph=e,e.setItemIndices();var n=e.makeAcyclic();this._initRuntimeProperties(),this._prepare(e,t),this._dummify(),this._optimizeCrossings(),this._swapPairs(),this.arrangeNodes(),this._moveThingsAround(),this._dedummify(),h.forEach(n,function(e){e.points&&e.points.reverse()})},setMinDist:function(e,t,n){var i=e.layer,r=e.layerIndex;this.minDistances[i][r]=n},getMinDist:function(e,t){var n,i=0,r=e.layerIndex,o=t.layerIndex,a=e.layer,s=Math.min(r,o),l=Math.max(r,o);for(n=s;l>n;++n)i+=this.minDistances[a][n];return i},placeLeftToRight:function(e){var t,n,i,r,o,a,s,l,u,d,p=new c;for(i=0;this.layers.length>i;++i)if(r=e[i]){for(t=0;r.length>t;t++)n=r[t],p.containsKey(n)||this.placeLeft(n,p,i);for(o=Number.POSITIVE_INFINITY,t=0;r.length>t;t++)n=r[t],(a=this.rightSibling(n))&&this.nodeLeftClass.get(a)!==i&&(o=Math.min(o,p.get(a)-p.get(n)-this.getMinDist(n,a)));if(o===Number.POSITIVE_INFINITY){for(s=[],t=0;r.length>t;t++)for(n=r[t],l=[],h.addRange(l,this.upNodes.get(n)),h.addRange(l,this.downNodes.get(n)),u=0;l.length>u;u++)d=l[u],this.nodeLeftClass.get(d)<i&&s.push(p.get(d)-p.get(n));s.sort(),o=0===s.length?0:s.length%2==1?s[this.intDiv(s.length,2)]:(s[this.intDiv(s.length,2)-1]+s[this.intDiv(s.length,2)])/2}for(t=0;r.length>t;t++)n=r[t],p.set(n,p.get(n)+o)}return p},placeRightToLeft:function(e){var t,n,i,r,o,a,s,l,u,d,p=new c;for(i=0;this.layers.length>i;++i)if(r=e[i]){for(t=0;r.length>t;t++)n=r[t],p.containsKey(n)||this.placeRight(n,p,i);for(o=Number.NEGATIVE_INFINITY,t=0;r.length>t;t++)n=r[t],(a=this.leftSibling(n))&&this.nodeRightClass.get(a)!==i&&(o=Math.max(o,p.get(a)-p.get(n)+this.getMinDist(a,n)));if(o===Number.NEGATIVE_INFINITY){for(s=[],t=0;r.length>t;t++)for(n=r[t],l=[],h.addRange(l,this.upNodes.get(n)),h.addRange(l,this.downNodes.get(n)),u=0;l.length>u;u++)d=l[u],this.nodeRightClass.get(d)<i&&s.push(p.get(n)-p.get(d));s.sort(),o=0===s.length?0:s.length%2==1?s[this.intDiv(s.length,2)]:(s[this.intDiv(s.length,2)-1]+s[this.intDiv(s.length,2)])/2}for(t=0;r.length>t;t++)n=r[t],p.set(n,p.get(n)+o)}return p},_getLeftWing:function(){var e={value:null},t=this.computeClasses(e,1);return this.nodeLeftClass=e.value,t},_getRightWing:function(){var e={value:null},t=this.computeClasses(e,-1);return this.nodeRightClass=e.value,t},computeClasses:function(e,t){var n,i,r,o,a,s,l,u,d,h=0,p=e.value=new c;for(n=0;this.layers.length>n;++n)for(h=n,i=this.layers[n],r=1===t?0:i.length-1;r>=0&&i.length>r;r+=t)if(o=i[r],p.containsKey(o))h=p.get(o);else if(p.set(o,h),o.isVirtual)for(a=this._nodesInLink(o),s=0;a.length>s;s++)l=a[s],p.set(l,h);for(u=[],d=0;this.layers.length>d;d++)u.push(null);return p.forEach(function(e,t){null===u[t]&&(u[t]=[]),u[t].push(e)}),u},_isVerticalLayout:function(){return"up"===this.options.subtype.toLowerCase()||"down"===this.options.subtype.toLowerCase()||"vertical"===this.options.subtype.toLowerCase()},_isHorizontalLayout:function(){return"right"===this.options.subtype.toLowerCase()||"left"===this.options.subtype.toLowerCase()||"horizontal"===this.options.subtype.toLowerCase()},_isIncreasingLayout:function(){return"right"===this.options.subtype.toLowerCase()||"down"===this.options.subtype.toLowerCase()},_moveThingsAround:function(){function e(e,t){var n,i,r=Number.MIN_VALUE;for(n=0;e.length>n;++n)i=e[n],r=t._isVerticalLayout()?Math.max(r,i.height):Math.max(r,i.width);return r}var t,n,i,r,o,a,s,l,u,d,p,f,g,m,v,_,y,b,w,k,x,C,T,S,D,A;for(n=0;this.layers.length>n;++n)(r=this.layers[n]).sort(this._gridPositionComparer);for(this.minDistances=[],n=0;this.layers.length>n;++n)for(r=this.layers[n],this.minDistances[n]=[],o=0;r.length>o;++o)(i=r[o]).layerIndex=o,this.minDistances[n][o]=this.options.nodeDistance,r.length-1>o&&(this.minDistances[n][o]+=this._isVerticalLayout()?(i.width+r[o+1].width)/2:(i.height+r[o+1].height)/2);for(this.downNodes=new c,this.upNodes=new c,h.forEach(this.graph.nodes,function(e){this.downNodes.set(e,[]),this.upNodes.set(e,[])},this),h.forEach(this.graph.links,function(e){var t=e.source,n=e.target,i=null,r=null;t.layer>n.layer?(i=e.source,r=e.target):(r=e.source,i=e.target),this.downNodes.get(r).push(i),this.upNodes.get(i).push(r)},this),this.downNodes.forEachValue(function(e){e.sort(this._gridPositionComparer)},this),this.upNodes.forEachValue(function(e){e.sort(this._gridPositionComparer)},this),n=0;this.layers.length-1>n;++n)for(r=this.layers[n],a=0;r.length-1>a;a++)if((s=r[a]).isVirtual&&(l=this.downNodes.get(s)[0]).isVirtual)for(o=a+1;r.length>o;++o)(i=r[o]).isVirtual&&(u=this.downNodes.get(i)[0]).isVirtual&&l.gridPosition>u.gridPosition&&(d=l.gridPosition,l.gridPosition=u.gridPosition,u.gridPosition=d,p=l.layerIndex,f=u.layerIndex,this.layers[n+1][p]=u,this.layers[n+1][f]=l,l.layerIndex=f,u.layerIndex=p);for(g=this._getLeftWing(),m=this._getRightWing(),v=this.placeLeftToRight(g),_=this.placeRightToLeft(m),y=new c,h.forEach(this.graph.nodes,function(e){y.set(e,(v.get(e)+_.get(e))/2)}),b=new c,w=new c,n=0;this.layers.length>n;++n)for(r=this.layers[n],k=-1,o=0;r.length>o;++o)i=r[o],b.set(i,0),w.set(i,!1),i.isVirtual&&(-1===k?k=o:k===o-1?k=o:(b.set(r[k],0),y.get(i)-y.get(r[k])===this.getMinDist(r[k],i)?w.set(r[k],!0):w.set(r[k],!1),k=o));for(x=[1,-1],h.forEach(x,function(e){var n,i,r,o,a,s,l;for(n=1===e?0:this.layers.length-1;n>=0&&this.layers.length>n;n+=e){if(i=this.layers[n],o=null,a=null,-1!==(r=this._firstVirtualNode(i)))for(o=i[r],a=[],t=0;r>t;t++)a.push(i[t]);else o=null,a=i;if(a.length>0){for(this._sequencer(y,null,o,e,a),t=0;a.length-1>t;++t)this.setMinDist(a[t],a[t+1],y.get(a[t+1])-y.get(a[t]));o&&this.setMinDist(a[a.length-1],o,y.get(o)-y.get(a[a.length-1]))}for(;o;){if(s=this.nextVirtualNode(i,o)){if(b.get(o)===e){for(r=o.layerIndex,l=s.layerIndex,a=[],t=r+1;l>t;t++)a.push(i[t]);a.length>0&&this._sequencer(y,o,s,e,a),w.set(o,!0)}}else{for(r=o.layerIndex,a=[],t=r+1;i.length>t;t++)a.push(i[t]);if(a.length>0){for(this._sequencer(y,o,null,e,a),t=0;a.length-1>t;++t)this.setMinDist(a[t],a[t+1],y.get(a[t+1])-y.get(a[t]));this.setMinDist(o,a[0],y.get(a[0])-y.get(o))}}o=s}this.adjustDirections(n,e,b,w)}},this),C=this._isIncreasingLayout()?0:this.layers.length-1,T=function(e,t){return t._isIncreasingLayout()?t.layers.length>e:e>=0},S=this._isIncreasingLayout()?1:-1,D=0,t=C;T(t,this);t+=S){for(A=e(r=this.layers[t],this),o=0;r.length>o;++o)i=r[o],this._isVerticalLayout()?(i.x=y.get(i),i.y=D+A/2):(i.x=D+A/2,i.y=y.get(i));D+=this.options.layerSeparation+A}},adjustDirections:function(e,t,n,i){var r,o,a,s,l,c,u,d,h,p,f,g,m,v;if(!(0>e+t||e+t>=this.layers.length))for(r=null,o=null,a=this.layers[e+t],s=0;a.length>s;++s)if((l=a[s]).isVirtual&&(c=this.getNeighborOnLayer(l,e)).isVirtual){if(r){for(u=i.get(o),d=this.layers[e],h=o.layerIndex,p=c.layerIndex,f=h+1;p>f;++f)d[f].isVirtual&&(u=u&&i.get(d[f]));if(u)for(n.set(r,t),g=r.layerIndex,m=l.layerIndex,v=g+1;m>v;++v)a[v].isVirtual&&n.set(a[v],t)}r=l,o=c}},getNeighborOnLayer:function(e,t){var n=this.upNodes.get(e)[0];return n.layer===t?n:(n=this.downNodes.get(e)[0]).layer===t?n:null},_sequencer:function(e,t,n,i,r){if(1===r.length&&this._sequenceSingle(e,t,n,i,r[0]),r.length>1){var o=r.length,a=this.intDiv(o,2);this._sequencer(e,t,n,i,r.slice(0,a)),this._sequencer(e,t,n,i,r.slice(a)),this.combineSequences(e,t,n,i,r)}},_sequenceSingle:function(e,t,n,i,r){var o=-1===i?this.downNodes.get(r):this.upNodes.get(r),a=o.length;0!==a&&(a%2==1?e.set(r,e.get(o[this.intDiv(a,2)])):e.set(r,(e.get(o[this.intDiv(a,2)-1])+e.get(o[this.intDiv(a,2)]))/2),t&&e.set(r,Math.max(e.get(r),e.get(t)+this.getMinDist(t,r))),n&&e.set(r,Math.min(e.get(r),e.get(n)-this.getMinDist(r,n))))},combineSequences:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,p,f,g=r.length,m=this.intDiv(g,2),v=[];for(o=0;m>o;++o){for(a=0,l=-1===i?this.downNodes.get(r[o]):this.upNodes.get(r[o]),s=0;l.length>s;++s)c=l[s],e.get(c)>=e.get(r[o])?a++:(a--,v.push({k:e.get(c)+this.getMinDist(r[o],r[m-1]),v:2}));v.push({k:e.get(r[o])+this.getMinDist(r[o],r[m-1]),v:a})}for(t&&v.push({k:e.get(t)+this.getMinDist(t,r[m-1]),v:Number.MAX_VALUE}),v.sort(this._positionDescendingComparer),d=[],o=m;g>o;++o){for(a=0,l=-1===i?this.downNodes.get(r[o]):this.upNodes.get(r[o]),s=0;l.length>s;++s)c=l[s],e.get(c)<=e.get(r[o])?a++:(a--,d.push({k:e.get(c)-this.getMinDist(r[o],r[m]),v:2}));d.push({k:e.get(r[o])-this.getMinDist(r[o],r[m]),v:a})}for(n&&d.push({k:e.get(n)-this.getMinDist(n,r[m]),v:Number.MAX_VALUE}),d.sort(this._positionAscendingComparer),h=0,p=0,f=this.getMinDist(r[m-1],r[m]);e.get(r[m])-e.get(r[m-1])<f;)if(p>h){if(0===v.length){e.set(r[m-1],e.get(r[m])-f);break}h+=(u=v.shift()).v,e.set(r[m-1],u.k),e.set(r[m-1],Math.max(e.get(r[m-1]),e.get(r[m])-f))}else{if(0===d.length){e.set(r[m],e.get(r[m-1])+f);break}p+=(u=d.shift()).v,e.set(r[m],u.k),e.set(r[m],Math.min(e.get(r[m]),e.get(r[m-1])+f))}for(o=m-2;o>=0;o--)e.set(r[o],Math.min(e.get(r[o]),e.get(r[m-1])-this.getMinDist(r[o],r[m-1])));for(o=m+1;g>o;o++)e.set(r[o],Math.max(e.get(r[o]),e.get(r[m])+this.getMinDist(r[o],r[m])))},placeLeft:function(e,t,n){var i=Number.NEGATIVE_INFINITY;h.forEach(this._getComposite(e),function(e){var r=this.leftSibling(e);r&&this.nodeLeftClass.get(r)===this.nodeLeftClass.get(e)&&(t.containsKey(r)||this.placeLeft(r,t,n),i=Math.max(i,t.get(r)+this.getMinDist(r,e)))},this),i===Number.NEGATIVE_INFINITY&&(i=0),h.forEach(this._getComposite(e),function(e){t.set(e,i)})},placeRight:function(e,t,n){var i=Number.POSITIVE_INFINITY;h.forEach(this._getComposite(e),function(e){var r=this.rightSibling(e);r&&this.nodeRightClass.get(r)===this.nodeRightClass.get(e)&&(t.containsKey(r)||this.placeRight(r,t,n),i=Math.min(i,t.get(r)-this.getMinDist(e,r)))},this),i===Number.POSITIVE_INFINITY&&(i=0),h.forEach(this._getComposite(e),function(e){t.set(e,i)})},leftSibling:function(e){var t=this.layers[e.layer],n=e.layerIndex;return 0===n?null:t[n-1]},rightSibling:function(e){var t=this.layers[e.layer],n=e.layerIndex;return n===t.length-1?null:t[n+1]},_getComposite:function(e){return e.isVirtual?this._nodesInLink(e):[e]},arrangeNodes:function(){var e,t,n,i,r,o,a;for(t=0;this.layers.length>t;t++)for(i=this.layers[t],n=0;i.length>n;n++)(r=i[n]).upstreamPriority=r.upstreamLinkCount,r.downstreamPriority=r.downstreamLinkCount;for(o=0;2>o;o++){for(e=this.layers.length-1;e>=1;e--)this.layoutLayer(!1,e);for(e=0;this.layers.length-1>e;e++)this.layoutLayer(!0,e)}for(a=Number.MAX_VALUE,t=0;this.layers.length>t;t++)for(i=this.layers[t],n=0;i.length>n;n++)r=i[n],a=Math.min(a,r.gridPosition);if(0>a)for(t=0;this.layers.length>t;t++)for(i=this.layers[t],n=0;i.length>n;n++)(r=i[n]).gridPosition=r.gridPosition-a},layoutLayer:function(e,t){var n,i,r,o;for(i=e?this.layers[n=t+1]:this.layers[n=t-1],r=[],o=0;i.length>o;o++)r.push(i[o]);r.sort(function(e,t){var n=(e.upstreamPriority+e.downstreamPriority)/2,i=(t.upstreamPriority+t.downstreamPriority)/2;return Math.abs(n-i)<1e-4?0:i>n?1:-1}),h.forEach(r,function(e){var t=e.gridPosition,n=this.calcBaryCenter(e),r=(e.upstreamPriority+e.downstreamPriority)/2;if(!(Math.abs(t-n)<1e-4||Math.abs(t-n)<.2501))if(n>t)for(;n>t&&this.moveRight(e,i,r);)t=e.gridPosition;else for(;t>n&&this.moveLeft(e,i,r);)t=e.gridPosition},this),n>0&&this.calcDownData(n-1),this.layers.length-1>n&&this.calcUpData(n+1)},moveRight:function(e,t,n){var i,r,o=h.indexOf(t,e);return o===t.length-1?(e.gridPosition=e.gridPosition+.5,!0):(r=((i=t[o+1]).upstreamPriority+i.downstreamPriority)/2,i.gridPosition>e.gridPosition+1?(e.gridPosition=e.gridPosition+.5,!0):!(r>n||Math.abs(r-n)<1e-4||!this.moveRight(i,t,n)||(e.gridPosition=e.gridPosition+.5,0)))},moveLeft:function(e,t,n){var i,r,o=h.indexOf(t,e);return 0===o?(e.gridPosition=e.gridPosition-.5,!0):(r=((i=t[o-1]).upstreamPriority+i.downstreamPriority)/2,e.gridPosition-1>i.gridPosition?(e.gridPosition=e.gridPosition-.5,!0):!(r>n||Math.abs(r-n)<1e-4||!this.moveLeft(i,t,n)||(e.gridPosition=e.gridPosition-.5,0)))},mapVirtualNode:function(e,t){this.nodeToLinkMap.set(e,t),this.linkToNodeMap.containsKey(t)||this.linkToNodeMap.set(t,[]),this.linkToNodeMap.get(t).push(e)},_nodesInLink:function(e){return this.linkToNodeMap.get(this.nodeToLinkMap.get(e))},_dummify:function(){var e,t,n,i,a,s,l,u,d,p,f,g,m,v,_,y,b,w;for(this.linkToNodeMap=new c,this.nodeToLinkMap=new c,d=this.graph.links.slice(0),u=0;d.length>u;u++){if(f=(p=d[u]).source,g=p.target,m=f.layer,v=g.layer,_=f.gridPosition,b=((y=g.gridPosition)-_)/Math.abs(v-m),w=f,m-v>1){for(l=m-1;l>v;l--){for((n=new r).x=f.x,n.y=f.y,n.width=f.width/100,n.height=f.height/100,(t=(l-v)*b+_)>(e=this.layers[l]).length&&(t=e.length),_>=this.layers[m].length-1&&y>=this.layers[v].length-1?t=e.length:0===_&&0===y&&(t=0),n.layer=l,n.uBaryCenter=0,n.dBaryCenter=0,n.upstreamLinkCount=0,n.downstreamLinkCount=0,n.gridPosition=t,n.isVirtual=!0,h.insert(e,n,t),a=t+1;e.length>a;a++)(i=e[a]).gridPosition=i.gridPosition+1;(s=new o(w,n)).depthOfDumminess=0,w=n,this.graph.nodes.push(n),this.graph.addLink(s),n.index=this.graph.nodes.length-1,this.mapVirtualNode(n,p)}p.changeSource(w),p.depthOfDumminess=m-v-1}if(-1>m-v){for(l=m+1;v>l;l++){for((n=new r).x=f.x,n.y=f.y,n.width=f.width/100,n.height=f.height/100,(t=(l-m)*b+_)>(e=this.layers[l]).length&&(t=e.length),_>=this.layers[m].length-1&&y>=this.layers[v].length-1?t=e.length:0===_&&0===y&&(t=0),n.layer=l,n.uBaryCenter=0,n.dBaryCenter=0,n.upstreamLinkCount=0,n.downstreamLinkCount=0,n.gridPosition=t,n.isVirtual=!0,t&=t,h.insert(e,n,t),a=t+1;e.length>a;a++)(i=e[a]).gridPosition=i.gridPosition+1;(s=new o(w,n)).depthOfDumminess=0,w=n,this.graph.nodes.push(n),this.graph.addLink(s),n.index=this.graph.nodes.length-1,this.mapVirtualNode(n,p)}p.changeSource(w),p.depthOfDumminess=v-m-1}}},_dedummify:function(){for(var e,t,n,i,r,o,a,s=!0;s;)for(s=!1,e=0;this.graph.links.length>e;e++)if(0!==(t=this.graph.links[e]).depthOfDumminess){for((n=[]).unshift({x:t.target.x,y:t.target.y}),n.unshift({x:t.source.x,y:t.source.y}),i=t,r=t.depthOfDumminess,o=0;r>o;o++)a=i.source.incoming[0],n.unshift({x:a.source.x,y:a.source.y}),i=a;t.changeSource(i.source),t.depthOfDumminess=0,n.length>2?(n.splice(0,1),n.splice(n.length-1),t.points=n):t.points=[],s=!0;break}},_optimizeCrossings:function(){for(var e,t=-1,n=0;0!==t&&!(n++>3);){for(t=0,e=this.layers.length-1;e>=1;e--)t+=this.optimizeLayerCrossings(!1,e);for(e=0;this.layers.length-1>e;e++)t+=this.optimizeLayerCrossings(!0,e)}},calcUpData:function(e){var t,n,i,r,o,a,s,l,c;if(0!==e){for(t=this.layers[e],o=new u,a=this.layers[e-1],n=0;a.length>n;n++)o.add(a[n]);for(n=0;t.length>n;n++){for(s=t[n],l=0,c=0,i=0;s.incoming.length>i;i++)r=s.incoming[i],o.contains(r.source)&&(c++,l+=r.source.gridPosition);for(i=0;s.outgoing.length>i;i++)r=s.outgoing[i],o.contains(r.target)&&(c++,l+=r.target.gridPosition);c>0?(s.uBaryCenter=l/c,s.upstreamLinkCount=c):(s.uBaryCenter=n,s.upstreamLinkCount=0)}}},calcDownData:function(e){var t,n,i,r,o,a,s,l,c;if(e!==this.layers.length-1){for(t=this.layers[e],o=new u,a=this.layers[e+1],n=0;a.length>n;n++)o.add(a[n]);for(n=0;t.length>n;n++){for(s=t[n],l=0,c=0,i=0;s.incoming.length>i;i++)r=s.incoming[i],o.contains(r.source)&&(c++,l+=r.source.gridPosition);for(i=0;s.outgoing.length>i;i++)r=s.outgoing[i],o.contains(r.target)&&(c++,l+=r.target.gridPosition);c>0?(s.dBaryCenter=l/c,s.downstreamLinkCount=c):(s.dBaryCenter=n,s.downstreamLinkCount=0)}}},optimizeLayerCrossings:function(e,t){var n,i,r,o,a,s,l;for(r=(i=e?this.layers[n=t+1]:this.layers[n=t-1]).slice(0),e?this.calcUpData(n):this.calcDownData(n),o=this,i.sort(function(e,t){var n,i=o.calcBaryCenter(e),r=o.calcBaryCenter(t);return Math.abs(i-r)<1e-4?e.degree()===t.degree()?o.compareByIndex(e,t):e.degree()<t.degree()?1:-1:(n=1e3*(r-i))>0?-1:0>n?1:o.compareByIndex(e,t)}),s=0,a=0;i.length>a;a++)i[a]!==r[a]&&s++;if(s>0)for(l=0,a=0;i.length>a;a++)i[a].gridPosition=l++;return s},_swapPairs:function(){for(var e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,g,m=this.options.layeredIterations,v=0;!(v++>m);)for(t=v%4==1,n=(e=1>=v%4)?0:this.layers.length-1;e?this.layers.length-1>=n:n>=0;n+=e?1:-1){for(i=this.layers[n],r=!1,o=!0,a=0,s=0;i.length-1>s;s++)l=0,c=0,u=0,o?(0!==n&&(l=this.countLinksCrossingBetweenTwoLayers(n-1,n)),n!==this.layers.length-1&&(c=this.countLinksCrossingBetweenTwoLayers(n,n+1)),e?l*=2:c*=2,u=l+c):u=a,0!==u&&(d=i[s],h=i[s+1],p=d.gridPosition,f=h.gridPosition,i[s]=h,i[s+1]=d,d.gridPosition=f,h.gridPosition=p,l=0,0!==n&&(l=this.countLinksCrossingBetweenTwoLayers(n-1,n)),c=0,n!==this.layers.length-1&&(c=this.countLinksCrossingBetweenTwoLayers(n,n+1)),e?l*=2:c*=2,g=l+c,(t?g>=u:g>u)?(d=i[s],h=i[s+1],p=d.gridPosition,f=h.gridPosition,i[s]=h,i[s+1]=d,d.gridPosition=f,h.gridPosition=p,a=u,o=!1):(r=!0,o=!0));r&&(n!==this.layers.length-1&&this.calcUpData(n+1),0!==n&&this.calcDownData(n-1))}},countLinksCrossingBetweenTwoLayers:function(e,t){var n,i,r,o,a,s,l,c,d,p,f,g,m,v,_,y,b,w,k=0,x=new u,C=this.layers[e];for(n=0;C.length>n;n++)x.add(C[n]);for(i=new u,r=this.layers[t],n=0;r.length>n;n++)i.add(r[n]);for(o=new u,a=[],s=[],x.forEach(function(e){h.addRange(s,e.incoming),h.addRange(s,e.outgoing)}),l=0;s.length>l;l++)c=s[l],x.contains(c.source)&&i.contains(c.target)?(o.add(c),a.push(c)):i.contains(c.source)&&x.contains(c.target)&&a.push(c);for(d=0;a.length>d;d++)for(p=a[d],f=0;a.length>f;f++)d!==f&&(g=a[f],o.contains(p)?(m=p.source,v=p.target):(m=p.target,v=p.source),o.contains(g)?(_=g.source,y=g.target):(_=g.target,y=g.source),b=m.gridPosition,w=v.gridPosition,0>(b-_.gridPosition)*(w-y.gridPosition)&&k++);return k/2},calcBaryCenter:function(e){var t=e.upstreamLinkCount,n=e.downstreamLinkCount,i=e.uBaryCenter,r=e.dBaryCenter;return t>0&&n>0?(i+r)/2:t>0?i:n>0?r:0},_gridPositionComparer:function(e,t){return t.gridPosition>e.gridPosition?-1:e.gridPosition>t.gridPosition?1:0},_positionAscendingComparer:function(e,t){return t.k>e.k?-1:e.k>t.k?1:0},_positionDescendingComparer:function(e,t){return t.k>e.k?1:e.k>t.k?-1:0},_firstVirtualNode:function(e){for(var t=0;e.length>t;t++)if(e[t].isVirtual)return t;return-1},compareByIndex:function(e,t){var n=e.index,i=t.index;return i>n?1:n>i?-1:0},intDiv:function(e,t){return(e-e%t)/t},nextVirtualNode:function(e,t){var n;for(n=t.layerIndex+1;e.length>n;++n)if(e[n].isVirtual)return e[n];return null}}),C=t.Class.extend({init:function(e,t){if(h.isUndefined(e))throw"No diagram given";this.diagram=e,this.nodeMap=new c,this.linkMap=new c,this.capture(t||e)},capture:function(e){var t,i,r,o,a,s,c,u,d;if(e instanceof n.Graph){for(o=0;e.nodes.length>o;o++)r=(t=e.nodes[o]).associatedShape,this.nodeMap.set(r.visual.id,new l(t.x,t.y,t.width,t.height));for(o=0;e.links.length>o;o++)a=(s=e.links[o]).associatedConnection,this.linkMap.set(a.visual.id,s.points())}else if(e instanceof Array)for(i=e,o=0;i.length>o;o++)(r=(t=i[o]).associatedShape)&&this.nodeMap.set(r.visual.id,new l(t.x,t.y,t.width,t.height));else if(e.hasOwnProperty("links")&&e.hasOwnProperty("nodes")){for(i=e.nodes,c=e.links,o=0;i.length>o;o++)(r=(t=i[o]).associatedShape)&&this.nodeMap.set(r.visual.id,new l(t.x,t.y,t.width,t.height));for(o=0;c.length>o;o++)(a=(s=c[o]).associatedConnection)&&this.linkMap.set(a.visual.id,s.points)}else{for(u=this.diagram.shapes,d=this.diagram.connections,o=0;u.length>o;o++)r=u[o],this.nodeMap.set(r.visual.id,r.bounds());for(o=0;d.length>o;o++)a=d[o],this.linkMap.set(a.visual.id,a.points())}}});a(n,{init:function(e){t.init(e,n.ui)},SpringLayout:b,TreeLayout:k,GraphAdapter:y,LayeredLayout:x,LayoutBase:_,LayoutState:C})}(window.kendo.jQuery),function(e,t){function n(e){return e.options.name.toLowerCase()===be.toLowerCase()}function i(e,t){var i,r,o,a,s=we,l=t.connectors;for(r=0;l.length>r;r++)n(o=l[r])||s>(a=e.distanceTo(o.position()))&&(s=a,i=o);return i}function r(e,t){var n,i,r,o=[],a=e.drawingContainer().children,s=a.length;for(n=0;t.length>n;n++)for(i=t[n],r=0;s>r;r++)if(a[r]==i.drawingContainer()){o.push(r);break}return o}function o(e){var t={};return ce((e=e||{}).text)&&null!==e.text&&(t.text=e.text),ce(e.x)&&null!==e.x&&(t.x=e.x),ce(e.y)&&null!==e.y&&(t.y=e.y),ce(e.width)&&null!==e.width&&(t.width=e.width),ce(e.height)&&null!==e.height&&(t.height=e.height),ce(e.type)&&null!==e.type&&(t.type=e.type),t}function a(t,n){var i,r=this.dataSource.reader.model;r&&(i=r.fn.fields.text?"text":r.idField,e("<input name='"+n.field+"' />").appendTo(t).kendoDropDownList({dataValueField:r.idField,dataTextField:i,dataSource:this.dataSource.data().toJSON(),optionLabel:" ",valuePrimitive:!0}))}function s(e){this.dataItem=e,this.callbacks=[]}function l(){this.items={}}function c(e){var t=e;return e instanceof kendo.data.Model&&((t=e.toJSON())[e.idField]=e._defaultId),t}function u(e){var t,n,i=[],r=[];for(n=0;e.length>n;n++)(t=e[n])instanceof m?r.push(t):i.push(t);return{shapes:r,connections:i}}function d(e,t){return e.reader.model?new e.reader.model(t):new kendo.data.ObservableObject(t)}function h(e,t,n){var i,r;for(r=0;n.length>r;r++)i=n[r],t&&!ce(t[i])&&(t[i]=e[i])}var p,f,g,m,v,_,y,b,w,k,x,C,T=kendo.dataviz,S=kendo.drawing,D=kendo.geometry,A=T.diagram,M=kendo.ui.Widget,E=kendo.Class,I=e.proxy,R=kendo.deepExtend,P=e.extend,L=kendo.data.HierarchicalDataSource,F=A.Canvas,B=A.Group,z=A.Rectangle,H=A.Circle,N=A.CompositeTransform,O=A.Rect,V=A.Path,U=A.DeleteShapeUnit,W=A.DeleteConnectionUnit,j=A.TextBlock,q=A.Image,G=A.Point,$=A.Intersect,Y=A.ConnectionEditAdorner,Q=A.UndoRedoService,X=A.ToolService,K=A.Selector,Z=A.ResizingAdorner,J=A.ConnectorsAdorner,ee=A.Cursors,te=A.Utils,ne=kendo.Observable,ie=A.ToBackUnit,re=A.ToFrontUnit,oe=A.PolylineRouter,ae=A.CascadingRouter,se=te.isUndefined,le=te.isDefined,ce=kendo.util.defined,ue=e.isArray,de=kendo.isFunction,he=te.isString,pe=e.isPlainObject,fe=Math,ge=".kendoDiagram",me="cascading",ve="itemBoundsChange",_e="change",ye="click",be="Auto",we=9007199254740992,ke="itemRotate",xe="zoomStart",Ce="zoomEnd",Te=Number.MAX_VALUE,Se=-Number.MAX_VALUE,De="transformed",Ae="rotated";A.DefaultConnectors=[{name:"Top"},{name:"Bottom"},{name:"Left"},{name:"Right"},{name:be,position:function(e){return e.getPosition("center")}}],p={cancel:{text:"Cancel",imageClass:"k-cancel",className:"k-diagram-cancel",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-diagram-update",iconClass:"k-icon"}},A.shapeDefaults=function(e){var t={type:"rectangle",path:"",autoSize:!0,visual:null,x:0,y:0,minWidth:20,minHeight:20,width:100,height:100,hover:{},editable:{connect:!0,tools:[]},connectors:A.DefaultConnectors,rotation:{angle:0}};return te.simpleExtend(t,e),t},f=ne.extend({init:function(e){var t=this;t.dataItem=(e||{}).dataItem,ne.fn.init.call(t),t.options=R({id:A.randomId()},t.options,e),t.isSelected=!1,t.visual=new B({id:t.options.id,autoSize:t.options.autoSize}),t._template()},options:{hover:{},cursor:ee.grip,content:{align:"center middle"},selectable:!0,serializable:!0,enable:!0},_getCursor:function(e){return this.adorner?this.adorner._getCursor(e):this.options.cursor},visible:function(e){return se(e)?this.visual.visible():(this.visual.visible(e),t)},bounds:function(){},refresh:function(){this.visual.redraw()},position:function(e){this.options.x=e.x,this.options.y=e.y,this.visual.position(e)},toString:function(){return this.options.id},serialize:function(){var e=R({},{options:this.options});return this.dataItem&&(e.dataItem=""+this.dataItem),e},_content:function(e){var n,i,r;return e!==t&&(n=this.options,this.bounds(),A.Utils.isString(e)?n.content.text=e:R(n.content,e),i=n.content,!(r=this._contentVisual)&&i.text?(this._contentVisual=new j(i),this._contentVisual._includeInBBox=!1,this.visual.append(this._contentVisual)):r&&r.redraw(i)),this.options.content.text},_hitTest:function(e){var t=this.bounds();return this.visible()&&t.contains(e)&&this.options.enable},_template:function(){var e,t,n=this;n.options.content.template&&(e=n.dataItem||{},t=kendo.template(n.options.content.template,{paramName:"dataItem"}),n.options.content.text=t(e))},_canSelect:function(){return!1!==this.options.selectable},toJSON:function(){return{id:this.options.id}}}),(g=E.extend({init:function(e,t){this.options=R({},this.options,t),this.connections=[],this.shape=e},options:{width:7,height:7,fill:{color:"Yellow"},hover:{}},position:function(){return this.options.position?this.options.position(this.shape):this.shape.getPosition(this.options.name)},toJSON:function(){return{shapeId:""+this.shape,connector:this.options.name}}})).parse=function(e,t){var n,i,r=t.split(":"),o=r[0],a=r[1]||be;for(n=0;e.shapes.length>n;n++)if((i=e.shapes[n]).options.id==o)return i.getConnector(a.trim())},(m=f.extend({init:function(e,n){var i=this;f.fn.init.call(i,e),this.diagram=n,this.updateOptionsFromModel(),e=i.options,i.connectors=[],i.type=e.type,i.shapeVisual=m.createShapeVisual(i.options),i.visual.append(this.shapeVisual),i.updateBounds(),i.content(i.content()),i._createConnectors(),i.parentContainer=null,i.isContainer=!1,i.isCollapsed=!1,i.id=i.visual.id,e.hasOwnProperty("layout")&&e.layout!==t&&(i.layout=e.layout.bind(e))},options:A.shapeDefaults(),_setOptionsFromModel:function(e){var t=o(e||this.dataItem);this.options=R({},this.options,t),this.redrawVisual(),this.options.content&&(this._template(),this.content(this.options.content))},updateOptionsFromModel:function(e,t){var n,i;this.diagram&&this.diagram._isEditable&&(n=o(e||this.dataItem),e&&t?T.inArray(t,["x","y","width","height"])?((i=this.bounds())[t]=e[t],this.bounds(i)):(this.options.visual?this.redrawVisual():n.type&&(this.options=R({},this.options,n),this.redrawVisual()),this.options.content&&(this._template(),this.content(this.options.content))):this.options=R({},this.options,n))},redrawVisual:function(){this.visual.clear(),this._contentVisual=null,this.options.dataItem=this.dataItem,this.shapeVisual=m.createShapeVisual(this.options),this.visual.append(this.shapeVisual),this.updateBounds()},updateModel:function(e){var t,n,i=this.diagram;i&&i._isEditable&&(t=this._bounds,(n=this.dataItem)&&(i._suspendModelRefresh(),ce(n.x)&&t.x!==n.x&&n.set("x",t.x),ce(n.y)&&t.y!==n.y&&n.set("y",t.y),ce(n.width)&&t.width!==n.width&&n.set("width",t.width),ce(n.height)&&t.height!==n.height&&n.set("height",t.height),this.dataItem=n,i._resumeModelRefresh(),e&&i._syncShapeChanges()))},updateBounds:function(){var e=this.visual._measure(!0),t=this.options;this.bounds(new O(t.x,t.y,e.width,e.height)),this._rotate(),this._alignContent()},content:function(e){var t=this._content(e);return this._alignContent(),t},_alignContent:function(){var e,t,n,i,r,o=this.options.content||{},a=this._contentVisual;a&&o.align&&(e=this.visual._measure(),t=new A.RectAlign(e),n=a.drawingElement.bbox(null),i=new O(0,0,n.width(),n.height()),r=t.align(i,o.align),a.position(r.topLeft()))},_createConnectors:function(){var e,t,n=this.options,i=n.connectors.length,r=n.connectorDefaults;for(t=0;i>t;t++)e=new g(this,R({},r,n.connectors[t])),this.connectors.push(e)},bounds:function(e){var t,n;if(e)if(he(e))switch(e){case De:t=this._transformedBounds();break;case"absolute":t=this._transformedBounds(),n=this.diagram._pan,t.x+=n.x,t.y+=n.y;break;case Ae:t=this._rotatedBounds();break;default:t=this._bounds}else this._setBounds(e),this._triggerBoundsChange(),this.refreshConnections();else t=this._bounds;return t},_setBounds:function(e){var t=this.options,n=e.topLeft(),i=t.x=n.x,r=t.y=n.y,o=t.width=fe.max(e.width,t.minWidth),a=t.height=fe.max(e.height,t.minHeight);this._bounds=new O(i,r,o,a),this.visual.redraw({x:i,y:r,width:o,height:a})},position:function(e){return e?(this.bounds(new O(e.x,e.y,this._bounds.width,this._bounds.height)),t):this._bounds.topLeft()},clone:function(){var e=this.serialize();return e.options.id=A.randomId(),this.diagram&&this.diagram._isEditable&&ce(this.dataItem)&&(e.options.dataItem=c(this.dataItem)),new m(e.options)},select:function(e){var n,i,r=this.diagram;return se(e)&&(e=!0),this._canSelect()&&this.isSelected!=e?(n=[],i=[],this.isSelected=e,this.isSelected?(r._selectedItems.push(this),n.push(this)):(te.remove(r._selectedItems,this),i.push(this)),r._internalSelection||r._selectionChanged(n,i),!0):t},rotate:function(e,n,i){var r,o,a,s,l=this.visual.rotate();return e!==t&&(!1!==i&&this.diagram&&this.diagram.undoRedoService&&e!==l.angle&&this.diagram.undoRedoService.add(new A.RotateUnit(this.diagram._resizingAdorner,[this],[l.angle]),!1),r=this.bounds(),o=new G(r.width/2,r.height/2),n&&(a=e-l.angle,s=r.center().rotate(n,360-a).minus(o),this._rotationOffset=this._rotationOffset.plus(s.minus(r.topLeft())),this.position(s)),this.visual.rotate(e,o),this.options.rotation.angle=e,this.diagram&&this.diagram._connectorsAdorner&&this.diagram._connectorsAdorner.refresh(),this.refreshConnections(),this.diagram&&this.diagram.trigger(ke,{item:this})),l},connections:function(e){var t,n,i,r,o,a,s=[];for(t=0;this.connectors.length>t;t++)for(r=this.connectors[t].connections,n=0;r.length>n;n++)i=r[n],"out"==e?(o=i.source()).shape&&o.shape==this&&s.push(i):"in"==e?(a=i.target()).shape&&a.shape==this&&s.push(i):s.push(i);return s},refreshConnections:function(){e.each(this.connections(),function(){this.refresh()})},getConnector:function(e){var t,n;if(!he(e))return e instanceof G?i(e,this):this.connectors.length?this.connectors[0]:null;for(e=e.toLocaleLowerCase(),t=0;this.connectors.length>t;t++)if((n=this.connectors[t]).options.name.toLocaleLowerCase()==e)return n},getPosition:function(e){var t=this.bounds(),n=e.charAt(0).toLowerCase()+e.slice(1);return de(t[n])?this._transformPoint(t[n]()):t.center()},redraw:function(e){var t,n;e&&(t=this.options,this.shapeVisual.redraw(this._visualOptions(e)),this._diffNumericOptions(e,["width","height","x","y"])&&(this.bounds(new O(t.x,t.y,t.width,t.height)),n=!0),e.connectors&&(t.connectors=e.connectors,this._updateConnectors()),t=R(t,e),(e.rotation||n)&&this._rotate(),t.content&&this.content(t.content))},_updateConnectors:function(){var e,t,n,i,r=this.connections();for(this.connectors=[],this._createConnectors(),i=0;r.length>i;i++)t=(e=r[i]).source(),n=e.target(),t.shape&&t.shape===this?e.source(this.getConnector(t.options.name)||null):n.shape&&n.shape===this&&e.target(this.getConnector(n.options.name)||null),e.updateModel()},_diffNumericOptions:A.diffNumericOptions,_visualOptions:function(e){return{data:e.path,source:e.source,hover:e.hover,fill:e.fill,stroke:e.stroke,startCap:e.startCap,endCap:e.endCap}},_triggerBoundsChange:function(){this.diagram&&this.diagram.trigger(ve,{item:this,bounds:this._bounds.clone()})},_transformPoint:function(e){var t=this.rotate(),n=this.bounds().topLeft();return t.angle&&e.rotate(t.center().plus(n),360-t.angle),e},_transformedBounds:function(){var e=this.bounds(),t=e.topLeft(),n=e.bottomRight();return O.fromPoints(this.diagram.modelToView(t),this.diagram.modelToView(n))},_rotatedBounds:function(){var e=this.bounds().rotatedBounds(this.rotate().angle),t=e.topLeft(),n=e.bottomRight();return O.fromPoints(t,n)},_rotate:function(){var e=this.options.rotation;e&&e.angle&&this.rotate(e.angle),this._rotationOffset=new G},_hover:function(e){var t=this.options,n=t.hover,i=t.stroke,r=t.fill;e&&le(n.stroke)&&(i=R({},i,n.stroke)),e&&le(n.fill)&&(r=n.fill),this.shapeVisual.redraw({stroke:i,fill:r}),t.editable&&t.editable.connect&&this.diagram._showConnectors(this,e)},_hitTest:function(e){if(this.visible()){var t,n=this.bounds(),i=this.rotate().angle;if(e.isEmpty&&!e.isEmpty())return $.rects(e,n,i||0);if(t=e.clone().rotate(n.center(),i),n.contains(t))return this}},toJSON:function(){return{shapeId:this.options.id}}})).createShapeVisual=function(e){var t,n,i,r;return delete e.diagram,n=(t=R({},e,{x:0,y:0})).visual,i=(t.type+"").toLocaleLowerCase(),de(n)?r=n.call(this,t):t.path?(t.data=t.path,function(e){var t=e.drawingContainer().clippedBBox(null);(0!==t.origin.x||0!==t.origin.y)&&e.position(-t.origin.x,-t.origin.y)}(r=new V(t))):r="rectangle"==i?new z(t):"circle"==i?new H(t):"text"==i?new j(t):"image"==i?new q(t):new V(t),r},v=f.extend({init:function(e,t,n){var i=this;f.fn.init.call(i,n),this.updateOptionsFromModel(),this._initRouter(),i.path=new A.Polyline(i.options),i.path.fill("transparent"),i.visual.append(i.path),i._sourcePoint=i._targetPoint=new G,i.source(e),i.target(t),i.content(i.options.content),i.definers=[],ce(n)&&n.points&&i.points(n.points),i.refresh()},options:{hover:{stroke:{}},startCap:"none",endCap:"none",points:[],selectable:!0},_setOptionsFromModel:function(e){this.updateOptionsFromModel(e||this.dataItem)},updateOptionsFromModel:function(e){var t,n;this.diagram&&this.diagram._isEditable&&(t=this.diagram._dataMap,n=function(e){var t={};return ce((e=e||{}).text)&&null!==e.text&&(t.content=e.text),ce(e.type)&&null!==e.type&&(t.type=e.type),ce(e.from)&&null!==e.from&&(t.from=e.from),ce(e.fromX)&&null!==e.fromX&&(t.fromX=e.fromX),ce(e.fromY)&&null!==e.fromY&&(t.fromY=e.fromY),ce(e.to)&&null!==e.to&&(t.to=e.to),ce(e.toX)&&null!==e.toX&&(t.toX=e.toX),ce(e.toY)&&null!==e.toY&&(t.toY=e.toY),t}(e||this.dataItem),e?(ce(n.from)?this.source(t[n.from]):ce(n.fromX)&&ce(n.fromY)&&this.source(new G(n.fromX,n.fromY)),ce(n.to)?this.target(t[n.to]):ce(n.toX)&&ce(n.toY)&&this.target(new G(n.toX,n.toY)),ce(n.type)&&this.type()!==n.type&&(this.points([]),this.type(n.type)),this.dataItem=e,this._template(),this.redraw(this.options)):this.options=R({},n,this.options))},updateModel:function(e){if(this.diagram&&this.diagram._isEditable&&this.diagram.connectionsDataSource){var t=this.diagram.connectionsDataSource.getByUid(this.dataItem.uid);t&&(this.diagram._suspendModelRefresh(),ce(this.options.fromX)&&null!==this.options.fromX?(t.set("from",null),t.set("fromX",this.options.fromX),t.set("fromY",this.options.fromY)):(t.set("from",this.options.from),t.set("fromX",null),t.set("fromY",null)),ce(this.options.toX)&&null!==this.options.toX?(t.set("to",null),t.set("toX",this.options.toX),t.set("toY",this.options.toY)):(t.set("to",this.options.to),t.set("toX",null),t.set("toY",null)),ce(this.options.type)&&ce(t.type)&&t.set("type",this.options.type),this.dataItem=t,this.diagram._resumeModelRefresh(),e&&this.diagram._syncConnectionChanges())}},sourcePoint:function(){return this._resolvedSourceConnector?this._resolvedSourceConnector.position():this._sourcePoint},source:function(e,n){var i,r;if(le(e)){if((r=e instanceof m)&&!e.getConnector(be))return;n&&this.diagram&&this.diagram.undoRedoService.addCompositeItem(new A.ConnectionEditUnit(this,e)),e!==t&&(this.from=e),this._removeFromSourceConnector(),null===e?this.sourceConnector&&(this._sourcePoint=this._resolvedSourceConnector.position(),this._clearSourceConnector(),this._setFromOptions(null,this._sourcePoint)):e instanceof g?((i=e.shape.dataItem)&&this._setFromOptions(i.id),this.sourceConnector=e,this.sourceConnector.connections.push(this)):e instanceof G?(this._setFromOptions(null,e),this._sourcePoint=e,this.sourceConnector&&this._clearSourceConnector()):r&&((i=e.dataItem)&&this._setFromOptions(i.id),this.sourceConnector=e.getConnector(be),this.sourceConnector.connections.push(this)),this.refresh()}return this.sourceConnector?this.sourceConnector:this._sourcePoint},_setFromOptions:function(e,t){this.options.from=e,t?(this.options.fromX=t.x,this.options.fromY=t.y):(this.options.fromX=null,this.options.fromY=null)},sourceDefiner:function(e){if(!e)return this._sourceDefiner||(this._sourceDefiner=new A.PathDefiner(this.sourcePoint(),null,null)),this._sourceDefiner;if(!(e instanceof A.PathDefiner))throw"The sourceDefiner needs to be a PathDefiner.";e.left=null,this._sourceDefiner=e,this.source(e.point)},targetPoint:function(){return this._resolvedTargetConnector?this._resolvedTargetConnector.position():this._targetPoint},target:function(e,n){var i,r;if(le(e)){if((r=e instanceof m)&&!e.getConnector(be))return;n&&this.diagram&&this.diagram.undoRedoService.addCompositeItem(new A.ConnectionEditUnit(this,t,e)),e!==t&&(this.to=e),this._removeFromTargetConnector(),null===e?this.targetConnector&&(this._targetPoint=this._resolvedTargetConnector.position(),this._clearTargetConnector(),this._setToOptions(null,this._targetPoint)):e instanceof g?((i=e.shape.dataItem)&&this._setToOptions(i.id),this.targetConnector=e,this.targetConnector.connections.push(this)):e instanceof G?(this._setToOptions(null,e),this._targetPoint=e,this.targetConnector&&this._clearTargetConnector()):r&&((i=e.dataItem)&&this._setToOptions(i.id),this.targetConnector=e.getConnector(be),this.targetConnector.connections.push(this)),this.refresh()}return this.targetConnector?this.targetConnector:this._targetPoint},_setToOptions:function(e,t){this.options.to=e,t?(this.options.toX=t.x,this.options.toY=t.y):(this.options.toX=null,this.options.toY=null)},targetDefiner:function(e){if(!e)return this._targetDefiner||(this._targetDefiner=new A.PathDefiner(this.targetPoint(),null,null)),this._targetDefiner;if(!(e instanceof A.PathDefiner))throw"The sourceDefiner needs to be a PathDefiner.";e.right=null,this._targetDefiner=e,this.target(e.point)},_updateConnectors:function(){this._updateConnector(this.source(),"source"),this._updateConnector(this.target(),"target")},_updateConnector:function(e,t){var n,i,r,o,a=this,s=a.diagram;e instanceof g&&!s.getShapeById(e.shape.id)?(n=e.shape.dataItem,i=e.options.name,r=function(){var r=s._dataMap[n.id];e=r.getConnector(i),a[t](e,!1),a.updateModel()},s._dataMap[n.id]?r():(o=s._inactiveShapeItems.getByUid(n.uid))&&s._deferredConnectionUpdates.push(o.onActivate(r))):a[t](e,!1)},content:function(e){var t=this._content(e);return ce(e)&&this._alignContent(),t},_alignContent:function(){var e,t,n,i;this._contentVisual&&(e=this._bounds.topLeft(),t=this.sourcePoint().minus(e),n=this.targetPoint().minus(e),i=G.fn.middleOf(t,n),this._contentVisual.position(new G(i.x+e.x,i.y+e.y)))},select:function(e){var n,i,r=this.diagram;return this._canSelect()&&this.isSelected!==e?(this.isSelected=e,n=[],i=[],this.isSelected?(this.adorner=new Y(this,this.options.selection),r._adorn(this.adorner,!0),r._selectedItems.push(this),n.push(this)):this.adorner&&(r._adorn(this.adorner,!1),te.remove(r._selectedItems,this),this.adorner=t,i.push(this)),this.adorner&&this.adorner.refresh(),r._internalSelection||r._selectionChanged(n,i),!0):t},bounds:function(e){return!e||he(e)?this._bounds:(this._bounds=e,t)},type:function(e){var n=this.options;return e?(e!==n.type&&(n.type=e,this._initRouter(),this.refresh()),t):n.type},_initRouter:function(){var e=(this.options.type||"").toLowerCase();this._router=e==me?new ae(this):new oe(this)},points:function(e){var t,n,i,r;if(!e){if(i=[],le(this.definers))for(r=0;this.definers.length>r;r++)i.push(this.definers[r].point);return i}for(this.definers=[],t=0;e.length>t;t++)if((n=e[t])instanceof A.Point)this.definers.push(new A.PathDefiner(n));else{if(!n.hasOwnProperty("x")||!n.hasOwnProperty("y"))throw"A Connection point needs to be a Point or an object with x and y properties.";this.definers.push(new A.PathDefiner(new G(n.x,n.y)))}},allPoints:function(){var e,t=[this.sourcePoint()];if(this.definers)for(e=0;this.definers.length>e;e++)t.push(this.definers[e].point);return t.push(this.targetPoint()),t},refresh:function(){this._resolveConnectors(),this._refreshPath(),this._alignContent(),this.adorner&&this.adorner.refresh()},_resolveConnectors:function(){var e,t,r,o,a=this,s=a.source(),l=a.target();s instanceof G?e=s:s instanceof g&&(n(s)?r=s.shape:(a._resolvedSourceConnector=s,e=s.position())),l instanceof G?t=l:l instanceof g&&(n(l)?o=l.shape:(a._resolvedTargetConnector=l,t=l.position())),e?o&&(a._resolvedTargetConnector=i(e,o)):r&&(t?a._resolvedSourceConnector=i(t,r):o&&this._resolveAutoConnectors(r,o))},_resolveAutoConnectors:function(e,t){var i,r,o,a,s,l,c,u,d,h,p,f,g=we,m=we,v=e.connectors;for(h=0;v.length>h;h++)if(!n(u=v[h]))for(a=u.position(),i=t.connectors,p=0;i.length>p;p++)n(d=i[p])||(s=d.position(),g>(f=fe.round(a.distanceTo(s)))&&this.diagram&&this._testRoutePoints(a,s,u,d)&&(g=f,r=u,o=d),m>f&&(l=u,c=d,m=f));r&&(l=r,c=o),this._resolvedSourceConnector=l,this._resolvedTargetConnector=c},_testRoutePoints:function(e,t,n,i){var r,o,a,s,l,c=this._router,u=!0;if(c instanceof ae)for((r=c.routePoints(e,t,n,i)).unshift(e),r.push(t),l=1;r.length>l;l++)if(o=r[l-1],a=r[l],(s=new O(fe.min(o.x,a.x),fe.min(o.y,a.y),fe.abs(o.x-a.x),fe.abs(o.y-a.y))).width>0&&(s.x++,s.width-=2),s.height>0&&(s.y++,s.height-=2),!s.isEmpty()&&this.diagram._shapesQuadTree.hitTestRect(s)){u=!1;break}return u},redraw:function(e){if(e){this.options=R({},this.options,e);var t=this.options.points;ce(t)&&t.length>0&&(this.points(t),this._refreshPath()),(e&&e.content||e.text)&&this.content(e.content),this.path.redraw({fill:e.fill,stroke:e.stroke,startCap:e.startCap,endCap:e.endCap})}},clone:function(){var e=this.serialize();return this.diagram&&this.diagram._isEditable&&ce(this.dataItem)&&(e.options.dataItem=c(this.dataItem)),new v(this.from,this.to,e.options)},serialize:function(){var e=this.from.toJSON?this.from.toJSON:""+this.from,t=this.to.toJSON?this.to.toJSON:""+this.to,n=R({},{options:this.options,from:e,to:t});return ce(this.dataItem)&&(n.dataItem=""+this.dataItem),n.options.points=this.points(),n},_hitTest:function(e){if(this.visible()){var t=new G(e.x,e.y),n=this.sourcePoint(),i=this.targetPoint();if(e.isEmpty&&!e.isEmpty()&&e.contains(n)&&e.contains(i))return this;if(this._router.hitTest(t))return this}},_hover:function(e){var t=(this.options.stroke||{}).color;e&&le(this.options.hover.stroke.color)&&(t=this.options.hover.stroke.color),this.path.redraw({stroke:{color:t}})},_refreshPath:function(){ce(this.path)&&(this._drawPath(),this.bounds(this._router.getBounds()))},_drawPath:function(){var e,t,n;this._router&&this._router.route(),e=this.sourcePoint(),t=this.targetPoint(),n=this.points(),this.path.redraw({points:[e].concat(n,[t])})},_clearSourceConnector:function(){te.remove(this.sourceConnector.connections,this),this.sourceConnector=t,this._resolvedSourceConnector=t},_clearTargetConnector:function(){te.remove(this.targetConnector.connections,this),this.targetConnector=t,this._resolvedTargetConnector=t},_removeFromSourceConnector:function(){this.sourceConnector&&te.remove(this.sourceConnector.connections,this)},_removeFromTargetConnector:function(){this.targetConnector&&te.remove(this.targetConnector.connections,this)}}),_=M.extend({init:function(e,t){var n=this;kendo.destroy(e),M.fn.init.call(n,e,t),n._initTheme(),n._initElements(),n._extendLayoutOptions(n.options),n._initDefaults(t),n._initCanvas(),n.mainLayer=new B({id:"main-layer"}),n.canvas.append(n.mainLayer),n._shapesQuadTree=new C(n),n._pan=new G,n._adorners=[],n.adornerLayer=new B({id:"adorner-layer"}),n.canvas.append(n.adornerLayer),n._createHandlers(),n._initialize(),n._fetchFreshData(),n._createGlobalToolBar(),n._resizingAdorner=new Z(n,{editable:n.options.editable}),n._connectorsAdorner=new J(n),n._adorn(n._resizingAdorner,!0),n._adorn(n._connectorsAdorner,!0),n.selector=new K(n),n._clipboard=[],n.pauseMouseHandlers=!1,n._createShapes(),n._createConnections(),n.options.layout&&n.layout(n.options.layout),n.zoom(n.options.zoom),n.canvas.draw()},options:{name:"Diagram",theme:"default",layout:"",zoomRate:.1,zoom:1,zoomMin:0,zoomMax:2,dataSource:{},draggable:!0,template:"",autoBind:!0,editable:{rotate:{},resize:{},text:!0,tools:[],drag:{snap:{size:10,angle:10}},remove:!0},pannable:{key:"ctrl"},selectable:{key:"none"},tooltip:{enabled:!0,format:"{0}"},copy:{enabled:!0,offsetX:20,offsetY:20},shapeDefaults:A.shapeDefaults({undoable:!0}),connectionDefaults:{editable:{tools:[]},type:me},shapes:[],connections:[]},events:[Ce,xe,"pan","select",ke,ve,_e,ye,"mouseEnter","mouseLeave","toolBarClick","save","cancel","edit","remove","add","dataBound","dragStart","drag","dragEnd"],_createGlobalToolBar:function(){var e,t=this.options.editable;t&&(e=t.tools,this._isEditable&&0===e.length&&(e=["createShape","undo","redo","rotateClockwise","rotateAnticlockwise"]),e&&e.length&&(this.toolBar=new y(this,{tools:e||{},click:I(this._toolBarClick,this),modal:!1}),this.toolBar.element.css({textAlign:"left"}),this.element.prepend(this.toolBar.element),this._resize()))},createShape:function(){var e,t,n,i;(this.editor&&this.editor.end()||!this.editor)&&(t=((e=this.dataSource).view()||[]).length,n=d(e,{}),i=this._createShape(n,{}),this.trigger("add",{shape:i})||(e.insert(t,n),this._inactiveShapeItems.getByUid(n.uid).element=i,this.edit(i)))},_createShape:function(e,t){return(t=R({},this.options.shapeDefaults,t)).dataItem=e,new m(t,this)},createConnection:function(){var e,t,n,i;(this.editor&&this.editor.end()||!this.editor)&&(t=((e=this.connectionsDataSource).view()||[]).length,n=d(e,{}),i=this._createConnection(n),this.trigger("add",{connection:i})||(this._connectionsDataMap[n.uid]=i,e.insert(t,n),this.addConnection(i,!1),this.edit(i)))},_createConnection:function(e,t,n){var i=R({},this.options.connectionDefaults);return i.dataItem=e,new v(t||new G,n||new G,i)},editModel:function(e,t){var n,i,r,o;if(this.cancelEdit(),r=this.options.editable,"shape"==t)n=r.shapeEditors,i=r.shapeTemplate;else{if("connection"!=t)return;o=I(a,this),n=R({},{from:o,to:o},r.connectionEditors),i=r.connectionTemplate}this.editor=new w(this.element,{update:I(this._update,this),cancel:I(this._cancel,this),model:e,type:t,target:this,editors:n,template:i}),this.trigger("edit",this._editArgs())},edit:function(e){if(e.dataItem){var t=e instanceof m?"shape":"connection";this.editModel(e.dataItem,t)}},cancelEdit:function(){this.editor&&(this._getEditDataSource().cancelChanges(this.editor.model),this._destroyEditor())},saveEdit:function(){this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())&&this._getEditDataSource().sync()},_update:function(){this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())&&(this._getEditDataSource().sync(),this._destroyEditor())},_cancel:function(){var e,t;this.editor&&!this.trigger("cancel",this._editArgs())&&(e=this.editor.model,this._getEditDataSource().cancelChanges(e),(t=this._connectionsDataMap[e.uid]||this._dataMap[e.id])&&t._setOptionsFromModel(e),this._destroyEditor())},_getEditDataSource:function(){return"shape"===this.editor.options.type?this.dataSource:this.connectionsDataSource},_editArgs:function(){var e={container:this.editor.element};return e[this.editor.options.type]=this.editor.model,e},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_initElements:function(){this.wrapper=this.element.empty().css("position","relative").attr("tabindex",0).addClass("k-widget k-diagram"),this.scrollable=e("<div />").appendTo(this.element)},_initDefaults:function(e){var t=this.options,n=t.editable,i=t.shapeDefaults,r=t.connectionDefaults,o=(e||{}).shapeDefaults;!1===n?(i.editable=!1,r.editable=!1):(h(n,i.editable,["drag","remove","connect"]),h(n,r.editable,["drag","remove"])),o&&o.connectors&&(t.shapeDefaults.connectors=o.connectors)},_initCanvas:function(){var t=e("<div class='k-layer'></div>").appendTo(this.scrollable)[0],n=this.viewport();this.canvas=new F(t,{width:n.width||600,height:n.height||600})},_createHandlers:function(){var e=this,t=e.element;t.on("DOMMouseScroll.kendoDiagram mousewheel.kendoDiagram",I(e._wheel,e)),kendo.support.touch||kendo.support.mobileOS?(e._userEvents=new kendo.UserEvents(t,{multiTouch:!0,tap:I(e._tap,e)}),e._userEvents.bind(["gesturestart","gesturechange","gestureend"],{gesturestart:I(e._gestureStart,e),gesturechange:I(e._gestureChange,e),gestureend:I(e._gestureEnd,e)}),e.toolService=new X(e),!1!==e.options.pannable&&e.scroller.enable()):(e.toolService=new X(e),this.scroller.wrapper.on("mousemove"+ge,I(e._mouseMove,e)).on("mouseup"+ge,I(e._mouseUp,e)).on("mousedown"+ge,I(e._mouseDown,e)).on("mouseover"+ge,I(e._mouseover,e)).on("mouseout"+ge,I(e._mouseout,e)),t.on("keydown"+ge,I(e._keydown,e))),this._syncHandler=I(e._syncChanges,e),e._resizeHandler=I(e.resize,e,!1),kendo.onResize(e._resizeHandler),this.bind(xe,I(e._destroyToolBar,e)),this.bind("pan",I(e._destroyToolBar,e))},_tap:function(e){var t,n=this.toolService,i=this._caculateMobilePosition(e);n._updateHoveredItem(i),n.hoveredItem&&(t=n.hoveredItem,!1!==this.options.selectable&&(this._destroyToolBar(),t.isSelected?t.select(!1):this.select(t,{addToSelection:!0}),this._createToolBar()),this.trigger("click",{item:t,point:i}))},_caculateMobilePosition:function(e){return this.documentToModel(G(e.x.location,e.y.location))},_gestureStart:function(e){var t,n;this._destroyToolBar(),this.scroller.disable(),n={point:t=this.documentToModel(new G(e.center.x,e.center.y)),zoom:this.zoom()},this.trigger(xe,n)||(this._gesture=e,this._initialCenter=t)},_gestureChange:function(e){var t,n,i=this._gesture,r=this._initialCenter,o=this.documentToView(new G(e.center.x,e.center.y)),a=e.distance/i.distance,s=this._zoom,l=!1;fe.abs(a-1)>=.05&&(this._zoom=s=this._getValidZoom(s*a),this.options.zoom=s,this._gesture=e,l=!0),t=r.times(s),n=o.minus(t),(l||this._pan.distanceTo(n)>=5)&&(this._panTransform(n),this._updateAdorners()),e.preventDefault()},_gestureEnd:function(){!1!==this.options.pannable&&this.scroller.enable(),this.trigger(Ce,{point:this._initialCenter,zoom:this.zoom()})},_resize:function(){var e=this.viewport();this.canvas&&this.canvas.size(e),this.scrollable&&this.toolBar&&this.scrollable.height(e.height)},_mouseover:function(e){var t=e.target._kendoNode;t&&t.srcElement._hover&&t.srcElement._hover(!0,t.srcElement)},_mouseout:function(e){var t=e.target._kendoNode;t&&t.srcElement._hover&&t.srcElement._hover(!1,t.srcElement)},_initTheme:function(){var e=this,t=((T.ui.themes||{})[((e.options||{}).theme||"").toLowerCase()]||{}).diagram;e.options=R({},t,e.options)},_createShapes:function(){var e,t,n=this.options.shapes;for(t=0;n.length>t;t++)e=n[t],this.addShape(e)},_createConnections:function(){var e,t,n,i,r=this,o=r.options,a=o.connectionDefaults,s=o.connections;for(i=0;s.length>i;i++)e=s[i],t=r._findConnectionShape(e.from),n=r._findConnectionShape(e.to),r.connect(t,n,R({},a,e))},_findConnectionShape:function(e){var t=he(e)?e:e.shapeId;return this.getShapeById(t).getConnector(e.connector||be)},destroy:function(){var e=this;M.fn.destroy.call(e),this._userEvents&&this._userEvents.destroy(),kendo.unbindResize(e._resizeHandler),e.clear(),e.element.off(ge),e.scroller.wrapper.off(ge),e.canvas.destroy(!0),e.canvas=t,e._destroyEditor(),e.destroyScroller(),e._destroyGlobalToolBar(),e._destroyToolBar()},destroyScroller:function(){var e=this.scroller;e&&(e.destroy(),e.element.remove(),this.scroller=null)},save:function(){var e,t,n,i,r={shapes:[],connections:[]};for(e=0;this.shapes.length>e;e++)(t=this.shapes[e]).options.serializable&&r.shapes.push(t.options);for(e=0;this.connections.length>e;e++)n=this.connections[e],i=R({},n.options,{from:n.from.toJSON(),to:n.to.toJSON()}),r.connections.push(i);return r},focus:function(){if(!this.element.is(kendo._activeElement())){var e,t=this.element,n=t[0],i=[],r=[],o=document.documentElement;do{(n=n.parentNode).scrollHeight>n.clientHeight&&(i.push(n),r.push(n.scrollTop))}while(n!=o);for(t.focus(),e=0;i.length>e;e++)i[e].scrollTop=r[e]}},load:function(e){this.clear(),this.setOptions(e),this._createShapes(),this._createConnections()},setOptions:function(e){R(this.options,e)},clear:function(){var e=this;e.select(!1),e.mainLayer.clear(),e._shapesQuadTree.clear(),e._initialize()},connect:function(e,t,n){var i,r;return this.connectionsDataSource&&this._isEditable?(r=this.connectionsDataSource.add({}),(i=this._connectionsDataMap[r.uid]).source(e),i.target(t),i.redraw(n),i.updateModel()):(i=new v(e,t,R({},this.options.connectionDefaults,n)),this.addConnection(i)),i},connected:function(e,t){var n,i;for(n=0;this.connections.length>n;n++)if((i=this.connections[n]).from==e&&i.to==t)return!0;return!1},addConnection:function(e,t){return!1!==t&&this.undoRedoService.add(new A.AddConnectionUnit(e,this),!1),e.diagram=this,e._setOptionsFromModel(),e.refresh(),this.mainLayer.append(e.visual),this.connections.push(e),this.trigger(_e,{added:[e],removed:[]}),e},_addConnection:function(e,t){var n,i=this.connectionsDataSource;if(i&&this._isEditable){if(n=d(i,c(e.dataItem)),e.dataItem=n,e.updateModel(),!this.trigger("add",{connection:e}))return this._connectionsDataMap[n.uid]=e,i.add(n),this.addConnection(e,t),e._updateConnectors(),e}else if(!this.trigger("add",{connection:e}))return this.addConnection(e,t),e._updateConnectors(),e},addShape:function(e,t){var n,i=this.options.shapeDefaults;if(e instanceof m)i=R({},i,t),e.redraw(t),n=e;else{if(e instanceof kendo.Class)return;i=R({},i,e||{}),n=new m(i)}return i.undoable&&this.undoRedoService.add(new A.AddShapeUnit(n,this),!1),this.shapes.push(n),n.diagram=this,this.mainLayer.append(n.visual),this._shapesQuadTree.insert(n),this.trigger(_e,{added:[n],removed:[]}),n.hasOwnProperty("layout")&&n.layout(n),n},_addShape:function(e,t){var n,i,r=this.dataSource;if(r&&this._isEditable){if(n=d(r,c(e.dataItem)),e.dataItem=n,e.updateModel(),!this.trigger("add",{shape:e}))return this.dataSource.add(n),(i=this._inactiveShapeItems.getByUid(n.uid)).element=e,i.undoable=t,e}else if(!this.trigger("add",{shape:e}))return this.addShape(e,{undoable:t})},remove:function(e,t){var n,i,r,o;for(i=(n=u(e=ue(e)?e.slice(0):[e])).shapes,r=n.connections,ce(t)||(t=!0),t&&this.undoRedoService.begin(),this._suspendModelRefresh(),o=i.length-1;o>=0;o--)this._removeItem(i[o],t,r);for(o=r.length-1;o>=0;o--)this._removeItem(r[o],t);this._resumeModelRefresh(),t&&this.undoRedoService.commit(!1),this.trigger(_e,{added:[],removed:e})},_removeShapeDataItem:function(e){this._isEditable&&(this.dataSource.remove(e.dataItem),delete this._dataMap[e.dataItem.id])},_removeConnectionDataItem:function(e){this._isEditable&&(this.connectionsDataSource.remove(e.dataItem),delete this._connectionsDataMap[e.dataItem.uid])},_triggerRemove:function(e){var t,n,i,r,o=[];for(r=0;e.length>r;r++)i=(t=e[r]).options.editable,n=t instanceof m?{shape:t}:{connection:t},i&&!1!==i.remove&&!this.trigger("remove",n)&&o.push(t);return o},undo:function(){this.undoRedoService.undo()},redo:function(){this.undoRedoService.redo()},select:function(e,t){if(!le(e))return this._selectedItems;var n,i,r=[],o=[];for((t=R({addToSelection:!1},t)).addToSelection||this.deselect(),this._internalSelection=!0,e instanceof Array?r=e:e instanceof f&&(r=[e]),n=0;r.length>n;n++)(i=r[n]).select(!0)&&o.push(i);this._selectionChanged(o,[]),this._internalSelection=!1},selectAll:function(){this.select(this.shapes.concat(this.connections))},selectArea:function(e){var t,n,i,r;if(this._internalSelection=!0,r=[],e instanceof O)for(n=this.shapes.concat(this.connections),t=0;n.length>t;t++)i=n[t],e&&!i._hitTest(e)||!i.options.enable||i.select(!0)&&r.push(i);this._selectionChanged(r,[]),this._internalSelection=!1},deselect:function(e){this._internalSelection=!0;var t,n,i=[],r=[];for(e instanceof Array?r=e:e instanceof f?r.push(e):le(e)||(r=this._selectedItems.slice(0)),n=0;r.length>n;n++)(t=r[n]).select(!1)&&i.push(t);this._selectionChanged([],i),this._internalSelection=!1},toFront:function(e,t){var n,i,o;e||(e=this._selectedItems.slice()),n=this._getDiagramItems(e),!ce(t)||t?(i=r(this.mainLayer,n.visuals),o=new re(this,e,i),this.undoRedoService.add(o)):(this.mainLayer.toFront(n.visuals),this._fixOrdering(n,!0))},toBack:function(e,t){var n,i,o;e||(e=this._selectedItems.slice()),n=this._getDiagramItems(e),!ce(t)||t?(i=r(this.mainLayer,n.visuals),o=new ie(this,e,i),this.undoRedoService.add(o)):(this.mainLayer.toBack(n.visuals),this._fixOrdering(n,!1))},bringIntoView:function(e,t){var n,i,r,o,a=this.viewport(),s=new A.RectAlign(a);0!==a.width&&0!==a.height&&("none"==(t=R({animate:!1,align:"center middle"},t)).align&&(t.align="center middle"),e instanceof f?i=e.bounds(De):ue(e)?i=this.boundingBox(e):e instanceof O&&(i=e.clone()),r=i.clone(),i.zoom(this._zoom),this._storePan(new G),(i.width>a.width||i.height>a.height)&&(this._zoom=this._getValidZoom(fe.min(a.width/r.width,a.height/r.height)),i=r.clone().zoom(this._zoom)),this._zoomMainLayer(),n=i.clone(),s.align(i,t.align),o=i.topLeft().minus(n.topLeft()),this.pan(o.times(-1),t.animate))},alignShapes:function(e){var t,n,i,r,o,a,s;if(se(e)&&(e="Left"),0!==(t=this.select()).length){switch(e.toLowerCase()){case"left":case"top":n=Te;break;case"right":case"bottom":n=Se}for(r=0;t.length>r;r++)if((i=t[r])instanceof m)switch(e.toLowerCase()){case"left":n=fe.min(n,i.options.x);break;case"top":n=fe.min(n,i.options.y);break;case"right":n=fe.max(n,i.options.x);break;case"bottom":n=fe.max(n,i.options.y)}for(o=[],a=[],r=0;t.length>r;r++)if((i=t[r])instanceof m)switch(a.push(i),o.push(i.bounds()),e.toLowerCase()){case"left":case"right":i.position(new G(n,i.options.y));break;case"top":case"bottom":i.position(new G(i.options.x,n))}s=new A.TransformUnit(a,o),this.undoRedoService.add(s,!1)}},zoom:function(e,t){var n,i,r;return e&&(n=t?t.point:new A.Point(0,0),e=this._zoom=this._getValidZoom(e),se(n)||(i=(n=new A.Point(fe.round(n.x),fe.round(n.y))).times(e),r=this.modelToView(n).minus(i),this._storePan(new A.Point(fe.round(r.x),fe.round(r.y)))),t&&(t.zoom=e),this._panTransform(),this._updateAdorners()),this._zoom},_getPan:function(e){return this.canvas.translate||(e=e.plus(this._pan)),e},pan:function(e,t){var n,i;e instanceof G&&(i=(n=this).scroller,e=(e=n._getPan(e)).times(-1),t?i.animatedScrollTo(e.x,e.y,function(){n._updateAdorners()}):(i.scrollTo(e.x,e.y),n._updateAdorners()))},viewport:function(){var e=this.element,t=e.width(),n=e.height();return this.toolBar&&(n-=this.toolBar.element.outerHeight()),new O(0,0,t,n)},copy:function(){var e,t;if(this.options.copy.enabled)for(this._clipboard=[],this._copyOffset=1,e=0;this._selectedItems.length>e;e++)t=this._selectedItems[e],this._clipboard.push(t)},cut:function(){var e,t;if(this.options.copy.enabled){for(this._clipboard=[],this._copyOffset=0,e=0;this._selectedItems.length>e;e++)t=this._selectedItems[e],this._clipboard.push(t);this.remove(this._clipboard,!0)}},paste:function(){var e,t,n,i,r,o,a,s;if(this._clipboard.length>0){for(i={},o=(r=u(this._clipboard)).connections,a=r.shapes,s={x:this._copyOffset*this.options.copy.offsetX,y:this._copyOffset*this.options.copy.offsetY},this.deselect(),n=0;a.length>n;n++)t=(e=a[n]).clone(),i[e.id]=t,t.position(new G(e.options.x+s.x,e.options.y+s.y)),t.diagram=this,(t=this._addShape(t))&&t.select();for(n=0;o.length>n;n++)e=o[n],(t=this._addConnection(e.clone()))&&(this._updateCopiedConnection(t,e,"source",i,s),this._updateCopiedConnection(t,e,"target",i,s),t.select(!0),t.updateModel());this._syncChanges(),this._copyOffset+=1}},_updateCopiedConnection:function(e,t,n,i,r){var o,a,s,l=t[n](),c=this;l instanceof g&&i[l.shape.id]?(s=i[l.shape.id],c.getShapeById(s.id)?e[n](s.getConnector(l.options.name)):(a=c._inactiveShapeItems.getByUid(s.dataItem.uid))&&(o=function(t){s=c._dataMap[t.id],e[n](s.getConnector(l.options.name)),e.updateModel()},c._deferredConnectionUpdates.push(a.onActivate(o)))):e[n](new G(t[n+"Point"]().x+r.x,t[n+"Point"]().y+r.y))},boundingBox:function(e,t){var n,i,r,o=O.empty(),a=le(e)?this._getDiagramItems(e):{shapes:this.shapes};if(a.shapes.length>0)for(o=(i=a.shapes[0]).bounds(Ae),r=1;a.shapes.length>r;r++)n=(i=a.shapes[r]).bounds(Ae),!0===t&&(n.x-=i._rotationOffset.x,n.y-=i._rotationOffset.y),o=o.union(n);return o},_containerOffset:function(){var e=this.element.offset();return this.toolBar&&(e.top+=this.toolBar.element.outerHeight()),e},documentToView:function(e){var t=this._containerOffset();return new G(e.x-t.left,e.y-t.top)},viewToDocument:function(e){var t=this._containerOffset();return new G(e.x+t.left,e.y+t.top)},viewToModel:function(e){return this._transformWithMatrix(e,this._matrixInvert)},modelToView:function(e){return this._transformWithMatrix(e,this._matrix)},modelToLayer:function(e){return this._transformWithMatrix(e,this._layerMatrix)},layerToModel:function(e){return this._transformWithMatrix(e,this._layerMatrixInvert)},documentToModel:function(e){var t=this.documentToView(e);return this.canvas.translate||(t.x=t.x+this.scroller.scrollLeft,t.y=t.y+this.scroller.scrollTop),this.viewToModel(t)},modelToDocument:function(e){return this.viewToDocument(this.modelToView(e))},_transformWithMatrix:function(e,t){var n,i,r=e;return e instanceof G?t&&(r=t.apply(e)):(n=this._transformWithMatrix(e.topLeft(),t),i=this._transformWithMatrix(e.bottomRight(),t),r=O.fromPoints(n,i)),r},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},setConnectionsDataSource:function(e){this.options.connectionsDataSource=e,this._connectionDataSource(),this.options.autoBind&&this.connectionsDataSource.fetch()},layout:function(e){var t,n,i,r,o;switch(this.isLayouting=!0,se(e)&&(e=this.options.layout),(t=se(e)||se(e.type)?"Tree":e.type).toLowerCase()){case"tree":n=new A.TreeLayout(this);break;case"layered":n=new A.LayeredLayout(this);break;case"forcedirected":case"force":case"spring":case"springembedder":n=new A.SpringLayout(this);break;default:throw"Layout algorithm '"+t+"' is not supported."}i=new A.LayoutState(this),(r=n.layout(e))&&(o=new A.LayoutUndoUnit(i,r,e?e.animate:null),this.undoRedoService.add(o)),this.isLayouting=!1},getShapeById:function(e){var t;return(t=te.first(this.shapes,function(t){return t.visual.id===e}))?t:t=te.first(this.connections,function(t){return t.visual.id===e})},_extendLayoutOptions:function(e){e.layout&&(e.layout=R(A.LayoutBase.fn.defaultOptions||{},e.layout))},_selectionChanged:function(e,t){(e.length||t.length)&&this.trigger("select",{selected:e,deselected:t})},_getValidZoom:function(e){return fe.min(fe.max(e,this.options.zoomMin),this.options.zoomMax)},_panTransform:function(e){var t=this,n=e||t._pan;t.canvas.translate?(t.scroller.scrollTo(n.x,n.y),t._zoomMainLayer()):(t._storePan(n),t._transformMainLayer())},_finishPan:function(){this.trigger("pan",{total:this._pan,delta:Number.NaN})},_storePan:function(e){this._pan=e,this._storeViewMatrix()},_zoomMainLayer:function(){var e=this._zoom,t=new N(0,0,e,e);t.render(this.mainLayer),this._storeLayerMatrix(t),this._storeViewMatrix()},_transformMainLayer:function(){var e=this._pan,t=this._zoom,n=new N(e.x,e.y,t,t);n.render(this.mainLayer),this._storeLayerMatrix(n),this._storeViewMatrix()},_storeLayerMatrix:function(e){this._layerMatrix=e.toMatrix(),this._layerMatrixInvert=e.invert().toMatrix()},_storeViewMatrix:function(){var e=this._pan,t=this._zoom,n=new N(e.x,e.y,t,t);this._matrix=n.toMatrix(),this._matrixInvert=n.invert().toMatrix()},_toIndex:function(e,t){var n=this._getDiagramItems(e);this.mainLayer.toIndex(n.visuals,t),this._fixOrdering(n,!1)},_fixOrdering:function(e,t){var n,i,r=t?this.shapes.length-1:0,o=t?this.connections.length-1:0;for(n=0;e.shapes.length>n;n++)i=e.shapes[n],te.remove(this.shapes,i),te.insert(this.shapes,i,r);for(n=0;e.cons.length>n;n++)i=e.cons[n],te.remove(this.connections,i),te.insert(this.connections,i,o)},_getDiagramItems:function(e){var t,n,i={},r=e;for(i.visuals=[],i.shapes=[],i.cons=[],e?ue(e)||(r=[e]):r=this._selectedItems.slice(),t=0;r.length>t;t++)(n=r[t])instanceof m?(i.shapes.push(n),i.visuals.push(n.visual)):n instanceof v&&(i.cons.push(n),i.visuals.push(n.visual));return i},_removeItem:function(e,t,n){e.select(!1),e instanceof m?(this._removeShapeDataItem(e),this._removeShape(e,t,n)):e instanceof v&&(this._removeConnectionDataItem(e),this._removeConnection(e,t)),this.mainLayer.remove(e.visual)},_removeShape:function(e,t,n){var i,r,o,a,s=[],l=[];for(this.toolService._removeHover(),t&&this.undoRedoService.addCompositeItem(new U(e)),te.remove(this.shapes,e),this._shapesQuadTree.remove(e),i=0;e.connectors.length>i;i++)for(o=e.connectors[i],a=0;o.connections.length>a;a++)r=o.connections[a],n&&T.inArray(r,n)||(r.sourceConnector==o?s.push(r):r.targetConnector==o&&l.push(r));for(i=0;s.length>i;i++)s[i].source(null,t),s[i].updateModel();for(i=0;l.length>i;i++)l[i].target(null,t),l[i].updateModel()},_removeConnection:function(e,t){e.sourceConnector&&te.remove(e.sourceConnector.connections,e),e.targetConnector&&te.remove(e.targetConnector.connections,e),t&&this.undoRedoService.addCompositeItem(new W(e)),te.remove(this.connections,e)},_removeDataItems:function(e,t){var n,i,r,o;for(e=ue(e)?e:[e];e.length;)if(n=e.shift(),(r=this._dataMap[n.uid])&&(this._removeShapeConnections(r),this._removeItem(r,!1),delete this._dataMap[n.uid],t&&n.hasChildren&&n.loaded()))for(i=n.children.data(),o=0;i.length>o;o++)e.push(i[o])},_removeShapeConnections:function(e){var t,n=e.connections();if(n)for(t=0;n.length>t;t++)this._removeItem(n[t],!1)},_addDataItem:function(e,t){var n,i;if(ce(e))return(n=this._dataMap[e.id])?n:((i=R({},this.options.shapeDefaults)).dataItem=e,n=new m(i,this),this.addShape(n,{undoable:!1!==t}),this._dataMap[e.id]=n,n)},_addDataItemByUid:function(e){var t,n;if(ce(e))return(t=this._dataMap[e.uid])?t:((n=R({},this.options.shapeDefaults)).dataItem=e,t=new m(n,this),this.addShape(t),this._dataMap[e.uid]=t,t)},_addDataItems:function(e,t){var n,i,r,o;for(i=0;e.length>i;i++)n=e[i],r=this._addDataItemByUid(n),(o=this._addDataItemByUid(t))&&!this.connected(o,r)&&this.connect(o,r)},_refreshSource:function(e){var t,n=this,i=e.node,r=e.action,o=e.items,a=n.options;if(!e.field){if("remove"==r)this._removeDataItems(e.items,!0);else for(r||i||n.clear(),this._addDataItems(o,i),t=0;o.length>t;t++)o[t].load();a.layout&&n.layout(a.layout)}},_mouseDown:function(e){var t=this._calculatePosition(e);1==e.which&&this.toolService.start(t,this._meta(e))&&(this._destroyToolBar(),e.preventDefault())},_addItem:function(e){e instanceof m?this.addShape(e):e instanceof v&&this.addConnection(e)},_mouseUp:function(e){var t=this._calculatePosition(e);1==e.which&&this.toolService.end(t,this._meta(e))&&(this._createToolBar(),e.preventDefault())},_createToolBar:function(){var e,t,n,i,r,o,a,s,l,c=this.toolService.diagram;this.singleToolBar||1!==c.select().length||(e=c.select()[0])&&!1!==e.options.editable&&(n=(t=e.options.editable).tools,this._isEditable&&0===n.length&&(e instanceof m?n=["edit","rotateClockwise","rotateAnticlockwise"]:e instanceof v&&(n=["edit"]),t&&!1!==t.remove&&n.push("delete")),n&&n.length&&(i=20,this.singleToolBar=new y(c,{tools:n,click:I(this._toolBarClick,this),modal:!0}),this.singleToolBar.element,o=this.singleToolBar._popup.element.outerWidth(),a=this.singleToolBar._popup.element.outerHeight(),e instanceof m?(s=this.modelToView(e.bounds(Ae)),r=G(s.x,s.y).minus(G((o-s.width)/2,a+i))):e instanceof v&&(l=this.modelToView(e.bounds()),r=G(l.x,l.y).minus(G((o-l.width-20)/2,a+i))),r?(this.canvas.translate||(r=r.minus(G(this.scroller.scrollLeft,this.scroller.scrollTop))),r=this.viewToDocument(r),r=G(fe.max(r.x,0),fe.max(r.y,0)),this.singleToolBar.showAt(r)):this._destroyToolBar()))},_toolBarClick:function(e){this.trigger("toolBarClick",e),this._destroyToolBar()},_mouseMove:function(e){if(!this.pauseMouseHandlers){var t=this._calculatePosition(e);0!==e.which&&1!=e.which||!this.toolService.move(t,this._meta(e))||e.preventDefault()}},_keydown:function(e){this.toolService.keyDown(e.keyCode,this._meta(e))&&e.preventDefault()},_wheel:function(e){var t=function(e){var t=e.originalEvent,n=0;return t.wheelDelta?n=(n=-t.wheelDelta/40)>0?fe.ceil(n):fe.floor(n):t.detail&&(n=t.detail),n}(e),n=this._calculatePosition(e),i=R(this._meta(e),{delta:t});this.toolService.wheel(n,i)&&e.preventDefault()},_meta:function(e){return{ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},_calculatePosition:function(e){var n=e.pageX===t?e.originalEvent:e,i=new G(n.pageX,n.pageY);return this.documentToModel(i)},_normalizePointZoom:function(e){return e.times(1/this.zoom())},_initialize:function(){this.shapes=[],this._selectedItems=[],this.connections=[],this._dataMap={},this._connectionsDataMap={},this._inactiveShapeItems=new l,this._deferredConnectionUpdates=[],this.undoRedoService=new Q({undone:this._syncHandler,redone:this._syncHandler}),this.id=A.randomId()},_fetchFreshData:function(){var e=this;e._dataSource(),e._isEditable&&e._connectionDataSource(),e.options.autoBind&&(e._isEditable?(this._loadingShapes=!0,this._loadingConnections=!0,e.dataSource.fetch(),e.connectionsDataSource.fetch()):e.dataSource.fetch())},_dataSource:function(){var e,t;ce(this.options.connectionsDataSource)?(this._isEditable=!0,e=this.options.dataSource||{},t=ue(e)?{data:e}:e,this.dataSource&&this._shapesRefreshHandler?this.dataSource.unbind("change",this._shapesRefreshHandler).unbind("requestStart",this._shapesRequestStartHandler).unbind("error",this._shapesErrorHandler):(this._shapesRefreshHandler=I(this._refreshShapes,this),this._shapesRequestStartHandler=I(this._shapesRequestStart,this),this._shapesErrorHandler=I(this._error,this)),this.dataSource=kendo.data.DataSource.create(t).bind("change",this._shapesRefreshHandler).bind("requestStart",this._shapesRequestStartHandler).bind("error",this._shapesErrorHandler)):(this._treeDataSource(),this._isEditable=!1)},_connectionDataSource:function(){var e,t=this.options.connectionsDataSource;t&&(e=ue(t)?{data:t}:t,this.connectionsDataSource&&this._connectionsRefreshHandler?this.connectionsDataSource.unbind("change",this._connectionsRefreshHandler).unbind("requestStart",this._connectionsRequestStartHandler).unbind("error",this._connectionsErrorHandler):(this._connectionsRefreshHandler=I(this._refreshConnections,this),this._connectionsRequestStartHandler=I(this._connectionsRequestStart,this),this._connectionsErrorHandler=I(this._connectionsError,this)),this.connectionsDataSource=kendo.data.DataSource.create(e).bind("change",this._connectionsRefreshHandler).bind("requestStart",this._connectionsRequestStartHandler).bind("error",this._connectionsErrorHandler))},_shapesRequestStart:function(e){"read"==e.type&&(this._loadingShapes=!0)},_connectionsRequestStart:function(e){"read"==e.type&&(this._loadingConnections=!0)},_error:function(){this._loadingShapes=!1},_connectionsError:function(){this._loadingConnections=!1},_refreshShapes:function(e){"remove"===e.action?this._shouldRefresh()&&this._removeShapes(e.items):"itemchange"===e.action?this._shouldRefresh()&&this._updateShapes(e.items,e.field):"add"===e.action?this._inactiveShapeItems.add(e.items):"sync"===e.action?this._syncShapes(e.items):this.refresh()},_shouldRefresh:function(){return!this._suspended},_suspendModelRefresh:function(){this._suspended=(this._suspended||0)+1},_resumeModelRefresh:function(){this._suspended=fe.max((this._suspended||0)-1,0)},refresh:function(){this._loadingShapes=!1,this._loadingConnections||(this.trigger("dataBound"),this._rebindShapesAndConnections())},_rebindShapesAndConnections:function(){this.clear(),this._addShapes(this.dataSource.view()),this.connectionsDataSource&&this._addConnections(this.connectionsDataSource.view(),!1),this.options.layout&&this.layout(this.options.layout),this._redrawConnections()},refreshConnections:function(){this._loadingConnections=!1,this._loadingShapes||(this.trigger("dataBound"),this._rebindShapesAndConnections())},_redrawConnections:function(){var e,t=this.connections;for(e=0;t.length>e;e++)t[e].refresh()},_removeShapes:function(e){var t,n,i=this._dataMap;for(n=0;e.length>n;n++)i[(t=e[n]).id]&&(this.remove(i[t.id],!1),i[t.id]=null)},_syncShapes:function(){var e=this,t=e._inactiveShapeItems;t.forEach(function(n){var i=n.dataItem,r=n.element;i.isNew()||(r?(r._setOptionsFromModel(),e.addShape(r,{undoable:n.undoable}),e._dataMap[i.id]=r):e._addDataItem(i),n.activate(),t.remove(i))})},_updateShapes:function(e,t){var n,i,r;for(n=0;e.length>n;n++)i=e[n],(r=this._dataMap[i.id])&&r.updateOptionsFromModel(i,t)},_addShapes:function(e){for(var t=0;e.length>t;t++)this._addDataItem(e[t],!1)},_refreshConnections:function(e){"remove"===e.action?this._shouldRefresh()&&this._removeConnections(e.items):"add"===e.action?this._addConnections(e.items):"sync"===e.action||("itemchange"===e.action?this._shouldRefresh()&&this._updateConnections(e.items):this.refreshConnections())},_removeConnections:function(e){for(var t=0;e.length>t;t++)this.remove(this._connectionsDataMap[e[t].uid],!1),this._connectionsDataMap[e[t].uid]=null},_updateConnections:function(e){var t,n,i,r,o;for(t=0;e.length>t;t++)n=e[t],(i=this._connectionsDataMap[n.uid]).updateOptionsFromModel(n),(r=this._validateConnector(n.from))&&i.source(r),(o=this._validateConnector(n.to))&&i.target(o)},_addConnections:function(e,t){var n,i,r=e.length;for(n=0;r>n;n++)i=e[n],this._addConnectionDataItem(i,t)},_addConnectionDataItem:function(e,t){var n,i,r,o;this._connectionsDataMap[e.uid]||(n=this._validateConnector(e.from),ce(n)&&null!==n||(n=new G(e.fromX,e.fromY)),i=this._validateConnector(e.to),ce(i)&&null!==i||(i=new G(e.toX,e.toY)),ce(n)&&ce(i)&&((r=R({},this.options.connectionDefaults)).dataItem=e,o=new v(n,i,r),this._connectionsDataMap[e.uid]=o,this.addConnection(o,t)))},_validateConnector:function(e){var t;return ce(e)&&null!==e&&(t=this._dataMap[e]),t},_treeDataSource:function(){var e=this,t=e.options.dataSource;(t=ue(t)?{data:t}:t).fields||(t.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),e.dataSource&&e._refreshHandler&&e._unbindDataSource(),e._refreshHandler=I(e._refreshSource,e),e._errorHandler=I(e._error,e),e.dataSource=L.create(t).bind(_e,e._refreshHandler).bind("error",e._errorHandler)},_unbindDataSource:function(){var e=this;e.dataSource.unbind(_e,e._refreshHandler).unbind("error",e._errorHandler)},_adorn:function(e,n){n!==t&&e&&(n?(this._adorners.push(e),this.adornerLayer.append(e.visual)):(te.remove(this._adorners,e),this.adornerLayer.remove(e.visual)))},_showConnectors:function(e,t){t?this._connectorsAdorner.show(e):this._connectorsAdorner.destroy()},_updateAdorners:function(){var e,t,n=this._adorners;for(e=0;n.length>e;e++)(t=n[e]).refreshBounds&&t.refreshBounds(),t.refresh()},_refresh:function(){for(var e=0;this.connections.length>e;e++)this.connections[e].refresh()},_destroyToolBar:function(){this.singleToolBar&&(this.singleToolBar.hide(),this.singleToolBar.destroy(),this.singleToolBar=null)},_destroyGlobalToolBar:function(){this.toolBar&&(this.toolBar.hide(),this.toolBar.destroy(),this.toolBar=null)},exportDOMVisual:function(){var e=this.canvas._viewBox,t=D.transform().translate(-e.x,-e.y),n=new D.Rect([0,0],[e.width,e.height]),i=S.Path.fromRect(n),r=new S.Group({transform:t}),o=new S.Group({clip:i}),a=this.canvas.drawingElement.children[0];return o.append(r),r.children.push(a),o},exportVisual:function(){var e=D.transform().scale(1/this._zoom),t=new S.Group({transform:e}),n=this.mainLayer.drawingElement;return t.children.push(n),t},_syncChanges:function(){this._syncShapeChanges(),this._syncConnectionChanges()},_syncShapeChanges:function(){this.dataSource&&this._isEditable&&this.dataSource.sync()},_syncConnectionChanges:function(){var t=this;t.connectionsDataSource&&t._isEditable&&(e.when.apply(e,t._deferredConnectionUpdates).then(function(){t.connectionsDataSource.sync()}),t.deferredConnectionUpdates=[])}}),T.ExportMixin.extend(_.fn,!0),kendo.PDFMixin&&kendo.PDFMixin.extend(_.fn),y=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),this.diagram=e,this.options=R({},this.options,t),this._tools=[],this.createToolBar(),this.createTools(),this.appendTools(),this.options.modal&&this.createPopup(),this.bind(this.events,t)},events:["click"],createPopup:function(){this.container=e("<div/>").append(this.element),this._popup=this.container.kendoPopup({}).getKendoPopup()},appendTools:function(){var e,t;for(e=0;this._tools.length>e;e++)((t=this._tools[e]).buttons&&t.buttons.length||!ce(t.buttons))&&this._toolBar.add(t)},createToolBar:function(){this.element=e("<div/>"),this._toolBar=this.element.kendoToolBar({click:I(this.click,this),resizable:!1}).getKendoToolBar(),this.element.css("border","none")},createTools:function(){for(var e=0;this.options.tools.length>e;e++)this.createTool(this.options.tools[e])},createTool:function(e){var t=(pe(e)?e.name:e)+"Tool";this[t]?this[t](e):this._tools.push(e)},showAt:function(e){this._popup&&this._popup.open(e.x,e.y)},hide:function(){this._popup&&this._popup.close()},newGroup:function(){return{type:"buttonGroup",buttons:[]}},editTool:function(){this._tools.push({spriteCssClass:"k-icon k-i-pencil",showText:"overflow",type:"button",text:"Edit",attributes:this._setAttributes({action:"edit"})})},deleteTool:function(){this._tools.push({spriteCssClass:"k-icon k-i-close",showText:"overflow",type:"button",text:"Delete",attributes:this._setAttributes({action:"delete"})})},rotateAnticlockwiseTool:function(e){this._appendGroup("rotate"),this._rotateGroup.buttons.push({spriteCssClass:"k-icon k-i-rotateccw",showText:"overflow",text:"RotateAnticlockwise",group:"rotate",attributes:this._setAttributes({action:"rotateAnticlockwise",step:e.step})})},rotateClockwiseTool:function(e){this._appendGroup("rotate"),this._rotateGroup.buttons.push({spriteCssClass:"k-icon k-i-rotatecw",attributes:this._setAttributes({action:"rotateClockwise",step:e.step}),showText:"overflow",text:"RotateClockwise",group:"rotate"})},createShapeTool:function(){this._appendGroup("create"),this._createGroup.buttons.push({spriteCssClass:"k-icon k-i-shape",showText:"overflow",text:"CreateShape",group:"create",attributes:this._setAttributes({action:"createShape"})})},createConnectionTool:function(){this._appendGroup("create"),this._createGroup.buttons.push({spriteCssClass:"k-icon k-i-connector",showText:"overflow",text:"CreateConnection",group:"create",attributes:this._setAttributes({action:"createConnection"})})},undoTool:function(){this._appendGroup("history"),this._historyGroup.buttons.push({spriteCssClass:"k-icon k-i-undo",showText:"overflow",text:"Undo",group:"history",attributes:this._setAttributes({action:"undo"})})},redoTool:function(){this._appendGroup("history"),this._historyGroup.buttons.push({spriteCssClass:"k-icon k-i-redo",showText:"overflow",text:"Redo",group:"history",attributes:this._setAttributes({action:"redo"})})},_appendGroup:function(e){var t="_"+e+"Group";this[t]||(this[t]=this.newGroup(),this._tools.push(this[t]))},_setAttributes:function(e){var t={};return e.action&&(t[kendo.attr("action")]=e.action),e.step&&(t[kendo.attr("step")]=e.step),t},_getAttributes:function(e){var t,n={},i=e.attr(kendo.attr("action"));return i&&(n.action=i),(t=e.attr(kendo.attr("step")))&&(n.step=t),n},click:function(t){var n=this._getAttributes(e(t.target)),i=n.action;i&&this[i](n),this.trigger("click",this.eventData(i))},eventData:function(e){var t=this.selectedElements(),n=[],i=[];return t instanceof m?n.push(t):i.push(t),{shapes:n,connections:i,action:e}},delete:function(){var e=this.diagram._triggerRemove(this.selectedElements());e.length&&(this.diagram.remove(e,!0),this.diagram._syncChanges())},edit:function(){this.diagram.edit(this.selectedElements()[0])},rotateClockwise:function(e){var t=(this.selectedElements(),parseFloat(e.step||90));this._rotate(t)},rotateAnticlockwise:function(e){var t=(this.selectedElements(),parseFloat(e.step||90));this._rotate(-t)},_rotate:function(e){var t=this.diagram._resizingAdorner;t.angle(t.angle()+e),t.rotate()},selectedElements:function(){return this.diagram.select()},createShape:function(){this.diagram.createShape()},createConnection:function(){this.diagram.createConnection()},undo:function(){this.diagram.undo()},redo:function(){this.diagram.redo()},destroy:function(){this.diagram=null,this.element=null,this.options=null,this._toolBar&&this._toolBar.destroy(),this._popup&&this._popup.destroy()}}),b=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),this.options=P(!0,{},this.options,t),this.element=e,this.model=this.options.model,this.fields=this._getFields(),this._initContainer(),this.createEditable()},options:{editors:{}},_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new kendo.ui.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:!1,model:this.model})},_isEditable:function(e){return this.model.editable&&this.model.editable(e)},_getFields:function(){var e,t,n,i=[],r=this.model.fields;for(e in r)t={},this._isEditable(e)&&((n=this.options.editors[e])&&(t.editor=n),t.field=e,i.push(t));return i},end:function(){return this.editable.end()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty(),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),w=b.extend({init:function(e,t){b.fn.init.call(this,e,t),this.bind(this.events,this.options),this.open()},events:["update","cancel"],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t,n=this;this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid),t="",this.options.template?(t+=this._renderTemplate(),this.fields=[]):t+=this._renderFields(),t+=this._renderButtons(),this.wrapper.append(e('<div class="k-edit-form-container"/>').append(t)),this.window=new kendo.ui.Window(this.wrapper,this.options.window),this.window.bind("close",function(e){e.userTriggered&&(e.sender.element.focus(),n._cancelClick(e))}),this._attachButtonEvents()},_renderTemplate:function(){var e=this.options.template;return"string"==typeof e&&(e=window.unescape(e)),kendo.template(e)(this.model)},_renderFields:function(){var e,t,n="";for(e=0;this.fields.length>e;e++)n+='<div class="k-edit-label"><label for="'+(t=this.fields[e]).field+'">'+(t.field||"")+"</label></div>",this._isEditable(t.field)&&(n+="<div "+kendo.attr("container-for")+'="'+t.field+'" class="k-edit-field"></div>');return n},_renderButtons:function(){var e='<div class="k-edit-buttons k-state-default">';return e+=this._createButton("update"),(e+=this._createButton("cancel"))+"</div>"},_createButton:function(e){return kendo.template('<a class="k-button k-button-icontext #=className#" href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>')(p[e])},_attachButtonEvents:function(){this._cancelClickHandler=I(this._cancelClick,this),this.window.element.on(ye+ge,"a.k-diagram-cancel",this._cancelClickHandler),this._updateClickHandler=I(this._updateClick,this),this.window.element.on(ye+ge,"a.k-diagram-update",this._updateClickHandler)},_updateClick:function(e){e.preventDefault(),this.trigger("update")},_cancelClick:function(e){e.preventDefault(),this.trigger("cancel")},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",I(this.destroy,this)).close()},destroy:function(){this.window.close().destroy(),this.window.element.off(ye+ge,"a.k-diagram-cancel",this._cancelClickHandler),this.window.element.off(ye+ge,"a.k-diagram-update",this._updateClickHandler),this._cancelClickHandler=null,this._editUpdateClickHandler=null,this.window=null,b.fn.destroy.call(this)}}),s.fn=s.prototype={onActivate:function(t){var n=e.Deferred();return this.callbacks.push({callback:t,deferred:n}),n},activate:function(){var e,t,n=this.callbacks;for(t=0;n.length>t;t++)(e=this.callbacks[t]).callback(this.dataItem),e.deferred.resolve();this.callbacks=[]}},l.fn=l.prototype={add:function(e){for(var t=0;e.length>t;t++)this.items[e[t].uid]=new s(e[t])},forEach:function(e){for(var t in this.items)e(this.items[t])},getByUid:function(e){return this.items[e]},remove:function(e){delete this.items[e.uid]}},k=E.extend({init:function(){this.shapes=[]},_add:function(e,t){this.shapes.push({bounds:t,shape:e}),e._quadNode=this},insert:function(e,t){this._add(e,t)},remove:function(e){var t,n=this.shapes,i=n.length;for(t=0;i>t;t++)if(n[t].shape===e){n.splice(t,1);break}},hitTestRect:function(e){var t,n=this.shapes,i=n.length;for(t=0;i>t;t++)if(this._testRect(n[t].shape,e))return!0},_testRect:function(e,t){var n=e.rotate().angle;return $.rects(t,e.bounds(),-n)},_overlaps:function(e,t){var n=e.bottomRight(),i=t.bottomRight();return!(t.x>n.x||t.y>n.y||e.x>i.x||e.y>i.y)}}),x=k.extend({init:function(e){k.fn.init.call(this),this.children=[],this.rect=e},inBounds:function(e){var t=this.rect,n=t.bottomRight(),i=e.bottomRight();return e.x>=t.x&&e.y>=t.y&&n.x>=i.x&&n.y>=i.y},overlapsBounds:function(e){return this._overlaps(this.rect,e)},insert:function(e,t){var n,i=!1,r=this.children,o=r.length;if(this.inBounds(t)){if(!o&&4>this.shapes.length)this._add(e,t);else{for(o||this._initChildren(),n=0;r.length>n;n++)if(r[n].insert(e,t)){i=!0;break}i||this._add(e,t)}i=!0}return i},_initChildren:function(){var e,t,n=this.rect,i=this.children,r=this.shapes,o=n.center(),a=n.width/2,s=n.height/2;for(i.push(new x(new O(n.x,n.y,a,s)),new x(new O(o.x,n.y,a,s)),new x(new O(n.x,o.y,a,s)),new x(new O(o.x,o.y,a,s))),t=r.length-1;t>=0;t--)for(e=0;i.length>e;e++)if(i[e].insert(r[t].shape,r[t].bounds)){r.splice(t,1);break}},hitTestRect:function(e){var t,n=this.children,i=n.length,r=!1;if(this.overlapsBounds(e))if(k.fn.hitTestRect.call(this,e))r=!0;else for(t=0;i>t;t++)if(n[t].hitTestRect(e)){r=!0;break}return r}}),C=E.extend({ROOT_SIZE:1e3,init:function(e){e.bind(ve,I(this._boundsChange,this)),e.bind(ke,I(this._boundsChange,this)),this.initRoots()},initRoots:function(){this.rootMap={},this.root=new k},clear:function(){this.initRoots()},_boundsChange:function(e){e.item._quadNode&&(e.item._quadNode.remove(e.item),this.insert(e.item))},insert:function(e){var t=e.bounds(Ae),n=this.ROOT_SIZE,i=this.getSectors(t),r=i[0][0],o=i[1][0];this.inRoot(i)?this.root.insert(e,t):(this.rootMap[r]||(this.rootMap[r]={}),this.rootMap[r][o]||(this.rootMap[r][o]=new x(new O(r*n,o*n,n,n))),this.rootMap[r][o].insert(e,t))},remove:function(e){e._quadNode&&e._quadNode.remove(e)},inRoot:function(e){return e[0].length>1||e[1].length>1},getSectors:function(e){var t,n,i=this.ROOT_SIZE,r=e.bottomRight(),o=fe.floor(r.x/i),a=fe.floor(r.y/i),s=[[],[]];for(t=fe.floor(e.x/i);o>=t;t++)s[0].push(t);for(n=fe.floor(e.y/i);a>=n;n++)s[1].push(n);return s},hitTestRect:function(e){var t,n,i,r,o,a=this.getSectors(e);if(this.root.hitTestRect(e))return!0;for(t=0;a[0].length>t;t++)for(i=a[0][t],n=0;a[1].length>n;n++)if(r=a[1][n],(o=(this.rootMap[i]||{})[r])&&o.hitTestRect(e))return!0;return!1}}),T.ui.plugin(_),R(A,{Shape:m,Connection:v,Connector:g,DiagramToolBar:y,QuadNode:x,QuadRoot:k,ShapesQuadTree:C})}(window.kendo.jQuery),function(e,t){function n(e,t){return null===t?t:b(e,!0)(t)}function i(e){return typeof e!==D}function r(e,t,n){var i,r,l=s(e),c=s(t),d=u(e)-u(t)<0,h=[];for(h.push(e),i=0;n>i;i++)r={r:o(l.r,c.r,i,n,d),g:o(l.g,c.g,i,n,d),b:o(l.b,c.b,i,n,d)},h.push(a(r));return h.push(t),h}function o(e,t,n,i,r){var o=h.min(h.abs(e),h.abs(t)),a=h.max(h.abs(e),h.abs(t)),s=(a-o)/(i+1)*(n+1);return r?o+s:a-s}function a(e){return"#"+l(e.r)+l(e.g)+l(e.b)}function s(e){var t=function(e){var t={};return 3===e.length?(t.r=e[0],t.g=e[1],t.b=e[2]):(t.r=e.substring(0,2),t.g=e.substring(2,4),t.b=e.substring(4,6)),t}(e=e.replace("#",""));return{r:c(t.r),g:c(t.g),b:c(t.b)}}function l(e){var t=h.round(e).toString(16).toUpperCase();return 1===t.length&&(t="0"+t),t}function c(e){return parseInt(e.toString(16),16)}function u(e){var t=0;return e&&(e=s(e),t=h.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)),t}function d(e){var t=h.pow(10,4);return h.round(e*t)/t}var h=Math,p=e.proxy,f=window.kendo,g=f.Class,m=f.ui.Widget,v=f.template,_=f.deepExtend,y=f.data.HierarchicalDataSource,b=f.getter,w=f.dataviz,k=".kendoTreeMap",x="change",C="dataBound",T="itemCreated",S=Number.MAX_VALUE,D="undefined",A=m.extend({init:function(t,n){f.destroy(t),e(t).empty(),m.fn.init.call(this,t,n),this.wrapper=this.element,this._initTheme(this.options),this.element.addClass("k-widget k-treemap"),this._setLayout(),this._originalOptions=_({},this.options),this._initDataSource(),this._attachEvents(),f.notify(this,w.ui)},options:{name:"TreeMap",theme:"default",autoBind:!0,textField:"text",valueField:"value",colorField:"color"},events:[C,T],_initTheme:function(e){var t=((w.ui.themes||{})[((e||{}).theme||"").toLowerCase()]||{}).treeMap;this.options=_({},t,e)},_attachEvents:function(){this.element.on("mouseover.kendoTreeMap",p(this._mouseover,this)).on("mouseleave.kendoTreeMap",p(this._mouseleave,this))},_setLayout:function(){"horizontal"===this.options.type?(this._layout=new I(!1),this._view=new R(this,this.options)):"vertical"===this.options.type?(this._layout=new I(!0),this._view=new R(this,this.options)):(this._layout=new M,this._view=new E(this,this.options))},_initDataSource:function(){var e=this,t=e.options.dataSource;e._dataChangeHandler=p(e._onDataChange,e),e.dataSource=y.create(t).bind(x,e._dataChangeHandler),t&&e.options.autoBind&&e.dataSource.fetch()},setDataSource:function(e){var t=this;t.dataSource.unbind(x,t._dataChangeHandler),t.dataSource=e.bind(x,t._dataChangeHandler),e&&t.options.autoBind&&t.dataSource.fetch()},_onDataChange:function(e){var t,n,o,a,s,l,c=e.node,u=e.items,d=this.options;if(c){if(u.length){for((a=this._getByUid(c.uid)).children=[],o=i(a.minColor)||i(a.maxColor)?r(a.minColor,a.maxColor,u.length)||[]:d.colors||[],n=0;u.length>n;n++)t=u[n],a.children.push(this._wrapItem(t));for(s=this._view.htmlSize(a),this._layout.compute(a.children,a.coord,s),n=0;a.children.length>n;n++)i((t=a.children[n]).color)||("string"==typeof o[0]?t.color=o[n%o.length]:(l=o[n%o.length])&&(t.color=l[0],t.minColor=l[0],t.maxColor=l[1]));this._view.render(a)}}else this.element.empty(),t=this._wrapItem(u[0]),this._layout.createRoot(t,this.element.outerWidth(),this.element.outerHeight(),"vertical"===this.options.type),this._view.createRoot(t),this._root=t;for(n=0;u.length>n;n++)u[n].load();c&&this.trigger(C,{node:c})},_contentSize:function(e){this.view.renderHeight(e)},_wrapItem:function(e){var t={};return i(this.options.valueField)&&(t.value=n(this.options.valueField,e)),i(this.options.colorField)&&(t.color=n(this.options.colorField,e)),i(this.options.textField)&&(t.text=n(this.options.textField,e)),t.level=e.level(),t.dataItem=e,t},_getByUid:function(e){for(var t,n=[this._root];n.length;){if((t=n.pop()).dataItem.uid===e)return t;t.children&&(n=n.concat(t.children))}},dataItem:function(t){var n=e(t).attr(f.attr("uid")),i=this.dataSource;return i&&i.getByUid(n)},findByUid:function(e){return this.element.find(".k-treemap-tile["+f.attr("uid")+"='"+e+"']")},_mouseover:function(t){var n=e(t.target);n.hasClass("k-leaf")&&(this._removeActiveState(),n.removeClass("k-state-hover").addClass("k-state-hover"))},_removeActiveState:function(){this.element.find(".k-state-hover").removeClass("k-state-hover")},_mouseleave:function(){this._removeActiveState()},destroy:function(){m.fn.destroy.call(this),this.element.off(k),this.dataSource&&this.dataSource.unbind(x,this._dataChangeHandler),this._root=null,f.destroy(this.element)},items:function(){return e()},getSize:function(){return f.dimensions(this.element)},_resize:function(){this.dataSource.fetch()},setOptions:function(e){var n=e.dataSource;e.dataSource=t,this._originalOptions=_(this._originalOptions,e),this.options=_({},this._originalOptions),this._setLayout(),this._initTheme(this.options),m.fn._setEvents.call(this,e),n&&this.setDataSource(y.create(n)),this.options.autoBind&&this.dataSource.fetch()}}),M=g.extend({createRoot:function(e,t,n){e.coord={width:t,height:n,top:0,left:0}},leaf:function(e){return!e.children},layoutChildren:function(e,t){var n,i,r,o,a=t.width*t.height,s=0,l=[];for(n=0;e.length>n;n++)l[n]=parseFloat(e[n].value),s+=l[n];for(n=0;l.length>n;n++)e[n].area=a*l[n]/s;i=this.layoutHorizontal()?t.height:t.width,r=[(e=new f.data.Query(e)._sortForGrouping("value","desc"))[0]],o=e.slice(1),this.squarify(o,r,i,t)},squarify:function(e,t,n,i){this.computeDim(e,t,n,i)},computeDim:function(e,n,i,r){var o,a,s;return e.length+n.length==1?(o=1==e.length?e:n,this.layoutLast(o,i,r),t):(e.length>=2&&0===n.length&&(n=[e[0]],e=e.slice(1)),0===e.length?(n.length>0&&this.layoutRow(n,i,r),t):(a=e[0],this.worstAspectRatio(n,i)>=this.worstAspectRatio([a].concat(n),i)?this.computeDim(e.slice(1),n.concat([a]),i,r):(s=this.layoutRow(n,i,r),this.computeDim(e,[],s.dim,s)),t))},layoutLast:function(e,t,n){e[0].coord=n},layoutRow:function(e,t,n){return this.layoutHorizontal()?this.layoutV(e,t,n):this.layoutH(e,t,n)},orientation:"h",layoutVertical:function(){return"v"===this.orientation},layoutHorizontal:function(){return"h"===this.orientation},layoutChange:function(){this.orientation=this.layoutVertical()?"h":"v"},worstAspectRatio:function(e,t){var n,i,r,o,a;if(!e||0===e.length)return S;for(n=0,i=0,r=S,o=0;e.length>o;o++)n+=a=e[o].area,r=a>r?r:a,i=i>a?i:a;return h.max(t*t*i/(n*n),n*n/(t*t*r))},compute:function(e,t,n){if(t.width>=t.height&&this.layoutHorizontal()||this.layoutChange(),e&&e.length>0){var i={width:t.width,height:t.height-n.text,top:0,left:0};this.layoutChildren(e,i)}},layoutV:function(e,t,n){var i,r,o,a=0;for(t=d(this._totalArea(e)/t),i=0;e.length>i;i++)r=d(e[i].area/t),e[i].coord={height:r,width:t,top:n.top+a,left:n.left},a+=r;return(o={height:n.height,width:n.width-t,top:n.top,left:n.left+t}).dim=h.min(o.width,o.height),o.dim!=o.height&&this.layoutChange(),o},layoutH:function(e,t,n){var i,r,o=d(this._totalArea(e)/t),a=n.top,s=0;for(i=0;e.length>i;i++)e[i].coord={height:o,width:d(e[i].area/o),top:a,left:n.left+s},s+=e[i].coord.width;return(r={height:n.height-o,width:n.width,top:n.top+o,left:n.left}).dim=h.min(r.width,r.height),r.dim!=r.width&&this.layoutChange(),r},_totalArea:function(e){var t,n=0;for(t=0;e.length>t;t++)n+=e[t].area;return n}}),E=g.extend({init:function(t,n){this.options=_({},this.options,n),this.treeMap=t,this.element=e(t.element),this.offset=0},htmlSize:function(e){var t,n=this._getByUid(e.dataItem.uid),i={text:0};return e.children&&(this._clean(n),this._getText(e)&&(t=this._createTitle(e),n.append(t),i.text=t.height()),n.append(this._createWrap()),this.offset=(n.outerWidth()-n.innerWidth())/2),i},_getByUid:function(e){return this.element.find(".k-treemap-tile["+f.attr("uid")+"='"+e+"']")},render:function(e){var t,n,i,r,o=this._getByUid(e.dataItem.uid),a=e.children;if(a)for(t=o.find(".k-treemap-wrap"),n=0;a.length>n;n++)i=a[n],r=this._createLeaf(i),t.append(r),this.treeMap.trigger(T,{element:r})},createRoot:function(e){var t=this._createLeaf(e);this.element.append(t),this.treeMap.trigger(T,{element:t})},_clean:function(e){e.css("background-color",""),e.removeClass("k-leaf"),e.removeClass("k-inverse"),e.empty()},_createLeaf:function(t){return this._createTile(t).css("background-color",t.color).addClass("k-leaf").toggleClass("k-inverse",this._tileColorBrightness(t)>180).append(e("<div></div>").html(this._getText(t)))},_createTile:function(t){var n,r={width:t.coord.width,height:t.coord.height,left:t.coord.left,top:t.coord.top};return r.width+=r.left&&this.offset?2*this.offset:this.offset,r.height+=r.top?2*this.offset:this.offset,n=e("<div class='k-treemap-tile'></div>").css({width:r.width,height:r.height,left:r.left,top:r.top}),i(t.dataItem)&&i(t.dataItem.uid)&&n.attr(f.attr("uid"),t.dataItem.uid),n},_getText:function(e){var t=e.text;return this.options.template&&(t=this._renderTemplate(e)),t},_renderTemplate:function(e){return v(this.options.template)({dataItem:e.dataItem,text:e.text})},_createTitle:function(t){return e("<div class='k-treemap-title'></div>").append(e("<div></div>").html(this._getText(t)))},_createWrap:function(){return e("<div class='k-treemap-wrap'></div>")},_tileColorBrightness:function(e){return u(e.color)}}),I=g.extend({createRoot:function(e,t,n,i){e.coord={width:t,height:n,top:0,left:0},e.vertical=i},init:function(e){this.vertical=e,this.quotient=e?1:0},compute:function(e,t,n){var i,r,o;e.length>0&&(i=t.width,r=t.height,this.vertical?r-=n.text:i-=n.text,o={width:i,height:r,top:0,left:0},this.layoutChildren(e,o))},layoutChildren:function(e,t){var n,i,r=t.width*t.height,o=0,a=[];for(n=0;e.length>n;n++)i=e[n],a[n]=parseFloat(e[n].value),o+=a[n],i.vertical=this.vertical;for(n=0;a.length>n;n++)e[n].area=r*a[n]/o;e=new f.data.Query(e)._sortForGrouping("value","desc"),this.sliceAndDice(e,t)},sliceAndDice:function(e,t){var n=this._totalArea(e);e[0].level%2===this.quotient?this.layoutHorizontal(e,t,n):this.layoutVertical(e,t,n)},layoutHorizontal:function(e,t,n){var i,r,o,a=0;for(i=0;e.length>i;i++)o=(r=e[i]).area/(n/t.width),r.coord={height:t.height,width:o,top:t.top,left:t.left+a},a+=o},layoutVertical:function(e,t,n){var i,r,o,a=0;for(i=0;e.length>i;i++)o=(r=e[i]).area/(n/t.height),r.coord={height:o,width:t.width,top:t.top+a,left:t.left},a+=o},_totalArea:function(e){var t,n=0;for(t=0;e.length>t;t++)n+=e[t].area;return n}}),R=E.extend({htmlSize:function(e){var t,n=this._getByUid(e.dataItem.uid),i={text:0,offset:0};return e.children&&(this._clean(n),this._getText(e)&&(t=this._createTitle(e),n.append(t),i.text=e.vertical?t.height():t.width()),n.append(this._createWrap()),this.offset=(n.outerWidth()-n.innerWidth())/2),i},_createTitle:function(t){return e(t.vertical?"<div class='k-treemap-title'></div>":"<div class='k-treemap-title-vertical'></div>").append(e("<div></div>").html(this._getText(t)))}});w.ui.plugin(A)}(window.kendo.jQuery),function(e){var t=window.kendo.mobile.ui,n=t.Shim,i=t.Widget,r="beforeOpen",o="open",a="close",s="init",l=t.View.extend({init:function(e,t){var n=this;i.fn.init.call(n,e,t),n._id(),n._wrap(),n._shim(),this.options.$angular||(n._layout(),n._scroller(),n._model()),n.element.css("display",""),n.trigger(s)},events:[s,r,o,a],options:{name:"ModalView",modal:!0,width:null,height:null},destroy:function(){i.fn.destroy.call(this),this.shim.destroy()},open:function(t){var n=this;n.target=e(t),n.shim.show(),n._invokeNgController(),n.trigger("show",{view:n})},openFor:function(e){this.trigger(r,{target:e})||(this.open(e),this.trigger(o,{target:e}))},close:function(){this.element.is(":visible")&&!this.trigger(a)&&this.shim.hide()},_wrap:function(){var e,t,n=this,i=n.element,r=n.options;e=i[0].style.width||"auto",t=i[0].style.height||"auto",i.addClass("km-modalview").wrap('<div class="km-modalview-wrapper" />'),n.wrapper=i.parent().css({width:r.width||e||300,height:r.height||t||300}).addClass("auto"==t?" km-auto-height":""),i.css({width:"",height:""})},_shim:function(){var e=this;e.shim=new n(e.wrapper,{modal:e.options.modal,position:"center center",align:"center center",effect:"fade:in",className:"km-modalview-root",hide:function(t){e.trigger(a)&&t.preventDefault()}})}});t.plugin(l)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.support.mobileOS,o=n.effects.Transition,a=n.roleSelector,s="x",l=i.ui,c=!(r.ios&&7==r.majorVersion&&!r.appMode),u="beforeShow",d="init",h="show",p="hide",f="afterHide",g={enable:e.noop},m=l.View.extend({init:function(t,r){var o,s,l,u,h;if(e(t).parent().prepend(t),i.ui.Widget.fn.init.call(this,t,r),this.options.$angular||(this._layout(),this._scroller()),this._model(),o=this.element.closest(a("pane")).data("kendoMobilePane"))this.pane=o,this.pane.bind("viewShow",function(e){u._viewShow(e)}),this.pane.bind("sameViewRequested",function(){u.hide()}),s=this.userEvents=new n.UserEvents(o.element,{filter:a("view splitview"),allowSelection:!0});else{if(this.currentView=g,!(l=e(this.options.container)))throw Error("The drawer needs a container configuration option set.");s=this.userEvents=new n.UserEvents(l,{allowSelection:!0}),this._attachTransition(l)}u=this,h=function(e){u.visible&&(u.hide(),e.preventDefault())},this.options.swipeToOpen&&c?(s.bind("press",function(){u.transition.cancel()}),s.bind("start",function(e){u._start(e)}),s.bind("move",function(e){u._update(e)}),s.bind("end",function(e){u._end(e)}),s.bind("tap",h)):s.bind("press",h),this.leftPositioned="left"===this.options.position,this.visible=!1,this.element.hide().addClass("km-drawer").addClass(this.leftPositioned?"km-left-drawer":"km-right-drawer"),this.trigger(d)},options:{name:"Drawer",position:"left",views:[],swipeToOpenViews:[],swipeToOpen:!0,title:"",container:null},events:[u,p,f,d,h],show:function(){this._activate()&&this._show()},hide:function(){this.currentView&&(this.currentView.enable(),m.current=null,this._moveViewTo(0),this.trigger(p,{view:this}))},openFor:function(){this.visible?this.hide():this.show()},destroy:function(){l.View.fn.destroy.call(this),this.userEvents.destroy()},_activate:function(){return!!this.visible||!(!this._currentViewIncludedIn(this.options.views)||this.trigger(u,{view:this}))&&(this._setAsCurrent(),this.element.show(),this.trigger(h,{view:this}),this._invokeNgController(),!0)},_currentViewIncludedIn:function(t){if(!this.pane||!t.length)return!0;var n=this.pane.view();return e.inArray(n.id.replace("#",""),t)>-1||e.inArray(n.element.attr("id"),t)>-1},_show:function(){this.currentView.enable(!1),this.visible=!0;var e=this.element.width();this.leftPositioned||(e=-e),this._moveViewTo(e)},_setAsCurrent:function(){m.last!==this&&(m.last&&m.last.element.hide(),this.element.show()),m.last=this,m.current=this},_moveViewTo:function(e){this.userEvents.cancel(),this.transition.moveTo({location:e,duration:400,ease:o.easeOutExpo})},_viewShow:function(e){return this.currentView&&this.currentView.enable(),this.currentView===e.view?(this.hide(),t):(this.currentView=e.view,this._attachTransition(e.view.element),t)},_attachTransition:function(e){var t=this,i=this.movable,r=i&&i.x;this.transition&&(this.transition.cancel(),this.movable.moveAxis("x",0)),i=this.movable=new n.ui.Movable(e),this.transition=new o({axis:s,movable:this.movable,onEnd:function(){0===i.x&&(e[0].style.cssText="",t.element.hide(),t.trigger(f),t.visible=!1)}}),r&&(e.addClass("k-fx-hidden"),n.animationFrame(function(){e.removeClass("k-fx-hidden"),t.movable.moveAxis(s,r),t.hide()}))},_start:function(e){var i,r,o,a,s,l=e.sender;return Math.abs(e.x.velocity)<Math.abs(e.y.velocity)||n.triggeredByInput(e.event)||!this._currentViewIncludedIn(this.options.swipeToOpenViews)?(l.cancel(),t):(i=this.leftPositioned,r=this.visible,o=i&&r||!i&&!m.current,a=!i&&r||i&&!m.current,s=0>e.x.velocity,(o&&s||a&&!s)&&this._activate()?(l.capture(),t):(l.cancel(),t))},_update:function(e){var t,n=this.movable.x+e.x.delta;t=this.leftPositioned?Math.min(Math.max(0,n),this.element.width()):Math.max(Math.min(0,n),-this.element.width()),this.movable.moveAxis(s,t),e.event.preventDefault(),e.event.stopPropagation()},_end:function(e){var t=e.x.velocity,n=Math.abs(this.movable.x)>this.element.width()/2;(this.leftPositioned?t>-.8&&(t>.8||n):.8>t&&(-.8>t||n))?this._show():this.hide()}});l.plugin(m)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r=n.View.extend({init:function(r,o){var a,s,l=this;i.fn.init.call(l,r,o),r=l.element,e.extend(l,o),l._id(),l.options.$angular?l._overlay():(l._layout(),l._overlay()),l._style(),s=r.children(l._locate("modalview")),l.options.$angular?s.each(function(n,i){t.compileMobileDirective(e(i),o.$angular[0])}):t.mobile.init(s),l.panes=[],l._paramsHistory=[],l.options.$angular?(l.element.children(t.directiveSelector("pane")).each(function(){a=t.compileMobileDirective(e(this),o.$angular[0]),l.panes.push(a)}),l.element.children(t.directiveSelector("header footer")).each(function(){t.compileMobileDirective(e(this),o.$angular[0])})):l.content.children(t.roleSelector("pane")).each(function(){a=t.initWidget(this,{},n.roles),l.panes.push(a)}),l.expandedPaneShim=e("<div class='km-expanded-pane-shim' />").appendTo(l.element),l._shimUserEvents=new t.UserEvents(l.expandedPaneShim,{tap:function(){l.collapsePanes()}})},_locate:function(e){return this.options.$angular?t.directiveSelector(e):t.roleSelector(e)},options:{name:"SplitView",style:"horizontal"},expandPanes:function(){this.element.addClass("km-expanded-splitview")},collapsePanes:function(){this.element.removeClass("km-expanded-splitview")},_layout:function(){var e=this,n=e.element;e.transition=t.attrValue(n,"transition"),t.mobile.ui.View.prototype._layout.call(this),t.mobile.init(this.header.add(this.footer)),e.element.addClass("km-splitview"),e.content.addClass("km-split-content")},_style:function(){var t,n=this.options.style,i=this.element;n&&(t=n.split(" "),e.each(t,function(){i.addClass("km-split-"+this)}))},showStart:function(){var t=this;t.element.css("display",""),t.inited?this._invokeNgController():(t.inited=!0,e.each(t.panes,function(){this.options.initial?this.navigateToInitial():this.navigate("")}),t.trigger("init",{view:t})),t.trigger("show",{view:t})}});n.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e){return d.wp?"-kendo-landscape"==e.css("animation-name"):Math.abs(window.orientation)/90==1}function i(e){return n(e)?v:p}function r(e){e.parent().addBack().css("min-height",window.innerHeight)}function o(){e("meta[name=viewport]").remove(),M.append(y({height:", width=device-width"+(n()?", height="+window.innerHeight+"px":l.mobileOS.flatVersion>=600&&700>l.mobileOS.flatVersion?", height="+window.innerWidth+"px":", height=device-height")}))}var a=window.kendo,s=a.mobile,l=a.support,c=s.ui.Widget,u=s.ui.Pane,d=l.mobileOS,h="blackberry"==d.device&&d.flatVersion>=600&&1e3>d.flatVersion&&d.appMode,p="km-vertical",f="chrome"===d.browser,g=d.ios&&d.flatVersion>=700&&800>d.flatVersion&&(d.appMode||f),m=Math.abs(window.orientation)/90==1,v="km-horizontal",_={ios7:{ios:!0,browser:"default",device:"iphone",flatVersion:"700",majorVersion:"7",minorVersion:"0.0",name:"ios",tablet:!1},ios:{ios:!0,browser:"default",device:"iphone",flatVersion:"612",majorVersion:"6",minorVersion:"1.2",name:"ios",tablet:!1},android:{android:!0,browser:"default",device:"android",flatVersion:"442",majorVersion:"4",minorVersion:"4.2",name:"android",tablet:!1},blackberry:{blackberry:!0,browser:"default",device:"blackberry",flatVersion:"710",majorVersion:"7",minorVersion:"1.0",name:"blackberry",tablet:!1},meego:{meego:!0,browser:"default",device:"meego",flatVersion:"850",majorVersion:"8",minorVersion:"5.0",name:"meego",tablet:!1},wp:{wp:!0,browser:"default",device:"wp",flatVersion:"800",majorVersion:"8",minorVersion:"0.0",name:"wp",tablet:!1}},y=a.template('<meta content="initial-scale=#: data.scale #, maximum-scale=#: data.scale #, user-scalable=no#=data.height#" name="viewport" />',{usedWithBlock:!1}),b=a.template('<meta name="apple-mobile-web-app-capable" content="#= data.webAppCapable === false ? \'no\' : \'yes\' #" /> <meta name="apple-mobile-web-app-status-bar-style" content="#=data.statusBarStyle#" /> <meta name="msapplication-tap-highlight" content="no" /> ',{usedWithBlock:!1}),w=a.template("<style>.km-view { clip: rect(0 #= data.width #px #= data.height #px 0); }</style>",{usedWithBlock:!1}),k=d.android&&"chrome"!=d.browser||d.blackberry,x=a.template('<link rel="apple-touch-icon'+(d.android?"-precomposed":"")+'" # if(data.size) { # sizes="#=data.size#" #}# href="#=data.icon#" />',{usedWithBlock:!1}),C=("iphone"==d.device||"ipod"==d.device)&&7>d.majorVersion,T=("iphone"==d.device||"ipod"==d.device)&&d.majorVersion>=7?"none":null,S="mobilesafari"==d.browser?60:0,D=e(window),A=window.screen,M=e("head"),E="init",I=e.proxy,R=c.extend({init:function(t,n){s.application=this,e(e.proxy(this,"bootstrap",t,n))},bootstrap:function(t,n){var i,r,o;(t=e(t))[0]||(t=e(document.body)),c.fn.init.call(this,t,n),this.element.removeAttr("data-"+a.ns+"role"),this._setupPlatform(),this._attachMeta(),this._setupElementClass(),this._attachHideBarHandlers(),delete(i=e.extend({},this.options)).name,r=this,o=function(){r.pane=new u(r.element,i),r.pane.navigateToInitial(),r.options.updateDocumentTitle&&r._setupDocumentTitle(),r._startHistory(),r.trigger(E)},this.options.$angular?setTimeout(o):o()},options:{name:"Application",hideAddressBar:!0,browserHistory:!0,historyTransition:T,modelScope:window,statusBarStyle:"black",transition:"",retina:!1,platform:null,skin:null,updateDocumentTitle:!0,useNativeScrolling:!1},events:[E],navigate:function(e,t){this.pane.navigate(e,t)},replace:function(e,t){this.pane.replace(e,t)},scroller:function(){return this.view().scroller},hideLoading:function(){if(!this.pane)throw Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.");this.pane.hideLoading()},showLoading:function(){if(!this.pane)throw Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.");this.pane.showLoading()},changeLoadingMessage:function(e){if(!this.pane)throw Error("The mobile application instance is not fully instantiated. Please consider changing the message in the application init event handler.");this.pane.changeLoadingMessage(e)},view:function(){return this.pane.view()},skin:function(e){var t=this;return arguments.length?(t.options.skin=e||"",t.element[0].className="km-pane",t._setupPlatform(),t._setupElementClass(),t.options.skin):t.options.skin},destroy:function(){c.fn.destroy.call(this),this.pane.destroy(),this.router.destroy()},_setupPlatform:function(){var t=this,n=t.options.platform,i=t.options.skin,r=[],o=d||_.ios7;n&&(o.setDefaultPlatform=!0,"string"==typeof n?(r=n.split("-"),o=e.extend({variant:r[1]},o,_[r[0]])):o=n),i&&(r=i.split("-"),d||(o.setDefaultPlatform=!1),o=e.extend({},o,{skin:r[0],variant:r[1]})),o.variant||(o.noVariantSet=!0,o.variant="dark"),t.os=o,t.osCssClass=function(e,t){var n=[];return d&&n.push("km-on-"+d.name),n.push(e.skin?"km-"+e.skin:"ios"==e.name&&e.majorVersion>6?"km-ios7":"km-"+e.name),("ios"==e.name&&7>e.majorVersion||"ios"!=e.name)&&n.push("km-"+e.name+e.majorVersion),n.push("km-"+e.majorVersion),n.push("km-m"+(e.minorVersion?e.minorVersion[0]:0)),e.variant&&(e.skin&&e.skin===e.name||!e.skin||!1===e.setDefaultPlatform)&&n.push("km-"+(e.skin?e.skin:e.name)+"-"+e.variant),e.cordova&&n.push("km-cordova"),n.push(e.appMode?"km-app":"km-web"),t&&t.statusBarStyle&&n.push("km-"+t.statusBarStyle+"-status-bar"),n.join(" ")}(t.os,t.options),"wp"==o.name&&(t.refreshBackgroundColorProxy||(t.refreshBackgroundColorProxy=e.proxy(function(){(t.os.variant&&t.os.skin&&t.os.skin===t.os.name||!t.os.skin)&&t.element.removeClass("km-wp-dark km-wp-light km-wp-dark-force km-wp-light-force").addClass(function(t){return"km-wp-"+(t.noVariantSet?0===parseInt(e("<div style='background: Background' />").css("background-color").split(",")[1],10)?"dark":"light":t.variant+" km-wp-"+t.variant+"-force")}(t.os))},t)),e(document).off("visibilitychange",t.refreshBackgroundColorProxy),e(document).off("resume",t.refreshBackgroundColorProxy),o.skin||(t.element.parent().css("overflow","hidden"),e(document).on("visibilitychange",t.refreshBackgroundColorProxy),e(document).on("resume",t.refreshBackgroundColorProxy),t.refreshBackgroundColorProxy()))},_startHistory:function(){this.options.browserHistory?(this.router=new a.Router({pushState:this.options.pushState,root:this.options.root,hashBang:this.options.hashBang}),this.pane.bindToRouter(this.router),this.router.start()):this.options.initial||this.pane.navigate("")},_resizeToScreenHeight:function(){var t,i=e("meta[name=apple-mobile-web-app-status-bar-style]").attr("content").match(/black-translucent|hidden/),r=this.element;t=f?window.innerHeight:n(r)?i?m?A.availWidth+20:A.availWidth:m?A.availWidth:A.availWidth-20:i?m?A.availHeight:A.availHeight+20:m?A.availHeight-20:A.availHeight,r.height(t)},_setupElementClass:function(){var t,n=this,s=n.element;s.parent().addClass("km-root km-"+(n.os.tablet?"tablet":"phone")),s.addClass(n.osCssClass+" "+i(s)),this.options.useNativeScrolling&&s.parent().addClass("km-native-scrolling"),f&&s.addClass("km-ios-chrome"),l.wpDevicePixelRatio&&s.parent().css("font-size",l.wpDevicePixelRatio+"em"),this.options.retina&&(s.parent().addClass("km-retina"),s.parent().css("font-size",.93*l.devicePixelRatio+"em")),h&&o(),n.options.useNativeScrolling?s.parent().addClass("km-native-scrolling"):k&&(t=(screen.availWidth>screen.availHeight?screen.availWidth:screen.availHeight)+200,e(w({width:t,height:t})).appendTo(M)),g&&n._resizeToScreenHeight(),a.onResize(function(){s.removeClass("km-horizontal km-vertical").addClass(i(s)),n.options.useNativeScrolling&&r(s),g&&n._resizeToScreenHeight(),h&&o(),a.resize(s)})},_clearExistingMeta:function(){M.find("meta").filter("[name|='apple-mobile-web-app'],[name|='msapplication-tap'],[name='viewport']").remove()},_attachMeta:function(){var e,t=this.options,n=t.icon;if(this._clearExistingMeta(),h||M.prepend(y({height:"",scale:this.options.retina?1/l.devicePixelRatio:"1.0"})),M.prepend(b(t)),n)for(e in"string"==typeof n&&(n={"":n}),n)M.prepend(x({icon:n[e],size:e}));t.useNativeScrolling&&r(this.element)},_attachHideBarHandlers:function(){var e=this,t=I(e,"_hideBar");!l.mobileOS.appMode&&e.options.hideAddressBar&&C&&!e.options.useNativeScrolling&&(e._initialHeight={},D.on("load",t),a.onResize(function(){setTimeout(window.scrollTo,0,0,1)}))},_setupDocumentTitle:function(){var e=document.title;this.pane.bind("viewShow",function(t){var n=t.view.title;document.title=void 0!==n?n:e})},_hideBar:function(){this.element.height(a.support.transforms.css+"calc(100% + "+S+"px)"),e(window).trigger(a.support.resize)}});a.mobile.Application=R,a.ui.plugin(R,a.mobile,"Mobile")}(window.kendo.jQuery),function(e,t){function n(t,n,i){e(n.target).closest(".km-button,.km-detail").toggleClass("km-state-active",i),l&&t.deactivateTimeoutID&&(clearTimeout(t.deactivateTimeoutID),t.deactivateTimeoutID=0)}function i(t){return e('<span class="km-badge">'+t+"</span>")}var r=window.kendo,o=r.mobile.ui,a=o.Widget,s=r.support.mobileOS,l=s.android&&s.flatVersion>=300,c="click",u="disabled",d=a.extend({init:function(e,t){var i,o=this;a.fn.init.call(o,e,t),i="up"===o.options.clickOn,o._wrap(),o._style(),i||o.element.attr("data-navigate-on-press",!0),o.options.enable=o.options.enable&&!o.element.attr(u),o.enable(o.options.enable),o._userEvents=new r.UserEvents(o.element,{allowSelection:!i,press:function(e){o._activate(e)},release:function(e){n(o,e,!1),i||e.event.stopPropagation()}}),o._userEvents.bind(i?"tap":"press",function(e){o._release(e)}),l&&o.element.on("move",function(e){o._timeoutDeactivate(e)})},destroy:function(){a.fn.destroy.call(this),this._userEvents.destroy()},events:[c],options:{name:"Button",icon:"",style:"",badge:"",clickOn:"up",enable:!0},badge:function(e){var t=this.badgeElement=this.badgeElement||i(e).appendTo(this.element);return e||0===e?(t.html(e),this):!1===e?(t.empty().remove(),this.badgeElement=!1,this):t.html()},enable:function(e){var n=this.element;t===e&&(e=!0),this.options.enable=e,e?n.removeAttr(u):n.attr(u,u),n.toggleClass("km-state-disabled",!e)},_timeoutDeactivate:function(e){this.deactivateTimeoutID||(this.deactivateTimeoutID=setTimeout(n,500,this,e,!1))},_activate:function(e){var t=document.activeElement,i=t?t.nodeName:"";this.options.enable&&(n(this,e,!0),("INPUT"==i||"TEXTAREA"==i)&&t.blur())},_release:function(n){var i=this;if(!(n.which>1))return i.options.enable?(i.trigger(c,{target:e(n.target),button:i.element})&&n.preventDefault(),t):(n.preventDefault(),t)},_style:function(){var t,n=this.options.style,i=this.element;n&&(t=n.split(" "),e.each(t,function(){i.addClass("km-"+this)}))},_wrap:function(){var t=this,n=t.options.icon,r=t.options.badge,o='<span class="km-icon km-'+n,a=t.element.addClass("km-button"),s=a.children("span:not(.km-icon)").addClass("km-text"),l=a.find("img").addClass("km-image");!s[0]&&a.html()&&(s=a.wrapInner('<span class="km-text" />').children("span.km-text")),!l[0]&&n&&(s[0]||(o+=" km-notext"),t.iconElement=a.prepend(e(o+'" />'))),(r||0===r)&&(t.badgeElement=i(r).appendTo(a))}}),h=d.extend({options:{name:"BackButton",style:"back"},init:function(e,n){var i=this;d.fn.init.call(i,e,n),t===i.element.attr("href")&&i.element.attr("href","#:back")}}),p=d.extend({options:{name:"DetailButton",style:""},init:function(e,t){d.fn.init.call(this,e,t)},_style:function(){var t,n=this.options.style+" detail",i=this.element;n&&(t=n.split(" "),e.each(t,function(){i.addClass("km-"+this)}))},_wrap:function(){var t=this.options.icon,n='<span class="km-icon km-'+t,i=this.element,r=i.children("span");!i.find("img").addClass("km-image")[0]&&t&&(r[0]||(n+=" km-notext"),i.prepend(e(n+'" />')))}});o.plugin(d),o.plugin(h),o.plugin(p)}(window.kendo.jQuery),function(e,t){function n(t){return e('<span class="km-badge">'+t+"</span>")}var i=window.kendo,r=i.mobile.ui,o=r.Widget,a="km-state-active",s="km-state-disabled",l="select",c=o.extend({init:function(e,t){var n=this;o.fn.init.call(n,e,t),n.element.addClass("km-buttongroup").find("li").each(n._button),n.element.on(n.options.selectOn,"li:not(.km-state-active)","_select"),n._enable=!0,n.select(n.options.index),n.options.enable||(n._enable=!1,n.wrapper.addClass(s))},events:[l],options:{name:"ButtonGroup",selectOn:"down",index:-1,enable:!0},current:function(){return this.element.find("."+a)},select:function(n){var i=this,r=-1;n!==t&&-1!==n&&i._enable&&!e(n).is("."+s)&&(i.current().removeClass(a),"number"==typeof n?(r=n,n=e(i.element[0].children[n])):n.nodeType&&(r=(n=e(n)).index()),n.addClass(a),i.selectedIndex=r)},badge:function(t,i){var r,o=this.element;return isNaN(t)||(t=o.children().get(t)),t=o.find(t),r=e(t.children(".km-badge")[0]||n(i).appendTo(t)),i||0===i?(r.html(i),this):!1===i?(r.empty().remove(),this):r.html()},enable:function(e){var n=this.wrapper;t===e&&(e=!0),e?n.removeClass(s):n.addClass(s),this._enable=this.options.enable=e},_button:function(){var t=e(this).addClass("km-button"),r=i.attrValue(t,"icon"),o=i.attrValue(t,"badge"),a=t.children("span"),s=t.find("img").addClass("km-image");a[0]||(a=t.wrapInner("<span/>").children("span")),a.addClass("km-text"),!s[0]&&r&&t.prepend(e('<span class="km-icon km-'+r+'"/>')),(o||0===o)&&n(o).appendTo(t)},_select:function(e){e.which>1||e.isDefaultPrevented()||!this._enable||(this.select(e.currentTarget),this.trigger(l,{index:this.selectedIndex}))}});r.plugin(c)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r="km-collapsed",o="km-expanded",a="km-animated",s="expand",l="collapse",c=i.extend({init:function(n,s){var l=this,c=e(n);i.fn.init.call(l,c,s),c.addClass("km-collapsible"),l._buildHeader(),l.content=c.children().not(l.header).wrapAll("<div data-role='collapsible-content' class='km-collapsible-content'></div>").parent(),l._userEvents=new t.UserEvents(l.header,{tap:function(){l.toggle()}}),c.addClass(l.options.collapsed?r:o),l.options.inset&&c.addClass("km-collapsibleinset"),l.options.animation?(l.content.addClass(a),l.content.height(0),l.options.collapsed&&l.content.hide()):l.options.collapsed&&l.content.hide()},events:[s,l],options:{name:"Collapsible",collapsed:!0,collapseIcon:"arrow-n",expandIcon:"arrow-s",iconPosition:"left",animation:!0,inset:!1},destroy:function(){i.fn.destroy.call(this),this._userEvents.destroy()},expand:function(e){var n=this.options.collapseIcon,i=this.content,l=t.support.mobileOS.ios;this.trigger(s)||(n&&this.header.find(".km-icon").removeClass().addClass("km-icon km-"+n),this.element.removeClass(r).addClass(o),this.options.animation&&!e?(i.off("transitionend"),i.show(),l&&i.removeClass(a),i.height(this._getContentHeight()),l&&i.addClass(a),t.resize(i)):i.show())},collapse:function(e){var t=this.options.expandIcon,n=this.content;this.trigger(l)||(t&&this.header.find(".km-icon").removeClass().addClass("km-icon km-"+t),this.element.removeClass(o).addClass(r),this.options.animation&&!e?(n.one("transitionend",function(){n.hide()}),n.height(0)):n.hide())},toggle:function(e){this.isCollapsed()?this.expand(e):this.collapse(e)},isCollapsed:function(){return this.element.hasClass(r)},resize:function(){!this.isCollapsed()&&this.options.animation&&this.content.height(this._getContentHeight())},_buildHeader:function(){var t=this.element.children(":header").wrapAll("<div data-role='collapsible-header' class='km-collapsible-header'></div>"),n=e('<span class="km-icon"/>'),i=this.options.collapsed?this.options.expandIcon:this.options.collapseIcon,r=this.options.iconPosition;i&&(t.prepend(n),n.addClass("km-"+i)),this.header=t.parent(),this.header.addClass("km-icon-"+r)},_getContentHeight:function(){var e,t=this.content.attr("style");return this.content.css({position:"absolute",visibility:"hidden",height:"auto"}),e=this.content.height(),this.content.attr("style",t||""),e}});n.plugin(c)}(window.kendo.jQuery),function(e,t){function n(){return this.nodeType===m.TEXT_NODE&&this.nodeValue.match(z)}function i(e,t){t&&!e[0].querySelector(".km-icon")&&e.prepend('<span class="km-icon km-'+t+'"/>')}function r(e){i(e,C(e,"icon")),i(e,C(e.children(k),"icon"))}function o(e){var t=e.parent(),r=e.add(t.children(g.roleSelector("detailbutton")));t.contents().not(r).not(n).length||(e.addClass("km-listview-link").attr(g.attr("role"),"listview-link"),i(e,C(t,"icon")),i(e,C(e,"icon")))}function a(t,n){e(t).css("transform","translate3d(0px, "+n+"px, 0px)")}var s,l,c,u,d,h,p,f,g=window.kendo,m=window.Node,v=g.mobile,_=v.ui,y=g.data.DataSource,b=_.DataBoundWidget,w=".km-listview-link, .km-listview-label",k="["+g.attr("icon")+"]",x=e.proxy,C=g.attrValue,T="km-group-title",S=g.template('<li><div class="'+T+'"><div class="km-text">#= this.headerTemplate(data) #</div></div><ul>#= kendo.render(this.template, data.items)#</ul></li>'),D=g.template('<form class="km-filter-form"><div class="km-filter-wrap"><input type="search" placeholder="#=placeholder#"/><a href="\\#" class="km-filter-reset" title="Clear"><span class="km-icon km-clear"></span><span class="km-text">Clear</span></a></div></form>'),A=".kendoMobileListView",M="styled",E="dataBound",I="dataBinding",R="itemChange",P="click",L="change",F="progress",B="function",z=/^\s+$/,H=/button/,N=g.Class.extend({init:function(e){var t,n,i=e.scroller();i&&(this.options=e.options,this.element=e.element,this.scroller=e.scroller(),this._shouldFixHeaders(),t=this,n=function(){t._cacheHeaders()},e.bind("resize",n),e.bind(M,n),e.bind(E,n),i.bind("scroll",function(e){t._fixHeader(e)}))},_fixHeader:function(t){if(this.fixedHeaders){var n,i,r,o=0,a=this.scroller,s=this.headers,l=t.scrollTop;do{if(!(n=s[o++])){r=e("<div />");break}i=n.offset,r=n.header}while(i+1>l);this.currentHeader!=o&&(a.fixedContainer.html(r.clone()),this.currentHeader=o)}},_shouldFixHeaders:function(){this.fixedHeaders="group"===this.options.type&&this.options.fixedHeaders},_cacheHeaders:function(){if(this._shouldFixHeaders(),this.fixedHeaders){var t=[],n=this.scroller.scrollTop;this.element.find("."+T).each(function(i,r){r=e(r),t.unshift({offset:r.position().top+n,header:r})}),this.headers=t,this._fixHeader({scrollTop:n})}}}),O=function(){return{page:1}},V=g.Class.extend({init:function(e){var t=this,n=e.options,i=e.scroller(),r=n.pullParameters||O;this.listView=e,this.scroller=i,e.bind("_dataSource",function(e){t.setDataSource(e.dataSource)}),i.setOptions({pullToRefresh:!0,pull:function(){t._pulled||(t._pulled=!0,t.dataSource.read(r.call(e,t._first)))},messages:{pullTemplate:n.messages.pullTemplate,releaseTemplate:n.messages.releaseTemplate,refreshTemplate:n.messages.refreshTemplate}})},setDataSource:function(e){var t=this;this._first=e.view()[0],this.dataSource=e,e.bind("change",function(){t._change()}),e.bind("error",function(){t._change()})},_change:function(){var e,t=this.scroller,n=this.dataSource;this._pulled&&t.pullHandled(),(this._pulled||!this._first)&&(e=n.view())[0]&&(this._first=e[0]),this._pulled=!1}}),U=g.Observable.extend({init:function(e){var t=this;g.Observable.fn.init.call(t),t.buffer=e.buffer,t.height=e.height,t.item=e.item,t.items=[],t.footer=e.footer,t.buffer.bind("reset",function(){t.refresh()})},refresh:function(){for(var e,t,n,i,r=this.buffer,o=this.items,a=!1;o.length;)o.pop().destroy();for(this.offset=r.offset,e=this.item,i=0;r.viewSize>i;i++){if(i===r.total()){a=!0;break}(n=e(this.content(this.offset+o.length))).below(t),t=n,o.push(n)}this.itemCount=o.length,this.trigger("reset"),this._resize(),a&&this.trigger("endReached")},totalHeight:function(){if(!this.items[0])return 0;var e=this,t=e.items,n=t[0].top,i=t[t.length-1].bottom,r=(i-n)/e.itemCount,o=e.buffer.length-e.offset-e.itemCount;return(this.footer?this.footer.height:0)+i+o*r},batchUpdate:function(e){var t,n,i=this.height(),r=this.items,o=this.offset;if(r[0]){if(this.lastDirection)for(;r[r.length-1].bottom>e+2*i&&0!==this.offset;)this.offset--,(t=r.pop()).update(this.content(this.offset)),t.above(r[0]),r.unshift(t);else for(;e-i>r[0].top;){if((n=this.offset+this.itemCount)===this.buffer.total()){this.trigger("endReached");break}if(n===this.buffer.length)break;(t=r.shift()).update(this.content(this.offset+this.itemCount)),t.below(r[r.length-1]),r.push(t),this.offset++}o!==this.offset&&this._resize()}},update:function(e){var t,n,i,r,o=this,a=this.items,s=this.height(),l=this.itemCount,c=s/2,u=(this.lastTop||0)>e,d=e-c,h=e+s+c;a[0]&&(this.lastTop=e,this.lastDirection=u,u?a[0].top>d&&a[a.length-1].bottom>h+c&&this.offset>0&&(this.offset--,t=a.pop(),n=a[0],t.update(this.content(this.offset)),a.unshift(t),t.above(n),o._resize()):h>a[a.length-1].bottom&&d-c>a[0].top&&((r=this.offset+l)===this.buffer.total()?this.trigger("endReached"):r!==this.buffer.length&&(t=a.shift(),i=a[a.length-1],a.push(t),t.update(this.content(this.offset+this.itemCount)),o.offset++,t.below(i),o._resize())))},content:function(e){return this.buffer.at(e)},destroy:function(){this.unbind()},_resize:function(){var e=this.items,t=0,n=0,i=e[0],r=e[e.length-1];i&&(t=i.top,n=r.bottom),this.trigger("resize",{top:t,bottom:n}),this.footer&&this.footer.below(r)}});g.mobile.ui.VirtualList=U,s=g.Class.extend({init:function(t,n){var i=t.append([n],!0)[0],r=i.offsetHeight;e.extend(this,{top:0,element:i,listView:t,height:r,bottom:r})},update:function(e){this.element=this.listView.setDataItem(this.element,e)},above:function(e){e&&(this.height=this.element.offsetHeight,this.top=e.top-this.height,this.bottom=e.top,a(this.element,this.top))},below:function(e){e&&(this.height=this.element.offsetHeight,this.top=e.bottom,this.bottom=this.top+this.height,a(this.element,this.top))},destroy:function(){g.destroy(this.element),e(this.element).remove()}}),l='<div><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>',c=g.Class.extend({init:function(t){this.element=e('<li class="km-load-more km-scroller-refresh" style="display: none"></li>').appendTo(t.element),this._loadIcon=e(l).appendTo(this.element)},enable:function(){this.element.show(),this.height=this.element.outerHeight(!0)},disable:function(){this.element.hide(),this.height=0},below:function(e){e&&(this.top=e.bottom,this.bottom=this.height+this.top,a(this.element,this.top))}}),u=c.extend({init:function(t,n){this._loadIcon=e(l).hide(),this._loadButton=e('<a class="km-load">'+t.options.messages.loadMoreText+"</a>").hide(),this.element=e('<li class="km-load-more" style="display: none"></li>').append(this._loadIcon).append(this._loadButton).appendTo(t.element);var i=this;this._loadButton.kendoMobileButton().data("kendoMobileButton").bind("click",function(){i._hideShowButton(),n.next()}),n.bind("resize",function(){i._showLoadButton()}),this.height=this.element.outerHeight(!0),this.disable()},_hideShowButton:function(){this._loadButton.hide(),this.element.addClass("km-scroller-refresh"),this._loadIcon.css("display","block")},_showLoadButton:function(){this._loadButton.show(),this.element.removeClass("km-scroller-refresh"),this._loadIcon.hide()}}),d=g.Class.extend({init:function(e){var t=this;this.chromeHeight=e.wrapper.children().not(e.element).outerHeight()||0,this.listView=e,this.scroller=e.scroller(),this.options=e.options,e.bind("_dataSource",function(e){t.setDataSource(e.dataSource,e.empty)}),e.bind("resize",function(){t.list.items.length&&(t.scroller.reset(),t.buffer.range(0),t.list.refresh())}),this.scroller.makeVirtual(),this.scroller.bind("scroll",function(e){t.list.update(e.scrollTop)}),this.scroller.bind("scrollEnd",function(e){t.list.batchUpdate(e.scrollTop)})},destroy:function(){this.list.unbind(),this.buffer.unbind()},setDataSource:function(t,n){var i,r,o,a,l=this,d=this.options,h=this.listView,p=h.scroller(),f=d.loadMore;if(this.dataSource=t,!(i=t.pageSize()||d.virtualViewSize)&&!n)throw Error("the DataSource does not have page size configured. Page Size setting is mandatory for the mobile listview virtual scrolling to work as expected.");this.buffer&&this.buffer.destroy(),r=new g.data.Buffer(t,Math.floor(i/2),f),o=f?new u(h,r):new c(h),this.list&&this.list.destroy(),(a=new U({buffer:r,footer:o,item:function(e){return new s(h,e)},height:function(){return p.height()}})).bind("resize",function(){l.updateScrollerSize(),h.updateSize()}),a.bind("reset",function(){l.footer.enable()}),a.bind("endReached",function(){o.disable(),l.updateScrollerSize()}),r.bind("expand",function(){a.lastDirection=!1,a.batchUpdate(p.scrollTop)}),e.extend(this,{buffer:r,scroller:p,list:a,footer:o})},updateScrollerSize:function(){this.scroller.virtualSize(0,this.list.totalHeight()+this.chromeHeight)},refresh:function(){this.list.refresh()},reset:function(){this.buffer.range(0),this.list.refresh()}}),h=g.Class.extend({init:function(e){var t,n=this;this.listView=e,this.options=e.options,t=this,this._refreshHandler=function(e){t.refresh(e)},this._progressHandler=function(){e.showLoading()},e.bind("_dataSource",function(e){n.setDataSource(e.dataSource)})},destroy:function(){this._unbindDataSource()},reset:function(){},refresh:function(e){var n,i,r,o,a,s=e&&e.action,l=e&&e.items,c=this.listView,u=this.dataSource,d=this.options.appendOnRefresh,h=u.view(),p=u.group(),f=p&&p[0];return"itemchange"!==s||c._hasBindingTarget()?("add"===s&&!f||d&&!c._filter?i=[]:"remove"===s&&!f&&(i=c.findByDataItem(l)),c.trigger(I,{action:s||"rebind",items:l,removedItems:i,index:e&&e.index})?(this._shouldShowLoading()&&c.hideLoading(),t):("add"!==s||f?"remove"!==s||f?f?c.replaceGrouped(h):d&&!c._filter?(r=c.prepend(h),o=h):c.replace(h):(r=[],c.remove(l)):(a=h.indexOf(l[0]))>-1&&(r=c.insertAt(l,a),o=l),this._shouldShowLoading()&&c.hideLoading(),c.trigger(E,{ns:_,addedItems:r,addedDataItems:o}),t)):((n=c.findByDataItem(l)[0])&&c.setDataItem(n,l[0]),t)},setDataSource:function(e){this.dataSource&&this._unbindDataSource(),this.dataSource=e,e.bind(L,this._refreshHandler),this._shouldShowLoading()&&this.dataSource.bind(F,this._progressHandler)},_unbindDataSource:function(){this.dataSource.unbind(L,this._refreshHandler).unbind(F,this._progressHandler)},_shouldShowLoading:function(){var e=this.options;return!e.pullToRefresh&&!e.loadMore&&!e.endlessScroll}}),p=g.Class.extend({init:function(t){var n=this,i=t.options.filterable,r="change paste",o=this;this.listView=t,this.options=i,t.element.before(D({placeholder:i.placeholder||"Search..."})),!1!==i.autoFilter&&(r+=" keyup"),this.element=t.wrapper.find(".km-search-form"),this.searchInput=t.wrapper.find("input[type=search]").closest("form").on("submit"+A,function(e){e.preventDefault()}).end().on("focus"+A,function(){n._oldFilter=n.searchInput.val()}).on(r.split(" ").join(A+" ")+A,x(this._filterChange,this)),this.clearButton=t.wrapper.find(".km-filter-reset").on(P,x(this,"_clearFilter")).hide(),this._dataSourceChange=e.proxy(this._refreshInput,this),t.bind("_dataSource",function(e){e.dataSource.bind("change",o._dataSourceChange)})},_refreshInput:function(){var e=this.listView.dataSource.filter();this.listView._filter.searchInput.val(e&&e.filters[0].field===this.listView.options.filterable.field?e.filters[0].value:"")},_search:function(e){this._filter=!0,this.clearButton[e?"show":"hide"](),this.listView.dataSource.filter(e)},_filterChange:function(e){var t=this;"paste"==e.type&&!1!==this.options.autoFilter?setTimeout(function(){t._applyFilter()},1):this._applyFilter()},_applyFilter:function(){var e=this.options,t=this.searchInput.val(),n=t.length?{field:e.field,operator:e.operator||"startswith",ignoreCase:e.ignoreCase,value:t}:null;t!==this._oldFilter&&(this._oldFilter=t,this._search(n))},_clearFilter:function(e){this.searchInput.val(""),this._search(null),e.preventDefault()}}),f=b.extend({init:function(t,n){var i=this;b.fn.init.call(this,t,n),t=this.element,(n=this.options).scrollTreshold&&(n.scrollThreshold=n.scrollTreshold),t.on("down",w,"_highlight").on("move up cancel",w,"_dim"),this._userEvents=new g.UserEvents(t,{filter:".km-list > li, > li:not(.km-group-container)",allowSelection:!0,tap:function(e){i._click(e)}}),t.css("-ms-touch-action","auto"),t.wrap('<div class="km-listview-wrapper" />'),this.wrapper=this.element.parent(),this._headerFixer=new N(this),this._itemsCache={},this._templates(),this.virtual=n.endlessScroll||n.loadMore,this._style(),this.options.$angular&&(this.virtual||this.options.pullToRefresh)?setTimeout(e.proxy(this,"_start")):this._start()},_start:function(){var e=this.options;this.options.filterable&&(this._filter=new p(this)),this._itemBinder=this.virtual?new d(this):new h(this),this.options.pullToRefresh&&(this._pullToRefreshHandler=new V(this)),this.setDataSource(e.dataSource),this._enhanceItems(this.items()),g.notify(this,_)},events:[P,I,E,R],options:{name:"ListView",style:"",type:"flat",autoBind:!0,fixedHeaders:!1,template:"#:data#",headerTemplate:'<span class="km-text">#:value#</span>',appendOnRefresh:!1,loadMore:!1,endlessScroll:!1,scrollThreshold:30,pullToRefresh:!1,messages:{loadMoreText:"Press to load more",pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},pullOffset:140,filterable:!1,virtualViewSize:null},refresh:function(){this._itemBinder.refresh()},reset:function(){this._itemBinder.reset()},setDataSource:function(e){var t=!e;this.dataSource=y.create(e),this.trigger("_dataSource",{dataSource:this.dataSource,empty:t}),this.options.autoBind&&!t&&(this.items().remove(),this.dataSource.fetch())},destroy:function(){b.fn.destroy.call(this),g.destroy(this.element),this._userEvents.destroy(),this._itemBinder&&this._itemBinder.destroy(),this.element.unwrap(),delete this.element,delete this.wrapper,delete this._userEvents},items:function(){return"group"===this.options.type?this.element.find(".km-list").children():this.element.children().not(".km-load-more")},scroller:function(){return this._scrollerInstance||(this._scrollerInstance=this.element.closest(".km-scroll-wrapper").data("kendoMobileScroller")),this._scrollerInstance},showLoading:function(){var e=this.view();e&&e.loader&&e.loader.show()},hideLoading:function(){var e=this.view();e&&e.loader&&e.loader.hide()},insertAt:function(e,t,n){var i=this;return i._renderItems(e,function(r){if(0===t?i.element.prepend(r):-1===t?i.element.append(r):i.items().eq(t-1).after(r),n)for(var o=0;r.length>o;o++)i.trigger(R,{item:r.eq(o),data:e[o],ns:_})})},append:function(e,t){return this.insertAt(e,-1,t)},prepend:function(e,t){return this.insertAt(e,0,t)},replace:function(e){return this.options.type="flat",this._angularItems("cleanup"),this.element.empty(),this._userEvents.cancel(),this._style(),this.insertAt(e,0)},replaceGrouped:function(t){this.options.type="group",this._angularItems("cleanup"),this.element.empty();var n=e(g.render(this.groupTemplate,t));this._enhanceItems(n.children("ul").children("li")),this.element.append(n),v.init(n),this._style(),this._angularItems("compile")},remove:function(e){var t=this.findByDataItem(e);this.angular("cleanup",function(){return{elements:t}}),g.destroy(t),t.remove()},findByDataItem:function(e){var t,n,i=[];for(t=0,n=e.length;n>t;t++)i[t]="[data-"+g.ns+"uid="+e[t].uid+"]";return this.element.find(i.join(","))},setDataItem:function(t,n){var i=this;return this._renderItems([n],function(r){var o=e(r[0]);g.destroy(t),e(t).replaceWith(o),i.trigger(R,{item:o,data:n,ns:_})})[0]},updateSize:function(){this._size=this.getSize()},_renderItems:function(t,n){var i=e(g.render(this.template,t));return this.angular("compile",function(){return{elements:i,data:t.map(function(e){return{dataItem:e}})}}),n(i),v.init(i),this._enhanceItems(i),i},_dim:function(e){this._toggle(e,!1)},_highlight:function(e){this._toggle(e,!0)},_toggle:function(t,n){if(!(t.which>1)){var i=e(t.currentTarget),r=i.parent(),o=!(C(i,"role")||"").match(H),a=t.isDefaultPrevented();o&&r.toggleClass("km-state-active",n&&!a)}},_templates:function(){var e=this.options.template,t=this.options.headerTemplate,n={},i={};typeof e===B&&(n.template=e,e="#=this.template(data)#"),this.template=x(g.template('<li data-uid="#=arguments[0].uid || ""#">'+e+"</li>"),n),i.template=this.template,typeof t===B&&(i._headerTemplate=t,t="#=this._headerTemplate(data)#"),i.headerTemplate=g.template(t),this.groupTemplate=x(S,i)},_click:function(t){if(!(t.event.which>1||t.event.isDefaultPrevented())){var n,i=t.target,r=e(t.event.target),o=r.closest(g.roleSelector("button","detailbutton","backbutton")),a=g.widgetInstance(o,_),s=i.attr(g.attr("uid"));s&&(n=this.dataSource.getByUid(s)),this.trigger(P,{target:r,item:i,dataItem:n,button:a})&&t.preventDefault()}},_styleGroups:function(){var t=this.element.children();t.children("ul").addClass("km-list"),t.each(function(){var t=e(this),n=t.contents().first();t.addClass("km-group-container"),n.is("ul")||n.is("div."+T)||n.wrap('<div class="km-group-title"><div class="km-text"></div></div>')})},_style:function(){var e=this.options,t="group"===e.type,n=this.element,i="inset"===e.style;n.addClass("km-listview").toggleClass("km-list",!t).toggleClass("km-virtual-list",this.virtual).toggleClass("km-listinset",!t&&i).toggleClass("km-listgroup",t&&!i).toggleClass("km-listgroupinset",t&&i),n.parents(".km-listview")[0]||n.closest(".km-content").toggleClass("km-insetcontent",i),t&&this._styleGroups(),this.trigger(M)},_enhanceItems:function(t){t.each(function(){var t,n=e(this),i=!1;n.children().each(function(){(t=e(this)).is("a")?(o(t),i=!0):t.is("label")&&(function(e){e[0].querySelector("input[type=checkbox],input[type=radio]")&&(e.parent().contents().not(e).not(function(){return 3==this.nodeType})[0]||(e.addClass("km-listview-label"),e.children("[type=checkbox],[type=radio]").addClass("km-widget km-icon km-check")))}(t),i=!0)}),i||r(n)})}}),_.plugin(f)}(window.kendo.jQuery),function(e,t){function n(n,i){var o=i.find("["+r.attr("align")+"="+n+"]");return o[0]?e('<div class="km-'+n+'item" />').append(o).prependTo(i):t}function i(t){var n=t.siblings(),i=!!t.children("ul")[0],o=!!n[0]&&""===e.trim(t.text()),a=!(!r.mobile.application||!r.mobile.application.element.is(".km-android"));t.prevAll().toggleClass("km-absolute",i),t.toggleClass("km-show-title",o),t.toggleClass("km-fill-title",o&&!e.trim(t.html())),t.toggleClass("km-no-title",i),t.toggleClass("km-hide-title",a&&!n.children().is(":visible"))}var r=window.kendo,o=r.mobile.ui,a=o.Widget,s=a.extend({init:function(t,i){var r=this;a.fn.init.call(r,t,i),t=r.element,r.container().bind("show",e.proxy(this,"refresh")),t.addClass("km-navbar").wrapInner(e('<div class="km-view-title km-show-title" />')),r.leftElement=n("left",t),r.rightElement=n("right",t),r.centerElement=t.find(".km-view-title")},options:{name:"NavBar"},title:function(e){this.element.find(r.roleSelector("view-title")).text(e),i(this.centerElement)},refresh:function(e){var t=e.view;this.title(t.options.title)},destroy:function(){a.fn.destroy.call(this),r.destroy(this.element)}});o.plugin(s)}(window.kendo.jQuery),function(e,t){var n,i,r,o,a,s,l,c,u=window.kendo,d=u.mobile.ui,h=e.proxy,p=u.effects.Transition,f=u.ui.Pane,g=u.ui.PaneDimensions,m=d.DataBoundWidget,v=u.data.DataSource,_=u.data.Buffer,y=u.data.BatchBuffer,b=Math,w=b.abs,k=b.ceil,x=b.round,C=b.max,T=b.min,S=b.floor,D="change",A="changing",M="refresh",E="km-current-page",I="km-virtual-page",R="function",P="itemChange",L="cleanup",F=u.Class.extend({init:function(t){var n=this,i=e("<ol class='km-pages'/>");t.element.append(i),this._changeProxy=h(n,"_change"),this._refreshProxy=h(n,"_refresh"),t.bind(D,this._changeProxy),t.bind(M,this._refreshProxy),e.extend(n,{element:i,scrollView:t})},items:function(){return this.element.children()},_refresh:function(e){var t,n="";for(t=0;e.pageCount>t;t++)n+="<li/>";this.element.html(n),this.items().eq(e.page).addClass(E)},_change:function(e){this.items().removeClass(E).eq(e.page).addClass(E)},destroy:function(){this.scrollView.unbind(D,this._changeProxy),this.scrollView.unbind(M,this._refreshProxy),this.element.remove()}});u.mobile.ui.ScrollViewPager=F,n="transitionEnd",i="dragStart",r="dragEnd",o=u.Observable.extend({init:function(t,o){var a,s,l,c,d,h,m=this;u.Observable.fn.init.call(this),this.element=t,this.container=t.parent(),a=new u.ui.Movable(m.element),s=new p({axis:"x",movable:a,onEnd:function(){m.trigger(n)}}),l=new u.UserEvents(t,{start:function(e){2*w(e.x.velocity)>=w(e.y.velocity)?l.capture():l.cancel(),m.trigger(i,e),s.cancel()},allowSelection:!0,end:function(e){m.trigger(r,e)}}),(d=(c=new g({element:m.element,container:m.container})).x).bind(D,function(){m.trigger(D)}),h=new f({dimensions:c,userEvents:l,movable:a,elastic:!0}),e.extend(m,{duration:o&&o.duration||1,movable:a,transition:s,userEvents:l,dimensions:c,dimension:d,pane:h}),this.bind([n,i,r,D],o)},size:function(){return{width:this.dimensions.x.getSize(),height:this.dimensions.y.getSize()}},total:function(){return this.dimension.getTotal()},offset:function(){return-this.movable.x},updateDimension:function(){this.dimension.update(!0)},refresh:function(){this.dimensions.refresh()},moveTo:function(e){this.movable.moveAxis("x",-e)},transitionTo:function(e,t,n){n?this.moveTo(-e):this.transition.moveTo({location:e,duration:this.duration,ease:t})}}),u.mobile.ui.ScrollViewElasticPane=o,a=u.Observable.extend({init:function(e,t,n){var i=this;u.Observable.fn.init.call(this),i.element=e,i.pane=t,i._getPages(),this.page=0,this.pageSize=n.pageSize||1,this.contentHeight=n.contentHeight,this.enablePager=n.enablePager,this.pagerOverlay=n.pagerOverlay},scrollTo:function(e,t){this.page=e,this.pane.transitionTo(-e*this.pane.size().width,p.easeOutExpo,t)},paneMoved:function(e,t,n,i){var r,o,a=this,s=a.pane,l=s.size().width*a.pageSize,c=x,u=t?p.easeOutBack:p.easeOutExpo;-1===e?c=k:1===e&&(c=S),o=c(s.offset()/l),r=C(a.minSnap,T(-o*l,a.maxSnap)),o!=a.page&&n&&n({currentPage:a.page,nextPage:o})&&(r=-a.page*s.size().width),s.transitionTo(r,u,i)},updatePage:function(){var e=this.pane,t=x(e.offset()/e.size().width);return t!=this.page&&(this.page=t,!0)},forcePageUpdate:function(){return this.updatePage()},resizeTo:function(e){var t,n,i=this.pane,r=e.width;this.pageElements.width(r),"100%"===this.contentHeight&&(t=this.element.parent().height(),!0===this.enablePager&&(n=this.element.parent().find("ol.km-pages"),!this.pagerOverlay&&n.length&&(t-=n.outerHeight(!0))),this.element.css("height",t),this.pageElements.css("height",t)),i.updateDimension(),this._paged||(this.page=S(i.offset()/r)),this.scrollTo(this.page,!0),this.pageCount=k(i.total()/r),this.minSnap=-(this.pageCount-1)*r,this.maxSnap=0},_getPages:function(){this.pageElements=this.element.find(u.roleSelector("page")),this._paged=this.pageElements.length>0}}),u.mobile.ui.ScrollViewContent=a,s=u.Observable.extend({init:function(e,t,n){var i=this;u.Observable.fn.init.call(this),i.element=e,i.pane=t,i.options=n,i._templates(),i.page=n.page||0,i.pages=[],i._initPages(),i.resizeTo(i.pane.size()),i.pane.dimension.forceEnabled()},setDataSource:function(e){this.dataSource=v.create(e),this._buffer(),this._pendingPageRefresh=!1,this._pendingWidgetRefresh=!1},_viewShow:function(){var e=this;e._pendingWidgetRefresh&&(setTimeout(function(){e._resetPages()},0),e._pendingWidgetRefresh=!1)},_buffer:function(){var e=this.options.itemsPerPage;this.buffer&&this.buffer.destroy(),this.buffer=e>1?new y(this.dataSource,e):new _(this.dataSource,3*e),this._resizeProxy=h(this,"_onResize"),this._resetProxy=h(this,"_onReset"),this._endReachedProxy=h(this,"_onEndReached"),this.buffer.bind({resize:this._resizeProxy,reset:this._resetProxy,endreached:this._endReachedProxy})},_templates:function(){var e=this.options.template,t=this.options.emptyTemplate,n={},i={};typeof e===R&&(n.template=e,e="#=this.template(data)#"),this.template=h(u.template(e),n),typeof t===R&&(i.emptyTemplate=t,t="#=this.emptyTemplate(data)#"),this.emptyTemplate=h(u.template(t),i)},_initPages:function(){var e,t,n=this.pages,i=this.element;for(t=0;3>t;t++)e=new l(i),n.push(e);this.pane.updateDimension()},resizeTo:function(e){var t,n,i,r=this.pages,o=this.pane;for(t=0;r.length>t;t++)r[t].setWidth(e.width);"auto"===this.options.contentHeight?this.element.css("height",this.pages[1].element.height()):"100%"===this.options.contentHeight&&(n=this.element.parent().height(),!0===this.options.enablePager&&(i=this.element.parent().find("ol.km-pages"),!this.options.pagerOverlay&&i.length&&(n-=i.outerHeight(!0))),this.element.css("height",n),r[0].element.css("height",n),r[1].element.css("height",n),r[2].element.css("height",n)),o.updateDimension(),this._repositionPages(),this.width=e.width},scrollTo:function(e){var t=this.buffer;t.syncDataSource(),t.at(e)&&(this._updatePagesContent(e),this.page=e)},paneMoved:function(e,t,n,i){var r,o=this,a=o.pane,s=a.size().width,l=a.offset(),c=Math.abs(l)>=s/3,d=t?u.effects.Transition.easeOutBack:u.effects.Transition.easeOutExpo,h=o.page+2>o.buffer.total(),p=0;1===e?0!==o.page&&(p=-1):-1!==e||h?l>0&&c&&!h?p=1:0>l&&c&&0!==o.page&&(p=-1):p=1,r=o.page,p&&(r=p>0?r+1:r-1),n&&n({currentPage:o.page,nextPage:r})&&(p=0),0===p?o._cancelMove(d,i):-1===p?o._moveBackward(i):1===p&&o._moveForward(i)},updatePage:function(){var e=this.pages;return 0!==this.pane.offset()&&(this.pane.offset()>0?(e.push(this.pages.shift()),this.page++,this.setPageContent(e[2],this.page+1)):(e.unshift(this.pages.pop()),this.page--,this.setPageContent(e[0],this.page-1)),this._repositionPages(),this._resetMovable(),!0)},forcePageUpdate:function(){var e=this.pane.offset(),t=3*this.pane.size().width/4;return w(e)>t&&this.updatePage()},_resetMovable:function(){this.pane.moveTo(0)},_moveForward:function(e){this.pane.transitionTo(-this.width,u.effects.Transition.easeOutExpo,e)},_moveBackward:function(e){this.pane.transitionTo(this.width,u.effects.Transition.easeOutExpo,e)},_cancelMove:function(e,t){this.pane.transitionTo(0,e,t)},_resetPages:function(){this.page=this.options.page||0,this._updatePagesContent(this.page),this._repositionPages(),this.trigger("reset")},_onResize:function(){this.pageCount=k(this.dataSource.total()/this.options.itemsPerPage),this._pendingPageRefresh&&(this._updatePagesContent(this.page),this._pendingPageRefresh=!1),this.trigger("resize")},_onReset:function(){this.pageCount=k(this.dataSource.total()/this.options.itemsPerPage),this._resetPages()},_onEndReached:function(){this._pendingPageRefresh=!0},_repositionPages:function(){var e=this.pages;e[0].position(-1),e[1].position(0),e[2].position(1)},_updatePagesContent:function(e){var t=this.pages,n=e||0;this.setPageContent(t[0],n-1),this.setPageContent(t[1],n),this.setPageContent(t[2],n+1)},setPageContent:function(t,n){var i=this.buffer,r=this.template,o=this.emptyTemplate,a=null;n>=0&&(a=i.at(n),e.isArray(a)&&!a.length&&(a=null)),this.trigger(L,{item:t.element}),t.content(null!==a?r(a):o({})),u.mobile.init(t.element),this.trigger(P,{item:t.element,data:a,ns:u.mobile.ui})}}),u.mobile.ui.VirtualScrollViewContent=s,l=u.Class.extend({init:function(t){this.element=e("<div class='"+I+"'></div>"),this.width=t.width(),this.element.width(this.width),t.append(this.element)},content:function(e){this.element.html(e)},position:function(e){this.element.css("transform","translate3d("+this.width*e+"px, 0, 0)")},setWidth:function(e){this.width=e,this.element.width(e)}}),u.mobile.ui.VirtualPage=l,c=m.extend({init:function(e,t){var n,i,r,l=this;m.fn.init.call(l,e,t),t=l.options,e=l.element,u.stripWhitespace(e[0]),e.wrapInner("<div/>").addClass("km-scrollview"),this.options.enablePager&&(this.pager=new F(this),this.options.pagerOverlay&&e.addClass("km-scrollview-overlay")),l.inner=e.children().first(),l.page=0,l.inner.css("height",t.contentHeight),l.pane=new o(l.inner,{duration:this.options.duration,transitionEnd:h(this,"_transitionEnd"),dragStart:h(this,"_dragStart"),dragEnd:h(this,"_dragEnd"),change:h(this,M)}),l.bind("resize",function(){l.pane.refresh()}),l.page=t.page,n=0===this.inner.children().length,(i=n?new s(l.inner,l.pane,t):new a(l.inner,l.pane,t)).page=l.page,i.bind("reset",function(){l._syncWithContent(),l.trigger(M,{pageCount:i.pageCount,page:i.page})}),i.bind("resize",function(){l.trigger(M,{pageCount:i.pageCount,page:i.page})}),i.bind(P,function(e){l.trigger(P,e),l.angular("compile",function(){return{elements:e.item,data:[{dataItem:e.data}]}})}),i.bind(L,function(e){l.angular("cleanup",function(){return{elements:e.item}})}),l._content=i,l.setDataSource(t.dataSource),(r=l.container()).nullObject?(l.viewInit(),l.viewShow()):r.bind("show",h(this,"viewShow")).bind("init",h(this,"viewInit"))},options:{name:"ScrollView",page:0,duration:400,velocityThreshold:.8,contentHeight:"auto",pageSize:1,itemsPerPage:1,bounceVelocityThreshold:1.6,enablePager:!0,pagerOverlay:!1,autoBind:!0,template:"",emptyTemplate:""},events:[A,D,M],destroy:function(){m.fn.destroy.call(this),u.destroy(this.element)},viewInit:function(){this.options.autoBind&&this._content.scrollTo(this._content.page,!0)},viewShow:function(){this.pane.refresh()},refresh:function(){var e=this._content;e.resizeTo(this.pane.size()),this.page=e.page,this.trigger(M,{pageCount:e.pageCount,page:e.page})},content:function(e){this.element.children().first().html(e),this._content._getPages(),this.pane.refresh()},value:function(e){var n=this.dataSource;return e?(this.scrollTo(n.indexOf(e),!0),t):n.at(this.page)},scrollTo:function(e,t){this._content.scrollTo(e,t),this._syncWithContent()},prev:function(){var e=this,n=e.page-1;e._content instanceof s?e._content.paneMoved(1,t,function(t){return e.trigger(A,t)}):n>-1&&e.scrollTo(n)},next:function(){var e=this,n=e.page+1;e._content instanceof s?e._content.paneMoved(-1,t,function(t){return e.trigger(A,t)}):e._content.pageCount>n&&e.scrollTo(n)},setDataSource:function(e){if(this._content instanceof s){var t=!e;this.dataSource=v.create(e),this._content.setDataSource(this.dataSource),this.options.autoBind&&!t&&this.dataSource.fetch()}},items:function(){return this.element.find("."+I)},_syncWithContent:function(){var e,n,i=this._content.pages,r=this._content.buffer;this.page=this._content.page,(e=r?r.at(this.page):t)instanceof Array||(e=[e]),n=i?i[1].element:t,this.trigger(D,{page:this.page,element:n,data:e})},_dragStart:function(){this._content.forcePageUpdate()&&this._syncWithContent()},_dragEnd:function(e){var t=this,n=e.x.velocity,i=this.options.velocityThreshold,r=0,o=w(n)>this.options.bounceVelocityThreshold;n>i?r=1:-i>n&&(r=-1),this._content.paneMoved(r,o,function(e){return t.trigger(A,e)})},_transitionEnd:function(){this._content.updatePage()&&this._syncWithContent()}}),d.plugin(c)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile.ui,r=i.Widget,o="change",a="km-switch-on",s="km-switch-off",l="margin-left",c="km-state-active",u="disabled",d=n.support.transitions.css+"transform",h=e.proxy,p=r.extend({init:function(t,i){var o,a=this;r.fn.init.call(a,t,i),i=a.options,a.wrapper=e(n.format('<span class="km-switch km-widget">        <span class="km-switch-wrapper"><span class="km-switch-background"></span></span>         <span class="km-switch-container"><span class="km-switch-handle" >             <span class="km-switch-label-on">{0}</span>             <span class="km-switch-label-off">{1}</span>         </span>     </span>',i.onLabel,i.offLabel)),a.handle=a.wrapper.find(".km-switch-handle"),a.background=a.wrapper.find(".km-switch-background"),a.wrapper.insertBefore(a.element).prepend(a.element),a._drag(),a.origin=parseInt(a.background.css(l),10),a.constrain=0,a.snapPoint=0,(t=a.element[0]).type="checkbox",a._animateBackground=!0,null===(o=a.options.checked)&&(o=t.checked),a.check(o),a.options.enable=a.options.enable&&!a.element.attr(u),a.enable(a.options.enable),a.refresh(),n.notify(a,n.mobile.ui)},refresh:function(){var e=this,t=e.handle.outerWidth(!0);e.width=e.wrapper.width(),e.constrain=e.width-t,e.snapPoint=e.constrain/2,"number"!=typeof e.origin&&(e.origin=parseInt(e.background.css(l),10)),e.background.data("origin",e.origin),e.check(e.element[0].checked)},events:[o],options:{name:"Switch",onLabel:"on",offLabel:"off",checked:null,enable:!0},check:function(e){var n=this,i=n.element[0];return e===t?i.checked:(n._position(e?n.constrain:0),i.checked=e,n.wrapper.toggleClass(a,e).toggleClass(s,!e),t)},value:function(){return this.check.apply(this,arguments)},destroy:function(){r.fn.destroy.call(this),this.userEvents.destroy()},toggle:function(){this.check(!this.element[0].checked)},enable:function(e){var n=this.element,i=this.wrapper;t===e&&(e=!0),this.options.enable=e,e?n.removeAttr(u):n.attr(u,u),i.toggleClass("km-state-disabled",!e)},_resize:function(){this.refresh()},_move:function(e){var t=this;e.preventDefault(),t._position(function(e,t,n){return Math.max(t,Math.min(n,e))}(t.position+e.x.delta,0,t.width-t.handle.outerWidth(!0)))},_position:function(e){var t=this;t.position=e,t.handle.css(d,"translatex("+e+"px)"),t._animateBackground&&t.background.css(l,t.origin+e)},_start:function(){this.options.enable?(this.userEvents.capture(),this.handle.addClass(c)):this.userEvents.cancel()},_stop:function(){var e=this;e.handle.removeClass(c),e._toggle(e.position>e.snapPoint)},_toggle:function(e){var t,i=this,r=i.handle,l=i.element[0],c=l.checked,u=n.mobile.application&&n.mobile.application.os.wp?100:200;i.wrapper.toggleClass(a,e).toggleClass(s,!e),i.position=t=e*i.constrain,i._animateBackground&&i.background.kendoStop(!0,!0).kendoAnimate({effects:"slideMargin",offset:t,reset:!0,reverse:!e,axis:"left",duration:u}),r.kendoStop(!0,!0).kendoAnimate({effects:"slideTo",duration:u,offset:t+"px,0",reset:!0,complete:function(){c!==e&&(l.checked=e,i.trigger(o,{checked:e}))}})},_drag:function(){var e=this;e.userEvents=new n.UserEvents(e.wrapper,{tap:function(){e.options.enable&&e._toggle(!e.element[0].checked)},start:h(e._start,e),move:h(e._move,e),end:h(e._stop,e)})}});i.plugin(p)}(window.kendo.jQuery),function(e){function t(t){return e('<span class="km-badge">'+t+"</span>")}var n=window.kendo,i=n.mobile.ui,r=i.Widget,o="km-state-active",a="select",s=r.extend({init:function(t,n){var i=this;r.fn.init.call(i,t,n),i.container().bind("show",e.proxy(this,"refresh")),i.element.addClass("km-tabstrip").find("a").each(i._buildButton).eq(i.options.selectedIndex).addClass(o),i.element.on("down","a","_release")},events:[a],switchTo:function(t){var n,i,r=this.element.find("a"),o=0,a=r.length;if(!isNaN(t))return this._setActiveItem(r.eq(t)),!0;for(;a>o;o++)if(-1!==(i=(n=r[o]).href.replace(/(\#.+)(\?.+)$/,"$1")).indexOf(t,i.length-t.length))return this._setActiveItem(e(n)),!0;return!1},switchByFullUrl:function(e){var t;t=this.element.find("a[href$='"+e+"']"),this._setActiveItem(t)},clear:function(){this.currentItem().removeClass(o)},currentItem:function(){return this.element.children("."+o)},badge:function(n,i){var r,o=this.element;return isNaN(n)||(n=o.children().get(n)),n=o.find(n),r=e(n.find(".km-badge")[0]||t(i).insertAfter(n.children(".km-icon"))),i||0===i?(r.html(i),this):!1===i?(r.empty().remove(),this):r.html()},_release:function(t){if(!(t.which>1)){var n=this,i=e(t.currentTarget);i[0]!==n.currentItem()[0]&&(n.trigger(a,{item:i})?t.preventDefault():n._setActiveItem(i))}},_setActiveItem:function(e){e[0]&&(this.clear(),e.addClass(o))},_buildButton:function(){var i=e(this),r=n.attrValue(i,"icon"),o=n.attrValue(i,"badge"),a=i.find("img"),s=e('<span class="km-icon"/>');i.addClass("km-button").attr(n.attr("role"),"tab").contents().not(a).wrapAll('<span class="km-text"/>'),a[0]?a.addClass("km-image").prependTo(i):(i.prepend(s),r&&(s.addClass("km-"+r),(o||0===o)&&t(o).insertAfter(s)))},refresh:function(e){var t=e.view.id;t&&!this.switchTo(e.view.id)&&this.switchTo(t)},options:{name:"TabStrip",selectedIndex:0,enable:!0}});i.plugin(s)}(window.kendo.jQuery),window.kendo;var e,t,n,i,r,o,a,s,l})}(0,"function"==typeof define&&define.amd?define:function(e,t){t()});var saveAs=saveAs||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,r=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),o=e.webkitRequestFileSystem,a=e.requestFileSystem||o||e.mozRequestFileSystem,s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=0,c=function(n){var i=function(){"string"==typeof n?t().revokeObjectURL(n):n.remove()};e.chrome?i():setTimeout(i,500)},u=function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){s(e)}}},d=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},h=function(s,h,p){p||(s=d(s));var f,g,m,v=this,_=s.type,y=!1,b=function(){u(v,"writestart progress write writeend".split(" "))},w=function(){if(g&&r&&"undefined"!=typeof FileReader){var n=new FileReader;return n.onloadend=function(){var e=n.result;g.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),v.readyState=v.DONE,b()},n.readAsDataURL(s),void(v.readyState=v.INIT)}(!y&&f||(f=t().createObjectURL(s)),g)?g.location.href=f:void 0==e.open(f,"_blank")&&r&&(e.location.href=f);v.readyState=v.DONE,b(),c(f)},k=function(e){return function(){if(v.readyState!==v.DONE)return e.apply(this,arguments)}},x={create:!0,exclusive:!1};if(v.readyState=v.INIT,h||(h="download"),i)return f=t().createObjectURL(s),void setTimeout(function(){var e,t;n.href=f,n.download=h,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),b(),c(f),v.readyState=v.DONE});e.chrome&&_&&"application/octet-stream"!==_&&(m=s.slice||s.webkitSlice,s=m.call(s,0,s.size,"application/octet-stream"),y=!0),o&&"download"!==h&&(h+=".download"),("application/octet-stream"===_||o)&&(g=e),a?(l+=s.size,a(e.TEMPORARY,l,k(function(e){e.root.getDirectory("saved",x,k(function(e){var t=function(){e.getFile(h,x,k(function(e){e.createWriter(k(function(t){t.onwriteend=function(t){g.location.href=e.toURL(),v.readyState=v.DONE,u(v,"writeend",t),c(e)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=v["on"+e]}),t.write(s),v.abort=function(){t.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),w)}),w)};e.getFile(h,{create:!1},k(function(e){e.remove(),t()}),k(function(e){e.code===e.NOT_FOUND_ERR?t():w()}))}),w)}),w)):w()},p=h.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=d(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(p.abort=function(){this.readyState=this.DONE,u(this,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,function(e,t,n){return new h(e,t,n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define("filesaver",[],function(){return saveAs});var CryptoJS=CryptoJS||function(e,t){var n={},i=n.lib={},r=function(){},o=i.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new a.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new a.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,s=r/(4*o);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,r=e.min(4*t,r),t){for(var l=0;l<t;l+=o)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=r}return new a.init(l,r)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(){var e=CryptoJS,t=(r=e.lib).WordArray,n=r.Hasher,i=[],r=e.algo.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=0;80>c;c++){if(16>c)i[c]=0|e[t+c];else{var u=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=u<<1|u>>>31}u=(r<<5|r>>>27)+l+i[c],u=20>c?u+(1518500249+(o&a|~o&s)):40>c?u+(1859775393+(o^a^s)):60>c?u+((o&a|o&s|a&s)-1894007588):u+((o^a^s)-899497514),l=s,s=a,a=o<<30|o>>>2,o=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=n._createHelper(r),e.HmacSHA1=n._createHmacHelper(r)}(),function(){var e=CryptoJS,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var i=e.blockSize,r=4*i;n.sigBytes>r&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),a=this._iKey=n.clone(),s=o.words,l=a.words,c=0;c<i;c++)s[c]^=1549556828,l[c]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=CryptoJS,n=(e=t.lib).Base,i=e.WordArray,r=(e=t.algo).HMAC,o=e.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,o=r.create(n.hasher,e),a=i.create(),s=i.create([1]),l=a.words,c=s.words,u=n.keySize;for(n=n.iterations;l.length<u;){var d=o.update(t).finalize(s);o.reset();for(var h=d.words,p=h.length,f=d,g=1;g<n;g++){f=o.finalize(f),o.reset();for(var m=f.words,v=0;v<p;v++)h[v]^=m[v]}a.concat(d),c[0]++}return a.sigBytes=4*u,a}});t.PBKDF2=function(e,t,n){return o.create(n).compute(e,t)}}(),define("cryptojs",function(){}),define("js/tab_base",["jquery"],function(e){function t(){this.id="",this.parent=null}return t.prototype.render=function(e,t){this.id=e,this.parent=t},{Tab:t}}),define("js/data_linked_source_sink",["jquery"],function(e){function t(e){this.registers=e||[],this.parent=null}function n(e,t,n,i){this.api=e,this.dataSinks=t,this.startCallback=n,this.doneCallback=i,this.successCallback=null}return t.prototype.render=function(e){this.parent=e},t.prototype.refresh=function(e){},t.prototype.updateRegisters=function(e){this.registers=e},n.prototype.refreshCallback=function(e){for(var t=0;t<this.dataSinks.length;t++){this.dataSinks[t].refresh(e)}this.successCallback()},n.prototype.render=function(e){for(var t=0;t<this.dataSinks.length;t++)this.dataSinks[t].render(e)},n.prototype.refresh=function(t,n){for(var i=[],r=0;r<this.dataSinks.length;r++){for(var o=this.dataSinks[r],a=0;a<o.registers.length;a++)i.push(o.registers[a].name);for(a=0;a<o.registers.length;a++)null!=o.registers[a].enabledName&&i.push(o.registers[a].enabledName)}this.successCallback=t,this.api.readBmsRegisters(i,e.proxy(this.refreshCallback,this),n,this.startCallback,this.doneCallback)},{DataLinkedRegister:function(e,t,n,i){this.name=e||"",this.enabledName=n||null,this.displayName=t||e,this.displayFunction=i||function(e){return e.toString()}},DataLinkedSink:t,DataLinkedSource:n}}),define("js/data_linked_grid_parent",["jquery","./data_linked_source_sink"],function(e,t){function n(e,n,i){t.DataLinkedSink.prototype.constructor.call(this),this.gridElements=[],this.gridNonDataElements=[],this.registers=e||[],this.gridClass=n,this.setGrid=i}return n.prototype=new t.DataLinkedSink,n.prototype.constructor=n,n.prototype.render=function(e){t.DataLinkedSink.prototype.render.call(this,e);var n=document.createElement("div");for(var i in n.className=this.gridClass,this.setGrid&&n.setAttribute("data-uk-grid",""),e.appendChild(n),this.gridElements)this.gridElements[i].render(n);for(var i in this.gridNonDataElements)n.appendChild(this.gridNonDataElements[i])},n.prototype.refresh=function(e){for(var n in t.DataLinkedSink.prototype.refresh.call(this,e),this.gridElements)this.gridElements[n].refresh(e)},{DataLinkedGridParent:n}}),define("js/bms-legacy-api/lib/type_helpers",["jquery"],function(e){function t(e){var t=e;return isNaN(e)||Number(e)!==e||(e%1==0?t=parseInt(e)+1:e%1!=0&&(t=parseFloat(e)+1)),t}return{displayMiliVoltAsVolt:function(e){return e/1e3+" V"},displayMiliAmpAsAmp:function(e){return e/1e3+" A"},displayTemperatureCelcius:function(e){return e+" C"},displayPercentage:function(e){return e+" %"},displaymAhrAsAhr:function(e){return e/1e3+" Ahr"},displayIntegerAsBoolean:function(e){var t="False";return e&&(t="True"),t},displayIntegerAsSafetyBoolean:function(e){var t="Error";return 1===e?t="Safe":0===e&&(t="Unsafe"),t},displayIntegerAsFaultBoolean:function(e){var t="Error";return 0===e?t="Clear":1===e&&(t="Tripped"),t},displayIntegerAsYesNo:function(e){return e?"Yes":"No"},displayIntegerAsCellAddress:function(e){var n=Math.floor(e/16),i=Math.floor(e%16);return"CI: "+t(n)+", Offset: "+t(i)+" (Index: "+t(e)+")"},displayIntegerAsThermistorAddress:function(e){var n=Math.floor(e/8),i=Math.floor(e%8);return"CI: "+t(n)+", Offset: "+t(i)+" (Index: "+t(e)+")"},displayIndexAsStackAddress:function(e){return"S"+t(e)},displayIndexAsStackFullText:function(e){return"Stack "+t(e)},displayIndexAsCellVoltageAddress:function(e){var n=Math.floor(e/16),i=Math.floor(e%16);return"CI"+t(n)+":C"+t(i)},displayIndexAsCellVoltageFullText:function(e){var n=Math.floor(e/16),i=Math.floor(e%16);return"Cell Interface "+t(n)+"<br>Cell "+t(i)},displayIndexAsCellTempAddress:function(e){var n=Math.floor(e/8),i=Math.floor(e%8);return"CI"+t(n)+":T"+t(i)},displayIndexAsCellTempFullText:function(e){var n=Math.floor(e/8),i=Math.floor(e%8);return"Cell Interface "+t(n)+"<br>Thermistor "+t(i)},convertMiliToBase:function(e){return e/1e3},exactResult:function(e){return e},padZero:function(e){return e<10?"0"+e:e.toString()},convertIpToInt:function(e){var t=e;return/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e)&&(ipArray=e.split("."),t=ipArray[0]*Math.pow(256,3)+ipArray[1]*Math.pow(256,2)+256*ipArray[2]+1*ipArray[3]),t},convertIntToIp:function(t){var n=t;if(Math.floor(t)==t&&e.isNumeric(t)){n=t%256;for(var i=0;i<3;i++)n=(t=Math.floor(t/256))%256+"."+n}return n}}}),define("js/dashboard_tab",["jquery","./tab_base","./data_linked_source_sink","./data_linked_grid_parent","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i,r){function o(e){t.Tab.prototype.constructor.call(this),this.dataRefreshPeriod=1e3,this.isStarted=!1,this.api=e,this.statusDiv=null,this.clearFaultsButton=null,this.connectButton=null,this.faultsLookup=null,this.updateCount=0,this.padZero=r.padZero,this.voltageRadialGauge=null,this.currentRadialGauge=null,this.socRadialGauge=null,this.dodRadialGauge=null,this.cellVoltageLinearGauge=null,this.cellTempLinearGauge=null,this.bmsInfoPage=null,this.bmsStatusSummary=null}return o.prototype=new t.Tab,o.prototype.constructor=o,o.prototype.refreshWidgets=function(){this.widgets.refresh(e.proxy(this.successRefreshResult,this),e.proxy(this.errorRefreshResult,this))},o.prototype.getUpdateText=function(){var e=new Date;return"Updated "+this.padZero(e.getHours()).toString()+":"+this.padZero(e.getMinutes()).toString()+":"+this.padZero(e.getSeconds()).toString()+" "+(parseInt(e.getMonth())+1)+"/"+e.getDate().toString()+"/"+e.getFullYear().toString()+"<br>"},o.prototype.updateSuccessStatusDiv=function(e){null!==this.statusDiv&&(this.statusDiv.innerHTML=this.getUpdateText(),this.statusDiv.innerHTML+=e||"")},o.prototype.successRefreshResult=function(e){this.updateSuccessStatusDiv(),this.updateCount++},o.prototype.errorRefreshResult=function(t){this.updateSuccessStatusDiv("Error: "+t),this.isStarted&&setTimeout(e.proxy(this.refreshWidgets,this),this.dataRefreshPeriod)},o.prototype.faultResetButtonClick=function(){this.api.writeBmsRegisters(this.faultsLookup,function(){})},o.prototype.connectButtonClick=function(){var t,n=parseInt(e("#connect-button").attr("data-register-value"));t=gbcIndex?{"pack_control[0].requested_state":n}:{"stack_control[0].requested_state":n},this.api.writeBmsRegisters(t,function(){})},o.prototype.startRefresh=function(){},o.prototype.stopRefresh=function(){this.isStarted=!1},o.prototype.concatAllRegisters=function(e){for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},o.prototype.initializeWidgets=function(){return!1},o.prototype.getRadialGaugeClass=function(){return""},o.prototype.getStatusSummaryClass=function(){return""},o.prototype.getLinearGaugeClass=function(){return""},o.prototype.addRadialElements=function(){this.radialGridParent.gridElements.push(this.voltageRadialGauge),this.radialGridParent.gridElements.push(this.currentRadialGauge),this.radialGridParent.gridElements.push(this.socRadialGauge),this.radialGridParent.gridElements.push(this.dodRadialGauge)},o.prototype.addLinearElements=function(){this.linearGridParent.gridElements.push(this.cellVoltageLinearGauge),this.linearGridParent.gridElements.push(this.cellTempLinearGauge)},o.prototype.appendGaugeRegisters=function(){this.gaugeGridRegisters=this.gaugeGridRegisters.concat(this.voltageRadialGauge.registers,this.currentRadialGauge.registers,this.socRadialGauge.registers,this.dodRadialGauge.registers,this.cellVoltageLinearGauge.registers,this.cellTempLinearGauge.registers),this.statusSideRegisters=this.concatAllRegisters([this.bmsStatusSummary.registers,this.bmsInfoPage.registers])},o.prototype.renderWidgets=function(){var t=document.createElement("div");t.id="dashboard-overlay",t.className="overlay",this.parent.appendChild(t),document.body.className="bms-body";var r=document.createElement("div");r.className="uk-grid dashboard-home uk-grid-small",r.setAttribute("data-uk-grid",""),this.parent.appendChild(r),this.isGridTrue=!0,this.isGridFalse=!1,this.isInitialized=this.initializeWidgets(),this.statusSummary=new i.DataLinkedGridParent(null,this.getStatusSummaryClass(),this.isGridFalse),this.radialGridParent=new i.DataLinkedGridParent(null,this.getRadialGaugeClass(),this.isGridTrue),this.linearGridParent=new i.DataLinkedGridParent(null,this.getLinearGaugeClass(),this.isGridTrue),this.gaugeGridRegisters=[],this.statusSideRegisters=[],this.isInitialized&&(this.addRadialElements(),this.addLinearElements(),this.appendGaugeRegisters());this.gaugeGridParent=new i.DataLinkedGridParent(this.gaugeGridRegisters,"uk-width-large-4-5 uk-width-medium-2-3 uk-width-small-1-2 uk-grid gauge-grid",this.isGridTrue),this.gaugeGridParent.gridElements.push(this.radialGridParent),this.gaugeGridParent.gridElements.push(this.linearGridParent),this.statusDiv=document.createElement("div"),this.statusDiv.className="status-update-div",statusBarClass="uk-width-large-1-5 uk-width-medium-1-3 uk-width-small-1-2 status-bar-grid",this.statusBarSide=new i.DataLinkedGridParent(this.statusSideRegisters,statusBarClass,this.isGridTrue),this.isInitialized&&(this.statusSummary.gridElements.push(this.bmsStatusSummary),this.statusBarSide.gridElements.push(this.statusSummary),this.statusBarSide.gridElements.push(this.bmsInfoPage)),this.statusBarSide.gridNonDataElements.push(this.statusDiv),dataSinks=[],dataSinks.push(this.gaugeGridParent),dataSinks.push(this.statusBarSide),this.widgets=new n.DataLinkedSource(this.api,dataSinks),this.widgets.render(r),this.clearFaultsButton=document.createElement("button"),this.clearFaultsButton.id="clear-faults-button",this.clearFaultsButton.className="uk-button",this.clearFaultsButton.setAttribute("title","Clear faults and warnings"),this.clearFaultsButton.innerHTML="Clear",this.clearFaultsButton.onclick=e.proxy(this.faultResetButtonClick,this),this.clearFaultsButton.setAttribute("data-register-value","1"),e(this.clearFaultsButton).insertBefore("#connection-status-container"),this.connectButton=document.createElement("button"),this.connectButton.id="connect-button",this.connectButton.className="uk-button",this.connectButton.setAttribute("title","Connect"),this.connectButton.innerHTML="Connect",this.connectButton.onclick=e.proxy(this.connectButtonClick,this),gbcIndex&&(this.connectButton.disabled=!0),e(this.connectButton).insertAfter("#connection-status-container")},o.prototype.summaryClick=function(){this.stopRefresh();var t=this.navBarNavigation.children[1].children[0];e(t).trigger("click");var n=e("#details-accordion-safety");n.hasClass("uk-active")||n.click()},o.prototype.render=function(e,n){t.Tab.prototype.render.call(this,e,n),n.className="parent.uk-container uk-container-center dashboard-container",this.renderWidgets(),this.isInitialized&&this.bindBMSStatusButton()},o.prototype.bindBMSStatusButton=function(){e(this.bmsStatusSummary.statusButton).bind("click",e.proxy(this.summaryClick,this)),e(this.bmsStatusSummary.statusText).bind("click",e.proxy(this.summaryClick,this))},{DashboardTab:o}}),define("js/stack_state_helper",[],function(){return{getStackState:function(e){var t=[],n=[],i=0;for(var r in e)if(-1!==r.indexOf("pack_stack[")&&-1!==r.indexOf("].installed")&&1===e[r]){var o=r.match(/\d+/)[0];n.push(o);var a="stack_control["+o+"].actual_state";1===e["pack_stack["+o+"].enabled"]&&1===e[a]&&t.push(r),1===e["pack_stack["+o+"].enabled"]&&3===e["stack_control["+o+"].connection_state"]&&(i+=1)}return{connected:1===e["pack_control[0].enabled"]?e["pack_control_stat[0].num_connected"]:i,installed:n,installedAndEnabled:t}}}}),define("js/data_linked_stack_state",["jquery","./data_linked_source_sink","./stack_state_helper","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i){function r(){var e=[new t.DataLinkedRegister("pack_control_stat[0].num_connected","Connected Stacks",null,i.exactResult),new t.DataLinkedRegister("pack_stack[*].installed","Stack Installed",null,i.exactResult),new t.DataLinkedRegister("pack_stack[*].enabled","Stack Enabled",null,i.exactResult)];t.DataLinkedSink.prototype.constructor.call(this,e),this.installed=[],this.installedAndEnabled=[]}return r.prototype=new t.DataLinkedSink,r.prototype.constructor=r,r.prototype.refresh=function(e){var t=n.getStackState(e);this.installedAndEnabled=t.installedAndEnabled,this.installed=t.installed},{DataLinkedStackState:r}}),define("js/gauge_helpers",[],function(){var e=9;function t(t,n){var i=t-n;return Math.abs(i)<Math.pow(10,-e)}return{colors:{red:"#c20000",yellow:"#ffc700",blue:"#2798df"},findMax:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t},findMin:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return t},generateRegistersForWidget:function(e,t,n){for(var i=[],r=0;r<e.length;r++)i=i.concat(e[r]);for(r=0;r<n.length;r++)i=i.concat(t(n[r]));return i},setScaleValue:function(n,i){var r=Math.log(i)*Math.LOG10E;if(function(e){if(!isFinite(e))return 0;for(var n=1,i=0;!t(Math.round(e*n)/n,e);)n*=10,i++;return i}(n)<=r)return n;var o=n*Math.round(Math.pow(10,e));return t(this.gaugeOptions.scale.max,n)?Math.ceil(o/Math.pow(10,e-r))/i:t(this.gaugeOptions.scale.min,n)?Math.floor(o/Math.pow(10,e-r))/i:Math.round(n*i)/i}}}),define("js/data_linked_radial_gauge",["jquery","./data_linked_source_sink","./gauge_helpers"],function(e,t,n){function i(e){t.DataLinkedSink.prototype.constructor.call(this,e),this.minThresh=null,this.maxThresh=null,this.units=null,this.title=null,this.loRegisterString=null,this.hiRegisterString=null,this.gaugeBoxClass=null}return i.prototype=new t.DataLinkedSink,i.prototype.constructor=i,i.prototype.render=function(e){t.DataLinkedSink.prototype.render.call(this,e);var n=document.createElement("div");n.className=this.gaugeBoxClass,this.parent.appendChild(n);var i=document.createElement("div");i.className="box-title",n.appendChild(i),this.gaugeTitle=document.createElement("div"),this.gaugeTitle.innerHTML=this.title,this.gaugeTitle.className="gauge-title-radial",i.appendChild(this.gaugeTitle);var r=document.createElement("div");r.className="radial-gauge-container",n.appendChild(r),this.gauge=document.createElement("div"),this.gauge.className="radial-gauge-element",this.gauge.id=this.title.replace(/[^a-zA-z_-]/g,"-").toLowerCase()+"-gauge",r.appendChild(this.gauge),this.gaugeValue=document.createElement("div"),this.gaugeValue.className="gauge-value",r.appendChild(this.gaugeValue),this.gaugeValue.innerHTML="0 "+(this.units||""),this.createGauge()},i.prototype.generateGaugeThresh=function(e){},i.prototype.shouldRedrawGauge=function(){return this.maxThresh!==-1/0&&this.minThresh!==1/0},i.prototype.shouldRedrawGaugeRange=function(){return this.max!==this.prevMax||this.min!==this.prevMin},i.prototype.shouldRedrawMax=function(){return this.max!==this.prevMax||this.actual>this.gaugeOptions.scale.max||this.actual<this.max+this.prevBuffer&&this.prevValue>this.max+this.prevBuffer},i.prototype.shouldRedrawMin=function(){return this.min!==this.prevMin||this.actual<this.gaugeOptions.scale.min||this.actual>this.min-this.prevBuffer&&this.prevValue<this.min-this.prevBuffer},i.prototype.setMinThreshHelper=function(e){for(var t=1/0,n=0;n<this.registers.length;n++){var i=this.registers[n].name;-1!==i.indexOf(this.loRegisterString)&&this.registers[n].displayFunction(e[i])<t&&(t=this.registers[n].displayFunction(e[i]))}this.min=t},i.prototype.setMaxThreshHelper=function(e){for(var t=-1/0,n=0;n<this.registers.length;n++){var i=this.registers[n].name;-1!==i.indexOf(this.hiRegisterString)&&this.registers[n].displayFunction(e[i])>t&&(t=this.registers[n].displayFunction(e[i]))}this.max=t},i.prototype.setMinThresh=function(e){},i.prototype.setMaxThresh=function(e){},i.prototype.setGaugeMax=function(){this.gaugeOptions.scale.max=this.maxThresh},i.prototype.setGaugeMin=function(){this.gaugeOptions.scale.min=this.minThresh},i.prototype.drawRadialRange=function(){},i.prototype.updateRegisters=function(e){var i=n.generateRegistersForWidget(this.gaugeRegisters,this.generateGaugeThresh,e);t.DataLinkedSink.prototype.updateRegisters.call(this,i)},i.prototype.setScaleValue=n.setScaleValue,i.prototype.refresh=function(n){t.DataLinkedSink.prototype.refresh.call(this,n);var i=e(this.gauge).data("kendoRadialGauge");this.actual=this.registers[0].displayFunction(n[this.registers[0].name]),i.value(this.actual),this.gaugeValue.innerHTML=this.actual+" "+this.units,this.setMinThresh(n),this.setMaxThresh(n);var r=this.maxThresh-this.minThresh;this.buffer=r/10,0===r&&(r=2,this.buffer=1),this.gaugeOptions=i.options,this.shouldRedrawGauge()&&(this.shouldRedrawGaugeRange()||this.shouldRedrawMax()||this.shouldRedrawMin())&&(this.shouldRedrawMax()&&this.setGaugeMax(),this.shouldRedrawMin()&&this.setGaugeMin(),(r=this.gaugeOptions.scale.max-(this.gaugeOptions.scale.min||0))>0&&(this.gaugeOptions.scale.labels.template=r>20?e.proxy(kendo.template("#= this.setScaleValue(value, 1) #"),this):e.proxy(kendo.template("#= this.setScaleValue(value, 100) #"),this),this.gaugeOptions.scale.majorUnit=r/6,this.gaugeOptions.scale.minorUnit=r/30,this.drawRadialRange(),i.redraw()),this.prevMin=this.min,this.prevMax=this.max,this.prevValue=this.actual,this.prevMinThresh=this.minThresh,this.prevMaxThresh=this.maxThresh,this.prevBuffer=this.buffer)},i.prototype.createGauge=function(){e(this.gauge).kendoRadialGauge({pointer:{value:e(this.gaugeValue).val()},scale:{labels:{template:"#= Math.round(value) #",font:"12px Arial,Helvetica,sans-serif"},minorUnit:5,majorUnit:30,startAngle:-30,endAngle:210,max:180,rangePlaceholderColor:"white"},transitions:!1})},{DataLinkedRadial:i}}),define("js/radial_gauge_voltage",["jquery","./data_linked_radial_gauge","./gauge_helpers","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i,r){function o(e,n){t.DataLinkedRadial.prototype.constructor.call(this,n),this.hiRegisterString="stack_fault_voltage_hi",this.loRegisterString="stack_fault_voltage_lo",this.title=e||"Voltage",this.units="V",this.prevMin=1/0,this.prevMax=-1/0,this.prevMinThresh=0,this.prevMaxThresh=0,this.prevBuffer=0,this.max=-1/0,this.min=1/0}return o.prototype=new t.DataLinkedRadial,o.prototype.constructor=o,o.prototype.generateGaugeThresh=function(e){return[new i.DataLinkedRegister("stack_fault_voltage_hi["+e+"].thresh","Stack Voltage High Threshold",null,r.convertMiliToBase),new i.DataLinkedRegister("stack_fault_voltage_lo["+e+"].thresh","Stack Voltage Low Threshold",null,r.convertMiliToBase)]},o.prototype.setMaxThresh=function(e){t.DataLinkedRadial.prototype.setMaxThreshHelper.call(this,e),this.maxThresh=n.findMax([this.max,this.actual])},o.prototype.setMinThresh=function(e){t.DataLinkedRadial.prototype.setMinThreshHelper.call(this,e),this.minThresh=n.findMin([this.min,this.actual])},o.prototype.setGaugeMax=function(){this.gaugeOptions.scale.max=this.maxThresh+this.buffer},o.prototype.setGaugeMin=function(){this.minThresh-this.buffer>0?this.gaugeOptions.scale.min=this.minThresh-this.buffer:this.gaugeOptions.scale.min=0},{BaseVoltageRadial:o}}),define("js/radial_gauge_pack_voltage",["./radial_gauge_voltage","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(i){e.BaseVoltageRadial.prototype.constructor.call(this,"Pack Voltage"),this.gaugeRegisters=[new t.DataLinkedRegister("pack_power[0].voltage","Pack Voltage",null,n.convertMiliToBase)],this.updateRegisters(i)}return i.prototype=new e.BaseVoltageRadial,i.prototype.constructor=i,i.prototype.render=function(t){this.gaugeBoxClass="radial-gauge-box",e.BaseVoltageRadial.prototype.render.call(this,t)},{PackVoltageRadial:i}}),define("js/radial_gauge_current",["jquery","./data_linked_radial_gauge","./gauge_helpers","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i,r){function o(e,n){t.DataLinkedRadial.prototype.constructor.call(this,n),this.title=e||"Current",this.units="A",this.loRegisterString="stack_fault_current_lo",this.hiRegisterString="stack_fault_current_hi",this.prevMin=1/0,this.prevMax=-1/0,this.prevMinThresh=1/0,this.prevMaxThresh=-1/0,this.prevBuffer=0,this.prevChargeCurrentLimit=0,this.prevDischargeCurrentLimit=0,this.max=-1/0,this.min=1/0}return o.prototype=new t.DataLinkedRadial,o.prototype.constructor=o,o.prototype.generateGaugeThresh=function(e){return[new i.DataLinkedRegister("stack_fault_current_hi["+e+"].thresh","Stack Current High Threshold",null,r.convertMiliToBase),new i.DataLinkedRegister("stack_fault_current_lo["+e+"].thresh","Stack Current Low Threshold",null,r.convertMiliToBase)]},o.prototype.shouldRedrawGaugeRange=function(){return this.max!==this.prevMax||this.min!==this.prevMin||this.prevChargeCurrentLimit!==this.charge_current_limit||this.prevDischargeCurrentLimit!==this.discharge_current_limit},o.prototype.shouldRedrawMax=function(){var e=this.max!==this.prevMax,t=this.actual>this.gaugeOptions.scale.max,n=this.prevValue>this.max+this.prevBuffer||this.prevDischargeCurrentLimit>this.max+this.prevBuffer,i=this.actual<this.max+this.prevBuffer&&this.discharge_current_limit<this.max+this.prevBuffer&&n,r=this.discharge_current_limit>this.gaugeOptions.scale.max;return e||t||i||r},o.prototype.shouldRedrawMin=function(){var e=this.min!==this.prevMin,t=this.actual<this.gaugeOptions.scale.min,n=this.prevValue<this.min-this.prevBuffer||this.prevChargeCurrentLimit<this.min-this.prevBuffer,i=this.actual>this.min-this.prevBuffer&&-Math.abs(this.charge_current_limit)>this.min-this.prevBuffer,r=n&&i,o=-Math.abs(this.charge_current_limit)<this.gaugeOptions.scale.min;return e||t||r||o},o.prototype.setMaxThresh=function(e){this.discharge_current_limit=this.registers[2].displayFunction(e[this.registers[2].name]),t.DataLinkedRadial.prototype.setMaxThreshHelper.call(this,e),this.maxThresh=n.findMax([this.max,this.actual,this.discharge_current_limit])},o.prototype.setMinThresh=function(e){this.charge_current_limit=this.registers[1].displayFunction(e[this.registers[1].name]),t.DataLinkedRadial.prototype.setMinThreshHelper.call(this,e),this.minThresh=n.findMin([this.min,this.actual,-Math.abs(this.charge_current_limit)])},o.prototype.setGaugeMax=function(){this.gaugeOptions.scale.max=this.maxThresh+this.buffer},o.prototype.setGaugeMin=function(){this.gaugeOptions.scale.min=this.minThresh-this.buffer},o.prototype.drawRadialRange=function(){t.DataLinkedRadial.prototype.drawRadialRange.call(this),this.discharge_current_limit>-Math.abs(this.charge_current_limit)?this.gaugeOptions.scale.ranges=[{from:-Math.abs(this.charge_current_limit),to:this.discharge_current_limit,color:"#0c498d"}]:this.gaugeOptions.scale.ranges=[],this.prevChargeCurrentLimit=this.charge_current_limit,this.prevDischargeCurrentLimit=this.discharge_current_limit},{BaseCurrentRadial:o}}),define("js/radial_gauge_pack_current",["./radial_gauge_current","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(i){e.BaseCurrentRadial.prototype.constructor.call(this,"Pack Current"),this.gaugeRegisters=[new t.DataLinkedRegister("pack_power[0].current","Pack Current",null,n.convertMiliToBase),new t.DataLinkedRegister("pack_current_limit[0].charge_current_limit","Charge Limit",null,n.convertMiliToBase),new t.DataLinkedRegister("pack_current_limit[0].discharge_current_limit","Discharge Limit",null,n.convertMiliToBase)],this.updateRegisters(i)}return i.prototype=new e.BaseCurrentRadial,i.prototype.constructor=i,i.prototype.render=function(t){this.gaugeBoxClass="radial-gauge-box",e.BaseCurrentRadial.prototype.render.call(this,t)},{PackCurrentRadial:i}}),define("js/radial_gauge_state_charge",["jquery","./data_linked_radial_gauge"],function(e,t){function n(e){t.DataLinkedRadial.prototype.constructor.call(this,e),this.title="State of Charge",this.units="%",this.registers=e||[],this.prevMin=1/0,this.prevMax=-1/0,this.prevMinThresh=0,this.prevMaxThresh=0,this.prevBuffer=0,this.maxThresh=100,this.minThresh=0}return n.prototype=new t.DataLinkedRadial,n.prototype.constructor=n,{StateOfChargeRadial:n}}),define("js/radial_gauge_pack_state_charge",["./radial_gauge_state_charge","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){var i=[new t.DataLinkedRegister("pack_charge[0].soc","State of Charge",null,n.exactResult)];e.StateOfChargeRadial.prototype.constructor.call(this,i)}return i.prototype=new e.StateOfChargeRadial,i.prototype.constructor=i,i.prototype.render=function(t){this.gaugeBoxClass="radial-gauge-box",e.StateOfChargeRadial.prototype.render.call(this,t)},{PackStateOfChargeRadial:i}}),define("js/radial_gauge_depth_discharge",["jquery","./data_linked_radial_gauge","./gauge_helpers"],function(e,t,n){function i(e){t.DataLinkedRadial.prototype.constructor.call(this,e),this.title="Depth of Discharge",this.units="Ahr",this.registers=e||[],this.prevMin=1/0,this.prevMax=-1/0,this.prevMinThresh=0,this.prevMaxThresh=0,this.prevBuffer=0,this.minThresh=0}return i.prototype=new t.DataLinkedRadial,i.prototype.constructor=i,i.prototype.setMaxThresh=function(e){var t=n.findMax([e[this.registers[1].name],e[this.registers[2].name]]);this.maxThresh=n.findMax([this.registers[1].displayFunction(t),this.actual])},{DepthOfDischargeRadial:i}}),define("js/radial_gauge_pack_depth_discharge",["./radial_gauge_depth_discharge","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){var i=[new t.DataLinkedRegister("pack_charge[0].dod","Depth of Discharge",null,n.convertMiliToBase),new t.DataLinkedRegister("pack_charge[0].nominal_capacity","Nominal Capacity",null,n.convertMiliToBase),new t.DataLinkedRegister("pack_charge[0].measured_capacity","Nominal Capacity",null,n.convertMiliToBase)];e.DepthOfDischargeRadial.prototype.constructor.call(this,i)}return i.prototype=new e.DepthOfDischargeRadial,i.prototype.constructor=i,i.prototype.render=function(t){this.gaugeBoxClass="radial-gauge-box",e.DepthOfDischargeRadial.prototype.render.call(this,t)},{PackDepthOfDischargeRadial:i}}),define("js/data_linked_linear_gauge",["jquery","./data_linked_source_sink","./gauge_helpers"],function(e,t,n){function i(e){t.DataLinkedSink.prototype.constructor.call(this,e),this.rangeDivider=6,this.maxIndex="N/A",this.minIndex="N/A",this.maxTooltipText="N/A",this.minTooltipText="N/A",this.units=null,this.title=null,this.gaugeRegisters=null}return i.prototype=new t.DataLinkedSink,i.prototype.constructor=i,i.prototype.renderWarnTooltip=function(t){this.tooltipDiv=document.createElement("div"),this.tooltipDiv.className="tooltip-warning-hidden",this.warning=document.createElement("a"),this.warning.href="#/",this.warning.className="tooltip-link";var n=document.createElement("img");n.src="img/error.png",this.warning.appendChild(n),this.tooltipDiv.appendChild(this.warning),this.warningTooltip=e(this.tooltipDiv).kendoTooltip({filter:"a",width:120,position:"top"}).data("kendoTooltip"),t.appendChild(this.tooltipDiv)},i.prototype.renderMaxElements=function(t){var n=this.legendTable.insertRow(-1),i=document.createElement("div");i.className="uk-grid legend-box",i.setAttribute("data-uk-grid","");var r=document.createElement("div");r.className="arrow-left uk-width-1-4 max-arrow",i.appendChild(r),this.maxText=document.createElement("div"),this.maxText.innerHTML="MAX: ",this.maxText.className="legend-item uk-width-3-4",i.appendChild(this.maxText);var o=document.createElement("div");o.className="uk-width-1-4 search-icon",i.appendChild(o),this.maxIndexText=document.createElement("div"),this.maxIndexText.className="uk-width-3-4 index-text legend-spacing",this.maxMessage=document.createElement("a"),this.maxMessage.href="#/",this.maxMessage.className="tooltip-link linear-gauge-message",this.maxIndexText.appendChild(this.maxMessage),this.maxTextTooltip=e(this.maxIndexText).kendoTooltip({filter:"a",width:120,position:"top"}).data("kendoTooltip"),i.appendChild(this.maxIndexText),n.appendChild(i)},i.prototype.renderAvgElements=function(e){var t=this.legendTable.insertRow(-1),n=document.createElement("div");n.className="uk-grid legend-box",n.setAttribute("data-uk-grid","");var i=document.createElement("div");i.className="arrow-left uk-width-1-4 avg-arrow",n.appendChild(i),this.avgText=document.createElement("div"),this.avgText.innerHTML="AVG: ",this.avgText.className="legend-item uk-width-3-4 legend-spacing",n.appendChild(this.avgText),t.appendChild(n)},i.prototype.renderMinElements=function(t){var n=this.legendTable.insertRow(-1),i=document.createElement("div");i.className="uk-grid legend-box",i.setAttribute("data-uk-grid","");var r=document.createElement("div");r.className="arrow-left uk-width-1-4 min-arrow",i.appendChild(r),this.minText=document.createElement("div"),this.minText.innerHTML="MIN: ",this.minText.className="legend-item uk-width-3-4",i.appendChild(this.minText);var o=document.createElement("div");o.className="uk-width-1-4 search-icon",i.appendChild(o),this.minIndexText=document.createElement("div"),this.minIndexText.className="uk-width-3-4 index-text",this.minMessage=document.createElement("a"),this.minMessage.href="#/",this.minMessage.className="tooltip-link linear-gauge-message",this.minIndexText.appendChild(this.minMessage),this.minTextTooltip=e(this.minIndexText).kendoTooltip({filter:"a",width:120,position:"top"}).data("kendoTooltip"),i.appendChild(this.minIndexText),n.appendChild(i)},i.prototype.render=function(e){t.DataLinkedSink.prototype.render.call(this,e);var n=document.createElement("div");n.className="linear-gauge-box",this.parent.appendChild(n);var i=document.createElement("div");i.className="box-title",this.gaugeTitle=document.createElement("div"),this.gaugeTitle.innerHTML=this.title,this.gaugeTitle.className="gauge-title linear-gauge-title",i.appendChild(this.gaugeTitle),this.renderWarnTooltip(i),n.appendChild(i);var r=document.createElement("div");r.className="linear-gauge-container",n.appendChild(r),this.gauge=document.createElement("div"),this.gauge.className="linear-gauge",this.gauge.id=this.title.replace(/[^a-zA-z_-]/g,"-").toLowerCase()+"-gauge",r.appendChild(this.gauge),this.legendTable=document.createElement("table"),this.legendTable.className="uk-table uk-table-striped",this.legendTable.appendChild(document.createElement("th")),n.appendChild(this.legendTable),this.renderMaxElements(this.legendTable),this.renderAvgElements(this.legendTable),this.renderMinElements(this.legendTable),this.createGauge()},i.prototype.buildIndexTextAndTooltip=function(e){},i.prototype.setIndexTextAndTooltip=function(){this.maxMessage.innerHTML=this.maxIndex,this.maxTextTooltip.options.content=this.maxTooltipText,this.minMessage.innerHTML=this.minIndex,this.minTextTooltip.options.content=this.minTooltipText,this.maxTooltipText!==this.prevMaxTooltipText&&(this.maxTextTooltip.refresh(),this.prevMaxTooltipText=this.maxTooltipText),this.minTooltipText!==this.prevMinTooltipText&&(this.minTextTooltip.refresh(),this.prevMinTooltipText=this.minTooltipText)},i.prototype.generateGaugeRanges=function(){var e=[this.fault_hi,this.warn_hi,this.warn_lo,this.fault_lo];e.sort(function(e,t){return t-e});for(var t=[],i=[{hi:this.warn_hi,lo:this.warn_lo},{hi:this.warn_hi,lo:this.fault_lo},{hi:this.fault_hi,lo:this.fault_lo},{hi:this.fault_hi,lo:this.warn_lo}],r=0;r<e.length-1;r++)for(var o=e[r],a=e[r+1],s=0;s<i.length;s++){var l=i[s].hi,c=i[s].lo;o===l&&a===c&&o>a&&o<=this.maxThresh&&a>=this.minThresh&&t.push({from:c,to:l,color:n.colors.blue})}return this.fault_hi>this.fault_lo&&(this.fault_hi>this.warn_hi&&t.push({from:this.warn_hi,to:this.fault_hi,color:n.colors.yellow}),this.fault_lo<this.warn_lo&&t.push({from:this.fault_lo,to:this.warn_lo,color:n.colors.yellow})),t.push({from:this.fault_hi,to:this.gaugeOptions.scale.max,color:n.colors.red}),t.push({from:this.gaugeOptions.scale.min,to:this.fault_lo,color:n.colors.red}),t},i.prototype.setGaugeMin=function(){},i.prototype.shouldRedrawGaugeRange=function(){return this.fault_hi!==this.prevFaultHi||this.fault_lo!==this.prevFaultLo||this.warn_hi!==this.prevWarnHi||this.warn_lo!==this.prevWarnLo},i.prototype.threshConfigNotPassLimit=function(){return this.fault_hi!==-1/0&&this.fault_lo!==1/0&&this.warn_hi!==1/0&&this.warn_lo!==-1/0},i.prototype.maxThreshBoundsNotPassLimit=function(){return this.fault_hi_top!==-1/0&&this.fault_lo_btm!==1/0&&this.maxThresh!==-1/0&&this.minThresh!==1/0},i.prototype.shouldRedrawGauge=function(){return this.threshConfigNotPassLimit()&&this.maxThreshBoundsNotPassLimit()},i.prototype.shouldRedrawMax=function(){return this.fault_hi_top!==this.prevFaultHiTop||this.max>this.gaugeOptions.scale.max||this.max<this.fault_hi_top+this.prevBuffer&&this.prevMax>this.fault_hi_top+this.prevBuffer},i.prototype.shouldRedrawMin=function(){return this.fault_lo_btm!==this.prevFaultLoBtm||this.min<this.gaugeOptions.scale.min||this.min>this.fault_lo_btm-this.prevBuffer&&this.prevMin<this.fault_lo_btm-this.prevBuffer},i.prototype.setScaleValue=n.setScaleValue,i.prototype.refreshGaugeGrid=function(t){this.gaugeOptions=t.options,this.maxThresh=n.findMax([this.fault_hi_top,this.max]),this.minThresh=n.findMin([this.fault_lo_btm,this.min]);var i=this.maxThresh-this.minThresh;this.buffer=i/10,0===i&&(i=2,this.buffer=1),this.shouldRedrawGauge()&&(this.shouldRedrawGaugeRange()||this.shouldRedrawMax()||this.shouldRedrawMin())&&(i>0&&(this.shouldRedrawMax()&&(this.gaugeOptions.scale.max=this.maxThresh+this.buffer),this.shouldRedrawMin()&&this.setGaugeMin(),i=this.gaugeOptions.scale.max-this.gaugeOptions.scale.min,this.gaugeOptions.scale.majorUnit=this.gaugeOptions.scale.minorUnit=i/this.rangeDivider),this.gaugeOptions.scale.labels.template=i>20?e.proxy(kendo.template("#= this.setScaleValue(value, 1) + this.units #"),this):e.proxy(kendo.template("#= this.setScaleValue(value, 100) + this.units #"),this),this.gaugeOptions.scale.ranges=this.generateGaugeRanges(),t.redraw(),this.prevFaultHi=this.fault_hi,this.prevFaultLo=this.fault_lo,this.prevWarnHi=this.warn_hi,this.prevWarnLo=this.warn_lo,this.prevMinThresh=this.minThresh,this.prevMaxThresh=this.maxThresh,this.prevMin=this.min,this.prevMax=this.max,this.prevFaultHiTop=this.fault_hi_top,this.prevFaultLoBtm=this.fault_lo_btm,this.prevBuffer=this.buffer)},i.prototype.generateGaugeThresh=function(e){},i.prototype.updateRegisters=function(e){var i=n.generateRegistersForWidget(this.gaugeRegisters,this.generateGaugeThresh,e);t.DataLinkedSink.prototype.updateRegisters.call(this,i)},i.prototype.setWarnMessage=function(e){var t="",n=this.fault_hi<this.fault_lo,i=this.warn_hi<this.warn_lo,r=n||i;n&&i?t="The maximum fault and warning threshold is less than the minimum fault and warning threshold respectively.":n?t="The maximum fault threshold is less than the minimum fault threshold.":i&&(t="The maximum warning threshold is less than the minimum warning threshold."),e?(this.tooltipDiv.className="tooltip-warning-show",this.warningTooltip.options.content="All stacks do not have the same thresholds.",r&&(this.warningTooltip.options.content+="<br>"+t),this.warningTooltip.refresh()):(this.tooltipDiv.className="tooltip-warning-hidden",r&&(this.tooltipDiv.className="tooltip-warning-show",this.warningTooltip.options.content=t,this.warningTooltip.refresh()))},i.prototype.refresh=function(t){var n=e(this.gauge).data("kendoLinearGauge");this.max=this.registers[0].displayFunction(t[this.registers[0].name]);var i=this.registers[1].displayFunction(t[this.registers[1].name]);this.min=this.registers[2].displayFunction(t[this.registers[2].name]),n.allValues([this.min,i,this.max]),this.maxText.innerHTML="MAX: "+this.max+" "+this.units,this.avgText.innerHTML="AVG: "+i+" "+this.units,this.minText.innerHTML="MIN: "+this.min+" "+this.units,this.buildIndexTextAndTooltip(t),this.fault_hi=1/0,this.fault_lo=-1/0,this.fault_hi_top=-1/0,this.fault_lo_btm=1/0,this.warn_hi=1/0,this.warn_lo=-1/0;for(var r=this.fault_hi,o=this.fault_lo,a=this.warn_hi,s=this.warn_lo,l=!0,c=!0,u=!0,d=!0,h=!1,p=0;p<this.registers.length;p++){var f=this.registers[p].name,g=t[f];this.isThresholdRegister(f,"fault","hi",t)?(l?(r=g,l=!1):r!==g&&(h=!0),this.registers[p].displayFunction(g)<this.fault_hi&&(this.fault_hi=this.registers[p].displayFunction(g)),this.registers[p].displayFunction(g)>this.fault_hi_top&&(this.fault_hi_top=this.registers[p].displayFunction(g))):this.isThresholdRegister(f,"fault","lo",t)?(c?(o=g,c=!1):o!==g&&(h=!0),this.registers[p].displayFunction(g)>this.fault_lo&&(this.fault_lo=this.registers[p].displayFunction(g)),this.registers[p].displayFunction(g)<this.fault_lo_btm&&(this.fault_lo_btm=this.registers[p].displayFunction(g))):this.isThresholdRegister(f,"warn","hi",t)?(u?(a=g,u=!1):a!==g&&(h=!0),this.registers[p].displayFunction(g)<this.warn_hi&&(this.warn_hi=this.registers[p].displayFunction(g))):this.isThresholdRegister(f,"warn","lo",t)&&(d?(s=g,d=!1):s!==g&&(h=!0),this.registers[p].displayFunction(g)>this.warn_lo&&(this.warn_lo=this.registers[p].displayFunction(g)))}this.setWarnMessage(h),this.refreshGaugeGrid(n)},i.prototype.isThresholdRegister=function(e,t,n,i){return-1!==e.indexOf(t)&&-1!==e.indexOf(n)},i.prototype.createGauge=function(){e(this.gauge).kendoLinearGauge({pointer:[{value:0,color:"#00A4B2",margin:30,shape:"arrow"},{value:0,color:"black",margin:20,shape:"arrow"},{value:0,color:"#FF6700",margin:10,shape:"arrow"}],scale:{labels:{template:"#= value # "+this.units,font:"12px Arial,Helvetica,sans-serif"},majorUnit:20,minorUnit:20,min:-40,max:60,vertical:!0},gaugeArea:{width:"120"}})},{DataLinkedLinear:i}}),define("js/linear_gauge_stack_voltage",["jquery","./data_linked_linear_gauge","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i){function r(e){t.DataLinkedLinear.prototype.constructor.call(this),this.title="Stack Voltage",this.units="V",this.stackMaxIndexString="pack_voltage_stat_enabled[0].maxindex",this.stackMinIndexString="pack_voltage_stat_enabled[0].minindex",this.gaugeRegisters=[new n.DataLinkedRegister("pack_voltage_stat_enabled[0].max","Stack Max Voltage",null,i.convertMiliToBase),new n.DataLinkedRegister("pack_voltage_stat_enabled[0].avg","Stack Average Voltage",null,i.convertMiliToBase),new n.DataLinkedRegister("pack_voltage_stat_enabled[0].min","Stack Min Voltage",null,i.convertMiliToBase),new n.DataLinkedRegister(this.stackMaxIndexString,"Cell Max Index",null,i.displayIndexAsStackAddress),new n.DataLinkedRegister(this.stackMinIndexString,"Cell Min Index",null,i.displayIndexAsStackAddress)],this.updateRegisters(e)}return r.prototype=new t.DataLinkedLinear,r.prototype.constructor=r,r.prototype.generateGaugeThresh=function(e){return[new n.DataLinkedRegister("stack_fault_voltage_hi["+e+"].thresh","Stack Voltage Fault Threshold Hi",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_fault_voltage_lo["+e+"].thresh","Stack Voltage Fault Threshold Low",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_warn_voltage_hi["+e+"].thresh","Stack Voltage Warning Threshold Hi",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_warn_voltage_lo["+e+"].thresh","Stack Voltage Warning Threshold Low",null,i.convertMiliToBase)]},r.prototype.buildIndexTextAndTooltip=function(e){var t=e[this.stackMaxIndexString],n=e[this.stackMinIndexString];this.maxIndex=i.displayIndexAsStackAddress(t),this.minIndex=i.displayIndexAsStackAddress(n),this.maxTooltipText=i.displayIndexAsStackFullText(t),this.minTooltipText=i.displayIndexAsStackFullText(n),this.setIndexTextAndTooltip()},r.prototype.setGaugeMin=function(){t.DataLinkedLinear.prototype.setGaugeMin.call(this),this.minThresh-this.buffer>0?this.gaugeOptions.scale.min=this.minThresh-this.buffer:this.gaugeOptions.scale.min=0},{StackVoltageLinear:r}}),define("js/linear_gauge_stack_current",["jquery","./data_linked_linear_gauge","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i){function r(e){t.DataLinkedLinear.prototype.constructor.call(this),this.title="Stack Current",this.units="A",this.stackMaxIndexString="pack_current_stat_enabled[0].maxindex",this.stackMinIndexString="pack_current_stat_enabled[0].minindex",this.gaugeRegisters=[new n.DataLinkedRegister("pack_current_stat_enabled[0].max","Stack Max Current",null,i.convertMiliToBase),new n.DataLinkedRegister("pack_current_stat_enabled[0].avg","Stack Average Current",null,i.convertMiliToBase),new n.DataLinkedRegister("pack_current_stat_enabled[0].min","Stack Min Current",null,i.convertMiliToBase),new n.DataLinkedRegister(this.stackMaxIndexString,"Cell Max Index",null,i.displayIndexAsStackAddress),new n.DataLinkedRegister(this.stackMinIndexString,"Cell Min Index",null,i.displayIndexAsStackAddress)],this.updateRegisters(e)}return r.prototype=new t.DataLinkedLinear,r.prototype.constructor=r,r.prototype.generateGaugeThresh=function(e){return[new n.DataLinkedRegister("stack_fault_current_hi["+e+"].thresh","Stack Current Fault Threshold Hi",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_fault_current_lo["+e+"].thresh","Stack Current Fault Threshold Low",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_warn_current_hi["+e+"].thresh","Stack Current Warning Threshold Hi",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_warn_current_lo["+e+"].thresh","Stack Current Warning Threshold Low",null,i.convertMiliToBase)]},r.prototype.buildIndexTextAndTooltip=function(e){var t=e[this.stackMaxIndexString],n=e[this.stackMinIndexString];this.maxIndex=i.displayIndexAsStackAddress(t),this.minIndex=i.displayIndexAsStackAddress(n),this.maxTooltipText=i.displayIndexAsStackFullText(t),this.minTooltipText=i.displayIndexAsStackFullText(n),this.setIndexTextAndTooltip()},r.prototype.setGaugeMin=function(){t.DataLinkedLinear.prototype.setGaugeMin.call(this),this.gaugeOptions.scale.min=this.minThresh-this.buffer},{StackCurrentLinear:r}}),define("js/linear_gauge_cell_voltage",["jquery","./data_linked_linear_gauge","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i){function r(e){t.DataLinkedLinear.prototype.constructor.call(this,e),this.title="Cell Voltage",this.units="V"}return r.prototype=new t.DataLinkedLinear,r.prototype.constructor=r,r.prototype.generateGaugeThresh=function(e){return[new n.DataLinkedRegister("stack_fault_cell_hi["+e+"].thresh","Cell Voltage Fault Threshold Hi",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_fault_cell_lo["+e+"].thresh","Cell Voltage Fault Threshold Low",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_warn_cell_hi["+e+"].thresh","Cell Voltage Warning Threshold Hi",null,i.convertMiliToBase),new n.DataLinkedRegister("stack_warn_cell_lo["+e+"].thresh","Cell Voltage Warning Threshold Low",null,i.convertMiliToBase)]},r.prototype.setGaugeMin=function(){this.minThresh-this.buffer>0?this.gaugeOptions.scale.min=this.minThresh-this.buffer:this.gaugeOptions.scale.min=0},{CellVoltageLinear:r}}),define("js/linear_gauge_pack_cell_voltage",["./linear_gauge_cell_voltage","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(i){e.CellVoltageLinear.prototype.constructor.call(this),this.stackMaxIndexString="pack_cell_stat_enabled[0].maxindex",this.stackMinIndexString="pack_cell_stat_enabled[0].minindex",this.cellMaxIndexString="pack_cell_stat_enabled_indexes[0].maxindex",this.cellMinIndexString="pack_cell_stat_enabled_indexes[0].minindex",this.gaugeRegisters=[new t.DataLinkedRegister("pack_cell_stat_enabled[0].max","Cell Max Voltage",null,n.convertMiliToBase),new t.DataLinkedRegister("pack_cell_stat_enabled[0].avg","Cell Average Voltage",null,n.convertMiliToBase),new t.DataLinkedRegister("pack_cell_stat_enabled[0].min","Cell Min Voltage",null,n.convertMiliToBase),new t.DataLinkedRegister(this.stackMaxIndexString,"Stack Max Index",null,n.displayIndexAsStackAddress),new t.DataLinkedRegister(this.stackMinIndexString,"Stack Min Index",null,n.displayIndexAsStackAddress),new t.DataLinkedRegister(this.cellMaxIndexString,"Cell Max Index",null,n.displayIndexAsCellVoltageAddress),new t.DataLinkedRegister(this.cellMinIndexString,"Cell Min Index",null,n.displayIndexAsCellVoltageAddress)],this.updateRegisters(i)}return i.prototype=new e.CellVoltageLinear,i.prototype.constructor=i,i.prototype.buildIndexTextAndTooltip=function(e){var t=e[this.stackMaxIndexString],i=e[this.stackMinIndexString],r=e[this.cellMaxIndexString],o=e[this.cellMinIndexString],a=(t=n.displayIndexAsStackAddress(t),i=n.displayIndexAsStackAddress(i),n.displayIndexAsCellVoltageAddress(r)),s=n.displayIndexAsCellVoltageAddress(o),l=n.displayIndexAsStackFullText(t),c=n.displayIndexAsStackFullText(i),u=n.displayIndexAsCellVoltageFullText(r),d=n.displayIndexAsCellVoltageFullText(o);this.maxIndex=t+":"+a,this.minIndex=i+":"+s,this.maxTooltipText=l+"<br>"+u,this.minTooltipText=c+"<br>"+d,this.setIndexTextAndTooltip()},{PackCellVoltageLinear:i}}),define("js/linear_gauge_temperature",["jquery","./data_linked_linear_gauge","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i){function r(e){t.DataLinkedLinear.prototype.constructor.call(this,e),this.title="Temperature",this.units="°C"}return r.prototype=new t.DataLinkedLinear,r.prototype.constructor=r,r.prototype.generateGaugeThresh=function(e){return[new n.DataLinkedRegister("stack_charge_status["+e+"].charging_discharging","Charge Status",null,i.exactResult),new n.DataLinkedRegister("stack_fault_discharge_therm_hi["+e+"].thresh","Temp Fault Threshold Hi",null,i.exactResult),new n.DataLinkedRegister("stack_fault_discharge_therm_lo["+e+"].thresh","Temp Fault Threshold Low",null,i.exactResult),new n.DataLinkedRegister("stack_fault_charge_therm_hi["+e+"].thresh","Temp Fault Threshold Hi",null,i.exactResult),new n.DataLinkedRegister("stack_fault_charge_therm_lo["+e+"].thresh","Temp Fault Threshold Low",null,i.exactResult),new n.DataLinkedRegister("stack_warn_discharge_therm_hi["+e+"].thresh","Temp Warning Threshold Hi",null,i.exactResult),new n.DataLinkedRegister("stack_warn_discharge_therm_lo["+e+"].thresh","Temp Warning Threshold Low",null,i.exactResult),new n.DataLinkedRegister("stack_warn_charge_therm_hi["+e+"].thresh","Temp Warning Threshold Hi",null,i.exactResult),new n.DataLinkedRegister("stack_warn_charge_therm_lo["+e+"].thresh","Temp Warning Threshold Low",null,i.exactResult)]},r.prototype.isThresholdRegister=function(e,t,n,i){var r=0;for(var o in i)if(0===o.indexOf("stack_charge_status")){r=i[o];break}return 0===e.indexOf("stack_"+t+"_"+(r?"":"dis")+"charge_therm_"+n)},r.prototype.setGaugeMin=function(){t.DataLinkedLinear.prototype.setGaugeMin.call(this),this.gaugeOptions.scale.min=this.minThresh-this.buffer},{TemperatureLinear:r}}),define("js/linear_gauge_pack_temperature",["./linear_gauge_temperature","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(i){e.TemperatureLinear.prototype.constructor.call(this),this.stackMaxIndexString="pack_therm_stat_enabled[0].maxindex",this.stackMinIndexString="pack_therm_stat_enabled[0].minindex",this.cellMaxIndexString="pack_therm_stat_enabled_indexes[0].maxindex",this.cellMinIndexString="pack_therm_stat_enabled_indexes[0].minindex",this.gaugeRegisters=[new t.DataLinkedRegister("pack_therm_stat_enabled[0].max","Max Temperature",null,n.exactResult),new t.DataLinkedRegister("pack_therm_stat_enabled[0].avg","Average Current",null,n.exactResult),new t.DataLinkedRegister("pack_therm_stat_enabled[0].min","Min Current",null,n.exactResult),new t.DataLinkedRegister(this.stackMaxIndexString,"Stack Max Index",null,n.displayIndexAsStackAddress),new t.DataLinkedRegister(this.stackMinIndexString,"Stack Min Index",null,n.displayIndexAsStackAddress),new t.DataLinkedRegister(this.cellMaxIndexString,"Therm Max Index",null,n.displayIndexAsCellTempAddress),new t.DataLinkedRegister(this.cellMinIndexString,"Therm Min Index",null,n.displayIndexAsCellTempAddress)],this.updateRegisters(i)}return i.prototype=new e.TemperatureLinear,i.prototype.constructor=i,i.prototype.buildIndexTextAndTooltip=function(e){var t=e[this.stackMaxIndexString],i=e[this.stackMinIndexString],r=e[this.cellMaxIndexString],o=e[this.cellMinIndexString],a=(t=n.displayIndexAsStackAddress(t),i=n.displayIndexAsStackAddress(i),n.displayIndexAsCellTempAddress(r)),s=n.displayIndexAsCellTempAddress(o),l=n.displayIndexAsStackFullText(t),c=n.displayIndexAsStackFullText(i),u=n.displayIndexAsCellTempFullText(r),d=n.displayIndexAsCellTempFullText(o);this.maxIndex=t+":"+a,this.minIndex=i+":"+s,this.maxTooltipText=l+"<br>"+u,this.minTooltipText=c+"<br>"+d,this.setIndexTextAndTooltip()},{PackTemperatureLinear:i}}),define("js/data_linked_bms_info",["jquery","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(e){t.DataLinkedSink.prototype.constructor.call(this,e),this.numBalanced=0,this.bmsInfoNameValuePairs={"Cells Balancing":null,"Charge Limit":null,"Discharge Limit":null}}return i.prototype=new t.DataLinkedSink,i.prototype.constructor=i,i.prototype.render=function(e){t.DataLinkedSink.prototype.render.call(this,e);var n=document.createElement("div");this.parent.appendChild(n),this.infoTable=document.createElement("table"),this.infoTable.id="bms-info-table",this.infoTable.className="uk-table uk-table-striped",n.appendChild(this.infoTable);var i=document.createElement("th");i.innerHTML="Name",this.infoTable.appendChild(i),(i=document.createElement("th")).innerHTML="Value",this.infoTable.appendChild(i);var r=document.createElement("tbody");for(var o in this.infoTable.appendChild(r),this.bmsInfoNameValuePairs){var a=r.insertRow(-1);cell=a.insertCell(0),cell.innerHTML=o,this.bmsInfoNameValuePairs[o]=a.insertCell(1)}},i.prototype.refresh=function(e){t.DataLinkedSink.prototype.refresh.call(this,e),cell=this.bmsInfoNameValuePairs["Cells Balancing"],cell.innerHTML=this.numBalanced;for(var n=0;n<this.registers.length;n++){var i=this.registers[n];-1!==i.displayName.indexOf("Charge Limit")?(cell=this.bmsInfoNameValuePairs["Charge Limit"],cell.innerHTML=i.displayFunction("-"+e[i.name])):-1!==i.displayName.indexOf("Discharge Limit")&&(cell=this.bmsInfoNameValuePairs["Discharge Limit"],cell.innerHTML=i.displayFunction(e[i.name]))}},{DataLinkedBMSInfo:i}}),define("js/bms_info_pack",["./data_linked_bms_info","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers","./gauge_helpers"],function(e,t,n,i){function r(t){e.DataLinkedBMSInfo.prototype.constructor.call(this),this.updateRegisters(t),this.packCellBalancerRegister="pack_cell_balancer_stat[0].nbal",this.packStackInstalledRegister="pack_stack_summary[0].installed_count",this.stacksConnectedRegister="pack_control_stat[0].num_connected",this.bmsInfoNameValuePairs["Connected Stacks"]=null,this.bmsInfoNameValuePairs["Total Stacks"]=null}return r.prototype=new e.DataLinkedBMSInfo,r.prototype.constructor=r,r.prototype.updateRegisters=function(i){var r=[new t.DataLinkedRegister("pack_current_limit[0].charge_current_limit","Charge Limit",null,n.displayMiliAmpAsAmp),new t.DataLinkedRegister("pack_current_limit[0].discharge_current_limit","Discharge Limit",null,n.displayMiliAmpAsAmp),new t.DataLinkedRegister(this.packCellBalancerRegister,"Stack Installed",null,n.exactResult),new t.DataLinkedRegister(this.packStackInstalledRegister,"Stack Installed",null,n.exactResult),new t.DataLinkedRegister(this.stacksConnectedRegister,"Stack Connection State",null,n.exactResult)];e.DataLinkedBMSInfo.prototype.updateRegisters.call(this,r)},r.prototype.refresh=function(t){this.numBalanced=t[this.packCellBalancerRegister];var n=this.bmsInfoNameValuePairs["Connected Stacks"];n.innerHTML=t[this.stacksConnectedRegister],(n=this.bmsInfoNameValuePairs["Total Stacks"]).innerHTML=t[this.packStackInstalledRegister],e.DataLinkedBMSInfo.prototype.refresh.call(this,t)},{PackDataLinkedBMSInfo:r}}),define("js/data_linked_bms_status",["jquery","./data_linked_source_sink"],function(e,t){function n(e){this.safetyLinkedRegisters=e||[],t.DataLinkedSink.prototype.constructor.call(this,this.safetyLinkedRegisters),this.title="BMS Status",this.okButtonString="img/all_ok1.png"}return n.prototype=new t.DataLinkedSink,n.prototype.constructor=n,n.prototype.render=function(e){t.DataLinkedSink.prototype.render.call(this,e);var n=document.createElement("div");n.className="box-title",this.parent.appendChild(n),this.statusTitle=document.createElement("div"),this.statusTitle.className="gauge-title-info",this.statusTitle.innerHTML=this.title,n.appendChild(this.statusTitle);var i=document.createElement("div");i.id="fault-status",this.parent.appendChild(i),this.statusButton=document.createElement("img"),this.statusButton.className="round-button-circle status-button",this.statusButton.src=this.okButtonString,i.appendChild(this.statusButton),this.statusText=document.createElement("div"),this.statusText.className="status-text",i.appendChild(this.statusText);var r=document.createElement("div");r.id="connection-status-container",gbcIndex?r.className="red-oval":(r.className="red-oval-stack",r.appendChild(document.createTextNode(gbcIndex?"Stacks":"Stack"))),this.parent.appendChild(r),this.connectionStatus=document.createElement("div"),this.connectionStatus.id="connection-status",this.connectionStatus.innerHTML="Disconnected",r.appendChild(this.connectionStatus)},n.prototype.refresh=function(e){t.DataLinkedSink.prototype.refresh.call(this,e);var n=e[this.registers[0].name],i=e[this.registers[1].name];if(gbcIndex){var r=parseInt(e[this.registers[9].name]),o=e[this.registers[3].name],a="Disabled";r&&(a=o?"Connected":"Disconnected")}else{var s=e[this.registers[2].name],l=e[this.registers[3].name];a=s||l?"Connected":"Disconnected"}this.setConnectionState(e),n?i?(this.statusButton.src="img/warning.png",this.statusText.innerHTML="Warning"):(this.statusButton.src=this.okButtonString,this.statusText.innerHTML="ALL OK"):(this.statusButton.src="img/fault.png",this.statusText.innerHTML="Fault"),this.setPushButtonStates(this.statusText.innerHTML,a,e)},n.prototype.setConnectionState=function(t){var n=t[this.registers[2].name],i="Unknown",r="red-oval";if(gbcIndex){var o=parseInt(t[this.registers[9].name]),a=t[this.registers[3].name],s=parseInt(t[this.registers[4].name]),l=parseInt(t[this.registers[5].name]),c=parseInt(t[this.registers[6].name]),u=parseInt(t[this.registers[7].name]),d=parseInt(t[this.registers[8].name]),h=s+l+c+u+d;0===o||1===o&&1===a?0==l?(r="green-oval",i="<div>Connected</div>",i+="<div>"+u+"/"+h+"</div>"):(r="green-orange-oval",i="<div>Connected</div>",i+="<div>"+u+"/"+h+"</div>",i+="<br /><div>Precharging</div>",i+="<div>"+l+"/"+h+"</div>"):0==d?(r="red-oval",i="<div>Disconnected</div>",i+="<div>"+s+"/"+h+"</div>"):(r="red-orange-oval",i="<div>Disconnected</div>",i+="<div>"+s+"/"+h+"</div>",i+="<br /><div>Disconnecting</div>",i+="<div>"+d+"/"+h+"</div>")}else{var p=t[this.registers[3].name];0===n&&0===p?(i="Disconnected",r="red-oval-stack"):1===n&&0===p?(i="Connected",r="green-oval-stack"):1===p&&(i="Pre-charging",r="orange-oval-stack")}this.connectionStatus.innerHTML=i,e("#connection-status-container").removeClass("green-oval orange-oval red-oval green-orange-oval red-orange-oval green-oval-stack orange-oval-stack red-oval-stack").addClass(r)},n.prototype.setPushButtonStates=function(t,n,i){var r=!0,o=!1;"Disabled"===n?e("#connect-button").hide():e("#connect-button").show(),"Disconnected"===n?e("#connect-button").attr("title","Connect").attr("data-register-value",1).text("Connect"):e("#connect-button").attr("title","Disconnect").attr("data-register-value",0).text("Disconnect"),"Warning"===t?r=!1:"Fault"===t&&(r=!1,"Disconnected"===n&&(o=!0)),gbcIndex&&!parseInt(i[this.registers[9].name])&&(o=!0),e("#clear-faults-button").attr("disabled",r),e("#connect-button").attr("disabled",o)},{DataLinkedBMSStatus:n}}),define("js/bms_status_pack",["./data_linked_bms_status","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){var i=[new t.DataLinkedRegister("pack_safety[0].safe","Overall Safe",null,n.displayIntegerAsBoolean),new t.DataLinkedRegister("pack_safety[0].warning","Warning",null,n.displayIntegerAsBoolean),new t.DataLinkedRegister("pack_control[0].actual_state","Actual Switch State",null,n.displayIntegerAsBoolean),new t.DataLinkedRegister("pack_control[0].requested_state","Requested Switch State",null,n.displayIntegerAsBoolean),new t.DataLinkedRegister("pack_control_stat[0].num_disconnected","Number of stacks in disconnected state",null,n.exactResult),new t.DataLinkedRegister("pack_control_stat[0].num_precharge","Number of stacks in precharge state",null,n.exactResult),new t.DataLinkedRegister("pack_control_stat[0].num_connecting","Number of stacks in connecting state",null,n.exactResult),new t.DataLinkedRegister("pack_control_stat[0].num_connected","Number of stacks in connected state",null,n.exactResult),new t.DataLinkedRegister("pack_control_stat[0].num_disconnecting","Number of stacks in disconnecting state",null,n.exactResult),new t.DataLinkedRegister("pack_control[0].enabled","Pack Control enabled",null,n.exactResult)];e.DataLinkedBMSStatus.prototype.constructor.call(this,i)}return i.prototype=new e.DataLinkedBMSStatus,i.prototype.constructor=i,{PackDataLinkedBMSStatus:i}}),define("js/dashboard_tab_pack",["jquery","./dashboard_tab","./data_linked_source_sink","./data_linked_stack_state","./radial_gauge_pack_voltage","./radial_gauge_pack_current","./radial_gauge_pack_state_charge","./radial_gauge_pack_depth_discharge","./linear_gauge_stack_voltage","./linear_gauge_stack_current","./linear_gauge_pack_cell_voltage","./linear_gauge_pack_temperature","./bms_info_pack","./bms_status_pack"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p){function f(e){t.DashboardTab.prototype.constructor.call(this,e),this.stackState=new i.DataLinkedStackState,dataSinks=[],dataSinks.push(this.stackState),this.stackStateSource=new n.DataLinkedSource(this.api,dataSinks),this.faultsLookup={"pack_safety.clear_faults":1,"pack_safety.clear_warnings":1},this.configLastUpdate=0}return f.prototype=new t.DashboardTab,f.prototype.constructor=f,f.prototype.refresh=function(){this.stackStateSource.refresh(e.proxy(this.successRefreshStackStateResult,this),e.proxy(this.errorRefreshStackStateResult,this))},f.prototype.successRefreshStackStateResult=function(t){this.updateWidgetRegisters(),this.updateSuccessStatusDiv(),this.isStarted&&setTimeout(e.proxy(this.refreshWidgets,this),this.dataRefreshPeriod)},f.prototype.errorRefreshStackStateResult=function(t){this.updateSuccessStatusDiv("Error: "+t),this.isStarted&&setTimeout(e.proxy(this.refresh,this),this.dataRefreshPeriod)},f.prototype.startRefresh=function(){this.isStarted||(this.isStarted=!0,this.refresh())},f.prototype.successRefreshResult=function(n){t.DashboardTab.prototype.successRefreshResult.call(this,n),this.isStarted&&setTimeout(e.proxy(this.refresh,this),this.dataRefreshPeriod)},f.prototype.initializeWidgets=function(){var e=this.stackState.installed;return this.voltageRadialGauge=new r.PackVoltageRadial(e),this.currentRadialGauge=new o.PackCurrentRadial(e),this.socRadialGauge=new a.PackStateOfChargeRadial,this.dodRadialGauge=new s.PackDepthOfDischargeRadial,this.packVoltageLinearGauge=new l.StackVoltageLinear(e),this.packCurrentLinearGauge=new c.StackCurrentLinear(e),this.cellVoltageLinearGauge=new u.PackCellVoltageLinear(e),this.cellTempLinearGauge=new d.PackTemperatureLinear(e),this.bmsInfoPage=new h.PackDataLinkedBMSInfo(e),this.bmsStatusSummary=new p.PackDataLinkedBMSStatus,!0},f.prototype.getRadialGaugeClass=function(){return"uk-width-large-4-4 uk-width-medium-2-2 uk-width-small-1-1 uk-grid-width-large-1-4 uk-grid uk-grid-width-medium-1-2 uk-grid-width-small-1-1 radial-gauge-grid"},f.prototype.getLinearGaugeClass=function(){return"uk-width-large-4-4 uk-width-medium-2-2 uk-width-small-1-1 uk-grid-width-large-1-4 uk-grid uk-grid-width-medium-1-2 uk-grid-width-small-1-1 linear-gauge-grid"},f.prototype.getStatusSummaryClass=function(){return"status-summary-grid"},f.prototype.addLinearElements=function(){this.linearGridParent.gridElements.push(this.packVoltageLinearGauge),this.linearGridParent.gridElements.push(this.packCurrentLinearGauge),t.DashboardTab.prototype.addLinearElements.call(this)},f.prototype.appendGaugeRegisters=function(){this.gaugeGridRegisters=this.concatAllRegisters([this.packVoltageLinearGauge.registers,this.packCurrentLinearGauge.registers]),t.DashboardTab.prototype.appendGaugeRegisters.call(this)},f.prototype.filterConfigRegisters=function(e){var t=[/stack_charge_status\[[0-9]*\]\.charging_discharging/i];if(-1==this.configLastUpdate){for(var n=e.length;n--;)if(e[n].name.startsWith("stack")){for(var i=!1,r=0;r<t.length;r++)if(t[r].test(e[n].name)){i=!0;break}i||e.splice(n,1)}}else this.configLastUpdate=-1;return e},f.prototype.updateWidgetRegisters=function(){var e=this.stackState.installed;this.voltageRadialGauge.updateRegisters(e),this.currentRadialGauge.updateRegisters(e),this.cellVoltageLinearGauge.updateRegisters(e),this.cellTempLinearGauge.updateRegisters(e),this.bmsInfoPage.updateRegisters(e),this.packVoltageLinearGauge.updateRegisters(e),this.packCurrentLinearGauge.updateRegisters(e),this.gaugeGridRegisters=this.concatAllRegisters([this.voltageRadialGauge.registers,this.currentRadialGauge.registers,this.socRadialGauge.registers,this.dodRadialGauge.registers,this.cellVoltageLinearGauge.registers,this.cellTempLinearGauge.registers,this.packVoltageLinearGauge.registers,this.packCurrentLinearGauge.registers]),this.gaugeGridParent.registers=this.filterConfigRegisters(this.gaugeGridRegisters);var t=this.concatAllRegisters([this.bmsStatusSummary.registers,this.bmsInfoPage.registers]);this.statusBarSide.registers=this.filterConfigRegisters(t)},{PackDashboardTab:f}}),define("js/radial_gauge_stack_voltage",["./radial_gauge_voltage","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(i){var r=[new t.DataLinkedRegister("stack_power[0].voltage","Stack Voltage",null,n.convertMiliToBase)];r=r.concat(this.generateGaugeThresh(0)),e.BaseVoltageRadial.prototype.constructor.call(this,"Stack Voltage",r)}return i.prototype=new e.BaseVoltageRadial,i.prototype.constructor=i,i.prototype.render=function(t){this.gaugeBoxClass="stack-radial-gauge-box",e.BaseVoltageRadial.prototype.render.call(this,t)},{StackVoltageRadial:i}}),define("js/radial_gauge_stack_current",["./radial_gauge_current","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){var i=[new t.DataLinkedRegister("stack_power[0].current","Stack Current",null,n.convertMiliToBase),new t.DataLinkedRegister("stack_current_limit[0].charge_current_limit","Charge Limit",null,n.convertMiliToBase),new t.DataLinkedRegister("stack_current_limit[0].discharge_current_limit","Discharge Limit",null,n.convertMiliToBase)];i=i.concat(this.generateGaugeThresh(0)),e.BaseCurrentRadial.prototype.constructor.call(this,"Stack Current",i)}return i.prototype=new e.BaseCurrentRadial,i.prototype.constructor=i,i.prototype.render=function(t){this.gaugeBoxClass="stack-radial-gauge-box",e.BaseCurrentRadial.prototype.render.call(this,t)},{StackCurrentRadial:i}}),define("js/radial_gauge_stack_state_charge",["./radial_gauge_state_charge","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){var i=[new t.DataLinkedRegister("stack_soc[0].soc","State of Charge",null,n.exactResult)];e.StateOfChargeRadial.prototype.constructor.call(this,i)}return i.prototype=new e.StateOfChargeRadial,i.prototype.constructor=i,i.prototype.render=function(t){this.gaugeBoxClass="stack-radial-gauge-box",e.StateOfChargeRadial.prototype.render.call(this,t)},{StackStateOfChargeRadial:i}}),define("js/radial_gauge_stack_depth_discharge",["./radial_gauge_depth_discharge","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){var i=[new t.DataLinkedRegister("stack_soc[0].dod","Depth of Discharge",null,n.convertMiliToBase),new t.DataLinkedRegister("stack_soc[0].nominal_capacity","Nominal Capacity",null,n.convertMiliToBase),new t.DataLinkedRegister("stack_soc[0].measured_capacity","Nominal Capacity",null,n.convertMiliToBase)];e.DepthOfDischargeRadial.prototype.constructor.call(this,i)}return i.prototype=new e.DepthOfDischargeRadial,i.prototype.constructor=i,i.prototype.render=function(t){this.gaugeBoxClass="stack-radial-gauge-box",e.DepthOfDischargeRadial.prototype.render.call(this,t)},{StackDepthOfDischargeRadial:i}}),define("js/linear_gauge_stack_cell_voltage",["./linear_gauge_cell_voltage","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){this.cellMaxIndexString="stack_cell_stat[0].maxindex",this.cellMinIndexString="stack_cell_stat[0].minindex";var i=[new t.DataLinkedRegister("stack_cell_stat[0].max","Cell Max Voltage",null,n.convertMiliToBase),new t.DataLinkedRegister("stack_cell_stat[0].avg","Cell Average Voltage",null,n.convertMiliToBase),new t.DataLinkedRegister("stack_cell_stat[0].min","Cell Min Voltage",null,n.convertMiliToBase),new t.DataLinkedRegister(this.cellMaxIndexString,"Cell Max Index",null,n.displayIndexAsCellVoltageAddress),new t.DataLinkedRegister(this.cellMinIndexString,"Cell Max Index",null,n.displayIndexAsCellVoltageAddress)];i=i.concat(this.generateGaugeThresh(0)),e.CellVoltageLinear.prototype.constructor.call(this,i)}return i.prototype=new e.CellVoltageLinear,i.prototype.constructor=i,i.prototype.buildIndexTextAndTooltip=function(e){var t=e[this.cellMaxIndexString],i=e[this.cellMinIndexString];this.maxIndex=n.displayIndexAsCellVoltageAddress(t),this.minIndex=n.displayIndexAsCellVoltageAddress(i),this.maxTooltipText=n.displayIndexAsCellVoltageFullText(t),this.minTooltipText=n.displayIndexAsCellVoltageFullText(i),this.setIndexTextAndTooltip()},{StackCellVoltageLinear:i}}),define("js/linear_gauge_stack_temperature",["./linear_gauge_temperature","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){this.cellMaxIndexString="stack_therm_stat[0].maxindex",this.cellMinIndexString="stack_therm_stat[0].minindex";var i=[new t.DataLinkedRegister("stack_therm_stat[0].max","Max Temperature",null,n.exactResult),new t.DataLinkedRegister("stack_therm_stat[0].avg","Average Current",null,n.exactResult),new t.DataLinkedRegister("stack_therm_stat[0].min","Min Current",null,n.exactResult),new t.DataLinkedRegister(this.cellMaxIndexString,"Max Index",null,n.displayIndexAsCellTempAddress),new t.DataLinkedRegister(this.cellMinIndexString,"Min Index",null,n.displayIndexAsCellTempAddress)];i=i.concat(this.generateGaugeThresh(0)),e.TemperatureLinear.prototype.constructor.call(this,i)}return i.prototype=new e.TemperatureLinear,i.prototype.constructor=i,i.prototype.buildIndexTextAndTooltip=function(e){var t=e[this.cellMaxIndexString],i=e[this.cellMinIndexString];this.maxIndex=n.displayIndexAsCellVoltageAddress(t),this.minIndex=n.displayIndexAsCellVoltageAddress(i),this.maxTooltipText=n.displayIndexAsCellVoltageFullText(t),this.minTooltipText=n.displayIndexAsCellVoltageFullText(i),this.setIndexTextAndTooltip()},{StackTemperatureLinear:i}}),define("js/bms_info_stack",["./data_linked_bms_info","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){this.stackCellBalancerRegister="stack_cell_summary_stat[0].nbal";var i=[new t.DataLinkedRegister("stack_current_limit[0].charge_current_limit","Charge Limit",null,n.displayMiliAmpAsAmp),new t.DataLinkedRegister("stack_current_limit[0].discharge_current_limit","Discharge Limit",null,n.displayMiliAmpAsAmp),new t.DataLinkedRegister(this.stackCellBalancerRegister,"Cells Balancing",null,n.exactResult)];e.DataLinkedBMSInfo.prototype.constructor.call(this,i)}return i.prototype=new e.DataLinkedBMSInfo,i.prototype.constructor=i,i.prototype.refresh=function(t){this.numBalanced=t[this.stackCellBalancerRegister],e.DataLinkedBMSInfo.prototype.refresh.call(this,t)},{StackDataLinkedBMSInfo:i}}),define("js/bms_status_stack",["./data_linked_bms_status","./data_linked_source_sink","./bms-legacy-api/lib/type_helpers"],function(e,t,n){function i(){var i=[new t.DataLinkedRegister("stack_safety[0].safe","Overall Safe",null,n.displayIntegerAsBoolean),new t.DataLinkedRegister("stack_safety[0].warning","Warning",null,n.displayIntegerAsBoolean),new t.DataLinkedRegister("stack_control[0].main_switch_state","Main Switch State",null,n.displayIntegerAsBoolean),new t.DataLinkedRegister("stack_control[0].precharge_switch_state","Precharge Switch State",null,n.displayIntegerAsBoolean)];e.DataLinkedBMSStatus.prototype.constructor.call(this,i)}return i.prototype=new e.DataLinkedBMSStatus,i.prototype.constructor=i,{StackDataLinkedBMSStatus:i}}),define("js/dashboard_tab_stack",["jquery","./dashboard_tab","./radial_gauge_stack_voltage","./radial_gauge_stack_current","./radial_gauge_stack_state_charge","./radial_gauge_stack_depth_discharge","./linear_gauge_stack_cell_voltage","./linear_gauge_stack_temperature","./bms_info_stack","./bms_status_stack"],function(e,t,n,i,r,o,a,s,l,c){function u(e){t.DashboardTab.prototype.constructor.call(this,e),this.faultsLookup={"stack_safety.clear_faults":1,"stack_safety.clear_warnings":1}}return u.prototype=new t.DashboardTab,u.prototype.constructor=u,u.prototype.startRefresh=function(){this.isStarted||(this.isStarted=!0,this.refreshWidgets())},u.prototype.successRefreshResult=function(n){t.DashboardTab.prototype.successRefreshResult.call(this,n),this.isStarted&&setTimeout(e.proxy(this.refreshWidgets,this),this.dataRefreshPeriod)},u.prototype.initializeWidgets=function(){return this.voltageRadialGauge=new n.StackVoltageRadial,this.currentRadialGauge=new i.StackCurrentRadial,this.dodRadialGauge=new o.StackDepthOfDischargeRadial,this.socRadialGauge=new r.StackStateOfChargeRadial,this.cellVoltageLinearGauge=new a.StackCellVoltageLinear,this.cellTempLinearGauge=new s.StackTemperatureLinear,this.bmsInfoPage=new l.StackDataLinkedBMSInfo,this.bmsStatusSummary=new c.StackDataLinkedBMSStatus,!0},u.prototype.getRadialGaugeClass=function(){return"uk-width-large-2-4 uk-width-medium-2-2 uk-width-small-1-1 uk-grid-width-large-1-2 uk-grid uk-grid-width-medium-1-2 uk-grid-width-small-1-1 radial-gauge-grid"},u.prototype.getLinearGaugeClass=function(){return"uk-width-large-2-4 uk-width-medium-2-2 uk-width-small-1-1 uk-grid-width-large-1-2 uk-grid uk-grid-width-medium-1-2 uk-grid-width-small-1-1 stack-linear-gauge-grid"},u.prototype.getStatusSummaryClass=function(){return"stack-status-summary-grid"},{StackDashboardTab:u}}),define("js/table_helper",[],function(){return{renderTable:function(e,t){for(var n=null,i=null,r=0;r<t.length;r++){0==r?(n=e.appendChild(document.createElement("thead")).insertRow(r),i=e.appendChild(document.createElement("tbody"))):n=i.insertRow(r-1);for(var o=0;o<t[r].length;o++)(0==r?n.appendChild(document.createElement("th")):n.insertCell(o)).innerHTML=t[r][o]}}}}),define("js/data_linked_table",["jquery","./data_linked_source_sink","./table_helper"],function(e,t,n){function r(e,n,i,r){t.DataLinkedSink.prototype.constructor.call(this,r),this.title=n||"",this.tableId=e+"-table",this.table=null,this.headers="stack-safety"===e||"safety"===e?Array.isArray(i)?i:["Register Name","Value","Initialized"]:Array.isArray(i)?i:["Register Name","Value"]}function o(e,n,i,r,o){t.DataLinkedSink.prototype.constructor.call(this,i),this.tableId=e+"-table",this.title=n||"",this.table=null,this.rows=r||[],this.columns=o||[]}return r.prototype=new t.DataLinkedSink,r.prototype.constructor=r,r.prototype.render=function(i){t.DataLinkedSink.prototype.render.call(this,i);var r=null;""!=this.title&&((r=document.createElement("h3")).innerHTML=this.title,this.parent.appendChild(r));var o=document.createElement("table");o.id=this.tableId;var a=[];a.push(this.headers.slice());for(var s=0;s<this.registers.length;s++)-1==this.registers[s].name.indexOf(".initialized")&&("stack-safety-table"===this.tableId||"safety-table"===this.tableId?a.push([this.registers[s].displayName,"Unknown","Unknown"]):a.push([this.registers[s].displayName,"Unknown"]));n.renderTable(o,a),o.className="uk-table uk-table-striped",this.table=this.parent.appendChild(o),function(e){for(var t=0;t<e.rows.length;t++)for(var n=e.rows[t],i=0;i<n.cells.length;i++)n.cells[i].className="uk-width-1-2"}(this.table);for(s=0;s<this.registers.length;s++)null!=this.registers[s].enabledName&&e(this.table.rows[s+1]).hide()},r.prototype.refresh=function(n){t.DataLinkedSink.prototype.refresh.call(this,n);var r={};for(i=0;i<this.registers.length;i++){var o=this.registers[i].name;if(-1!=o.indexOf(".initialized"))r[c=o.substr(0,o.indexOf("."))]=this.registers[i].displayFunction(n[o])}for(var a=0,s=0;s<this.registers.length;s++){var l=this.registers[s],c=l.name.substr(0,l.name.indexOf("."));if(-1==l.name.indexOf(".initialized")){a++;var u=this.table.rows[a];u.cells[1].innerHTML=l.displayFunction(n[l.name]),c in r&&(u.cells[2].innerHTML=r[c]),null!=l.enabledName&&(n[l.enabledName]?e(u).show():e(u).hide())}}},o.prototype=new t.DataLinkedSink,o.prototype.constructor=o,o.prototype.render=function(i){t.DataLinkedSink.prototype.render.call(this,i);var r=null;""!=this.title&&((r=document.createElement("h3")).innerHTML=this.title,this.parent.appendChild(r));var o=document.createElement("table");o.id=this.tableId;for(var a=[],s=[""],l=0;l<this.columns.length;l++)s.push(this.columns[l]);a.push(s);for(l=0;l<this.rows.length;l++){s=[this.rows[l]];for(var c=0;c<this.columns.length;c++)s.push("-");a.push(s)}a.push(s),n.renderTable(o,a),o.className="uk-table uk-table-striped",this.table=this.parent.appendChild(o);for(l=1;l<this.table.rows.length;l++)e(this.table.rows[l]).hide()},o.prototype.refresh=function(n){t.DataLinkedSink.prototype.refresh.call(this,n);for(var i={},r=0;r<this.registers.length;r++){var o=this.registers[r];result=n[o.name];var a=!0;null!=o.enabledName&&(a=n[o.enabledName]);var s=Math.floor(r/this.columns.length)+1,l=this.table.rows[s],c=Math.floor(r%this.columns.length)+1,u=l.cells[c];a?(u.innerHTML=o.displayFunction(result),i[s]=!0):u.innerHTML="-"}for(s=1;s<this.table.rows.length;s++){l=this.table.rows[s];s in i?e(l).show():e(l).hide()}},{DataLinkedTable:r,DataLinkedGrid:o}}),function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function i(e){return null===e?NaN:+e}function r(e){return!isNaN(e)}function o(e){return{left:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var o=i+r>>>1;e(t[o],n)<0?i=o+1:r=o}return i},right:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var o=i+r>>>1;e(t[o],n)>0?r=o:i=o+1}return i}}}function a(e){return e.length}function s(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function l(){this._=Object.create(null)}function c(e){return(e+="")===to||e[0]===no?no+e:e}function u(e){return(e+="")[0]===no?e.slice(1):e}function d(e){return c(e)in this._}function h(e){return(e=c(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(u(t));return e}function f(){var e=0;for(var t in this._)++e;return e}function g(){for(var e in this._)return!1;return!0}function m(){this._=Object.create(null)}function v(e){return e}function _(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function y(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,i=io.length;i>n;++n){var r=io[n]+t;if(r in e)return r}}function b(){}function w(){}function k(e){function t(){for(var t,i=n,r=-1,o=i.length;++r<o;)(t=i[r].on)&&t.apply(this,arguments);return e}var n=[],i=new l;return t.on=function(t,r){var o,a=i.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),i.remove(t)),r&&n.push(i.set(t,{on:r})),e)},t}function x(){jr.event.preventDefault()}function C(){for(var e,t=jr.event;e=t.sourceEvent;)t=e;return t}function T(e){for(var t=new w,n=0,i=arguments.length;++n<i;)t[arguments[n]]=k(t);return t.of=function(n,i){return function(r){try{var o=r.sourceEvent=jr.event;r.target=e,jr.event=r,t[r.type].apply(n,i)}finally{jr.event=o}}},t}function S(e){return oo(e,co),e}function D(e){return"function"==typeof e?e:function(){return ao(e,this)}}function A(e){return"function"==typeof e?e:function(){return so(e,this)}}function M(e,t){return e=jr.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function E(e){return e.trim().replace(/\s+/g," ")}function I(e){return new RegExp("(?:^|\\s+)"+jr.requote(e)+"(?:\\s+|$)","g")}function R(e){return(e+"").trim().split(/^|\s+/)}function P(e,t){var n=(e=R(e).map(L)).length;return"function"==typeof t?function(){for(var i=-1,r=t.apply(this,arguments);++i<n;)e[i](this,r)}:function(){for(var i=-1;++i<n;)e[i](this,t)}}function L(e){var t=I(e);return function(n,i){if(r=n.classList)return i?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";i?(t.lastIndex=0,t.test(r)||n.setAttribute("class",E(r+" "+e))):n.setAttribute("class",E(r.replace(t," ")))}}function F(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}:function(){this.style.setProperty(e,t,n)}}function B(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function z(e){return"function"==typeof e?e:(e=jr.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n?t.createElementNS(n,e):t.createElement(e)}}function H(){var e=this.parentNode;e&&e.removeChild(this)}function N(e){return{__data__:e}}function O(e){return function(){return lo(this,e)}}function V(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function U(e,t){for(var n=0,i=e.length;i>n;n++)for(var r,o=e[n],a=0,s=o.length;s>a;a++)(r=o[a])&&t(r,a,n);return e}function W(e){return oo(e,ho),e}function j(e,t,n){function i(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}var r="__on"+e,o=e.indexOf("."),a=q;o>0&&(e=e.slice(0,o));var s=po.get(e);return s&&(e=s,a=G),o?t?function(){var o=a(t,Gr(arguments));i.call(this),this.addEventListener(e,this[r]=o,o.$=n),o._=t}:i:t?b:function(){var t,n=new RegExp("^__on([^.]+)"+jr.requote(e)+"$");for(var i in this)if(t=i.match(n)){var r=this[i];this.removeEventListener(t[1],r,r.$),delete this[i]}}}function q(e,t){return function(n){var i=jr.event;jr.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{jr.event=i}}}function G(e,t){var n=q(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}function $(n){var i=".dragsuppress-"+ ++go,r="click"+i,o=jr.select(t(n)).on("touchmove"+i,x).on("dragstart"+i,x).on("selectstart"+i,x);if(null==fo&&(fo=!("onselectstart"in n)&&y(n.style,"userSelect")),fo){var a=e(n).style,s=a[fo];a[fo]="none"}return function(e){if(o.on(i,null),fo&&(a[fo]=s),e){var t=function(){o.on(r,null)};o.on(r,function(){x(),t()},!0),setTimeout(t,0)}}}function Y(e,n){n.changedTouches&&(n=n.changedTouches[0]);var i=e.ownerSVGElement||e;if(i.createSVGPoint){var r=i.createSVGPoint();if(0>mo){var o=t(e);if(o.scrollX||o.scrollY){var a=(i=jr.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();mo=!(a.f||a.e),i.remove()}}return mo?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function Q(){return jr.event.changedTouches[0].identifier}function X(e){return e>0?1:0>e?-1:0}function K(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Z(e){return e>1?0:-1>e?yo:Math.acos(e)}function J(e){return e>1?ko:-1>e?-ko:Math.asin(e)}function ee(e){return((e=Math.exp(e))+1/e)/2}function te(e){return(e=Math.sin(e/2))*e}function ne(){}function ie(e,t,n){return this instanceof ie?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof ie?new ie(e.h,e.s,e.l):ve(""+e,_e,ie):new ie(e,t,n)}function re(e,t,n){function i(e){return Math.round(255*function(e){return e>360?e-=360:0>e&&(e+=360),60>e?r+(o-r)*e/60:180>e?o:240>e?r+(o-r)*(240-e)/60:r}(e))}var r,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,r=2*(n=0>n?0:n>1?1:n)-(o=.5>=n?n*(1+t):n+t-n*t),new pe(i(e+120),i(e),i(e-120))}function oe(e,t,n){return this instanceof oe?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof oe?new oe(e.h,e.c,e.l):ce(e instanceof se?e.l:(e=ye((e=jr.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new oe(e,t,n)}function ae(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new se(n,Math.cos(e*=xo)*t,Math.sin(e)*t)}function se(e,t,n){return this instanceof se?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof se?new se(e.l,e.a,e.b):e instanceof oe?ae(e.h,e.c,e.l):ye((e=pe(e)).r,e.g,e.b):new se(e,t,n)}function le(e,t,n){var i=(e+16)/116,r=i+t/500,o=i-n/200;return new pe(he(3.2404542*(r=ue(r)*Po)-1.5371385*(i=ue(i)*Lo)-.4985314*(o=ue(o)*Fo)),he(-.969266*r+1.8760108*i+.041556*o),he(.0556434*r-.2040259*i+1.0572252*o))}function ce(e,t,n){return e>0?new oe(Math.atan2(n,t)*Co,Math.sqrt(t*t+n*n),e):new oe(NaN,NaN,e)}function ue(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function de(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function he(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function pe(e,t,n){return this instanceof pe?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof pe?new pe(e.r,e.g,e.b):ve(""+e,pe,re):new pe(e,t,n)}function fe(e){return new pe(e>>16,e>>8&255,255&e)}function ge(e){return fe(e)+""}function me(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ve(e,t,n){var i,r,o,a=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(we(r[0]),we(r[1]),we(r[2]))}return(o=Ho.get(e.toLowerCase()))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),t(a,s,l))}function _e(e,t,n){var i,r,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(r=.5>l?s/(a+o):s/(2-a-o),i=e==a?(t-n)/s+(n>t?6:0):t==a?(n-e)/s+2:(e-t)/s+4,i*=60):(i=NaN,r=l>0&&1>l?0:i),new ie(i,r,l)}function ye(e,t,n){var i=de((.4124564*(e=be(e))+.3575761*(t=be(t))+.1804375*(n=be(n)))/Po),r=de((.2126729*e+.7151522*t+.072175*n)/Lo);return se(116*r-16,500*(i-r),200*(r-de((.0193339*e+.119192*t+.9503041*n)/Fo)))}function be(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function we(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function ke(e){return"function"==typeof e?e:function(){return e}}function xe(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Ce(t,n,e,i)}}function Ce(e,t,n,i){function r(){var e,t=l.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||t>=200&&300>t||304===t){try{e=n.call(o,l)}catch(e){return void a.error.call(o,e)}a.load.call(o,e)}else a.error.call(o,l)}var o={},a=jr.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=jr.event;jr.event=e;try{a.progress.call(o,l)}finally{jr.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.responseType=function(e){return arguments.length?(c=e,o):c},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(Gr(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var u in s)l.setRequestHeader(u,s[u]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=r&&o.on("error",r).on("load",function(e){r(null,e)}),a.beforesend.call(o,l),l.send(null==i?null:i),o},o.abort=function(){return l.abort(),o},jr.rebind(o,a,"on"),null==i?o:o.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(i))}function Te(){var e=Se(),t=De()-e;t>24?(isFinite(t)&&(clearTimeout(Uo),Uo=setTimeout(Te,t)),Vo=0):(Vo=1,jo(Te))}function Se(){var e=Date.now();for(Wo=No;Wo;)e>=Wo.t&&(Wo.f=Wo.c(e-Wo.t)),Wo=Wo.n;return e}function De(){for(var e,t=No,n=1/0;t;)t.f?t=e?e.n=t.n:No=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Oo=e,n}function Ae(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Me(e){return e+""}function Ee(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ie(e,t,n){function i(t){var n=e(t),i=o(n,1);return i-t>t-n?n:i}function r(n){return t(n=e(new Qo(n-1)),1),n}function o(e,n){return t(e=new Qo(+e),n),e}function a(e,i,o){var a=r(e),s=[];if(o>1)for(;i>a;)n(a)%o||s.push(new Date(+a)),t(a,1);else for(;i>a;)s.push(new Date(+a)),t(a,1);return s}e.floor=e,e.round=i,e.ceil=r,e.offset=o,e.range=a;var s=e.utc=Re(e);return s.floor=s,s.round=Re(i),s.ceil=Re(r),s.offset=Re(o),s.range=function(e,t,n){try{Qo=Ee;var i=new Ee;return i._=e,a(i,t,n)}finally{Qo=Date}},e}function Re(e){return function(t,n){try{Qo=Ee;var i=new Ee;return i._=t,e(i,n)._}finally{Qo=Date}}}function Pe(e,t,n){var i=0>e?"-":"",r=(i?-e:e)+"",o=r.length;return i+(n>o?new Array(n-o+1).join(t)+r:r)}function Le(e){return new RegExp("^(?:"+e.map(jr.requote).join("|")+")","i")}function Fe(e){for(var t=new l,n=-1,i=e.length;++n<i;)t.set(e[n].toLowerCase(),n);return t}function Be(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function ze(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function He(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function Ne(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Oe(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+2));return i?(e.y=function(e){return e+(e>68?1900:2e3)}(+i[0]),n+i[0].length):-1}function Ve(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Ue(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function We(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function je(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+3));return i?(e.j=+i[0],n+i[0].length):-1}function qe(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Ge(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function $e(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Ye(e,t,n){Zo.lastIndex=0;var i=Zo.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Qe(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=eo(t)/60|0,r=eo(t)%60;return n+Pe(i,"0",2)+Pe(r,"0",2)}function Xe(e,t,n){Jo.lastIndex=0;var i=Jo.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Ke(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,i=e[n];!i[1](t);)i=e[++n];return i[0](t)}}function Ze(){}function Je(e,t,n){var i=n.s=e+t,r=i-e,o=i-r;n.t=e-o+(t-r)}function et(e,t){e&&ia.hasOwnProperty(e.type)&&ia[e.type](e,t)}function tt(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function nt(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)tt(e[n],t,1);t.polygonEnd()}function it(){function e(e,t){t=t*xo/2+yo/4;var n=(e*=xo)-i,a=n>=0?1:-1,s=a*n,l=Math.cos(t),c=Math.sin(t),u=o*c,d=r*l+u*Math.cos(s),h=u*a*Math.sin(s);oa.add(Math.atan2(h,d)),i=e,r=l,o=c}var t,n,i,r,o;aa.point=function(a,s){aa.point=e,i=(t=a)*xo,r=Math.cos(s=(n=s)*xo/2+yo/4),o=Math.sin(s)},aa.lineEnd=function(){e(t,n)}}function rt(e){var t=e[0],n=e[1],i=Math.cos(n);return[i*Math.cos(t),i*Math.sin(t),Math.sin(n)]}function ot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function at(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function st(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function lt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ct(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function ut(e){return[Math.atan2(e[1],e[0]),J(e[2])]}function dt(e,t){return eo(e[0]-t[0])<vo&&eo(e[1]-t[1])<vo}function ht(e,t){e*=xo;var n=Math.cos(t*=xo);pt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function pt(e,t,n){ca+=(e-ca)/++sa,ua+=(t-ua)/sa,da+=(n-da)/sa}function ft(){function e(e,r){e*=xo;var o=Math.cos(r*=xo),a=o*Math.cos(e),s=o*Math.sin(e),l=Math.sin(r),c=Math.atan2(Math.sqrt((c=n*l-i*s)*c+(c=i*a-t*l)*c+(c=t*s-n*a)*c),t*a+n*s+i*l);la+=c,ha+=c*(t+(t=a)),pa+=c*(n+(n=s)),fa+=c*(i+(i=l)),pt(t,n,i)}var t,n,i;_a.point=function(r,o){r*=xo;var a=Math.cos(o*=xo);t=a*Math.cos(r),n=a*Math.sin(r),i=Math.sin(o),_a.point=e,pt(t,n,i)}}function gt(){_a.point=ht}function mt(){function e(e,t){e*=xo;var n=Math.cos(t*=xo),a=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),c=r*l-o*s,u=o*a-i*l,d=i*s-r*a,h=Math.sqrt(c*c+u*u+d*d),p=i*a+r*s+o*l,f=h&&-Z(p)/h,g=Math.atan2(h,p);ga+=f*c,ma+=f*u,va+=f*d,la+=g,ha+=g*(i+(i=a)),pa+=g*(r+(r=s)),fa+=g*(o+(o=l)),pt(i,r,o)}var t,n,i,r,o;_a.point=function(a,s){t=a,n=s,_a.point=e,a*=xo;var l=Math.cos(s*=xo);i=l*Math.cos(a),r=l*Math.sin(a),o=Math.sin(s),pt(i,r,o)},_a.lineEnd=function(){e(t,n),_a.lineEnd=gt,_a.point=ht}}function vt(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function _t(){return!0}function yt(e,t,n,i,r){var o=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],i=e[t];if(dt(n,i)){r.lineStart();for(var s=0;t>s;++s)r.point((n=e[s])[0],n[1]);return void r.lineEnd()}var l=new wt(n,e,null,!0),c=new wt(n,null,l,!1);l.o=c,o.push(l),a.push(c),c=new wt(i,null,l=new wt(i,e,null,!1),!0),l.o=c,o.push(l),a.push(c)}}),a.sort(t),bt(o),bt(a),o.length){for(var s=0,l=n,c=a.length;c>s;++s)a[s].e=l=!l;for(var u,d,h=o[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(s=0,c=u.length;c>s;++s)r.point((d=u[s])[0],d[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(f)for(s=(u=p.p.z).length-1;s>=0;--s)r.point((d=u[s])[0],d[1]);else i(p.x,p.p.x,-1,r);p=p.p}u=(p=p.o).z,f=!f}while(!p.v);r.lineEnd()}}}function bt(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function wt(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function kt(e,t,n,i){return function(r,o){function a(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&o.point(t,n)}function s(e,t){var n=r(e,t);m.point(n[0],n[1])}function l(){_.point=s,m.lineStart()}function c(){_.point=a,m.lineEnd()}function u(e,t){g.push([e,t]);var n=r(e,t);b.point(n[0],n[1])}function d(){b.lineStart(),g=[]}function h(){u(g[0][0],g[0][1]),b.lineEnd();var e,t=b.clean(),n=y.buffer(),i=n.length;if(g.pop(),f.push(g),g=null,i)if(1&t){var r,a=-1;if((i=(e=n[0]).length-1)>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<i;)o.point((r=e[a])[0],r[1]);o.lineEnd()}}else i>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(xt))}var p,f,g,m=t(o),v=r.invert(i[0],i[1]),_={point:a,lineStart:l,lineEnd:c,polygonStart:function(){_.point=u,_.lineStart=d,_.lineEnd=h,p=[],f=[]},polygonEnd:function(){_.point=a,_.lineStart=l,_.lineEnd=c,p=jr.merge(p);var e=function(e,t){var n=e[0],i=e[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;oa.reset();for(var s=0,l=t.length;l>s;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],h=d[0],p=d[1]/2+yo/4,f=Math.sin(p),g=Math.cos(p),m=1;;){m===u&&(m=0);var v=(e=c[m])[0],_=e[1]/2+yo/4,y=Math.sin(_),b=Math.cos(_),w=v-h,k=w>=0?1:-1,x=k*w,C=x>yo,T=f*y;if(oa.add(Math.atan2(T*k*Math.sin(x),g*b+T*Math.cos(x))),o+=C?w+k*bo:w,C^h>=n^v>=n){var S=at(rt(d),rt(e));ct(S);var D=at(r,S);ct(D);var A=(C^w>=0?-1:1)*J(D[2]);(i>A||i===A&&(S[0]||S[1]))&&(a+=C^w>=0?1:-1)}if(!m++)break;h=v,f=y,g=b,d=e}}return(-vo>o||vo>o&&0>oa)^1&a}(v,f);p.length?(w||(o.polygonStart(),w=!0),yt(p,Tt,e,n,o)):e&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),p=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},y=Ct(),b=t(y),w=!1;return _}}function xt(e){return e.length>1}function Ct(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:b,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Tt(e,t){return((e=e.x)[0]<0?e[1]-ko-vo:ko-e[1])-((t=t.x)[0]<0?t[1]-ko-vo:ko-t[1])}function St(e,t,n,i){return function(r){var o,a=r.a,s=r.b,l=a.x,c=a.y,u=0,d=1,h=s.x-l,p=s.y-c;if(o=e-l,h||!(o>0)){if(o/=h,0>h){if(u>o)return;d>o&&(d=o)}else if(h>0){if(o>d)return;o>u&&(u=o)}if(o=n-l,h||!(0>o)){if(o/=h,0>h){if(o>d)return;o>u&&(u=o)}else if(h>0){if(u>o)return;d>o&&(d=o)}if(o=t-c,p||!(o>0)){if(o/=p,0>p){if(u>o)return;d>o&&(d=o)}else if(p>0){if(o>d)return;o>u&&(u=o)}if(o=i-c,p||!(0>o)){if(o/=p,0>p){if(o>d)return;o>u&&(u=o)}else if(p>0){if(u>o)return;d>o&&(d=o)}return u>0&&(r.a={x:l+u*h,y:c+u*p}),1>d&&(r.b={x:l+d*h,y:c+d*p}),r}}}}}}function Dt(e,t,n,i){function r(i,r){return eo(i[0]-e)<vo?r>0?0:3:eo(i[0]-n)<vo?r>0?2:1:eo(i[1]-t)<vo?r>0?1:0:r>0?3:2}function o(e,t){return a(e.x,t.x)}function a(e,t){var n=r(e,1),i=r(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(o,s,l,c){var u=0,d=0;if(null==o||(u=r(o,l))!==(d=r(s,l))||a(o,s)<0^l>0)do{c.point(0===u||3===u?e:n,u>1?i:t)}while((u=(u+l+4)%4)!==d);else c.point(s[0],s[1])}function c(r,o){return r>=e&&n>=r&&o>=t&&i>=o}function u(e,t){c(e,t)&&s.point(e,t)}function d(e,t){var n=c(e=Math.max(-ba,Math.min(ba,e)),t=Math.max(-ba,Math.min(ba,t)));if(p&&f.push([e,t]),w)g=e,m=t,v=n,w=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&b)s.point(e,t);else{var i={a:{x:_,y:y},b:{x:e,y:t}};T(i)?(b||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),k=!1):n&&(s.lineStart(),s.point(e,t),k=!1)}_=e,y=t,b=n}var h,p,f,g,m,v,_,y,b,w,k,x=s,C=Ct(),T=St(e,t,n,i),S={point:u,lineStart:function(){S.point=d,p&&p.push(f=[]),w=!0,b=!1,_=y=NaN},lineEnd:function(){h&&(d(g,m),v&&b&&C.rejoin(),h.push(C.buffer())),S.point=u,b&&s.lineEnd()},polygonStart:function(){s=C,h=[],p=[],k=!0},polygonEnd:function(){s=x,h=jr.merge(h);var t=function(e){for(var t=0,n=p.length,i=e[1],r=0;n>r;++r)for(var o,a=1,s=p[r],l=s.length,c=s[0];l>a;++a)o=s[a],c[1]<=i?o[1]>i&&K(c,o,e)>0&&++t:o[1]<=i&&K(c,o,e)<0&&--t,c=o;return 0!==t}([e,i]),n=k&&t,r=h.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),r&&yt(h,o,t,l,s),s.polygonEnd()),h=p=f=null}};return S}}function At(e){var t=0,n=yo/3,i=Ot(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*yo/180,n=e[1]*yo/180):[t/yo*180,n/yo*180]},r}function Mt(e,t){function n(e,t){var n=Math.sqrt(o-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}var i=Math.sin(e),r=(i+Math.sin(t))/2,o=1+i*(2*r-i),a=Math.sqrt(o)/r;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,J((o-(e*e+n*n)*r*r)/(2*r))]},n}function Et(){function e(e,t){ka+=r*e-i*t,i=e,r=t}var t,n,i,r;Da.point=function(o,a){Da.point=e,t=i=o,n=r=a},Da.lineEnd=function(){e(t,n)}}function It(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Rt(e,t){ca+=e,ua+=t,++da}function Pt(){function e(e,i){var r=e-t,o=i-n,a=Math.sqrt(r*r+o*o);ha+=a*(t+e)/2,pa+=a*(n+i)/2,fa+=a,Rt(t=e,n=i)}var t,n;Ma.point=function(i,r){Ma.point=e,Rt(t=i,n=r)}}function Lt(){Ma.point=Rt}function Ft(){function e(e,t){var n=e-i,o=t-r,a=Math.sqrt(n*n+o*o);ha+=a*(i+e)/2,pa+=a*(r+t)/2,fa+=a,ga+=(a=r*e-i*t)*(i+e),ma+=a*(r+t),va+=3*a,Rt(i=e,r=t)}var t,n,i,r;Ma.point=function(o,a){Ma.point=e,Rt(t=i=o,n=r=a)},Ma.lineEnd=function(){e(t,n)}}function Bt(e){function t(e){return(s?i:n)(e)}function n(t){return Ht(t,function(n,i){n=e(n,i),t.point(n[0],n[1])})}function i(t){function n(n,i){n=e(n,i),t.point(n[0],n[1])}function i(){_=NaN,x.point=o,t.lineStart()}function o(n,i){var o=rt([n,i]),a=e(n,i);r(_,y,v,b,w,k,_=a[0],y=a[1],v=n,b=o[0],w=o[1],k=o[2],s,t),t.point(_,y)}function a(){x.point=n,t.lineEnd()}function l(){i(),x.point=c,x.lineEnd=u}function c(e,t){o(d=e,t),h=_,p=y,f=b,g=w,m=k,x.point=o}function u(){r(_,y,v,b,w,k,h,p,d,f,g,m,s,t),x.lineEnd=a,a()}var d,h,p,f,g,m,v,_,y,b,w,k,x={point:n,lineStart:i,lineEnd:a,polygonStart:function(){t.polygonStart(),x.lineStart=l},polygonEnd:function(){t.polygonEnd(),x.lineStart=i}};return x}function r(t,n,i,s,l,c,u,d,h,p,f,g,m,v){var _=u-t,y=d-n,b=_*_+y*y;if(b>4*o&&m--){var w=s+p,k=l+f,x=c+g,C=Math.sqrt(w*w+k*k+x*x),T=Math.asin(x/=C),S=eo(eo(x)-1)<vo||eo(i-h)<vo?(i+h)/2:Math.atan2(k,w),D=e(S,T),A=D[0],M=D[1],E=A-t,I=M-n,R=y*E-_*I;(R*R/b>o||eo((_*E+y*I)/b-.5)>.3||a>s*p+l*f+c*g)&&(r(t,n,i,s,l,c,A,M,S,w/=C,k/=C,x,m,v),v.point(A,M),r(A,M,S,w,k,x,u,d,h,p,f,g,m,v))}}var o=.5,a=Math.cos(30*xo),s=16;return t.precision=function(e){return arguments.length?(s=(o=e*e)>0&&16,t):Math.sqrt(o)},t}function zt(e){this.stream=e}function Ht(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Nt(e){return Ot(function(){return e})()}function Ot(e){function t(e){return[(e=s(e[0]*xo,e[1]*xo))[0]*h+l,c-e[1]*h]}function n(e){return(e=s.invert((e[0]-l)/h,(c-e[1])/h))&&[e[0]*Co,e[1]*Co]}function i(){s=vt(a=jt(_,y,b),o);var e=o(g,m);return l=p-e[0]*h,c=f+e[1]*h,r()}function r(){return u&&(u.valid=!1,u=null),t}var o,a,s,l,c,u,d=Bt(function(e,t){return[(e=o(e,t))[0]*h+l,c-e[1]*h]}),h=150,p=480,f=250,g=0,m=0,_=0,y=0,b=0,w=ya,k=v,x=null,C=null;return t.stream=function(e){return u&&(u.valid=!1),(u=Vt(w(a,d(k(e))))).valid=!0,u},t.clipAngle=function(e){return arguments.length?(w=null==e?(x=e,ya):function(e){function t(e,t){return Math.cos(e)*Math.cos(t)>r}function n(e,t,n){var i=[1,0,0],o=at(rt(e),rt(t)),a=ot(o,o),s=o[0],l=a-s*s;if(!l)return!n&&e;var c=r*a/l,u=-r*s/l,d=at(i,o),h=lt(i,c);st(h,lt(o,u));var p=d,f=ot(h,p),g=ot(p,p),m=f*f-g*(ot(h,h)-1);if(!(0>m)){var v=Math.sqrt(m),_=lt(p,(-f-v)/g);if(st(_,h),_=ut(_),!n)return _;var y,b=e[0],w=t[0],k=e[1],x=t[1];b>w&&(y=b,b=w,w=y);var C=w-b,T=eo(C-yo)<vo;if(!T&&k>x&&(y=k,k=x,x=y),T||vo>C?T?k+x>0^_[1]<(eo(_[0]-b)<vo?k:x):k<=_[1]&&_[1]<=x:C>yo^(b<=_[0]&&_[0]<=w)){var S=lt(p,(-f+v)/g);return st(S,h),[_,ut(S)]}}}function i(t,n){var i=o?e:yo-e,r=0;return-i>t?r|=1:t>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var r=Math.cos(e),o=r>0,a=eo(r)>vo;return kt(t,function(e){var r,s,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,h){var p,f=[d,h],g=t(d,h),m=o?g?0:i(d,h):g?i(d+(0>d?yo:-yo),h):0;if(!r&&(c=l=g)&&e.lineStart(),g!==l&&(p=n(r,f),(dt(r,p)||dt(f,p))&&(f[0]+=vo,f[1]+=vo,g=t(f[0],f[1]))),g!==l)u=0,g?(e.lineStart(),p=n(f,r),e.point(p[0],p[1])):(p=n(r,f),e.point(p[0],p[1]),e.lineEnd()),r=p;else if(a&&r&&o^g){var v;m&s||!(v=n(f,r,!0))||(u=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||r&&dt(r,f)||e.point(f[0],f[1]),r=f,l=g,s=m},lineEnd:function(){l&&e.lineEnd(),r=null},clean:function(){return u|(c&&l)<<1}}},Yt(e,6*xo),o?[0,-e]:[-yo,e-yo])}((x=+e)*xo),r()):x},t.clipExtent=function(e){return arguments.length?(C=e,k=e?Dt(e[0][0],e[0][1],e[1][0],e[1][1]):v,r()):C},t.scale=function(e){return arguments.length?(h=+e,i()):h},t.translate=function(e){return arguments.length?(p=+e[0],f=+e[1],i()):[p,f]},t.center=function(e){return arguments.length?(g=e[0]%360*xo,m=e[1]%360*xo,i()):[g*Co,m*Co]},t.rotate=function(e){return arguments.length?(_=e[0]%360*xo,y=e[1]%360*xo,b=e.length>2?e[2]%360*xo:0,i()):[_*Co,y*Co,b*Co]},jr.rebind(t,d,"precision"),function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,i()}}function Vt(e){return Ht(e,function(t,n){e.point(t*xo,n*xo)})}function Ut(e,t){return[e,t]}function Wt(e,t){return[e>yo?e-bo:-yo>e?e+bo:e,t]}function jt(e,t,n){return e?t||n?vt(Gt(e),$t(t,n)):Gt(e):t||n?$t(t,n):Wt}function qt(e){return function(t,n){return[(t+=e)>yo?t-bo:-yo>t?t+bo:t,n]}}function Gt(e){var t=qt(e);return t.invert=qt(-e),t}function $t(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,c=Math.sin(t),u=c*i+s*r;return[Math.atan2(l*o-u*a,s*i-c*r),J(u*o+l*a)]}var i=Math.cos(e),r=Math.sin(e),o=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,c=Math.sin(t),u=c*o-l*a;return[Math.atan2(l*o+c*a,s*i+u*r),J(u*i-s*r)]},n}function Yt(e,t){var n=Math.cos(e),i=Math.sin(e);return function(r,o,a,s){var l=a*t;null!=r?(r=Qt(n,r),o=Qt(n,o),(a>0?o>r:r>o)&&(r+=a*bo)):(r=e+a*bo,o=e-.5*l);for(var c,u=r;a>0?u>o:o>u;u-=l)s.point((c=ut([n,-i*Math.cos(u),-i*Math.sin(u)]))[0],c[1])}}function Qt(e,t){var n=rt(t);n[0]-=e,ct(n);var i=Z(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-vo)%(2*Math.PI)}function Xt(e,t,n){var i=jr.range(e,t-vo,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function Kt(e,t,n){var i=jr.range(e,t-vo,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function Zt(e){return e.source}function Jt(e){return e.target}function en(e,t){function n(t,n){var i=Math.cos(t),r=Math.cos(n),o=e(i*r);return[o*r*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var i=Math.sqrt(e*e+n*n),r=t(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(e*o,i*a),Math.asin(i&&n*o/i)]},n}function tn(e,t){function n(e,t){a>0?-ko+vo>t&&(t=-ko+vo):t>ko-vo&&(t=ko-vo);var n=a/Math.pow(r(t),o);return[n*Math.sin(o*e),a-n*Math.cos(o*e)]}var i=Math.cos(e),r=function(e){return Math.tan(yo/4+e/2)},o=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(r(t)/r(e)),a=i*Math.pow(r(e),o)/o;return o?(n.invert=function(e,t){var n=a-t,i=X(o)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/o,2*Math.atan(Math.pow(a/i,1/o))-ko]},n):rn}function nn(e,t){function n(e,t){var n=o-t;return[n*Math.sin(r*e),o-n*Math.cos(r*e)]}var i=Math.cos(e),r=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),o=i/r+e;return eo(r)<vo?Ut:(n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,o-X(r)*Math.sqrt(e*e+n*n)]},n)}function rn(e,t){return[e,Math.log(Math.tan(yo/4+t/2))]}function on(e){var t,n=Nt(e),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=yo*i(),l=r();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function an(e,t){return[Math.log(Math.tan(yo/4+t/2)),-e]}function sn(e){return e[0]}function ln(e){return e[1]}function cn(e){for(var t=e.length,n=[0,1],i=2,r=2;t>r;r++){for(;i>1&&K(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function un(e,t){return e[0]-t[0]||e[1]-t[1]}function dn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function hn(e,t,n,i){var r=e[0],o=n[0],a=t[0]-r,s=i[0]-o,l=e[1],c=n[1],u=t[1]-l,d=i[1]-c,h=(s*(l-c)-d*(r-o))/(d*a-s*u);return[r+h*a,l+h*u]}function pn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function fn(e){var t=Wa.pop()||new function(){In(this),this.edge=this.site=this.circle=null};return t.site=e,t}function gn(e){xn(e),Oa.remove(e),Wa.push(e),In(e)}function mn(e){var t=e.circle,n=t.x,i=t.cy,r={x:n,y:i},o=e.P,a=e.N,s=[e];gn(e);for(var l=o;l.circle&&eo(n-l.circle.x)<vo&&eo(i-l.circle.cy)<vo;)o=l.P,s.unshift(l),gn(l),l=o;s.unshift(l),xn(l);for(var c=a;c.circle&&eo(n-c.circle.x)<vo&&eo(i-c.circle.cy)<vo;)a=c.N,s.push(c),gn(c),c=a;s.push(c),xn(c);var u,d=s.length;for(u=1;d>u;++u)c=s[u],l=s[u-1],An(c.edge,l.site,c.site,r);l=s[0],(c=s[d-1]).edge=Sn(l.site,c.site,null,r),kn(l),kn(c)}function vn(e){for(var t,n,i,r,o=e.x,a=e.y,s=Oa._;s;)if((i=_n(s,a)-o)>vo)s=s.L;else{if(!((r=o-yn(s,a))>vo)){i>-vo?(t=s.P,n=s):r>-vo?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=fn(e);if(Oa.insert(t,l),t||n){if(t===n)return xn(t),n=fn(t.site),Oa.insert(l,n),l.edge=n.edge=Sn(t.site,l.site),kn(t),void kn(n);if(!n)return void(l.edge=Sn(t.site,l.site));xn(t),xn(n);var c=t.site,u=c.x,d=c.y,h=e.x-u,p=e.y-d,f=n.site,g=f.x-u,m=f.y-d,v=2*(h*m-p*g),_=h*h+p*p,y=g*g+m*m,b={x:(m*_-p*y)/v+u,y:(h*y-g*_)/v+d};An(n.edge,c,f,b),l.edge=Sn(c,e,null,b),n.edge=Sn(e,f,null,b),kn(t),kn(n)}}function _n(e,t){var n=e.site,i=n.x,r=n.y,o=r-t;if(!o)return i;var a=e.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,c=l-t;if(!c)return s;var u=s-i,d=1/o-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+r-o/2)))/d+i:(i+s)/2}function yn(e,t){var n=e.N;if(n)return _n(n,t);var i=e.site;return i.y===t?i.x:1/0}function bn(e){this.site=e,this.edges=[]}function wn(e,t){return t.angle-e.angle}function kn(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,o=n.site;if(i!==o){var a=r.x,s=r.y,l=i.x-a,c=i.y-s,u=o.x-a,d=2*(l*(m=o.y-s)-c*u);if(!(d>=-_o)){var h=l*l+c*c,p=u*u+m*m,f=(m*h-c*p)/d,g=(l*p-u*h)/d,m=g+s,v=ja.pop()||new function(){In(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=e,v.site=r,v.x=f+a,v.y=m+Math.sqrt(f*f+g*g),v.cy=m,e.circle=v;for(var _=null,y=Ua._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){_=y.P;break}y=y.L}else{if(!y.R){_=y;break}y=y.R}Ua.insert(_,v),_||(Va=v)}}}}function xn(e){var t=e.circle;t&&(t.P||(Va=t.N),Ua.remove(t),ja.push(t),In(t),e.circle=null)}function Cn(e,t){var n=e.b;if(n)return!0;var i,r,o=e.a,a=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,h=u.x,p=u.y,f=d.x,g=d.y,m=(h+f)/2,v=(p+g)/2;if(g===p){if(a>m||m>=s)return;if(h>f){if(o){if(o.y>=c)return}else o={x:m,y:l};n={x:m,y:c}}else{if(o){if(o.y<l)return}else o={x:m,y:c};n={x:m,y:l}}}else if(r=v-(i=(h-f)/(g-p))*m,-1>i||i>1)if(h>f){if(o){if(o.y>=c)return}else o={x:(l-r)/i,y:l};n={x:(c-r)/i,y:c}}else{if(o){if(o.y<l)return}else o={x:(c-r)/i,y:c};n={x:(l-r)/i,y:l}}else if(g>p){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return e.a=o,e.b=n,!0}function Tn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Sn(e,t,n,i){var r=new Tn(e,t);return Ha.push(r),n&&An(r,e,t,n),i&&An(r,t,e,i),Na[e.i].edges.push(new Mn(r,e,t)),Na[t.i].edges.push(new Mn(r,t,e)),r}function Dn(e,t,n){var i=new Tn(e,null);return i.a=t,i.b=n,Ha.push(i),i}function An(e,t,n,i){e.a||e.b?e.l===n?e.b=i:e.a=i:(e.a=i,e.l=t,e.r=n)}function Mn(e,t,n){var i=e.a,r=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function En(){this._=null}function In(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Rn(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Pn(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Ln(e){for(;e.L;)e=e.L;return e}function Fn(e,t){var n,i,r,o=e.sort(Bn).pop();for(Ha=[],Na=new Array(e.length),Oa=new En,Ua=new En;;)if(r=Va,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))(o.x!==n||o.y!==i)&&(Na[o.i]=new bn(o),vn(o),n=o.x,i=o.y),o=e.pop();else{if(!r)break;mn(r.arc)}t&&(function(e){for(var t,n=Ha,i=St(e[0][0],e[0][1],e[1][0],e[1][1]),r=n.length;r--;)(!Cn(t=n[r],e)||!i(t)||eo(t.a.x-t.b.x)<vo&&eo(t.a.y-t.b.y)<vo)&&(t.a=t.b=null,n.splice(r,1))}(t),function(e){for(var t,n,i,r,o,a,s,l,c,u,d=e[0][0],h=e[1][0],p=e[0][1],f=e[1][1],g=Na,m=g.length;m--;)if((o=g[m])&&o.prepare())for(l=(s=o.edges).length,a=0;l>a;)i=(u=s[a].end()).x,r=u.y,t=(c=s[++a%l].start()).x,n=c.y,(eo(i-t)>vo||eo(r-n)>vo)&&(s.splice(a,0,new Mn(Dn(o.site,u,eo(i-d)<vo&&f-r>vo?{x:d,y:eo(t-d)<vo?n:f}:eo(r-f)<vo&&h-i>vo?{x:eo(n-f)<vo?t:h,y:f}:eo(i-h)<vo&&r-p>vo?{x:h,y:eo(t-h)<vo?n:p}:eo(r-p)<vo&&i-d>vo?{x:eo(n-p)<vo?t:d,y:p}:null),o.site,null)),++l)}(t));var a={cells:Na,edges:Ha};return Oa=Ua=Ha=Na=null,a}function Bn(e,t){return t.y-e.y||t.x-e.x}function zn(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function Hn(e){return e.x}function Nn(e){return e.y}function On(e,t){e=jr.rgb(e),t=jr.rgb(t);var n=e.r,i=e.g,r=e.b,o=t.r-n,a=t.g-i,s=t.b-r;return function(e){return"#"+me(Math.round(n+o*e))+me(Math.round(i+a*e))+me(Math.round(r+s*e))}}function Vn(e,t){var n,i={},r={};for(n in e)n in t?i[n]=jn(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}}function Un(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Wn(e,t){var n,i,r,o=Ga.lastIndex=$a.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Ga.exec(e))&&(i=$a.exec(t));)(r=i.index)>o&&(r=t.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Un(n,i)})),o=$a.lastIndex;return o<t.length&&(r=t.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,i=0;t>i;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function jn(e,t){for(var n,i=jr.interpolators.length;--i>=0&&!(n=jr.interpolators[i](e,t)););return n}function qn(e,t){var n,i=[],r=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)i.push(jn(e[n],t[n]));for(;o>n;++n)r[n]=e[n];for(;a>n;++n)r[n]=t[n];return function(e){for(n=0;s>n;++n)r[n]=i[n](e);return r}}function Gn(e){return function(t){return 1-e(1-t)}}function $n(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Yn(e){return e*e}function Qn(e){return e*e*e}function Xn(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Kn(e){return 1-Math.cos(e*ko)}function Zn(e){return Math.pow(2,10*(e-1))}function Jn(e){return 1-Math.sqrt(1-e*e)}function ei(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function ti(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function ni(e){var t=[e.a,e.b],n=[e.c,e.d],i=ri(t),r=ii(t,n),o=ri(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Co,this.translate=[e.e,e.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Co:0}function ii(e,t){return e[0]*t[0]+e[1]*t[1]}function ri(e){var t=Math.sqrt(ii(e,e));return t&&(e[0]/=t,e[1]/=t),t}function oi(e,t){var n,i=[],r=[],o=jr.transform(e),a=jr.transform(t),s=o.translate,l=a.translate,c=o.rotate,u=a.rotate,d=o.skew,h=a.skew,p=o.scale,f=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:Un(s[0],l[0])},{i:3,x:Un(s[1],l[1])})):i.push(l[0]||l[1]?"translate("+l+")":""),c!=u?(c-u>180?u+=360:u-c>180&&(c+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:Un(c,u)})):u&&i.push(i.pop()+"rotate("+u+")"),d!=h?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:Un(d,h)}):h&&i.push(i.pop()+"skewX("+h+")"),p[0]!=f[0]||p[1]!=f[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:Un(p[0],f[0])},{i:n-2,x:Un(p[1],f[1])})):(1!=f[0]||1!=f[1])&&i.push(i.pop()+"scale("+f+")"),n=r.length,function(e){for(var t,o=-1;++o<n;)i[(t=r[o]).i]=t.x(e);return i.join("")}}function ai(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function si(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function li(e){for(var t=e.source,n=e.target,i=function(e,t){if(e===t)return e;for(var n=ci(e),i=ci(t),r=n.pop(),o=i.pop(),a=null;r===o;)a=r,r=n.pop(),o=i.pop();return a}(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function ci(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function ui(e){e.fixed|=2}function di(e){e.fixed&=-7}function hi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function pi(e){e.fixed&=-5}function fi(e,t){return jr.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=bi,e}function gi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(r=e.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function mi(e,t){for(var n=[e],i=[];null!=(e=n.pop());)if(i.push(e),(o=e.children)&&(r=o.length))for(var r,o,a=-1;++a<r;)n.push(o[a]);for(;null!=(e=i.pop());)t(e)}function vi(e){return e.children}function _i(e){return e.value}function yi(e,t){return t.value-e.value}function bi(e){return jr.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function wi(e){return e.x}function ki(e){return e.y}function xi(e,t,n){e.y0=t,e.y=n}function Ci(e){return jr.range(e.length)}function Ti(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function Si(e){for(var t,n=1,i=0,r=e[0][1],o=e.length;o>n;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function Di(e){return e.reduce(Ai,0)}function Ai(e,t){return e+t[1]}function Mi(e,t){return Ei(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Ei(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,o=[];++n<=t;)o[n]=r*n+i;return o}function Ii(e){return[jr.min(e),jr.max(e)]}function Ri(e,t){return e.value-t.value}function Pi(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Li(e,t){e._pack_next=t,t._pack_prev=e}function Fi(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+i*i}function Bi(e){function t(e){u=Math.min(e.x-e.r,u),d=Math.max(e.x+e.r,d),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(c=n.length)){var n,i,r,o,a,s,l,c,u=1/0,d=-1/0,h=1/0,p=-1/0;if(n.forEach(zi),(i=n[0]).x=-i.r,i.y=0,t(i),c>1&&((r=n[1]).x=r.r,r.y=0,t(r),c>2))for(Ni(i,r,o=n[2]),t(o),Pi(i,o),i._pack_prev=o,Pi(o,r),r=i._pack_next,a=3;c>a;a++){Ni(i,r,o=n[a]);var f=0,g=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(Fi(s,o)){f=1;break}if(1==f)for(l=i._pack_prev;l!==s._pack_prev&&!Fi(l,o);l=l._pack_prev,m++);f?(m>g||g==m&&r.r<i.r?Li(i,r=s):Li(i=l,r),a--):(Pi(i,o),r=o,t(o))}var v=(u+d)/2,_=(h+p)/2,y=0;for(a=0;c>a;a++)(o=n[a]).x-=v,o.y-=_,y=Math.max(y,o.r+Math.sqrt(o.x*o.x+o.y*o.y));e.r=y,n.forEach(Hi)}}function zi(e){e._pack_next=e._pack_prev=e}function Hi(e){delete e._pack_next,delete e._pack_prev}function Ni(e,t,n){var i=e.r+n.r,r=t.x-e.x,o=t.y-e.y;if(i&&(r||o)){var a=t.r+n.r,s=r*r+o*o,l=.5+((i*=i)-(a*=a))/(2*s),c=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=e.x+l*r+c*o,n.y=e.y+l*o-c*r}else n.x=e.x+i,n.y=e.y}function Oi(e,t){return e.parent==t.parent?1:2}function Vi(e){var t=e.children;return t.length?t[0]:e.t}function Ui(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Wi(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function ji(e,t,n){return e.a.parent===t.parent?e.a:n}function qi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Gi(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function $i(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Yi(e){return e.rangeExtent?e.rangeExtent():$i(e.range())}function Qi(e,t,n,i){var r=n(e[0],e[1]),o=i(t[0],t[1]);return function(e){return o(r(e))}}function Xi(e,t){var n,i=0,r=e.length-1,o=e[i],a=e[r];return o>a&&(n=i,i=r,r=n,n=o,o=a,a=n),e[i]=t.floor(o),e[r]=t.ceil(a),e}function Ki(e,t,n,i){var r=[],o=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=s;)r.push(n(e[a-1],e[a])),o.push(i(t[a-1],t[a]));return function(t){var n=jr.bisect(e,t,1,s)-1;return o[n](r[n](t))}}function Zi(e,t){return jr.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Ji(e,t){return Xi(e,function(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:rs}(er(e,t)[2]))}function er(e,t){null==t&&(t=10);var n=$i(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=t/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function tr(e,t){return jr.range.apply(jr,er(e,t))}function nr(e,t,n){var i=er(e,t);if(n){var r=Go.exec(n);if(r.shift(),"s"===r[8]){var o=jr.formatPrefix(Math.max(eo(i[0]),eo(i[1])));return r[7]||(r[7]="."+ir(o.scale(i[2]))),r[8]="f",n=jr.format(r.join("")),function(e){return n(o.scale(e))+o.symbol}}r[7]||(r[7]="."+function(e,t){var n=ir(t[2]);return e in os?Math.abs(n-ir(Math.max(eo(t[0]),eo(t[1]))))+ +("e"!==e):n-2*("%"===e)}(r[8],i)),n=r.join("")}else n=",."+ir(i[2])+"f";return jr.format(n)}function ir(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function rr(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function or(){return 0}function ar(e){return e.innerRadius}function sr(e){return e.outerRadius}function lr(e){return e.startAngle}function cr(e){return e.endAngle}function ur(e){return e&&e.padAngle}function dr(e,t,n,i){return(e-n)*t-(t-i)*e>0?0:1}function hr(e,t,n,i,r){var o=e[0]-t[0],a=e[1]-t[1],s=(r?i:-i)/Math.sqrt(o*o+a*a),l=s*a,c=-s*o,u=e[0]+l,d=e[1]+c,h=t[0]+l,p=t[1]+c,f=(u+h)/2,g=(d+p)/2,m=h-u,v=p-d,_=m*m+v*v,y=n-i,b=u*p-h*d,w=(0>v?-1:1)*Math.sqrt(y*y*_-b*b),k=(b*v-m*w)/_,x=(-b*m-v*w)/_,C=(b*v+m*w)/_,T=(-b*m+v*w)/_,S=k-f,D=x-g,A=C-f,M=T-g;return S*S+D*D>A*A+M*M&&(k=C,x=T),[[k-l,x-c],[k*n/y,x*n/y]]}function pr(e){function t(t){function a(){c.push("M",o(e(u),s))}for(var l,c=[],u=[],d=-1,h=t.length,p=ke(n),f=ke(i);++d<h;)r.call(this,l=t[d],d)?u.push([+p.call(this,l,d),+f.call(this,l,d)]):u.length&&(a(),u=[]);return u.length&&a(),c.length?c.join(""):null}var n=sn,i=ln,r=_t,o=fr,a=o.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?o=e:(o=ps.get(e)||fr).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function fr(e){return e.join("L")}function gr(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function mr(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function vr(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return fr(e);var n=e.length!=t.length,i="",r=e[0],o=e[1],a=t[0],s=a,l=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=e[1],l=2),t.length>1){s=t[1],o=e[l],l++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<t.length;c++,l++)o=e[l],s=t[c],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var u=e[l];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+u[0]+","+u[1]}return i}function _r(e,t){for(var n,i=[],r=(1-t)/2,o=e[0],a=e[1],s=1,l=e.length;++s<l;)n=o,o=a,a=e[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function yr(e){if(e.length<3)return fr(e);var t=1,n=e.length,i=e[0],r=i[0],o=i[1],a=[r,r,r,(i=e[1])[0]],s=[o,o,o,i[1]],l=[r,",",o,"L",br(ms,a),",",br(ms,s)];for(e.push(e[n-1]);++t<=n;)i=e[t],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),wr(l,a,s);return e.pop(),l.push("L",i),l.join("")}function br(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function wr(e,t,n){e.push("C",br(fs,t),",",br(fs,n),",",br(gs,t),",",br(gs,n),",",br(ms,t),",",br(ms,n))}function kr(e,t){return(t[1]-e[1])/(t[0]-e[0])}function xr(e){for(var t,n,i,r,o=[],a=function(e){for(var t=0,n=e.length-1,i=[],r=e[0],o=e[1],a=i[0]=kr(r,o);++t<n;)i[t]=(a+(a=kr(r=o,o=e[t+1])))/2;return i[t]=a,i}(e),s=-1,l=e.length-1;++s<l;)t=kr(e[s],e[s+1]),eo(t)<vo?a[s]=a[s+1]=0:(r=(n=a[s]/t)*n+(i=a[s+1]/t)*i)>9&&(r=3*t/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i);for(s=-1;++s<=l;)r=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}function Cr(e){for(var t,n,i,r=-1,o=e.length;++r<o;)n=(t=e[r])[0],i=t[1]-ko,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function Tr(e){function t(t){function l(){g.push("M",s(e(v),d),u,c(e(m.reverse()),d),"Z")}for(var h,p,f,g=[],m=[],v=[],_=-1,y=t.length,b=ke(n),w=ke(r),k=n===i?function(){return p}:ke(i),x=r===o?function(){return f}:ke(o);++_<y;)a.call(this,h=t[_],_)?(m.push([p=+b.call(this,h,_),f=+w.call(this,h,_)]),v.push([+k.call(this,h,_),+x.call(this,h,_)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=sn,i=sn,r=0,o=ln,a=_t,s=fr,l=s.key,c=s,u="L",d=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(r=o=e,t):o},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=ps.get(e)||fr).key,c=s.reverse||s,u=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function Sr(e){return e.radius}function Dr(e){return[e.x,e.y]}function Ar(){return 64}function Mr(){return"circle"}function Er(e){var t=Math.sqrt(e/yo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Ir(e){return function(){var t,n;(t=this[e])&&(n=t[t.active])&&(--t.count?delete t[t.active]:delete this[e],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Rr(e,t,n){return oo(e,xs),e.namespace=t,e.id=n,e}function Pr(e,t,n,i){var r=e.id,o=e.namespace;return U(e,"function"==typeof n?function(e,a,s){e[o][r].tween.set(t,i(n.call(e,e.__data__,a,s)))}:(n=i(n),function(e){e[o][r].tween.set(t,n)}))}function Lr(e){return null==e&&(e=""),function(){this.textContent=e}}function Fr(e){return null==e?"__transition__":"__transition_"+e+"__"}function Br(e,t,n,i,r){var o=e[n]||(e[n]={active:0,count:0}),a=o[i];if(!a){var s=r.time;a=o[i]={tween:new l,time:s,delay:r.delay,duration:r.duration,ease:r.ease,index:t},r=null,++o.count,jr.timer(function(r){function l(n){if(o.active>i)return u();var r=o[o.active];r&&(--o.count,delete o[o.active],r.event&&r.event.interrupt.call(e,e.__data__,r.index)),o.active=i,a.event&&a.event.start.call(e,e.__data__,t),a.tween.forEach(function(n,i){(i=i.call(e,e.__data__,t))&&g.push(i)}),h=a.ease,d=a.duration,jr.timer(function(){return f.c=c(n||1)?_t:c,1},0,s)}function c(n){if(o.active!==i)return 1;for(var r=n/d,s=h(r),l=g.length;l>0;)g[--l].call(e,s);return r>=1?(a.event&&a.event.end.call(e,e.__data__,t),u()):void 0}function u(){return--o.count?delete o[i]:delete e[n],1}var d,h,p=a.delay,f=Wo,g=[];return f.t=p+s,r>=p?l(r-p):void(f.c=l)},0,s)}}function zr(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate("+(isFinite(i)?i:n(e))+",0)"})}function Hr(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate(0,"+(isFinite(i)?i:n(e))+")"})}function Nr(e){return e.toISOString()}function Or(e,t,n){function i(t){return e(t)}function r(e,n){var i=(e[1]-e[0])/n,r=jr.bisect(Rs,i);return r==Rs.length?[t.year,er(e.map(function(e){return e/31536e6}),n)[2]]:r?t[i/Rs[r-1]<Rs[r]/i?r-1:r]:[Fs,er(e,n)[2]]}return i.invert=function(t){return Vr(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Vr)},i.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Vr(+n+1),t).length}var o=i.domain(),a=$i(o),s=null==e?r(a,10):"number"==typeof e&&r(a,e);return s&&(e=s[0],t=s[1]),i.domain(Xi(o,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Vr(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Vr(+t+1);return t}}:e))},i.ticks=function(e,t){var n=$i(i.domain()),o=null==e?r(n,10):"number"==typeof e?r(n,e):!e.range&&[{range:e},t];return o&&(e=o[0],t=o[1]),e.range(n[0],Vr(+n[1]+1),1>t?1:t)},i.tickFormat=function(){return n},i.copy=function(){return Or(e.copy(),t,n)},Zi(i,e)}function Vr(e){return new Date(e)}function Ur(e){return JSON.parse(e.responseText)}function Wr(e){var t=$r.createRange();return t.selectNode($r.body),t.createContextualFragment(e.responseText)}var jr={version:"3.5.5"},qr=[].slice,Gr=function(e){return qr.call(e)},$r=this.document;if($r)try{Gr($r.documentElement.childNodes)[0].nodeType}catch(e){Gr=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),$r)try{$r.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var Yr=this.Element.prototype,Qr=Yr.setAttribute,Xr=Yr.setAttributeNS,Kr=this.CSSStyleDeclaration.prototype,Zr=Kr.setProperty;Yr.setAttribute=function(e,t){Qr.call(this,e,t+"")},Yr.setAttributeNS=function(e,t,n){Xr.call(this,e,t,n+"")},Kr.setProperty=function(e,t,n){Zr.call(this,e,t+"",n)}}jr.ascending=n,jr.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},jr.min=function(e,t){var n,i,r=-1,o=e.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},jr.max=function(e,t){var n,i,r=-1,o=e.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},jr.extent=function(e,t){var n,i,r,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(i=e[o])&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=e[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<a;)if(null!=(i=t.call(e,e[o],o))&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=t.call(e,e[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},jr.sum=function(e,t){var n,i=0,o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)r(n=+e[a])&&(i+=n);else for(;++a<o;)r(n=+t.call(e,e[a],a))&&(i+=n);return i},jr.mean=function(e,t){var n,o=0,a=e.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)r(n=i(e[s]))?o+=n:--l;else for(;++s<a;)r(n=i(t.call(e,e[s],s)))?o+=n:--l;return l?o/l:void 0},jr.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],o=n-i;return o?r+o*(e[i]-r):r},jr.median=function(e,t){var o,a=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)r(o=i(e[l]))&&a.push(o);else for(;++l<s;)r(o=i(t.call(e,e[l],l)))&&a.push(o);return a.length?jr.quantile(a.sort(n),.5):void 0},jr.variance=function(e,t){var n,o,a=e.length,s=0,l=0,c=-1,u=0;if(1===arguments.length)for(;++c<a;)r(n=i(e[c]))&&(l+=(o=n-s)*(n-(s+=o/++u)));else for(;++c<a;)r(n=i(t.call(e,e[c],c)))&&(l+=(o=n-s)*(n-(s+=o/++u)));return u>1?l/(u-1):void 0},jr.deviation=function(){var e=jr.variance.apply(this,arguments);return e?Math.sqrt(e):e};var Jr=o(n);jr.bisectLeft=Jr.left,jr.bisect=jr.bisectRight=Jr.right,jr.bisector=function(e){return o(1===e.length?function(t,i){return n(e(t),i)}:e)},jr.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,2>o&&(t=0));for(var i,r,o=n-t;o;)r=Math.random()*o--|0,i=e[o+t],e[o+t]=e[r+t],e[r+t]=i;return e},jr.permute=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},jr.pairs=function(e){for(var t=0,n=e.length-1,i=e[0],r=new Array(0>n?0:n);n>t;)r[t]=[i,i=e[++t]];return r},jr.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=jr.min(arguments,a),n=new Array(t);++e<t;)for(var i,r=-1,o=n[e]=new Array(i);++r<i;)o[r]=arguments[r][e];return n},jr.transpose=function(e){return jr.zip.apply(jr,e)},jr.keys=function(e){var t=[];for(var n in e)t.push(n);return t},jr.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},jr.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},jr.merge=function(e){for(var t,n,i,r=e.length,o=-1,a=0;++o<r;)a+=e[o].length;for(n=new Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n};var eo=Math.abs;jr.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var i,r=[],o=function(e){for(var t=1;e*t%1;)t*=10;return t}(eo(n)),a=-1;if(e*=o,t*=o,0>(n*=o))for(;(i=e+n*++a)>t;)r.push(i/o);else for(;(i=e+n*++a)<t;)r.push(i/o);return r},jr.map=function(e,t){var n=new l;if(e instanceof l)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var i,r=-1,o=e.length;if(1===arguments.length)for(;++r<o;)n.set(r,e[r]);else for(;++r<o;)n.set(t.call(e,i=e[r],r),i)}else for(var a in e)n.set(a,e[a]);return n};var to="__proto__",no="\0";s(l,{has:d,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:h,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:u(t),value:this._[t]});return e},size:f,empty:g,forEach:function(e){for(var t in this._)e.call(this,u(t),this._[t])}}),jr.nest=function(){function e(o,a,s){if(s>=r.length)return n?n.call(i,a):t?a.sort(t):a;for(var c,u,d,h,p=-1,f=a.length,g=r[s++],m=new l;++p<f;)(h=m.get(c=g(u=a[p])))?h.push(u):m.set(c,[u]);return o?(u=o(),d=function(t,n){u.set(t,e(o,n,s))}):(u={},d=function(t,n){u[t]=e(o,n,s)}),m.forEach(d),u}var t,n,i={},r=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(t){return function e(t,n){if(n>=r.length)return t;var i=[],a=o[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),a?i.sort(function(e,t){return a(e.key,t.key)}):i}(e(jr.map,t,0),0)},i.key=function(e){return r.push(e),i},i.sortKeys=function(e){return o[r.length-1]=e,i},i.sortValues=function(e){return t=e,i},i.rollup=function(e){return n=e,i},i},jr.set=function(e){var t=new m;if(e)for(var n=0,i=e.length;i>n;++n)t.add(e[n]);return t},s(m,{has:d,add:function(e){return this._[c(e+="")]=!0,e},remove:h,values:p,size:f,empty:g,forEach:function(e){for(var t in this._)e.call(this,u(t))}}),jr.behavior={},jr.rebind=function(e,t){for(var n,i=1,r=arguments.length;++i<r;)e[n=arguments[i]]=_(e,t,t[n]);return e};var io=["webkit","ms","moz","Moz","o","O"];jr.dispatch=function(){for(var e=new w,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=k(e);return e},w.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},jr.event=null,jr.requote=function(e){return e.replace(ro,"\\$&")};var ro=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,oo={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},ao=function(e,t){return t.querySelector(e)},so=function(e,t){return t.querySelectorAll(e)},lo=function(e,t){var n=e.matches||e[y(e,"matchesSelector")];return(lo=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(ao=function(e,t){return Sizzle(e,t)[0]||null},so=Sizzle,lo=Sizzle.matchesSelector),jr.selection=function(){return jr.select($r.documentElement)};var co=jr.selection.prototype=[];co.select=function(e){var t,n,i,r,o=[];e=D(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(i=this[a]).parentNode;for(var l=-1,c=i.length;++l<c;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return S(o)},co.selectAll=function(e){var t,n,i=[];e=A(e);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,l=a.length;++s<l;)(n=a[s])&&(i.push(t=Gr(e.call(n,n.__data__,s,r))),t.parentNode=n);return S(i)};var uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};jr.ns={prefix:uo,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),uo.hasOwnProperty(n)?{space:uo[n],local:e}:e}},co.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=jr.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(M(t,e[t]));return this}return this.each(M(e,t))},co.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),i=(e=R(e)).length,r=-1;if(t=n.classList){for(;++r<i;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");++r<i;)if(!I(e[r]).test(t))return!1;return!0}for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},co.style=function(e,n,i){var r=arguments.length;if(3>r){if("string"!=typeof e){for(i in 2>r&&(n=""),e)this.each(F(i,e[i],n));return this}if(2>r){var o=this.node();return t(o).getComputedStyle(o,null).getPropertyValue(e)}i=""}return this.each(F(e,n,i))},co.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(B(t,e[t]));return this}return this.each(B(e,t))},co.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},co.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},co.append=function(e){return e=z(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},co.insert=function(e,t){return e=z(e),t=D(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},co.remove=function(){return this.each(H)},co.data=function(e,t){function n(e,n){var i,r,o,a=e.length,d=n.length,h=Math.min(a,d),p=new Array(d),f=new Array(d),g=new Array(a);if(t){var m,v=new l,_=new Array(a);for(i=-1;++i<a;)v.has(m=t.call(r=e[i],r.__data__,i))?g[i]=r:v.set(m,r),_[i]=m;for(i=-1;++i<d;)(r=v.get(m=t.call(n,o=n[i],i)))?!0!==r&&(p[i]=r,r.__data__=o):f[i]=N(o),v.set(m,!0);for(i=-1;++i<a;)!0!==v.get(_[i])&&(g[i]=e[i])}else{for(i=-1;++i<h;)r=e[i],o=n[i],r?(r.__data__=o,p[i]=r):f[i]=N(o);for(;d>i;++i)f[i]=N(n[i]);for(;a>i;++i)g[i]=e[i]}f.update=p,f.parentNode=p.parentNode=g.parentNode=e.parentNode,s.push(f),c.push(p),u.push(g)}var i,r,o=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(i=this[0]).length);++o<a;)(r=i[o])&&(e[o]=r.__data__);return e}var s=W([]),c=S([]),u=S([]);if("function"==typeof e)for(;++o<a;)n(i=this[o],e.call(i,i.parentNode.__data__,o));else for(;++o<a;)n(i=this[o],e);return c.enter=function(){return s},c.exit=function(){return u},c},co.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},co.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=O(e));for(var o=0,a=this.length;a>o;o++){r.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s,o)&&t.push(i)}return S(r)},co.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},co.sort=function(e){e=V.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},co.each=function(e){return U(this,function(t,n,i){e.call(t,t.__data__,n,i)})},co.call=function(e){var t=Gr(arguments);return e.apply(t[0]=this,t),this},co.empty=function(){return!this.node()},co.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},co.size=function(){var e=0;return U(this,function(){++e}),e};var ho=[];jr.selection.enter=W,jr.selection.enter.prototype=ho,ho.append=co.append,ho.empty=co.empty,ho.node=co.node,ho.call=co.call,ho.size=co.size,ho.select=function(e){for(var t,n,i,r,o,a=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,a.push(t=[]),t.parentNode=r.parentNode;for(var c=-1,u=r.length;++c<u;)(o=r[c])?(t.push(i[c]=n=e.call(r.parentNode,o.__data__,c,s)),n.__data__=o.__data__):t.push(null)}return S(a)},ho.insert=function(e,t){return arguments.length<2&&(t=function(e){var t,n;return function(i,r,o){var a,s=e[o].update,l=s.length;for(o!=n&&(n=o,t=0),r>=t&&(t=r+1);!(a=s[t])&&++t<l;);return a}}(this)),co.insert.call(this,e,t)},jr.select=function(t){var n;return"string"==typeof t?(n=[ao(t,$r)]).parentNode=$r.documentElement:(n=[t]).parentNode=e(t),S([n])},jr.selectAll=function(e){var t;return"string"==typeof e?(t=Gr(so(e,$r))).parentNode=$r.documentElement:(t=e).parentNode=null,S([t])},co.on=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){for(n in 2>i&&(t=!1),e)this.each(j(n,e[n],t));return this}if(2>i)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(j(e,t,n))};var po=jr.map({mouseenter:"mouseover",mouseleave:"mouseout"});$r&&po.forEach(function(e){"on"+e in $r&&po.remove(e)});var fo,go=0;jr.mouse=function(e){return Y(e,C())};var mo=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;jr.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=C().changedTouches),t)for(var i,r=0,o=t.length;o>r;++r)if((i=t[r]).identifier===n)return Y(e,i)},jr.behavior.drag=function(){function e(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(e,t,n,o,a){return function(){var s,l=this,c=jr.event.target,u=l.parentNode,d=i.of(l,arguments),h=0,p=e(),f=".drag"+(null==p?"":"-"+p),g=jr.select(n(c)).on(o+f,function(){var e,n,i=t(u,p);i&&(e=i[0]-v[0],n=i[1]-v[1],h|=e|n,v=i,d({type:"drag",x:i[0]+s[0],y:i[1]+s[1],dx:e,dy:n}))}).on(a+f,function(){t(u,p)&&(g.on(o+f,null).on(a+f,null),m(h&&jr.event.target===c),d({type:"dragend"}))}),m=$(c),v=t(u,p);r?s=[(s=r.apply(l,arguments)).x-v[0],s.y-v[1]]:s=[0,0],d({type:"dragstart"})}}var i=T(e,"drag","dragstart","dragend"),r=null,o=n(b,jr.mouse,t,"mousemove","mouseup"),a=n(Q,jr.touch,v,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},jr.rebind(e,i,"on")},jr.touches=function(e,t){return arguments.length<2&&(t=C().touches),t?Gr(t).map(function(t){var n=Y(e,t);return n.identifier=t.identifier,n}):[]};var vo=1e-6,_o=vo*vo,yo=Math.PI,bo=2*yo,wo=bo-vo,ko=yo/2,xo=yo/180,Co=180/yo,To=Math.SQRT2,So=2;jr.interpolateZoom=function(e,t){function n(e){var t=e*v;if(m){var n=ee(g),a=o/(So*h)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(To*t+g)-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[i+a*c,r+a*u,o*n/ee(To*t+g)]}return[i+e*c,r+e*u,o*Math.exp(To*t)]}var i=e[0],r=e[1],o=e[2],a=t[0],s=t[1],l=t[2],c=a-i,u=s-r,d=c*c+u*u,h=Math.sqrt(d),p=(l*l-o*o+4*d)/(2*o*So*h),f=(l*l-o*o-4*d)/(2*l*So*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(f*f+1)-f)-g,v=(m||Math.log(l/o))/To;return n.duration=1e3*v,n},jr.behavior.zoom=function(){function e(e){e.on(E,u).on(Ao+".zoom",h).on("dblclick.zoom",p).on(P,d)}function n(e){return[(e[0]-C.x)/C.k,(e[1]-C.y)/C.k]}function i(e){C.k=Math.max(D[0],Math.min(D[1],e))}function r(e,t){t=function(e){return[e[0]*C.k+C.x,e[1]*C.k+C.y]}(t),C.x+=e[0]-t[0],C.y+=e[1]-t[1]}function o(t,n,o,a){t.__chart__={x:C.x,y:C.y,k:C.k},i(Math.pow(2,a)),r(g=n,o),t=jr.select(t),A>0&&(t=t.transition().duration(A)),t.call(e.event)}function a(){b&&b.domain(y.range().map(function(e){return(e-C.x)/C.k}).map(y.invert)),k&&k.domain(w.range().map(function(e){return(e-C.y)/C.k}).map(w.invert))}function s(e){M++||e({type:"zoomstart"})}function l(e){a(),e({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function c(e){--M||e({type:"zoomend"}),g=null}function u(){var e=this,i=jr.event.target,o=L.of(e,arguments),a=0,u=jr.select(t(e)).on(I,function(){a=1,r(jr.mouse(e),d),l(o)}).on(R,function(){u.on(I,null).on(R,null),h(a&&jr.event.target===i),c(o)}),d=n(jr.mouse(e)),h=$(e);ks.call(e),s(o)}function d(){function e(){var e=jr.touches(f);return p=C.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=n(e))}),e}function t(){var t=jr.event.target;jr.select(t).on(b,a).on(w,h),k.push(t);for(var n=jr.event.changedTouches,i=0,r=n.length;r>i;++i)m[n[i].identifier]=null;var s=e(),l=Date.now();if(1===s.length){if(500>l-_){var c=s[0];o(f,c,m[c.identifier],Math.floor(Math.log(C.k)/Math.LN2)+1),x()}_=l}else if(s.length>1){c=s[0];var u=s[1],d=c[0]-u[0],p=c[1]-u[1];v=d*d+p*p}}function a(){var e,t,n,o,a=jr.touches(f);ks.call(f);for(var s=0,c=a.length;c>s;++s,o=null)if(n=a[s],o=m[n.identifier]){if(t)break;e=n,t=o}if(o){var u=(u=n[0]-e[0])*u+(u=n[1]-e[1])*u,d=v&&Math.sqrt(u/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+o[0])/2,(t[1]+o[1])/2],i(d*p)}_=null,r(e,t),l(g)}function h(){if(jr.event.touches.length){for(var t=jr.event.changedTouches,n=0,i=t.length;i>n;++n)delete m[t[n].identifier];for(var r in m)return void e()}jr.selectAll(k).on(y,null),T.on(E,u).on(P,d),S(),c(g)}var p,f=this,g=L.of(f,arguments),m={},v=0,y=".zoom-"+jr.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,k=[],T=jr.select(f),S=$(f);t(),s(g),T.on(E,null).on(P,t)}function h(){var e=L.of(this,arguments);v?clearTimeout(v):(f=n(g=m||jr.mouse(this)),ks.call(this),s(e)),v=setTimeout(function(){v=null,c(e)},50),x(),i(Math.pow(2,.002*Do())*C.k),r(g,f),l(e)}function p(){var e=jr.mouse(this),t=Math.log(C.k)/Math.LN2;o(this,e,n(e),jr.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var f,g,m,v,_,y,b,w,k,C={x:0,y:0,k:1},S=[960,500],D=Mo,A=250,M=0,E="mousedown.zoom",I="mousemove.zoom",R="mouseup.zoom",P="touchstart.zoom",L=T(e,"zoomstart","zoom","zoomend");return Ao||(Ao="onwheel"in $r?(Do=function(){return-jr.event.deltaY*(jr.event.deltaMode?120:1)},"wheel"):"onmousewheel"in $r?(Do=function(){return jr.event.wheelDelta},"mousewheel"):(Do=function(){return-jr.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=L.of(this,arguments),t=C;bs?jr.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},s(e)}).tween("zoom:zoom",function(){var n=S[0],i=S[1],r=g?g[0]:n/2,o=g?g[1]:i/2,a=jr.interpolateZoom([(r-C.x)/C.k,(o-C.y)/C.k,n/C.k],[(r-t.x)/t.k,(o-t.y)/t.k,n/t.k]);return function(t){var i=a(t),s=n/i[2];this.__chart__=C={x:r-i[0]*s,y:o-i[1]*s,k:s},l(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=C,s(e),l(e),c(e))})},e.translate=function(t){return arguments.length?(C={x:+t[0],y:+t[1],k:C.k},a(),e):[C.x,C.y]},e.scale=function(t){return arguments.length?(C={x:C.x,y:C.y,k:+t},a(),e):C.k},e.scaleExtent=function(t){return arguments.length?(D=null==t?Mo:[+t[0],+t[1]],e):D},e.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],e):m},e.size=function(t){return arguments.length?(S=t&&[+t[0],+t[1]],e):S},e.duration=function(t){return arguments.length?(A=+t,e):A},e.x=function(t){return arguments.length?(b=t,y=t.copy(),C={x:0,y:0,k:1},e):b},e.y=function(t){return arguments.length?(k=t,w=t.copy(),C={x:0,y:0,k:1},e):k},jr.rebind(e,L,"on")};var Do,Ao,Mo=[0,1/0];jr.color=ne,ne.prototype.toString=function(){return this.rgb()+""},jr.hsl=ie;var Eo=ie.prototype=new ne;Eo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new ie(this.h,this.s,this.l/e)},Eo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ie(this.h,this.s,e*this.l)},Eo.rgb=function(){return re(this.h,this.s,this.l)},jr.hcl=oe;var Io=oe.prototype=new ne;Io.brighter=function(e){return new oe(this.h,this.c,Math.min(100,this.l+Ro*(arguments.length?e:1)))},Io.darker=function(e){return new oe(this.h,this.c,Math.max(0,this.l-Ro*(arguments.length?e:1)))},Io.rgb=function(){return ae(this.h,this.c,this.l).rgb()},jr.lab=se;var Ro=18,Po=.95047,Lo=1,Fo=1.08883,Bo=se.prototype=new ne;Bo.brighter=function(e){return new se(Math.min(100,this.l+Ro*(arguments.length?e:1)),this.a,this.b)},Bo.darker=function(e){return new se(Math.max(0,this.l-Ro*(arguments.length?e:1)),this.a,this.b)},Bo.rgb=function(){return le(this.l,this.a,this.b)},jr.rgb=pe;var zo=pe.prototype=new ne;zo.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&r>t&&(t=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new pe(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,i/e))):new pe(r,r,r)},zo.darker=function(e){return new pe((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},zo.hsl=function(){return _e(this.r,this.g,this.b)},zo.toString=function(){return"#"+me(this.r)+me(this.g)+me(this.b)};var Ho=jr.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ho.forEach(function(e,t){Ho.set(e,fe(t))}),jr.functor=ke,jr.xhr=xe(v),jr.dsv=function(e,t){function n(e,n,o){arguments.length<3&&(o=n,n=null);var a=Ce(e,t,null==n?i:r(n),o);return a.row=function(e){return arguments.length?a.response(null==(n=e)?i:r(e)):n},a}function i(e){return n.parse(e.responseText)}function r(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(a).join(e)}function a(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var i;return n.parseRows(e,function(e,n){if(i)return i(e,n-1);var r=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");i=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,t){function n(){if(u>=c)return a;if(r)return r=!1,o;var t=u;if(34===e.charCodeAt(t)){for(var n=t;n++<c;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return u=n+2,13===(i=e.charCodeAt(n+1))?(r=!0,10===e.charCodeAt(n+2)&&++u):10===i&&(r=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c>u;){var i,s=1;if(10===(i=e.charCodeAt(u++)))r=!0;else if(13===i)r=!0,10===e.charCodeAt(u)&&(++u,++s);else if(i!==l)continue;return e.slice(t,u-s)}return e.slice(t)}for(var i,r,o={},a={},s=[],c=e.length,u=0,d=0;(i=n())!==a;){for(var h=[];i!==o&&i!==a;)h.push(i),i=n();t&&null==(h=t(h,d++))||s.push(h)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new m,r=[];return t.forEach(function(e){for(var t in e)i.has(t)||r.push(i.add(t))}),[r.map(a).join(e)].concat(t.map(function(t){return r.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},jr.csv=jr.dsv(",","text/csv"),jr.tsv=jr.dsv("\t","text/tab-separated-values");var No,Oo,Vo,Uo,Wo,jo=this[y(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};jr.timer=function(e,t,n){var i=arguments.length;2>i&&(t=0),3>i&&(n=Date.now());var r={c:e,t:n+t,f:!1,n:null};Oo?Oo.n=r:No=r,Oo=r,Vo||(Uo=clearTimeout(Uo),Vo=1,jo(Te))},jr.timer.flush=function(){Se(),De()},jr.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var qo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*eo(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}});jr.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=jr.round(e,Ae(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),qo[8+n/3]};var Go=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,$o=jr.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=jr.round(e,Ae(e,t))).toFixed(Math.max(0,Math.min(20,Ae(e*(1+1e-15),t))))}}),Yo=jr.time={},Qo=Date;Ee.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Xo.setUTCDate.apply(this._,arguments)},setDay:function(){Xo.setUTCDay.apply(this._,arguments)},setFullYear:function(){Xo.setUTCFullYear.apply(this._,arguments)},setHours:function(){Xo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Xo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Xo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Xo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Xo.setUTCSeconds.apply(this._,arguments)},setTime:function(){Xo.setTime.apply(this._,arguments)}};var Xo=Date.prototype;Yo.year=Ie(function(e){return(e=Yo.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Yo.years=Yo.year.range,Yo.years.utc=Yo.year.utc.range,Yo.day=Ie(function(e){var t=new Qo(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Yo.days=Yo.day.range,Yo.days.utc=Yo.day.utc.range,Yo.dayOfYear=function(e){var t=Yo.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Yo[e]=Ie(function(e){return(e=Yo.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=Yo.year(e).getDay();return Math.floor((Yo.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Yo[e+"s"]=n.range,Yo[e+"s"].utc=n.utc.range,Yo[e+"OfYear"]=function(e){var n=Yo.year(e).getDay();return Math.floor((Yo.dayOfYear(e)+(n+t)%7)/7)}}),Yo.week=Yo.sunday,Yo.weeks=Yo.sunday.range,Yo.weeks.utc=Yo.sunday.utc.range,Yo.weekOfYear=Yo.sundayOfYear;var Ko={"-":"",_:" ",0:"0"},Zo=/^\s*\d+/,Jo=/^%/;jr.locale=function(e){return{numberFormat:function(e){var t=e.decimal,n=e.thousands,i=e.grouping,r=e.currency,o=i&&n?function(e,t){for(var r=e.length,o=[],a=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),o.push(e.substring(r-=s,r+s)),!((l+=s+1)>t));)s=i[a=(a+1)%i.length];return o.reverse().join(n)}:v;return function(e){var n=Go.exec(e),i=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",c=n[5],u=+n[6],d=n[7],h=n[8],p=n[9],f=1,g="",m="",v=!1,_=!0;switch(h&&(h=+h.substring(1)),(c||"0"===i&&"="===a)&&(c=i="0",a="="),p){case"n":d=!0,p="g";break;case"%":f=100,m="%",p="f";break;case"p":f=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":_=!1;case"d":v=!0,h=0;break;case"s":f=-1,p="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=$o.get(p)||Me;var y=c&&d;return function(e){var n=m;if(v&&e%1)return"";var r=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>f){var l=jr.formatPrefix(e,h);e=l.scale(e),n=l.symbol+m}else e*=f;var b,w,k=(e=p(e,h)).lastIndexOf(".");if(0>k){var x=_?e.lastIndexOf("e"):-1;0>x?(b=e,w=""):(b=e.substring(0,x),w=e.substring(x))}else b=e.substring(0,k),w=t+e.substring(k+1);!c&&d&&(b=o(b,1/0));var C=g.length+b.length+w.length+(y?0:r.length),T=u>C?new Array(C=u-C+1).join(i):"";return y&&(b=o(T+b,T.length?u-w.length:1/0)),r+=g,e=b+w,("<"===a?r+e+T:">"===a?T+r+e:"^"===a?T.substring(0,C>>=1)+r+e+T.substring(C):r+(y?e:T+e))+n}}}(e),timeFormat:function(e){function t(e){function t(t){for(var n,r,o,a=[],s=-1,l=0;++s<i;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(r=Ko[n=e.charAt(++s)])&&(n=e.charAt(++s)),(o=b[n])&&(n=o(t,null==r?"e"===n?" ":"0":r)),a.push(n),l=s+1);return a.push(e.slice(l,s)),a.join("")}var i=e.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(i,e,t,0)!=t.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var r=null!=i.Z&&Qo!==Ee,o=new(r?Ee:Qo);return"j"in i?o.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),r?o._:o},t.toString=function(){return e},t}function n(e,t,n,i){for(var r,o,a,s=0,l=t.length,c=n.length;l>s;){if(i>=c)return-1;if(37===(r=t.charCodeAt(s++))){if(a=t.charAt(s++),!(o=w[a in Ko?t.charAt(s++):a])||(i=o(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var i=e.dateTime,r=e.date,o=e.time,a=e.periods,s=e.days,l=e.shortDays,c=e.months,u=e.shortMonths;t.utc=function(e){function n(e){try{var t=new(Qo=Ee);return t._=e,i(t)}finally{Qo=Date}}var i=t(e);return n.parse=function(e){try{Qo=Ee;var t=i.parse(e);return t&&t._}finally{Qo=Date}},n.toString=i.toString,n},t.multi=t.utc.multi=Ke;var d=jr.map(),h=Le(s),p=Fe(s),f=Le(l),g=Fe(l),m=Le(c),v=Fe(c),_=Le(u),y=Fe(u);a.forEach(function(e,t){d.set(e.toLowerCase(),t)});var b={a:function(e){return l[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return c[e.getMonth()]},c:t(i),d:function(e,t){return Pe(e.getDate(),t,2)},e:function(e,t){return Pe(e.getDate(),t,2)},H:function(e,t){return Pe(e.getHours(),t,2)},I:function(e,t){return Pe(e.getHours()%12||12,t,2)},j:function(e,t){return Pe(1+Yo.dayOfYear(e),t,3)},L:function(e,t){return Pe(e.getMilliseconds(),t,3)},m:function(e,t){return Pe(e.getMonth()+1,t,2)},M:function(e,t){return Pe(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return Pe(e.getSeconds(),t,2)},U:function(e,t){return Pe(Yo.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Pe(Yo.mondayOfYear(e),t,2)},x:t(r),X:t(o),y:function(e,t){return Pe(e.getFullYear()%100,t,2)},Y:function(e,t){return Pe(e.getFullYear()%1e4,t,4)},Z:Qe,"%":function(){return"%"}},w={a:function(e,t,n){f.lastIndex=0;var i=f.exec(t.slice(n));return i?(e.w=g.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){h.lastIndex=0;var i=h.exec(t.slice(n));return i?(e.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){_.lastIndex=0;var i=_.exec(t.slice(n));return i?(e.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){m.lastIndex=0;var i=m.exec(t.slice(n));return i?(e.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,t,i){return n(e,b.c.toString(),t,i)},d:We,e:We,H:qe,I:qe,j:je,L:Ye,m:Ue,M:Ge,p:function(e,t,n){var i=d.get(t.slice(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)},S:$e,U:ze,w:Be,W:He,x:function(e,t,i){return n(e,b.x.toString(),t,i)},X:function(e,t,i){return n(e,b.X.toString(),t,i)},y:Oe,Y:Ne,Z:Ve,"%":Xe};return t}(e)}};var ea=jr.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});jr.format=ea.numberFormat,jr.geo={},Ze.prototype={s:0,t:0,add:function(e){Je(e,this.t,ta),Je(ta.s,this.s,this),this.s?this.t+=ta.t:this.s=ta.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ta=new Ze;jr.geo.stream=function(e,t){e&&na.hasOwnProperty(e.type)?na[e.type](e,t):et(e,t)};var na={Feature:function(e,t){et(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)et(n[i].geometry,t)}},ia={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){tt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)tt(n[i],t,0)},Polygon:function(e,t){nt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)nt(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)et(n[i],t)}};jr.geo.area=function(e){return ra=0,jr.geo.stream(e,aa),ra};var ra,oa=new Ze,aa={sphere:function(){ra+=4*yo},point:b,lineStart:b,lineEnd:b,polygonStart:function(){oa.reset(),aa.lineStart=it},polygonEnd:function(){var e=2*oa;ra+=0>e?4*yo+e:e,aa.lineStart=aa.lineEnd=aa.point=b}};jr.geo.bounds=function(){function e(e,t){y.push(b=[u=e,h=e]),d>t&&(d=t),t>p&&(p=t)}function t(t,n){var i=rt([t*xo,n*xo]);if(v){var r=at(v,i),o=at([r[1],-r[0],0],r);ct(o),o=ut(o);var a=t-f,l=a>0?1:-1,c=o[0]*Co*l,g=eo(a)>180;if(g^(c>l*f&&l*t>c))(m=o[1]*Co)>p&&(p=m);else if(g^((c=(c+360)%360-180)>l*f&&l*t>c)){var m=-o[1]*Co;d>m&&(d=m)}else d>n&&(d=n),n>p&&(p=n);g?f>t?s(u,t)>s(u,h)&&(h=t):s(t,h)>s(u,h)&&(u=t):h>=u?(u>t&&(u=t),t>h&&(h=t)):t>f?s(u,t)>s(u,h)&&(h=t):s(t,h)>s(u,h)&&(u=t)}else e(t,n);v=i,f=t}function n(){w.point=t}function i(){b[0]=u,b[1]=h,w.point=e,v=null}function r(e,n){if(v){var i=e-f;_+=eo(i)>180?i+(i>0?360:-360):i}else g=e,m=n;aa.point(e,n),t(e,n)}function o(){aa.lineStart()}function a(){r(g,m),aa.lineEnd(),eo(_)>vo&&(u=-(h=180)),b[0]=u,b[1]=h,v=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function c(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var u,d,h,p,f,g,m,v,_,y,b,w={point:e,lineStart:n,lineEnd:i,polygonStart:function(){w.point=r,w.lineStart=o,w.lineEnd=a,_=0,aa.polygonStart()},polygonEnd:function(){aa.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=i,0>oa?(u=-(h=180),d=-(p=90)):_>vo?p=90:-vo>_&&(d=-90),b[0]=u,b[1]=h}};return function(e){if(p=h=-(u=d=1/0),y=[],jr.geo.stream(e,w),o=y.length){y.sort(l);for(var t=1,n=[f=y[0]];o>t;++t)c((r=y[t])[0],f)||c(r[1],f)?(s(f[0],r[1])>s(f[0],f[1])&&(f[1]=r[1]),s(r[0],f[1])>s(f[0],f[1])&&(f[0]=r[0])):n.push(f=r);for(var i,r,o,a=-1/0,f=(t=0,n[o=n.length-1]);o>=t;f=r,++t)r=n[t],(i=s(f[1],r[0]))>a&&(a=i,u=r[0],h=f[1])}return y=b=null,1/0===u||1/0===d?[[NaN,NaN],[NaN,NaN]]:[[u,d],[h,p]]}}(),jr.geo.centroid=function(e){sa=la=ca=ua=da=ha=pa=fa=ga=ma=va=0,jr.geo.stream(e,_a);var t=ga,n=ma,i=va,r=t*t+n*n+i*i;return _o>r&&(t=ha,n=pa,i=fa,vo>la&&(t=ca,n=ua,i=da),_o>(r=t*t+n*n+i*i))?[NaN,NaN]:[Math.atan2(n,t)*Co,J(i/Math.sqrt(r))*Co]};var sa,la,ca,ua,da,ha,pa,fa,ga,ma,va,_a={sphere:b,point:ht,lineStart:ft,lineEnd:gt,polygonStart:function(){_a.lineStart=mt},polygonEnd:function(){_a.lineStart=ft}},ya=kt(_t,function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?yo:-yo,l=eo(o-n);eo(l-yo)<vo?(e.point(n,i=(i+a)/2>0?ko:-ko),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(o,i),t=0):r!==s&&l>=yo&&(eo(n-r)<vo&&(n-=r*vo),eo(o-s)<vo&&(o-=s*vo),i=function(e,t,n,i){var r,o,a=Math.sin(e-n);return eo(a)>vo?Math.atan((Math.sin(t)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(t))*Math.sin(e))/(r*o*a)):(t+i)/2}(n,i,o,a),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=o,i=a),r=s},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*ko,i.point(-yo,r),i.point(0,r),i.point(yo,r),i.point(yo,0),i.point(yo,-r),i.point(0,-r),i.point(-yo,-r),i.point(-yo,0),i.point(-yo,r);else if(eo(e[0]-t[0])>vo){var o=e[0]<t[0]?yo:-yo;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-yo,-yo/2]),ba=1e9;jr.geo.clipExtent=function(){var e,t,n,i,r,o,a={stream:function(e){return r&&(r.valid=!1),(r=o(e)).valid=!0,r},extent:function(s){return arguments.length?(o=Dt(e=+s[0][0],t=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[e,t],[n,i]]}};return a.extent([[0,0],[960,500]])},(jr.geo.conicEqualArea=function(){return At(Mt)}).raw=Mt,jr.geo.albers=function(){return jr.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},jr.geo.albersUsa=function(){function e(e){var o=e[0],a=e[1];return t=null,n(o,a),t||(i(o,a),t)||r(o,a),t}var t,n,i,r,o=jr.geo.albers(),a=jr.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=jr.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=o.scale(),n=o.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?a:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:o).invert(e)},e.stream=function(e){var t=o.stream(e),n=a.stream(e),i=s.stream(e);return{point:function(e,r){t.point(e,r),n.point(e,r),i.point(e,r)},sphere:function(){t.sphere(),n.sphere(),i.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},e.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),e):o.precision()},e.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),e.translate(o.translate())):o.scale()},e.translate=function(t){if(!arguments.length)return o.translate();var c=o.scale(),u=+t[0],d=+t[1];return n=o.translate(t).clipExtent([[u-.455*c,d-.238*c],[u+.455*c,d+.238*c]]).stream(l).point,i=a.translate([u-.307*c,d+.201*c]).clipExtent([[u-.425*c+vo,d+.12*c+vo],[u-.214*c-vo,d+.234*c-vo]]).stream(l).point,r=s.translate([u-.205*c,d+.212*c]).clipExtent([[u-.214*c+vo,d+.166*c+vo],[u-.115*c-vo,d+.234*c-vo]]).stream(l).point,e},e.scale(1070)};var wa,ka,xa,Ca,Ta,Sa,Da={point:b,lineStart:b,lineEnd:b,polygonStart:function(){ka=0,Da.lineStart=Et},polygonEnd:function(){Da.lineStart=Da.lineEnd=Da.point=b,wa+=eo(ka/2)}},Aa={point:function(e,t){xa>e&&(xa=e),e>Ta&&(Ta=e),Ca>t&&(Ca=t),t>Sa&&(Sa=t)},lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Ma={point:Rt,lineStart:Pt,lineEnd:Lt,polygonStart:function(){Ma.lineStart=Ft},polygonEnd:function(){Ma.point=Rt,Ma.lineStart=Pt,Ma.lineEnd=Lt}};jr.geo.path=function(){function e(e){return e&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=r(o)),jr.geo.stream(e,a)),o.result()}function t(){return a=null,e}var n,i,r,o,a,s=4.5;return e.area=function(e){return wa=0,jr.geo.stream(e,r(Da)),wa},e.centroid=function(e){return ca=ua=da=ha=pa=fa=ga=ma=va=0,jr.geo.stream(e,r(Ma)),va?[ga/va,ma/va]:fa?[ha/fa,pa/fa]:da?[ca/da,ua/da]:[NaN,NaN]},e.bounds=function(e){return Ta=Sa=-(xa=Ca=1/0),jr.geo.stream(e,r(Aa)),[[xa,Ca],[Ta,Sa]]},e.projection=function(e){return arguments.length?(r=(n=e)?e.stream||function(e){var t=Bt(function(t,n){return e([t*Co,n*Co])});return function(e){return Vt(t(e))}}(e):v,t()):n},e.context=function(e){return arguments.length?(o=null==(i=e)?new function(){function e(e,t){a.push("M",e,",",t,o)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function i(){s.point=e}function r(){a.push("Z")}var o=It(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(e){return o=It(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}:new function(e){function t(t,n){e.moveTo(t+a,n),e.arc(t,n,a,0,bo)}function n(t,n){e.moveTo(t,n),s.point=i}function i(t,n){e.lineTo(t,n)}function r(){s.point=t}function o(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(e){return a=e,s},result:b};return s}(e),"function"!=typeof s&&o.pointRadius(s),t()):i},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(o.pointRadius(+t),+t),e):s},e.projection(jr.geo.albersUsa()).context(null)},jr.geo.transform=function(e){return{stream:function(t){var n=new zt(t);for(var i in e)n[i]=e[i];return n}}},zt.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},jr.geo.projection=Nt,jr.geo.projectionMutator=Ot,(jr.geo.equirectangular=function(){return Nt(Ut)}).raw=Ut.invert=Ut,jr.geo.rotation=function(e){function t(t){return(t=e(t[0]*xo,t[1]*xo))[0]*=Co,t[1]*=Co,t}return e=jt(e[0]%360*xo,e[1]*xo,e.length>2?e[2]*xo:0),t.invert=function(t){return(t=e.invert(t[0]*xo,t[1]*xo))[0]*=Co,t[1]*=Co,t},t},Wt.invert=Ut,jr.geo.circle=function(){function e(){var e="function"==typeof i?i.apply(this,arguments):i,t=jt(-e[0]*xo,-e[1]*xo,0).invert,r=[];return n(null,null,1,{point:function(e,n){r.push(e=t(e,n)),e[0]*=Co,e[1]*=Co}}),{type:"Polygon",coordinates:[r]}}var t,n,i=[0,0],r=6;return e.origin=function(t){return arguments.length?(i=t,e):i},e.angle=function(i){return arguments.length?(n=Yt((t=+i)*xo,r*xo),e):t},e.precision=function(i){return arguments.length?(n=Yt(t*xo,(r=+i)*xo),e):r},e.angle(90)},jr.geo.distance=function(e,t){var n,i=(t[0]-e[0])*xo,r=e[1]*xo,o=t[1]*xo,a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r),u=Math.sin(o),d=Math.cos(o);return Math.atan2(Math.sqrt((n=d*a)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},jr.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return jr.range(Math.ceil(o/m)*m,r,m).map(h).concat(jr.range(Math.ceil(c/v)*v,l,v).map(p)).concat(jr.range(Math.ceil(i/f)*f,n,f).filter(function(e){return eo(e%m)>vo}).map(u)).concat(jr.range(Math.ceil(s/g)*g,a,g).filter(function(e){return eo(e%v)>vo}).map(d))}var n,i,r,o,a,s,l,c,u,d,h,p,f=10,g=f,m=90,v=360,_=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(l).slice(1),h(r).reverse().slice(1),p(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(o=+t[0][0],r=+t[1][0],c=+t[0][1],l=+t[1][1],o>r&&(t=o,o=r,r=t),c>l&&(t=c,c=l,l=t),e.precision(_)):[[o,c],[r,l]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],i>n&&(t=i,i=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(_)):[[i,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(f=+t[0],g=+t[1],e):[f,g]},e.precision=function(t){return arguments.length?(_=+t,u=Xt(s,a,90),d=Kt(i,n,_),h=Xt(c,l,90),p=Kt(o,r,_),e):_},e.majorExtent([[-180,-90+vo],[180,90-vo]]).minorExtent([[-180,-80-vo],[180,80+vo]])},jr.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),n||r.apply(this,arguments)]}}var t,n,i=Zt,r=Jt;return e.distance=function(){return jr.geo.distance(t||i.apply(this,arguments),n||r.apply(this,arguments))},e.source=function(n){return arguments.length?(i=n,t="function"==typeof n?null:n,e):i},e.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,e):r},e.precision=function(){return arguments.length?e:0},e},jr.geo.interpolate=function(e,t){return function(e,t,n,i){var r=Math.cos(t),o=Math.sin(t),a=Math.cos(i),s=Math.sin(i),l=r*Math.cos(e),c=r*Math.sin(e),u=a*Math.cos(n),d=a*Math.sin(n),h=2*Math.asin(Math.sqrt(te(i-t)+r*a*te(n-e))),p=1/Math.sin(h),f=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,i=n*l+t*u,r=n*c+t*d,a=n*o+t*s;return[Math.atan2(r,i)*Co,Math.atan2(a,Math.sqrt(i*i+r*r))*Co]}:function(){return[e*Co,t*Co]};return f.distance=h,f}(e[0]*xo,e[1]*xo,t[0]*xo,t[1]*xo)},jr.geo.length=function(e){return Ea=0,jr.geo.stream(e,Ia),Ea};var Ea,Ia={sphere:b,point:b,lineStart:function(){function e(e,r){var o=Math.sin(r*=xo),a=Math.cos(r),s=eo((e*=xo)-t),l=Math.cos(s);Ea+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-n*a*l)*s),n*o+i*a*l),t=e,n=o,i=a}var t,n,i;Ia.point=function(r,o){t=r*xo,n=Math.sin(o*=xo),i=Math.cos(o),Ia.point=e},Ia.lineEnd=function(){Ia.point=Ia.lineEnd=b}},lineEnd:b,polygonStart:b,polygonEnd:b},Ra=en(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(jr.geo.azimuthalEqualArea=function(){return Nt(Ra)}).raw=Ra;var Pa=en(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},v);(jr.geo.azimuthalEquidistant=function(){return Nt(Pa)}).raw=Pa,(jr.geo.conicConformal=function(){return At(tn)}).raw=tn,(jr.geo.conicEquidistant=function(){return At(nn)}).raw=nn;var La=en(function(e){return 1/e},Math.atan);(jr.geo.gnomonic=function(){return Nt(La)}).raw=La,rn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-ko]},(jr.geo.mercator=function(){return on(rn)}).raw=rn;var Fa=en(function(){return 1},Math.asin);(jr.geo.orthographic=function(){return Nt(Fa)}).raw=Fa;var Ba=en(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(jr.geo.stereographic=function(){return Nt(Ba)}).raw=Ba,an.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-ko]},(jr.geo.transverseMercator=function(){var e=on(an),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=an,jr.geom={},jr.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,r=ke(n),o=ke(i),a=e.length,s=[],l=[];for(t=0;a>t;t++)s.push([+r.call(this,e[t],t),+o.call(this,e[t],t),t]);for(s.sort(un),t=0;a>t;t++)l.push([s[t][0],-s[t][1]]);var c=cn(s),u=cn(l),d=u[0]===c[0],h=u[u.length-1]===c[c.length-1],p=[];for(t=c.length-1;t>=0;--t)p.push(e[s[c[t]][2]]);for(t=+d;t<u.length-h;++t)p.push(e[s[u[t]][2]]);return p}var n=sn,i=ln;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t)},jr.geom.polygon=function(e){return oo(e,za),e};var za=jr.geom.polygon.prototype=[];za.area=function(){for(var e,t=-1,n=this.length,i=this[n-1],r=0;++t<n;)e=i,i=this[t],r+=e[1]*i[0]-e[0]*i[1];return.5*r},za.centroid=function(e){var t,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(e=-1/(6*this.area()));++i<r;)t=s,s=this[i],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},za.clip=function(e){for(var t,n,i,r,o,a,s=pn(e),l=-1,c=this.length-pn(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,r=this[l],o=t[(i=t.length-s)-1],n=-1;++n<i;)dn(a=t[n],u,r)?(dn(o,u,r)||e.push(hn(o,a,u,r)),e.push(a)):dn(o,u,r)&&e.push(hn(o,a,u,r)),o=a;s&&e.push(e[0]),u=r}return e};var Ha,Na,Oa,Va,Ua,Wa=[],ja=[];bn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(wn),t.length},Mn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},En.prototype={insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Ln(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(Rn(this,n),n=(e=n).U),n.C=!1,i.C=!0,Pn(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(Pn(this,n),n=(e=n).U),n.C=!1,i.C=!0,Rn(this,i)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,o=e.L,a=e.R;if(n=o?a?Ln(a):o:a,r?r.L===e?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=a,a.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,Rn(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Pn(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,Rn(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Pn(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Rn(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Pn(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}},jr.geom.voronoi=function(e){function t(e){var t=new Array(e.length),i=s[0][0],r=s[0][1],o=s[1][0],a=s[1][1];return Fn(n(e),s).cells.forEach(function(n,s){var l=n.edges,c=n.site;(t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):c.x>=i&&c.x<=o&&c.y>=r&&c.y<=a?[[i,a],[o,a],[o,r],[i,r]]:[]).point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(o(e,t)/vo)*vo,y:Math.round(a(e,t)/vo)*vo,i:t}})}var i=sn,r=ln,o=i,a=r,s=qa;return e?t(e):(t.links=function(e){return Fn(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return Fn(n(e)).cells.forEach(function(n,i){for(var r,o=n.site,a=n.edges.sort(wn),s=-1,l=a.length,c=a[l-1].edge,u=c.l===o?c.r:c.l;++s<l;)c,r=u,u=(c=a[s].edge).l===o?c.r:c.l,i<r.i&&i<u.i&&zn(o,r,u)<0&&t.push([e[i],e[r.i],e[u.i]])}),t},t.x=function(e){return arguments.length?(o=ke(i=e),t):i},t.y=function(e){return arguments.length?(a=ke(r=e),t):r},t.clipExtent=function(e){return arguments.length?(s=null==e?qa:e,t):s===qa?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===qa?null:s&&s[1]},t)};var qa=[[-1e6,-1e6],[1e6,1e6]];jr.geom.delaunay=function(e){return jr.geom.voronoi().triangles(e)},jr.geom.quadtree=function(e,t,n,i,r){function o(e){function o(e,t,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(e.leaf){var l=e.x,u=e.y;if(null!=l)if(eo(l-n)+eo(u-i)<.01)c(e,t,n,i,r,o,a,s);else{var d=e.point;e.x=e.y=e.point=null,c(e,d,l,u,r,o,a,s),c(e,t,n,i,r,o,a,s)}else e.x=n,e.y=i,e.point=t}else c(e,t,n,i,r,o,a,s)}function c(e,t,n,i,r,a,s,l){var c=.5*(r+s),u=.5*(a+l),d=n>=c,h=i>=u,p=h<<1|d;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){o(T,e,+y(e,++p),+b(e,p),g,m,v,_)}}),d?r=c:s=c,h?a=u:l=u,o(e,t,n,i,r,a,s,l)}var u,d,h,p,f,g,m,v,_,y=ke(s),b=ke(l);if(null!=t)g=t,m=n,v=i,_=r;else if(v=_=-(g=m=1/0),d=[],h=[],f=e.length,a)for(p=0;f>p;++p)(u=e[p]).x<g&&(g=u.x),u.y<m&&(m=u.y),u.x>v&&(v=u.x),u.y>_&&(_=u.y),d.push(u.x),h.push(u.y);else for(p=0;f>p;++p){var w=+y(u=e[p],p),k=+b(u,p);g>w&&(g=w),m>k&&(m=k),w>v&&(v=w),k>_&&(_=k),d.push(w),h.push(k)}var x=v-g,C=_-m;x>C?_=m+x:v=g+C;var T={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){o(T,e,+y(e,++p),+b(e,p),g,m,v,_)}};if(T.visit=function(e){!function e(t,n,i,r,o,a){if(!t(n,i,r,o,a)){var s=.5*(i+o),l=.5*(r+a),c=n.nodes;c[0]&&e(t,c[0],i,r,s,l),c[1]&&e(t,c[1],s,r,o,l),c[2]&&e(t,c[2],i,l,s,a),c[3]&&e(t,c[3],s,l,o,a)}}(e,T,g,m,v,_)},T.find=function(e){return function(e,t,n,i,r,o,a){var s,l=1/0;return function e(c,u,d,h,p){if(!(u>o||d>a||i>h||r>p)){if(f=c.point){var f,g=t-c.x,m=n-c.y,v=g*g+m*m;if(l>v){var _=Math.sqrt(l=v);i=t-_,r=n-_,o=t+_,a=n+_,s=f}}for(var y=c.nodes,b=.5*(u+h),w=.5*(d+p),k=(n>=w)<<1|t>=b,x=k+4;x>k;++k)if(c=y[3&k])switch(3&k){case 0:e(c,u,d,b,w);break;case 1:e(c,b,d,h,w);break;case 2:e(c,u,w,b,p);break;case 3:e(c,b,w,h,p)}}}(e,i,r,o,a),s}(T,e[0],e[1],g,m,v,_)},p=-1,null==t){for(;++p<f;)o(T,e[p],d[p],h[p],g,m,v,_);--p}else e.forEach(T.add);return d=h=e=u=null,T}var a,s=sn,l=ln;return(a=arguments.length)?(s=Hn,l=Nn,3===a&&(r=n,i=t,n=t=0),o(e)):(o.x=function(e){return arguments.length?(s=e,o):s},o.y=function(e){return arguments.length?(l=e,o):l},o.extent=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),o):null==t?null:[[t,n],[i,r]]},o.size=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=n=0,i=+e[0],r=+e[1]),o):null==t?null:[i-t,r-n]},o)},jr.interpolateRgb=On,jr.interpolateObject=Vn,jr.interpolateNumber=Un,jr.interpolateString=Wn;var Ga=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$a=new RegExp(Ga.source,"g");jr.interpolate=jn,jr.interpolators=[function(e,t){var n=typeof t;return("string"===n?Ho.has(t)||/^(#|rgb\(|hsl\()/.test(t)?On:Wn:t instanceof ne?On:Array.isArray(t)?qn:"object"===n&&isNaN(t)?Vn:Un)(e,t)}],jr.interpolateArray=qn;var Ya=function(){return v},Qa=jr.map({linear:Ya,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Yn},cubic:function(){return Qn},sin:function(){return Kn},exp:function(){return Zn},circle:function(){return Jn},elastic:function(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/bo*Math.asin(1/e):(e=1,n=t/4),function(i){return 1+e*Math.pow(2,-10*i)*Math.sin((i-n)*bo/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ei}}),Xa=jr.map({in:v,out:Gn,"in-out":$n,"out-in":function(e){return $n(Gn(e))}});jr.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";return n=Qa.get(n)||Ya,function(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}((i=Xa.get(i)||v)(n.apply(null,qr.call(arguments,1))))},jr.interpolateHcl=function(e,t){e=jr.hcl(e),t=jr.hcl(t);var n=e.h,i=e.c,r=e.l,o=t.h-n,a=t.c-i,s=t.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?t.c:i),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return ae(n+o*e,i+a*e,r+s*e)+""}},jr.interpolateHsl=function(e,t){e=jr.hsl(e),t=jr.hsl(t);var n=e.h,i=e.s,r=e.l,o=t.h-n,a=t.s-i,s=t.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?t.s:i),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return re(n+o*e,i+a*e,r+s*e)+""}},jr.interpolateLab=function(e,t){e=jr.lab(e),t=jr.lab(t);var n=e.l,i=e.a,r=e.b,o=t.l-n,a=t.a-i,s=t.b-r;return function(e){return le(n+o*e,i+a*e,r+s*e)+""}},jr.interpolateRound=ti,jr.transform=function(e){var t=$r.createElementNS(jr.ns.prefix.svg,"g");return(jr.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new ni(n?n.matrix:Ka)})(e)},ni.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ka={a:1,b:0,c:0,d:1,e:0,f:0};jr.interpolateTransform=oi,jr.layout={},jr.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(li(e[n]));return t}},jr.layout.chord=function(){function e(){var e,c,d,h,p,f={},g=[],m=jr.range(o),v=[];for(n=[],i=[],e=0,h=-1;++h<o;){for(c=0,p=-1;++p<o;)c+=r[h][p];g.push(c),v.push(jr.range(o)),e+=c}for(a&&m.sort(function(e,t){return a(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(r[t][e],r[t][n])})}),e=(bo-u*o)/e,c=0,h=-1;++h<o;){for(d=c,p=-1;++p<o;){var _=m[h],y=v[_][p],b=r[_][y],w=c,k=c+=b*e;f[_+"-"+y]={index:_,subindex:y,startAngle:w,endAngle:k,value:b}}i[_]={index:_,startAngle:d,endAngle:c,value:(c-d)/e},c+=u}for(h=-1;++h<o;)for(p=h-1;++p<o;){var x=f[h+"-"+p],C=f[p+"-"+h];(x.value||C.value)&&n.push(x.value<C.value?{source:C,target:x}:{source:x,target:C})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,i,r,o,a,s,l,c={},u=0;return c.matrix=function(e){return arguments.length?(o=(r=e)&&r.length,n=i=null,c):r},c.padding=function(e){return arguments.length?(u=e,n=i=null,c):u},c.sortGroups=function(e){return arguments.length?(a=e,n=i=null,c):a},c.sortSubgroups=function(e){return arguments.length?(s=e,n=null,c):s},c.sortChords=function(e){return arguments.length?(l=e,n&&t(),c):l},c.chords=function(){return n||e(),n},c.groups=function(){return i||e(),i},c},jr.layout.force=function(){function e(e){return function(t,n,i,r){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=r-n,l=o*o+a*a;if(l>s*s/m){if(f>l){var c=t.charge/l;e.px-=o*c,e.py-=a*c}return!0}if(t.point&&l&&f>l){c=t.pointCharge/l;e.px-=o*c,e.py-=a*c}}return!t.charge}}function t(e){e.px=jr.event.x,e.py=jr.event.y,s.resume()}var n,i,r,o,a,s={},l=jr.dispatch("start","tick","end"),c=[1,1],u=.9,d=Za,h=Ja,p=-30,f=es,g=.1,m=.64,_=[],y=[];return s.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var t,n,s,d,h,f,m,v,b,w=_.length,k=y.length;for(n=0;k>n;++n)d=(s=y[n]).source,(f=(v=(h=s.target).x-d.x)*v+(b=h.y-d.y)*b)&&(v*=f=i*o[n]*((f=Math.sqrt(f))-r[n])/f,b*=f,h.x-=v*(m=d.weight/(h.weight+d.weight)),h.y-=b*m,d.x+=v*(m=1-m),d.y+=b*m);if((m=i*g)&&(v=c[0]/2,b=c[1]/2,n=-1,m))for(;++n<w;)(s=_[n]).x+=(v-s.x)*m,s.y+=(b-s.y)*m;if(p)for(function e(t,n,i){var r=0,o=0;if(t.charge=0,!t.leaf)for(var a,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(a=s[c])&&(e(a,n,i),t.charge+=a.charge,r+=a.charge*a.cx,o+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=n*i[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,o+=u*t.point.y}t.cx=r/t.charge,t.cy=o/t.charge}(t=jr.geom.quadtree(_),i,a),n=-1;++n<w;)(s=_[n]).fixed||t.visit(e(s));for(n=-1;++n<w;)(s=_[n]).fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*u,s.y-=(s.py-(s.py=s.y))*u);l.tick({type:"tick",alpha:i})},s.nodes=function(e){return arguments.length?(_=e,s):_},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(f=e*e,s):Math.sqrt(f)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(e){return arguments.length?(e=+e,i?i=e>0?e:0:e>0&&(l.start({type:"start",alpha:i=e}),jr.timer(s.tick)),s):i},s.start=function(){function e(e,i){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;u>s;++s){var r=y[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var o,a=n[t],s=-1,c=a.length;++s<c;)if(!isNaN(o=a[s][e]))return o;return Math.random()*i}var t,n,i,l=_.length,u=y.length,f=c[0],g=c[1];for(t=0;l>t;++t)(i=_[t]).index=t,i.weight=0;for(t=0;u>t;++t)"number"==typeof(i=y[t]).source&&(i.source=_[i.source]),"number"==typeof i.target&&(i.target=_[i.target]),++i.source.weight,++i.target.weight;for(t=0;l>t;++t)i=_[t],isNaN(i.x)&&(i.x=e("x",f)),isNaN(i.y)&&(i.y=e("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof d)for(t=0;u>t;++t)r[t]=+d.call(this,y[t],t);else for(t=0;u>t;++t)r[t]=d;if(o=[],"function"==typeof h)for(t=0;u>t;++t)o[t]=+h.call(this,y[t],t);else for(t=0;u>t;++t)o[t]=h;if(a=[],"function"==typeof p)for(t=0;l>t;++t)a[t]=+p.call(this,_[t],t);else for(t=0;l>t;++t)a[t]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=jr.behavior.drag().origin(v).on("dragstart.force",ui).on("drag.force",t).on("dragend.force",di)),arguments.length?void this.on("mouseover.force",hi).on("mouseout.force",pi).call(n):n},jr.rebind(s,l,"on")};var Za=20,Ja=1,es=1/0;jr.layout.hierarchy=function(){function e(r){var o,a=[r],s=[];for(r.depth=0;null!=(o=a.pop());)if(s.push(o),(c=n.call(e,o,o.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)a.push(u=c[l]),u.parent=o,u.depth=o.depth+1;i&&(o.value=0),o.children=c}else i&&(o.value=+i.call(e,o,o.depth)||0),delete o.children;return mi(r,function(e){var n,r;t&&(n=e.children)&&n.sort(t),i&&(r=e.parent)&&(r.value+=e.value)}),s}var t=yi,n=vi,i=_i;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(i=t,e):i},e.revalue=function(t){return i&&(gi(t,function(e){e.children&&(e.value=0)}),mi(t,function(t){var n;t.children||(t.value=+i.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},jr.layout.partition=function(){function e(e,i){var r=t.call(this,e,i);return function e(t,n,i,r){var o=t.children;if(t.x=n,t.y=t.depth*r,t.dx=i,t.dy=r,o&&(a=o.length)){var a,s,l,c=-1;for(i=t.value?i/t.value:0;++c<a;)e(s=o[c],n,l=s.value*i,r),n+=l}}(r[0],0,n[0],n[1]/function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}(r[0])),r}var t=jr.layout.hierarchy(),n=[1,1];return e.size=function(t){return arguments.length?(n=t,e):n},fi(e,t)},jr.layout.pie=function(){function e(a){var s,l=a.length,c=a.map(function(n,i){return+t.call(e,n,i)}),u=+("function"==typeof i?i.apply(this,arguments):i),d=("function"==typeof r?r.apply(this,arguments):r)-u,h=Math.min(Math.abs(d)/l,+("function"==typeof o?o.apply(this,arguments):o)),p=h*(0>d?-1:1),f=(d-l*p)/jr.sum(c),g=jr.range(l),m=[];return null!=n&&g.sort(n===ts?function(e,t){return c[t]-c[e]}:function(e,t){return n(a[e],a[t])}),g.forEach(function(e){m[e]={data:a[e],value:s=c[e],startAngle:u,endAngle:u+=s*f+p,padAngle:h}}),m}var t=Number,n=ts,i=0,r=bo,o=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(r=t,e):r},e.padAngle=function(t){return arguments.length?(o=t,e):o},e};var ts={};jr.layout.stack=function(){function e(s,l){if(!(h=s.length))return s;var c=s.map(function(n,i){return t.call(e,n,i)}),u=c.map(function(t){return t.map(function(t,n){return[o.call(e,t,n),a.call(e,t,n)]})}),d=n.call(e,u,l);c=jr.permute(c,d),u=jr.permute(u,d);var h,p,f,g,m=i.call(e,u,l),v=c[0].length;for(f=0;v>f;++f)for(r.call(e,c[0][f],g=m[f],u[0][f][1]),p=1;h>p;++p)r.call(e,c[p][f],g+=u[p-1][f][1],u[p][f][1]);return s}var t=v,n=Ci,i=Ti,r=xi,o=wi,a=ki;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:ns.get(t)||Ci,e):n},e.offset=function(t){return arguments.length?(i="function"==typeof t?t:is.get(t)||Ti,e):i},e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(r=t,e):r},e};var ns=jr.map({"inside-out":function(e){var t,n,i=e.length,r=e.map(Si),o=e.map(Di),a=jr.range(i).sort(function(e,t){return r[e]-r[t]}),s=0,l=0,c=[],u=[];for(t=0;i>t;++t)n=a[t],l>s?(s+=o[n],c.push(n)):(l+=o[n],u.push(n));return u.reverse().concat(c)},reverse:function(e){return jr.range(e.length).reverse()},default:Ci}),is=jr.map({silhouette:function(e){var t,n,i,r=e.length,o=e[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];i>s&&(s=i),a.push(i)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,i,r,o,a,s,l,c,u=e.length,d=e[0],h=d.length,p=[];for(p[0]=l=c=0,n=1;h>n;++n){for(t=0,r=0;u>t;++t)r+=e[t][n][1];for(t=0,o=0,s=d[n][0]-d[n-1][0];u>t;++t){for(i=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);t>i;++i)a+=(e[i][n][1]-e[i][n-1][1])/s;o+=a*e[t][n][1]}p[n]=l-=r?o/r*s:0,c>l&&(c=l)}for(n=0;h>n;++n)p[n]-=c;return p},expand:function(e){var t,n,i,r=e.length,o=e[0].length,a=1/r,s=[];for(n=0;o>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];if(i)for(t=0;r>t;t++)e[t][n][1]/=i;else for(t=0;r>t;t++)e[t][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:Ti});jr.layout.histogram=function(){function e(e,o){for(var a,s,l=[],c=e.map(n,this),u=i.call(this,c,o),d=r.call(this,u,c,o),h=(o=-1,c.length),p=d.length-1,f=t?1:1/h;++o<p;)(a=l[o]=[]).dx=d[o+1]-(a.x=d[o]),a.y=0;if(p>0)for(o=-1;++o<h;)(s=c[o])>=u[0]&&s<=u[1]&&((a=l[jr.bisect(d,s,1,p)-1]).y+=f,a.push(e[o]));return l}var t=!0,n=Number,i=Ii,r=Mi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=ke(t),e):i},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return Ei(e,t)}:ke(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},jr.layout.pack=function(){function e(e,o){var a=n.call(this,e,o),s=a[0],l=r[0],c=r[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,mi(s,function(e){e.r=+u(e.value)}),mi(s,Bi),i){var d=i*(t?1:Math.max(2*s.r/l,2*s.r/c))/2;mi(s,function(e){e.r+=d}),mi(s,Bi),mi(s,function(e){e.r-=d})}return function e(t,n,i,r){var o=t.children;if(t.x=n+=r*t.x,t.y=i+=r*t.y,t.r*=r,o)for(var a=-1,s=o.length;++a<s;)e(o[a],n,i,r)}(s,l/2,c/2,t?1:1/Math.max(2*s.r/l,2*s.r/c)),a}var t,n=jr.layout.hierarchy().sort(Ri),i=0,r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(i=+t,e):i},fi(e,n)},jr.layout.tree=function(){function e(e,l){var c=r.call(this,e,l),u=c[0],d=function(e){for(var t,n={A:null,children:[e]},i=[n];null!=(t=i.pop());)for(var r,o=t.children,a=0,s=o.length;s>a;++a)i.push((o[a]=r={_:o[a],parent:t,children:(r=o[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return n.children[0]}(u);if(mi(d,t),d.parent.m=-d.z,gi(d,n),s)gi(u,i);else{var h=u,p=u,f=u;gi(u,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>f.depth&&(f=e)});var g=o(h,p)/2-h.x,m=a[0]/(p.x+o(p,h)/2+g),v=a[1]/(f.depth||1);gi(u,function(e){e.x=(e.x+g)*m,e.y=e.depth*v})}return c}function t(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t.length){!function(e){for(var t,n=0,i=0,r=e.children,o=r.length;--o>=0;)(t=r[o]).z+=n,t.m+=n,n+=t.s+(i+=t.c)}(e);var r=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+o(e._,i._),e.m=e.z-r):e.z=r}else i&&(e.z=i.z+o(e._,i._));e.parent.A=function(e,t,n){if(t){for(var i,r=e,a=e,s=t,l=r.parent.children[0],c=r.m,u=a.m,d=s.m,h=l.m;s=Ui(s),r=Vi(r),s&&r;)l=Vi(l),(a=Ui(a)).a=e,(i=s.z+d-r.z-c+o(s._,r._))>0&&(Wi(ji(s,e,n),e,i),c+=i,u+=i),d+=s.m,c+=r.m,h+=l.m,u+=a.m;s&&!Ui(a)&&(a.t=s,a.m+=d-u),r&&!Vi(l)&&(l.t=r,l.m+=c-h,n=e)}return n}(e,i,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e){e.x*=a[0],e.y=e.depth*a[1]}var r=jr.layout.hierarchy().sort(null).value(null),o=Oi,a=[1,1],s=null;return e.separation=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(s=null==(a=t)?i:null,e):s?null:a},e.nodeSize=function(t){return arguments.length?(s=null==(a=t)?null:i,e):s?a:null},fi(e,r)},jr.layout.cluster=function(){function e(e,o){var a,s=t.call(this,e,o),l=s[0],c=0;mi(l,function(e){var t=e.children;t&&t.length?(e.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(t),e.y=function(e){return 1+jr.max(e,function(e){return e.y})}(t)):(e.x=a?c+=n(e,a):0,e.y=0,a=e)});var u=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(l),d=function e(t){var n,i=t.children;return i&&(n=i.length)?e(i[n-1]):t}(l),h=u.x-n(u,d)/2,p=d.x+n(d,u)/2;return mi(l,r?function(e){e.x=(e.x-l.x)*i[0],e.y=(l.y-e.y)*i[1]}:function(e){e.x=(e.x-h)/(p-h)*i[0],e.y=(1-(l.y?e.y/l.y:1))*i[1]}),s}var t=jr.layout.hierarchy().sort(null).value(null),n=Oi,i=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(i=t),e):r?null:i},e.nodeSize=function(t){return arguments.length?(r=null!=(i=t),e):r?i:null},fi(e,t)},jr.layout.treemap=function(){function e(e,t){for(var n,i,r=-1,o=e.length;++r<o;)i=(n=e[r]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){var o=n.children;if(o&&o.length){var a,s,l,c=d(n),u=[],h=o.slice(),f=1/0,g="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(e(h,c.dx*c.dy/n.value),u.area=0;(l=h.length)>0;)u.push(a=h[l-1]),u.area+=a.area,"squarify"!==p||(s=i(u,g))<=f?(h.pop(),f=s):(u.area-=u.pop().area,r(u,g,c,!1),g=Math.min(c.dx,c.dy),u.length=u.area=0,f=1/0);u.length&&(r(u,g,c,!0),u.length=u.area=0),o.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var o,a=d(t),s=i.slice(),l=[];for(e(s,a.dx*a.dy/t.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);i.forEach(n)}}function i(e,t){for(var n,i=e.area,r=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(o>n&&(o=n),n>r&&(r=n));return t*=t,(i*=i)?Math.max(t*r*f/i,i/(t*o*f)):1/0}function r(e,t,n,i){var r,o=-1,a=e.length,s=n.x,c=n.y,u=t?l(e.area/t):0;if(t==n.dx){for((i||u>n.dy)&&(u=n.dy);++o<a;)(r=e[o]).x=s,r.y=c,r.dy=u,s+=r.dx=Math.min(n.x+n.dx-s,u?l(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++o<a;)(r=e[o]).x=s,r.y=c,r.dx=u,c+=r.dy=Math.min(n.y+n.dy-c,u?l(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function o(i){var r=a||s(i),o=r[0];return o.x=0,o.y=0,o.dx=c[0],o.dy=c[1],a&&s.revalue(o),e([o],o.dx*o.dy/o.value),(a?n:t)(o),h&&(a=r),r}var a,s=jr.layout.hierarchy(),l=Math.round,c=[1,1],u=null,d=qi,h=!1,p="squarify",f=.5*(1+Math.sqrt(5));return o.size=function(e){return arguments.length?(c=e,o):c},o.padding=function(e){function t(t){return Gi(t,e)}return arguments.length?(d=null==(u=e)?qi:"function"==(n=typeof e)?function(t){var n=e.call(o,t,t.depth);return null==n?qi(t):Gi(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,o):u;var n},o.round=function(e){return arguments.length?(l=e?Math.round:Number,o):l!=Number},o.sticky=function(e){return arguments.length?(h=e,a=null,o):h},o.ratio=function(e){return arguments.length?(f=e,o):f},o.mode=function(e){return arguments.length?(p=e+"",o):p},fi(o,s)},jr.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,i,r;do{r=(n=2*Math.random()-1)*n+(i=2*Math.random()-1)*i}while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=jr.random.normal.apply(jr,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=jr.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},jr.scale={};var rs={floor:v,ceil:v};jr.scale.linear=function(){return function e(t,n,i,r){function o(){var e=Math.min(t.length,n.length)>2?Ki:Qi,o=r?si:ai;return s=e(t,n,o,i),l=e(n,t,o,jn),a}function a(e){return s(e)}var s,l;return a.invert=function(e){return l(e)},a.domain=function(e){return arguments.length?(t=e.map(Number),o()):t},a.range=function(e){return arguments.length?(n=e,o()):n},a.rangeRound=function(e){return a.range(e).interpolate(ti)},a.clamp=function(e){return arguments.length?(r=e,o()):r},a.interpolate=function(e){return arguments.length?(i=e,o()):i},a.ticks=function(e){return tr(t,e)},a.tickFormat=function(e,n){return nr(t,e,n)},a.nice=function(e){return Ji(t,e),o()},a.copy=function(){return e(t,n,i,r)},o()}([0,1],[0,1],jn,!1)};var os={s:1,g:1,p:1,r:1,e:1};jr.scale.log=function(){return function e(t,n,i,r){function o(e){return(i?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function a(e){return i?Math.pow(n,e):-Math.pow(n,-e)}function s(e){return t(o(e))}return s.invert=function(e){return a(t.invert(e))},s.domain=function(e){return arguments.length?(i=e[0]>=0,t.domain((r=e.map(Number)).map(o)),s):r},s.base=function(e){return arguments.length?(n=+e,t.domain(r.map(o)),s):n},s.nice=function(){var e=Xi(r.map(o),i?Math:ss);return t.domain(e),r=e.map(a),s},s.ticks=function(){var e=$i(r),t=[],s=e[0],l=e[1],c=Math.floor(o(s)),u=Math.ceil(o(l)),d=n%1?2:n;if(isFinite(u-c)){if(i){for(;u>c;c++)for(var h=1;d>h;h++)t.push(a(c)*h);t.push(a(c))}else for(t.push(a(c));c++<u;)for(h=d-1;h>0;h--)t.push(a(c)*h);for(c=0;t[c]<s;c++);for(u=t.length;t[u-1]>l;u--);t=t.slice(c,u)}return t},s.tickFormat=function(e,t){if(!arguments.length)return as;arguments.length<2?t=as:"function"!=typeof t&&(t=jr.format(t));var n,r=Math.max(.1,e/s.ticks().length),l=i?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(e){return e/a(l(o(e)+n))<=r?t(e):""}},s.copy=function(){return e(t.copy(),n,i,r)},Zi(s,t)}(jr.scale.linear().domain([0,1]),10,!0,[1,10])};var as=jr.format(".0e"),ss={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};jr.scale.pow=function(){return function e(t,n,i){function r(e){return t(o(e))}var o=rr(n),a=rr(1/n);return r.invert=function(e){return a(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((i=e.map(Number)).map(o)),r):i},r.ticks=function(e){return tr(i,e)},r.tickFormat=function(e,t){return nr(i,e,t)},r.nice=function(e){return r.domain(Ji(i,e))},r.exponent=function(e){return arguments.length?(o=rr(n=e),a=rr(1/n),t.domain(i.map(o)),r):n},r.copy=function(){return e(t.copy(),n,i)},Zi(r,t)}(jr.scale.linear(),1,[0,1])},jr.scale.sqrt=function(){return jr.scale.pow().exponent(.5)},jr.scale.ordinal=function(){return function e(t,n){function i(e){return a[((o.get(e)||("range"===n.t?o.set(e,t.push(e)):NaN))-1)%a.length]}function r(e,n){return jr.range(t.length).map(function(t){return e+n*t})}var o,a,s;return i.domain=function(e){if(!arguments.length)return t;t=[],o=new l;for(var r,a=-1,s=e.length;++a<s;)o.has(r=e[a])||o.set(r,t.push(r));return i[n.t].apply(i,n.a)},i.range=function(e){return arguments.length?(a=e,s=0,n={t:"range",a:arguments},i):a},i.rangePoints=function(e,o){arguments.length<2&&(o=0);var l=e[0],c=e[1],u=t.length<2?(l=(l+c)/2,0):(c-l)/(t.length-1+o);return a=r(l+u*o/2,u),s=0,n={t:"rangePoints",a:arguments},i},i.rangeRoundPoints=function(e,o){arguments.length<2&&(o=0);var l=e[0],c=e[1],u=t.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(t.length-1+o)|0;return a=r(l+Math.round(u*o/2+(c-l-(t.length-1+o)*u)/2),u),s=0,n={t:"rangeRoundPoints",a:arguments},i},i.rangeBands=function(e,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=e[1]<e[0],u=e[c-0],d=(e[1-c]-u)/(t.length-o+2*l);return a=r(u+d*l,d),c&&a.reverse(),s=d*(1-o),n={t:"rangeBands",a:arguments},i},i.rangeRoundBands=function(e,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=e[1]<e[0],u=e[c-0],d=e[1-c],h=Math.floor((d-u)/(t.length-o+2*l));return a=r(u+Math.round((d-u-(t.length-o)*h)/2),h),c&&a.reverse(),s=Math.round(h*(1-o)),n={t:"rangeRoundBands",a:arguments},i},i.rangeBand=function(){return s},i.rangeExtent=function(){return $i(n.a[0])},i.copy=function(){return e(t,n)},i.domain(t)}([],{t:"range",a:[[]]})},jr.scale.category10=function(){return jr.scale.ordinal().range(ls)},jr.scale.category20=function(){return jr.scale.ordinal().range(cs)},jr.scale.category20b=function(){return jr.scale.ordinal().range(us)},jr.scale.category20c=function(){return jr.scale.ordinal().range(ds)};var ls=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ge),cs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ge),us=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ge),ds=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ge);jr.scale.quantile=function(){return function e(t,o){function a(){var e=0,n=o.length;for(l=[];++e<n;)l[e-1]=jr.quantile(t,e/n);return s}function s(e){return isNaN(e=+e)?void 0:o[jr.bisect(l,e)]}var l;return s.domain=function(e){return arguments.length?(t=e.map(i).filter(r).sort(n),a()):t},s.range=function(e){return arguments.length?(o=e,a()):o},s.quantiles=function(){return l},s.invertExtent=function(e){return 0>(e=o.indexOf(e))?[NaN,NaN]:[e>0?l[e-1]:t[0],e<l.length?l[e]:t[t.length-1]]},s.copy=function(){return e(t,o)},a()}([],[])},jr.scale.quantize=function(){return function e(t,n,i){function r(e){return i[Math.max(0,Math.min(s,Math.floor(a*(e-t))))]}function o(){return a=i.length/(n-t),s=i.length-1,r}var a,s;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],o()):[t,n]},r.range=function(e){return arguments.length?(i=e,o()):i},r.invertExtent=function(e){return[e=0>(e=i.indexOf(e))?NaN:e/a+t,e+1/a]},r.copy=function(){return e(t,n,i)},o()}(0,1,[0,1])},jr.scale.threshold=function(){return function e(t,n){function i(e){return e>=e?n[jr.bisect(t,e)]:void 0}return i.domain=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=e,i):n},i.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},i.copy=function(){return e(t,n)},i}([.5],[0,1])},jr.scale.identity=function(){return function e(t){function n(e){return+e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(e){return tr(t,e)},n.tickFormat=function(e,n){return nr(t,e,n)},n.copy=function(){return e(t)},n}([0,1])},jr.svg={},jr.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),c=Math.max(0,+i.apply(this,arguments)),u=a.apply(this,arguments)-ko,d=s.apply(this,arguments)-ko,h=Math.abs(d-u),p=u>d?0:1;if(e>c&&(f=c,c=e,e=f),h>=wo)return t(c,p)+(e?t(e,1-p):"")+"Z";var f,g,m,v,_,y,b,w,k,x,C,T,S=0,D=0,A=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=o===hs?Math.sqrt(e*e+c*c):+o.apply(this,arguments),p||(D*=-1),c&&(D=J(m/c*Math.sin(v))),e&&(S=J(m/e*Math.sin(v)))),c){_=c*Math.cos(u+D),y=c*Math.sin(u+D),b=c*Math.cos(d-D),w=c*Math.sin(d-D);var M=Math.abs(d-u-2*D)<=yo?0:1;if(D&&dr(_,y,b,w)===p^M){var E=(u+d)/2;_=c*Math.cos(E),y=c*Math.sin(E),b=w=null}}else _=y=0;if(e){k=e*Math.cos(d-S),x=e*Math.sin(d-S),C=e*Math.cos(u+S),T=e*Math.sin(u+S);var I=Math.abs(u-d+2*S)<=yo?0:1;if(S&&dr(k,x,C,T)===1-p^I){var R=(u+d)/2;k=e*Math.cos(R),x=e*Math.sin(R),C=T=null}}else k=x=0;if((f=Math.min(Math.abs(c-e)/2,+r.apply(this,arguments)))>.001){g=c>e^p?0:1;var P=null==C?[k,x]:null==b?[_,y]:hn([_,y],[C,T],[b,w],[k,x]),L=_-P[0],F=y-P[1],B=b-P[0],z=w-P[1],H=1/Math.sin(Math.acos((L*B+F*z)/(Math.sqrt(L*L+F*F)*Math.sqrt(B*B+z*z)))/2),N=Math.sqrt(P[0]*P[0]+P[1]*P[1]);if(null!=b){var O=Math.min(f,(c-N)/(H+1)),V=hr(null==C?[k,x]:[C,T],[_,y],c,O,p),U=hr([b,w],[k,x],c,O,p);f===O?A.push("M",V[0],"A",O,",",O," 0 0,",g," ",V[1],"A",c,",",c," 0 ",1-p^dr(V[1][0],V[1][1],U[1][0],U[1][1]),",",p," ",U[1],"A",O,",",O," 0 0,",g," ",U[0]):A.push("M",V[0],"A",O,",",O," 0 1,",g," ",U[0])}else A.push("M",_,",",y);if(null!=C){var W=Math.min(f,(e-N)/(H-1)),j=hr([_,y],[C,T],e,-W,p),q=hr([k,x],null==b?[_,y]:[b,w],e,-W,p);f===W?A.push("L",q[0],"A",W,",",W," 0 0,",g," ",q[1],"A",e,",",e," 0 ",p^dr(q[1][0],q[1][1],j[1][0],j[1][1]),",",1-p," ",j[1],"A",W,",",W," 0 0,",g," ",j[0]):A.push("L",q[0],"A",W,",",W," 0 0,",g," ",j[0])}else A.push("L",k,",",x)}else A.push("M",_,",",y),null!=b&&A.push("A",c,",",c," 0 ",M,",",p," ",b,",",w),A.push("L",k,",",x),null!=C&&A.push("A",e,",",e," 0 ",I,",",1-p," ",C,",",T);return A.push("Z"),A.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=ar,i=sr,r=or,o=hs,a=lr,s=cr,l=ur;return e.innerRadius=function(t){return arguments.length?(n=ke(t),e):n},e.outerRadius=function(t){return arguments.length?(i=ke(t),e):i},e.cornerRadius=function(t){return arguments.length?(r=ke(t),e):r},e.padRadius=function(t){return arguments.length?(o=t==hs?hs:ke(t),e):o},e.startAngle=function(t){return arguments.length?(a=ke(t),e):a},e.endAngle=function(t){return arguments.length?(s=ke(t),e):s},e.padAngle=function(t){return arguments.length?(l=ke(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-ko;return[Math.cos(t)*e,Math.sin(t)*e]},e};var hs="auto";jr.svg.line=function(){return pr(v)};var ps=jr.map({linear:fr,"linear-closed":function(e){return fr(e)+"Z"},step:function(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i[0]+(i=e[t])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")},"step-before":gr,"step-after":mr,basis:yr,"basis-open":function(e){if(e.length<4)return fr(e);for(var t,n=[],i=-1,r=e.length,o=[0],a=[0];++i<3;)t=e[i],o.push(t[0]),a.push(t[1]);for(n.push(br(ms,o)+","+br(ms,a)),--i;++i<r;)t=e[i],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),wr(n,o,a);return n.join("")},"basis-closed":function(e){for(var t,n,i=-1,r=e.length,o=r+4,a=[],s=[];++i<4;)n=e[i%r],a.push(n[0]),s.push(n[1]);for(t=[br(ms,a),",",br(ms,s)],--i;++i<o;)n=e[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),wr(t,a,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var i,r,o=e[0][0],a=e[0][1],s=e[n][0]-o,l=e[n][1]-a,c=-1;++c<=n;)r=c/n,(i=e[c])[0]=t*i[0]+(1-t)*(o+r*s),i[1]=t*i[1]+(1-t)*(a+r*l);return yr(e)},cardinal:function(e,t){return e.length<3?fr(e):e[0]+vr(e,_r(e,t))},"cardinal-open":function(e,t){return e.length<4?fr(e):e[1]+vr(e.slice(1,-1),_r(e,t))},"cardinal-closed":function(e,t){return e.length<3?fr(e):e[0]+vr((e.push(e[0]),e),_r([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?fr(e):e[0]+vr(e,xr(e))}});ps.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var fs=[0,2/3,1/3,0],gs=[0,1/3,2/3,0],ms=[0,1/6,2/3,1/6];jr.svg.line.radial=function(){var e=pr(Cr);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},gr.reverse=mr,mr.reverse=gr,jr.svg.area=function(){return Tr(v)},jr.svg.area.radial=function(){var e=Tr(Cr);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},jr.svg.chord=function(){function e(e,a){var s=t(this,r,e,a),l=t(this,o,e,a);return"M"+s.p0+n(s.r,s.p1,s.a1-s.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(s,l)?i(s.r,s.p1,s.r,s.p0):i(s.r,s.p1,l.r,l.p0)+n(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,s.r,s.p0))+"Z"}function t(e,t,n,i){var r=t.call(e,n,i),o=a.call(e,r,i),c=s.call(e,r,i)-ko,u=l.call(e,r,i)-ko;return{r:o,a0:c,a1:u,p0:[o*Math.cos(c),o*Math.sin(c)],p1:[o*Math.cos(u),o*Math.sin(u)]}}function n(e,t,n){return"A"+e+","+e+" 0 "+ +(n>yo)+",1 "+t}function i(e,t,n,i){return"Q 0,0 "+i}var r=Zt,o=Jt,a=Sr,s=lr,l=cr;return e.radius=function(t){return arguments.length?(a=ke(t),e):a},e.source=function(t){return arguments.length?(r=ke(t),e):r},e.target=function(t){return arguments.length?(o=ke(t),e):o},e.startAngle=function(t){return arguments.length?(s=ke(t),e):s},e.endAngle=function(t){return arguments.length?(l=ke(t),e):l},e},jr.svg.diagonal=function(){function e(e,r){var o=t.call(this,e,r),a=n.call(this,e,r),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(i))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Zt,n=Jt,i=Dr;return e.source=function(n){return arguments.length?(t=ke(n),e):t},e.target=function(t){return arguments.length?(n=ke(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},jr.svg.diagonal.radial=function(){var e=jr.svg.diagonal(),t=Dr,n=e.projection;return e.projection=function(e){return arguments.length?n(function(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]-ko;return[n*Math.cos(i),n*Math.sin(i)]}}(t=e)):t},e},jr.svg.symbol=function(){function e(e,i){return(vs.get(t.call(this,e,i))||Er)(n.call(this,e,i))}var t=Mr,n=Ar;return e.type=function(n){return arguments.length?(t=ke(n),e):t},e.size=function(t){return arguments.length?(n=ke(t),e):n},e};var vs=jr.map({circle:Er,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ys)),n=t*ys;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/_s),n=t*_s/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/_s),n=t*_s/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});jr.svg.symbolTypes=vs.keys();var _s=Math.sqrt(3),ys=Math.tan(30*xo);co.transition=function(e){for(var t,n,i=bs||++Cs,r=Fr(e),o=[],a=ws||{time:Date.now(),ease:Xn,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Br(n,u,r,i,a),t.push(n)}return Rr(o,r,i)},co.interrupt=function(e){return this.each(null==e?ks:Ir(Fr(e)))};var bs,ws,ks=Ir(Fr()),xs=[],Cs=0;xs.call=co.call,xs.empty=co.empty,xs.node=co.node,xs.size=co.size,jr.transition=function(e,t){return e&&e.transition?bs?e.transition(t):e:jr.selection().transition(e)},jr.transition.prototype=xs,xs.select=function(e){var t,n,i,r=this.id,o=this.namespace,a=[];e=D(e);for(var s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(i=c[u])&&(n=e.call(i,i.__data__,u,s))?("__data__"in i&&(n.__data__=i.__data__),Br(n,u,o,r,i[o][r]),t.push(n)):t.push(null)}return Rr(a,o,r)},xs.selectAll=function(e){var t,n,i,r,o,a=this.id,s=this.namespace,l=[];e=A(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,p=d.length;++h<p;)if(i=d[h]){o=i[s][a],n=e.call(i,i.__data__,h,c),l.push(t=[]);for(var f=-1,g=n.length;++f<g;)(r=n[f])&&Br(r,f,s,a,o),t.push(r)}return Rr(l,s,a)},xs.filter=function(e){var t,n,i=[];"function"!=typeof e&&(e=O(e));for(var r=0,o=this.length;o>r;r++){i.push(t=[]);for(var a,s=0,l=(a=this[r]).length;l>s;s++)(n=a[s])&&e.call(n,n.__data__,s,r)&&t.push(n)}return Rr(i,this.namespace,this.id)},xs.tween=function(e,t){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(e):U(this,null==t?function(t){t[i][n].tween.remove(e)}:function(r){r[i][n].tween.set(e,t)})},xs.attr=function(e,t){function n(){this.removeAttribute(o)}function i(){this.removeAttributeNS(o.space,o.local)}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?oi:jn,o=jr.ns.qualify(e);return Pr(this,"attr."+e,t,o.local?function(e){return null==e?i:(e+="",function(){var t,n=this.getAttributeNS(o.space,o.local);return n!==e&&(t=r(n,e),function(e){this.setAttributeNS(o.space,o.local,t(e))})})}:function(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(o);return n!==e&&(t=r(n,e),function(e){this.setAttribute(o,t(e))})})})},xs.attrTween=function(e,t){var n=jr.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,i){var r=t.call(this,e,i,this.getAttributeNS(n.space,n.local));return r&&function(e){this.setAttributeNS(n.space,n.local,r(e))}}:function(e,i){var r=t.call(this,e,i,this.getAttribute(n));return r&&function(e){this.setAttribute(n,r(e))}})},xs.style=function(e,n,i){function r(){this.style.removeProperty(e)}var o=arguments.length;if(3>o){if("string"!=typeof e){for(i in 2>o&&(n=""),e)this.style(i,e[i],n);return this}i=""}return Pr(this,"style."+e,n,function(n){return null==n?r:(n+="",function(){var r,o=t(this).getComputedStyle(this,null).getPropertyValue(e);return o!==n&&(r=jn(o,n),function(t){this.style.setProperty(e,r(t),i)})})})},xs.styleTween=function(e,n,i){return arguments.length<3&&(i=""),this.tween("style."+e,function(r,o){var a=n.call(this,r,o,t(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),i)}})},xs.text=function(e){return Pr(this,"text",e,Lr)},xs.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},xs.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=jr.ease.apply(jr,arguments)),U(this,function(i){i[n][t].ease=e}))},xs.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:U(this,"function"==typeof e?function(i,r,o){i[n][t].delay=+e.call(i,i.__data__,r,o)}:(e=+e,function(i){i[n][t].delay=e}))},xs.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:U(this,"function"==typeof e?function(i,r,o){i[n][t].duration=Math.max(1,e.call(i,i.__data__,r,o))}:(e=Math.max(1,e),function(i){i[n][t].duration=e}))},xs.each=function(e,t){var n=this.id,i=this.namespace;if(arguments.length<2){var r=ws,o=bs;try{bs=n,U(this,function(t,r,o){ws=t[i][n],e.call(t,t.__data__,r,o)})}finally{ws=r,bs=o}}else U(this,function(r){var o=r[i][n];(o.event||(o.event=jr.dispatch("start","end","interrupt"))).on(e,t)});return this},xs.transition=function(){for(var e,t,n,i=this.id,r=++Cs,o=this.namespace,a=[],s=0,l=this.length;l>s;s++){a.push(e=[]);for(var c,u=0,d=(c=this[s]).length;d>u;u++)(t=c[u])&&Br(t,u,o,r,{time:(n=t[o][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Rr(a,o,r)},jr.svg.axis=function(){function e(e){e.each(function(){var e,c=jr.select(this),u=this.__chart__||n,d=this.__chart__=n.copy(),h=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,p=null==t?d.tickFormat?d.tickFormat.apply(d,s):v:t,f=c.selectAll(".tick").data(h,d),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",vo),m=jr.transition(f.exit()).style("opacity",vo).remove(),_=jr.transition(f.order()).style("opacity",1),y=Math.max(r,0)+a,b=Yi(d),w=c.selectAll(".domain").data([0]),k=(w.enter().append("path").attr("class","domain"),jr.transition(w));g.append("line"),g.append("text");var x,C,T,S,D=g.select("line"),A=_.select("line"),M=f.select("text").text(p),E=g.select("text"),I=_.select("text"),R="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(e=zr,x="x",T="y",C="x2",S="y2",M.attr("dy",0>R?"0em":".71em").style("text-anchor","middle"),k.attr("d","M"+b[0]+","+R*o+"V0H"+b[1]+"V"+R*o)):(e=Hr,x="y",T="x",C="y2",S="x2",M.attr("dy",".32em").style("text-anchor",0>R?"end":"start"),k.attr("d","M"+R*o+","+b[0]+"H0V"+b[1]+"H"+R*o)),D.attr(S,R*r),E.attr(T,R*y),A.attr(C,0).attr(S,R*r),I.attr(x,0).attr(T,R*y),d.rangeBand){var P=d,L=P.rangeBand()/2;u=d=function(e){return P(e)+L}}else u.rangeBand?u=d:m.call(e,d,u);g.call(e,u,d),_.call(e,d,d)})}var t,n=jr.scale.linear(),i=Ts,r=6,o=6,a=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t in Ss?t+"":Ts,e):i},e.ticks=function(){return arguments.length?(s=arguments,e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(r=+t,o=+arguments[n-1],e):r},e.innerTickSize=function(t){return arguments.length?(r=+t,e):r},e.outerTickSize=function(t){return arguments.length?(o=+t,e):o},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var Ts="bottom",Ss={top:1,right:1,bottom:1,left:1};jr.svg.brush=function(){function e(t){t.each(function(){var t=jr.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(g,v);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Ds[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,d=jr.transition(t),h=jr.transition(a);c&&(l=Yi(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),i(d)),u&&(l=Yi(u),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(d)),n(d)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+d[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"})}function i(e){e.select(".extent").attr("x",d[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",d[1]-d[0])}function r(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){var e=jr.mouse(y),t=!1;_&&(e[0]+=_[0],e[1]+=_[1]),D||(jr.event.altKey?(v||(v=[(d[0]+d[1])/2,(h[0]+h[1])/2]),M[0]=d[+(e[0]<v[0])],M[1]=h[+(e[1]<v[1])]):v=null),T&&g(e,c,0)&&(i(k),t=!0),S&&g(e,u,1)&&(r(k),t=!0),t&&(n(k),w({type:"brush",mode:D?"move":"resize"}))}function g(e,t,n){var i,r,o=Yi(t),l=o[0],c=o[1],u=M[n],g=n?h:d,m=g[1]-g[0];return D&&(l-=u,c-=m+u),i=(n?f:p)?Math.max(l,Math.min(c,e[n])):e[n],D?r=(i+=u)+m:(v&&(u=Math.max(l,Math.min(c,2*v[n]-i))),i>u?(r=i,i=u):r=u),g[0]!=i||g[1]!=r?(n?s=null:a=null,g[0]=i,g[1]=r,!0):void 0}function m(){o(),k.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),jr.select("body").style("cursor",null),E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),w({type:"brushend"})}var v,_,y=this,b=jr.select(jr.event.target),w=l.of(y,arguments),k=jr.select(y),C=b.datum(),T=!/^(n|s)$/.test(C)&&c,S=!/^(e|w)$/.test(C)&&u,D=b.classed("extent"),A=$(y),M=jr.mouse(y),E=jr.select(t(y)).on("keydown.brush",function(){32==jr.event.keyCode&&(D||(v=null,M[0]-=d[1],M[1]-=h[1],D=2),x())}).on("keyup.brush",function(){32==jr.event.keyCode&&2==D&&(M[0]+=d[1],M[1]+=h[1],D=0,x())});if(jr.event.changedTouches?E.on("touchmove.brush",o).on("touchend.brush",m):E.on("mousemove.brush",o).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),D)M[0]=d[0]-M[0],M[1]=h[0]-M[1];else if(C){var I=+/w$/.test(C),R=+/^n/.test(C);_=[d[1-I]-M[0],h[1-R]-M[1]],M[0]=d[I],M[1]=h[R]}else jr.event.altKey&&(v=M.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),jr.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),o()}var a,s,l=T(e,"brushstart","brush","brushend"),c=null,u=null,d=[0,0],h=[0,0],p=!0,f=!0,g=As[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:d,y:h,i:a,j:s},n=this.__chart__||t;this.__chart__=t,bs?jr.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,d=n.x,h=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=qn(d,t.x),i=qn(h,t.y);return a=s=null,function(r){d=t.x=n(r),h=t.y=i(r),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(g=As[!(c=t)<<1|!u],e):c},e.y=function(t){return arguments.length?(g=As[!c<<1|!(u=t)],e):u},e.clamp=function(t){return arguments.length?(c&&u?(p=!!t[0],f=!!t[1]):c?p=!!t:u&&(f=!!t),e):c&&u?[p,f]:c?p:u?f:null},e.extent=function(t){var n,i,r,o,l;return arguments.length?(c&&(n=t[0],i=t[1],u&&(n=n[0],i=i[0]),a=[n,i],c.invert&&(n=c(n),i=c(i)),n>i&&(l=n,n=i,i=l),(n!=d[0]||i!=d[1])&&(d=[n,i])),u&&(r=t[0],o=t[1],c&&(r=r[1],o=o[1]),s=[r,o],u.invert&&(r=u(r),o=u(o)),r>o&&(l=r,r=o,o=l),(r!=h[0]||o!=h[1])&&(h=[r,o])),e):(c&&(a?(n=a[0],i=a[1]):(n=d[0],i=d[1],c.invert&&(n=c.invert(n),i=c.invert(i)),n>i&&(l=n,n=i,i=l))),u&&(s?(r=s[0],o=s[1]):(r=h[0],o=h[1],u.invert&&(r=u.invert(r),o=u.invert(o)),r>o&&(l=r,r=o,o=l))),c&&u?[[n,r],[i,o]]:c?[n,i]:u&&[r,o])},e.clear=function(){return e.empty()||(d=[0,0],h=[0,0],a=s=null),e},e.empty=function(){return!!c&&d[0]==d[1]||!!u&&h[0]==h[1]},jr.rebind(e,l,"on")};var Ds={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},As=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ms=Yo.format=ea.timeFormat,Es=Ms.utc,Is=Es("%Y-%m-%dT%H:%M:%S.%LZ");Ms.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nr:Is,Nr.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Nr.toString=Is.toString,Yo.second=Ie(function(e){return new Qo(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Yo.seconds=Yo.second.range,Yo.seconds.utc=Yo.second.utc.range,Yo.minute=Ie(function(e){return new Qo(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Yo.minutes=Yo.minute.range,Yo.minutes.utc=Yo.minute.utc.range,Yo.hour=Ie(function(e){var t=e.getTimezoneOffset()/60;return new Qo(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Yo.hours=Yo.hour.range,Yo.hours.utc=Yo.hour.utc.range,Yo.month=Ie(function(e){return(e=Yo.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Yo.months=Yo.month.range,Yo.months.utc=Yo.month.utc.range;var Rs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ps=[[Yo.second,1],[Yo.second,5],[Yo.second,15],[Yo.second,30],[Yo.minute,1],[Yo.minute,5],[Yo.minute,15],[Yo.minute,30],[Yo.hour,1],[Yo.hour,3],[Yo.hour,6],[Yo.hour,12],[Yo.day,1],[Yo.day,2],[Yo.week,1],[Yo.month,1],[Yo.month,3],[Yo.year,1]],Ls=Ms.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",_t]]),Fs={range:function(e,t,n){return jr.range(Math.ceil(e/n)*n,+t,n).map(Vr)},floor:v,ceil:v};Ps.year=Yo.year,Yo.scale=function(){return Or(jr.scale.linear(),Ps,Ls)};var Bs=Ps.map(function(e){return[e[0].utc,e[1]]}),zs=Es.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",_t]]);Bs.year=Yo.year.utc,Yo.scale.utc=function(){return Or(jr.scale.linear(),Bs,zs)},jr.text=xe(function(e){return e.responseText}),jr.json=function(e,t){return Ce(e,"application/json",Ur,t)},jr.html=function(e,t){return Ce(e,"text/html",Wr,t)},jr.xml=xe(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define("d3",jr):"object"==typeof module&&module.exports&&(module.exports=jr),this.d3=jr}(),function(){var e;null==window.Epoch&&(window.Epoch={}),null==(e=window.Epoch).Chart&&(e.Chart={}),null==(e=window.Epoch).Time&&(e.Time={}),null==(e=window.Epoch).Util&&(e.Util={}),null==(e=window.Epoch).Formats&&(e.Formats={}),Epoch.warn=function(e){return(console.warn||console.log)("Epoch Warning: "+e)},Epoch.exception=function(e){throw"Epoch Error: "+e}}.call(this),function(){Epoch.TestContext=function(){function e(){var e,n,i;for(this._log=[],n=0,i=t.length;n<i;n++)e=t[n],this._makeFauxMethod(e)}var t;return t="arc arcTo beginPath bezierCurveTo clearRect clip closePath drawImage fill fillRect fillText moveTo quadraticCurveTo rect restore rotate save scale scrollPathIntoView setLineDash setTransform stroke strokeRect strokeText transform translate".split(" "),e.prototype._makeFauxMethod=function(e){return this[e]=function(){var t;return this._log.push(e+"("+function(){var e,n,i;for(i=[],e=0,n=arguments.length;e<n;e++)t=arguments[e],i.push(t.toString());return i}.apply(this,arguments).join(",")+")")}},e.prototype.getImageData=function(){var e;return this._log.push("getImageData("+function(){var t,n,i;for(i=[],t=0,n=arguments.length;t<n;t++)e=arguments[t],i.push(e.toString());return i}.apply(this,arguments).join(",")+")"),{width:0,height:0,resolution:1,data:[]}},e}()}.call(this),function(){var e,t;e=function(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},Epoch.isArray=null!=(t=Array.isArray)?t:e("Array"),Epoch.isObject=e("Object"),Epoch.isString=e("String"),Epoch.isFunction=e("Function"),Epoch.isNumber=e("Number"),Epoch.isElement=function(e){return"undefined"!=typeof HTMLElement&&null!==HTMLElement?e instanceof HTMLElement:null!=e&&Epoch.isObject(e)&&1===e.nodeType&&Epoch.isString(e.nodeName)},Epoch.Util.copy=function(e){var t,n,i;if(null==e)return null;for(n in t={},e)i=e[n],t[n]=i;return t},Epoch.Util.defaults=function(e,t){var n,i,r,o,a;for(r in a=Epoch.Util.copy(e),t)o=e[r],i=t[r],n=Epoch.isObject(o)&&Epoch.isObject(i),null!=o&&null!=i?n&&!Epoch.isArray(o)?a[r]=Epoch.Util.defaults(o,i):a[r]=o:a[r]=null!=o?o:i;return a},Epoch.Util.formatSI=function(e,t,n){var i,r,o,a;if(null==t&&(t=1),null==n&&(n=!1),1e3>e)return((0|e)!==e||n)&&(e=e.toFixed(t)),e;for(r in a="KMGTPEZY".split(""))if(o=a[r],e>=(i=Math.pow(10,3*(1+(0|r))))&&e<Math.pow(10,3*(2+(0|r))))return(0!=(e/=i)%1||n)&&(e=e.toFixed(t)),e+" "+o},Epoch.Util.formatBytes=function(e,t,n){var i,r,o,a;if(null==t&&(t=1),null==n&&(n=!1),1024>e)return(0!=e%1||n)&&(e=e.toFixed(t)),e+" B";for(r in a="KB MB GB TB PB EB ZB YB".split(" "))if(o=a[r],e>=(i=Math.pow(1024,1+(0|r)))&&e<Math.pow(1024,2+(0|r)))return(0!=(e/=i)%1||n)&&(e=e.toFixed(t)),e+" "+o},Epoch.Util.dasherize=function(e){return Epoch.Util.trim(e).replace("\n","").replace(/\s+/g,"-").toLowerCase()},Epoch.Util.domain=function(e,t){var n,i,r,o,a,s,l,c;for(null==t&&(t="x"),r={},n=[],o=0,s=e.length;o<s;o++)for(a=0,l=(c=(i=e[o]).values).length;a<l;a++)null==r[(i=c[a])[t]]&&(n.push(i[t]),r[i[t]]=!0);return n},Epoch.Util.trim=function(e){return Epoch.isString(e)?e.replace(/^\s+/g,"").replace(/\s+$/g,""):null},Epoch.Util.getComputedStyle=function(e,t){return Epoch.isFunction(window.getComputedStyle)?window.getComputedStyle(e,t):null!=e.currentStyle?e.currentStyle:void 0},Epoch.Util.toRGBA=function(e,t){var n,i;return(n=e.match(/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*[0-9\.]+\)/))?i="rgba("+n[1]+","+(i=n[2])+","+(n=n[3])+","+t+")":(n=d3.rgb(e))&&(i="rgba("+n.r+","+n.g+","+n.b+","+t+")"),i},Epoch.Util.getContext=function(e,t){return null==t&&(t="2d"),null!=e.getContext?e.getContext(t):new Epoch.TestContext}}.call(this),function(){d3.selection.prototype.width=function(e){return null!=e&&Epoch.isString(e)?this.style("width",e):null!=e&&Epoch.isNumber(e)?this.style("width",e+"px"):+Epoch.Util.getComputedStyle(this.node(),null).width.replace("px","")},d3.selection.prototype.height=function(e){return null!=e&&Epoch.isString(e)?this.style("height",e):null!=e&&Epoch.isNumber(e)?this.style("height",e+"px"):+Epoch.Util.getComputedStyle(this.node(),null).height.replace("px","")}}.call(this),function(){var e;Epoch.Formats.regular=function(e){return e},Epoch.Formats.si=function(e){return Epoch.Util.formatSI(e)},Epoch.Formats.percent=function(e){return(100*e).toFixed(1)+"%"},Epoch.Formats.seconds=function(t){return e(new Date(1e3*t))},e=d3.time.format("%I:%M:%S %p"),Epoch.Formats.bytes=function(e){return Epoch.Util.formatBytes(e)}}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Epoch.Events=function(){function e(){this._events={}}return e.prototype.on=function(e,t){var n;if(null!=t)return null==(n=this._events)[e]&&(n[e]=[]),this._events[e].push(t)},e.prototype.onAll=function(e){var t,n,i;if(Epoch.isObject(e)){for(n in i=[],e)t=e[n],i.push(this.on(n,t));return i}},e.prototype.off=function(e,t){var n,i;if(Epoch.isArray(this._events[e])){if(null==t)return delete this._events[e];for(i=[];0<=(n=this._events[e].indexOf(t));)i.push(this._events[e].splice(n,1));return i}},e.prototype.offAll=function(e){var t,n,i,r;if(Epoch.isArray(e)){for(r=[],t=0,i=e.length;t<i;t++)n=e[t],r.push(this.off(n));return r}if(Epoch.isObject(e)){for(n in i=[],e)t=e[n],i.push(this.off(n,t));return i}},e.prototype.trigger=function(e){var t,n,i,r,o,a,s,l;if(null!=this._events[e]){for(t=function(){var e,t,n;for(n=[],r=e=1,t=arguments.length;1<=t?e<t:e>t;r=1<=t?++e:--e)n.push(arguments[r]);return n}.apply(this,arguments),l=[],o=0,a=(s=this._events[e]).length;o<a;o++)n=s[o],i=null,Epoch.isString(n)?i=this[n]:Epoch.isFunction(n)&&(i=n),null==i&&Epoch.exception("Callback for event '"+e+"' is not a function or reference to a method."),l.push(i.apply(this,t));return l}},e}(),Epoch.Chart.Base=function(e){function n(e){this.options=null!=e?e:{},n.__super__.constructor.call(this),this.setData(this.options.data||[]),null!=this.options.el&&(this.el=d3.select(this.options.el)),this.width=this.options.width,this.height=this.options.height,null!=this.el?(null==this.width&&(this.width=this.el.width()),null==this.height&&(this.height=this.el.height())):(null==this.width&&(this.width=i.width),null==this.height&&(this.height=i.height)),this.onAll(r)}var i,r;return t(n,e),i={width:320,height:240},r={"option:width":"dimensionsChanged","option:height":"dimensionsChanged"},n.prototype._getAllOptions=function(){return Epoch.Util.defaults({},this.options)},n.prototype._getOption=function(e){var t;for(e=e.split("."),t=this.options;e.length&&null!=t;)t=t[e.shift()];return t},n.prototype._setOption=function(e,t){var n,i,r;for(n=e.split("."),i=this.options;n.length;){if(r=n.shift(),0===n.length){i[r]=t,this.trigger("option:"+e);break}null==i[r]&&(i[r]={}),i=i[r]}},n.prototype._setManyOptions=function(e,t){var n,i,r;for(n in null==t&&(t=""),r=[],e)i=e[n],Epoch.isObject(i)?r.push(this._setManyOptions(i,t+n+".")):r.push(this._setOption(t+n,i));return r},n.prototype.option=function(){return 0===arguments.length?this._getAllOptions():1===arguments.length&&Epoch.isString(arguments[0])?this._getOption(arguments[0]):2===arguments.length&&Epoch.isString(arguments[0])?this._setOption(arguments[0],arguments[1]):1===arguments.length&&Epoch.isObject(arguments[0])?this._setManyOptions(arguments[0]):void 0},n.prototype.setData=function(e){var t,n,i,r,o;for(t=1,r=0,o=e.length;r<o;r++)i=e[r],(n=["layer"]).push("category"+t),i.category=t,null!=i.label&&n.push(Epoch.Util.dasherize(i.label)),i.className=n.join(" "),t++;return this.data=e},n.prototype.update=function(e,t){if(null==t&&(t=!0),this.setData(e),t)return this.draw()},n.prototype.draw=function(){return this.trigger("draw")},n.prototype.extent=function(e){return[d3.min(this.data,function(t){return d3.min(t.values,e)}),d3.max(this.data,function(t){return d3.max(t.values,e)})]},n.prototype.dimensionsChanged=function(){return this.width=this.option("width")||this.width,this.height=this.option("height")||this.height,this.el.width(this.width),this.el.height(this.height)},n}(Epoch.Events),Epoch.Chart.SVG=function(e){function n(e){this.options=null!=e?e:{},n.__super__.constructor.call(this,this.options),this.svg=null!=this.el?this.el.append("svg"):d3.select(document.createElement("svg")),this.svg.attr({xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height})}return t(n,e),n.prototype.dimensionsChanged=function(){return n.__super__.dimensionsChanged.call(this),this.svg.attr("width",this.width).attr("height",this.height)},n}(Epoch.Chart.Base),Epoch.Chart.Canvas=function(e){function n(e){this.options=null!=e?e:{},n.__super__.constructor.call(this,this.options),this.pixelRatio=null!=this.options.pixelRatio?this.options.pixelRatio:null!=window.devicePixelRatio?window.devicePixelRatio:1,this.canvas=d3.select(document.createElement("CANVAS")),this.canvas.style({width:this.width+"px",height:this.height+"px"}),this.canvas.attr({width:this.getWidth(),height:this.getHeight()}),null!=this.el&&this.el.node().appendChild(this.canvas.node()),this.ctx=Epoch.Util.getContext(this.canvas.node())}return t(n,e),n.prototype.getWidth=function(){return this.width*this.pixelRatio},n.prototype.getHeight=function(){return this.height*this.pixelRatio},n.prototype.clear=function(){return this.ctx.clearRect(0,0,this.getWidth(),this.getHeight())},n.prototype.getStyles=function(e){return Epoch.QueryCSS.getStyles(e,this.el)},n.prototype.dimensionsChanged=function(){return n.__super__.dimensionsChanged.call(this),this.canvas.style({width:this.width+"px",height:this.height+"px"}),this.canvas.attr({width:this.getWidth(),height:this.getHeight()})},n}(Epoch.Chart.Base)}.call(this),function(){var e;e=function(){function e(){}var t,n,i,r,o;return n=0,r=function(){return"epoch-container-"+n++},t=/^([^#. ]+)?(#[^. ]+)?(\.[^# ]+)?$/,i=!1,o=function(e){var n,i;return null==(n=e.match(t))?Epoch.error("Query CSS cannot match given selector: "+e):(i=n[1],e=n[2],n=n[3],i=(null!=i?i:"div").toUpperCase(),i=document.createElement(i),null!=e&&(i.id=e.substr(1)),null!=n&&(i.className=n.substr(1).replace(/\./g," ")),i)},e.log=function(e){return i=e},e.cache={},e.styleList=["fill","stroke","stroke-width"],e.container=null,e.purge=function(){return e.cache={}},e.getContainer=function(){var t;return null!=e.container?e.container:((t=document.createElement("DIV")).id="_canvas_css_reference",document.body.appendChild(t),e.container=d3.select(t))},e.hash=function(e,t){var n;return null==(n=t.attr("data-epoch-container-id"))&&(n=r(),t.attr("data-epoch-container-id",n)),n+"__"+e},e.getStyles=function(t,n){var r,a,s,l,c,u,d;if(a=e.hash(t,n),null!=(r=e.cache[a]))return r;for(s=[],r=n.node().parentNode;null!=r&&"body"!==r.nodeName.toLowerCase();)s.unshift(r),r=r.parentNode;for(s.push(n.node()),r=[],u=0,d=s.length;u<d;u++)c=(l=s[u]).nodeName.toLowerCase(),null!=l.id&&0<l.id.length&&(c+="#"+l.id),null!=l.className&&0<l.className.length&&(c+="."+Epoch.Util.trim(l.className).replace(/\s+/g,".")),r.push(c);for(r.push("svg"),l=0,c=(u=Epoch.Util.trim(t).split(/\s+/)).length;l<c;l++)s=u[l],r.push(s);for(i&&console.log(r),l=c=o(r.shift());r.length;)s=o(r.shift()),l.appendChild(s),l=s;for(i&&console.log(c),e.getContainer().node().appendChild(c),s=d3.select("#_canvas_css_reference "+t),l={},c=0,u=(d=e.styleList).length;c<u;c++)l[r=d[c]]=s.style(r);return e.cache[a]=l,e.getContainer().html(""),l},e}(),Epoch.QueryCSS=e}.call(this),function(){var e={}.hasOwnProperty;Epoch.Chart.Plot=function(t){function n(e){var t,a,s;for(this.options=null!=e?e:{},Epoch.Util.copy(this.options.margins),n.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,r)),this.margins={},t=0,a=(s=["top","right","bottom","left"]).length;t<a;t++)e=s[t],this.margins[e]=null!=this.options.margins&&null!=this.options.margins[e]?this.options.margins[e]:this.hasAxis(e)?i[e]:6;this.g=this.svg.append("g").attr("transform","translate("+this.margins.left+", "+this.margins.top+")"),this.onAll(o)}var i,r,o;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Chart.SVG),r={domain:null,range:null,axes:["left","bottom"],ticks:{top:14,bottom:14,left:5,right:5},tickFormats:{top:Epoch.Formats.regular,bottom:Epoch.Formats.regular,left:Epoch.Formats.si,right:Epoch.Formats.si}},i={top:25,right:50,bottom:25,left:50},o={"option:margins.top":"marginsChanged","option:margins.right":"marginsChanged","option:margins.bottom":"marginsChanged","option:margins.left":"marginsChanged","option:axes":"axesChanged","option:ticks.top":"ticksChanged","option:ticks.right":"ticksChanged","option:ticks.bottom":"ticksChanged","option:ticks.left":"ticksChanged","option:tickFormats.top":"tickFormatsChanged","option:tickFormats.right":"tickFormatsChanged","option:tickFormats.bottom":"tickFormatsChanged","option:tickFormats.left":"tickFormatsChanged","option:domain":"domainChanged","option:range":"rangeChanged"},n.prototype.setTickFormat=function(e,t){return this.options.tickFormats[e]=t},n.prototype.hasAxis=function(e){return-1<this.options.axes.indexOf(e)},n.prototype.innerWidth=function(){return this.width-(this.margins.left+this.margins.right)},n.prototype.innerHeight=function(){return this.height-(this.margins.top+this.margins.bottom)},n.prototype.x=function(){var e,t;return e=null!=(t=this.options.domain)?t:this.extent(function(e){return e.x}),d3.scale.linear().domain(e).range([0,this.innerWidth()])},n.prototype.y=function(){var e,t;return e=null!=(t=this.options.range)?t:this.extent(function(e){return e.y}),d3.scale.linear().domain(e).range([this.innerHeight(),0])},n.prototype.bottomAxis=function(){return d3.svg.axis().scale(this.x()).orient("bottom").ticks(this.options.ticks.bottom).tickFormat(this.options.tickFormats.bottom)},n.prototype.topAxis=function(){return d3.svg.axis().scale(this.x()).orient("top").ticks(this.options.ticks.top).tickFormat(this.options.tickFormats.top)},n.prototype.leftAxis=function(){return d3.svg.axis().scale(this.y()).orient("left").ticks(this.options.ticks.left).tickFormat(this.options.tickFormats.left)},n.prototype.rightAxis=function(){return d3.svg.axis().scale(this.y()).orient("right").ticks(this.options.ticks.right).tickFormat(this.options.tickFormats.right)},n.prototype.draw=function(){return this._axesDrawn?this._redrawAxes():this._drawAxes(),n.__super__.draw.call(this)},n.prototype._redrawAxes=function(){if(this.hasAxis("bottom")&&this.g.selectAll(".x.axis.bottom").transition().duration(500).ease("linear").call(this.bottomAxis()),this.hasAxis("top")&&this.g.selectAll(".x.axis.top").transition().duration(500).ease("linear").call(this.topAxis()),this.hasAxis("left")&&this.g.selectAll(".y.axis.left").transition().duration(500).ease("linear").call(this.leftAxis()),this.hasAxis("right"))return this.g.selectAll(".y.axis.right").transition().duration(500).ease("linear").call(this.rightAxis())},n.prototype._drawAxes=function(){return this.hasAxis("bottom")&&this.g.append("g").attr("class","x axis bottom").attr("transform","translate(0, "+this.innerHeight()+")").call(this.bottomAxis()),this.hasAxis("top")&&this.g.append("g").attr("class","x axis top").call(this.topAxis()),this.hasAxis("left")&&this.g.append("g").attr("class","y axis left").call(this.leftAxis()),this.hasAxis("right")&&this.g.append("g").attr("class","y axis right").attr("transform","translate("+this.innerWidth()+", 0)").call(this.rightAxis()),this._axesDrawn=!0},n.prototype.dimensionsChanged=function(){return n.__super__.dimensionsChanged.call(this),this.g.selectAll(".axis").remove(),this._axesDrawn=!1,this.draw()},n.prototype.marginsChanged=function(){var e,t,n;if(null!=this.options.margins){for(e in n=this.options.margins)t=n[e],this.margins[e]=null==t?6:t;return this.g.transition().duration(750).attr("transform","translate("+this.margins.left+", "+this.margins.top+")"),this.draw()}},n.prototype.axesChanged=function(){var e,t,n,r;for(t=0,n=(r=["top","right","bottom","left"]).length;t<n;t++)e=r[t],(null==this.options.margins||null==this.options.margins[e])&&(this.hasAxis(e)?this.margins[e]=i[e]:this.margins[e]=6);return this.g.transition().duration(750).attr("transform","translate("+this.margins.left+", "+this.margins.top+")"),this.g.selectAll(".axis").remove(),this._axesDrawn=!1,this.draw()},n.prototype.ticksChanged=function(){return this.draw()},n.prototype.tickFormatsChanged=function(){return this.draw()},n.prototype.domainChanged=function(){return this.draw()},n.prototype.rangeChanged=function(){return this.draw()},n}()}.call(this),function(){var e={}.hasOwnProperty;Epoch.Chart.Area=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Chart.Plot),n.prototype.y=function(){var e,t,n,i,r,o,a,s;for(e=[],i=0,r=(o=this.data).length;i<r;i++)for(t in a=(n=o[i]).values)n=a[t],null!=e[t]&&(e[t]+=n.y),null==e[t]&&(e[t]=n.y);return d3.scale.linear().domain(null!=(s=this.options.range)?s:[0,d3.max(e)]).range([this.height-this.margins.top-this.margins.bottom,0])},n.prototype.draw=function(){var e,t,i,r;return t=[this.x(),this.y()],i=t[0],r=t[1],e=d3.svg.area().x(function(e){return i(e.x)}).y0(function(e){return r(e.y0)}).y1(function(e){return r(e.y0+e.y)}),d3.layout.stack().values(function(e){return e.values})(this.data),this.g.selectAll(".layer").remove(),(t=this.g.selectAll(".layer").data(this.data,function(e){return e.category})).select(".area").attr("d",function(t){return e(t.values)}),t.enter().append("g").attr("class",function(e){return e.className}),t.append("path").attr("class","area").attr("d",function(t){return e(t.values)}),n.__super__.draw.call(this)},n}()}.call(this),function(){var e={}.hasOwnProperty;Epoch.Chart.Bar=function(t){function n(e){this.options=null!=e?e:{},this.options="horizontal"===this.options.orientation?Epoch.Util.defaults(this.options,r):Epoch.Util.defaults(this.options,i),n.__super__.constructor.call(this,this.options),this.onAll(o)}var i,r,o;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Chart.Plot),i={style:"grouped",orientation:"vertical",padding:{bar:.08,group:.1},outerPadding:{bar:.08,group:.1}},r=Epoch.Util.defaults({tickFormats:{top:Epoch.Formats.si,bottom:Epoch.Formats.si,left:Epoch.Formats.regular,right:Epoch.Formats.regular}},i),o={"option:orientation":"orientationChanged","option:padding":"paddingChanged","option:outerPadding":"paddingChanged","option:padding:bar":"paddingChanged","option:padding:group":"paddingChanged","option:outerPadding:bar":"paddingChanged","option:outerPadding:group":"paddingChanged"},n.prototype.x=function(){var e;return"vertical"===this.options.orientation?d3.scale.ordinal().domain(Epoch.Util.domain(this.data)).rangeRoundBands([0,this.innerWidth()],this.options.padding.group,this.options.outerPadding.group):((e=this.extent(function(e){return e.y}))[0]=Math.min(0,e[0]),d3.scale.linear().domain(e).range([0,this.width-this.margins.left-this.margins.right]))},n.prototype.x1=function(e){var t;return d3.scale.ordinal().domain(function(){var e,n,i,r;for(r=[],e=0,n=(i=this.data).length;e<n;e++)t=i[e],r.push(t.category);return r}.call(this)).rangeRoundBands([0,e.rangeBand()],this.options.padding.bar,this.options.outerPadding.bar)},n.prototype.y=function(){var e;return"vertical"===this.options.orientation?((e=this.extent(function(e){return e.y}))[0]=Math.min(0,e[0]),d3.scale.linear().domain(e).range([this.height-this.margins.top-this.margins.bottom,0])):d3.scale.ordinal().domain(Epoch.Util.domain(this.data)).rangeRoundBands([0,this.innerHeight()],this.options.padding.group,this.options.outerPadding.group)},n.prototype.y1=function(e){var t;return d3.scale.ordinal().domain(function(){var e,n,i,r;for(r=[],e=0,n=(i=this.data).length;e<n;e++)t=i[e],r.push(t.category);return r}.call(this)).rangeRoundBands([0,e.rangeBand()],this.options.padding.bar,this.options.outerPadding.bar)},n.prototype._remapData=function(){var e,t,n,i,r,o,a,s,l,c,u,d;for(r={},o=0,s=(u=this.data).length;o<s;o++)for(e="bar "+(i=u[o]).className.replace(/\s*layer\s*/,""),a=0,l=(d=i.values).length;a<l;a++)null==r[c=(t=d[a]).x]&&(r[c]=[]),r[t.x].push({label:i.category,y:t.y,className:e});for(n in t=[],r)e=r[n],t.push({group:n,values:e});return t},n.prototype.draw=function(){return"horizontal"===this.options.orientation?this._drawHorizontal():this._drawVertical(),n.__super__.draw.call(this)},n.prototype._drawVertical=function(){var e,t,n,i,r,o;return e=[this.x(),this.y()],i=e[0],o=e[1],r=this.x1(i),t=this.height-this.margins.top-this.margins.bottom,e=this._remapData(),(e=this.g.selectAll(".layer").data(e,function(e){return e.group})).transition().duration(750).attr("transform",function(e){return"translate("+i(e.group)+", 0)"}),e.enter().append("g").attr("class","layer").attr("transform",function(e){return"translate("+i(e.group)+", 0)"}),(n=e.selectAll("rect").data(function(e){return e.values})).transition().duration(600).attr("x",function(e){return r(e.label)}).attr("y",function(e){return o(e.y)}).attr("width",r.rangeBand()).attr("height",function(e){return t-o(e.y)}),n.enter().append("rect").attr("class",function(e){return e.className}).attr("x",function(e){return r(e.label)}).attr("y",function(e){return o(e.y)}).attr("width",r.rangeBand()).attr("height",function(e){return t-o(e.y)}),n.exit().transition().duration(150).style("opacity","0").remove(),e.exit().transition().duration(750).style("opacity","0").remove()},n.prototype._drawHorizontal=function(){var e,t,n,i,r;return e=[this.x(),this.y()],n=e[0],i=e[1],r=this.y1(i),e=this._remapData(),(e=this.g.selectAll(".layer").data(e,function(e){return e.group})).transition().duration(750).attr("transform",function(e){return"translate(0, "+i(e.group)+")"}),e.enter().append("g").attr("class","layer").attr("transform",function(e){return"translate(0, "+i(e.group)+")"}),(t=e.selectAll("rect").data(function(e){return e.values})).transition().duration(600).attr("x",function(e){return 0}).attr("y",function(e){return r(e.label)}).attr("height",r.rangeBand()).attr("width",function(e){return n(e.y)}),t.enter().append("rect").attr("class",function(e){return e.className}).attr("x",function(e){return 0}).attr("y",function(e){return r(e.label)}).attr("height",r.rangeBand()).attr("width",function(e){return n(e.y)}),t.exit().transition().duration(150).style("opacity","0").remove(),e.exit().transition().duration(750).style("opacity","0").remove()},n.prototype.orientationChanged=function(){var e,t,n,i;return i=this.options.tickFormats.top,e=this.options.tickFormats.bottom,t=this.options.tickFormats.left,n=this.options.tickFormats.right,this.options.tickFormats.left=i,this.options.tickFormats.right=e,this.options.tickFormats.top=t,this.options.tickFormats.bottom=n,this.draw()},n.prototype.paddingChanged=function(){return this.draw()},n}()}.call(this),function(){var e={}.hasOwnProperty;Epoch.Chart.Line=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Chart.Plot),n.prototype.line=function(){var e,t,n;return n=[this.x(),this.y()],e=n[0],t=n[1],d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)})},n.prototype.draw=function(){var e,t;return this.x(),this.y(),t=this.line(),(e=this.g.selectAll(".layer").data(this.data,function(e){return e.category})).select(".line").transition().duration(500).attr("d",function(e){return t(e.values)}),e.enter().append("g").attr("class",function(e){return e.className}).append("path").attr("class","line").attr("d",function(e){return t(e.values)}),e.exit().transition().duration(750).style("opacity","0").remove(),n.__super__.draw.call(this)},n}()}.call(this),function(){var e={}.hasOwnProperty;Epoch.Chart.Pie=function(t){function n(e){this.options=null!=e?e:{},n.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,i)),this.pie=d3.layout.pie().sort(null).value(function(e){return e.value}),this.arc=d3.svg.arc().outerRadius(function(e){return function(){return Math.max(e.width,e.height)/2-e.options.margin}}(this)).innerRadius(function(e){return function(){return e.options.inner}}(this)),this.g=this.svg.append("g").attr("transform","translate("+this.width/2+", "+this.height/2+")"),this.on("option:margin","marginChanged"),this.on("option:inner","innerChanged")}var i;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Chart.SVG),i={margin:10,inner:0},n.prototype.draw=function(){var e;return this.g.selectAll(".arc").remove(),(e=this.g.selectAll(".arc").data(this.pie(this.data),function(e){return e.data.category})).enter().append("g").attr("class",function(e){return"arc pie "+e.data.className}),e.select("path").attr("d",this.arc),e.select("text").attr("transform",function(e){return function(t){return"translate("+e.arc.centroid(t)+")"}}(this)).text(function(e){return e.data.label||e.data.category}),e.append("path").attr("d",this.arc).each(function(e){return this._current=e}),e.append("text").attr("transform",function(e){return function(t){return"translate("+e.arc.centroid(t)+")"}}(this)).attr("dy",".35em").style("text-anchor","middle").text(function(e){return e.data.label||e.data.category}),n.__super__.draw.call(this)},n.prototype.marginChanged=function(){return this.draw()},n.prototype.innerChanged=function(){return this.draw()},n}()}.call(this),function(){var e={}.hasOwnProperty;Epoch.Chart.Scatter=function(t){function n(e){this.options=null!=e?e:{},n.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,i)),this.on("option:radius","radiusChanged")}var i;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Chart.Plot),i={radius:3.5,axes:["top","bottom","left","right"]},n.prototype.draw=function(){var e,t,i,r,o;return e=[this.x(),this.y()],r=e[0],o=e[1],i=this.options.radius,(t=this.g.selectAll(".layer").data(this.data,function(e){return e.category})).enter().append("g").attr("class",function(e){return e.className}),(e=t.selectAll(".dot").data(function(e){return e.values})).transition().duration(500).attr("r",function(e){var t;return null!=(t=e.r)?t:i}).attr("cx",function(e){return r(e.x)}).attr("cy",function(e){return o(e.y)}),e.enter().append("circle").attr("class","dot").attr("r",function(e){var t;return null!=(t=e.r)?t:i}).attr("cx",function(e){return r(e.x)}).attr("cy",function(e){return o(e.y)}),e.exit().transition().duration(750).style("opacity",0).remove(),t.exit().transition().duration(750).style("opacity",0).remove(),n.__super__.draw.call(this)},n.prototype.radiusChanged=function(){return this.draw()},n}()}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Epoch.Time.Plot=function(e){function n(e){var t,a,s;for(this.options=e,Epoch.Util.copy(this.options.margins),n.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,r)),this._queue=[],this.margins={},t=0,a=(s=["top","right","bottom","left"]).length;t<a;t++)e=s[t],this.margins[e]=null!=this.options.margins&&null!=this.options.margins[e]?this.options.margins[e]:this.hasAxis(e)?i[e]:6;this.svg=this.el.insert("svg",":first-child").attr("width",this.width).attr("height",this.height).style("z-index","1000"),"absolute"!==this.el.style("position")&&"relative"!==this.el.style("position")&&this.el.style("position","relative"),this.canvas.style({position:"absolute","z-index":"999"}),this._sizeCanvas(),this.animation={interval:null,active:!1,delta:function(e){return function(){return-e.w()/e.options.fps}}(this),tickDelta:function(e){return function(){return-e.w()/e.pixelRatio/e.options.fps}}(this),frame:0,duration:this.options.fps},this._buildAxes(),this.animationCallback=function(e){return function(){return e._animate()}}(this),this.onAll(o)}var i,r,o;return t(n,e),r={fps:24,historySize:120,windowSize:40,queueSize:10,axes:["bottom"],ticks:{time:15,left:5,right:5},tickFormats:{top:Epoch.Formats.seconds,bottom:Epoch.Formats.seconds,left:Epoch.Formats.si,right:Epoch.Formats.si}},i={top:25,right:50,bottom:25,left:50},o={"option:margins":"marginsChanged","option:margins.top":"marginsChanged","option:margins.right":"marginsChanged","option:margins.bottom":"marginsChanged","option:margins.left":"marginsChanged","option:axes":"axesChanged","option:ticks":"ticksChanged","option:ticks.top":"ticksChanged","option:ticks.right":"ticksChanged","option:ticks.bottom":"ticksChanged","option:ticks.left":"ticksChanged","option:tickFormats":"tickFormatsChanged","option:tickFormats.top":"tickFormatsChanged","option:tickFormats.right":"tickFormatsChanged","option:tickFormats.bottom":"tickFormatsChanged","option:tickFormats.left":"tickFormatsChanged"},n.prototype._sizeCanvas=function(){return this.canvas.attr({width:this.innerWidth(),height:this.innerHeight()}),this.canvas.style({width:this.innerWidth()/this.pixelRatio+"px",height:this.innerHeight()/this.pixelRatio+"px",top:this.margins.top+"px",left:this.margins.left+"px"})},n.prototype._buildAxes=function(){return this.svg.selectAll(".axis").remove(),this._prepareTimeAxes(),this._prepareRangeAxes()},n.prototype.setData=function(e){var t,n,i,r,o;for(i in this.data=[],o=[],e)r=e[i],n=Epoch.Util.copy(r),t=Math.max(0,r.values.length-this.options.historySize),n.values=r.values.slice(t),(t=["layer"]).push("category"+(1+(0|i))),null!=r.label&&t.push(Epoch.Util.dasherize(r.label)),n.className=t.join(" "),o.push(this.data.push(n));return o},n.prototype._offsetX=function(){return 0},n.prototype._prepareTimeAxes=function(){return this.hasAxis("bottom")&&(this.bottomAxis=this.svg.append("g").attr("class","x axis bottom canvas").attr("transform","translate("+(this.margins.left-1)+", "+(this.innerHeight()/this.pixelRatio+this.margins.top)+")")).append("path").attr("class","domain").attr("d","M0,0H"+(this.innerWidth()/this.pixelRatio+1)),this.hasAxis("top")&&(this.topAxis=this.svg.append("g").attr("class","x axis top canvas").attr("transform","translate("+(this.margins.left-1)+", "+this.margins.top+")")).append("path").attr("class","domain").attr("d","M0,0H"+(this.innerWidth()/this.pixelRatio+1)),this._resetInitialTimeTicks()},n.prototype._resetInitialTimeTicks=function(){var e,t,n,i,r;for(i=this.options.ticks.time,this._ticks=[],this._tickTimer=i,null!=this.bottomAxis&&this.bottomAxis.selectAll(".tick").remove(),null!=this.topAxis&&this.topAxis.selectAll(".tick").remove(),e=0,t=(r=this.data).length;e<t;e++)if(null!=(n=r[e]).values&&0<n.values.length){for(e=(t=[this.options.windowSize-1,n.values.length-1])[0],t=t[1];0<=e&&0<=t;)this._pushTick(e,n.values[t].time,!1,!0),e-=i,t-=i;break}return[]},n.prototype._prepareRangeAxes=function(){if(this.hasAxis("left")&&this.svg.append("g").attr("class","y axis left").attr("transform","translate("+(this.margins.left-1)+", "+this.margins.top+")").call(this.leftAxis()),this.hasAxis("right"))return this.svg.append("g").attr("class","y axis right").attr("transform","translate("+(this.width-this.margins.right)+", "+this.margins.top+")").call(this.rightAxis())},n.prototype.leftAxis=function(){var e,t;return t=this.options.ticks.left,e=d3.svg.axis().scale(this.ySvg()).orient("left").tickFormat(this.options.tickFormats.left),2===t?e.tickValues(this.extent(function(e){return e.y})):e.ticks(t)},n.prototype.rightAxis=function(){var e,t;return this.extent(function(e){return e.y}),t=this.options.ticks.right,e=d3.svg.axis().scale(this.ySvg()).orient("right").tickFormat(this.options.tickFormats.left),2===t?e.tickValues(this.extent(function(e){return e.y})):e.ticks(t)},n.prototype.hasAxis=function(e){return-1<this.options.axes.indexOf(e)},n.prototype.innerWidth=function(){return(this.width-(this.margins.left+this.margins.right))*this.pixelRatio},n.prototype.innerHeight=function(){return(this.height-(this.margins.top+this.margins.bottom))*this.pixelRatio},n.prototype._prepareEntry=function(e){return e},n.prototype._prepareLayers=function(e){return e},n.prototype._startTransition=function(){if(!0!==this.animation.active&&0!==this._queue.length)return this.trigger("transition:start"),this._shift(),this.animation.active=!0,this.animation.interval=setInterval(this.animationCallback,1e3/this.options.fps)},n.prototype._stopTransition=function(){var e,t,n,i;if(this.inTransition()){for(t=0,n=(i=this.data).length;t<n;t++)(e=i[t]).values.length>this.options.windowSize+1&&e.values.shift();return e=(t=[this._ticks[0],this._ticks[this._ticks.length-1]])[0],null!=(t=t[1])&&t.enter&&(t.enter=!1,t.opacity=1),null!=e&&e.exit&&this._shiftTick(),this.animation.frame=0,this.trigger("transition:end"),0<this._queue.length?this._shift():(this.animation.active=!1,clearInterval(this.animation.interval))}},n.prototype.inTransition=function(){return this.animation.active},n.prototype.push=function(e){return e=this._prepareLayers(e),this._queue.length>this.options.queueSize&&this._queue.splice(this.options.queueSize,this._queue.length-this.options.queueSize),this._queue.length!==this.options.queueSize&&(this._queue.push(e.map(function(e){return function(t){return e._prepareEntry(t)}}(this))),this.trigger("push"),this.inTransition()?void 0:this._startTransition())},n.prototype._shift=function(){var e,t,n;for(t in this.trigger("before:shift"),e=this._queue.shift(),n=this.data)n[t].values.push(e[t]);return this._updateTicks(e[0].time),this._transitionRangeAxes(),this.trigger("after:shift")},n.prototype._transitionRangeAxes=function(){if(this.hasAxis("left")&&this.svg.selectAll(".y.axis.left").transition().duration(500).ease("linear").call(this.leftAxis()),this.hasAxis("right"))return this.svg.selectAll(".y.axis.right").transition().duration(500).ease("linear").call(this.rightAxis())},n.prototype._animate=function(){if(this.inTransition())return++this.animation.frame===this.animation.duration&&this._stopTransition(),this.draw(this.animation.frame*this.animation.delta()),this._updateTimeAxes()},n.prototype.y=function(){return d3.scale.linear().domain(this.extent(function(e){return e.y})).range([this.innerHeight(),0])},n.prototype.ySvg=function(){return d3.scale.linear().domain(this.extent(function(e){return e.y})).range([this.innerHeight()/this.pixelRatio,0])},n.prototype.w=function(){return this.innerWidth()/this.options.windowSize},n.prototype._updateTicks=function(e){if((this.hasAxis("top")||this.hasAxis("bottom"))&&(++this._tickTimer%this.options.ticks.time||this._pushTick(this.options.windowSize,e,!0),!(0<=this._ticks[0].x-this.w()/this.pixelRatio)))return this._ticks[0].exit=!0},n.prototype._pushTick=function(e,t,n,i){if(null==n&&(n=!1),null==i&&(i=!1),this.hasAxis("top")||this.hasAxis("bottom"))return t={time:t,x:e*(this.w()/this.pixelRatio)+this._offsetX(),opacity:n?0:1,enter:!!n,exit:!1},this.hasAxis("bottom")&&((e=this.bottomAxis.append("g").attr("class","tick major").attr("transform","translate("+(t.x+1)+",0)").style("opacity",t.opacity)).append("line").attr("y2",6),e.append("text").attr("text-anchor","middle").attr("dy",19).text(this.options.tickFormats.bottom(t.time)),t.bottomEl=e),this.hasAxis("top")&&((e=this.topAxis.append("g").attr("class","tick major").attr("transform","translate("+(t.x+1)+",0)").style("opacity",t.opacity)).append("line").attr("y2",-6),e.append("text").attr("text-anchor","middle").attr("dy",-10).text(this.options.tickFormats.top(t.time)),t.topEl=e),i?this._ticks.unshift(t):this._ticks.push(t),t},n.prototype._shiftTick=function(){var e;if(0<this._ticks.length&&(null!=(e=this._ticks.shift()).topEl&&e.topEl.remove(),null!=e.bottomEl))return e.bottomEl.remove()},n.prototype._updateTimeAxes=function(){var e,t,n,i,r,o,a;if(this.hasAxis("top")||this.hasAxis("bottom")){for(t=(e=[this.animation.tickDelta(),1/this.options.fps])[0],e=e[1],a=[],i=0,r=(o=this._ticks).length;i<r;i++)(n=o[i]).x+=t,this.hasAxis("bottom")&&n.bottomEl.attr("transform","translate("+(n.x+1)+",0)"),this.hasAxis("top")&&n.topEl.attr("transform","translate("+(n.x+1)+",0)"),n.enter?n.opacity+=e:n.exit&&(n.opacity-=e),n.enter||n.exit?(this.hasAxis("bottom")&&n.bottomEl.style("opacity",n.opacity),this.hasAxis("top")?a.push(n.topEl.style("opacity",n.opacity)):a.push(void 0)):a.push(void 0);return a}},n.prototype.draw=function(e){return n.__super__.draw.call(this)},n.prototype.dimensionsChanged=function(){return n.__super__.dimensionsChanged.call(this),this.svg.attr("width",this.width).attr("height",this.height),this._sizeCanvas(),this._buildAxes(),this.draw(this.animation.frame*this.animation.delta())},n.prototype.axesChanged=function(){var e,t,n,r;for(t=0,n=(r=["top","right","bottom","left"]).length;t<n;t++)e=r[t],(null==this.options.margins||null==this.options.margins[e])&&(this.hasAxis(e)?this.margins[e]=i[e]:this.margins[e]=6);return this._sizeCanvas(),this._buildAxes(),this.draw(this.animation.frame*this.animation.delta())},n.prototype.ticksChanged=function(){return this._resetInitialTimeTicks(),this._transitionRangeAxes(),this.draw(this.animation.frame*this.animation.delta())},n.prototype.tickFormatsChanged=function(){return this._resetInitialTimeTicks(),this._transitionRangeAxes(),this.draw(this.animation.frame*this.animation.delta())},n.prototype.marginsChanged=function(){var e,t,n;if(null!=this.options.margins){for(e in n=this.options.margins)t=n[e],this.margins[e]=null==t?6:t;return this._sizeCanvas(),this.draw(this.animation.frame*this.animation.delta())}},n}(Epoch.Chart.Canvas),Epoch.Time.Stack=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype._prepareLayers=function(e){var t,n,i,r;for(i=n=0,r=e.length;i<r;i++)(t=e[i]).y0=n,n+=t.y;return e},n.prototype.setData=function(e){var t,i,r,o,a;for(n.__super__.setData.call(this,e),a=[],t=e=0,o=this.data[0].values.length;0<=o?e<o:e>o;t=0<=o?++e:--e)r=0,a.push(function(){var e,n,o,a;for(a=[],e=0,n=(o=this.data).length;e<n;e++)(i=o[e]).values[t].y0=r,a.push(r+=i.values[t].y);return a}.call(this));return a},n.prototype.extent=function(){var e,t,n,i,r,o,a,s;for(e=r=n=0,a=this.data[0].values.length;0<=a?r<a:r>a;e=0<=a?++r:--r){for(t=o=i=0,s=this.data.length;0<=s?o<s:o>s;t=0<=s?++o:--o)i+=this.data[t].values[e].y;i>n&&(n=i)}return[0,n]},n}(Epoch.Time.Plot)}.call(this),function(){var e={}.hasOwnProperty;Epoch.Time.Area=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Time.Stack),n.prototype.setStyles=function(e){if(e=null!=e.className?this.getStyles("g."+e.className.replace(/\s/g,".")+" path.area"):this.getStyles("g path.area"),this.ctx.fillStyle=e.fill,null!=e.stroke&&(this.ctx.strokeStyle=e.stroke),null!=e["stroke-width"])return this.ctx.lineWidth=e["stroke-width"].replace("px","")},n.prototype._drawAreas=function(e){var t,n,i,r,o,a,s,l,c,u;for(null==e&&(e=0),s=(a=[this.y(),this.w()])[0],a=a[1],u=[],n=l=c=this.data.length-1;0>=c?0>=l:0<=l;n=0>=c?++l:--l){for(r=this.data[n],this.setStyles(r),this.ctx.beginPath(),n=(o=[this.options.windowSize,r.values.length,this.inTransition()])[0],i=o[1],o=o[2];-2<=--n&&0<=--i;)t=[(n+1)*a+e,s((t=r.values[i]).y+t.y0)],o&&(t[0]+=a),n===this.options.windowSize-1?this.ctx.moveTo.apply(this.ctx,t):this.ctx.lineTo.apply(this.ctx,t);n=o?(n+3)*a+e:(n+2)*a+e,this.ctx.lineTo(n,this.innerHeight()),this.ctx.lineTo(this.width*this.pixelRatio+a+e,this.innerHeight()),this.ctx.closePath(),u.push(this.ctx.fill())}return u},n.prototype._drawStrokes=function(e){var t,n,i,r,o,a,s,l,c,u;for(null==e&&(e=0),s=(n=[this.y(),this.w()])[0],a=n[1],u=[],n=l=c=this.data.length-1;0>=c?0>=l:0<=l;n=0>=c?++l:--l){for(r=this.data[n],this.setStyles(r),this.ctx.beginPath(),n=(o=[this.options.windowSize,r.values.length,this.inTransition()])[0],i=o[1],o=o[2];-2<=--n&&0<=--i;)t=[(n+1)*a+e,s((t=r.values[i]).y+t.y0)],o&&(t[0]+=a),n===this.options.windowSize-1?this.ctx.moveTo.apply(this.ctx,t):this.ctx.lineTo.apply(this.ctx,t);u.push(this.ctx.stroke())}return u},n.prototype.draw=function(e){return null==e&&(e=0),this.clear(),this._drawAreas(e),this._drawStrokes(e),n.__super__.draw.call(this)},n}()}.call(this),function(){var e={}.hasOwnProperty;Epoch.Time.Bar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Time.Stack),n.prototype._offsetX=function(){return.5*this.w()/this.pixelRatio},n.prototype.setStyles=function(e){if(e=this.getStyles("rect.bar."+e.replace(/\s/g,".")),this.ctx.fillStyle=e.fill,this.ctx.strokeStyle=null==e.stroke||"none"===e.stroke?"transparent":e.stroke,null!=e["stroke-width"])return this.ctx.lineWidth=e["stroke-width"].replace("px","")},n.prototype.draw=function(e){var t,i,r,o,a,s,l,c,u,d,h,p,f;for(null==e&&(e=0),this.clear(),d=(o=[this.y(),this.w()])[0],u=o[1],h=0,p=(f=this.data).length;h<p;h++)if(0<(l=f[h]).values.length)for(this.setStyles(l.className),o=(a=[this.options.windowSize,l.values.length,this.inTransition()])[0],s=a[1],a=(c=a[2])?-1:0;--o>=a&&0<=--s;)t=(r=[o*u+e,(t=l.values[s]).y,t.y0])[0],i=r[1],r=r[2],c&&(t+=u),t=[t+1,d(i+r),u-2,this.innerHeight()-d(i)+.5*this.pixelRatio],this.ctx.fillRect.apply(this.ctx,t),this.ctx.strokeRect.apply(this.ctx,t);return n.__super__.draw.call(this)},n}()}.call(this),function(){var e={}.hasOwnProperty;Epoch.Time.Gauge=function(t){function n(e){this.options=null!=e?e:{},n.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,i)),this.value=this.options.value||0,"absolute"!==this.el.style("position")&&"relative"!==this.el.style("position")&&this.el.style("position","relative"),this.svg=this.el.insert("svg",":first-child").attr("width",this.width).attr("height",this.height).attr("class","gauge-labels"),this.svg.style({position:"absolute","z-index":"1"}),this.svg.append("g").attr("transform","translate("+this.textX()+", "+this.textY()+")").append("text").attr("class","value").text(this.options.format(this.value)),this.animation={interval:null,active:!1,delta:0,target:0},this._animate=function(e){return function(){return Math.abs(e.animation.target-e.value)<Math.abs(e.animation.delta)?(e.value=e.animation.target,clearInterval(e.animation.interval),e.animation.active=!1):e.value+=e.animation.delta,e.svg.select("text.value").text(e.options.format(e.value)),e.draw()}}(this),this.onAll(r)}var i,r;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Chart.Canvas),i={domain:[0,1],ticks:10,tickSize:5,tickOffset:5,fps:34,format:Epoch.Formats.percent},r={"option:domain":"domainChanged","option:ticks":"ticksChanged","option:tickSize":"tickSizeChanged","option:tickOffset":"tickOffsetChanged","option:format":"formatChanged"},n.prototype.update=function(e){if(this.animation.target=e,this.animation.delta=(e-this.value)/this.options.fps,!this.animation.active)return this.animation.interval=setInterval(this._animate,1e3/this.options.fps),this.animation.active=!0},n.prototype.push=function(e){return this.update(e)},n.prototype.radius=function(){return this.getHeight()/1.58},n.prototype.centerX=function(){return this.getWidth()/2},n.prototype.centerY=function(){return.68*this.getHeight()},n.prototype.textX=function(){return this.width/2},n.prototype.textY=function(){return.48*this.height},n.prototype.getAngle=function(e){var t,n;return(e-(t=(n=this.options.domain)[0]))/(n[1]-t)*(Math.PI+2*Math.PI/8)-Math.PI/2-Math.PI/8},n.prototype.setStyles=function(e){if(e=this.getStyles(e),this.ctx.fillStyle=e.fill,this.ctx.strokeStyle=e.stroke,null!=e["stroke-width"])return this.ctx.lineWidth=e["stroke-width"].replace("px","")},n.prototype.draw=function(){var e,t,i,r,o,a,s,l,c,u,d,h;for(i=(o=[this.centerX(),this.centerY(),this.radius()])[0],r=o[1],o=o[2],l=(s=[this.options.tickOffset,this.options.tickSize])[0],c=s[1],this.clear(),s=d3.scale.linear().domain([0,this.options.ticks]).range([-1.125*Math.PI,Math.PI/8]),this.setStyles(".epoch .gauge .tick"),this.ctx.beginPath(),e=d=0,h=this.options.ticks;0<=h?d<=h:d>=h;e=0<=h?++d:--d)e=s(e),t=(e=[Math.cos(e),Math.sin(e)])[0],a=e[1],e=t*(o-l)+i,u=a*(o-l)+r,t=t*(o-l-c)+i,a=a*(o-l-c)+r,this.ctx.moveTo(e,u),this.ctx.lineTo(t,a);return this.ctx.stroke(),this.setStyles(".epoch .gauge .arc.outer"),this.ctx.beginPath(),this.ctx.arc(i,r,o,-1.125*Math.PI,.125*Math.PI,!1),this.ctx.stroke(),this.setStyles(".epoch .gauge .arc.inner"),this.ctx.beginPath(),this.ctx.arc(i,r,o-10,-1.125*Math.PI,.125*Math.PI,!1),this.ctx.stroke(),this.drawNeedle(),n.__super__.draw.call(this)},n.prototype.drawNeedle=function(){var e,t,n;return e=(n=[this.centerX(),this.centerY(),this.radius()])[0],t=n[1],n=n[2],this.setStyles(".epoch .gauge .needle"),this.ctx.beginPath(),this.ctx.save(),this.ctx.translate(e,t),this.ctx.rotate(this.getAngle(this.value)),this.ctx.moveTo(4*this.pixelRatio,0),this.ctx.lineTo(-4*this.pixelRatio,0),this.ctx.lineTo(-1*this.pixelRatio,19-n),this.ctx.lineTo(1,19-n),this.ctx.fill(),this.setStyles(".epoch .gauge .needle-base"),this.ctx.beginPath(),this.ctx.arc(0,0,this.getWidth()/25,0,2*Math.PI),this.ctx.fill(),this.ctx.restore()},n.prototype.domainChanged=function(){return this.draw()},n.prototype.ticksChanged=function(){return this.draw()},n.prototype.tickSizeChanged=function(){return this.draw()},n.prototype.tickOffsetChanged=function(){return this.draw()},n.prototype.formatChanged=function(){return this.svg.select("text.value").text(this.options.format(this.value))},n}()}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Epoch.Time.Heatmap=function(e){function n(e){this.options=e,n.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,r)),this._setOpacityFunction(),this._setupPaintCanvas(),this.onAll(o)}var i,r,o;return t(n,e),r={buckets:10,bucketRange:[0,100],opacity:"linear",bucketPadding:2,paintZeroValues:!1,cutOutliers:!1},i={root:function(e,t){return Math.pow(e/t,.5)},linear:function(e,t){return e/t},quadratic:function(e,t){return Math.pow(e/t,2)},cubic:function(e,t){return Math.pow(e/t,3)},quartic:function(e,t){return Math.pow(e/t,4)},quintic:function(e,t){return Math.pow(e/t,5)}},o={"option:buckets":"bucketsChanged","option:bucketRange":"bucketRangeChanged","option:opacity":"opacityChanged","option:bucketPadding":"bucketPaddingChanged","option:paintZeroValues":"paintZeroValuesChanged","option:cutOutliers":"cutOutliersChanged"},n.prototype._setOpacityFunction=function(){return Epoch.isString(this.options.opacity)?(this._opacityFn=i[this.options.opacity],null==this._opacityFn?Epoch.exception("Unknown coloring function provided '"+this.options.opacity+"'"):void 0):Epoch.isFunction(this.options.opacity)?this._opacityFn=this.options.opacity:Epoch.exception("Unknown type for provided coloring function.")},n.prototype.setData=function(e){var t,i,r,o;for(n.__super__.setData.call(this,e),o=[],t=0,i=(r=this.data).length;t<i;t++)e=r[t],o.push(e.values=e.values.map(function(e){return function(t){return e._prepareEntry(t)}}(this)));return o},n.prototype._getBuckets=function(e){var t,n,i,r,o;for(r=e.time,o=[],t=0,i=this.options.buckets;0<=i?t<i:t>i;0<=i?++t:--t)o.push(0);for(n in r={time:r,max:0,buckets:o},t=(this.options.bucketRange[1]-this.options.bucketRange[0])/this.options.buckets,o=e.histogram)e=o[n],i=parseInt((n-this.options.bucketRange[0])/t),this.options.cutOutliers&&(0>i||i>=this.options.buckets)||(0>i?i=0:i>=this.options.buckets&&(i=this.options.buckets-1),r.buckets[i]+=parseInt(e));for(n=e=0,t=r.buckets.length;0<=t?e<t:e>t;n=0<=t?++e:--e)r.max=Math.max(r.max,r.buckets[n]);return r},n.prototype.y=function(){return d3.scale.linear().domain(this.options.bucketRange).range([this.innerHeight(),0])},n.prototype.ySvg=function(){return d3.scale.linear().domain(this.options.bucketRange).range([this.innerHeight()/this.pixelRatio,0])},n.prototype.h=function(){return this.innerHeight()/this.options.buckets},n.prototype._offsetX=function(){return.5*this.w()/this.pixelRatio},n.prototype._setupPaintCanvas=function(){return this.paintWidth=(this.options.windowSize+1)*this.w(),this.paintHeight=this.height*this.pixelRatio,this.paint=document.createElement("CANVAS"),this.paint.width=this.paintWidth,this.paint.height=this.paintHeight,this.p=Epoch.Util.getContext(this.paint),this.redraw(),this.on("after:shift","_paintEntry"),this.on("transition:end","_shiftPaintCanvas"),this.on("transition:end",(e=this,function(){return e.draw(e.animation.frame*e.animation.delta())}));var e},n.prototype.redraw=function(){var e,t;for(t=this.data[0].values.length,e=this.options.windowSize,this.inTransition()&&e++;0<=--t&&0<=--e;)this._paintEntry(t,e);return this.draw(this.animation.frame*this.animation.delta())},n.prototype._computeColor=function(e,t,n){return Epoch.Util.toRGBA(n,this._opacityFn(e,t))},n.prototype._paintEntry=function(e,t){var n,i,r,o,a,s,l,c,u,d,h,p,f,g,m;for(null==e&&(e=null),null==t&&(t=null),h=(o=[this.w(),this.h()])[0],s=o[1],null==e&&(e=this.data[0].values.length-1),null==t&&(t=this.options.windowSize),o=[],m=[],a=0,d=this.options.buckets;0<=d?a<d:a>d;0<=d?++a:--a)m.push(0);for(d=0,i=0,l=(u=this.data).length;i<l;i++){for(n in c=u[i],p=(a=this._getBuckets(c.values[e])).buckets)r=p[n],m[n]+=r;d+=a.max,r=this.getStyles("."+c.className.split(" ").join(".")+" rect.bucket"),a.color=r.fill,o.push(a)}for(n in c=t*h,this.p.clearRect(c,0,h,this.paintHeight),l=this.options.buckets,g=[],m){for(r=m[n],i=this._avgLab(o,n),p=u=0,f=o.length;p<f;p++)u+=(a=o[p]).buckets[n]/r*d;(0<r||this.options.paintZeroValues)&&(this.p.fillStyle=this._computeColor(r,u,i),this.p.fillRect(c,(l-1)*s,h-this.options.bucketPadding,s-this.options.bucketPadding)),g.push(l--)}return g},n.prototype._shiftPaintCanvas=function(){var e;return e=this.p.getImageData(this.w(),0,this.paintWidth-this.w(),this.paintHeight),this.p.putImageData(e,0,0)},n.prototype._avgLab=function(e,t){var n,i,r,o,a,s,l,c;for(a=(l=[0,0,0,0])[0],n=l[1],i=l[2],l=l[3],s=0,c=e.length;s<c;s++)null!=(r=e[s]).buckets[t]&&(l+=r.buckets[t]);for(o in e)s=null!=(r=e[o]).buckets[t]?0|r.buckets[t]:0,a+=(s/=l)*(r=d3.lab(r.color)).l,n+=s*r.a,i+=s*r.b;return d3.lab(a,n,i).toString()},n.prototype.draw=function(e){return null==e&&(e=0),this.clear(),this.ctx.drawImage(this.paint,e,0),n.__super__.draw.call(this)},n.prototype.bucketsChanged=function(){return this.redraw()},n.prototype.bucketRangeChanged=function(){return this._transitionRangeAxes(),this.redraw()},n.prototype.opacityChanged=function(){return this._setOpacityFunction(),this.redraw()},n.prototype.bucketPaddingChanged=function(){return this.redraw()},n.prototype.paintZeroValuesChanged=function(){return this.redraw()},n.prototype.cutOutliersChanged=function(){return this.redraw()},n}(Epoch.Time.Plot)}.call(this),function(){var e={}.hasOwnProperty;Epoch.Time.Line=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,Epoch.Time.Plot),n.prototype.setStyles=function(e){return e=this.getStyles("g."+e.replace(/\s/g,".")+" path.line"),this.ctx.fillStyle=e.fill,this.ctx.strokeStyle=e.stroke,this.ctx.lineWidth=this.pixelRatio*e["stroke-width"].replace("px","")},n.prototype.y=function(){return d3.scale.linear().domain(this.extent(function(e){return e.y})).range([this.innerHeight()-this.pixelRatio/2,this.pixelRatio])},n.prototype.draw=function(e){var t,i,r,o,a,s,l,c,u,d;for(null==e&&(e=0),this.clear(),l=(i=[this.y(),this.w()])[0],s=i[1],c=0,u=(d=this.data).length;c<u;c++)if(0<(o=d[c]).values.length){for(this.setStyles(o.className),this.ctx.beginPath(),i=(a=[this.options.windowSize,o.values.length,this.inTransition()])[0],r=a[1],a=a[2];-2<=--i&&0<=--r;)t=[(i+1)*s+e,l((t=o.values[r]).y)],a&&(t[0]+=s),i===this.options.windowSize-1?this.ctx.moveTo.apply(this.ctx,t):this.ctx.lineTo.apply(this.ctx,t);this.ctx.stroke()}return n.__super__.draw.call(this)},n}()}.call(this),function(){Epoch._typeMap={area:Epoch.Chart.Area,bar:Epoch.Chart.Bar,line:Epoch.Chart.Line,pie:Epoch.Chart.Pie,scatter:Epoch.Chart.Scatter,"time.area":Epoch.Time.Area,"time.bar":Epoch.Time.Bar,"time.line":Epoch.Time.Line,"time.gauge":Epoch.Time.Gauge,"time.heatmap":Epoch.Time.Heatmap}}.call(this),function(){null!=window.MooTools&&Element.implement("epoch",function(e){var t,n;return null==(t=(n=$$(this)).retrieve("epoch-chart")[0])&&(e.el=this,null==(t=Epoch._typeMap[e.type])&&Epoch.exception("Unknown chart type '"+e.type+"'"),n.store("epoch-chart",t=new t(e)),t.draw()),t})}.call(this),function(){var e;e=function(e){return e.fn.epoch=function(e){var t;return e.el=this.get(0),null==(t=this.data("epoch-chart"))&&(null==(t=Epoch._typeMap[e.type])&&Epoch.exception("Unknown chart type '"+e.type+"'"),this.data("epoch-chart",t=new t(e)),t.draw()),t}},null!=window.jQuery&&e(jQuery)}.call(this),function(){var e;e=function(e){var t,n,i;return n={},t=0,i=function(){return"epoch-chart-"+ ++t},e.extend(e.fn,{epoch:function(e){var t,r;return null!=(t=this.data("epoch-chart"))?n[t]:(e.el=this.get(0),null==(r=Epoch._typeMap[e.type])&&Epoch.exception("Unknown chart type '"+e.type+"'"),this.data("epoch-chart",t=i()),e=new r(e),n[t]=e,e.draw(),e)}})},null!=window.Zepto&&e(Zepto)}.call(this),define("epoch",["jquery","d3"],function(){}),define("js/data_linked_chart",["./data_linked_source_sink","jquery","epoch"],function(e,t){function n(e,n,i,r,o,a){console.dir(i),r=r||"1800px",o=o||10,a=a||function(e){return e};var s=document.createElement("h3");return s.innerHTML=n,e.appendChild(s),(s=document.createElement("div")).className="epoch category10",s.style.height="200px",s.style.width=r,s=e.appendChild(s),chartObject=t(s).epoch({type:"time.line",axes:["bottom","left"],margins:{left:75},data:i,windowSize:o,ticks:{time:Math.floor(o/2)},tickFormats:{left:a}})}function i(t,n,i){e.DataLinkedSink.prototype.constructor.call(this,n),this.title=t||"",i=i||[],this.refreshCount=0,this.startWindowSize=60,this.maxWindowSize=this.startWindowSize,this.charts={};for(var r=0;r<this.registers.length;r++){(a=i[r])||(a=this.registers[r].displayName),this.charts[a]={object:null,data:[],registers:[]}}var o=Math.floor(Date.now()/1e3);for(r=0;r<this.registers.length;r++){var a;(a=i[r])||(a=this.registers[r].displayName);var s=this.registers[r],l=this.charts[a];l.registers.push(s),l.data.push({label:s.displayName,values:[{time:o,y:0}]})}}return i.prototype=new e.DataLinkedSink,i.prototype.constructor=i,i.prototype.render=function(i){e.DataLinkedSink.prototype.render.call(this,i);var r=Math.floor(450)+"px";for(var o in this.charts){var a=this.charts[o],s=document.createElement("div");s=i.appendChild(s),t(s).css("display","inline-block"),a.object=n(s,o,a.data,r,this.startWindowSize,a.registers[0].displayFunction)}},i.prototype.refresh=function(t){e.DataLinkedSink.prototype.refresh.call(this,t),this.refreshCount++;var n=Math.floor(Date.now()/1e3);for(var i in this.charts){var r=this.charts[i],o=r.object.option("windowSize");r.object.update(r.data);for(var a=0;a<r.registers.length;a++){var s=r.registers[a];r.data[a].values.push({time:n,y:t[s.name]}),(1==this.refreshCount||r.data[a].values.length>this.maxWindowSize+1)&&r.data[a].values.shift()}this.refreshCount>=o&&this.maxWindowSize>o&&(r.object.option("windowSize",this.refreshCount-1),r.object.option("queueSize",2*this.refreshCount),r.object.option("historySize",4*this.refreshCount),r.object.option("ticks",{time:Math.floor(o/2)}));var l=[];for(a=0;a<r.registers.length;a++){s=r.registers[a];l.push({label:s.displayName,time:n,y:t[s.name]})}r.object.push(l)}},{DataLinkedCharts:i}}),define("js/stack_selector",[],function(){return{renderPackStackSelect:function(e,t,n,i,r){var o=null,a=(o=document.createElement("form"),n.appendChild(o));(o=document.createElement("div")).className="uk-button uk-form-select",o.id="packSelect",o.setAttribute("data-uk-form-select","");var s=a.appendChild(o);if((o=document.createElement("span")).id="packSelectText",s.appendChild(o),(o=document.createElement("i")).className="uk-icon-caret-down",o.id="packSelectArrow",s.appendChild(o),o=document.createElement("select"),t.packStackSelect=s.appendChild(o),!0===r){var l=document.createElement("option");l.text="Pack",l.value=-1,t.packStackSelect.appendChild(l)}for(var c=0;c<e;c++){var u=c+1;(l=document.createElement("option")).text="Stack "+u,l.value=c,t.packStackSelect.appendChild(l)}gbcIndex||(t.packStackSelect.value=0,$("#packSelect").hide()),t.packStackSelect.onchange=$.proxy(i,t)}}}),define("js/bms-legacy-api/lib/register_parse_helper",["./type_helpers","jquery"],function(e,t){var n={};function i(){this.componentA=null,this.componentB=null,this.registerA=null,this.registerB=null}return n["stack_safety.safe"]="Overall Safe",n["stack_safety.safetocharge"]="Safe to Charge",n["stack_safety.safetodischarge"]="Safe to Discharge",n["stack_fault_cell_hi.trig"]="High Cell Voltage Fault",n["stack_fault_cell_lo.trig"]="Low Cell Voltage Fault",n["stack_fault_voltage_hi.trig"]="High Stack Voltage Fault",n["stack_fault_voltage_lo.trig"]="Low Stack Voltage Fault",n["stack_fault_therm_hi.trig"]="High Temperature Fault",n["stack_fault_therm_lo.trig"]="Low Temperature Fault",n["stack_fault_current_hi.trig"]="High Current Fault",n["stack_fault_current_lo.trig"]="Low Current Fault",n["sc_fault_precharge.trig"]="Precharge Fault",n["sc_fault_linkbus_wdt.trig"]="LinkBus WDT Fault",n["sc_fault_linkbus_rx.trig"]="LinkBus RX Fault",n["sc_fault_stackbus_rxwdt.trig"]="StackBus RX WDT Fault",n["sc_fault_stackbus_txwdt.trig"]="StackBus TX WDT Fault",n["sc_fault_pi_afe_rx.trig"]="PI AFE RX Fault",n["sc_fault_pi_afe_wdt.trig"]="PI AFE WDT Fault",n["sc_linkbus.wdtstate"]="LinkBus WDT State",n["sc_stackbus.txwdtstate"]="StackBus TX WDT State",n["sc_stackbus.rxwdtstate"]="StackBus RX WDT State",n["pi_afe.wdt_expired_state"]="PI AFE WDT State",i.prototype.createLineItem=function(t,n,i,r,o,a){var s=t+"."+n,l=a[s];if(void 0===l)throw"Unable to determine a valid register type for "+s;return"IpAddress"===l&&(r=e.convertIntToIp(r)),{component:t,register:n,registerName:i,registerValue:r,registerIndex:parseInt(o),registerCount:0}},i.prototype.getNotation=function(e){var t=e.component;return e.registerCount>0?t+="["+e.registerIndex+":"+parseInt(parseInt(e.registerIndex)+parseInt(e.registerCount))+"]":t+="["+e.registerIndex+"]",t+="."+e.register+"="+e.registerValue+"\n"},i.prototype.getComponentNameFromRegisterResult=function(e){return e.split("[")[0]},i.prototype.getRegisterNameFromRegisterResult=function(e){return e.split(".")[1]},i.prototype.getIndexFromRegisterResult=function(e){return e.split("[")[1].split("]")[0]},i.prototype.getStartIndexFromRangeIndex=function(e){return e.split(":")[0]},i.prototype.getSimpleComponentAndRegisterName=function(e){var t=e;return-1!=e.indexOf("[")&&(t=e.replace(e.substring(e.indexOf("["),e.indexOf(".")+1),".")),t},i.prototype.setComponentAndRegisterPairs=function(e,t){this.componentA=this.getComponentNameFromRegisterResult(e),this.componentB=this.getComponentNameFromRegisterResult(t),this.registerA=this.getRegisterNameFromRegisterResult(e),this.registerB=this.getRegisterNameFromRegisterResult(t)},i.prototype.sortRegisterValues=function(e,t){if(this.setComponentAndRegisterPairs(e,t),this.componentA+this.registerA===this.componentB+this.registerB){var n=this.getIndexFromRegisterResult(e),i=this.getIndexFromRegisterResult(t);return-1!==n.indexOf(":")&&(n=this.getStartIndexFromRangeIndex(n)),-1!==i.indexOf(":")&&(i=this.getStartIndexFromRangeIndex(i)),parseInt(n)>parseInt(i)?1:parseInt(n)<parseInt(i)?-1:0}return this.componentA+this.registerA>this.componentB+this.registerB?1:this.componentA+this.registerA<this.componentB+this.registerB?-1:0},i.prototype.parseRegisterResultsToText=function(e,n){for(var i=Object.keys(e).sort(t.proxy(this.sortRegisterValues,this)),r="",o=[],a="",s="",l=void 0,c=[],u=null,d=null,h=0;h<i.length;h++){if(null===(c=i[h].match(/\[\d*\]/g)))throw"Encountered an invalid register entry "+i[h]+".  Unable to download configuration.";l=0===o.length?l:o[o.length-1],a=i[h].substring(0,i[h].indexOf("[")),s=i[h].substring(i[h].indexOf(".")+1),u=c[0].substring(1,c[0].length-1),d=e[i[h]],void 0===l||l.component!=a||l.register!=s||l.registerValue!=d?o.push(this.createLineItem(a,s,i[h],d,u,n)):l.registerCount+=1}for(h=0;h<o.length;h++)r+=this.getNotation(o[h]);return r},i.prototype.lookupDisplayName=function(e,t,i){var r=e+"."+i,o=e+"["+t+"]."+i;return r in n&&(o=o+"  ("+n[r]+")"),o},{RegisterParseHelper:i}}),define("js/details_tab",["jquery","./tab_base","./table_helper","./data_linked_source_sink","./data_linked_table","./data_linked_chart","./bms-legacy-api/lib/type_helpers","./stack_selector","./bms-legacy-api/lib/register_parse_helper"],function(e,t,n,r,o,a,s,l,c){var u=50,d=new c.RegisterParseHelper,h=[new r.DataLinkedRegister("pack_power[0].voltage","Pack Voltage",null,s.displayMiliVoltAsVolt),new r.DataLinkedRegister("pack_charge[0].soc","State of Charge",null,s.displayPercentage)],p=[new r.DataLinkedRegister("pack_power[0].current","Pack Current",null,s.displayMiliAmpAsAmp),new r.DataLinkedRegister("pack_charge[0].dod","Depth of Discharge",null,s.displaymAhrAsAhr),new r.DataLinkedRegister("pack_cell_stat_enabled[0].avg","Average Cell Voltage",null,s.displayMiliVoltAsVolt),new r.DataLinkedRegister("pack_cell_stat_enabled[0].max","Maximum Cell Voltage",null,s.displayMiliVoltAsVolt),new r.DataLinkedRegister("pack_cell_stat_enabled[0].min","Minimum Cell Voltage",null,s.displayMiliVoltAsVolt),new r.DataLinkedRegister("pack_therm_stat_enabled[0].avg","Average Temperature",null,s.displayTemperatureCelcius),new r.DataLinkedRegister("pack_therm_stat_enabled[0].max","Maximum Temperature",null,s.displayTemperatureCelcius),new r.DataLinkedRegister("pack_therm_stat_enabled[0].min","Minimum Temperature",null,s.displayTemperatureCelcius)],f=h.concat(p);function g(){a.DataLinkedCharts.prototype.constructor.call(this,"Summary Data",p,[null,null,"Cell Voltage Statistics","Cell Voltage Statistics","Cell Voltage Statistics","Thermistor Temperature Statistics","Thermistor Temperature Statistics","Thermistor Temperature Statistics"])}function m(){o.DataLinkedTable.prototype.constructor.call(this,"pack","",null,f)}g.prototype=new a.DataLinkedCharts,g.prototype.constructor=g,m.prototype=new o.DataLinkedTable,m.prototype.constructor=m;var v=[new r.DataLinkedRegister("pack_current_limit[0].charge_current_limit","Charge Limit"),new r.DataLinkedRegister("pack_current_limit[0].discharge_current_limit","Discharge Limit")];function _(e,t,n){var i=[e,t,n];r.DataLinkedSink.prototype.constructor.call(this,i),this.highThresholdRegister=e,this.lowThresholdRegister=t,this.avgThresholdRegister=n,this.highThreshold=null,this.lowThreshold=null,this.avgThreshold=null}function y(t,n,i){this.thresholdDisplayHelper=i;for(var a=[],l=0;l<t;l++){var c="cell["+(n+l)+"].voltage",d="cell["+(n+l)+"].installed",h=s.displayIntegerAsCellAddress(n+l)+" Voltage",p=e.proxy(this.thresholdDisplayHelper.displayMiliVoltAsVoltWithColours,this.thresholdDisplayHelper);a.push(new r.DataLinkedRegister(c,h,d,p))}o.DataLinkedGrid.prototype.constructor.call(this,"cell-voltage","",a);for(l=0;l<u;l++)this.rows.push("CI "+(l+1));for(l=0;l<16;l++)this.columns.push("Cell "+(l+1))}function b(){a.DataLinkedCharts.prototype.constructor.call(this,"Current Limiter",v,["Current Limiter","Current Limiter"])}function w(){o.DataLinkedTable.prototype.constructor.call(this,"current-limiter","",null,v)}function k(e){o.DataLinkedTable.prototype.constructor.call(this,"safety","",null,function(e){var t=[];t.push(new r.DataLinkedRegister("pack_safety[0].safe","Overall Safe",null,s.displayIntegerAsSafetyBoolean));var n=M(e,["gbc_fault_","pack_fault_"],0),i=M(e,["gbc_warn_","pack_warn_"],0);return t=t.concat(n,i)}(e))}function x(e){return[new r.DataLinkedRegister("stack_power["+e+"].current","Stack Current",null,s.displayMiliAmpAsAmp),new r.DataLinkedRegister("stack_soc["+e+"].dod","Depth of Discharge",null,s.displaymAhrAsAhr),new r.DataLinkedRegister("stack_cell_stat["+e+"].avg","Average Cell Voltage",null,s.displayMiliVoltAsVolt),new r.DataLinkedRegister("stack_cell_stat["+e+"].max","Maximum Cell Voltage",null,s.displayMiliVoltAsVolt),new r.DataLinkedRegister("stack_cell_stat["+e+"].min","Minimum Cell Voltage",null,s.displayMiliVoltAsVolt),new r.DataLinkedRegister("stack_therm_stat["+e+"].avg","Average Temperature",null,s.displayTemperatureCelcius),new r.DataLinkedRegister("stack_therm_stat["+e+"].max","Maximum Temperature",null,s.displayTemperatureCelcius),new r.DataLinkedRegister("stack_therm_stat["+e+"].min","Minimum Temperature",null,s.displayTemperatureCelcius)]}function C(e){a.DataLinkedCharts.prototype.constructor.call(this,"Summary Data",x(e),[null,null,"Cell Voltage Statistics","Cell Voltage Statistics","Cell Voltage Statistics","Thermistor Temperature Statistics","Thermistor Temperature Statistics","Thermistor Temperature Statistics"])}function T(e){var t=function(e){return[new r.DataLinkedRegister("stack_power["+e+"].voltage","Stack Voltage",null,s.displayMiliVoltAsVolt),new r.DataLinkedRegister("stack_soc["+e+"].soc","State of Charge",null,s.displayPercentage)].concat(x(e))}(e);o.DataLinkedTable.prototype.constructor.call(this,"stack","",null,t)}function S(e){return[new r.DataLinkedRegister("stack_current_limit["+e+"].charge_current_limit","Charge Limit"),new r.DataLinkedRegister("stack_current_limit["+e+"].discharge_current_limit","Discharge Limit"),new r.DataLinkedRegister("stack_cell_summary_stat["+e+"].nbal","Balancing Count")]}function D(e){a.DataLinkedCharts.prototype.constructor.call(this,"Current Limiter",S(e),["Current Limiter","Current Limiter",null])}function A(e){o.DataLinkedTable.prototype.constructor.call(this,"stack-current-limiter","",null,S(e))}function M(e,t,n){var o=[],a=[];for(key in e)for(i=0;i<t.length;i++)0===e[key].name.indexOf(t[i])&&-1===o.indexOf(e[key].name)&&(o.push(e[key].name),a.push(new r.DataLinkedRegister(e[key].name+"["+n+"].trig",d.lookupDisplayName(e[key].name,n,"trig"),null,s.displayIntegerAsFaultBoolean)),a.push(new r.DataLinkedRegister(e[key].name+"["+n+"].initialized",d.lookupDisplayName(e[key].name,n,"initialized"),null,s.displayIntegerAsYesNo)));return a}function E(e){o.DataLinkedTable.prototype.constructor.call(this,"stack-addressing","",["Network","Address"],function(e){return[new r.DataLinkedRegister("sc_ethernet["+e+"].ip_address","IP",null,s.convertIntToIp),new r.DataLinkedRegister("sc_modbus_rtu["+e+"].device_address","Modbus RTU"),new r.DataLinkedRegister("sc_canbus["+e+"].base_can_address","CAN")]}(e))}function I(e,t){o.DataLinkedTable.prototype.constructor.call(this,"stack-safety","",null,function(e,t){var n=[];n.push(new r.DataLinkedRegister("stack_safety["+e+"].safe",d.lookupDisplayName("stack_safety",e,"safe"),null,s.displayIntegerAsSafetyBoolean)),n.push(new r.DataLinkedRegister("stack_safety["+e+"].safetocharge",d.lookupDisplayName("stack_safety",e,"safetocharge"),null,s.displayIntegerAsSafetyBoolean)),n.push(new r.DataLinkedRegister("stack_safety["+e+"].safetodischarge",d.lookupDisplayName("stack_safety",e,"safetodischarge"),null,s.displayIntegerAsSafetyBoolean)),n.push(new r.DataLinkedRegister("stack_safety["+e+"].initialized",d.lookupDisplayName("stack_safety",e,"initialized"),null,s.displayIntegerAsYesNo));var i=M(t,["sc_fault_","stack_fault_","pi_fault_"],e),o=M(t,["sc_warn_","stack_warn_","pi_warn_"],e);return n=n.concat(i,o)}(e,t))}function R(t,n,i){this.thresholdDisplayHelper=i;for(var a=[],l=0;l<t;l++){var c="therm["+(n+l)+"].temperature",d="therm["+(n+l)+"].installed",h=s.displayIntegerAsThermistorAddress(n+l)+" Temperature",p=e.proxy(this.thresholdDisplayHelper.displayTemperatureCelciusWithColours,this.thresholdDisplayHelper);a.push(new r.DataLinkedRegister(c,h,d,p))}o.DataLinkedGrid.prototype.constructor.call(this,"therm-temp","",a);for(l=0;l<u;l++)this.rows.push("CI "+(l+1));for(l=0;l<8;l++)this.columns.push("Index "+(l+1))}function P(e){t.Tab.prototype.constructor.call(this),this.statusDiv=null,this.isStarted=!1,this.dataRefreshPeriod=1e3,this.api=e,this.stackFaultsLookup={"stack_safety.clear_faults":1,"stack_safety.clear_warnings":1},this.packFaultsLookup={"pack_safety.clear_faults":1,"pack_safety.clear_warnings":1},this.clearFaultsButton=null,this.aboveButton=null,this.belowButton=null,this.cellVoltageFilterInput=null}return _.prototype=new r.DataLinkedSink,_.prototype.constructor=_,_.prototype.refresh=function(e){this.highThreshold=e[this.highThresholdRegister.name],this.lowThreshold=e[this.lowThresholdRegister.name],this.avgThreshold=e[this.avgThresholdRegister.name]},_.prototype.displayWithColours=function(t,n,i){var r="";(t>=this.highThreshold||t<=this.lowThreshold)&&(r="color: red");var o=n(t),a="true"==e("#"+i+"-outlier-button-above").attr("data-clicked"),s="true"==e("#"+i+"-outlier-button-below").attr("data-clicked");if(a||s){var l=e("#"+i+"-outlier-text-input").val()*("cell-voltage"==i?1e3:1);r+=a&&t>l||s&&t<l?"; font-weight: bold":"; opacity: 0.4"}return'<span class="'+i+'-reading" style="'+r+'">'+o+"</span>"},_.prototype.displayMiliVoltAsVoltWithColours=function(t){return"false"==e("#cell-voltage-outlier-text-input").attr("data-dirty")&&e("#cell-voltage-outlier-text-input").val(Math.round(this.avgThreshold/100)/10),this.displayWithColours(t,s.displayMiliVoltAsVolt,"cell-voltage")},_.prototype.displayTemperatureCelciusWithColours=function(t){return"false"==e("#therm-temp-outlier-text-input").attr("data-dirty")&&e("#therm-temp-outlier-text-input").val(this.avgThreshold),this.displayWithColours(t,s.displayTemperatureCelcius,"therm-temp")},y.prototype=new o.DataLinkedGrid,y.prototype.constructor=y,b.prototype=new a.DataLinkedCharts,b.prototype.constructor=b,w.prototype=new o.DataLinkedTable,w.prototype.constructor=w,k.prototype=new o.DataLinkedTable,k.prototype.constructor=k,C.prototype=new a.DataLinkedCharts,C.prototype.constructor=C,T.prototype=new o.DataLinkedTable,T.prototype.constructor=T,D.prototype=new a.DataLinkedCharts,D.prototype.constructor=D,A.prototype=new o.DataLinkedTable,A.prototype.constructor=A,E.prototype=new o.DataLinkedTable,E.prototype.constructor=E,I.prototype=new o.DataLinkedTable,I.prototype.constructor=I,R.prototype=new o.DataLinkedGrid([]),R.prototype.constructor=R,P.prototype=new t.Tab,P.prototype.constructor=P,P.prototype.clearFaults=function(){-1==this.packStackSelect.value?this.api.writeBmsRegisters(this.packFaultsLookup,function(){},function(e){console.error(e)}):this.api.writeBmsRegisters(this.stackFaultsLookup,function(){},function(e){console.error(e)})},P.prototype.faultResetButtonClick=function(){this.clearFaults()},P.prototype.filterInputChange=function(t){e("#"+t+"-outlier-text-input").attr("data-dirty",!0),"false"==e("#"+t+"-outlier-button-off").attr("data-clicked")&&("true"==e("#"+t+"-outlier-button-above").attr("data-clicked")?this.aboveButtonClick(t):"true"==e("#"+t+"-outlier-button-below").attr("data-clicked")&&this.belowButtonClick(t))},P.prototype.offButtonClick=function(t){"false"==e("#"+t+"-outlier-button-off").attr("data-clicked")&&(this.setFilterButtonsStates(t,!0,!1,!1,!1),e("."+t+"-reading").each(function(t,n){e(n).css("font-weight","normal"),e(n).css("opacity","1.0")}))},P.prototype.aboveButtonClick=function(t){"false"==e("#"+t+"-outlier-button-above").attr("data-clicked")&&(this.setFilterButtonsStates(t,!1,!0,!1,!0),this.highlightCellVoltages(t))},P.prototype.belowButtonClick=function(t){"false"==e("#"+t+"-outlier-button-below").attr("data-clicked")&&(this.setFilterButtonsStates(t,!1,!1,!0,!0),this.highlightCellVoltages(t))},P.prototype.setFilterButtonsStates=function(t,n,i,r,o){this.setFilterButtonState(t,"off",n),this.setFilterButtonState(t,"above",i),this.setFilterButtonState(t,"below",r),!0===o?e("#"+t+"-filter-input-span").show():e("#"+t+"-filter-input-span").hide()},P.prototype.setFilterButtonState=function(t,n,i){e("#"+t+"-outlier-button-"+n).attr("data-clicked",i),!0===i?e("#"+t+"-outlier-button-"+n).addClass("uk-active"):e("#"+t+"-outlier-button-"+n).removeClass("uk-active")},P.prototype.highlightCellVoltages=function(t){var n="true"==e("#"+t+"-outlier-button-above").attr("data-clicked"),i="true"==e("#"+t+"-outlier-button-below").attr("data-clicked"),r=(this.highlightCellVoltage,e("#"+t+"-outlier-text-input").val()*("cell-voltage"==t?1e3:1));e("."+t+"-reading").each(function(o,a){var s=e(a).text().substring(0,e(a).text().length-1)*("cell-voltage"==t?1e3:1);n&&s>r||i&&s<r?(e(a).css("font-weight","bold"),e(a).css("opacity","1.0")):(e(a).css("font-weight","normal"),e(a).css("opacity","0.4"))})},P.prototype.accordionOnClick=function(e,t,n,i){for(var r in this.accordionObjects){var o=this.accordionObjects[r];if(o.navElement==n[0]){t?(o.showSpinner=!0,o.isVisible=!0,this.poll(o),n.find(".accordion-icon").removeClass("uk-icon-caret-right").addClass("uk-icon-caret-down"),n.find("[id$=datestamp]").show()):(o.isVisible=!1,n.find(".accordion-icon").removeClass("uk-icon-caret-down").addClass("uk-icon-caret-right"),n.find("[id$=datestamp]").hide());break}}},P.prototype.scheduleNextPoll=function(e){this.isVisible&&e.isVisible&&setTimeout(this.poll.bind(this,e),this.dataRefreshPeriod)},P.prototype.poll=function(e){e.pollInProgress||(e.pollInProgress=!0,e.dataSource.refresh(this.successRefreshResult.bind(this,e),this.errorRefreshResult.bind(this,e)))},P.prototype.successRefreshResult=function(t){datestamp=e("#"+t.name.replace(" ","-").toLowerCase()+"-datestamp").html("Last update: "+(new Date).toString()),t.isVisible&&datestamp.show(),t.pollInProgress=!1,this.scheduleNextPoll(t)},P.prototype.errorRefreshResult=function(t){datestamp=e("#"+t.name.replace(" ","-").toLowerCase()+"-datestamp").html('<span style="color: red">Error - Last update: '+(new Date).toString()+"</span>"),t.isVisible&&datestamp.show(),t.pollInProgress=!1,this.scheduleNextPoll(t)},P.prototype.startRefresh=function(){for(var e in this.isVisible=!0,this.accordionObjects){var t=this.accordionObjects[e];t.isVisible&&this.poll(t)}},P.prototype.stopRefresh=function(){this.isVisible=!1},P.prototype.stackPackSelectOnChange=function(){for(var e in this.accordionObjects)this.accordionObjects[e].isVisible=!1;this.renderDetailsElements()},P.prototype.renderDetailsElements=function(){e(this.accordionDiv).toggle("fade"),this.accordionDiv.innerHTML="",this.createAccordionObjects(),this.renderAccordion(this.accordionDiv),e(this.accordionDiv).toggle("fade")},P.prototype.startSpin=function(t){var n=this;return function(){for(var i in n.accordionObjects)if(n.accordionObjects[i].name===t){n.accordionObjects[i].showSpinner&&(e("#"+t.replace(" ","-").toLowerCase()+"-spinner").show(),n.accordionObjects[i].showSpinner=!1);break}}},P.prototype.stopSpin=function(t){return function(){e("#"+t.replace(" ","-").toLowerCase()+"-spinner").hide()}},P.prototype.createAccordionObjects=function(){var e=[];if(-1==this.packStackSelect.value)this.batteryTable=new m,e.push(this.batteryTable),this.batteryChart=new g,e.push(this.batteryChart),this.batteryDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Battery"),this.stopSpin("Battery")),e=[],this.currentLimiterTable=new w,e.push(this.currentLimiterTable),this.currentLimiterGraph=new b,e.push(this.currentLimiterGraph),this.statsDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Current Limiter"),this.stopSpin("Current Limiter")),e=[],this.safetyTable=new k(this.api.nameResolver.registerMap),e.push(this.safetyTable),this.safetyDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Safety"),this.stopSpin("Safety"));else{var t=this.packStackSelect.value;this.addressingTable=new E(t),e.push(this.addressingTable),this.addressingDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Addressing"),this.stopSpin("Addressing")),e=[],this.batteryTable=new T(t),e.push(this.batteryTable),this.batteryChart=new C(t),e.push(this.batteryChart),this.batteryDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Battery"),this.stopSpin("Battery")),e=[],this.currentLimiterTable=new A(t),e.push(this.currentLimiterTable),this.currentLimiterGraph=new D(t),e.push(this.currentLimiterGraph),this.statsDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Current Limiter"),this.stopSpin("Current Limiter")),e=[],this.safetyTable=new I(t,this.api.nameResolver.registerMap),e.push(this.safetyTable),this.safetyDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Safety"),this.stopSpin("Safety"))}e=[];var n=new _(new r.DataLinkedRegister("stack_fault_cell_hi[0].thresh"),new r.DataLinkedRegister("stack_fault_cell_lo[0].thresh"),new r.DataLinkedRegister("stack_cell_stat[0].avg"),"cell-voltage");e.push(n),this.cellVoltagesTable=new y(800,800*parseInt(this.packStackSelect.value),n),e.push(this.cellVoltagesTable),this.cellsDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Cell Voltages"),this.stopSpin("Cell Voltages")),e=[];var i=new _(new r.DataLinkedRegister("stack_fault_discharge_therm_hi[0].thresh"),new r.DataLinkedRegister("stack_fault_discharge_therm_lo[0].thresh"),new r.DataLinkedRegister("stack_therm_stat[0].avg"),"therm-temp");e.push(i),this.thermTemperaturesTable=new R(400,400*parseInt(this.packStackSelect.value),i),e.push(this.thermTemperaturesTable),this.thermsDataSource=new r.DataLinkedSource(this.api,e,this.startSpin("Thermistor Temperatures"),this.stopSpin("Thermistor Temperatures")),this.accordionObjects=[],-1!=this.packStackSelect.value&&this.accordionObjects.push({name:"Addressing",dataSource:this.addressingDataSource,parent:null,navElement:null,contentElement:null,clearFaultsButton:!1,showSpinner:!0,pollInProgress:!1}),this.accordionObjects.push({name:"Battery",dataSource:this.batteryDataSource,parent:null,navElement:null,contentElement:null,clearFaultsButton:!1,showSpinner:!0,pollInProgress:!1}),this.accordionObjects.push({name:"Current Limiter",dataSource:this.statsDataSource,parent:null,navElement:null,contentElement:null,clearFaultsButton:!1,showSpinner:!0,pollInProgress:!1}),this.accordionObjects.push({name:"Safety",dataSource:this.safetyDataSource,parent:null,navElement:null,contentElement:null,clearFaultsButton:!0,showSpinner:!0,pollInProgress:!1}),-1!=this.packStackSelect.value&&(this.accordionObjects.push({name:"Cell Voltages",dataSource:this.cellsDataSource,parent:null,navElement:null,clearFaultsButton:!1,showSpinner:!0,pollInProgress:!1}),this.accordionObjects.push({name:"Thermistor Temperatures",dataSource:this.thermsDataSource,parent:null,navElement:null,clearFaultsButton:!1,showSpinner:!0,pollInProgress:!1}))},P.prototype.renderClearFaultsButton=function(t){var n=null;(n=document.createElement("button")).id=this.id+"-clear-faults-button",n.innerHTML="Clear Faults and Warnings",n.className="uk-button",this.clearFaultsButton=t.appendChild(n),this.clearFaultsButton.onclick=e.proxy(this.faultResetButtonClick,this)},P.prototype.renderAccordion=function(t){var n=n=document.createElement("div"),i=t.appendChild(n);for(var r in i.className="uk-accordion",i.setAttribute("data-uk-accordion","{collapse: false, showfirst: false}"),e(i).on({"toggle.uk.accordion":function(e,t,n,i){this.accordionOnClick(e,t,n,i)}.bind(this)}),this.accordionObjects){var o=this.accordionObjects[r],a=o.name.replace(" ","-").toLowerCase();o.parent=i,(n=document.createElement("h3")).id="details-accordion-"+a,n.className="uk-accordion-title",n.appendChild(document.createTextNode(o.name)),o.navElement=i.appendChild(n),n.innerHTML='<div><div class="accordion-title"><span class="accordion-icon uk-icon-caret-right"></span> '+o.name+'<span id="'+a+'-spinner" class="uk-icon-spin uk-icon-refresh accordion-spinner"></span></div><div class="accordion-service-mode-message">Not valid during Service Lockout</div><div><span class="accordion-last-update"><span id="'+a+'-datestamp" class="update-datestamp"></span></span>',o.navElement=i.appendChild(n),(n=document.createElement("div")).className="uk-accordion-content","Cell Voltages"==o.name?this.addFilters(n,"cell-voltage","0.0","V"):"Thermistor Temperatures"==o.name&&this.addFilters(n,"therm-temp","0","&deg;C"),n=i.appendChild(n),o.dataSource.render(n),o.clearFaultsButton&&this.renderClearFaultsButton(n),e("#"+a+"-datestamp").hide()}e(".accordion-spinner").hide()},P.prototype.addFilters=function(t,n,i,r){var o=document.createElement("form");o.id=n+"-form",o.className="uk-form";var a=document.createElement("fieldset");a.innerHTML+="Filter:&nbsp;";var s,l=document.createElement("div");l.id=n+"-filter-buttons",l.className="filter-button-div",(s=document.createElement("button")).type="button",s.id=n+"-outlier-button-off",s.className="uk-button filter-button uk-active",s.setAttribute("data-clicked",!1),s.innerHTML="Off",this.aboveButton=l.appendChild(s),this.aboveButton.onclick=e.proxy(this.offButtonClick,this,n),(s=document.createElement("button")).type="button",s.id=n+"-outlier-button-above",s.className="uk-button filter-button",s.setAttribute("data-clicked",!1),s.innerHTML="Above",this.aboveButton=l.appendChild(s),this.aboveButton.onclick=e.proxy(this.aboveButtonClick,this,n),(s=document.createElement("button")).type="button",s.id=n+"-outlier-button-below",s.className="uk-button filter-button",s.setAttribute("data-clicked",!1),s.innerHTML="Below",this.belowButton=l.appendChild(s),this.belowButton.onclick=e.proxy(this.belowButtonClick,this,n),a.appendChild(l),(s=document.createElement("span")).innerHTML="&nbsp;",a.appendChild(s);var c=document.createElement("span");c.id=n+"-filter-input-span",(s=document.createElement("input")).type="text",s.id=n+"-outlier-text-input",s.className="uk-text-small",s.size="5",s.maxLength="20",s.defaultValue=i,s.setAttribute("data-dirty",!1),this.cellVoltageFilterInput=c.appendChild(s),this.cellVoltageFilterInput.oninput=e.proxy(this.filterInputChange,this,n),(s=document.createElement("span")).innerHTML="&nbsp;"+r,c.appendChild(s),a.appendChild(c),o.appendChild(a),t.appendChild(o)},P.prototype.render=function(e,n){t.Tab.prototype.render.call(this,e,n);var i=n,r=document.createElement("div");r.id="details-overlay",r.className="overlay",i.appendChild(r),gbcIndex&&((i=document.createElement("div")).id="packSelectContainer",this.parent.appendChild(i)),l.renderPackStackSelect(36,this,i,this.stackPackSelectOnChange,!0),this.parent.appendChild(document.createElement("br")),this.parent.appendChild(document.createElement("br")),this.accordionDiv=this.parent.appendChild(document.createElement("div")),this.renderDetailsElements(),this.statusDiv=this.parent.appendChild(document.createElement("div")),this.offButtonClick("cell-voltage"),this.offButtonClick("therm-temp")},{DetailsTab:P}});var JSONP_Callback=function(){};define("js/bms-legacy-api/lib/jsonrpc",["jquery"],function(e){function t(t){this.ipAddress=t,this.request=null,this.jsonRpcQueue=[],this.isInProgress=!1,this.rpcTimeout=2e3,this.requestId=1,window.JSONP_Callback=e.proxy(this.JsonCallbackPrivate,this)}return t.prototype.JsonError=function(){this.jsonRpcQueue[0].jsonErrorCallback&&this.jsonRpcQueue[0].jsonErrorCallback("JSON error"),this.jsonRpcQueue.shift(),this.SendNextJsonpRpc()},t.prototype.JsonpTimeout=function(){this.request.abort(),console.log("Request failed: Timeout"),this.JsonError()},t.prototype.JsonCallbackPrivate=function(e){this.jsonRpcQueue.length>0&&(e=JSON.parse(e),this.jsonRpcQueue[0].rpcObject.id!==e.id&&0!==e.id||(clearTimeout(this.jsonRpcQueue[0].timeout_id),this.jsonRpcQueue[0].jsonResultCallback(e.result),this.jsonRpcQueue.shift(),this.SendNextJsonpRpc()))},t.prototype.SendNextJsonpRpc=function(){if(this.jsonRpcQueue.length>0){this.isInProgress=!0;var t=this.jsonRpcQueue[0].rpcObject;this.jsonRpcQueue[0].timeout_id=setTimeout(e.proxy(this.JsonpTimeout,this),this.jsonRpcQueue[0].timeout);var n=this.ipAddress+"/api.jsonp";this.request=e.ajax({crossDomain:!0,contentType:"application/json",dataType:"jsonp",url:n,data:JSON.stringify(t)})}else this.isInProgress=!1},t.prototype.resetBms=function(t=function(){},n=function(){}){e.ajax({crossDomain:!0,url:this.ipAddress+"/reset"}).done(function(e,n,i){t()}).fail(function(e,t,i){n()})},t.prototype.ExecuteJsonpRpc=function(e,t,n,i,r=this.rpcTimeout){this.jsonRpcQueue.push(this.getRpcQueueEntry(e,t,n,i,r)),this.isInProgress||this.SendNextJsonpRpc()},t.prototype.getRpcQueueEntry=function(e,t,n,i,r){var o={method:e,params:t,id:this.requestId};return this.requestId+=1,{rpcObject:o,timeout_id:null,timeout:r,jsonResultCallback:n,jsonErrorCallback:i}},t.prototype.isMaxRequestSize=function(e,t){return this.ipAddress.length+e+t+300>=8e3},{JsonRpcClient:t}}),define("js/bms-legacy-api/lib/api",["./jsonrpc"],function(e){function t(e){this.jsonrpc=e}return t.prototype.readBmsRegisters=function(e,t,n,i,r,o=this.jsonrpc.rpcTimeout){var a=0,s=[],l=0,c=!1,u=[],d=encodeURI(JSON.stringify(this.jsonrpc.getRpcQueueEntry("readRegisters",[],function(){},function(){}))).length,h=0;function p(){++l==a&&(c?n("Register read error"):t(s),"function"==typeof r&&r())}function f(e){c=!0,p()}function g(e){for(var t=0;t<e.length;t++)s.push(e[t]);p()}"function"==typeof i&&i();for(var m=0;m<e.length;m++)u.push(e[m]),h+=e[m].toString().length+1,(this.jsonrpc.isMaxRequestSize(d,h)||u.length>=512)&&(a++,this.jsonrpc.ExecuteJsonpRpc("readRegisters",u,g,f,o),u=[],h=0);u.length>0&&(a++,this.jsonrpc.ExecuteJsonpRpc("readRegisters",u,g,f,o))},t.prototype.writeBmsRegisters=function(e,t,n,i,r=this.jsonrpc.rpcTimeout){var o=0,a=[],s=0,l=!1,c=[],u=encodeURI(JSON.stringify(this.jsonrpc.getRpcQueueEntry("writeRegisters",[],function(){},function(){}))).length,d=0;function h(){++s==o&&(l?i("Register write error"):n(a))}function p(e){l=!0,h()}function f(e){for(var t=0;t<e.length;t++)a.push(e[t]);h()}for(var g=0;g<e.length;g++)void 0===e[g]?console.log("Unable to locate address at index "+addressIndex):(c.push(e[g]),c.push(t[g]),d+=e[g].toString().length,d+=t[g].toString().length+8,(this.jsonrpc.isMaxRequestSize(u,d)||c.length>=512)&&(o++,this.jsonrpc.ExecuteJsonpRpc("writeRegisters",c,f,p,r),c=[],d=0));c.length>0&&(o++,this.jsonrpc.ExecuteJsonpRpc("writeRegisters",c,f,p,r))},t.prototype.resetBms=function(e,t){this.jsonrpc.resetBms(e,t)},t.prototype.getRegisterMap=function(e,t){this.jsonrpc.ExecuteJsonpRpc("getRegisterMap",[],e,t)},t.prototype.getVersion=function(e,t){this.jsonrpc.ExecuteJsonpRpc("getVersion",[],e,t)},{Api:t}}),define("js/bms-legacy-api/lib/name_resolver",[],function(){function e(){this.registerMap=[],this.registerTypeList={},this.registerStorageList={}}function t(e,t){var n={};for(var i in e){var r=e[i].name;for(var o in e[i].registers){var a=r+"."+e[i].registers[o].name;a in n||(n[a]=e[i].registers[o][t])}}return n}return e.prototype.setRegisterMap=function(e){this.registerMap=e,this.registerTypeList=t(e,"type"),this.registerStorageList=t(e,"storageType")},e.prototype.resolveNameToAddresses=function(e){var t={};try{var n=e.split("."),i=n[0],r=this.resolveComponentName(i);if(0==r.length)throw"Component name parsing error on name '"+e+"'";var o=this.resolveComponentInstances(i,r),a=this.resolveRegisterNameToIndex(r[0],n[1]);if(null==a)throw"Register name parser error on name '"+e+"'";for(var s=r[0].registers[a].name,l=parseInt(r[0].instanceCount),c=0;c<o.length;c++){var u=o[c],d=Math.floor(u/l);if(d>=r.length)throw"Register instance out of range";var h=r[d],p=h.name+"["+u+"]."+s,f=parseInt(h.baseAddress)+u%l*h.registers.length+a;t[p]=f}}catch(e){throw t=null,e}return t},e.prototype.resolveComponentName=function(e){var t=[],n=e,i=e.split("[");2==i.length&&(n=i[0]);for(var r=0;r<this.registerMap.length;r++)n.toLowerCase()==this.registerMap[r].name.toLowerCase()&&t.push(this.registerMap[r]);return t},e.prototype.resolveComponentInstances=function(e,t){var n=[],i=0,r=e.split("[");for(var o in t){var a=t[o];i+=parseInt(a.instanceCount)}if(2==r.length){var s=r[1].split("]")[0],l=s.split(":");if(l.length>=2&&l.length<=4){var c=parseInt(l[0]),u=parseInt(l[1]),d=i,h=0;l.length>=3&&(d=parseInt(l[2])),l.length>=4&&(i=d*parseInt(l[3]));for(var p=c;p<i;p++)n.push(p),p>=u+h*d&&(p=c+ ++h*d-1)}else if("*"==s)for(p=0;p<i;p++)n.push(p);else n.push(parseInt(s))}else n.push(0);return n},e.prototype.resolveRegisterNameToIndex=function(e,t){for(var n=null,i=0;i<e.registers.length;i++)if(e.registers[i].name.toLowerCase()==t.toLowerCase()){n=i;break}return n},{Resolver:e}}),define("js/bms-legacy-api/lib/named_api",["jquery","./api","./name_resolver"],function(e,t,n){function i(e,n){t.Api.prototype.constructor.call(this,e),this.nameResolver=n}return i.prototype=new t.Api,i.prototype.constructor=i,i.prototype.resolveNameList=function(e){for(var t=!0,n=null,i={},r=0;r<e.length;r++){var o=this.nameResolver.resolveNameToAddresses(e[r]);if(null==o){t=!1;break}for(var a in o){var s=o[a];i[a.toLowerCase()]=s}}return t&&(n=i),n},i.prototype.readBmsRegisters=function(e,n,i,r,o,a=this.jsonrpc.rpcTimeout){var s=0;try{var l=this.resolveNameList(e);if(null!=l){var c=[];for(var u in l)c.push(l[u]);!function(e){for(var t=[],n={},i=0;i<e.length;i++)n[e[i]]=0;for(var r in n)t.push(r)}(c),s=c.length,t.Api.prototype.readBmsRegisters.call(this,c,function(e){var t={},i=0;for(var r in l)t[r]=e[i],i++;n(t)},i,r,o,a)}}catch(e){i(e)}return s},i.prototype.writeBmsRegisters=function(e,n,i,r=this.jsonrpc.rpcTimeout){var o=0,a={},s={};try{for(var l in e){var c=this.nameResolver.resolveNameToAddresses(l);if(null==c){a=null;break}for(var u in c)a[u]=c[u],s[u]=e[l]}if(null!=a){var d=[],h=[];for(var p in a)d.push(a[p]),h.push(s[p]),o++;t.Api.prototype.writeBmsRegisters.call(this,d,h,function(e){var t={},i=0;for(var r in a)t[r]=e[i],i++;n(t)},i,r)}}catch(e){i(e)}return o},i.prototype.getRegisterMap=function(n,i){t.Api.prototype.getRegisterMap.call(this,e.proxy(function(e){this.nameResolver.setRegisterMap(e),n(e)},this),i)},{NamedApi:i}}),define("js/register_map_tab",["jquery","./tab_base","./table_helper","./bms-legacy-api/lib/named_api","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i,r){var o="uk-alert uk-alert-danger";function a(e){t.Tab.prototype.constructor.call(this),this.api=e,this.registerMap=null,this.registerMapTable=null,this.valueErrorMsg="A valid register value is required.",this.registerInfoPanel=null,this.componentBox=null,this.indexBox=null,this.registerBox=null,this.valueBox=null,this.readSubmitButton=null,this.writeSubmitButton=null,this.componentNameErrorMsg="A valid component name is required.",this.registerNameErrorMsg="A valid register name is required.",this.valueErrorMsg="A valid register value is required."}return a.prototype=new t.Tab,a.prototype.constructor=a,a.prototype.getUniqueRegisterMap=function(){var e=[],t=[];for(key in this.registerMap)-1===t.indexOf(this.registerMap[key].name)&&(t.push(this.registerMap[key].name),e.push(this.registerMap[key]));return e},a.prototype.renderRegisterMapNestedTables=function(){var t=this.getUniqueRegisterMap();grid=document.createElement("div"),this.registerMapTable=this.parent.appendChild(grid),this.componentLevelTable=e(this.registerMapTable).kendoGrid({dataSource:{data:t,schema:{model:{fields:{name:{type:"string"},description:{type:"string"},baseAddress:{type:"string",parse:function(e){return"0x"+parseInt(e).toString(16)}},instanceCount:{type:"number"}}}}},sortable:!0,detailInit:this.detailInit.bind(this),detailExpand:this.detailExpand.bind(this),columns:[{field:"name",title:"Component Name"},{field:"description",title:"Description"},{field:"baseAddress",title:"Base Address",sortable:{compare:function(e,t){return parseInt(e.baseAddress)-parseInt(t.baseAddress)}}},{field:"instanceCount",title:"Instance Count per Stack",sortable:{compare:function(e,t){return parseInt(e.instanceCount)-parseInt(t.instanceCount)}}}]}),this.wndElm=document.createElement("div"),this.windowContent=document.createElement("div"),this.descriptionMessage=document.createElement("div"),this.descriptionMessage.innerHTML="Enter the component index and optional value of the register to read or write:",this.windowContent.appendChild(this.descriptionMessage),this.windowContent.appendChild(document.createElement("br")),this.compElementSpan=document.createElement("span"),this.compElementSpan.innerHTML="comp",this.windowContent.appendChild(this.compElementSpan),this.regInput=document.createElement("input"),this.regInput.style.width="35px",this.regInput.style.textAlign="center",this.regInput.type="text",this.regInput.placeholder="index",this.windowContent.appendChild(this.regInput),this.regElementSpan=document.createElement("span"),this.regElementSpan.innerHTML="reg",this.windowContent.appendChild(this.regElementSpan),this.valueInput=document.createElement("input"),this.valueInput.style.margin="2px 0 2px 10px",this.valueInput.style.width="70px",this.valueInput.type="text",this.valueInput.placeholder="value",this.windowContent.appendChild(this.valueInput),this.windowContent.appendChild(document.createElement("br")),this.regButton=document.createElement("button"),this.regButton.style.margin="5px 0 5px 0",this.regButton.innerHTML="Read",this.windowContent.appendChild(this.regButton),this.writeButton=document.createElement("button"),this.writeButton.style.margin="5px 0 5px 0",this.writeButton.innerHTML="Write",this.windowContent.appendChild(this.writeButton),this.regContainer=document.createElement("div"),this.wndElm.appendChild(this.windowContent),this.wndElm.appendChild(this.regContainer)},a.prototype.detailInit=function(t){var n=document.createElement("div");t.detailCell[0].appendChild(n),this.registerTable=e(n).kendoGrid({dataSource:{data:t.data.registers,schema:{parse:function(e){for(var t=[],n=0;n<e.length;n++){var i={index:"0x"+n.toString(16),name:e[n].name,description:e[n].description,type:e[n].type,units:e[n].units,storageType:e[n].storageType};t.push(i)}return t}}},scrollable:!1,sortable:!0,columns:[{field:"index",title:"Register Offset",sortable:{compare:function(e,t){return parseInt(e.index)-parseInt(t.index)}}},{field:"name",title:"Register Name"},{field:"description",title:"Description"},{field:"type",title:"Type"},{field:"units",title:"Units"},{field:"storageType",title:"Storage"},{command:{text:"Edit",click:this.readRegister.bind(this)}}]}),this.wnd=e(this.wndElm).kendoWindow({title:"Edit Register",modal:!0,visible:!1,resizable:!1,maxHeight:400,close:e.proxy(function(t){this.regInput.value="",this.valueInput.value="",e(this.regButton).unbind("click"),e(this.writeButton).unbind("click"),e(document).unbind("click")},this)}).data("kendoWindow")},a.prototype.detailExpand=function(t){var n=this.componentLevelTable.data("kendoGrid");n.collapseRow(n.tbody.find(" > tr.k-master-row").not(t.masterRow)),this.registerTable=t.detailRow[0].children[1].children[0],this.compName=t.masterRow[0].children[1].innerText||t.masterRow[0].children[1].innerHTML;var i,r=t.detailRow,o=(this.componentLevelTable.find("tbody").offset().top,r.offset().top);i=void 0!==this.prevCompName&&this.prevCompName===this.compName?o:o-29,this.prevCompName=this.compName,e("html, body").animate({scrollTop:i})},a.prototype.readRegister=function(t){t.preventDefault();var n=e(this.registerTable).data("kendoGrid"),i=this.compName;this.dataItem=n.dataItem(e(t.currentTarget).closest("tr"));this.dataItem.name;this.compElementSpan.innerHTML=i.toLowerCase()+"[",this.regElementSpan.innerHTML="]."+this.dataItem.name.toLowerCase(),this.regContainer.innerHTML="",e(this.regButton).click(this.readRegisterButtonHandler.bind(this)),"locked"===e("#lock-img").data("lockedState")?this.writeButton.disabled=!0:(this.writeButton.disabled=!1,e(this.writeButton).click(this.writeRegisterButtonHandler.bind(this))),e(document).on("click",".k-overlay",e.proxy(function(){this.wnd.close()},this)),this.wnd.center().open()},a.prototype.readRegisterButtonHandler=function(){var t=this.regInput.value;""!==t&&(t="["+t+"]");var n=this.compName+t+"."+this.dataItem.name;this.api.readBmsRegisters([n],e.proxy(function(e){for(var t in this.regContainer.innerHTML="",this.regContainer.style.color="black",e){var n=document.createElement("div"),i=e[t];"IpAddress"===this.dataItem.type&&(i=r.convertIntToIp(i)),n.innerHTML=t+"= "+i,this.regContainer.appendChild(n)}},this),e.proxy(function(e){this.regContainer.style.color="red",this.regContainer.innerHTML="Error: "+e},this))},a.prototype.writeRegisterButtonHandler=function(){var t=this.regInput.value;""!==t&&(t="["+t+"]");var n=this.compName+t+"."+this.dataItem.name,i=this.valueInput.value;"IpAddress"===this.dataItem.type&&(i=r.convertIpToInt(i));var o={};o[n]=i,""===i&&"String"!=this.dataItem.type?(this.regContainer.style.color="red",this.regContainer.innerHTML="",this.regContainer.innerHTML=this.valueErrorMsg):this.api.writeBmsRegisters(o,e.proxy(function(e){for(var t in this.regContainer.innerHTML="",this.regContainer.style.color="black",e){var n=document.createElement("div"),i=e[t];"IpAddress"===this.dataItem.type&&(i=r.convertIntToIp(i)),n.innerHTML=t+"= "+i,this.regContainer.appendChild(n)}},this),e.proxy(function(e){this.regContainer.style.color="red",this.regContainer.innerHTML="Error: "+e},this))},a.prototype.executeReadSubmit=function(){var t="";if(""==this.componentBox.value&&(t+=this.componentNameErrorMsg+"<br>"),""==this.registerBox.value&&(t+=this.registerNameErrorMsg),t)this.registerInfoPanel.className=o,this.registerInfoPanel.innerHTML="",this.registerInfoPanel.innerHTML+=t;else{""==this.indexBox.value&&(this.indexBox.value=0);var n=this.componentBox.value+"["+this.indexBox.value+"]."+this.registerBox.value;this.api.readBmsRegisters([n],e.proxy(function(e){for(var t in this.registerInfoPanel.className="uk-panel uk-panel-box",this.registerInfoPanel.innerHTML="",this.registerInfoPanel.innerHTML+="Name: "+n+"<br>",e)this.registerInfoPanel.innerHTML+=t+"="+e[t]+"<br>"},this),e.proxy(function(e){this.registerInfoPanel.className=o,this.registerInfoPanel.innerHTML="",this.registerInfoPanel.innerHTML+="Name: "+n+"<br>",this.registerInfoPanel.innerHTML+="Error: "+e},this))}},a.prototype.executeWriteSubmit=function(){var t=this.componentBox.value,n=this.registerBox.value,i="",r="";if(""==this.componentBox.value&&(i+=this.componentNameErrorMsg+"<br>"),""==this.registerBox.value&&(i+=this.registerNameErrorMsg+"<br>"),!i){var a=e(this.componentLevelTable).data("kendoGrid")._data.find(function(e){return e.name===t});if(void 0!=a)void 0!=(s=a.registers.find(function(e){return e.name===n}))&&(r=s.type)}if(""==this.valueBox.value&&"String"!=r&&(i+=this.valueErrorMsg),i)this.registerInfoPanel.className=o,this.registerInfoPanel.innerHTML="",this.registerInfoPanel.innerHTML+=i;else{""==this.indexBox.value&&(this.indexBox.value=0);var s,l={};l[s=this.componentBox.value+"["+this.indexBox.value+"]."+this.registerBox.value]=this.valueBox.value,this.api.writeBmsRegisters(l,e.proxy(function(e){for(var t in this.registerInfoPanel.className="uk-panel uk-panel-box",this.registerInfoPanel.innerHTML="",this.registerInfoPanel.innerHTML+="Name: "+s+"<br>",e)this.registerInfoPanel.innerHTML+=t+"="+e[t]+"<br>"},this),e.proxy(function(e){this.registerInfoPanel.className=o,this.registerInfoPanel.innerHTML="",this.registerInfoPanel.innerHTML+="Name: "+s+"<br>",this.registerInfoPanel.innerHTML+="Error: "+e},this))}},a.prototype.render=function(n,i){t.Tab.prototype.render.call(this,n,i);var r=null,o=null,a=null,s=null;(o=document.createElement("div")).id="register-map-tab-top-container",(a=document.createElement("div")).id="register-map-tab-left-container",(r=document.createElement("h2")).id=this.id+"-register-browser-header",r.innerHTML="Register Browser",r.className="register-map-tab-text register-map-tab-header",a.appendChild(r);var l=document.createElement("form");l.className="uk-form",l=a.appendChild(l),fieldset=document.createElement("fieldset"),fieldset.type="data-uk-margin",fieldset=l.appendChild(fieldset),(r=document.createElement("input")).id=this.id+"-component",r.type="text",r.placeholder="Component",this.componentBox=fieldset.appendChild(r),(r=document.createElement("input")).id=this.id+"-index",r.type="text",r.placeholder="Index",this.indexBox=fieldset.appendChild(r),(r=document.createElement("input")).id=this.id+"-register",r.type="text",r.placeholder="Register",this.registerBox=fieldset.appendChild(r),fieldset.appendChild(document.createElement("br")),fieldset.appendChild(document.createElement("br")),(r=document.createElement("input")).id=this.id+"-value",r.type="text",r.placeholder="Value",this.valueBox=fieldset.appendChild(r),a.appendChild(document.createElement("br")),(r=document.createElement("button")).id=this.id+"-read-submit",r.innerHTML="Read",r.className="uk-button",this.readSubmitButton=a.appendChild(r),(r=document.createElement("button")).id=this.id+"-write-submit",r.innerHTML="Write",r.className="uk-button disabled-on-lock",this.writeSubmitButton=a.appendChild(r),this.readSubmitButton.onclick=e.proxy(this.executeReadSubmit,this),this.writeSubmitButton.onclick=e.proxy(this.executeWriteSubmit,this),o.appendChild(a),(s=document.createElement("div")).id="register-map-tab-right-container",(r=document.createElement("h4")).id=this.id+"-register-info-header",r.innerHTML="Selected Register Information:",s.appendChild(r),(r=document.createElement("div")).id=this.id+"-info-panel",r.className="uk-panel uk-panel-box",this.registerInfoPanel=s.appendChild(r),o.appendChild(s),this.parent.appendChild(o),(r=document.createElement("h2")).id=this.id+"-register-map-header",r.innerHTML="Manual Register Configuration",r.className="register-map-tab-text register-map-tab-header",this.parent.appendChild(r);this.registerMap=this.api.nameResolver.registerMap,this.renderRegisterMapNestedTables()},{RegisterMapTab:a}}),define("js/version_helpers",[],function(){function e(e,t,n,i){this.major=e||0,this.minor=t||0,this.sub=n||0,this.hash=i||""}return e.prototype.compare=function(e){return this.major<e.major?1:this.major>e.major?-1:this.minor<e.minor?1:this.minor>e.minor?-1:this.sub<e.sub?1:this.sub>e.sub?-1:0},e.prototype.isGreaterThanOrEqualTo=function(e){return this.compare(e)<=0},e.prototype.isEqualTo=function(e){return 0==this.compare(e)},e.prototype.isGreaterThan=function(e){return this.compare(e)<0},e.prototype.isLessThan=function(e){return this.compare(e)>0},e.prototype.parseFromString=function(e){if(versionString="",null!=e){for(var t in e.indexOf(":")>-1?(hashVersion=e.split(":"),versionString=hashVersion[0],this.hash=hashVersion[1]):versionString=e,this.major=0,this.minor=0,this.sub=0,versionVals=versionString.split("."),versionVals)versionVals[t]=versionVals[t].replace(/\D/g,"");versionVals.length>0&&(this.major=parseInt(versionVals[0])),versionVals.length>1&&(this.minor=parseInt(versionVals[1])),versionVals.length>2&&(this.sub=parseInt(versionVals[2]))}},e.prototype.getVersionString=function(){return this.major.toString()+"."+this.minor.toString()+"."+this.sub.toString()},{VersionInfo:e}}),define("js/fw_upgrade",["./version_helpers","jquery"],function(e,t){function n(e,t){return"latest"==e?"fw_upgrade/"+t:"fw_upgrade/archive/fw/"+e+"/"+t}function i(e){this.array=e,this.index=0}function r(){}function o(e,t){this.api=e,this.fileStore=t,this.estimatedUploadTimeout=12e4,this.estimatedUpgradeTimeout=15e4,this.uploadTimeout=6e5,this.upgradeTimeout=6e5,this.pagePollTimeout=1e4,this.upgradeVersion="Unknown",this.callbacks={},this.clearCallbacks(),this.upgradeStartTime=0,this.timerPeriod=300,this.timerId=-1,this.upgradeTimeCount=0}function a(e,t){this.upgradeMap=e,this.jumpIterator=new i(e.upgrade_map.jumps),this.upgradeEntry=this.jumpIterator.value(),this.getNewImgIterator(t),this.imgEntry=this.imgIterator.value()}function s(e,t,n){this.domainString=e,this.api=t,this.fileStore=n,this.retryCount=0,this.maxRetries=3,this.imageUpgrade=new o(t,n),this.callbacks={},this.clearCallbacks()}return i.prototype.value=function(e){return this.array[this.index]},i.prototype.done=function(e){return this.array.length==this.index},i.prototype.next=function(e){this.done()||this.index++},r.prototype.getFwFilesFromUpgradeEntry=function(e,t,i){for(var r in e[t])for(var o in imgEntry=e[t][r],imgEntry)"type"!=o&&(archivedFile=n(e.version,imgEntry[o]),i.push(archivedFile))},r.prototype.getFwFiles=function(e){baseFileList=["fw_upgrade/version","fw_upgrade/upgrade_map"],fwFileLookup={},requirejs(baseFileList,t.proxy(function(){for(var t=0;t<arguments.length;t++)fwFileLookup[baseFileList[t]]=arguments[t];archivedFiles=[];var n=fwFileLookup["fw_upgrade/version"],i=fwFileLookup["fw_upgrade/upgrade_map"];for(var r in i.upgrade_map.jumps){var o=i.upgrade_map.jumps[r];this.getFwFilesFromUpgradeEntry(o,"img",archivedFiles),this.getFwFilesFromUpgradeEntry(o,"retry",archivedFiles)}archivedFiles.push("fw_upgrade/archive/fw/4.65.0/pi.bin"),archivedFiles.push("fw_upgrade/archive/internal/4.64.x_upgrade/upgrade_4.64.x.tar"),this.getFwFilesFromUpgradeEntry(i.upgrade_map.latest,"img",archivedFiles),requirejs(archivedFiles,function(){for(var t=0;t<arguments.length;t++)fwFileLookup[archivedFiles[t]]=arguments[t];e(n,i,fwFileLookup)})},this),function(e){alert(e)})},o.prototype.clearCallbacks=function(){this.callbacks.completeCallback=function(){},this.callbacks.errorCallback=function(){},this.callbacks.progressCallback=function(e){}},o.prototype.updateUpgradeDisplay=function(){var e=2*(this.estimatedUploadTimeout+this.estimatedUpgradeTimeout);this.upgradeTimeCount+=this.timerPeriod,progress=this.upgradeTimeCount/e,this.callbacks.progressCallback(progress)},o.prototype.uploadFailed=function(){clearInterval(this.timerId),errorCallback=this.callbacks.errorCallback,this.clearCallbacks(),errorCallback()},o.prototype.upgradeIncomplete=function(){(new Date).getTime()-this.upgradeStartTime<this.upgradeTimeout?this.checkUpgradeComplete():this.uploadFailed()},o.prototype.checkUpgradeComplete=function(){this.request=t.ajax({url:this.upgradeUrl,type:"GET",crossDomain:!0,processData:!1,contentType:!1,timeout:this.pagePollTimeout}),this.request.done(t.proxy(function(e){-1!==e.indexOf("Upgrade state: Unknown")?(clearInterval(this.timerId),completeCallback=this.callbacks.completeCallback,this.clearCallbacks(),completeCallback()):this.uploadFailed()},this)),this.request.fail(t.proxy(this.upgradeIncomplete,this))},o.prototype.uploadComplete=function(e){-1!==e.indexOf("File upload succeeded!")?this.checkUpgradeComplete():this.uploadFailed()},o.prototype.executeUpgradeWithBlobsAtVersion=function(e,n,i,r,o,a){this.upgradeVersion=n,this.upgradeStartTime=(new Date).getTime(),this.callbacks.completeCallback=r,this.callbacks.errorCallback=o,this.callbacks.progressCallback=a;var s=new FormData;for(var l in i){var c=i[l];s.append(l,c)}this.upgradeUrl=e+"/upload",this.request=t.ajax({url:this.upgradeUrl,type:"POST",data:s,crossDomain:!0,processData:!1,contentType:!1,timeout:this.uploadTimeout}),this.timerId=setInterval(t.proxy(this.updateUpgradeDisplay,this),this.timerPeriod),this.request.done(t.proxy(this.uploadComplete,this)),this.request.fail(t.proxy(this.uploadFailed,this))},a.prototype.getNewImgIterator=function(t){if(imageKey="img","latest"!=this.upgradeEntry.version){var n=new e.VersionInfo;n.parseFromString(this.upgradeEntry.version),n.isEqualTo(t)&&(imageKey="retry")}this.imgIterator=new i(this.upgradeEntry[imageKey])},a.prototype.next=function(e){this.imgIterator.next(),this.imgIterator.done()&&(this.jumpIterator.next(),this.jumpIterator.done()?"latest"!=this.upgradeEntry.version&&(this.upgradeEntry=this.upgradeMap.upgrade_map.latest,this.getNewImgIterator(e)):(this.upgradeEntry=this.jumpIterator.value(),this.getNewImgIterator(e))),this.imgEntry=this.imgIterator.value()},a.prototype.done=function(){return this.jumpIterator.done()&&this.imgIterator.done()},s.prototype.clearCallbacks=function(){this.callbacks.completeCallback=function(){},this.callbacks.errorCallback=function(){},this.callbacks.progressCallback=function(e){}},s.prototype.executeBinaryUpgrade=function(e,t,n,i){var r={scUpgradeFile:this.base64StringToBlob(t.file),piUpgradeFile:this.base64StringToBlob(n.file)};this.imageUpgrade.executeUpgradeWithBlobsAtVersion(this.domainString,e,r,i.completeCallback,i.errorCallback,i.progressCallback)},s.prototype.executeTarballUpgrade=function(e,t,n){var i={upgradeFile:this.base64StringToBlob(t.file)};this.imageUpgrade.executeUpgradeWithBlobsAtVersion(this.domainString,e,i,n.completeCallback,n.errorCallback,n.progressCallback)},s.prototype.executeUpgradeFromEntry=function(t,i,r,o,a,s,l){var c=new e.VersionInfo;c.parseFromString(r.version);var u=r.version;"latest"==u&&(u=i),console.log("Checking for upgrade on version: "+r.version),"latest"==r.version||c.isGreaterThanOrEqualTo(a)?(console.log("Upgrading to: "+r.version+" image "+JSON.stringify(o)),"tar"==o.type?(tarLookupPath=n(r.version,o.tarball),"none"!=t.mismatchType&&(tarInfo=this.handleMismatchTar(t,u,tarLookupPath,s,l),"none"!=tarInfo.blLookupPath?(tarLookupPath=tarInfo.blLookupPath,l=tarInfo.callbacks):tarLookupPath=tarInfo.tarLookupPath),console.log("Upgrading with: "+tarLookupPath),this.executeTarballUpgrade(u,s[tarLookupPath],l)):(scLookupPath=n(r.version,o.sc_bin),piLookupPath=n(r.version,o.pi_bin),"pi_greater"==t.mismatchType&&(binPaths=this.handleMismatchBin(t,scLookupPath,piLookupPath),scLookupPath=binPaths.scLookupPath,piLookupPath=binPaths.piLookupPath),console.log("Upgrading with: "+scLookupPath),console.log("Upgrading with: "+piLookupPath),this.executeBinaryUpgrade(u,s[scLookupPath],s[piLookupPath],l))):l.completeCallback()},s.prototype.upgradeNextEntry=function(e,n,i){if(this.upgradeIterator.done())completeCallback=this.callbacks.completeCallback,this.clearCallbacks(),completeCallback();else{imageCallbacks={completeCallback:t.proxy(function(){console.log("Image upgrade complete"),this.retryCount=0,this.upgradeIterator.next(n),this.upgradeNextEntry(e,n,i)},this),errorCallback:t.proxy(function(){this.retryCount<this.maxRetries?(this.retryCount++,console.log("Image upgrade failed, retrying "+this.retryCount+"/"+this.maxRetries+"..."),this.upgradeNextEntry(e,n,i)):(console.log("Image upgrade failed, aborting"),this.callbacks.errorCallback())},this),progressCallback:this.callbacks.progressCallback};var r=this.upgradeIterator.upgradeEntry,o=this.upgradeIterator.imgEntry;this.checkFwMismatch(t.proxy(function(t){this.executeUpgradeFromEntry(t,e,r,o,n,i,imageCallbacks)},this))}},s.prototype.executeUpgrade=function(n,i,r){this.api.getVersion(t.proxy(function(o){this.callbacks.completeCallback=n,this.callbacks.errorCallback=i,this.callbacks.progressCallback=r;var s=new e.VersionInfo;s.parseFromString(o),this.fileStore.getFwFiles(t.proxy(function(e,t,n){this.upgradeIterator=new a(t,s),this.retryCount=0,this.upgradeNextEntry(e.version,s,n)},this))},this),function(){alert("Failed to get version")})},s.prototype.base64StringToBlob=function(e){for(var t=atob(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new Blob([n],{type:"file"})},s.prototype.getVersionRegisters=function(t){var n=new e.VersionInfo(4,39,0);if(t.isGreaterThanOrEqualTo(n))var i="sc_fw_image[0].build_version",r="pi_fw_image[0].build_version";else i="sc_fw_image[0].buildversion",r="pi_fw_image[0].buildversion";return{sc:i,pi:r}},s.prototype.checkFwMismatch=function(n){var i=["none","sc_greater","pi_greater"],r=new e.VersionInfo,o=new e.VersionInfo,a=new e.VersionInfo,s=i[0],l={mismatchType:s,scVersion:o,piVersion:a};this.api.getVersion(t.proxy(function(e){r.parseFromString(e);var c=this.getVersionRegisters(r);this.api.readBmsRegisters([c.sc,c.pi],t.proxy(function(e){o.parseFromString(e[c.sc]),l.scVersion=o,null!=e[c.pi]&&(a.parseFromString(e[c.pi]),l.piVersion=a),"0.0.0"!=a.getVersionString()&&(o.isGreaterThan(a)?s=i[1]:o.isLessThan(a)&&(s=i[2]),l.mismatchType=s),s!=i[0]&&(console.log("Fw Mismatch Detected"),console.log("Mismatch Type: "+s+", Sc Version: "+o.getVersionString()+", Pi Version: "+a.getVersionString())),n(l)},this),function(){console.log("Failed to get SC and Pi versions"),n(l)})},this),function(){console.log("Failed to get BMS version"),n(l)})},s.prototype.handleMismatchBin=function(t,n,i){var r=t.piVersion,o=new e.VersionInfo(4,64,0);return r.isGreaterThan(o)&&(i="fw_upgrade/archive/fw/4.65.0/pi.bin"),{scLookupPath:n,piLookupPath:i}},s.prototype.handleMismatchTar=function(i,r,o,a,s){var l=i.piVersion,c=new e.VersionInfo;c.parseFromString(r);var u=new e.VersionInfo(4,79,0),d=new e.VersionInfo(4,65,0),h=new e.VersionInfo(4,64,0),p="none",f=s.completeCallback;return c.isGreaterThan(d)?l.isLessThan(u)&&(p=n("4.79.0","upgrade_bl.tar"),s.completeCallback=t.proxy(function(){console.log("Upgrading with: "+o),s.completeCallback=f,this.executeTarballUpgrade(r,a[o],s)},this)):c.isEqualTo(h)&&l.isGreaterThan(h)&&(o="fw_upgrade/archive/internal/4.64.x_upgrade/upgrade_4.64.x.tar"),{tarLookupPath:o,blLookupPath:p,callbacks:s}},{FileStore:r,FwUpgrade:s}}),define("js/fw_upgrade_view",["jquery","./bms-legacy-api/lib/api","./fw_upgrade"],function(e,t,n){function i(e,t){this.id="",this.parent=null,this.fwUpgrade=e,this.api=t,this.currentVersion="Unknown",this.upgradeVersion="Unknown",this.upgradeSubmitButton=null,this.progressPopup=null,this.progressMessageDiv=null,this.progressBar=null,this.currentFwVersionText=null,this.upgradeFwVersionText=null,this.fwMismatchText=null,this.fwMismatchSpan=null,this.fwUpgradeText=null,this.fwUpgradeSpan=null,this.stopPolling=!1}return i.prototype.constructor=i,i.prototype.render=function(e,t){this.id=e,this.parent=t;var n=null;n=document.createTextNode(""),this.currentFwVersionText=this.parent.appendChild(n),this.parent.appendChild(document.createElement("br")),n=document.createTextNode(""),this.upgradeFwVersionText=this.parent.appendChild(n),this.parent.appendChild(document.createElement("br")),(n=document.createElement("span")).style.display="none",n.className="fw-alert-msg",n.appendChild(document.createElement("br")),this.fwMismatchText=n.appendChild(document.createTextNode("")),n.appendChild(document.createElement("br")),this.fwMismatchSpan=this.parent.appendChild(n),(n=document.createElement("span")).style.display="none",n.className="fw-alert-msg",n.appendChild(document.createElement("br")),this.fwUpgradeText=n.appendChild(document.createTextNode("")),n.appendChild(document.createElement("br")),this.fwUpgradeSpan=this.parent.appendChild(n),(n=document.createElement("span")).className="disabled-while-operating",n.appendChild(document.createElement("br"));var i=this.parent.appendChild(n);(n=document.createElement("button")).id=this.id+"-upgrade-button",n.innerHTML="Upgrade",n.className="uk-button disabled-on-lock",this.upgradeSubmitButton=i.appendChild(n),this.updateVersionText()},i.prototype.updateVersionText=function(){var t=e.proxy(function(){"4.88.1"!=this.currentVersion&&"Unknown"!=this.currentVersion&&this.displayUpgradeAlertMessage()},this);requirejs(["fw_upgrade/version"],e.proxy(function(e){this.upgradeVersion=e.version.split(":")[0],this.updateUpgradeVersionText(),t()},this),e.proxy(function(e){console.log(e),this.updateUpgradeVersionText()},this)),this.api.getVersion(e.proxy(function(e){this.currentVersion=e.split(":")[0];var n=this.currentVersion;"4.79.0"===this.currentVersion?n="Ampere 17.12":"4.80.0"===this.currentVersion?n="Ampere Update 1 (17.12.1)":"4.81.0"===this.currentVersion?n="Babbage Preview 1":"4.82.0"===this.currentVersion?n="Babbage Preview 2":"4.83.0"===this.currentVersion?n="Babbage Preview 3":"4.84.0"===this.currentVersion?n="Babbage Preview 4":"4.85.0"===this.currentVersion?n="Babbage Preview 5":"4.86.0"===this.currentVersion?n="Babbage Preview 6":"4.87.0"===this.currentVersion?n="Babbage Preview 7":"4.88.0"===this.currentVersion?n="Babbage 18.08":"4.88.1"===this.currentVersion&&(n="Babbage Update 1 (18.08.1)"),this.currentFwVersionText.nodeValue="Current Version: '"+n+"'",t()},this))},i.prototype.updateUpgradeVersionText=function(){this.upgradeFwVersionText.nodeValue="Upgrade Version: 'Babbage Update 1 (18.08.1)'"},i.prototype.displayUpgradeAlertMessage=function(){this.fwUpgradeText.nodeValue="Upgrade Required",e(this.fwUpgradeSpan).show()},i.prototype.upgradeButtonClick=function(){this.progressMessageDiv.innerHTML="Upgrade in Progress",e(this.progressPopup).css("display","flex"),this.stopPolling=!0,this.fwUpgrade.executeUpgrade(e.proxy(function(){this.progressBar.style.width="100%",this.progressBar.innerHTML="100%",setTimeout(e.proxy(function(){alert("Upgrade complete"),this.progressBar.style.width="0%",this.progressBar.innerHTML="0%",location.reload()},this),1e3)},this),e.proxy(function(){alert("Upgrade failed"),location.reload()},this),e.proxy(function(e){(e=Math.round(100*e))>=99&&(e=99),this.progressBar.style.width=e+"%",this.progressBar.innerHTML=e+"%"},this))},{FwUpgradeView:i}}),define("js/bms-legacy-api/lib/config_helpers",["jquery"],function(e){function t(){this.progressTimerId=null}return t.prototype.generateWriteBmsRegistersCallback=function(e,t){return function(n){var i="";for(var r in n)null===n[r]&&(i+=r+"\n");i?t&&t(i):e&&e(Object.keys(n).length)}},t.prototype.startProgressUpdate=function(t,n,i,r){var o=6*t,a=0;this.stopProgressUpdate(),r(n),this.progressTimerId=setInterval(e.proxy(function(){var e=n+(a+=300)/o;e>i&&(e=i),null!=r&&r(e)},this),300)},t.prototype.stopProgressUpdate=function(){this.progressTimerId&&(clearInterval(this.progressTimerId),this.progressTimerId=null)},{ConfigHelper:t}}),define("js/bms-legacy-api/lib/config_upload",["./api","./type_helpers","./register_parse_helper","./config_helpers"],function(e,t,n,i){function r(e){this.api=e,this.parseHelper=new n.RegisterParseHelper,this.errMsgHeader="Upload failed.\n\n",this.configHelper=new i.ConfigHelper}return r.prototype.uploadRegistersFromText=function(e,n,i,r){for(var o=this.api.nameResolver.registerTypeList,a=this.api.nameResolver.registerStorageList,s={},l="",c=this.errMsgHeader,u=(e=(e=(e=(e=e.replace(/\r/g,"\n")).replace(/\n\n/g,"\n")).replace(/^\s*\n/gm,"\n")).replace(/\t/g,"")).split("\n"),d=0;d<u.length;d++)if(u[d].length>0&&0!=u[d].search("#")){var h=u[d].split("=");if(2!=h.length){l="Syntax error";break}var p=h[0].replace(/ /g,""),f=h[1].replace(/ /g,""),g=this.parseHelper.getSimpleComponentAndRegisterName(p);if(!(g in o)){l="'"+p+"' is not a valid register name";break}if("Configuration"!=a[g]){l="'"+p+"' is not a configurable register";break}if(0==f.indexOf("@"))try{f=this.resolveNamedAddress(f)}catch(e){l=e;break}"IpAddress"===o[g]&&(f=t.convertIpToInt(f)),s[p]=f}function m(e){i(c+"Register writes failed:\n\n"+e)}var v=function(e,t){return function(n){t.stopProgressUpdate(),e(n)}}(n,this.configHelper),_=this.configHelper.generateWriteBmsRegistersCallback(v,m);if(l)l=this.errMsgHeader+"Configuration file error:\n\n"+l,i(l);else{var y=this.api.writeBmsRegisters(s,_,m);this.configHelper.startProgressUpdate(y,0,1,r)}},r.prototype.resolveNamedAddress=function(e){var t=this.api.nameResolver.resolveNameToAddresses(e.substring(1,e.length));if(0==t.length)return null;var n=0;for(var i in t)n=t[i];return n>=327680&&(n%=327680),n},{ConfigUpload:r}}),define("js/config_download",["filesaver","./bms-legacy-api/lib/named_api","./stack_state_helper","./bms-legacy-api/lib/register_parse_helper"],function(e,t,n,i){function r(e){this.api=e,this.saveAs=saveAs,this.dictOfConfigRegisters=null,this.progressCallback=null,this.downloadCompleteCallback=null,this.errorCallback=null,this.registerParseHelper=new i.RegisterParseHelper}return r.prototype.processRegisters=function(){this.dictOfConfigRegisters=this.getDictOfConfigRegisters();var e=this.getAllInstancesOfConfigRegisters(this.dictOfConfigRegisters);this.readListOfRegisters(e)},r.prototype.getMultiStackInfo=function(){this.api.readBmsRegisters(["pack_stack[*].installed"],$.proxy(function(e){var t=n.getStackState(e);this.installedStacks=t.installed,this.processRegisters()},this),this.errorCallback)},r.prototype.getDictOfConfigRegisters=function(){for(var e={},t=0;t<this.registerMap.length;t++)for(var n=this.registerMap[t],i=n.registers,r=0;r<i.length;r++){var o=i[r];if("Configuration"===o.storageType){var a=n.name+"."+o.name.toLowerCase();a in e?e[a].hasMultipleInstances=!0:e[a]={instanceCount:n.instanceCount,hasMultipleInstances:!1}}}return e},r.prototype.getAllInstancesOfConfigRegisters=function(e){var t=[];for(var n in e)for(var i=e[n],r=n.split("."),o=0;o<this.installedStacks.length;o++){var a=0;i.hasMultipleInstances&&(a=i.instanceCount*this.installedStacks[o]);for(var s=0;s<i.instanceCount;s++){var l=r[0]+"["+(s+a)+"]."+r[1];t.push(l)}}return t},r.prototype.readListOfRegisters=function(e){var t=2*e.length,n=0;this.timerId=setInterval($.proxy(function(){progress=(n+=300)/t,progress>.99&&(progress=.99),this.progressCallback(progress)},this),300),this.api.readBmsRegisters(e,$.proxy(function(e){this.writeRegistersToTextFile(e)},this),$.proxy(function(e){this.errorCallback(e),clearInterval(this.timerId)}))},r.prototype.writeRegistersToTextFile=function(e){var t=this.registerParseHelper.parseRegisterResultsToText(e,this.api.nameResolver.registerTypeList),n=new Blob([t],{type:"text/plain;charset=utf-8"});this.saveAs(n,this.fileName),this.downloadCompleteCallback(),clearInterval(this.timerId)},r.prototype.downloadConfigurationFile=function(e,t,n,i){this.fileName=e,this.progressCallback=n,this.downloadCompleteCallback=t,this.errorCallback=i,this.registerMap=this.api.nameResolver.registerMap,gbcIndex?this.getMultiStackInfo():(this.installedStacks=[0],this.processRegisters())},{ConfigDownload:r}}),define("js/config_saver",["jquery","./bms-legacy-api/lib/api","./bms-legacy-api/lib/register_parse_helper","./bms-legacy-api/lib/config_helpers"],function(e,t,n,i){function r(e,t,r,o,a){for(var s in this.api=e,this.callback=r,this.errorCallback=o,this.progressCallback=a,this.parseHelper=new n.RegisterParseHelper,this.errMsgHeader="Save failed.\n\n",this.configHelper=new i.ConfigHelper,this.errorRegisterNames=[],this.saveRegisterNames=[],t)this.errorRegisterNames.push(t[s]+".error"),this.saveRegisterNames.push(t[s]+".save");this.resolvedErrorRegisterNames=Object.keys(this.api.resolveNameList(this.errorRegisterNames)),this.resolvedSaveRegisterNames=Object.keys(this.api.resolveNameList(this.saveRegisterNames)),this.pollSaveRegistersTimerId=null,this.pollSaveRegistersTimeoutTimerId=null,this.pollReadResponse=!0,this.saveRegisterCount=0}return r.prototype.saveConfiguration=function(){var t=this.generateRegisterListWithValue(this.errorRegisterNames,0),n=this.configHelper.generateWriteBmsRegistersCallback(e.proxy(this.writeToSaveRegisters,this),e.proxy(this.saveConfigurationErrorCallback,this)),i=this.api.writeBmsRegisters(t,n,e.proxy(this.saveConfigurationErrorCallback,this));this.configHelper.startProgressUpdate(i,0,.25,e.proxy(this.progressCallback,this))},r.prototype.generateRegisterListWithValue=function(e,t){return e.reduce(function(e,n,i){return e[n]=t,e},{})},r.prototype.saveConfigurationErrorCallback=function(e){this.configHelper.stopProgressUpdate(),e=this.errMsgHeader+"Configuration save failed:\n\n"+e,this.errorCallback(e)},r.prototype.checkErrorRegistersForClear=function(e){for(var t in errMsg="",e)1===e[t]&&(errMsg+="["+this.parseHelper.getIndexFromRegisterResult(t)+"]\n");errMsg?(errMsg="Could not save configurations for:\n"+errMsg,this.saveConfigurationErrorCallback(errMsg)):(this.configHelper.stopProgressUpdate(),this.callback())},r.prototype.checkSaveRegistersForClear=function(t){if(this.pollSaveRegistersTimeoutTimerId){var n=!0;for(var i in t)n=n&&!t[i];n&&(this.stopPollingSaveRegisters(),this.api.readBmsRegisters(this.errorRegisterNames,e.proxy(this.checkErrorRegistersForClear,this),e.proxy(this.saveConfigurationErrorCallback,this),null,null),this.configHelper.startProgressUpdate(this.saveRegisterCount,.75,.99,e.proxy(this.progressCallback,this))),this.pollReadResponse=!0}},r.prototype.stopPollingSaveRegisters=function(){clearInterval(this.pollSaveRegistersTimerId),this.pollSaveRegistersTimerId=null,clearInterval(this.pollSaveRegistersTimeoutTimerId),this.pollSaveRegistersTimeoutTimerId=null},r.prototype.startPollingSaveRegisters=function(){this.pollSaveRegistersTimerId=setInterval(e.proxy(function(){this.pollReadResponse&&(this.pollReadResponse=!1,this.api.readBmsRegisters(this.saveRegisterNames,e.proxy(this.checkSaveRegistersForClear,this),e.proxy(this.saveConfigurationErrorCallback,this),null,null))},this),100);this.pollSaveRegistersTimeoutTimerId=setTimeout(e.proxy(function(){this.stopPollingSaveRegisters(),this.saveConfigurationErrorCallback("Saving configurations timed out")},this),1e4)},r.prototype.writeToSaveRegisters=function(t){var n=this.generateRegisterListWithValue(this.saveRegisterNames,1),i=this.configHelper.generateWriteBmsRegistersCallback(e.proxy(this.startPollingSaveRegisters,this),e.proxy(this.saveConfigurationErrorCallback,this));this.saveRegisterCount=this.api.writeBmsRegisters(n,e.proxy(i,this),e.proxy(this.saveConfigurationErrorCallback,this)),this.configHelper.startProgressUpdate(this.saveRegisterCount,.25,.75,e.proxy(this.progressCallback,this))},{ConfigSaver:r}}),define("js/configuration_view",["jquery","./bms-legacy-api/lib/api","./bms-legacy-api/lib/config_upload","./config_download","./config_saver","./bms-legacy-api/lib/type_helpers"],function(e,t,n,i,r,o){function a(e,t,n){this.id="",this.parent=null,this.api=e,this.configUpload=t,this.configDownload=n,this.fileBrowseBox=null,this.importSubmitButton=null,this.exportSubmitButton=null,this.progressPopup=null,this.progressMessageDiv=null,this.progressBar=null,this.padZero=o.padZero}return a.prototype.constructor=a,a.prototype.getConfigFormattedDate=function(){var e=new Date;return e.getFullYear()+"_"+this.padZero(e.getMonth()+1)+"_"+this.padZero(e.getDate())+"_"+this.padZero(e.getHours())+"_"+this.padZero(e.getMinutes())+"_"+this.padZero(e.getSeconds())+"_"+e.getUTCMilliseconds()},a.prototype.render=function(t,n){var i=this;this.id=t,this.parent=n;var r=null;(r=document.createElement("input")).id=this.id+"-import-select",r.type="file",r.style.display="none",this.fileBrowseBox=this.parent.appendChild(r),(r=document.createElement("div")).innerHTML='<div><button id="'+this.id+'-import-button" class="uk-button disabled-on-lock config-button">Import Configuration</button><div><input id="persist-configuration-checkbox" type="checkbox" checked><label for="persist-configuration-checkbox">Persist Configuration to BMS</label></div></div><div><button id="'+this.id+'-export-button" class="uk-button config-button">Export Configuration</button></div>',this.parent.appendChild(r),this.importSubmitButton=e("#"+this.id+"-import-button")[0],this.exportSubmitButton=e("#"+this.id+"-export-button")[0],this.windowElement=document.createElement("div"),(r=document.createElement("form")).innerHTML="Save file as: ",this.downloadForm=this.windowElement.appendChild(r),(r=document.createElement("input")).type="text",r.className="download-input",r.name="File Name",this.downloadFileInput=this.downloadForm.appendChild(r),this.downloadForm.appendChild(document.createElement("br")),this.downloadForm.appendChild(document.createElement("br")),(r=document.createElement("input")).type="button",r.value="Save",r.className="uk-button",this.saveButton=this.downloadForm.appendChild(r),this.editFileNameWindow=e(this.windowElement).kendoWindow({title:"Export Configuration",modal:!0,visible:!1,resizable:!1,maxHeight:400,close:e.proxy(function(t){e(document).unbind("click")},this)}).data("kendoWindow"),this.fileBrowseBox.onchange=e.proxy(this.checkForImport,this),this.importSubmitButton.onclick=e.proxy(function(){i.fileBrowseBox.click()},this),this.exportSubmitButton.onclick=e.proxy(i.openDownloadWindow,this),this.saveButton.onclick=e.proxy(this.saveExportButtonClick,this),gbcIndex&&e("#upgrade-tab-container").hide()},a.prototype.openDownloadWindow=function(){e(document).on("click",".k-overlay",e.proxy(function(){this.editFileNameWindow.close()},this)),this.downloadFileInput.value="config_"+this.getConfigFormattedDate()+".txt",this.editFileNameWindow.center().open()},a.prototype.actionCompleteCallback=function(t){this.progressBar.style.width="100%",this.progressBar.innerHTML="100%",setTimeout(e.proxy(function(){alert(t),this.progressBar.style.width="0%",this.progressBar.innerHTML="0%"},this),1e3)},a.prototype.progressCallback=function(e){this.progressBar.style.width=Math.round(100*e)+"%",this.progressBar.innerHTML=Math.round(100*e)+"%"},a.prototype.errorCallback=function(e){alert(e),this.progressBar.style.width="0%",this.progressBar.innerHTML="0%",this.hidePopup()},a.prototype.checkForImport=function(){var t=0;function n(n){if(t=n,console.log("Imported "+t+" registers"),this.progressBar.style.width="100%",this.progressBar.innerHTML="100%",!e("#persist-configuration-checkbox").is(":checked"))return this.actionCompleteCallback("Configuration Imported"),void this.hidePopup();setTimeout(e.proxy(function(){this.progressBar.style.width="0%",this.progressBar.innerHTML="0%",this.saveConfigAfterImport()},this),1e3)}if(this.fileBrowseBox.files.length>0){this.showPopup("Configuration Import in Progress");var i=new FileReader;i.onload=e.proxy(function(t){var r=i.result;this.configUpload.uploadRegistersFromText(r,e.proxy(n,this),e.proxy(this.errorCallback,this),e.proxy(this.progressCallback,this))},this),i.readAsText(this.fileBrowseBox.files[0]),e(this.fileBrowseBox).val("")}else alert("Select a valid configuration file.")},a.prototype.saveConfigAfterImport=function(){this.showPopup("Configuration Save in Progress"),components=[],gbcIndex?components=["gbc_persist"]:components=["sc_persist","pi_persist"],new r.ConfigSaver(this.api,components,e.proxy(function(){this.actionCompleteCallback("Configuration Imported and Saved Successfully"),this.hidePopup()},this),e.proxy(this.errorCallback,this),e.proxy(this.progressCallback,this)).saveConfiguration()},a.prototype.saveExportButtonClick=function(){this.editFileNameWindow.close();this.showPopup("Configuration Export in Progress"),this.configDownload.downloadConfigurationFile(this.downloadFileInput.value,e.proxy(function(){this.actionCompleteCallback("Export Completed"),this.hidePopup()},this),e.proxy(this.progressCallback,this),e.proxy(this.errorCallback,this))},a.prototype.showPopup=function(t){this.progressMessageDiv.innerHTML=t,e(this.progressPopup).css("display","flex")},a.prototype.hidePopup=function(){setTimeout(e.proxy(function(){e(this.progressPopup).hide()},this),1e3)},{ConfigurationView:a}}),define("js/service_mode_helper",["jquery","./bms-legacy-api/lib/named_api","./config_saver"],function(e,t,n){function i(e){this.api=e,this.currentOpMode="Service",this.scReqStateReg="sc_op_state[0].requested_state",this.piReqStateReg="pi_op_state[0].requested_state",this.scBootReg="sc_boot[0].requested_state",this.piBootReg="pi_boot[0].requested_state",this.lockoutCodeExists=!1,this.lockState=!1,this.lockoutCallback=function(){},this.lockoutMessageCallback=function(){},this.scPersistRegister=null,this.piPersistRegister=null,this.browserId=localStorage.getItem("browser-id"),this.resolveOperatingMode=(()=>{}),this.apiWrapper={readBmsRegisters:e=>new Promise((t,n)=>{this.api.readBmsRegisters(e,t,n)}),writeBmsRegisters:e=>new Promise((t,n)=>{this.api.writeBmsRegisters(e,t,n)})}}return i.prototype.initialize=function(){this.api.nameResolver.resolveComponentName("sc_aux_persist").length?(this.scPersistRegister="sc_aux_persist",this.lockoutCodeExists=!0):this.scPersistRegister="sc_persist",this.piPersistRegister=this.api.nameResolver.resolveComponentName("pi_aux_persist").length?"pi_aux_persist":"pi_persist"},i.prototype.updateCurrentOpMode=function(t){var n=this,i=[this.scReqStateReg,this.piReqStateReg,"sc_op_state[0].actual_state","pi_op_state[0].actual_state"];this.lockoutCodeExists&&i.push("sc_op_state[0].lockout_code"),this.api.readBmsRegisters(i,e.proxy(function(e){var i=e[this.scReqStateReg],r=e["sc_op_state[0].actual_state"],o=e[this.piReqStateReg],a=e["pi_op_state[0].actual_state"],s="sc_op_state[0].lockout_code"in e?e["sc_op_state[0].lockout_code"]:null;n.verifyRequestedState(i,o,s),i!=r?this.currentOpMode=1===i?"Initializing":"Uninitializing":o!=a?this.currentOpMode=1===o?"Initializing":"Uninitializing":0===a&&0===r?this.currentOpMode="Service":1===a&&1===r?(this.currentOpMode="Operating",this.resolveOperatingMode()):this.currentOpMode="Error";var l=null;i==o&&(l=0==i?"Service":"Operating"),t(this.currentOpMode,l,s)},this),e.proxy(function(e){console.log(e),this.currentOpMode="Disconnected",t(this.currentOpMode,null,null)},this))},i.prototype.setLockState=function(e){return this.lockState=e,this.lockState},i.prototype.setLockoutCallback=function(e,t){this.lockoutCallback=e,this.lockoutMessageCallback=t},i.prototype.verifyRequestedState=function(e,t,n){!this.lockState||1!==e&&1!==t||n!==this.browserId||this.setLockoutMode(this.lockState?"ON":"OFF",this.lockoutMessageCallback,this.lockoutCallback)},i.prototype.writeLockoutCode=function(){if(this.lockoutCodeExists)return this.api.writeBmsRegisters({"sc_op_state[0].lockout_code":this.browserId},()=>{},()=>{})},i.prototype.exitServiceLockout=function(e=(()=>{}),t=(()=>{})){e("Sending request...",1),this.apiWrapper.writeBmsRegisters({"sc_op_state[0].requested_state":1,"pi_op_state[0].requested_state":1}).then(()=>(e("Waiting for Operating Mode...",2),new Promise((e,t)=>{this.resolveOperatingMode=e,setTimeout(t,3e4)}))).then(()=>(e("Persisting request...",3),new Promise((e,t)=>{this.saveConfig(e,t)}))).then(()=>{e("Done",4),t(!0)}).catch(()=>{t(!1)})},i.prototype.setLockoutMode=function(e,t=function(){},n=function(){}){var i=this;if("ON"===e||"OFF"===e){var r="ON"===e?0:1,o={"sc_op_state[0].requested_state":r,"pi_op_state[0].requested_state":r};this.lockoutCodeExists&&(o["sc_op_state[0].lockout_code"]=this.browserId),t("Sending request...",1),i.api.writeBmsRegisters(o,function(){t("Saving request...",2),i.saveConfig(function(){if("OFF"===e)return t("Done",3),void n(!0);t("Resetting BMS...",3),i.api.resetBms(function(){t("Done",4),n(!0)},function(){i.resetBms(function(){t("Done",4),n(!0)},function(){t("Failed to reset BMS.",4),n(!1)})})},function(){t("Failed to save request.",3),n(!1)})},function(){t("Failed to send request.",2),n(!1)})}else n(!1)},i.prototype.saveConfig=function(t,i){new n.ConfigSaver(this.api,[this.scPersistRegister,this.piPersistRegister],e.proxy(function(){t()},this),e.proxy(function(e){i(e)},this),e.proxy(function(e){},this)).saveConfiguration()},i.prototype.checkForOpStateRegisters=function(t){var n=e.proxy(function(e){console.log(e),console.log("Can't check for op state registers"),t(!1)},this),i=e.proxy(function(e){var n=e.find(function(e){return"sc_op_state"===e.name}),i=e.find(function(e){return"pi_op_state"===e.name});t(void 0!==n&&void 0!==i)},this);this.api.getRegisterMap(i,n)},i.prototype.resetBms=function(t,n){var i={},r={};i[this.scBootReg]=0,r[this.piBootReg]=0;var o=e.proxy(function(){t()},this);this.api.writeBmsRegisters(r,e.proxy(function(){this.api.writeBmsRegisters(i,o,o,5e3)},this),e.proxy(n,this))},{ServiceModeHelper:i}}),define("js/service_mode_tab",["jquery","./tab_base","./service_mode_helper","./configuration_view","./fw_upgrade_view"],function(e,t,n,i,r){function o(e,n,i){t.Tab.prototype.constructor.call(this),this.serviceModeHelper=e,this.configurationView=n,this.fwUpgradeView=i,this.opModeUpdate=null,this.timeoutId=null,this.intervalId=null,this.serviceMode=null,this.pollServiceMode=!0,this.fwMismatched=!1,this.opModeMsgs={Operating:"Open All Contactors and Enter Service Mode",Service:"Service Mode",Initializing:"Attempting to exit Service Mode, invalid configuration may be preventing this from occuring",Uninitializing:"Attempting to enter Service Mode",Switching:"Currently Switching Operating Modes",Error:"There was an error while getting or setting the Operating Mode"},this.browserId=localStorage.getItem("browser-id")}var a;return o.prototype=new t.Tab,o.prototype.constructor=o,o.prototype.render=function(n,i){var r=this;t.Tab.prototype.render.call(this,n,i),this.serviceModeHelper.initialize();var o=null;o=document.createElement("div"),this.parent.appendChild(o),o.id="service-lockout-container",o.innerHTML='<div class="service-lock-release"><div class="service-lockout-title">Service Lockout</div><div id="service-lockout-summary">Service Lockout allows you to put your Nuvation BMS into a Lockout state while you perform maintenance on your energy storage installation such as loading new configurations, or upgrading the firmware. If you are making physical wiring changes, you should enter Service Lockout before powering down the Nuvation BMS. When in Service Lockout, the Nuvation BMS will flag all faults and notify other Operator Interfaces.</div><div id="lock-release-buttons"><div><div id="lock-button" class="disabled-on-lock outer-button"><div class="uk-button lockout-button">Lockout</div></div><progress id="lockout-progress" value="0" max="5"></progress></div><div><div id="exit-lockout-button" class="disabled-on-lock outer-button"><div id="exit-service-lockout" class="uk-button lockout-button">Exit Service Lockout</div></div><progress id="exit-lockout-progress" value="0" max="150"></progress></div></div><div id="steal-lockout-container"><div id="steal-lockout-button" class="disabled-on-lock outer-button"><div class="uk-button lockout-button">Steal Lockout</div></div></div></div><div id="steal-lockout-message" class="disabled-on-lock">Steal Lockout will take control away from the operator that owns this lockout</div><div id="service-mode-lock-warning" class="disabled-on-lock">Operator Interface must be unlocked to change Service Lockout</div><div id="service-mode-warning" class="disabled-on-lock"></div>',e("#exit-service-lockout").on("click",function(){r.exitServiceLockout(r.serviceModeHelper)}),e("#lock-button > div").on("click",function(){r.enterServiceLockout(r.serviceModeHelper)}),e("#steal-lockout-button").on("click",function(){r.serviceModeHelper.writeLockoutCode()}),this.lockoutButton=e("#lock-button > div")[0],this.exitLockoutButton=e("#exit-service-lockout")[0],this.stealLockoutButton=e("#steal-lockout-button")[0],this.stealLockoutContainer=e("#steal-lockout-container")[0],this.serviceModeHelper.setLockoutCallback(function(e){},function(t,n){e("#lockout-progress").attr("value",n).css("visibility","visible")}),(o=document.createElement("div")).id="service-tabs-container",o.className="uk-grid";var a=this.parent.appendChild(o);(o=document.createElement("div")).className="uk-width-large-1-3 uk-width-small-1-4",a.appendChild(o),(o=document.createElement("div")).className="uk-width-large-1-3 uk-width-small-2-4";var s=a.appendChild(o);(o=document.createElement("div")).id="config-tab-container",s.appendChild(o);var l=document.createElement("fieldSet");o.appendChild(l),(o=document.createElement("legend")).innerHTML="Configuration",l.appendChild(o),(o=document.createElement("div")).id="upgrade-tab-container",s.appendChild(o);var c=document.createElement("fieldSet");o.appendChild(c),(o=document.createElement("legend")).innerHTML="Upgrade",c.appendChild(o),(o=document.createElement("div")).className="uk-width-large-1-3 uk-width-small-1-4",a.appendChild(o),(o=document.createElement("div")).id="popup-service-operation",o.className="popup",this.progressPopup=document.body.appendChild(o),this.configurationView.progressPopup=this.progressPopup,this.fwUpgradeView.progressPopup=this.progressPopup,o=document.createElement("div"),popupContentDiv=this.progressPopup.appendChild(o),(o=document.createElement("div")).innerHTML="Progress",this.progressMessageDiv=popupContentDiv.appendChild(o),this.configurationView.progressMessageDiv=this.progressMessageDiv,this.fwUpgradeView.progressMessageDiv=this.progressMessageDiv,(o=document.createElement("div")).className="uk-progress",o.style.height="auto",progressBarDiv=popupContentDiv.appendChild(o),(o=document.createElement("div")).id=this.id+"-progress-bar",o.className="uk-progress-bar",o.style.width="0%",o.innerHTML="0%",this.progressBar=progressBarDiv.appendChild(o),this.configurationView.progressBar=this.progressBar,this.fwUpgradeView.progressBar=this.progressBar,this.configurationView.render("content-config-upload",l),this.fwUpgradeView.render("content-fw-upgrade",c),this.fwUpgradeView.upgradeSubmitButton.onclick=e.proxy(this.fwUpgradeButtonClick,this),this.fwUpgradeView.fwUpgrade.checkFwMismatch(e.proxy(function(t){"none"!=t.mismatchType&&(this.fwMismatched=!0,this.pollServiceMode=!1,this.updateButtonCondition("software-mismatch",!0),this.updateServiceMode("Service","Service",this.browserId),this.fwUpgradeView.fwMismatchText.nodeValue="Software Mismatch Detected",e(this.fwUpgradeView.fwMismatchSpan).show(),this.fwUpgradeView.displayUpgradeAlertMessage()),!gbcIndex&&!this.fwMismatched&&this.serviceModeHelper.api.nameResolver.resolveComponentName("sc_op_state").length&&this.serviceModeHelper.api.nameResolver.resolveComponentName("pi_op_state").length||(e("#service-mode-status").hide(),e("#service-lockout-container").hide(),e("#content-config-upload-import-button").removeClass("disabled-lockout-button"),e("#content-fw-upgrade-upgrade-button").removeClass("disabled-lockout-button"))},this)),this.updateButtonCondition("init",!0)},o.prototype.fwUpgradeButtonClick=function(){this.fwUpgradeView.upgradeButtonClick()},o.prototype.updateServiceMode=function(t,n,i){this.serviceMode=t,null!=i&&this.updateButtonCondition("lockout-code-match",this.browserId===i.toString()),this.updateButtonCondition("operating-mode","Operating"===t),this.updateButtonCondition("service-mode","Service"===t),this.updateButtonCondition("service-lockout-supported",!0),"Service"==t?(e("#service-mode-warning").text("Exiting Service Lockout may close contactors and GPOs"),e("#content-config-upload-import-button").prop("disabled",!1),e("#content-fw-upgrade-upgrade-button").prop("disabled",!1),setTimeout(function(){e("#lockout-progress").css("visibility","hidden")},500)):"Operating"==t?(e("#service-mode-warning").text("Entering Service Lockout opens all contactors and GPOs"),e("#content-config-upload-import-button").prop("disabled",!0),e("#content-fw-upgrade-upgrade-button").prop("disabled",!0),e("#exit-lockout-progress").css("visibility","hidden")):(e("#content-config-upload-import-button").prop("disabled",!0),e("#content-fw-upgrade-upgrade-button").prop("disabled",!0)),"Service"===n?e("#exit-lockout-button").removeClass("disabled-unless-lockout"):e("#exit-lockout-button").addClass("disabled-unless-lockout")},o.prototype.enterServiceLockout=function(t){e("#content-config-upload-import-button").removeClass("disabled-lockout-button"),e("#content-fw-upgrade-upgrade-button").removeClass("disabled-lockout-button"),e("#exit-lockout-progress").css("visibility","hidden"),clearTimeout(this.timeoutId),clearInterval(this.intervalId),t.setLockoutMode("ON",function(t,n){e("#lockout-progress").attr("value",n).css("visibility","visible")},function(){})},o.prototype.exitServiceLockout=function(t){var n=this,i=0,r=0;e("#lock-button").addClass("action-in-progress"),e("#lockout-progress").css("visibility","hidden"),e("#exit-lockout-progress").removeClass("failed").attr("value",i).attr("max",140).css("visibility","visible"),this.setLockButton(!1,t),t.exitServiceLockout(function(t,o){r=o,i=35*o,e("#exit-lockout-progress").attr("value",i),2===o?(e("#lock-button").removeClass("action-in-progress"),n.intervalId=setInterval(function(){i+=1,e("#exit-lockout-progress").attr("value",i)},1e3),n.timeoutId=setTimeout(function(){clearInterval(n.intervalId)},3e4)):(clearInterval(n.intervalId),clearTimeout(n.timeoutId))},function(t){if(e("#lock-button").removeClass("action-in-progress"),!t)return e("#exit-lockout-progress").addClass("failed"),void(2===r?alert("Failed to exit Service Lockout. Check safety details."):alert("Failed to exit Service Lockout. Please try again."));e("#exit-lockout-progress").attr("value",140),e("#exit-lockout-progress").css("visibility","hidden")})},o.prototype.setLockButton=function(e,t){},o.prototype.updateButtonCondition=(a={init:!1,"lockout-code-match":!0,"operating-mode":!0,"service-mode":!1,"firmware-mismatch":!1,"service-lockout-supported":!1},(t,n)=>{if(a[t]!==n){a[t]=n,e("#lock-button").toggleClass("button-disabled",(()=>a["service-mode"]||!(a["lockout-code-match"]||a["operating-mode"]))()),e("#exit-lockout-button").toggleClass("button-disabled",(()=>!a["lockout-code-match"]||!a["service-mode"])()),e("#content-config-upload-import-button").toggleClass("button-disabled",(()=>a["service-lockout-supported"]&&(!a["lockout-code-match"]||!a["service-mode"]))()),e("#content-fw-upgrade-upgrade-button").toggleClass("button-disabled",(()=>a["service-lockout-supported"]&&!a["firmware-mismatch"]&&(!a["lockout-code-match"]||!a["service-mode"]))());var i=(()=>a["lockout-code-match"]||a["operating-mode"])();e("#steal-lockout-container").toggleClass("hide-element",i),e("#steal-lockout-message").toggleClass("hide-element",i),e("#service-mode-warning").toggleClass("hide-element",!i)}}),{ServiceModeTab:o}}),define("js/version",[],function(){return{version:"0.38.1"}}),define("js/stacks_tab",["jquery","./tab_base","./bms-legacy-api/lib/api","./version"],function(e,t,n,i){r.prototype=new t.Tab,r.prototype.constructor=r;function r(e){t.Tab.prototype.constructor.call(this),this.api=e,window.stacksTab={isActive:()=>{},resize:()=>{}}}return r.prototype.startRefresh=function(){window.stacksTab.isActive(!0)},r.prototype.stopRefresh=function(){window.stacksTab.isActive(!1)},r.prototype.render=function(n,i){t.Tab.prototype.render.call(this,n,i);var r=document.createElement("iframe");r.id="iframe-stack-connection-status",r.className="react-iframe",r.src="/react/StacksOverview",this.parent.appendChild(r),window.stacksTab.resize=(()=>{var t=e(r.contentWindow.document).find(".container"),n=t.height(),i=Number(t.width());e(r).attr("height",n).attr("width",i)})},{StacksTab:r}}),define("js/settings_tab",["jquery","./tab_base","./bms-legacy-api/lib/api","./version"],function(e,t,n,i){r.prototype=new t.Tab,r.prototype.constructor=r;function r(e,n){t.Tab.prototype.constructor.call(this),this.api=e,this.fwUpgrade=n,this.ipAddress=defaultUrl,this.connectionTimeout=defaultTimeout,this.saveButton=null,this.ipAddressInput=null,this.connectionTimeoutInput=null,this.loadOfflineSettings()}var o=["/","//","./","../"];return r.prototype.isRelativeUrl=function(e){for(var t=0;t<o.length;t++)if(0===e.lastIndexOf(o[t],0))return!0;return!1},r.prototype.parseIpAddress=function(){0===this.ipAddress.lastIndexOf("http://",0)||this.isRelativeUrl(this.ipAddress)||(this.ipAddress="http://"+this.ipAddress)},r.prototype.saveOfflineSettings=function(){this.parseIpAddress();var e={ipAddress:this.ipAddress,connectionTimeout:this.connectionTimeout};localStorage.settings=JSON.stringify(e),this.ipAddress=e.ipAddress,this.connectionTimeout=e.connectionTimeout,this.api.jsonrpc.ipAddress=this.ipAddress,this.api.jsonrpc.rpcTimeout=this.connectionTimeout,this.fwUpgrade.domainString=this.ipAddress},r.prototype.loadOfflineSettings=function(){try{var e;if(gbcIndex)if(localStorage.settings)console.log("Loading offline settings"),"ipAddress"in(e=JSON.parse(localStorage.settings))&&(this.ipAddress=e.ipAddress),"connectionTimeout"in e&&(this.connectionTimeout=e.connectionTimeout);else console.log("Loading default settings"),this.saveOfflineSettings();else if(localStorage.settings)console.log("Loading offline settings"),"ipAddress"in(e=JSON.parse(localStorage.settings))&&(this.ipAddress=e.ipAddress),"connectionTimeout"in e&&(this.connectionTimeout=e.connectionTimeout);else console.log("Loading default settings"),this.saveOfflineSettings();this.api.jsonrpc.rpcTimeout=this.connectionTimeout,this.api.jsonrpc.ipAddress=this.ipAddress,this.fwUpgrade.domainString=this.ipAddress}catch(e){console.log("Failed to use 'localStorage'");var t="Your browser is too old. Please update your browser:\n\n";t+="http://www.google.com/chrome/ \n",t+="https://www.mozilla.org/en-US/firefox/new/ \n",t+="http://windows.microsoft.com/en-us/internet-explorer/download-ie \n",alert(t)}},r.prototype.onIpAddressChange=function(){this.ipAddress=this.ipAddressInput.value},r.prototype.onConnectionTimeoutChange=function(){this.connectionTimeout=1e3*this.connectionTimeoutInput.value},r.prototype.onSaveButtonClick=function(){this.saveOfflineSettings(),this.registerInfoPanel.innerHTML="Settings saved.",this.refresh(),location.reload()},r.prototype.refresh=function(){this.ipAddressInput.value=this.ipAddress,this.connectionTimeoutInput.value=this.connectionTimeout/1e3},r.prototype.render=function(n,i){t.Tab.prototype.render.call(this,n,i);var r=null;r=document.createElement("br"),this.parent.appendChild(r),(r=document.createElement("form")).className="uk-form";var o=this.parent.appendChild(r);(r=document.createElement("fieldset")).type="data-uk-margin";var a=o.appendChild(r),s=a.appendChild(document.createElement("div"));s.appendChild(document.createTextNode("BMS IP Address: ")),this.ipAddressInput=s.appendChild(document.createElement("input")),this.ipAddressInput.id="content-configurator-settings-ip",this.ipAddressInput.type="text",this.ipAddressInput.placeholder="IP Address";var l=a.appendChild(document.createElement("div"));l.appendChild(document.createTextNode("BMS Connection Timeout (seconds): ")),this.connectionTimeoutInput=l.appendChild(document.createElement("input")),this.connectionTimeoutInput.id="content-configurator-settings-timeout",this.connectionTimeoutInput.type="number",this.connectionTimeoutInput.placeholder="Timeout (seconds)",(r=document.createElement("button")).id="content-configurator-settings-save",r.innerHTML="Save",r.className="uk-button",this.saveButton=this.parent.appendChild(r),(r=document.createElement("div")).id=this.id+"-info-panel",r.className="uk-panel uk-panel-box",this.registerInfoPanel=this.parent.appendChild(r),this.ipAddressInput.onchange=e.proxy(this.onIpAddressChange,this),this.connectionTimeoutInput.onchange=e.proxy(this.onConnectionTimeoutChange,this),this.saveButton.onclick=e.proxy(this.onSaveButtonClick,this),e("#bms-ip-address").text(this.ipAddress),this.refresh()},{SettingsTab:r}}),define("js/about_tab",["jquery","./tab_base","./bms-legacy-api/lib/api","./version"],function(e,t,n,i){r.prototype=new t.Tab,r.prototype.constructor=r;function r(e){t.Tab.prototype.constructor.call(this),this.api=e}return r.prototype.render=function(n,r){var o=[];gbcIndex?o.push("gbc_fw_image[0].build_version","gbc_fw_image[0].build_id"):(o.push("sc_fw_image[0].build_version","sc_fw_image[0].build_id","pi_fw_image[0].build_version","pi_fw_image[0].build_id"),this.api.nameResolver.resolveComponentName("sc_bl_fw_image").length&&o.push("sc_bl_fw_image[0].build_version","sc_bl_fw_image[0].build_id","pi_bl_fw_image[0].build_version","pi_bl_fw_image[0].build_id")),t.Tab.prototype.render.call(this,n,r),r.innerHTML='<div id="about-container"><div><div class="version-name">Babbage Update 1 (18.08.1)</div><fieldset><legend>Software Version</legend><table><tbody><tr><td>OI:</td><td>'+(i.version?i.version:"")+'</td></tr><tr class="gbc-rows"><td>GBC:</td><td id="gbc-version-hash"></td></tr><tr class="sc-pi-rows"><td>SC:</td><td id="sc-version-hash"></td></tr><tr class="sc-pi-bl-rows"><td>SC BL:</td><td id="sc-bl-version-hash"></td></tr><tr class="sc-pi-rows"><td>PI:</td><td id="pi-version-hash"></td></tr><tr class="sc-pi-bl-rows"><td>PI BL:</td><td id="pi-bl-version-hash"></td></tr></tbody></table></fieldset></div></div>',this.api.readBmsRegisters(o,function(t){"gbc_fw_image[0].build_version"in t&&(e(".gbc-rows").css("display","table-row"),e("#gbc-version-hash").text(t["gbc_fw_image[0].build_version"]+":"+t["gbc_fw_image[0].build_id"])),"sc_fw_image[0].build_version"in t&&(e(".sc-pi-rows").css("display","table-row"),e("#sc-version-hash").text(t["sc_fw_image[0].build_version"]+":"+t["sc_fw_image[0].build_id"]),e("#pi-version-hash").text(t["pi_fw_image[0].build_version"]+":"+t["pi_fw_image[0].build_id"]),"sc_bl_fw_image[0].build_version"in t&&(e(".sc-pi-bl-rows").css("display","table-row"),e("#sc-bl-version-hash").text(t["sc_bl_fw_image[0].build_version"]+":"+t["sc_bl_fw_image[0].build_id"]),e("#pi-bl-version-hash").text(t["pi_bl_fw_image[0].build_version"]+":"+t["pi_bl_fw_image[0].build_id"])))},function(){console.error("Failed to retrieve version information")})},{AboutTab:r}}),define("js/main",["jquery","uikit","cryptojs","./dashboard_tab_pack","./dashboard_tab_stack","./details_tab","./register_map_tab","./fw_upgrade_view","./fw_upgrade","./configuration_view","./bms-legacy-api/lib/config_upload","./config_download","./service_mode_tab","./service_mode_helper","./stacks_tab","./settings_tab","./about_tab","./bms-legacy-api/lib/api","./bms-legacy-api/lib/name_resolver","./bms-legacy-api/lib/named_api","./bms-legacy-api/lib/jsonrpc"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,g,m,v,_,y,b){function w(t,n,i,r,o,a,s,l){var c=this;this.ipAddress="http://192.168.1.21",this.api=t,this.dashboardTab=n,this.stacksTab=i,this.detailsTab=r,this.registerMapTab=o,this.serviceModeTab=a,this.settingsTab=s,this.aboutTab=l,this.tabObjects=[],this.dropDownObjects=[],this.tabObjects.push({name:"Dashboard",id:"content-dashboard",linkId:"content-dashboard-link",disabledOnLock:!1,tab:this.dashboardTab,parent:null,navElement:null,onclick:e.proxy(function(){this.navBarTabClick(this.dashboardTab)},this)}),gbcIndex&&this.tabObjects.push({name:"Stack Status",id:"content-stacks",linkId:"content-stacks-link",disableOnLock:!1,tab:this.stacksTab,parent:null,vavElement:null,onclick:e.proxy(function(){this.navBarTabClick(this.stacksTab)},this)}),this.tabObjects.push({name:"Details",id:"content-details",linkId:"content-details-link",disabledOnLock:!1,tab:this.detailsTab,parent:null,navElement:null,onclick:e.proxy(function(){this.navBarTabClick(this.detailsTab)},this)}),this.dropDownObjects.push({name:"Registers",id:"content-reg-map",linkId:"content-reg-map-link",disabledOnLock:!1,tab:this.registerMapTab,parent:null,navElement:null,onclick:e.proxy(function(){this.navBarTabClick(this.registerMapTab)},this)}),this.dropDownObjects.push({name:"Service",id:"content-service-mode",linkId:"content-service-mode-link",disabledOnLock:!1,tab:this.serviceModeTab,parent:null,navElement:null,onclick:e.proxy(function(){this.navBarTabClick(this.serviceModeTab)},this)}),this.dropDownObjects.push({name:"Connection",id:"content-configurator-settings",linkId:"content-configurator-settings-link",disabledOnLock:!1,tab:this.settingsTab,parent:null,navElement:null,onclick:e.proxy(function(){this.navBarTabClick(this.settingsTab)},this)}),this.dropDownObjects.push({name:"About",id:"content-about",linkId:"content-about-link",disabledOnLock:!1,tab:this.aboutTab,parent:null,navElement:null,onclick:function(){c.navBarTabClick(c.aboutTab)}}),this.systemLockedState="locked",this.lockImages={locked:"img/locked.png",unlocked:"img/unlocked.png"}}w.prototype.navBarTabClick=function(e){var t=this.tabObjects.concat(this.dropDownObjects);for(var n in t)tabObject=t[n],null!=tabObject.tab&&("startRefresh"in tabObject.tab&&tabObject.tab==e?tabObject.tab.startRefresh():"stopRefresh"in tabObject.tab&&tabObject.tab.stopRefresh())},w.prototype.setSecurityMode=function(t){"locked"===t?(this.systemLockedState="locked",e("#lock-img").prop("src",this.lockImages.locked),e("#lock-img").data("lockedState","locked"),e("#lock-link-label").text("Unlock"),e(".disabled-on-lock").addClass("disabled")):(this.systemLockedState="unlocked",e("#lock-img").prop("src",this.lockImages.unlocked),e("#lock-img").data("lockedState","unlocked"),e("#lock-link-label").text("Lock"),e(".disabled-on-lock").removeClass("disabled"))},w.prototype.toggleSecurityMode=function(){if("unlocked"===this.systemLockedState)this.setSecurityMode("locked"),e("#content-area > .uk-active").data("disabledOnLock")&&e("#content-dashboard-link > a").click();else{var t=void 0,n=this.registerMapTab.registerMap.find(function(e){var t="stack_nameplate";return gbcIndex&&(t="pack_nameplate"),e.name===t});void 0!=n&&(t=n.registers.find(function(e){return"unlock_password"===e.name})),void 0!=t?this.getPasswordInfo(e.proxy(function(t){""===t?this.setSecurityMode("unlocked"):(e("#popup-unlock").css("display","flex"),e("#unlock-password").focus())},this)):this.setSecurityMode("unlocked")}},w.prototype.getPasswordInfo=function(t){var n="stack_nameplate[0].unlock_password";gbcIndex&&(n="pack_nameplate[0].unlock_password"),this.api.readBmsRegisters([n],e.proxy(function(e){t(e[n])},this),function(){console.log("Failed to get BMS Password Info")})},w.prototype.updateBmsLabel=function(t){var n=["stack_nameplate[0].label0","stack_nameplate[0].label1","stack_nameplate[0].label2","stack_nameplate[0].label3"];gbcIndex&&(n=["pack_nameplate[0].label0","pack_nameplate[0].label1","pack_nameplate[0].label2","pack_nameplate[0].label3"]),this.api.readBmsRegisters(n,e.proxy(function(i){for(var r="",o=0;o<n.length;o++)r+=i[n[o]];e("#bms-label-div").html(r),t()},this),function(){console.log("Failed to Update BMS Label"),t()})},w.prototype.updateServiceModeStatus=function(t,n,i){switch(t){case"Service":e("#content-details").addClass("service-mode"),e("#content-dashboard-link").addClass("uk-disabled"),e("#content-details-link").addClass("uk-disabled"),e("#service-mode-status").text("Service Lockout").show(),e("#content-dashboard").addClass("blur"),e("#dashboard-overlay").show(),e("#content-details").addClass("blur"),e("#details-overlay").show();break;case"Initializing":e("#content-details").addClass("service-mode"),e("#content-dashboard-link").addClass("uk-disabled"),e("#content-details-link").removeClass("uk-disabled"),e("#service-mode-status").text("Exiting Lockout").show(),e("#content-dashboard").addClass("blur"),e("#dashboard-overlay").show(),e("#content-details").removeClass("blur"),e("#details-overlay").hide();break;case"Uninitializing":e("#content-details").addClass("service-mode"),e("#content-dashboard-link").addClass("uk-disabled"),e("#content-details-link").addClass("uk-disabled"),e("#service-mode-status").text("Entering Lockout").show(),e("#content-dashboard").addClass("blur"),e("#dashboard-overlay").show(),e("#content-details").addClass("blur"),e("#details-overlay").show();break;case"Operating":e("#content-details").removeClass("service-mode"),e("#content-dashboard-link").removeClass("uk-disabled"),e("#content-details-link").removeClass("uk-disabled"),e("#service-mode-status").hide(),e("#content-dashboard").removeClass("blur"),e("#dashboard-overlay").hide(),e("#content-details").removeClass("blur"),e("#details-overlay").hide();break;default:e("#content-details").addClass("service-mode"),e("#content-dashboard-link").addClass("uk-disabled"),e("#content-details-link").addClass("uk-disabled"),e("#service-mode-status").text("Lockout Error").show(),e("#content-dashboard").addClass("blur"),e("#dashboard-overlay").show(),e("#content-details").addClass("blur"),e("#details-overlay").show()}this.serviceModeTab.updateServiceMode(t,n,i)},w.prototype.render=function(){JSON.parse(localStorage.settings);var t=null;(t=document.createElement("div")).id="header-container",t.innerHTML='<div id="nuvation-logo-div"><img id="nuvation-bms-logo" src="img/logo.png"></div><div><div id="bms-label-div"></div><div id="service-mode-div"><div id="service-mode-status"></div></div></div><div id="customer-logo-div"><div id="customer-logo">&nbsp</div></div>';document.body.appendChild(t);(t=document.createElement("div")).id="popup-unlock",t.className="popup",t.innerHTML='<div>    <div id="unlock-error">Error: Invalid password</div>    <div>        Password:&nbsp;        <input id="unlock-password" type="password">    </div>    <div id="unlock-buttons">        <button id="unlock-cancel" class="uk-button">Cancel</button>        <button id="unlock-ok" class="uk-button">OK</button>    </div></div>',document.body.appendChild(t),(t=document.createElement("nav")).className="uk-navbar";var n=document.body.appendChild(t);(t=document.createElement("ul")).className="uk-navbar-nav",t.setAttribute("data-uk-switcher","{connect:'#content-area', toggle: '.toggle-link', swiping: false}"),this.navBarNavigation=n.appendChild(t),(t=document.createElement("ul")).className="uk-switcher",t.id="content-area";var i=document.body.appendChild(t);(t=document.createElement("div")).id="footer-container",document.body.appendChild(t),t.innerHTML='<hr><div>    <div id="footer-version">Babbage Update 1 (18.08.1)</div>    <img id="nuvation-energy-logo-footer" src="img/NuvationEnergyLogo_Horizontal_Color.png">    <div id="footer-copywrite-and-ip">        <div>&copy; 2018</div>        <div><span id="bms-ip-address">0.0.0.0</span></div>    </div></div>';for(var r=0;r<this.tabObjects.length;r++){var o=this.tabObjects[r];(t=document.createElement("li")).innerHTML='<a class="nav-link" href="">'+o.name+"</a>",t.id=o.linkId,t.className=o.disabledOnLock?"toggle-link disabled-on-lock":"toggle-link",o.navElement=this.navBarNavigation.appendChild(t),(t=document.createElement("li")).id=o.id,t.dataset.disabledOnLock=o.disabledOnLock,o.parent=i.appendChild(t)}(t=document.createElement("li")).className="uk-parent",t.id="settings-btn-container",t.setAttribute("data-uk-dropdown","{mode:'click'}");var a=this.navBarNavigation.appendChild(t);t=document.createElement("a");var s=a.appendChild(t);(t=document.createElement("span")).className="uk-icon-cog uk-icon-small",s.appendChild(t),(t=document.createElement("div")).className="uk-dropdown uk-dropdown-navbar",t.id="settings-dropdown-container";var l=a.appendChild(t);(t=document.createElement("ul")).className="uk-nav uk-nav-navbar",t.id="settings-dropdown";var c=l.appendChild(t);for(r=0;r<this.dropDownObjects.length;r++){var u=this.dropDownObjects[r];(t=document.createElement("li")).innerHTML='<a class="nav-link" href="">'+u.name+"</a>",t.id=u.linkId,t.className=u.disabledOnLock?"toggle-link uk-dropdown-close disabled-on-lock":"toggle-link uk-dropdown-close",u.navElement=c.appendChild(t),(t=document.createElement("li")).id=u.id,t.dataset.disabledOnLock=u.disabledOnLock,u.parent=i.appendChild(t)}(t=document.createElement("li")).id="lock-link",t.onclick=e.proxy(function(){this.toggleSecurityMode()},this);var d=c.insertBefore(t,c.lastChild);(t=document.createElement("a")).className="nav-link";var h=d.appendChild(t);(t=document.createElement("span")).id="lock-link-label",h.appendChild(t),(t=document.createElement("li")).className="uk-parent",t.id="lock-container",this.navBarNavigation.appendChild(t),t.innerHTML='<img id="lock-img" src="img/locked.png">'},w.prototype.initialize=function(){var t=this;this.render();for(var n=this.tabObjects.concat(this.dropDownObjects),i=0;i<n.length;i++){var r=n[i];r.tab.render(r.id,r.parent),r.navElement.onclick=r.onclick}this.dashboardTab.tabObjects=n,this.dashboardTab.navBarNavigation=this.navBarNavigation,this.dashboardTab.startRefresh(),this.setSecurityMode("locked");var o=e.proxy(function(){this.serviceModeTab.fwUpgradeView.stopPolling?this.labelUpdate=setTimeout(o,15e3):this.updateBmsLabel(e.proxy(function(){this.labelUpdate=setTimeout(o,15e3)},this))},this);this.labelUpdate=setTimeout(o,0);var a=e.proxy(function(){!this.serviceModeTab.fwUpgradeView.stopPolling&&this.serviceModeTab.pollServiceMode?t.serviceModeTab.serviceModeHelper.updateCurrentOpMode(function(e,n,i){"Disconnected"!=e&&t.updateServiceModeStatus(e,n,i),this.serviceModeUpdate=setTimeout(a,1e3)}):this.serviceModeUpdate=setTimeout(a,1e3)},this);!gbcIndex&&this.api.nameResolver.resolveComponentName("sc_op_state").length&&this.api.nameResolver.resolveComponentName("pi_op_state").length&&(this.serviceModeUpdate=setTimeout(a,0)),e("#popup-unlock > div").on("click",function(e){e.stopPropagation()});var s=function(){e("#popup-unlock").hide(),e("#unlock-password").val(""),e("#unlock-error").hide()},l=function(){this.getPasswordInfo(e.proxy(function(t){CryptoJS.PBKDF2(e("#unlock-password").val(),"BMS!",{keySize:1}).toString()===t?(this.setSecurityMode("unlocked"),s()):e("#unlock-error").show()},this))}.bind(this);e("#popup-unlock, #unlock-cancel").on("click",s),e("#unlock-ok").on("click",l),e("#unlock-password").keypress(function(e){13===e.which&&l()})},e(function(){null===localStorage.getItem("browser-id")&&localStorage.setItem("browser-id",Math.floor(Math.random()*Math.pow(2,32)).toString());var e=new b.JsonRpcClient(defaultUrl);e.rpcTimeout=defaultTimeout;var t,n=new _.Resolver,v=new y.NamedApi(e,n);t=gbcIndex?new i.PackDashboardTab(v):new r.StackDashboardTab(v);var k=new o.DetailsTab(v),x=new a.RegisterMapTab(v),C=new l.FileStore,T=new l.FwUpgrade(defaultUrl,v,C),S=new s.FwUpgradeView(T,v),D=new u.ConfigUpload(v),A=new d.ConfigDownload(v),M=new c.ConfigurationView(v,D,A),E=new f.StacksTab(v),I=new g.SettingsTab(v,T),R=new p.ServiceModeHelper(v),P=new h.ServiceModeTab(R,M,S),L=new m.AboutTab(v);configuratorApp=new w(v,t,E,k,x,P,I,L),document.body.innerHTML="Connecting to IP: "+I.ipAddress+"... Please wait.",v.getRegisterMap(function(){document.body.innerHTML="",configuratorApp.initialize(),configuratorAppIsInitialized=!0},function(e){document.body.innerHTML="",I.render("",document.body),document.body.appendChild(document.createElement("br")),document.body.appendChild(document.createTextNode("Connection error: "+e))})})}),requirejs.config({urlArgs:"t="+(new Date).getTime(),paths:{jquery:"externals/jquery/jquery-1.11.2.min",uikit:"externals/uikit-2.27.2/js/uikit.min","uikit.accordion":"externals/uikit-2.27.2/js/components/accordion.min","uikit.fontawesome":"externals/uikit-2.27.2/fonts/fontawesome-webfont.ttf","uikit.formselect":"externals/uikit-2.27.2/js/components/form-select.min",kendo:"externals/kendo/kendo.all.min",filesaver:"externals/FileSaver.js/FileSaver.min",cryptojs:"externals/CryptoJS-3.1.2/pbkdf2",d3:"externals/d3/d3.min",epoch:"externals/epoch/epoch.min",jasmine:"externals/jasmine/jasmine","jasmine-html":"externals/jasmine/jasmine-html",boot:"externals/jasmine/boot"},config:{uikit:{base:"externals/uikit-2.27.2/js"}},shim:{epoch:{deps:["jquery","d3"]},kendo:{deps:["jquery"]},uikit:{deps:["jquery"]},"uikit.accordion":{deps:["uikit"]},"uikit.formselect":{deps:["uikit"]}}}),shouldRunJasmineTests||requirejs(["jquery","uikit","uikit.accordion","uikit.formselect","kendo","filesaver","js/main"]),define("app",function(){});